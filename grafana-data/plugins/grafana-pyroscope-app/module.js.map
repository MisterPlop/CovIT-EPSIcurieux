{"version":3,"file":"module.js","mappings":"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","sources":["webpack:///../node_modules/@protobufjs/aspromise/index.js","webpack:///../node_modules/@protobufjs/base64/index.js","webpack:///../node_modules/@protobufjs/codegen/index.js","webpack:///../node_modules/@protobufjs/eventemitter/index.js","webpack:///../node_modules/@protobufjs/fetch/index.js","webpack:///../node_modules/@protobufjs/float/index.js","webpack:///../node_modules/@protobufjs/inquire/index.js","webpack:///../node_modules/@protobufjs/path/index.js","webpack:///../node_modules/@protobufjs/pool/index.js","webpack:///../node_modules/@protobufjs/utf8/index.js","webpack:///../node_modules/color-convert/conversions.js","webpack:///../node_modules/color-convert/index.js","webpack:///../node_modules/color-convert/route.js","webpack:///../node_modules/color-name/index.js","webpack:///../node_modules/color-string/index.js","webpack:///../node_modules/color/index.js","webpack:///../node_modules/file-saver/dist/FileSaver.min.js","webpack:///../node_modules/lodash.isequal/index.js","webpack:///../node_modules/object-assign/index.js","webpack:///../node_modules/prop-types/factoryWithThrowingShims.js","webpack:///../node_modules/prop-types/index.js","webpack:///../node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack:///../node_modules/protobufjs/light.js","webpack:///../node_modules/protobufjs/src/converter.js","webpack:///../node_modules/protobufjs/src/decoder.js","webpack:///../node_modules/protobufjs/src/encoder.js","webpack:///../node_modules/protobufjs/src/enum.js","webpack:///../node_modules/protobufjs/src/field.js","webpack:///../node_modules/protobufjs/src/index-light.js","webpack:///../node_modules/protobufjs/src/index-minimal.js","webpack:///../node_modules/protobufjs/src/mapfield.js","webpack:///../node_modules/protobufjs/src/message.js","webpack:///../node_modules/protobufjs/src/method.js","webpack:///../node_modules/protobufjs/src/namespace.js","webpack:///../node_modules/protobufjs/src/object.js","webpack:///../node_modules/protobufjs/src/oneof.js","webpack:///../node_modules/protobufjs/src/reader.js","webpack:///../node_modules/protobufjs/src/reader_buffer.js","webpack:///../node_modules/protobufjs/src/root.js","webpack:///../node_modules/protobufjs/src/roots.js","webpack:///../node_modules/protobufjs/src/rpc.js","webpack:///../node_modules/protobufjs/src/rpc/service.js","webpack:///../node_modules/protobufjs/src/service.js","webpack:///../node_modules/protobufjs/src/type.js","webpack:///../node_modules/protobufjs/src/types.js","webpack:///../node_modules/protobufjs/src/util.js","webpack:///../node_modules/protobufjs/src/util/longbits.js","webpack:///../node_modules/protobufjs/src/util/minimal.js","webpack:///../node_modules/protobufjs/src/verifier.js","webpack:///../node_modules/protobufjs/src/wrappers.js","webpack:///../node_modules/protobufjs/src/writer.js","webpack:///../node_modules/protobufjs/src/writer_buffer.js","webpack:///../node_modules/react-draggable/build/cjs/Draggable.js","webpack:///../node_modules/react-draggable/build/cjs/DraggableCore.js","webpack:///../node_modules/react-draggable/build/cjs/cjs.js","webpack:///../node_modules/react-draggable/build/cjs/utils/domFns.js","webpack:///../node_modules/react-draggable/build/cjs/utils/getPrefix.js","webpack:///../node_modules/react-draggable/build/cjs/utils/log.js","webpack:///../node_modules/react-draggable/build/cjs/utils/positionFns.js","webpack:///../node_modules/react-draggable/build/cjs/utils/shims.js","webpack:///../node_modules/react-draggable/node_modules/clsx/dist/clsx.m.js","webpack:///../node_modules/react-fast-compare/index.js","webpack:///../node_modules/react-grid-layout/build/GridItem.js","webpack:///../node_modules/react-grid-layout/build/ReactGridLayout.js","webpack:///../node_modules/react-grid-layout/build/ReactGridLayoutPropTypes.js","webpack:///../node_modules/react-grid-layout/build/ResponsiveReactGridLayout.js","webpack:///../node_modules/react-grid-layout/build/calculateUtils.js","webpack:///../node_modules/react-grid-layout/build/components/WidthProvider.js","webpack:///../node_modules/react-grid-layout/build/fastRGLPropsEqual.js","webpack:///../node_modules/react-grid-layout/build/responsiveUtils.js","webpack:///../node_modules/react-grid-layout/build/utils.js","webpack:///../node_modules/react-grid-layout/index.js","webpack:///../node_modules/react-grid-layout/node_modules/clsx/dist/clsx.m.js","webpack:///../node_modules/react-resizable/build/Resizable.js","webpack:///../node_modules/react-resizable/build/ResizableBox.js","webpack:///../node_modules/react-resizable/build/propTypes.js","webpack:///../node_modules/react-resizable/build/utils.js","webpack:///../node_modules/react-resizable/index.js","webpack:///../node_modules/react-side-effect/lib/index.js","webpack:///../node_modules/react-use/lib/useDebounce.js","webpack:///../node_modules/react-use/lib/usePrevious.js","webpack:///../node_modules/react-use/lib/useTimeoutFn.js","webpack:///../node_modules/react/cjs/react-jsx-runtime.production.min.js","webpack:///../node_modules/react/jsx-runtime.js","webpack:///../node_modules/semver/classes/comparator.js","webpack:///../node_modules/semver/classes/range.js","webpack:///../node_modules/semver/classes/semver.js","webpack:///../node_modules/semver/functions/clean.js","webpack:///../node_modules/semver/functions/cmp.js","webpack:///../node_modules/semver/functions/coerce.js","webpack:///../node_modules/semver/functions/compare-build.js","webpack:///../node_modules/semver/functions/compare-loose.js","webpack:///../node_modules/semver/functions/compare.js","webpack:///../node_modules/semver/functions/diff.js","webpack:///../node_modules/semver/functions/eq.js","webpack:///../node_modules/semver/functions/gt.js","webpack:///../node_modules/semver/functions/gte.js","webpack:///../node_modules/semver/functions/inc.js","webpack:///../node_modules/semver/functions/lt.js","webpack:///../node_modules/semver/functions/lte.js","webpack:///../node_modules/semver/functions/major.js","webpack:///../node_modules/semver/functions/minor.js","webpack:///../node_modules/semver/functions/neq.js","webpack:///../node_modules/semver/functions/parse.js","webpack:///../node_modules/semver/functions/patch.js","webpack:///../node_modules/semver/functions/prerelease.js","webpack:///../node_modules/semver/functions/rcompare.js","webpack:///../node_modules/semver/functions/rsort.js","webpack:///../node_modules/semver/functions/satisfies.js","webpack:///../node_modules/semver/functions/sort.js","webpack:///../node_modules/semver/functions/valid.js","webpack:///../node_modules/semver/index.js","webpack:///../node_modules/semver/internal/constants.js","webpack:///../node_modules/semver/internal/debug.js","webpack:///../node_modules/semver/internal/identifiers.js","webpack:///../node_modules/semver/internal/lrucache.js","webpack:///../node_modules/semver/internal/parse-options.js","webpack:///../node_modules/semver/internal/re.js","webpack:///../node_modules/semver/ranges/gtr.js","webpack:///../node_modules/semver/ranges/intersects.js","webpack:///../node_modules/semver/ranges/ltr.js","webpack:///../node_modules/semver/ranges/max-satisfying.js","webpack:///../node_modules/semver/ranges/min-satisfying.js","webpack:///../node_modules/semver/ranges/min-version.js","webpack:///../node_modules/semver/ranges/outside.js","webpack:///../node_modules/semver/ranges/simplify.js","webpack:///../node_modules/semver/ranges/subset.js","webpack:///../node_modules/semver/ranges/to-comparators.js","webpack:///../node_modules/semver/ranges/valid.js","webpack:///../node_modules/simple-swizzle/index.js","webpack:///../node_modules/simple-swizzle/node_modules/is-arrayish/index.js","webpack:///../node_modules/ua-parser-js/src/ua-parser.js","webpack:///external amd \"@emotion/css\"","webpack:///external amd \"@grafana/data\"","webpack:///external amd \"@grafana/runtime\"","webpack:///external amd \"@grafana/ui\"","webpack:///external amd \"d3\"","webpack:///external amd \"lodash\"","webpack:///external amd \"react\"","webpack:///external amd \"react-dom\"","webpack:///external amd \"react-router-dom\"","webpack:///external amd \"rxjs\"","webpack:///../node_modules/tslib/tslib.es6.mjs","webpack:///webpack/bootstrap","webpack:///webpack/runtime/amd options","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///../node_modules/@tanstack/query-core/build/modern/utils.js","webpack:///../node_modules/@tanstack/query-core/build/modern/notifyManager.js","webpack:///../node_modules/@tanstack/query-core/build/modern/subscribable.js","webpack:///../node_modules/@tanstack/query-core/build/modern/focusManager.js","webpack:///../node_modules/@tanstack/query-core/build/modern/onlineManager.js","webpack:///../node_modules/@tanstack/query-core/build/modern/retryer.js","webpack:///../node_modules/@tanstack/query-core/build/modern/removable.js","webpack:///../node_modules/@tanstack/query-core/build/modern/query.js","webpack:///../node_modules/@tanstack/query-core/build/modern/queryCache.js","webpack:///../node_modules/@tanstack/query-core/build/modern/mutation.js","webpack:///../node_modules/@tanstack/query-core/build/modern/mutationCache.js","webpack:///../node_modules/@tanstack/query-core/build/modern/infiniteQueryBehavior.js","webpack:///./shared/infrastructure/react-query/queryClient.ts","webpack:///../node_modules/@tanstack/query-core/build/modern/queryClient.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/transports/const.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/utils/date.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/utils/is.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/utils/deepEqual.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/api/exceptions/const.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/api/exceptions/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/utils/logLevels.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/api/logs/const.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/utils/noop.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/internalLogger/const.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/unpatchedConsole/const.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/internalLogger/createInternalLogger.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/internalLogger/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/globalObject/globalObject.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/version.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/sdk/const.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/sdk/registerFaro.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/sdk/internalFaroGlobalObject.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/sdk/faroGlobalObject.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/transports/batchExecutor.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/transports/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/unpatchedConsole/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/metas/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/api/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/api/traces/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/api/meta/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/api/logs/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/api/measurements/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/api/events/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/instrumentations/initialize.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/metas/registerInitial.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/utils/sourceMaps.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/transports/registerInitial.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/instrumentations/registerInitial.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/config/const.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/const.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/buildStackFrame.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/getDataFromSafariExtensions.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/getStackFramesFromError.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/parseStacktrace.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/sessionConstants.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/consts.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/metas/const.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/metas/browser/meta.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/metas/page/meta.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/metas/k6/meta.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/extensions/baseExtension.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/transports/base.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/transports/utils.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/utils/throttle.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/utils/webStorage.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/sampling.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/utils/shortId.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/sessionManagerUtils.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/PersistentSessionsManager.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/VolatileSessionManager.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/getSessionManagerByConfig.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/transports/fetch/transport.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/utils/promiseBuffer.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/instrumentations/base.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/const.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/getErrorDetails.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/instrumentation.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/registerOnunhandledrejection.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/registerOnerror.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/getValueAndTypeFromMessage.js","webpack:///../node_modules/web-vitals/dist/web-vitals.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/webVitals/webVitalsBasic.js","webpack:///../node_modules/web-vitals/dist/web-vitals.attribution.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/instrumentationConstants.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/webVitals/webVitalsWithAttribution.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/webVitals/instrumentation.js","webpack:///../node_modules/@grafana/faro-core/dist/esm/semantic.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/instrumentation.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/metas/session/createSession.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/view/instrumentation.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/performanceConstants.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/performanceUtils.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/resource.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/instrumentation.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/navigation.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/console/instrumentation.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/config/getWebInstrumentations.js","webpack:///./constants.ts","webpack:///./version.ts","webpack:///./shared/infrastructure/tracking/getEnvironment.ts","webpack:///./shared/infrastructure/tracking/faro/faro-environments.ts","webpack:///./shared/infrastructure/tracking/faro/faro.ts","webpack:///../node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js","webpack:///./shared/infrastructure/tracking/logger.ts","webpack:///./shared/infrastructure/userStorage.ts","webpack:///./shared/domain/noOp.ts","webpack:///./shared/infrastructure/http/HttpClientError.ts","webpack:///./shared/infrastructure/http/HttpClient.ts","webpack:///./shared/infrastructure/http/ApiClient.ts","webpack:///../node_modules/@tanstack/query-core/build/modern/queryObserver.js","webpack:///../node_modules/@tanstack/react-query/build/modern/QueryErrorResetBoundary.js","webpack:///../node_modules/@tanstack/react-query/build/modern/isRestoring.js","webpack:///../node_modules/@tanstack/react-query/build/modern/utils.js","webpack:///../node_modules/@tanstack/react-query/build/modern/errorBoundaryUtils.js","webpack:///../node_modules/@tanstack/react-query/build/modern/suspense.js","webpack:///../node_modules/@tanstack/react-query/build/modern/useQuery.js","webpack:///../node_modules/@tanstack/react-query/build/modern/useBaseQuery.js","webpack:///./app/components/Onboarding/infrastructure/statsApiClient.ts","webpack:///./shared/components/QueryAnalysisTooltip/QueryAnalysisTooltip.tsx","webpack:///../node_modules/react-helmet/es/Helmet.js","webpack:///./shared/ui/PluginInfo.tsx","webpack:///./shared/ui/PyroscopeLogo.tsx","webpack:///./shared/ui/PageTitle.tsx","webpack:///./app/components/Onboarding/ui/EmptyLoadingPage.tsx","webpack:///./app/components/Onboarding/ui/StyledLink.tsx","webpack:///./app/components/Onboarding/ui/NoDataSourcePage.tsx","webpack:///./app/components/Onboarding/ui/OnboardingModal.tsx","webpack:///./app/components/Onboarding/domain/useOnboardingModal.tsx","webpack:///./app/components/Onboarding/infrastructure/useFetchInstances.tsx","webpack:///./app/components/Onboarding/ui/OnboardingPage.tsx","webpack:///./app/components/Onboarding/Onboarding.tsx","webpack:///./app/components/Onboarding/domain/useOnboarding.tsx","webpack:///./app/components/Onboarding/infrastructure/useFetchTenantStats.ts","webpack:///./shared/domain/prefixRouteWithPluginBaseUrl.ts","webpack:///./pages/AdHocView/ui/AdHocColums.tsx","webpack:///./shared/domain/displayStatus.ts","webpack:///./pages/AdHocView/infrastructure/adHocProfileClient.ts","webpack:///./pages/AdHocView/infrastructure/helpers/stripBase64Prefix.ts","webpack:///./pages/AdHocView/domain/useUploadFile.ts","webpack:///./pages/AdHocView/ui/AdHocFileDropZone.tsx","webpack:///./pages/AdHocView/domain/accepted-file-types.ts","webpack:///../node_modules/@leeoniya/ufuzzy/dist/uFuzzy.esm.js","webpack:///../node_modules/react-use/esm/misc/util.js","webpack:///../node_modules/react-use/esm/useIsomorphicLayoutEffect.js","webpack:///../node_modules/react-use/esm/useMeasure.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/constants.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraph/FlameGraphContextMenu.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraph/FlameGraphTooltip.js","webpack:///../node_modules/tinycolor2/esm/tinycolor.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/types.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraph/colors.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraph/rendering.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraph/murmur3.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraph/FlameGraphCanvas.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraph/FlameGraphMetadata.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraph/FlameGraph.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraph/treeTransforms.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraph/dataTransform.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraphHeader.js","webpack:///../node_modules/react-virtualized-auto-sizer/dist/react-virtualized-auto-sizer.esm.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/TopTable/FlameGraphTopTableContainer.js","webpack:///../node_modules/@grafana/flamegraph/dist/esm/FlameGraphContainer.js","webpack:///./shared/domain/reportInteraction.ts","webpack:///../node_modules/fflate/esm/browser.js","webpack:///../node_modules/compression-streams-polyfill/esm/ponyfill.mjs","webpack:///../node_modules/compression-streams-polyfill/esm/index.mjs","webpack:///./shared/components/FlameGraph/components/infrastructure/flamegraphDotComApiClient.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/domain/types.ts","webpack:///./shared/components/FlameGraph/components/domain/getExportFilename.ts","webpack:///./shared/components/FlameGraph/components/ExportMenu.tsx","webpack:///./shared/components/FlameGraph/components/domain/useExportMenu.ts","webpack:///./shared/components/FlameGraph/components/ExportData.tsx","webpack:///./shared/components/FlameGraph/domain/flamebearerToDataFrameDTO.ts","webpack:///./shared/components/FlameGraph/FlameGraph.tsx","webpack:///./pages/AdHocView/ui/AdHocFlameGraph.tsx","webpack:///./pages/AdHocView/ui/AdHocProfileTypeSelector.tsx","webpack:///./pages/AdHocView/ui/AdHocSpinner.tsx","webpack:///./pages/AdHocView/ui/tabs/AdHocSingle.tsx","webpack:///./pages/AdHocView/ui/tabs/AdHocComparison.tsx","webpack:///./pages/AdHocView/ui/AdHocTabs.tsx","webpack:///./pages/AdHocView/AdHocView.tsx","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneApp/utils.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/VizPanel/registerRuntimePanelPlugin.js","webpack:///../node_modules/uuid/dist/esm-browser/native.js","webpack:///../node_modules/uuid/dist/esm-browser/rng.js","webpack:///../node_modules/uuid/dist/esm-browser/stringify.js","webpack:///../node_modules/uuid/dist/esm-browser/v4.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/SceneComponentWrapper.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/events.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/SceneObjectRef.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/SceneObjectBase.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/sceneGraph/utils.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/RuntimeDataSource.js","webpack:///../node_modules/@grafana/scenes/dist/esm/services/UniqueUrlKeyMapper.js","webpack:///../node_modules/@grafana/scenes/dist/esm/services/utils.js","webpack:///../node_modules/@grafana/schema/dist/esm/common/common.gen.js","webpack:///../node_modules/@grafana/schema/dist/esm/veneer/common.types.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/SceneDataNode.js","webpack:///../node_modules/@grafana/scenes/dist/esm/services/SceneObjectUrlSyncConfig.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/parseUrlParam.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/evaluateTimeRange.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/SceneTimeRange.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/interpolation/defaults.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/sceneGraph/getTimeRange.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/types.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/interpolation/fieldAccessorCache.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/interpolation/ScopedVarsVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/interpolation/formatRegistry.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/constants.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/lookupVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/interpolation/sceneInterpolator.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/types.js","webpack:///../node_modules/@grafana/scenes/dist/esm/behaviors/SceneQueryController.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/sceneGraph/sceneGraph.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/macros/types.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/macros/timeMacros.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/macros/AllVariablesMacro.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/macros/templateProxies.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/macros/dataMacros.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/macros/urlMacros.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/macros/index.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/macros/contextMacros.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/sceneGraph/index.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/getDataSource.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/writeSceneLog.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/VariableDependencyConfig.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/VariableValueRecorder.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/ExtraQueryProvider.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/extraQueryProcessingOperator.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/layers/annotations/filterAnnotations.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/getEnrichedDataRequest.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/adhoc/patchGetAdhocFilters.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/registerQueryWithController.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/groupby/findActiveGroupByVariablesByUid.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/utils.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/MultiValueVariable.js","webpack:///../node_modules/@grafana/scenes/node_modules/@grafana/e2e-selectors/dist/esm/selectors/components.js","webpack:///../node_modules/@grafana/scenes/node_modules/@grafana/e2e-selectors/dist/esm/selectors/pages.js","webpack:///../node_modules/@grafana/scenes/node_modules/@grafana/e2e-selectors/dist/esm/selectors/index.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/components/getOptionSearcher.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/components/VariableValueSelect.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/groupby/GroupByVariableUrlSyncHandler.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/getEnrichedFiltersRequest.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/groupby/GroupByVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/LoadingIndicator.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/ControlsLabel.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/adhoc/AdHocFilterRenderer.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/adhoc/AdHocFilterBuilder.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/adhoc/AdHocFiltersVariableUrlSyncHandler.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/adhoc/AdHocFiltersVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/DataLayersMerger.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/SceneQueryRunner.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/utils.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/dashboard/x/dashboard_types.gen.js","webpack:///../node_modules/@grafana/scenes/dist/esm/behaviors/CursorSync.js","webpack:///../node_modules/@grafana/scenes/node_modules/react-use/esm/misc/util.js","webpack:///../node_modules/@grafana/scenes/node_modules/react-use/esm/useIsomorphicLayoutEffect.js","webpack:///../node_modules/@grafana/scenes/node_modules/react-use/esm/useMeasure.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/VizPanel/VizPanelRenderer.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/VizPanel/seriesVisibilityConfigFactory.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/VizPanel/colorSeriesConfigFactory.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/VizPanel/VizPanel.js","webpack:///../node_modules/@grafana/scenes/dist/esm/behaviors/LiveNowTimer.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/getMessageFromError.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/layers/SceneDataLayerBase.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/layers/SceneDataLayerControls.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack:///../node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack:///../node_modules/rxjs/dist/esm5/internal/config.js","webpack:///../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack:///../node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack:///../node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js","webpack:///../node_modules/rxjs/dist/esm5/internal/symbol/observable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack:///../node_modules/rxjs/dist/esm5/internal/Observable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/pipe.js","webpack:///../node_modules/rxjs/dist/esm5/internal/symbol/iterator.js","webpack:///../node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isPromise.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isIterable.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js","webpack:///../node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js","webpack:///../node_modules/rxjs/dist/esm5/internal/operators/mergeInternals.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/layers/annotations/standardAnnotationsSupport.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/layers/annotations/standardAnnotationQuery.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/layers/annotations/utils.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/layers/annotations/AnnotationsDataLayer.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/SceneTimeZoneOverride.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/SceneDataLayerSet.js","webpack:///../node_modules/@grafana/scenes/dist/esm/querying/SceneDataTransformer.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/components/VariableValueSelectors.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/components/VariableValueControl.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/sets/SceneVariableSet.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/ConstantVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/CustomVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/DataSourceVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/query/guards.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/query/createQueryVariableRunner.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/query/utils.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/query/QueryVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/query/toMetricFindValues.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/metricTree.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/TestVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/components/VariableValueInput.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/TextBoxVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/LocalValueVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/variables/variants/IntervalVariable.js","webpack:///../node_modules/@grafana/scenes/dist/esm/services/UrlSyncManager.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/EmbeddedScene.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/compatibility/setWindowGrafanaSceneContext.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/VizPanel/VizPanelMenu.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/grid/SceneGridItem.js","webpack:///../node_modules/@grafana/scenes/node_modules/react-virtualized-auto-sizer/dist/index.esm.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/LazyLoader.js","webpack:///../node_modules/@grafana/scenes/node_modules/react-use/esm/useEffectOnce.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/grid/SceneGridLayoutRenderer.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/grid/utils.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/grid/SceneGridLayout.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/grid/constants.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/grid/SceneGridRow.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/NestedScene.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneCanvasText.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneToolbarButton.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneTimePicker.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneRefreshPicker.js","webpack:///../node_modules/@grafana/scenes/dist/esm/utils/getCompareSeriesRefId.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneTimeRangeCompare.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneByFrameRepeater.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneByVariableRepeater.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneControlsSpacer.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/SceneFlexLayout.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/CSSGrid/SceneCSSGridLayout.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/split/Splitter.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/split/SplitLayout.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/layout/split/SplitLayoutRenderer.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneApp/SceneApp.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneReactObject.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneDebugger/DebugDetails.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneDebugger/DebugTreeNode.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneDebugger/SceneDebugger.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneApp/SceneAppPageView.js","webpack:///../node_modules/@grafana/scenes/dist/esm/components/SceneApp/SceneAppPage.js","webpack:///../node_modules/@grafana/schema/dist/esm/common.gen-8ea2300f.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/composable/barchart/panelcfg/x/BarChartPanelCfg_types.gen.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/composable/bargauge/panelcfg/x/BarGaugePanelCfg_types.gen.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/composable/histogram/panelcfg/x/HistogramPanelCfg_types.gen.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/composable/gauge/panelcfg/x/GaugePanelCfg_types.gen.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/composable/heatmap/panelcfg/x/HeatmapPanelCfg_types.gen.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/composable/stat/panelcfg/x/StatPanelCfg_types.gen.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/composable/statetimeline/panelcfg/x/StateTimelinePanelCfg_types.gen.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/composable/statushistory/panelcfg/x/StatusHistoryPanelCfg_types.gen.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/composable/table/panelcfg/x/TablePanelCfg_types.gen.js","webpack:///../node_modules/@grafana/schema/dist/esm/raw/composable/xychart/panelcfg/x/XYChartPanelCfg_types.gen.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/PanelBuilders/StandardFieldConfigBuilders.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/PanelBuilders/FieldConfigOverridesBuilder.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/PanelBuilders/FieldConfigBuilder.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/PanelBuilders/PanelOptionsBuilder.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/PanelBuilders/VizPanelBuilder.js","webpack:///../node_modules/@grafana/scenes/dist/esm/core/PanelBuilders/index.js","webpack:///../node_modules/@grafana/scenes/dist/esm/index.js","webpack:///./shared/domain/prepareHistoryEntry.ts","webpack:///./pages/ProfilesExplorerView/domain/events/EventTimeseriesDataReceived.ts","webpack:///./shared/components/QueryBuilder/domain/types.ts","webpack:///../node_modules/xstate/es/_virtual/_tslib.js","webpack:///../node_modules/xstate/es/types.js","webpack:///../node_modules/xstate/es/actionTypes.js","webpack:///../node_modules/xstate/es/utils.js","webpack:///../node_modules/xstate/es/constants.js","webpack:///../node_modules/xstate/es/environment.js","webpack:///../node_modules/xstate/es/stateUtils.js","webpack:///../node_modules/xstate/es/actions.js","webpack:///../node_modules/xstate/es/State.js","webpack:///../node_modules/xstate/es/serviceScope.js","webpack:///../node_modules/xstate/es/Actor.js","webpack:///../node_modules/xstate/es/invokeUtils.js","webpack:///../node_modules/xstate/es/StateNode.js","webpack:///../node_modules/xstate/es/Machine.js","webpack:///../node_modules/xstate/es/scheduler.js","webpack:///../node_modules/xstate/es/registry.js","webpack:///../node_modules/xstate/es/devTools.js","webpack:///../node_modules/xstate/es/interpreter.js","webpack:///../node_modules/xstate/es/behaviors.js","webpack:///../node_modules/nanoid/index.browser.js","webpack:///../node_modules/xstate/es/index.js","webpack:///./pages/ProfilesExplorerView/infrastructure/series/http/DataSourceProxyClient.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/labels/http/LabelsApiClient.ts","webpack:///./shared/infrastructure/MemoryCacheClient.ts","webpack:///./shared/types/helpers/invariant.ts","webpack:///./shared/infrastructure/AbstractRepository.ts","webpack:///./shared/infrastructure/labels/LabelsApiClient.ts","webpack:///./shared/infrastructure/labels/labelsRepository.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/areFiltersEqual.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/buildIsEmptyFilter.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/filtersToQuery.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/getLastFilter.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/isMultipleValuesOperator.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/isPartialFilter.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/isSwitchingOperatorMode.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/queryToFilters.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/toggleCompleteFilters.ts","webpack:///./shared/components/QueryBuilder/domain/actions.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/getFilterUnderEdition.ts","webpack:///./shared/components/QueryBuilder/domain/guards.ts","webpack:///./shared/components/QueryBuilder/infrastructure/operatorsRepository.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/isPrivateLabel.ts","webpack:///./shared/components/QueryBuilder/domain/services.ts","webpack:///./shared/components/QueryBuilder/domain/states/autoSuggestProxy.ts","webpack:///./shared/components/QueryBuilder/ui/constants.ts","webpack:///./shared/components/QueryBuilder/domain/helpers/isRegexOperator.ts","webpack:///./shared/components/QueryBuilder/domain/states/idle.ts","webpack:///./shared/components/QueryBuilder/domain/states/loadLabels.ts","webpack:///./shared/components/QueryBuilder/domain/states/loadLabelValues.ts","webpack:///./shared/components/QueryBuilder/domain/states/loadOperators.ts","webpack:///./shared/components/QueryBuilder/domain/stateMachine.ts","webpack:///./shared/components/QueryBuilder/ui/selects/MultipleEditionSelect.tsx","webpack:///./shared/components/QueryBuilder/ui/inputs/SingleEditionInput.tsx","webpack:///./shared/components/QueryBuilder/ui/selects/SingleEditionSelect.tsx","webpack:///./shared/components/QueryBuilder/ui/chiclets/ChicletAttributeOperator.tsx","webpack:///./shared/components/QueryBuilder/ui/chiclets/ChicletAttributeOperatorValue.tsx","webpack:///./shared/components/QueryBuilder/ui/chiclets/PartialChiclet.tsx","webpack:///./shared/components/QueryBuilder/ui/chiclets/Chiclet.tsx","webpack:///./shared/components/QueryBuilder/ui/chiclets/ChicletsList.tsx","webpack:///./shared/components/QueryBuilder/ui/selects/SingleSelect.tsx","webpack:///./shared/components/QueryBuilder/ui/selects/DisabledSelect.tsx","webpack:///./shared/components/QueryBuilder/ui/selects/MultipleSelect.tsx","webpack:///./shared/components/QueryBuilder/QueryBuilder.tsx","webpack:///./shared/components/QueryBuilder/domain/useStateMachine.tsx","webpack:///./shared/components/QueryBuilder/ui/hooks.ts","webpack:///./shared/infrastructure/profile-metrics/getProfileMetric.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/pyroscope-data-sources.ts","webpack:///./pages/ProfilesExplorerView/domain/variables/ProfileMetricVariable.tsx","webpack:///./pages/ProfilesExplorerView/domain/variables/ServiceNameVariable/ServiceNameVariable.tsx","webpack:///./pages/ProfilesExplorerView/domain/variables/ServiceNameVariable/domain/useBuildServiceNameOptions.ts","webpack:///./pages/ProfilesExplorerView/domain/useBuildPyroscopeQuery.ts","webpack:///./pages/ProfilesExplorerView/domain/variables/ProfilesDataSourceVariable.ts","webpack:///./pages/ProfilesExplorerView/domain/variables/FiltersVariable/filters-ops.ts","webpack:///./pages/ProfilesExplorerView/domain/variables/FiltersVariable/FiltersVariable.tsx","webpack:///./pages/ProfilesExplorerView/helpers/getSceneVariableValue.ts","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher.tsx","webpack:///./pages/ProfilesExplorerView/helpers/getColorByIndex.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/helpers/getSeriesLabelFieldName.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/helpers/getSeriesStatsValue.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/timeseries/buildTimeSeriesQueryRunner.ts","webpack:///../node_modules/p-limit/node_modules/yocto-queue/index.js","webpack:///../node_modules/p-limit/index.js","webpack:///./pages/ProfilesExplorerView/helpers/computeRoundedTimeRange.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/labels/LabelsDataSource.ts","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/infrastructure/data-transformations.ts","webpack:///./pages/ProfilesExplorerView/components/SceneLabelValuesBarGauge.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneLabelValuesHistogram.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneLabelValuesTimeseries.tsx","webpack:///./pages/ProfilesExplorerView/helpers/vizPanelBuilder.ts","webpack:///../node_modules/react-inlinesvg/node_modules/react-from-dom/dist/index.mjs","webpack:///../node_modules/react-inlinesvg/dist/index.mjs","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/SceneEmptyState/ui/GrotNotFound.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/SceneEmptyState/ui/useMousePosition.ts","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/SceneEmptyState/ui/EmptyState.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/SceneEmptyState/SceneEmptyState.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/SceneErrorState/SceneErrorState.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/SceneLayoutSwitcher.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/SceneNoDataSwitcher.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/SceneQuickFilter.tsx","webpack:///./pages/ProfilesExplorerView/infrastructure/series/helpers/getProfileMetricLabel.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/favorites/FavoritesDataSource.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/helpers/interpolateQueryRunnerVariables.ts","webpack:///./pages/ProfilesExplorerView/domain/actions/FavAction.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/domain/sortFavGridItems.ts","webpack:///./pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/SceneByVariableRepeaterGrid.tsx","webpack:///./pages/ProfilesExplorerView/domain/events/EventExpandPanel.tsx","webpack:///./pages/ProfilesExplorerView/domain/events/EventSelectLabel.tsx","webpack:///./pages/ProfilesExplorerView/domain/events/EventViewServiceFlameGraph.tsx","webpack:///./pages/ProfilesExplorerView/domain/events/EventViewServiceLabels.tsx","webpack:///./pages/ProfilesExplorerView/domain/events/EventViewServiceProfiles.tsx","webpack:///./pages/ProfilesExplorerView/domain/actions/SelectAction.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreAllServices/SceneExploreAllServices.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneDrawer.tsx","webpack:///./pages/ProfilesExplorerView/domain/variables/FavoriteVariable.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreFavorites/SceneExploreFavorites.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneMainServiceTimeseries.tsx","webpack:///./pages/ProfilesExplorerView/domain/events/EventViewDiffFlameGraph.tsx","webpack:///./pages/ProfilesExplorerView/domain/variables/GroupByVariable/GroupBySelector.tsx","webpack:///../node_modules/@react-aria/utils/dist/useResizeObserver.mjs","webpack:///./pages/ProfilesExplorerView/domain/variables/GroupByVariable/GroupByVariable.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/domain/events/EventSelectForCompare.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/components/SceneStatsPanel/ui/CompareAction.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/components/SceneStatsPanel/ui/StatsPanel.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/components/SceneStatsPanel/SceneStatsPanel.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/components/SceneLabelValuePanel.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/infrastructure/buildLabelValuesGridQueryRunner.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/SceneLabelValuesGrid.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/domain/events/EventClearLabelFromFilters.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/domain/events/EventExcludeLabelFromFilters.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/domain/events/EventIncludeLabelInFilters.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/domain/actions/IncludeExcludeAction/ui/FilterButtons.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/domain/actions/IncludeExcludeAction/IncludeExcludeAction.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/ui/CompareControls.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/SceneGroupByLabels.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceLabels/SceneExploreServiceLabels.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceProfileTypes/SceneExploreServiceProfileTypes.tsx","webpack:///./pages/ProfilesExplorerView/domain/buildTimeRange.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/series/formatSeriesToProfileMetrics.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/series/formatSeriesToServices.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/series/http/DataSourceProxyClientBuilder.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/series/http/formatSeriesResponse.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/series/http/SeriesApiClient.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/series/http/seriesRepository.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/series/SeriesDataSource.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneComparePanel/domain/parseUrlParam.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneComparePanel/domain/RangeAnnotation.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneComparePanel/components/SceneTimeRangeWithAnnotations.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneComparePanel/domain/evaluateTimeRange.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneComparePanel/domain/events/EventSwitchTimerangeSelectionMode.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneComparePanel/domain/actions/SwitchTimeRangeSelectionModeAction.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneComparePanel/infrastructure/buildCompareTimeSeriesQueryRunner.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneComparePanel/ui/colors.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneComparePanel/SceneComparePanel.tsx","webpack:///./shared/domain/useToggleSidePanel.ts","webpack:///../node_modules/@tanstack/query-core/build/modern/mutationObserver.js","webpack:///./shared/infrastructure/settings/PluginSettings.ts","webpack:///./shared/infrastructure/settings/settingsApiClient.ts","webpack:///./shared/infrastructure/settings/useFetchPluginSettings.ts","webpack:///../node_modules/@tanstack/react-query/build/modern/useMutation.js","webpack:///./shared/ui/InlineBanner.tsx","webpack:///../node_modules/@grafana/e2e-selectors/dist/esm/selectors/components.js","webpack:///../node_modules/@grafana/e2e-selectors/dist/esm/selectors/index.js","webpack:///../node_modules/@grafana/e2e-selectors/dist/esm/selectors/pages.js","webpack:///./shared/ui/Panel/GrafanaPanelBox/DelayRender.tsx","webpack:///./shared/ui/Panel/GrafanaPanelBox/PanelMenu.tsx","webpack:///./shared/ui/Panel/GrafanaPanelBox/HoverWidget.tsx","webpack:///./shared/ui/Panel/GrafanaPanelBox/TitleItem.tsx","webpack:///./shared/ui/Panel/GrafanaPanelBox/PanelDescription.tsx","webpack:///./shared/ui/Panel/GrafanaPanelBox/PanelStatus.tsx","webpack:///./shared/ui/Panel/GrafanaPanelBox/GrafanaPanelBox.tsx","webpack:///./shared/ui/Panel/Panel.tsx","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/config.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/operators/filter.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack:///../node_modules/@grafana/llm/node_modules/uuid/dist/esm-browser/native.js","webpack:///../node_modules/@grafana/llm/node_modules/uuid/dist/esm-browser/rng.js","webpack:///../node_modules/@grafana/llm/node_modules/uuid/dist/esm-browser/stringify.js","webpack:///../node_modules/@grafana/llm/node_modules/uuid/dist/esm-browser/v4.js","webpack:///../node_modules/@grafana/llm/dist/esm/constants.js","webpack:///../node_modules/@grafana/llm/dist/esm/openai.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/operators/scan.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/operators/scanInternals.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/operators/tap.js","webpack:///../node_modules/@grafana/llm/node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js","webpack:///./pages/ProfilesExplorerView/components/SceneAiPanel/components/AiButton/AIButton.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneAiPanel/components/AiButton/infrastructure/useFetchLlmPluginStatus.ts","webpack:///../node_modules/markdown-to-jsx/dist/index.modern.js","webpack:///./pages/ProfilesExplorerView/components/SceneAiPanel/components/AiReply.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneAiPanel/components/FollowUpForm.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneAiPanel/domain/buildLlmPrompts.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/profiles/ProfileApiClient.ts","webpack:///./pages/ProfilesExplorerView/components/SceneAiPanel/SceneAiPanel.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneAiPanel/infrastructure/useFetchDotProfiles.ts","webpack:///./pages/ProfilesExplorerView/components/SceneAiPanel/infrastructure/cleanupDotResponse.ts","webpack:///./pages/ProfilesExplorerView/components/SceneAiPanel/domain/useOpenAiChatCompletions.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/domain/events/EventDiffAutoSelect.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/domain/events/EventDiffChoosePreset.tsx","webpack:///./shared/domain/url-params/useMaxNodesFromUrl.ts","webpack:///./shared/domain/url-params/useUrlSearchParams.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneDiffFlameGraph/infrastructure/DiffProfileApiClient.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneDiffFlameGraph/infrastructure/useFetchDiffProfile.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneDiffFlameGraph/ui/MissingSelectionsBanner.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/SceneDiffFlameGraph/SceneDiffFlameGraph.tsx","webpack:///./pages/ProfilesExplorerView/components/GiveFeedbackButton.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/components/ScenePresetsPicker/ScenePresetsPicker.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/SceneExploreDiffFlameGraph.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreDiffFlameGraph/domain/behaviours/syncYAxis.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/infrastructure/VcsClient.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/infrastructure/GitSessionCookie.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/infrastructure/GitSessionCookieManager.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/domain/openLoginPopup.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/domain/githubLogin.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/domain/authFromUrl.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/GitHubContext.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/infrastructure/PrivateVcsClient.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/GitHubContextProvider.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/domain/generateNonce.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/domain/useGithubSessionCookie.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/domain/usePollGitHubPopup.ts","webpack:///./pages/ProfilesExplorerView/infrastructure/flame-graph/buildFlameGraphQueryRunner.ts","webpack:///./shared/domain/url-params/parseQuery.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/infrastructure/PprofRequest.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/infrastructure/PprofApiClient.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneExportMenu/domain/getExportFilename.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneExportMenu/infrastructure/flamegraphDotComApiClient.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneExportMenu/SceneExportMenu.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/useGitHubContext.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/AiSuggestionsPanel/domain/buildLlmSuggestionPrompts.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/AiSuggestionsPanel/AiSuggestionsPanel.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/AiSuggestionsPanel/domain/useAiSuggestionsPanel.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/AiSuggestionsPanel/domain/useOpenAiSuggestions.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/CodeContainer/domain/buildGithubUrlForFunction.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/CodeContainer/domain/buildLineProfiles.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/CodeContainer/domain/useCodeContainer.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/CodeContainer/infrastructure/useFetchVCSFile.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/domain/buildUnitFormatter.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/CodeContainer/ui/Code.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/CodeContainer/CodeContainer.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubRepository.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/domain/getCommitsWithSamples.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/domain/isGitHubRepository.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/domain/getRepositoryDetails.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/domain/convertPprofToFunctionDetails.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/infrastructure/fetchCommitsInfo.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/infrastructure/helpers/getTotalSum.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/infrastructure/helpers/sortByTotal.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/infrastructure/useFetchFunctionsDetails.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/domain/getRelativeTimeString.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/domain/formatCommitDate.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/ui/CommitOption.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/ui/CommitOptionSelected.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/ui/CommitSelect.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/ui/GitHubIntegrationBanner.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/ui/InlineSpinner.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/SceneFunctionDetailsPanel.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/domain/formatFileName.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/SceneFlameGraph.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/domain/useGitHubIntegration.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/domain/buildStackTrace.ts","webpack:///./pages/ProfilesExplorerView/components/SceneExploreServiceFlameGraph/SceneExploreServiceFlameGraph.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneProfilesExplorer/components/domain/useHeader.ts","webpack:///./pages/ProfilesExplorerView/components/SceneProfilesExplorer/components/domain/builsShareableUrl.ts","webpack:///./pages/ProfilesExplorerView/components/SceneProfilesExplorer/components/ui/ExplorationTypeSelector.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneProfilesExplorer/components/Header.tsx","webpack:///./pages/ProfilesExplorerView/components/SceneProfilesExplorer/SceneProfilesExplorer.tsx","webpack:///./pages/ProfilesExplorerView/ProfilesExplorerView.tsx","webpack:///./pages/SettingsView/SettingsView.tsx","webpack:///./pages/SettingsView/domain/useSettingsView.ts","webpack:///./app/components/Routes/domain/useNavigationLinksUpdate.ts","webpack:///./app/components/Routes/Routes.tsx","webpack:///./app/ui/ErrorPage.tsx","webpack:///./shared/infrastructure/tracking/faro/getFaroEnvironment.ts","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/initialize.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/config/makeCoreConfig.js","webpack:///../node_modules/@grafana/faro-web-sdk/dist/esm/consts.js","webpack:///./app/App.tsx","webpack:///./module.ts"],"sourcesContent":["\"use strict\";\r\nmodule.exports = asPromise;\r\n\r\n/**\r\n * Callback as used by {@link util.asPromise}.\r\n * @typedef asPromiseCallback\r\n * @type {function}\r\n * @param {Error|null} error Error, if any\r\n * @param {...*} params Additional arguments\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Returns a promise from a node-style callback function.\r\n * @memberof util\r\n * @param {asPromiseCallback} fn Function to call\r\n * @param {*} ctx Function context\r\n * @param {...*} params Function arguments\r\n * @returns {Promise<*>} Promisified function\r\n */\r\nfunction asPromise(fn, ctx/*, varargs */) {\r\n    var params  = new Array(arguments.length - 1),\r\n        offset  = 0,\r\n        index   = 2,\r\n        pending = true;\r\n    while (index < arguments.length)\r\n        params[offset++] = arguments[index++];\r\n    return new Promise(function executor(resolve, reject) {\r\n        params[offset] = function callback(err/*, varargs */) {\r\n            if (pending) {\r\n                pending = false;\r\n                if (err)\r\n                    reject(err);\r\n                else {\r\n                    var params = new Array(arguments.length - 1),\r\n                        offset = 0;\r\n                    while (offset < params.length)\r\n                        params[offset++] = arguments[offset];\r\n                    resolve.apply(null, params);\r\n                }\r\n            }\r\n        };\r\n        try {\r\n            fn.apply(ctx || null, params);\r\n        } catch (err) {\r\n            if (pending) {\r\n                pending = false;\r\n                reject(err);\r\n            }\r\n        }\r\n    });\r\n}\r\n","\"use strict\";\r\n\r\n/**\r\n * A minimal base64 implementation for number arrays.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar base64 = exports;\r\n\r\n/**\r\n * Calculates the byte length of a base64 encoded string.\r\n * @param {string} string Base64 encoded string\r\n * @returns {number} Byte length\r\n */\r\nbase64.length = function length(string) {\r\n    var p = string.length;\r\n    if (!p)\r\n        return 0;\r\n    var n = 0;\r\n    while (--p % 4 > 1 && string.charAt(p) === \"=\")\r\n        ++n;\r\n    return Math.ceil(string.length * 3) / 4 - n;\r\n};\r\n\r\n// Base64 encoding table\r\nvar b64 = new Array(64);\r\n\r\n// Base64 decoding table\r\nvar s64 = new Array(123);\r\n\r\n// 65..90, 97..122, 48..57, 43, 47\r\nfor (var i = 0; i < 64;)\r\n    s64[b64[i] = i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i - 59 | 43] = i++;\r\n\r\n/**\r\n * Encodes a buffer to a base64 encoded string.\r\n * @param {Uint8Array} buffer Source buffer\r\n * @param {number} start Source start\r\n * @param {number} end Source end\r\n * @returns {string} Base64 encoded string\r\n */\r\nbase64.encode = function encode(buffer, start, end) {\r\n    var parts = null,\r\n        chunk = [];\r\n    var i = 0, // output index\r\n        j = 0, // goto index\r\n        t;     // temporary\r\n    while (start < end) {\r\n        var b = buffer[start++];\r\n        switch (j) {\r\n            case 0:\r\n                chunk[i++] = b64[b >> 2];\r\n                t = (b & 3) << 4;\r\n                j = 1;\r\n                break;\r\n            case 1:\r\n                chunk[i++] = b64[t | b >> 4];\r\n                t = (b & 15) << 2;\r\n                j = 2;\r\n                break;\r\n            case 2:\r\n                chunk[i++] = b64[t | b >> 6];\r\n                chunk[i++] = b64[b & 63];\r\n                j = 0;\r\n                break;\r\n        }\r\n        if (i > 8191) {\r\n            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));\r\n            i = 0;\r\n        }\r\n    }\r\n    if (j) {\r\n        chunk[i++] = b64[t];\r\n        chunk[i++] = 61;\r\n        if (j === 1)\r\n            chunk[i++] = 61;\r\n    }\r\n    if (parts) {\r\n        if (i)\r\n            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));\r\n        return parts.join(\"\");\r\n    }\r\n    return String.fromCharCode.apply(String, chunk.slice(0, i));\r\n};\r\n\r\nvar invalidEncoding = \"invalid encoding\";\r\n\r\n/**\r\n * Decodes a base64 encoded string to a buffer.\r\n * @param {string} string Source string\r\n * @param {Uint8Array} buffer Destination buffer\r\n * @param {number} offset Destination offset\r\n * @returns {number} Number of bytes written\r\n * @throws {Error} If encoding is invalid\r\n */\r\nbase64.decode = function decode(string, buffer, offset) {\r\n    var start = offset;\r\n    var j = 0, // goto index\r\n        t;     // temporary\r\n    for (var i = 0; i < string.length;) {\r\n        var c = string.charCodeAt(i++);\r\n        if (c === 61 && j > 1)\r\n            break;\r\n        if ((c = s64[c]) === undefined)\r\n            throw Error(invalidEncoding);\r\n        switch (j) {\r\n            case 0:\r\n                t = c;\r\n                j = 1;\r\n                break;\r\n            case 1:\r\n                buffer[offset++] = t << 2 | (c & 48) >> 4;\r\n                t = c;\r\n                j = 2;\r\n                break;\r\n            case 2:\r\n                buffer[offset++] = (t & 15) << 4 | (c & 60) >> 2;\r\n                t = c;\r\n                j = 3;\r\n                break;\r\n            case 3:\r\n                buffer[offset++] = (t & 3) << 6 | c;\r\n                j = 0;\r\n                break;\r\n        }\r\n    }\r\n    if (j === 1)\r\n        throw Error(invalidEncoding);\r\n    return offset - start;\r\n};\r\n\r\n/**\r\n * Tests if the specified string appears to be base64 encoded.\r\n * @param {string} string String to test\r\n * @returns {boolean} `true` if probably base64 encoded, otherwise false\r\n */\r\nbase64.test = function test(string) {\r\n    return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string);\r\n};\r\n","\"use strict\";\r\nmodule.exports = codegen;\r\n\r\n/**\r\n * Begins generating a function.\r\n * @memberof util\r\n * @param {string[]} functionParams Function parameter names\r\n * @param {string} [functionName] Function name if not anonymous\r\n * @returns {Codegen} Appender that appends code to the function's body\r\n */\r\nfunction codegen(functionParams, functionName) {\r\n\r\n    /* istanbul ignore if */\r\n    if (typeof functionParams === \"string\") {\r\n        functionName = functionParams;\r\n        functionParams = undefined;\r\n    }\r\n\r\n    var body = [];\r\n\r\n    /**\r\n     * Appends code to the function's body or finishes generation.\r\n     * @typedef Codegen\r\n     * @type {function}\r\n     * @param {string|Object.<string,*>} [formatStringOrScope] Format string or, to finish the function, an object of additional scope variables, if any\r\n     * @param {...*} [formatParams] Format parameters\r\n     * @returns {Codegen|Function} Itself or the generated function if finished\r\n     * @throws {Error} If format parameter counts do not match\r\n     */\r\n\r\n    function Codegen(formatStringOrScope) {\r\n        // note that explicit array handling below makes this ~50% faster\r\n\r\n        // finish the function\r\n        if (typeof formatStringOrScope !== \"string\") {\r\n            var source = toString();\r\n            if (codegen.verbose)\r\n                console.log(\"codegen: \" + source); // eslint-disable-line no-console\r\n            source = \"return \" + source;\r\n            if (formatStringOrScope) {\r\n                var scopeKeys   = Object.keys(formatStringOrScope),\r\n                    scopeParams = new Array(scopeKeys.length + 1),\r\n                    scopeValues = new Array(scopeKeys.length),\r\n                    scopeOffset = 0;\r\n                while (scopeOffset < scopeKeys.length) {\r\n                    scopeParams[scopeOffset] = scopeKeys[scopeOffset];\r\n                    scopeValues[scopeOffset] = formatStringOrScope[scopeKeys[scopeOffset++]];\r\n                }\r\n                scopeParams[scopeOffset] = source;\r\n                return Function.apply(null, scopeParams).apply(null, scopeValues); // eslint-disable-line no-new-func\r\n            }\r\n            return Function(source)(); // eslint-disable-line no-new-func\r\n        }\r\n\r\n        // otherwise append to body\r\n        var formatParams = new Array(arguments.length - 1),\r\n            formatOffset = 0;\r\n        while (formatOffset < formatParams.length)\r\n            formatParams[formatOffset] = arguments[++formatOffset];\r\n        formatOffset = 0;\r\n        formatStringOrScope = formatStringOrScope.replace(/%([%dfijs])/g, function replace($0, $1) {\r\n            var value = formatParams[formatOffset++];\r\n            switch ($1) {\r\n                case \"d\": case \"f\": return String(Number(value));\r\n                case \"i\": return String(Math.floor(value));\r\n                case \"j\": return JSON.stringify(value);\r\n                case \"s\": return String(value);\r\n            }\r\n            return \"%\";\r\n        });\r\n        if (formatOffset !== formatParams.length)\r\n            throw Error(\"parameter count mismatch\");\r\n        body.push(formatStringOrScope);\r\n        return Codegen;\r\n    }\r\n\r\n    function toString(functionNameOverride) {\r\n        return \"function \" + (functionNameOverride || functionName || \"\") + \"(\" + (functionParams && functionParams.join(\",\") || \"\") + \"){\\n  \" + body.join(\"\\n  \") + \"\\n}\";\r\n    }\r\n\r\n    Codegen.toString = toString;\r\n    return Codegen;\r\n}\r\n\r\n/**\r\n * Begins generating a function.\r\n * @memberof util\r\n * @function codegen\r\n * @param {string} [functionName] Function name if not anonymous\r\n * @returns {Codegen} Appender that appends code to the function's body\r\n * @variation 2\r\n */\r\n\r\n/**\r\n * When set to `true`, codegen will log generated code to console. Useful for debugging.\r\n * @name util.codegen.verbose\r\n * @type {boolean}\r\n */\r\ncodegen.verbose = false;\r\n","\"use strict\";\r\nmodule.exports = EventEmitter;\r\n\r\n/**\r\n * Constructs a new event emitter instance.\r\n * @classdesc A minimal event emitter.\r\n * @memberof util\r\n * @constructor\r\n */\r\nfunction EventEmitter() {\r\n\r\n    /**\r\n     * Registered listeners.\r\n     * @type {Object.<string,*>}\r\n     * @private\r\n     */\r\n    this._listeners = {};\r\n}\r\n\r\n/**\r\n * Registers an event listener.\r\n * @param {string} evt Event name\r\n * @param {function} fn Listener\r\n * @param {*} [ctx] Listener context\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.on = function on(evt, fn, ctx) {\r\n    (this._listeners[evt] || (this._listeners[evt] = [])).push({\r\n        fn  : fn,\r\n        ctx : ctx || this\r\n    });\r\n    return this;\r\n};\r\n\r\n/**\r\n * Removes an event listener or any matching listeners if arguments are omitted.\r\n * @param {string} [evt] Event name. Removes all listeners if omitted.\r\n * @param {function} [fn] Listener to remove. Removes all listeners of `evt` if omitted.\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.off = function off(evt, fn) {\r\n    if (evt === undefined)\r\n        this._listeners = {};\r\n    else {\r\n        if (fn === undefined)\r\n            this._listeners[evt] = [];\r\n        else {\r\n            var listeners = this._listeners[evt];\r\n            for (var i = 0; i < listeners.length;)\r\n                if (listeners[i].fn === fn)\r\n                    listeners.splice(i, 1);\r\n                else\r\n                    ++i;\r\n        }\r\n    }\r\n    return this;\r\n};\r\n\r\n/**\r\n * Emits an event by calling its listeners with the specified arguments.\r\n * @param {string} evt Event name\r\n * @param {...*} args Arguments\r\n * @returns {util.EventEmitter} `this`\r\n */\r\nEventEmitter.prototype.emit = function emit(evt) {\r\n    var listeners = this._listeners[evt];\r\n    if (listeners) {\r\n        var args = [],\r\n            i = 1;\r\n        for (; i < arguments.length;)\r\n            args.push(arguments[i++]);\r\n        for (i = 0; i < listeners.length;)\r\n            listeners[i].fn.apply(listeners[i++].ctx, args);\r\n    }\r\n    return this;\r\n};\r\n","\"use strict\";\r\nmodule.exports = fetch;\r\n\r\nvar asPromise = require(\"@protobufjs/aspromise\"),\r\n    inquire   = require(\"@protobufjs/inquire\");\r\n\r\nvar fs = inquire(\"fs\");\r\n\r\n/**\r\n * Node-style callback as used by {@link util.fetch}.\r\n * @typedef FetchCallback\r\n * @type {function}\r\n * @param {?Error} error Error, if any, otherwise `null`\r\n * @param {string} [contents] File contents, if there hasn't been an error\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Options as used by {@link util.fetch}.\r\n * @typedef FetchOptions\r\n * @type {Object}\r\n * @property {boolean} [binary=false] Whether expecting a binary response\r\n * @property {boolean} [xhr=false] If `true`, forces the use of XMLHttpRequest\r\n */\r\n\r\n/**\r\n * Fetches the contents of a file.\r\n * @memberof util\r\n * @param {string} filename File path or url\r\n * @param {FetchOptions} options Fetch options\r\n * @param {FetchCallback} callback Callback function\r\n * @returns {undefined}\r\n */\r\nfunction fetch(filename, options, callback) {\r\n    if (typeof options === \"function\") {\r\n        callback = options;\r\n        options = {};\r\n    } else if (!options)\r\n        options = {};\r\n\r\n    if (!callback)\r\n        return asPromise(fetch, this, filename, options); // eslint-disable-line no-invalid-this\r\n\r\n    // if a node-like filesystem is present, try it first but fall back to XHR if nothing is found.\r\n    if (!options.xhr && fs && fs.readFile)\r\n        return fs.readFile(filename, function fetchReadFileCallback(err, contents) {\r\n            return err && typeof XMLHttpRequest !== \"undefined\"\r\n                ? fetch.xhr(filename, options, callback)\r\n                : err\r\n                ? callback(err)\r\n                : callback(null, options.binary ? contents : contents.toString(\"utf8\"));\r\n        });\r\n\r\n    // use the XHR version otherwise.\r\n    return fetch.xhr(filename, options, callback);\r\n}\r\n\r\n/**\r\n * Fetches the contents of a file.\r\n * @name util.fetch\r\n * @function\r\n * @param {string} path File path or url\r\n * @param {FetchCallback} callback Callback function\r\n * @returns {undefined}\r\n * @variation 2\r\n */\r\n\r\n/**\r\n * Fetches the contents of a file.\r\n * @name util.fetch\r\n * @function\r\n * @param {string} path File path or url\r\n * @param {FetchOptions} [options] Fetch options\r\n * @returns {Promise<string|Uint8Array>} Promise\r\n * @variation 3\r\n */\r\n\r\n/**/\r\nfetch.xhr = function fetch_xhr(filename, options, callback) {\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.onreadystatechange /* works everywhere */ = function fetchOnReadyStateChange() {\r\n\r\n        if (xhr.readyState !== 4)\r\n            return undefined;\r\n\r\n        // local cors security errors return status 0 / empty string, too. afaik this cannot be\r\n        // reliably distinguished from an actually empty file for security reasons. feel free\r\n        // to send a pull request if you are aware of a solution.\r\n        if (xhr.status !== 0 && xhr.status !== 200)\r\n            return callback(Error(\"status \" + xhr.status));\r\n\r\n        // if binary data is expected, make sure that some sort of array is returned, even if\r\n        // ArrayBuffers are not supported. the binary string fallback, however, is unsafe.\r\n        if (options.binary) {\r\n            var buffer = xhr.response;\r\n            if (!buffer) {\r\n                buffer = [];\r\n                for (var i = 0; i < xhr.responseText.length; ++i)\r\n                    buffer.push(xhr.responseText.charCodeAt(i) & 255);\r\n            }\r\n            return callback(null, typeof Uint8Array !== \"undefined\" ? new Uint8Array(buffer) : buffer);\r\n        }\r\n        return callback(null, xhr.responseText);\r\n    };\r\n\r\n    if (options.binary) {\r\n        // ref: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Sending_and_Receiving_Binary_Data#Receiving_binary_data_in_older_browsers\r\n        if (\"overrideMimeType\" in xhr)\r\n            xhr.overrideMimeType(\"text/plain; charset=x-user-defined\");\r\n        xhr.responseType = \"arraybuffer\";\r\n    }\r\n\r\n    xhr.open(\"GET\", filename);\r\n    xhr.send();\r\n};\r\n","\"use strict\";\r\n\r\nmodule.exports = factory(factory);\r\n\r\n/**\r\n * Reads / writes floats / doubles from / to buffers.\r\n * @name util.float\r\n * @namespace\r\n */\r\n\r\n/**\r\n * Writes a 32 bit float to a buffer using little endian byte order.\r\n * @name util.float.writeFloatLE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Writes a 32 bit float to a buffer using big endian byte order.\r\n * @name util.float.writeFloatBE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Reads a 32 bit float from a buffer using little endian byte order.\r\n * @name util.float.readFloatLE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Reads a 32 bit float from a buffer using big endian byte order.\r\n * @name util.float.readFloatBE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Writes a 64 bit double to a buffer using little endian byte order.\r\n * @name util.float.writeDoubleLE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Writes a 64 bit double to a buffer using big endian byte order.\r\n * @name util.float.writeDoubleBE\r\n * @function\r\n * @param {number} val Value to write\r\n * @param {Uint8Array} buf Target buffer\r\n * @param {number} pos Target buffer offset\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Reads a 64 bit double from a buffer using little endian byte order.\r\n * @name util.float.readDoubleLE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n/**\r\n * Reads a 64 bit double from a buffer using big endian byte order.\r\n * @name util.float.readDoubleBE\r\n * @function\r\n * @param {Uint8Array} buf Source buffer\r\n * @param {number} pos Source buffer offset\r\n * @returns {number} Value read\r\n */\r\n\r\n// Factory function for the purpose of node-based testing in modified global environments\r\nfunction factory(exports) {\r\n\r\n    // float: typed array\r\n    if (typeof Float32Array !== \"undefined\") (function() {\r\n\r\n        var f32 = new Float32Array([ -0 ]),\r\n            f8b = new Uint8Array(f32.buffer),\r\n            le  = f8b[3] === 128;\r\n\r\n        function writeFloat_f32_cpy(val, buf, pos) {\r\n            f32[0] = val;\r\n            buf[pos    ] = f8b[0];\r\n            buf[pos + 1] = f8b[1];\r\n            buf[pos + 2] = f8b[2];\r\n            buf[pos + 3] = f8b[3];\r\n        }\r\n\r\n        function writeFloat_f32_rev(val, buf, pos) {\r\n            f32[0] = val;\r\n            buf[pos    ] = f8b[3];\r\n            buf[pos + 1] = f8b[2];\r\n            buf[pos + 2] = f8b[1];\r\n            buf[pos + 3] = f8b[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.writeFloatLE = le ? writeFloat_f32_cpy : writeFloat_f32_rev;\r\n        /* istanbul ignore next */\r\n        exports.writeFloatBE = le ? writeFloat_f32_rev : writeFloat_f32_cpy;\r\n\r\n        function readFloat_f32_cpy(buf, pos) {\r\n            f8b[0] = buf[pos    ];\r\n            f8b[1] = buf[pos + 1];\r\n            f8b[2] = buf[pos + 2];\r\n            f8b[3] = buf[pos + 3];\r\n            return f32[0];\r\n        }\r\n\r\n        function readFloat_f32_rev(buf, pos) {\r\n            f8b[3] = buf[pos    ];\r\n            f8b[2] = buf[pos + 1];\r\n            f8b[1] = buf[pos + 2];\r\n            f8b[0] = buf[pos + 3];\r\n            return f32[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.readFloatLE = le ? readFloat_f32_cpy : readFloat_f32_rev;\r\n        /* istanbul ignore next */\r\n        exports.readFloatBE = le ? readFloat_f32_rev : readFloat_f32_cpy;\r\n\r\n    // float: ieee754\r\n    })(); else (function() {\r\n\r\n        function writeFloat_ieee754(writeUint, val, buf, pos) {\r\n            var sign = val < 0 ? 1 : 0;\r\n            if (sign)\r\n                val = -val;\r\n            if (val === 0)\r\n                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos);\r\n            else if (isNaN(val))\r\n                writeUint(2143289344, buf, pos);\r\n            else if (val > 3.4028234663852886e+38) // +-Infinity\r\n                writeUint((sign << 31 | 2139095040) >>> 0, buf, pos);\r\n            else if (val < 1.1754943508222875e-38) // denormal\r\n                writeUint((sign << 31 | Math.round(val / 1.401298464324817e-45)) >>> 0, buf, pos);\r\n            else {\r\n                var exponent = Math.floor(Math.log(val) / Math.LN2),\r\n                    mantissa = Math.round(val * Math.pow(2, -exponent) * 8388608) & 8388607;\r\n                writeUint((sign << 31 | exponent + 127 << 23 | mantissa) >>> 0, buf, pos);\r\n            }\r\n        }\r\n\r\n        exports.writeFloatLE = writeFloat_ieee754.bind(null, writeUintLE);\r\n        exports.writeFloatBE = writeFloat_ieee754.bind(null, writeUintBE);\r\n\r\n        function readFloat_ieee754(readUint, buf, pos) {\r\n            var uint = readUint(buf, pos),\r\n                sign = (uint >> 31) * 2 + 1,\r\n                exponent = uint >>> 23 & 255,\r\n                mantissa = uint & 8388607;\r\n            return exponent === 255\r\n                ? mantissa\r\n                ? NaN\r\n                : sign * Infinity\r\n                : exponent === 0 // denormal\r\n                ? sign * 1.401298464324817e-45 * mantissa\r\n                : sign * Math.pow(2, exponent - 150) * (mantissa + 8388608);\r\n        }\r\n\r\n        exports.readFloatLE = readFloat_ieee754.bind(null, readUintLE);\r\n        exports.readFloatBE = readFloat_ieee754.bind(null, readUintBE);\r\n\r\n    })();\r\n\r\n    // double: typed array\r\n    if (typeof Float64Array !== \"undefined\") (function() {\r\n\r\n        var f64 = new Float64Array([-0]),\r\n            f8b = new Uint8Array(f64.buffer),\r\n            le  = f8b[7] === 128;\r\n\r\n        function writeDouble_f64_cpy(val, buf, pos) {\r\n            f64[0] = val;\r\n            buf[pos    ] = f8b[0];\r\n            buf[pos + 1] = f8b[1];\r\n            buf[pos + 2] = f8b[2];\r\n            buf[pos + 3] = f8b[3];\r\n            buf[pos + 4] = f8b[4];\r\n            buf[pos + 5] = f8b[5];\r\n            buf[pos + 6] = f8b[6];\r\n            buf[pos + 7] = f8b[7];\r\n        }\r\n\r\n        function writeDouble_f64_rev(val, buf, pos) {\r\n            f64[0] = val;\r\n            buf[pos    ] = f8b[7];\r\n            buf[pos + 1] = f8b[6];\r\n            buf[pos + 2] = f8b[5];\r\n            buf[pos + 3] = f8b[4];\r\n            buf[pos + 4] = f8b[3];\r\n            buf[pos + 5] = f8b[2];\r\n            buf[pos + 6] = f8b[1];\r\n            buf[pos + 7] = f8b[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.writeDoubleLE = le ? writeDouble_f64_cpy : writeDouble_f64_rev;\r\n        /* istanbul ignore next */\r\n        exports.writeDoubleBE = le ? writeDouble_f64_rev : writeDouble_f64_cpy;\r\n\r\n        function readDouble_f64_cpy(buf, pos) {\r\n            f8b[0] = buf[pos    ];\r\n            f8b[1] = buf[pos + 1];\r\n            f8b[2] = buf[pos + 2];\r\n            f8b[3] = buf[pos + 3];\r\n            f8b[4] = buf[pos + 4];\r\n            f8b[5] = buf[pos + 5];\r\n            f8b[6] = buf[pos + 6];\r\n            f8b[7] = buf[pos + 7];\r\n            return f64[0];\r\n        }\r\n\r\n        function readDouble_f64_rev(buf, pos) {\r\n            f8b[7] = buf[pos    ];\r\n            f8b[6] = buf[pos + 1];\r\n            f8b[5] = buf[pos + 2];\r\n            f8b[4] = buf[pos + 3];\r\n            f8b[3] = buf[pos + 4];\r\n            f8b[2] = buf[pos + 5];\r\n            f8b[1] = buf[pos + 6];\r\n            f8b[0] = buf[pos + 7];\r\n            return f64[0];\r\n        }\r\n\r\n        /* istanbul ignore next */\r\n        exports.readDoubleLE = le ? readDouble_f64_cpy : readDouble_f64_rev;\r\n        /* istanbul ignore next */\r\n        exports.readDoubleBE = le ? readDouble_f64_rev : readDouble_f64_cpy;\r\n\r\n    // double: ieee754\r\n    })(); else (function() {\r\n\r\n        function writeDouble_ieee754(writeUint, off0, off1, val, buf, pos) {\r\n            var sign = val < 0 ? 1 : 0;\r\n            if (sign)\r\n                val = -val;\r\n            if (val === 0) {\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint(1 / val > 0 ? /* positive */ 0 : /* negative 0 */ 2147483648, buf, pos + off1);\r\n            } else if (isNaN(val)) {\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint(2146959360, buf, pos + off1);\r\n            } else if (val > 1.7976931348623157e+308) { // +-Infinity\r\n                writeUint(0, buf, pos + off0);\r\n                writeUint((sign << 31 | 2146435072) >>> 0, buf, pos + off1);\r\n            } else {\r\n                var mantissa;\r\n                if (val < 2.2250738585072014e-308) { // denormal\r\n                    mantissa = val / 5e-324;\r\n                    writeUint(mantissa >>> 0, buf, pos + off0);\r\n                    writeUint((sign << 31 | mantissa / 4294967296) >>> 0, buf, pos + off1);\r\n                } else {\r\n                    var exponent = Math.floor(Math.log(val) / Math.LN2);\r\n                    if (exponent === 1024)\r\n                        exponent = 1023;\r\n                    mantissa = val * Math.pow(2, -exponent);\r\n                    writeUint(mantissa * 4503599627370496 >>> 0, buf, pos + off0);\r\n                    writeUint((sign << 31 | exponent + 1023 << 20 | mantissa * 1048576 & 1048575) >>> 0, buf, pos + off1);\r\n                }\r\n            }\r\n        }\r\n\r\n        exports.writeDoubleLE = writeDouble_ieee754.bind(null, writeUintLE, 0, 4);\r\n        exports.writeDoubleBE = writeDouble_ieee754.bind(null, writeUintBE, 4, 0);\r\n\r\n        function readDouble_ieee754(readUint, off0, off1, buf, pos) {\r\n            var lo = readUint(buf, pos + off0),\r\n                hi = readUint(buf, pos + off1);\r\n            var sign = (hi >> 31) * 2 + 1,\r\n                exponent = hi >>> 20 & 2047,\r\n                mantissa = 4294967296 * (hi & 1048575) + lo;\r\n            return exponent === 2047\r\n                ? mantissa\r\n                ? NaN\r\n                : sign * Infinity\r\n                : exponent === 0 // denormal\r\n                ? sign * 5e-324 * mantissa\r\n                : sign * Math.pow(2, exponent - 1075) * (mantissa + 4503599627370496);\r\n        }\r\n\r\n        exports.readDoubleLE = readDouble_ieee754.bind(null, readUintLE, 0, 4);\r\n        exports.readDoubleBE = readDouble_ieee754.bind(null, readUintBE, 4, 0);\r\n\r\n    })();\r\n\r\n    return exports;\r\n}\r\n\r\n// uint helpers\r\n\r\nfunction writeUintLE(val, buf, pos) {\r\n    buf[pos    ] =  val        & 255;\r\n    buf[pos + 1] =  val >>> 8  & 255;\r\n    buf[pos + 2] =  val >>> 16 & 255;\r\n    buf[pos + 3] =  val >>> 24;\r\n}\r\n\r\nfunction writeUintBE(val, buf, pos) {\r\n    buf[pos    ] =  val >>> 24;\r\n    buf[pos + 1] =  val >>> 16 & 255;\r\n    buf[pos + 2] =  val >>> 8  & 255;\r\n    buf[pos + 3] =  val        & 255;\r\n}\r\n\r\nfunction readUintLE(buf, pos) {\r\n    return (buf[pos    ]\r\n          | buf[pos + 1] << 8\r\n          | buf[pos + 2] << 16\r\n          | buf[pos + 3] << 24) >>> 0;\r\n}\r\n\r\nfunction readUintBE(buf, pos) {\r\n    return (buf[pos    ] << 24\r\n          | buf[pos + 1] << 16\r\n          | buf[pos + 2] << 8\r\n          | buf[pos + 3]) >>> 0;\r\n}\r\n","\"use strict\";\r\nmodule.exports = inquire;\r\n\r\n/**\r\n * Requires a module only if available.\r\n * @memberof util\r\n * @param {string} moduleName Module to require\r\n * @returns {?Object} Required module if available and not empty, otherwise `null`\r\n */\r\nfunction inquire(moduleName) {\r\n    try {\r\n        var mod = eval(\"quire\".replace(/^/,\"re\"))(moduleName); // eslint-disable-line no-eval\r\n        if (mod && (mod.length || Object.keys(mod).length))\r\n            return mod;\r\n    } catch (e) {} // eslint-disable-line no-empty\r\n    return null;\r\n}\r\n","\"use strict\";\r\n\r\n/**\r\n * A minimal path module to resolve Unix, Windows and URL paths alike.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar path = exports;\r\n\r\nvar isAbsolute =\r\n/**\r\n * Tests if the specified path is absolute.\r\n * @param {string} path Path to test\r\n * @returns {boolean} `true` if path is absolute\r\n */\r\npath.isAbsolute = function isAbsolute(path) {\r\n    return /^(?:\\/|\\w+:)/.test(path);\r\n};\r\n\r\nvar normalize =\r\n/**\r\n * Normalizes the specified path.\r\n * @param {string} path Path to normalize\r\n * @returns {string} Normalized path\r\n */\r\npath.normalize = function normalize(path) {\r\n    path = path.replace(/\\\\/g, \"/\")\r\n               .replace(/\\/{2,}/g, \"/\");\r\n    var parts    = path.split(\"/\"),\r\n        absolute = isAbsolute(path),\r\n        prefix   = \"\";\r\n    if (absolute)\r\n        prefix = parts.shift() + \"/\";\r\n    for (var i = 0; i < parts.length;) {\r\n        if (parts[i] === \"..\") {\r\n            if (i > 0 && parts[i - 1] !== \"..\")\r\n                parts.splice(--i, 2);\r\n            else if (absolute)\r\n                parts.splice(i, 1);\r\n            else\r\n                ++i;\r\n        } else if (parts[i] === \".\")\r\n            parts.splice(i, 1);\r\n        else\r\n            ++i;\r\n    }\r\n    return prefix + parts.join(\"/\");\r\n};\r\n\r\n/**\r\n * Resolves the specified include path against the specified origin path.\r\n * @param {string} originPath Path to the origin file\r\n * @param {string} includePath Include path relative to origin path\r\n * @param {boolean} [alreadyNormalized=false] `true` if both paths are already known to be normalized\r\n * @returns {string} Path to the include file\r\n */\r\npath.resolve = function resolve(originPath, includePath, alreadyNormalized) {\r\n    if (!alreadyNormalized)\r\n        includePath = normalize(includePath);\r\n    if (isAbsolute(includePath))\r\n        return includePath;\r\n    if (!alreadyNormalized)\r\n        originPath = normalize(originPath);\r\n    return (originPath = originPath.replace(/(?:\\/|^)[^/]+$/, \"\")).length ? normalize(originPath + \"/\" + includePath) : includePath;\r\n};\r\n","\"use strict\";\r\nmodule.exports = pool;\r\n\r\n/**\r\n * An allocator as used by {@link util.pool}.\r\n * @typedef PoolAllocator\r\n * @type {function}\r\n * @param {number} size Buffer size\r\n * @returns {Uint8Array} Buffer\r\n */\r\n\r\n/**\r\n * A slicer as used by {@link util.pool}.\r\n * @typedef PoolSlicer\r\n * @type {function}\r\n * @param {number} start Start offset\r\n * @param {number} end End offset\r\n * @returns {Uint8Array} Buffer slice\r\n * @this {Uint8Array}\r\n */\r\n\r\n/**\r\n * A general purpose buffer pool.\r\n * @memberof util\r\n * @function\r\n * @param {PoolAllocator} alloc Allocator\r\n * @param {PoolSlicer} slice Slicer\r\n * @param {number} [size=8192] Slab size\r\n * @returns {PoolAllocator} Pooled allocator\r\n */\r\nfunction pool(alloc, slice, size) {\r\n    var SIZE   = size || 8192;\r\n    var MAX    = SIZE >>> 1;\r\n    var slab   = null;\r\n    var offset = SIZE;\r\n    return function pool_alloc(size) {\r\n        if (size < 1 || size > MAX)\r\n            return alloc(size);\r\n        if (offset + size > SIZE) {\r\n            slab = alloc(SIZE);\r\n            offset = 0;\r\n        }\r\n        var buf = slice.call(slab, offset, offset += size);\r\n        if (offset & 7) // align to 32 bit\r\n            offset = (offset | 7) + 1;\r\n        return buf;\r\n    };\r\n}\r\n","\"use strict\";\r\n\r\n/**\r\n * A minimal UTF8 implementation for number arrays.\r\n * @memberof util\r\n * @namespace\r\n */\r\nvar utf8 = exports;\r\n\r\n/**\r\n * Calculates the UTF8 byte length of a string.\r\n * @param {string} string String\r\n * @returns {number} Byte length\r\n */\r\nutf8.length = function utf8_length(string) {\r\n    var len = 0,\r\n        c = 0;\r\n    for (var i = 0; i < string.length; ++i) {\r\n        c = string.charCodeAt(i);\r\n        if (c < 128)\r\n            len += 1;\r\n        else if (c < 2048)\r\n            len += 2;\r\n        else if ((c & 0xFC00) === 0xD800 && (string.charCodeAt(i + 1) & 0xFC00) === 0xDC00) {\r\n            ++i;\r\n            len += 4;\r\n        } else\r\n            len += 3;\r\n    }\r\n    return len;\r\n};\r\n\r\n/**\r\n * Reads UTF8 bytes as a string.\r\n * @param {Uint8Array} buffer Source buffer\r\n * @param {number} start Source start\r\n * @param {number} end Source end\r\n * @returns {string} String read\r\n */\r\nutf8.read = function utf8_read(buffer, start, end) {\r\n    var len = end - start;\r\n    if (len < 1)\r\n        return \"\";\r\n    var parts = null,\r\n        chunk = [],\r\n        i = 0, // char offset\r\n        t;     // temporary\r\n    while (start < end) {\r\n        t = buffer[start++];\r\n        if (t < 128)\r\n            chunk[i++] = t;\r\n        else if (t > 191 && t < 224)\r\n            chunk[i++] = (t & 31) << 6 | buffer[start++] & 63;\r\n        else if (t > 239 && t < 365) {\r\n            t = ((t & 7) << 18 | (buffer[start++] & 63) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63) - 0x10000;\r\n            chunk[i++] = 0xD800 + (t >> 10);\r\n            chunk[i++] = 0xDC00 + (t & 1023);\r\n        } else\r\n            chunk[i++] = (t & 15) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63;\r\n        if (i > 8191) {\r\n            (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));\r\n            i = 0;\r\n        }\r\n    }\r\n    if (parts) {\r\n        if (i)\r\n            parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));\r\n        return parts.join(\"\");\r\n    }\r\n    return String.fromCharCode.apply(String, chunk.slice(0, i));\r\n};\r\n\r\n/**\r\n * Writes a string as UTF8 bytes.\r\n * @param {string} string Source string\r\n * @param {Uint8Array} buffer Destination buffer\r\n * @param {number} offset Destination offset\r\n * @returns {number} Bytes written\r\n */\r\nutf8.write = function utf8_write(string, buffer, offset) {\r\n    var start = offset,\r\n        c1, // character 1\r\n        c2; // character 2\r\n    for (var i = 0; i < string.length; ++i) {\r\n        c1 = string.charCodeAt(i);\r\n        if (c1 < 128) {\r\n            buffer[offset++] = c1;\r\n        } else if (c1 < 2048) {\r\n            buffer[offset++] = c1 >> 6       | 192;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        } else if ((c1 & 0xFC00) === 0xD800 && ((c2 = string.charCodeAt(i + 1)) & 0xFC00) === 0xDC00) {\r\n            c1 = 0x10000 + ((c1 & 0x03FF) << 10) + (c2 & 0x03FF);\r\n            ++i;\r\n            buffer[offset++] = c1 >> 18      | 240;\r\n            buffer[offset++] = c1 >> 12 & 63 | 128;\r\n            buffer[offset++] = c1 >> 6  & 63 | 128;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        } else {\r\n            buffer[offset++] = c1 >> 12      | 224;\r\n            buffer[offset++] = c1 >> 6  & 63 | 128;\r\n            buffer[offset++] = c1       & 63 | 128;\r\n        }\r\n    }\r\n    return offset - start;\r\n};\r\n","/* MIT license */\n/* eslint-disable no-mixed-operators */\nconst cssKeywords = require('color-name');\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nconst reverseKeywords = {};\nfor (const key of Object.keys(cssKeywords)) {\n\treverseKeywords[cssKeywords[key]] = key;\n}\n\nconst convert = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\nmodule.exports = convert;\n\n// Hide .channels and .labels properties\nfor (const model of Object.keys(convert)) {\n\tif (!('channels' in convert[model])) {\n\t\tthrow new Error('missing channels property: ' + model);\n\t}\n\n\tif (!('labels' in convert[model])) {\n\t\tthrow new Error('missing channel labels property: ' + model);\n\t}\n\n\tif (convert[model].labels.length !== convert[model].channels) {\n\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t}\n\n\tconst {channels, labels} = convert[model];\n\tdelete convert[model].channels;\n\tdelete convert[model].labels;\n\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\tObject.defineProperty(convert[model], 'labels', {value: labels});\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst min = Math.min(r, g, b);\n\tconst max = Math.max(r, g, b);\n\tconst delta = max - min;\n\tlet h;\n\tlet s;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tconst l = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tlet rdif;\n\tlet gdif;\n\tlet bdif;\n\tlet h;\n\tlet s;\n\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst v = Math.max(r, g, b);\n\tconst diff = v - Math.min(r, g, b);\n\tconst diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = 0;\n\t\ts = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tconst r = rgb[0];\n\tconst g = rgb[1];\n\tlet b = rgb[2];\n\tconst h = convert.rgb.hsl(rgb)[0];\n\tconst w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\n\tconst k = Math.min(1 - r, 1 - g, 1 - b);\n\tconst c = (1 - r - k) / (1 - k) || 0;\n\tconst m = (1 - g - k) / (1 - k) || 0;\n\tconst y = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\nfunction comparativeDistance(x, y) {\n\t/*\n\t\tSee https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n\t*/\n\treturn (\n\t\t((x[0] - y[0]) ** 2) +\n\t\t((x[1] - y[1]) ** 2) +\n\t\t((x[2] - y[2]) ** 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tconst reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tlet currentClosestDistance = Infinity;\n\tlet currentClosestKeyword;\n\n\tfor (const keyword of Object.keys(cssKeywords)) {\n\t\tconst value = cssKeywords[keyword];\n\n\t\t// Compute comparative distance\n\t\tconst distance = comparativeDistance(rgb, value);\n\n\t\t// Check if its less, if so set as closest\n\t\tif (distance < currentClosestDistance) {\n\t\t\tcurrentClosestDistance = distance;\n\t\t\tcurrentClosestKeyword = keyword;\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tlet r = rgb[0] / 255;\n\tlet g = rgb[1] / 255;\n\tlet b = rgb[2] / 255;\n\n\t// Assume sRGB\n\tr = r > 0.04045 ? (((r + 0.055) / 1.055) ** 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? (((g + 0.055) / 1.055) ** 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? (((b + 0.055) / 1.055) ** 2.4) : (b / 12.92);\n\n\tconst x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tconst y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tconst z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tconst xyz = convert.rgb.xyz(rgb);\n\tlet x = xyz[0];\n\tlet y = xyz[1];\n\tlet z = xyz[2];\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);\n\n\tconst l = (116 * y) - 16;\n\tconst a = 500 * (x - y);\n\tconst b = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tconst h = hsl[0] / 360;\n\tconst s = hsl[1] / 100;\n\tconst l = hsl[2] / 100;\n\tlet t2;\n\tlet t3;\n\tlet val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tconst t1 = 2 * l - t2;\n\n\tconst rgb = [0, 0, 0];\n\tfor (let i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tconst h = hsl[0];\n\tlet s = hsl[1] / 100;\n\tlet l = hsl[2] / 100;\n\tlet smin = s;\n\tconst lmin = Math.max(l, 0.01);\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tconst v = (l + s) / 2;\n\tconst sv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tconst h = hsv[0] / 60;\n\tconst s = hsv[1] / 100;\n\tlet v = hsv[2] / 100;\n\tconst hi = Math.floor(h) % 6;\n\n\tconst f = h - Math.floor(h);\n\tconst p = 255 * v * (1 - s);\n\tconst q = 255 * v * (1 - (s * f));\n\tconst t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tconst h = hsv[0];\n\tconst s = hsv[1] / 100;\n\tconst v = hsv[2] / 100;\n\tconst vmin = Math.max(v, 0.01);\n\tlet sl;\n\tlet l;\n\n\tl = (2 - s) * v;\n\tconst lmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tconst h = hwb[0] / 360;\n\tlet wh = hwb[1] / 100;\n\tlet bl = hwb[2] / 100;\n\tconst ratio = wh + bl;\n\tlet f;\n\n\t// Wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\tconst i = Math.floor(6 * h);\n\tconst v = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tconst n = wh + f * (v - wh); // Linear interpolation\n\n\tlet r;\n\tlet g;\n\tlet b;\n\t/* eslint-disable max-statements-per-line,no-multi-spaces */\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v;  g = n;  b = wh; break;\n\t\tcase 1: r = n;  g = v;  b = wh; break;\n\t\tcase 2: r = wh; g = v;  b = n; break;\n\t\tcase 3: r = wh; g = n;  b = v; break;\n\t\tcase 4: r = n;  g = wh; b = v; break;\n\t\tcase 5: r = v;  g = wh; b = n; break;\n\t}\n\t/* eslint-enable max-statements-per-line,no-multi-spaces */\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tconst c = cmyk[0] / 100;\n\tconst m = cmyk[1] / 100;\n\tconst y = cmyk[2] / 100;\n\tconst k = cmyk[3] / 100;\n\n\tconst r = 1 - Math.min(1, c * (1 - k) + k);\n\tconst g = 1 - Math.min(1, m * (1 - k) + k);\n\tconst b = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tconst x = xyz[0] / 100;\n\tconst y = xyz[1] / 100;\n\tconst z = xyz[2] / 100;\n\tlet r;\n\tlet g;\n\tlet b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// Assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * (r ** (1.0 / 2.4))) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * (g ** (1.0 / 2.4))) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * (b ** (1.0 / 2.4))) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tlet x = xyz[0];\n\tlet y = xyz[1];\n\tlet z = xyz[2];\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);\n\n\tconst l = (116 * y) - 16;\n\tconst a = 500 * (x - y);\n\tconst b = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tconst l = lab[0];\n\tconst a = lab[1];\n\tconst b = lab[2];\n\tlet x;\n\tlet y;\n\tlet z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tconst y2 = y ** 3;\n\tconst x2 = x ** 3;\n\tconst z2 = z ** 3;\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tconst l = lab[0];\n\tconst a = lab[1];\n\tconst b = lab[2];\n\tlet h;\n\n\tconst hr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tconst c = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tconst l = lch[0];\n\tconst c = lch[1];\n\tconst h = lch[2];\n\n\tconst hr = h / 360 * 2 * Math.PI;\n\tconst a = c * Math.cos(hr);\n\tconst b = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args, saturation = null) {\n\tconst [r, g, b] = args;\n\tlet value = saturation === null ? convert.rgb.hsv(args)[2] : saturation; // Hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tlet ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// Optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tconst r = args[0];\n\tconst g = args[1];\n\tconst b = args[2];\n\n\t// We use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tconst ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tlet color = args % 10;\n\n\t// Handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tconst mult = (~~(args > 50) + 1) * 0.5;\n\tconst r = ((color & 1) * mult) * 255;\n\tconst g = (((color >> 1) & 1) * mult) * 255;\n\tconst b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// Handle greyscale\n\tif (args >= 232) {\n\t\tconst c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tlet rem;\n\tconst r = Math.floor(args / 36) / 5 * 255;\n\tconst g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tconst b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tconst integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tconst string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tconst match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tlet colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(char => {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tconst integer = parseInt(colorString, 16);\n\tconst r = (integer >> 16) & 0xFF;\n\tconst g = (integer >> 8) & 0xFF;\n\tconst b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst max = Math.max(Math.max(r, g), b);\n\tconst min = Math.min(Math.min(r, g), b);\n\tconst chroma = (max - min);\n\tlet grayscale;\n\tlet hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tconst s = hsl[1] / 100;\n\tconst l = hsl[2] / 100;\n\n\tconst c = l < 0.5 ? (2.0 * s * l) : (2.0 * s * (1.0 - l));\n\n\tlet f = 0;\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tconst s = hsv[1] / 100;\n\tconst v = hsv[2] / 100;\n\n\tconst c = s * v;\n\tlet f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tconst h = hcg[0] / 360;\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tconst pure = [0, 0, 0];\n\tconst hi = (h % 1) * 6;\n\tconst v = hi % 1;\n\tconst w = 1 - v;\n\tlet mg = 0;\n\n\t/* eslint-disable max-statements-per-line */\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\t/* eslint-enable max-statements-per-line */\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tconst v = c + g * (1.0 - c);\n\tlet f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tconst l = g * (1.0 - c) + 0.5 * c;\n\tlet s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\tconst v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tconst w = hwb[1] / 100;\n\tconst b = hwb[2] / 100;\n\tconst v = 1 - b;\n\tconst c = v - w;\n\tlet g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hsv = convert.gray.hsl;\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tconst val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tconst integer = (val << 16) + (val << 8) + val;\n\n\tconst string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tconst val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n","const conversions = require('./conversions');\nconst route = require('./route');\n\nconst convert = {};\n\nconst models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tconst wrappedFn = function (...args) {\n\t\tconst arg0 = args[0];\n\t\tif (arg0 === undefined || arg0 === null) {\n\t\t\treturn arg0;\n\t\t}\n\n\t\tif (arg0.length > 1) {\n\t\t\targs = arg0;\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// Preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tconst wrappedFn = function (...args) {\n\t\tconst arg0 = args[0];\n\n\t\tif (arg0 === undefined || arg0 === null) {\n\t\t\treturn arg0;\n\t\t}\n\n\t\tif (arg0.length > 1) {\n\t\t\targs = arg0;\n\t\t}\n\n\t\tconst result = fn(args);\n\n\t\t// We're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (let len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// Preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(fromModel => {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tconst routes = route(fromModel);\n\tconst routeModels = Object.keys(routes);\n\n\trouteModels.forEach(toModel => {\n\t\tconst fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nmodule.exports = convert;\n","const conversions = require('./conversions');\n\n/*\n\tThis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tconst graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tconst models = Object.keys(conversions);\n\n\tfor (let len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tconst graph = buildGraph();\n\tconst queue = [fromModel]; // Unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tconst current = queue.pop();\n\t\tconst adjacents = Object.keys(conversions[current]);\n\n\t\tfor (let len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tconst adjacent = adjacents[i];\n\t\t\tconst node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tconst path = [graph[toModel].parent, toModel];\n\tlet fn = conversions[graph[toModel].parent][toModel];\n\n\tlet cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nmodule.exports = function (fromModel) {\n\tconst graph = deriveBFS(fromModel);\n\tconst conversion = {};\n\n\tconst models = Object.keys(graph);\n\tfor (let len = models.length, i = 0; i < len; i++) {\n\t\tconst toModel = models[i];\n\t\tconst node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// No possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\n","'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","/* MIT license */\nvar colorNames = require('color-name');\nvar swizzle = require('simple-swizzle');\nvar hasOwnProperty = Object.hasOwnProperty;\n\nvar reverseNames = Object.create(null);\n\n// create a list of reverse color names\nfor (var name in colorNames) {\n\tif (hasOwnProperty.call(colorNames, name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nvar cs = module.exports = {\n\tto: {},\n\tget: {}\n};\n\ncs.get = function (string) {\n\tvar prefix = string.substring(0, 3).toLowerCase();\n\tvar val;\n\tvar model;\n\tswitch (prefix) {\n\t\tcase 'hsl':\n\t\t\tval = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\tcase 'hwb':\n\t\t\tval = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tval = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t}\n\n\tif (!val) {\n\t\treturn null;\n\t}\n\n\treturn {model: model, value: val};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar abbr = /^#([a-f0-9]{3,4})$/i;\n\tvar hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n\tvar rgba = /^rgba?\\(\\s*([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar keyword = /^(\\w+)$/;\n\n\tvar rgb = [0, 0, 0, 1];\n\tvar match;\n\tvar i;\n\tvar hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tvar i2 = i * 2;\n\t\t\trgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha + hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i + 1], 0);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\tif (!hasOwnProperty.call(colorNames, match[1])) {\n\t\t\treturn null;\n\t\t}\n\n\t\trgb = colorNames[match[1]];\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hsl = /^hsla?\\(\\s*([+-]?(?:\\d{0,3}\\.)?\\d+)(?:deg)?\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*(?:[,|\\/]\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hsl);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar s = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar l = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hwb = /^hwb\\(\\s*([+-]?\\d{0,3}(?:\\.\\d+)?)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hwb);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar w = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar b = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n\tvar rgba = swizzle(arguments);\n\n\tvar r = Math.round(rgba[0] / 255 * 100);\n\tvar g = Math.round(rgba[1] / 255 * 100);\n\tvar b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n\tvar hsla = swizzle(arguments);\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function () {\n\tvar hwba = swizzle(arguments);\n\n\tvar a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// helpers\nfunction clamp(num, min, max) {\n\treturn Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n\tvar str = Math.round(num).toString(16).toUpperCase();\n\treturn (str.length < 2) ? '0' + str : str;\n}\n","const colorString = require('color-string');\nconst convert = require('color-convert');\n\nconst skippedModels = [\n\t// To be honest, I don't really feel like keyword belongs in color convert, but eh.\n\t'keyword',\n\n\t// Gray conflicts with some method names, and has its own method defined.\n\t'gray',\n\n\t// Shouldn't really be in color-convert either...\n\t'hex',\n];\n\nconst hashedModelKeys = {};\nfor (const model of Object.keys(convert)) {\n\thashedModelKeys[[...convert[model].labels].sort().join('')] = model;\n}\n\nconst limiters = {};\n\nfunction Color(object, model) {\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(object, model);\n\t}\n\n\tif (model && model in skippedModels) {\n\t\tmodel = null;\n\t}\n\n\tif (model && !(model in convert)) {\n\t\tthrow new Error('Unknown model: ' + model);\n\t}\n\n\tlet i;\n\tlet channels;\n\n\tif (object == null) { // eslint-disable-line no-eq-null,eqeqeq\n\t\tthis.model = 'rgb';\n\t\tthis.color = [0, 0, 0];\n\t\tthis.valpha = 1;\n\t} else if (object instanceof Color) {\n\t\tthis.model = object.model;\n\t\tthis.color = [...object.color];\n\t\tthis.valpha = object.valpha;\n\t} else if (typeof object === 'string') {\n\t\tconst result = colorString.get(object);\n\t\tif (result === null) {\n\t\t\tthrow new Error('Unable to parse color from string: ' + object);\n\t\t}\n\n\t\tthis.model = result.model;\n\t\tchannels = convert[this.model].channels;\n\t\tthis.color = result.value.slice(0, channels);\n\t\tthis.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;\n\t} else if (object.length > 0) {\n\t\tthis.model = model || 'rgb';\n\t\tchannels = convert[this.model].channels;\n\t\tconst newArray = Array.prototype.slice.call(object, 0, channels);\n\t\tthis.color = zeroArray(newArray, channels);\n\t\tthis.valpha = typeof object[channels] === 'number' ? object[channels] : 1;\n\t} else if (typeof object === 'number') {\n\t\t// This is always RGB - can be converted later on.\n\t\tthis.model = 'rgb';\n\t\tthis.color = [\n\t\t\t(object >> 16) & 0xFF,\n\t\t\t(object >> 8) & 0xFF,\n\t\t\tobject & 0xFF,\n\t\t];\n\t\tthis.valpha = 1;\n\t} else {\n\t\tthis.valpha = 1;\n\n\t\tconst keys = Object.keys(object);\n\t\tif ('alpha' in object) {\n\t\t\tkeys.splice(keys.indexOf('alpha'), 1);\n\t\t\tthis.valpha = typeof object.alpha === 'number' ? object.alpha : 0;\n\t\t}\n\n\t\tconst hashedKeys = keys.sort().join('');\n\t\tif (!(hashedKeys in hashedModelKeys)) {\n\t\t\tthrow new Error('Unable to parse color from object: ' + JSON.stringify(object));\n\t\t}\n\n\t\tthis.model = hashedModelKeys[hashedKeys];\n\n\t\tconst {labels} = convert[this.model];\n\t\tconst color = [];\n\t\tfor (i = 0; i < labels.length; i++) {\n\t\t\tcolor.push(object[labels[i]]);\n\t\t}\n\n\t\tthis.color = zeroArray(color);\n\t}\n\n\t// Perform limitations (clamping, etc.)\n\tif (limiters[this.model]) {\n\t\tchannels = convert[this.model].channels;\n\t\tfor (i = 0; i < channels; i++) {\n\t\t\tconst limit = limiters[this.model][i];\n\t\t\tif (limit) {\n\t\t\t\tthis.color[i] = limit(this.color[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.valpha = Math.max(0, Math.min(1, this.valpha));\n\n\tif (Object.freeze) {\n\t\tObject.freeze(this);\n\t}\n}\n\nColor.prototype = {\n\ttoString() {\n\t\treturn this.string();\n\t},\n\n\ttoJSON() {\n\t\treturn this[this.model]();\n\t},\n\n\tstring(places) {\n\t\tlet self = this.model in colorString.to ? this : this.rgb();\n\t\tself = self.round(typeof places === 'number' ? places : 1);\n\t\tconst args = self.valpha === 1 ? self.color : [...self.color, this.valpha];\n\t\treturn colorString.to[self.model](args);\n\t},\n\n\tpercentString(places) {\n\t\tconst self = this.rgb().round(typeof places === 'number' ? places : 1);\n\t\tconst args = self.valpha === 1 ? self.color : [...self.color, this.valpha];\n\t\treturn colorString.to.rgb.percent(args);\n\t},\n\n\tarray() {\n\t\treturn this.valpha === 1 ? [...this.color] : [...this.color, this.valpha];\n\t},\n\n\tobject() {\n\t\tconst result = {};\n\t\tconst {channels} = convert[this.model];\n\t\tconst {labels} = convert[this.model];\n\n\t\tfor (let i = 0; i < channels; i++) {\n\t\t\tresult[labels[i]] = this.color[i];\n\t\t}\n\n\t\tif (this.valpha !== 1) {\n\t\t\tresult.alpha = this.valpha;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tunitArray() {\n\t\tconst rgb = this.rgb().color;\n\t\trgb[0] /= 255;\n\t\trgb[1] /= 255;\n\t\trgb[2] /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.push(this.valpha);\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tunitObject() {\n\t\tconst rgb = this.rgb().object();\n\t\trgb.r /= 255;\n\t\trgb.g /= 255;\n\t\trgb.b /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.alpha = this.valpha;\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tround(places) {\n\t\tplaces = Math.max(places || 0, 0);\n\t\treturn new Color([...this.color.map(roundToPlace(places)), this.valpha], this.model);\n\t},\n\n\talpha(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color([...this.color, Math.max(0, Math.min(1, value))], this.model);\n\t\t}\n\n\t\treturn this.valpha;\n\t},\n\n\t// Rgb\n\tred: getset('rgb', 0, maxfn(255)),\n\tgreen: getset('rgb', 1, maxfn(255)),\n\tblue: getset('rgb', 2, maxfn(255)),\n\n\thue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, value => ((value % 360) + 360) % 360),\n\n\tsaturationl: getset('hsl', 1, maxfn(100)),\n\tlightness: getset('hsl', 2, maxfn(100)),\n\n\tsaturationv: getset('hsv', 1, maxfn(100)),\n\tvalue: getset('hsv', 2, maxfn(100)),\n\n\tchroma: getset('hcg', 1, maxfn(100)),\n\tgray: getset('hcg', 2, maxfn(100)),\n\n\twhite: getset('hwb', 1, maxfn(100)),\n\twblack: getset('hwb', 2, maxfn(100)),\n\n\tcyan: getset('cmyk', 0, maxfn(100)),\n\tmagenta: getset('cmyk', 1, maxfn(100)),\n\tyellow: getset('cmyk', 2, maxfn(100)),\n\tblack: getset('cmyk', 3, maxfn(100)),\n\n\tx: getset('xyz', 0, maxfn(95.047)),\n\ty: getset('xyz', 1, maxfn(100)),\n\tz: getset('xyz', 2, maxfn(108.833)),\n\n\tl: getset('lab', 0, maxfn(100)),\n\ta: getset('lab', 1),\n\tb: getset('lab', 2),\n\n\tkeyword(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color(value);\n\t\t}\n\n\t\treturn convert[this.model].keyword(this.color);\n\t},\n\n\thex(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color(value);\n\t\t}\n\n\t\treturn colorString.to.hex(this.rgb().round().color);\n\t},\n\n\thexa(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color(value);\n\t\t}\n\n\t\tconst rgbArray = this.rgb().round().color;\n\n\t\tlet alphaHex = Math.round(this.valpha * 255).toString(16).toUpperCase();\n\t\tif (alphaHex.length === 1) {\n\t\t\talphaHex = '0' + alphaHex;\n\t\t}\n\n\t\treturn colorString.to.hex(rgbArray) + alphaHex;\n\t},\n\n\trgbNumber() {\n\t\tconst rgb = this.rgb().color;\n\t\treturn ((rgb[0] & 0xFF) << 16) | ((rgb[1] & 0xFF) << 8) | (rgb[2] & 0xFF);\n\t},\n\n\tluminosity() {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tconst rgb = this.rgb().color;\n\n\t\tconst lum = [];\n\t\tfor (const [i, element] of rgb.entries()) {\n\t\t\tconst chan = element / 255;\n\t\t\tlum[i] = (chan <= 0.04045) ? chan / 12.92 : ((chan + 0.055) / 1.055) ** 2.4;\n\t\t}\n\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast(color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tconst lum1 = this.luminosity();\n\t\tconst lum2 = color2.luminosity();\n\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel(color2) {\n\t\t// https://www.w3.org/TR/WCAG/#contrast-enhanced\n\t\tconst contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tisDark() {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tconst rgb = this.rgb().color;\n\t\tconst yiq = (rgb[0] * 2126 + rgb[1] * 7152 + rgb[2] * 722) / 10000;\n\t\treturn yiq < 128;\n\t},\n\n\tisLight() {\n\t\treturn !this.isDark();\n\t},\n\n\tnegate() {\n\t\tconst rgb = this.rgb();\n\t\tfor (let i = 0; i < 3; i++) {\n\t\t\trgb.color[i] = 255 - rgb.color[i];\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tlighten(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[2] += hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdarken(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[2] -= hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tsaturate(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[1] += hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdesaturate(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[1] -= hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\twhiten(ratio) {\n\t\tconst hwb = this.hwb();\n\t\thwb.color[1] += hwb.color[1] * ratio;\n\t\treturn hwb;\n\t},\n\n\tblacken(ratio) {\n\t\tconst hwb = this.hwb();\n\t\thwb.color[2] += hwb.color[2] * ratio;\n\t\treturn hwb;\n\t},\n\n\tgrayscale() {\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n\t\tconst rgb = this.rgb().color;\n\t\tconst value = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\treturn Color.rgb(value, value, value);\n\t},\n\n\tfade(ratio) {\n\t\treturn this.alpha(this.valpha - (this.valpha * ratio));\n\t},\n\n\topaquer(ratio) {\n\t\treturn this.alpha(this.valpha + (this.valpha * ratio));\n\t},\n\n\trotate(degrees) {\n\t\tconst hsl = this.hsl();\n\t\tlet hue = hsl.color[0];\n\t\thue = (hue + degrees) % 360;\n\t\thue = hue < 0 ? 360 + hue : hue;\n\t\thsl.color[0] = hue;\n\t\treturn hsl;\n\t},\n\n\tmix(mixinColor, weight) {\n\t\t// Ported from sass implementation in C\n\t\t// https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t\tif (!mixinColor || !mixinColor.rgb) {\n\t\t\tthrow new Error('Argument to \"mix\" was not a Color instance, but rather an instance of ' + typeof mixinColor);\n\t\t}\n\n\t\tconst color1 = mixinColor.rgb();\n\t\tconst color2 = this.rgb();\n\t\tconst p = weight === undefined ? 0.5 : weight;\n\n\t\tconst w = 2 * p - 1;\n\t\tconst a = color1.alpha() - color2.alpha();\n\n\t\tconst w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2;\n\t\tconst w2 = 1 - w1;\n\n\t\treturn Color.rgb(\n\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\tw1 * color1.blue() + w2 * color2.blue(),\n\t\t\tcolor1.alpha() * p + color2.alpha() * (1 - p));\n\t},\n};\n\n// Model conversion methods and static constructors\nfor (const model of Object.keys(convert)) {\n\tif (skippedModels.includes(model)) {\n\t\tcontinue;\n\t}\n\n\tconst {channels} = convert[model];\n\n\t// Conversion methods\n\tColor.prototype[model] = function (...args) {\n\t\tif (this.model === model) {\n\t\t\treturn new Color(this);\n\t\t}\n\n\t\tif (args.length > 0) {\n\t\t\treturn new Color(args, model);\n\t\t}\n\n\t\treturn new Color([...assertArray(convert[this.model][model].raw(this.color)), this.valpha], model);\n\t};\n\n\t// 'static' construction methods\n\tColor[model] = function (...args) {\n\t\tlet color = args[0];\n\t\tif (typeof color === 'number') {\n\t\t\tcolor = zeroArray(args, channels);\n\t\t}\n\n\t\treturn new Color(color, model);\n\t};\n}\n\nfunction roundTo(number, places) {\n\treturn Number(number.toFixed(places));\n}\n\nfunction roundToPlace(places) {\n\treturn function (number) {\n\t\treturn roundTo(number, places);\n\t};\n}\n\nfunction getset(model, channel, modifier) {\n\tmodel = Array.isArray(model) ? model : [model];\n\n\tfor (const m of model) {\n\t\t(limiters[m] || (limiters[m] = []))[channel] = modifier;\n\t}\n\n\tmodel = model[0];\n\n\treturn function (value) {\n\t\tlet result;\n\n\t\tif (value !== undefined) {\n\t\t\tif (modifier) {\n\t\t\t\tvalue = modifier(value);\n\t\t\t}\n\n\t\t\tresult = this[model]();\n\t\t\tresult.color[channel] = value;\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = this[model]().color[channel];\n\t\tif (modifier) {\n\t\t\tresult = modifier(result);\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nfunction maxfn(max) {\n\treturn function (v) {\n\t\treturn Math.max(0, Math.min(max, v));\n\t};\n}\n\nfunction assertArray(value) {\n\treturn Array.isArray(value) ? value : [value];\n}\n\nfunction zeroArray(array, length) {\n\tfor (let i = 0; i < length; i++) {\n\t\tif (typeof array[i] !== 'number') {\n\t\t\tarray[i] = 0;\n\t\t}\n\t}\n\n\treturn array;\n}\n\nmodule.exports = Color;\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","// light library entry point.\r\n\r\n\"use strict\";\r\nmodule.exports = require(\"./src/index-light\");","\"use strict\";\r\n/**\r\n * Runtime message from/to plain object converters.\r\n * @namespace\r\n */\r\nvar converter = exports;\r\n\r\nvar Enum = require(\"./enum\"),\r\n    util = require(\"./util\");\r\n\r\n/**\r\n * Generates a partial value fromObject conveter.\r\n * @param {Codegen} gen Codegen instance\r\n * @param {Field} field Reflected field\r\n * @param {number} fieldIndex Field index\r\n * @param {string} prop Property reference\r\n * @returns {Codegen} Codegen instance\r\n * @ignore\r\n */\r\nfunction genValuePartial_fromObject(gen, field, fieldIndex, prop) {\r\n    var defaultAlreadyEmitted = false;\r\n    /* eslint-disable no-unexpected-multiline, block-scoped-var, no-redeclare */\r\n    if (field.resolvedType) {\r\n        if (field.resolvedType instanceof Enum) { gen\r\n            (\"switch(d%s){\", prop);\r\n            for (var values = field.resolvedType.values, keys = Object.keys(values), i = 0; i < keys.length; ++i) {\r\n                // enum unknown values passthrough\r\n                if (values[keys[i]] === field.typeDefault && !defaultAlreadyEmitted) { gen\r\n                    (\"default:\")\r\n                        (\"if(typeof(d%s)===\\\"number\\\"){m%s=d%s;break}\", prop, prop, prop);\r\n                    if (!field.repeated) gen // fallback to default value only for\r\n                                             // arrays, to avoid leaving holes.\r\n                        (\"break\");           // for non-repeated fields, just ignore\r\n                    defaultAlreadyEmitted = true;\r\n                }\r\n                gen\r\n                (\"case%j:\", keys[i])\r\n                (\"case %i:\", values[keys[i]])\r\n                    (\"m%s=%j\", prop, values[keys[i]])\r\n                    (\"break\");\r\n            } gen\r\n            (\"}\");\r\n        } else gen\r\n            (\"if(typeof d%s!==\\\"object\\\")\", prop)\r\n                (\"throw TypeError(%j)\", field.fullName + \": object expected\")\r\n            (\"m%s=types[%i].fromObject(d%s)\", prop, fieldIndex, prop);\r\n    } else {\r\n        var isUnsigned = false;\r\n        switch (field.type) {\r\n            case \"double\":\r\n            case \"float\": gen\r\n                (\"m%s=Number(d%s)\", prop, prop); // also catches \"NaN\", \"Infinity\"\r\n                break;\r\n            case \"uint32\":\r\n            case \"fixed32\": gen\r\n                (\"m%s=d%s>>>0\", prop, prop);\r\n                break;\r\n            case \"int32\":\r\n            case \"sint32\":\r\n            case \"sfixed32\": gen\r\n                (\"m%s=d%s|0\", prop, prop);\r\n                break;\r\n            case \"uint64\":\r\n                isUnsigned = true;\r\n                // eslint-disable-next-line no-fallthrough\r\n            case \"int64\":\r\n            case \"sint64\":\r\n            case \"fixed64\":\r\n            case \"sfixed64\": gen\r\n                (\"if(util.Long)\")\r\n                    (\"(m%s=util.Long.fromValue(d%s)).unsigned=%j\", prop, prop, isUnsigned)\r\n                (\"else if(typeof d%s===\\\"string\\\")\", prop)\r\n                    (\"m%s=parseInt(d%s,10)\", prop, prop)\r\n                (\"else if(typeof d%s===\\\"number\\\")\", prop)\r\n                    (\"m%s=d%s\", prop, prop)\r\n                (\"else if(typeof d%s===\\\"object\\\")\", prop)\r\n                    (\"m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)\", prop, prop, prop, isUnsigned ? \"true\" : \"\");\r\n                break;\r\n            case \"bytes\": gen\r\n                (\"if(typeof d%s===\\\"string\\\")\", prop)\r\n                    (\"util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)\", prop, prop, prop)\r\n                (\"else if(d%s.length >= 0)\", prop)\r\n                    (\"m%s=d%s\", prop, prop);\r\n                break;\r\n            case \"string\": gen\r\n                (\"m%s=String(d%s)\", prop, prop);\r\n                break;\r\n            case \"bool\": gen\r\n                (\"m%s=Boolean(d%s)\", prop, prop);\r\n                break;\r\n            /* default: gen\r\n                (\"m%s=d%s\", prop, prop);\r\n                break; */\r\n        }\r\n    }\r\n    return gen;\r\n    /* eslint-enable no-unexpected-multiline, block-scoped-var, no-redeclare */\r\n}\r\n\r\n/**\r\n * Generates a plain object to runtime message converter specific to the specified message type.\r\n * @param {Type} mtype Message type\r\n * @returns {Codegen} Codegen instance\r\n */\r\nconverter.fromObject = function fromObject(mtype) {\r\n    /* eslint-disable no-unexpected-multiline, block-scoped-var, no-redeclare */\r\n    var fields = mtype.fieldsArray;\r\n    var gen = util.codegen([\"d\"], mtype.name + \"$fromObject\")\r\n    (\"if(d instanceof this.ctor)\")\r\n        (\"return d\");\r\n    if (!fields.length) return gen\r\n    (\"return new this.ctor\");\r\n    gen\r\n    (\"var m=new this.ctor\");\r\n    for (var i = 0; i < fields.length; ++i) {\r\n        var field  = fields[i].resolve(),\r\n            prop   = util.safeProp(field.name);\r\n\r\n        // Map fields\r\n        if (field.map) { gen\r\n    (\"if(d%s){\", prop)\r\n        (\"if(typeof d%s!==\\\"object\\\")\", prop)\r\n            (\"throw TypeError(%j)\", field.fullName + \": object expected\")\r\n        (\"m%s={}\", prop)\r\n        (\"for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){\", prop);\r\n            genValuePartial_fromObject(gen, field, /* not sorted */ i, prop + \"[ks[i]]\")\r\n        (\"}\")\r\n    (\"}\");\r\n\r\n        // Repeated fields\r\n        } else if (field.repeated) { gen\r\n    (\"if(d%s){\", prop)\r\n        (\"if(!Array.isArray(d%s))\", prop)\r\n            (\"throw TypeError(%j)\", field.fullName + \": array expected\")\r\n        (\"m%s=[]\", prop)\r\n        (\"for(var i=0;i<d%s.length;++i){\", prop);\r\n            genValuePartial_fromObject(gen, field, /* not sorted */ i, prop + \"[i]\")\r\n        (\"}\")\r\n    (\"}\");\r\n\r\n        // Non-repeated fields\r\n        } else {\r\n            if (!(field.resolvedType instanceof Enum)) gen // no need to test for null/undefined if an enum (uses switch)\r\n    (\"if(d%s!=null){\", prop); // !== undefined && !== null\r\n        genValuePartial_fromObject(gen, field, /* not sorted */ i, prop);\r\n            if (!(field.resolvedType instanceof Enum)) gen\r\n    (\"}\");\r\n        }\r\n    } return gen\r\n    (\"return m\");\r\n    /* eslint-enable no-unexpected-multiline, block-scoped-var, no-redeclare */\r\n};\r\n\r\n/**\r\n * Generates a partial value toObject converter.\r\n * @param {Codegen} gen Codegen instance\r\n * @param {Field} field Reflected field\r\n * @param {number} fieldIndex Field index\r\n * @param {string} prop Property reference\r\n * @returns {Codegen} Codegen instance\r\n * @ignore\r\n */\r\nfunction genValuePartial_toObject(gen, field, fieldIndex, prop) {\r\n    /* eslint-disable no-unexpected-multiline, block-scoped-var, no-redeclare */\r\n    if (field.resolvedType) {\r\n        if (field.resolvedType instanceof Enum) gen\r\n            (\"d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s\", prop, fieldIndex, prop, prop, fieldIndex, prop, prop);\r\n        else gen\r\n            (\"d%s=types[%i].toObject(m%s,o)\", prop, fieldIndex, prop);\r\n    } else {\r\n        var isUnsigned = false;\r\n        switch (field.type) {\r\n            case \"double\":\r\n            case \"float\": gen\r\n            (\"d%s=o.json&&!isFinite(m%s)?String(m%s):m%s\", prop, prop, prop, prop);\r\n                break;\r\n            case \"uint64\":\r\n                isUnsigned = true;\r\n                // eslint-disable-next-line no-fallthrough\r\n            case \"int64\":\r\n            case \"sint64\":\r\n            case \"fixed64\":\r\n            case \"sfixed64\": gen\r\n            (\"if(typeof m%s===\\\"number\\\")\", prop)\r\n                (\"d%s=o.longs===String?String(m%s):m%s\", prop, prop, prop)\r\n            (\"else\") // Long-like\r\n                (\"d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s\", prop, prop, prop, prop, isUnsigned ? \"true\": \"\", prop);\r\n                break;\r\n            case \"bytes\": gen\r\n            (\"d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s\", prop, prop, prop, prop, prop);\r\n                break;\r\n            default: gen\r\n            (\"d%s=m%s\", prop, prop);\r\n                break;\r\n        }\r\n    }\r\n    return gen;\r\n    /* eslint-enable no-unexpected-multiline, block-scoped-var, no-redeclare */\r\n}\r\n\r\n/**\r\n * Generates a runtime message to plain object converter specific to the specified message type.\r\n * @param {Type} mtype Message type\r\n * @returns {Codegen} Codegen instance\r\n */\r\nconverter.toObject = function toObject(mtype) {\r\n    /* eslint-disable no-unexpected-multiline, block-scoped-var, no-redeclare */\r\n    var fields = mtype.fieldsArray.slice().sort(util.compareFieldsById);\r\n    if (!fields.length)\r\n        return util.codegen()(\"return {}\");\r\n    var gen = util.codegen([\"m\", \"o\"], mtype.name + \"$toObject\")\r\n    (\"if(!o)\")\r\n        (\"o={}\")\r\n    (\"var d={}\");\r\n\r\n    var repeatedFields = [],\r\n        mapFields = [],\r\n        normalFields = [],\r\n        i = 0;\r\n    for (; i < fields.length; ++i)\r\n        if (!fields[i].partOf)\r\n            ( fields[i].resolve().repeated ? repeatedFields\r\n            : fields[i].map ? mapFields\r\n            : normalFields).push(fields[i]);\r\n\r\n    if (repeatedFields.length) { gen\r\n    (\"if(o.arrays||o.defaults){\");\r\n        for (i = 0; i < repeatedFields.length; ++i) gen\r\n        (\"d%s=[]\", util.safeProp(repeatedFields[i].name));\r\n        gen\r\n    (\"}\");\r\n    }\r\n\r\n    if (mapFields.length) { gen\r\n    (\"if(o.objects||o.defaults){\");\r\n        for (i = 0; i < mapFields.length; ++i) gen\r\n        (\"d%s={}\", util.safeProp(mapFields[i].name));\r\n        gen\r\n    (\"}\");\r\n    }\r\n\r\n    if (normalFields.length) { gen\r\n    (\"if(o.defaults){\");\r\n        for (i = 0; i < normalFields.length; ++i) {\r\n            var field = normalFields[i],\r\n                prop  = util.safeProp(field.name);\r\n            if (field.resolvedType instanceof Enum) gen\r\n        (\"d%s=o.enums===String?%j:%j\", prop, field.resolvedType.valuesById[field.typeDefault], field.typeDefault);\r\n            else if (field.long) gen\r\n        (\"if(util.Long){\")\r\n            (\"var n=new util.Long(%i,%i,%j)\", field.typeDefault.low, field.typeDefault.high, field.typeDefault.unsigned)\r\n            (\"d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n\", prop)\r\n        (\"}else\")\r\n            (\"d%s=o.longs===String?%j:%i\", prop, field.typeDefault.toString(), field.typeDefault.toNumber());\r\n            else if (field.bytes) {\r\n                var arrayDefault = \"[\" + Array.prototype.slice.call(field.typeDefault).join(\",\") + \"]\";\r\n                gen\r\n        (\"if(o.bytes===String)d%s=%j\", prop, String.fromCharCode.apply(String, field.typeDefault))\r\n        (\"else{\")\r\n            (\"d%s=%s\", prop, arrayDefault)\r\n            (\"if(o.bytes!==Array)d%s=util.newBuffer(d%s)\", prop, prop)\r\n        (\"}\");\r\n            } else gen\r\n        (\"d%s=%j\", prop, field.typeDefault); // also messages (=null)\r\n        } gen\r\n    (\"}\");\r\n    }\r\n    var hasKs2 = false;\r\n    for (i = 0; i < fields.length; ++i) {\r\n        var field = fields[i],\r\n            index = mtype._fieldsArray.indexOf(field),\r\n            prop  = util.safeProp(field.name);\r\n        if (field.map) {\r\n            if (!hasKs2) { hasKs2 = true; gen\r\n    (\"var ks2\");\r\n            } gen\r\n    (\"if(m%s&&(ks2=Object.keys(m%s)).length){\", prop, prop)\r\n        (\"d%s={}\", prop)\r\n        (\"for(var j=0;j<ks2.length;++j){\");\r\n            genValuePartial_toObject(gen, field, /* sorted */ index, prop + \"[ks2[j]]\")\r\n        (\"}\");\r\n        } else if (field.repeated) { gen\r\n    (\"if(m%s&&m%s.length){\", prop, prop)\r\n        (\"d%s=[]\", prop)\r\n        (\"for(var j=0;j<m%s.length;++j){\", prop);\r\n            genValuePartial_toObject(gen, field, /* sorted */ index, prop + \"[j]\")\r\n        (\"}\");\r\n        } else { gen\r\n    (\"if(m%s!=null&&m.hasOwnProperty(%j)){\", prop, field.name); // !== undefined && !== null\r\n        genValuePartial_toObject(gen, field, /* sorted */ index, prop);\r\n        if (field.partOf) gen\r\n        (\"if(o.oneofs)\")\r\n            (\"d%s=%j\", util.safeProp(field.partOf.name), field.name);\r\n        }\r\n        gen\r\n    (\"}\");\r\n    }\r\n    return gen\r\n    (\"return d\");\r\n    /* eslint-enable no-unexpected-multiline, block-scoped-var, no-redeclare */\r\n};\r\n","\"use strict\";\r\nmodule.exports = decoder;\r\n\r\nvar Enum    = require(\"./enum\"),\r\n    types   = require(\"./types\"),\r\n    util    = require(\"./util\");\r\n\r\nfunction missing(field) {\r\n    return \"missing required '\" + field.name + \"'\";\r\n}\r\n\r\n/**\r\n * Generates a decoder specific to the specified message type.\r\n * @param {Type} mtype Message type\r\n * @returns {Codegen} Codegen instance\r\n */\r\nfunction decoder(mtype) {\r\n    /* eslint-disable no-unexpected-multiline */\r\n    var gen = util.codegen([\"r\", \"l\"], mtype.name + \"$decode\")\r\n    (\"if(!(r instanceof Reader))\")\r\n        (\"r=Reader.create(r)\")\r\n    (\"var c=l===undefined?r.len:r.pos+l,m=new this.ctor\" + (mtype.fieldsArray.filter(function(field) { return field.map; }).length ? \",k,value\" : \"\"))\r\n    (\"while(r.pos<c){\")\r\n        (\"var t=r.uint32()\");\r\n    if (mtype.group) gen\r\n        (\"if((t&7)===4)\")\r\n            (\"break\");\r\n    gen\r\n        (\"switch(t>>>3){\");\r\n\r\n    var i = 0;\r\n    for (; i < /* initializes */ mtype.fieldsArray.length; ++i) {\r\n        var field = mtype._fieldsArray[i].resolve(),\r\n            type  = field.resolvedType instanceof Enum ? \"int32\" : field.type,\r\n            ref   = \"m\" + util.safeProp(field.name); gen\r\n            (\"case %i: {\", field.id);\r\n\r\n        // Map fields\r\n        if (field.map) { gen\r\n                (\"if(%s===util.emptyObject)\", ref)\r\n                    (\"%s={}\", ref)\r\n                (\"var c2 = r.uint32()+r.pos\");\r\n\r\n            if (types.defaults[field.keyType] !== undefined) gen\r\n                (\"k=%j\", types.defaults[field.keyType]);\r\n            else gen\r\n                (\"k=null\");\r\n\r\n            if (types.defaults[type] !== undefined) gen\r\n                (\"value=%j\", types.defaults[type]);\r\n            else gen\r\n                (\"value=null\");\r\n\r\n            gen\r\n                (\"while(r.pos<c2){\")\r\n                    (\"var tag2=r.uint32()\")\r\n                    (\"switch(tag2>>>3){\")\r\n                        (\"case 1: k=r.%s(); break\", field.keyType)\r\n                        (\"case 2:\");\r\n\r\n            if (types.basic[type] === undefined) gen\r\n                            (\"value=types[%i].decode(r,r.uint32())\", i); // can't be groups\r\n            else gen\r\n                            (\"value=r.%s()\", type);\r\n\r\n            gen\r\n                            (\"break\")\r\n                        (\"default:\")\r\n                            (\"r.skipType(tag2&7)\")\r\n                            (\"break\")\r\n                    (\"}\")\r\n                (\"}\");\r\n\r\n            if (types.long[field.keyType] !== undefined) gen\r\n                (\"%s[typeof k===\\\"object\\\"?util.longToHash(k):k]=value\", ref);\r\n            else gen\r\n                (\"%s[k]=value\", ref);\r\n\r\n        // Repeated fields\r\n        } else if (field.repeated) { gen\r\n\r\n                (\"if(!(%s&&%s.length))\", ref, ref)\r\n                    (\"%s=[]\", ref);\r\n\r\n            // Packable (always check for forward and backward compatiblity)\r\n            if (types.packed[type] !== undefined) gen\r\n                (\"if((t&7)===2){\")\r\n                    (\"var c2=r.uint32()+r.pos\")\r\n                    (\"while(r.pos<c2)\")\r\n                        (\"%s.push(r.%s())\", ref, type)\r\n                (\"}else\");\r\n\r\n            // Non-packed\r\n            if (types.basic[type] === undefined) gen(field.resolvedType.group\r\n                    ? \"%s.push(types[%i].decode(r))\"\r\n                    : \"%s.push(types[%i].decode(r,r.uint32()))\", ref, i);\r\n            else gen\r\n                    (\"%s.push(r.%s())\", ref, type);\r\n\r\n        // Non-repeated\r\n        } else if (types.basic[type] === undefined) gen(field.resolvedType.group\r\n                ? \"%s=types[%i].decode(r)\"\r\n                : \"%s=types[%i].decode(r,r.uint32())\", ref, i);\r\n        else gen\r\n                (\"%s=r.%s()\", ref, type);\r\n        gen\r\n                (\"break\")\r\n            (\"}\");\r\n        // Unknown fields\r\n    } gen\r\n            (\"default:\")\r\n                (\"r.skipType(t&7)\")\r\n                (\"break\")\r\n\r\n        (\"}\")\r\n    (\"}\");\r\n\r\n    // Field presence\r\n    for (i = 0; i < mtype._fieldsArray.length; ++i) {\r\n        var rfield = mtype._fieldsArray[i];\r\n        if (rfield.required) gen\r\n    (\"if(!m.hasOwnProperty(%j))\", rfield.name)\r\n        (\"throw util.ProtocolError(%j,{instance:m})\", missing(rfield));\r\n    }\r\n\r\n    return gen\r\n    (\"return m\");\r\n    /* eslint-enable no-unexpected-multiline */\r\n}\r\n","\"use strict\";\r\nmodule.exports = encoder;\r\n\r\nvar Enum     = require(\"./enum\"),\r\n    types    = require(\"./types\"),\r\n    util     = require(\"./util\");\r\n\r\n/**\r\n * Generates a partial message type encoder.\r\n * @param {Codegen} gen Codegen instance\r\n * @param {Field} field Reflected field\r\n * @param {number} fieldIndex Field index\r\n * @param {string} ref Variable reference\r\n * @returns {Codegen} Codegen instance\r\n * @ignore\r\n */\r\nfunction genTypePartial(gen, field, fieldIndex, ref) {\r\n    return field.resolvedType.group\r\n        ? gen(\"types[%i].encode(%s,w.uint32(%i)).uint32(%i)\", fieldIndex, ref, (field.id << 3 | 3) >>> 0, (field.id << 3 | 4) >>> 0)\r\n        : gen(\"types[%i].encode(%s,w.uint32(%i).fork()).ldelim()\", fieldIndex, ref, (field.id << 3 | 2) >>> 0);\r\n}\r\n\r\n/**\r\n * Generates an encoder specific to the specified message type.\r\n * @param {Type} mtype Message type\r\n * @returns {Codegen} Codegen instance\r\n */\r\nfunction encoder(mtype) {\r\n    /* eslint-disable no-unexpected-multiline, block-scoped-var, no-redeclare */\r\n    var gen = util.codegen([\"m\", \"w\"], mtype.name + \"$encode\")\r\n    (\"if(!w)\")\r\n        (\"w=Writer.create()\");\r\n\r\n    var i, ref;\r\n\r\n    // \"when a message is serialized its known fields should be written sequentially by field number\"\r\n    var fields = /* initializes */ mtype.fieldsArray.slice().sort(util.compareFieldsById);\r\n\r\n    for (var i = 0; i < fields.length; ++i) {\r\n        var field    = fields[i].resolve(),\r\n            index    = mtype._fieldsArray.indexOf(field),\r\n            type     = field.resolvedType instanceof Enum ? \"int32\" : field.type,\r\n            wireType = types.basic[type];\r\n            ref      = \"m\" + util.safeProp(field.name);\r\n\r\n        // Map fields\r\n        if (field.map) {\r\n            gen\r\n    (\"if(%s!=null&&Object.hasOwnProperty.call(m,%j)){\", ref, field.name) // !== undefined && !== null\r\n        (\"for(var ks=Object.keys(%s),i=0;i<ks.length;++i){\", ref)\r\n            (\"w.uint32(%i).fork().uint32(%i).%s(ks[i])\", (field.id << 3 | 2) >>> 0, 8 | types.mapKey[field.keyType], field.keyType);\r\n            if (wireType === undefined) gen\r\n            (\"types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()\", index, ref); // can't be groups\r\n            else gen\r\n            (\".uint32(%i).%s(%s[ks[i]]).ldelim()\", 16 | wireType, type, ref);\r\n            gen\r\n        (\"}\")\r\n    (\"}\");\r\n\r\n            // Repeated fields\r\n        } else if (field.repeated) { gen\r\n    (\"if(%s!=null&&%s.length){\", ref, ref); // !== undefined && !== null\r\n\r\n            // Packed repeated\r\n            if (field.packed && types.packed[type] !== undefined) { gen\r\n\r\n        (\"w.uint32(%i).fork()\", (field.id << 3 | 2) >>> 0)\r\n        (\"for(var i=0;i<%s.length;++i)\", ref)\r\n            (\"w.%s(%s[i])\", type, ref)\r\n        (\"w.ldelim()\");\r\n\r\n            // Non-packed\r\n            } else { gen\r\n\r\n        (\"for(var i=0;i<%s.length;++i)\", ref);\r\n                if (wireType === undefined)\r\n            genTypePartial(gen, field, index, ref + \"[i]\");\r\n                else gen\r\n            (\"w.uint32(%i).%s(%s[i])\", (field.id << 3 | wireType) >>> 0, type, ref);\r\n\r\n            } gen\r\n    (\"}\");\r\n\r\n        // Non-repeated\r\n        } else {\r\n            if (field.optional) gen\r\n    (\"if(%s!=null&&Object.hasOwnProperty.call(m,%j))\", ref, field.name); // !== undefined && !== null\r\n\r\n            if (wireType === undefined)\r\n        genTypePartial(gen, field, index, ref);\r\n            else gen\r\n        (\"w.uint32(%i).%s(%s)\", (field.id << 3 | wireType) >>> 0, type, ref);\r\n\r\n        }\r\n    }\r\n\r\n    return gen\r\n    (\"return w\");\r\n    /* eslint-enable no-unexpected-multiline, block-scoped-var, no-redeclare */\r\n}\r\n","\"use strict\";\r\nmodule.exports = Enum;\r\n\r\n// extends ReflectionObject\r\nvar ReflectionObject = require(\"./object\");\r\n((Enum.prototype = Object.create(ReflectionObject.prototype)).constructor = Enum).className = \"Enum\";\r\n\r\nvar Namespace = require(\"./namespace\"),\r\n    util = require(\"./util\");\r\n\r\n/**\r\n * Constructs a new enum instance.\r\n * @classdesc Reflected enum.\r\n * @extends ReflectionObject\r\n * @constructor\r\n * @param {string} name Unique name within its namespace\r\n * @param {Object.<string,number>} [values] Enum values as an object, by name\r\n * @param {Object.<string,*>} [options] Declared options\r\n * @param {string} [comment] The comment for this enum\r\n * @param {Object.<string,string>} [comments] The value comments for this enum\r\n * @param {Object.<string,Object<string,*>>|undefined} [valuesOptions] The value options for this enum\r\n */\r\nfunction Enum(name, values, options, comment, comments, valuesOptions) {\r\n    ReflectionObject.call(this, name, options);\r\n\r\n    if (values && typeof values !== \"object\")\r\n        throw TypeError(\"values must be an object\");\r\n\r\n    /**\r\n     * Enum values by id.\r\n     * @type {Object.<number,string>}\r\n     */\r\n    this.valuesById = {};\r\n\r\n    /**\r\n     * Enum values by name.\r\n     * @type {Object.<string,number>}\r\n     */\r\n    this.values = Object.create(this.valuesById); // toJSON, marker\r\n\r\n    /**\r\n     * Enum comment text.\r\n     * @type {string|null}\r\n     */\r\n    this.comment = comment;\r\n\r\n    /**\r\n     * Value comment texts, if any.\r\n     * @type {Object.<string,string>}\r\n     */\r\n    this.comments = comments || {};\r\n\r\n    /**\r\n     * Values options, if any\r\n     * @type {Object<string, Object<string, *>>|undefined}\r\n     */\r\n    this.valuesOptions = valuesOptions;\r\n\r\n    /**\r\n     * Reserved ranges, if any.\r\n     * @type {Array.<number[]|string>}\r\n     */\r\n    this.reserved = undefined; // toJSON\r\n\r\n    // Note that values inherit valuesById on their prototype which makes them a TypeScript-\r\n    // compatible enum. This is used by pbts to write actual enum definitions that work for\r\n    // static and reflection code alike instead of emitting generic object definitions.\r\n\r\n    if (values)\r\n        for (var keys = Object.keys(values), i = 0; i < keys.length; ++i)\r\n            if (typeof values[keys[i]] === \"number\") // use forward entries only\r\n                this.valuesById[ this.values[keys[i]] = values[keys[i]] ] = keys[i];\r\n}\r\n\r\n/**\r\n * Enum descriptor.\r\n * @interface IEnum\r\n * @property {Object.<string,number>} values Enum values\r\n * @property {Object.<string,*>} [options] Enum options\r\n */\r\n\r\n/**\r\n * Constructs an enum from an enum descriptor.\r\n * @param {string} name Enum name\r\n * @param {IEnum} json Enum descriptor\r\n * @returns {Enum} Created enum\r\n * @throws {TypeError} If arguments are invalid\r\n */\r\nEnum.fromJSON = function fromJSON(name, json) {\r\n    var enm = new Enum(name, json.values, json.options, json.comment, json.comments);\r\n    enm.reserved = json.reserved;\r\n    return enm;\r\n};\r\n\r\n/**\r\n * Converts this enum to an enum descriptor.\r\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\r\n * @returns {IEnum} Enum descriptor\r\n */\r\nEnum.prototype.toJSON = function toJSON(toJSONOptions) {\r\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\r\n    return util.toObject([\r\n        \"options\"       , this.options,\r\n        \"valuesOptions\" , this.valuesOptions,\r\n        \"values\"        , this.values,\r\n        \"reserved\"      , this.reserved && this.reserved.length ? this.reserved : undefined,\r\n        \"comment\"       , keepComments ? this.comment : undefined,\r\n        \"comments\"      , keepComments ? this.comments : undefined\r\n    ]);\r\n};\r\n\r\n/**\r\n * Adds a value to this enum.\r\n * @param {string} name Value name\r\n * @param {number} id Value id\r\n * @param {string} [comment] Comment, if any\r\n * @param {Object.<string, *>|undefined} [options] Options, if any\r\n * @returns {Enum} `this`\r\n * @throws {TypeError} If arguments are invalid\r\n * @throws {Error} If there is already a value with this name or id\r\n */\r\nEnum.prototype.add = function add(name, id, comment, options) {\r\n    // utilized by the parser but not by .fromJSON\r\n\r\n    if (!util.isString(name))\r\n        throw TypeError(\"name must be a string\");\r\n\r\n    if (!util.isInteger(id))\r\n        throw TypeError(\"id must be an integer\");\r\n\r\n    if (this.values[name] !== undefined)\r\n        throw Error(\"duplicate name '\" + name + \"' in \" + this);\r\n\r\n    if (this.isReservedId(id))\r\n        throw Error(\"id \" + id + \" is reserved in \" + this);\r\n\r\n    if (this.isReservedName(name))\r\n        throw Error(\"name '\" + name + \"' is reserved in \" + this);\r\n\r\n    if (this.valuesById[id] !== undefined) {\r\n        if (!(this.options && this.options.allow_alias))\r\n            throw Error(\"duplicate id \" + id + \" in \" + this);\r\n        this.values[name] = id;\r\n    } else\r\n        this.valuesById[this.values[name] = id] = name;\r\n\r\n    if (options) {\r\n        if (this.valuesOptions === undefined)\r\n            this.valuesOptions = {};\r\n        this.valuesOptions[name] = options || null;\r\n    }\r\n\r\n    this.comments[name] = comment || null;\r\n    return this;\r\n};\r\n\r\n/**\r\n * Removes a value from this enum\r\n * @param {string} name Value name\r\n * @returns {Enum} `this`\r\n * @throws {TypeError} If arguments are invalid\r\n * @throws {Error} If `name` is not a name of this enum\r\n */\r\nEnum.prototype.remove = function remove(name) {\r\n\r\n    if (!util.isString(name))\r\n        throw TypeError(\"name must be a string\");\r\n\r\n    var val = this.values[name];\r\n    if (val == null)\r\n        throw Error(\"name '\" + name + \"' does not exist in \" + this);\r\n\r\n    delete this.valuesById[val];\r\n    delete this.values[name];\r\n    delete this.comments[name];\r\n    if (this.valuesOptions)\r\n        delete this.valuesOptions[name];\r\n\r\n    return this;\r\n};\r\n\r\n/**\r\n * Tests if the specified id is reserved.\r\n * @param {number} id Id to test\r\n * @returns {boolean} `true` if reserved, otherwise `false`\r\n */\r\nEnum.prototype.isReservedId = function isReservedId(id) {\r\n    return Namespace.isReservedId(this.reserved, id);\r\n};\r\n\r\n/**\r\n * Tests if the specified name is reserved.\r\n * @param {string} name Name to test\r\n * @returns {boolean} `true` if reserved, otherwise `false`\r\n */\r\nEnum.prototype.isReservedName = function isReservedName(name) {\r\n    return Namespace.isReservedName(this.reserved, name);\r\n};\r\n","\"use strict\";\r\nmodule.exports = Field;\r\n\r\n// extends ReflectionObject\r\nvar ReflectionObject = require(\"./object\");\r\n((Field.prototype = Object.create(ReflectionObject.prototype)).constructor = Field).className = \"Field\";\r\n\r\nvar Enum  = require(\"./enum\"),\r\n    types = require(\"./types\"),\r\n    util  = require(\"./util\");\r\n\r\nvar Type; // cyclic\r\n\r\nvar ruleRe = /^required|optional|repeated$/;\r\n\r\n/**\r\n * Constructs a new message field instance. Note that {@link MapField|map fields} have their own class.\r\n * @name Field\r\n * @classdesc Reflected message field.\r\n * @extends FieldBase\r\n * @constructor\r\n * @param {string} name Unique name within its namespace\r\n * @param {number} id Unique id within its namespace\r\n * @param {string} type Value type\r\n * @param {string|Object.<string,*>} [rule=\"optional\"] Field rule\r\n * @param {string|Object.<string,*>} [extend] Extended type if different from parent\r\n * @param {Object.<string,*>} [options] Declared options\r\n */\r\n\r\n/**\r\n * Constructs a field from a field descriptor.\r\n * @param {string} name Field name\r\n * @param {IField} json Field descriptor\r\n * @returns {Field} Created field\r\n * @throws {TypeError} If arguments are invalid\r\n */\r\nField.fromJSON = function fromJSON(name, json) {\r\n    return new Field(name, json.id, json.type, json.rule, json.extend, json.options, json.comment);\r\n};\r\n\r\n/**\r\n * Not an actual constructor. Use {@link Field} instead.\r\n * @classdesc Base class of all reflected message fields. This is not an actual class but here for the sake of having consistent type definitions.\r\n * @exports FieldBase\r\n * @extends ReflectionObject\r\n * @constructor\r\n * @param {string} name Unique name within its namespace\r\n * @param {number} id Unique id within its namespace\r\n * @param {string} type Value type\r\n * @param {string|Object.<string,*>} [rule=\"optional\"] Field rule\r\n * @param {string|Object.<string,*>} [extend] Extended type if different from parent\r\n * @param {Object.<string,*>} [options] Declared options\r\n * @param {string} [comment] Comment associated with this field\r\n */\r\nfunction Field(name, id, type, rule, extend, options, comment) {\r\n\r\n    if (util.isObject(rule)) {\r\n        comment = extend;\r\n        options = rule;\r\n        rule = extend = undefined;\r\n    } else if (util.isObject(extend)) {\r\n        comment = options;\r\n        options = extend;\r\n        extend = undefined;\r\n    }\r\n\r\n    ReflectionObject.call(this, name, options);\r\n\r\n    if (!util.isInteger(id) || id < 0)\r\n        throw TypeError(\"id must be a non-negative integer\");\r\n\r\n    if (!util.isString(type))\r\n        throw TypeError(\"type must be a string\");\r\n\r\n    if (rule !== undefined && !ruleRe.test(rule = rule.toString().toLowerCase()))\r\n        throw TypeError(\"rule must be a string rule\");\r\n\r\n    if (extend !== undefined && !util.isString(extend))\r\n        throw TypeError(\"extend must be a string\");\r\n\r\n    /**\r\n     * Field rule, if any.\r\n     * @type {string|undefined}\r\n     */\r\n    if (rule === \"proto3_optional\") {\r\n        rule = \"optional\";\r\n    }\r\n    this.rule = rule && rule !== \"optional\" ? rule : undefined; // toJSON\r\n\r\n    /**\r\n     * Field type.\r\n     * @type {string}\r\n     */\r\n    this.type = type; // toJSON\r\n\r\n    /**\r\n     * Unique field id.\r\n     * @type {number}\r\n     */\r\n    this.id = id; // toJSON, marker\r\n\r\n    /**\r\n     * Extended type if different from parent.\r\n     * @type {string|undefined}\r\n     */\r\n    this.extend = extend || undefined; // toJSON\r\n\r\n    /**\r\n     * Whether this field is required.\r\n     * @type {boolean}\r\n     */\r\n    this.required = rule === \"required\";\r\n\r\n    /**\r\n     * Whether this field is optional.\r\n     * @type {boolean}\r\n     */\r\n    this.optional = !this.required;\r\n\r\n    /**\r\n     * Whether this field is repeated.\r\n     * @type {boolean}\r\n     */\r\n    this.repeated = rule === \"repeated\";\r\n\r\n    /**\r\n     * Whether this field is a map or not.\r\n     * @type {boolean}\r\n     */\r\n    this.map = false;\r\n\r\n    /**\r\n     * Message this field belongs to.\r\n     * @type {Type|null}\r\n     */\r\n    this.message = null;\r\n\r\n    /**\r\n     * OneOf this field belongs to, if any,\r\n     * @type {OneOf|null}\r\n     */\r\n    this.partOf = null;\r\n\r\n    /**\r\n     * The field type's default value.\r\n     * @type {*}\r\n     */\r\n    this.typeDefault = null;\r\n\r\n    /**\r\n     * The field's default value on prototypes.\r\n     * @type {*}\r\n     */\r\n    this.defaultValue = null;\r\n\r\n    /**\r\n     * Whether this field's value should be treated as a long.\r\n     * @type {boolean}\r\n     */\r\n    this.long = util.Long ? types.long[type] !== undefined : /* istanbul ignore next */ false;\r\n\r\n    /**\r\n     * Whether this field's value is a buffer.\r\n     * @type {boolean}\r\n     */\r\n    this.bytes = type === \"bytes\";\r\n\r\n    /**\r\n     * Resolved type if not a basic type.\r\n     * @type {Type|Enum|null}\r\n     */\r\n    this.resolvedType = null;\r\n\r\n    /**\r\n     * Sister-field within the extended type if a declaring extension field.\r\n     * @type {Field|null}\r\n     */\r\n    this.extensionField = null;\r\n\r\n    /**\r\n     * Sister-field within the declaring namespace if an extended field.\r\n     * @type {Field|null}\r\n     */\r\n    this.declaringField = null;\r\n\r\n    /**\r\n     * Internally remembers whether this field is packed.\r\n     * @type {boolean|null}\r\n     * @private\r\n     */\r\n    this._packed = null;\r\n\r\n    /**\r\n     * Comment for this field.\r\n     * @type {string|null}\r\n     */\r\n    this.comment = comment;\r\n}\r\n\r\n/**\r\n * Determines whether this field is packed. Only relevant when repeated and working with proto2.\r\n * @name Field#packed\r\n * @type {boolean}\r\n * @readonly\r\n */\r\nObject.defineProperty(Field.prototype, \"packed\", {\r\n    get: function() {\r\n        // defaults to packed=true if not explicity set to false\r\n        if (this._packed === null)\r\n            this._packed = this.getOption(\"packed\") !== false;\r\n        return this._packed;\r\n    }\r\n});\r\n\r\n/**\r\n * @override\r\n */\r\nField.prototype.setOption = function setOption(name, value, ifNotSet) {\r\n    if (name === \"packed\") // clear cached before setting\r\n        this._packed = null;\r\n    return ReflectionObject.prototype.setOption.call(this, name, value, ifNotSet);\r\n};\r\n\r\n/**\r\n * Field descriptor.\r\n * @interface IField\r\n * @property {string} [rule=\"optional\"] Field rule\r\n * @property {string} type Field type\r\n * @property {number} id Field id\r\n * @property {Object.<string,*>} [options] Field options\r\n */\r\n\r\n/**\r\n * Extension field descriptor.\r\n * @interface IExtensionField\r\n * @extends IField\r\n * @property {string} extend Extended type\r\n */\r\n\r\n/**\r\n * Converts this field to a field descriptor.\r\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\r\n * @returns {IField} Field descriptor\r\n */\r\nField.prototype.toJSON = function toJSON(toJSONOptions) {\r\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\r\n    return util.toObject([\r\n        \"rule\"    , this.rule !== \"optional\" && this.rule || undefined,\r\n        \"type\"    , this.type,\r\n        \"id\"      , this.id,\r\n        \"extend\"  , this.extend,\r\n        \"options\" , this.options,\r\n        \"comment\" , keepComments ? this.comment : undefined\r\n    ]);\r\n};\r\n\r\n/**\r\n * Resolves this field's type references.\r\n * @returns {Field} `this`\r\n * @throws {Error} If any reference cannot be resolved\r\n */\r\nField.prototype.resolve = function resolve() {\r\n\r\n    if (this.resolved)\r\n        return this;\r\n\r\n    if ((this.typeDefault = types.defaults[this.type]) === undefined) { // if not a basic type, resolve it\r\n        this.resolvedType = (this.declaringField ? this.declaringField.parent : this.parent).lookupTypeOrEnum(this.type);\r\n        if (this.resolvedType instanceof Type)\r\n            this.typeDefault = null;\r\n        else // instanceof Enum\r\n            this.typeDefault = this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]; // first defined\r\n    } else if (this.options && this.options.proto3_optional) {\r\n        // proto3 scalar value marked optional; should default to null\r\n        this.typeDefault = null;\r\n    }\r\n\r\n    // use explicitly set default value if present\r\n    if (this.options && this.options[\"default\"] != null) {\r\n        this.typeDefault = this.options[\"default\"];\r\n        if (this.resolvedType instanceof Enum && typeof this.typeDefault === \"string\")\r\n            this.typeDefault = this.resolvedType.values[this.typeDefault];\r\n    }\r\n\r\n    // remove unnecessary options\r\n    if (this.options) {\r\n        if (this.options.packed === true || this.options.packed !== undefined && this.resolvedType && !(this.resolvedType instanceof Enum))\r\n            delete this.options.packed;\r\n        if (!Object.keys(this.options).length)\r\n            this.options = undefined;\r\n    }\r\n\r\n    // convert to internal data type if necesssary\r\n    if (this.long) {\r\n        this.typeDefault = util.Long.fromNumber(this.typeDefault, this.type.charAt(0) === \"u\");\r\n\r\n        /* istanbul ignore else */\r\n        if (Object.freeze)\r\n            Object.freeze(this.typeDefault); // long instances are meant to be immutable anyway (i.e. use small int cache that even requires it)\r\n\r\n    } else if (this.bytes && typeof this.typeDefault === \"string\") {\r\n        var buf;\r\n        if (util.base64.test(this.typeDefault))\r\n            util.base64.decode(this.typeDefault, buf = util.newBuffer(util.base64.length(this.typeDefault)), 0);\r\n        else\r\n            util.utf8.write(this.typeDefault, buf = util.newBuffer(util.utf8.length(this.typeDefault)), 0);\r\n        this.typeDefault = buf;\r\n    }\r\n\r\n    // take special care of maps and repeated fields\r\n    if (this.map)\r\n        this.defaultValue = util.emptyObject;\r\n    else if (this.repeated)\r\n        this.defaultValue = util.emptyArray;\r\n    else\r\n        this.defaultValue = this.typeDefault;\r\n\r\n    // ensure proper value on prototype\r\n    if (this.parent instanceof Type)\r\n        this.parent.ctor.prototype[this.name] = this.defaultValue;\r\n\r\n    return ReflectionObject.prototype.resolve.call(this);\r\n};\r\n\r\n/**\r\n * Decorator function as returned by {@link Field.d} and {@link MapField.d} (TypeScript).\r\n * @typedef FieldDecorator\r\n * @type {function}\r\n * @param {Object} prototype Target prototype\r\n * @param {string} fieldName Field name\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Field decorator (TypeScript).\r\n * @name Field.d\r\n * @function\r\n * @param {number} fieldId Field id\r\n * @param {\"double\"|\"float\"|\"int32\"|\"uint32\"|\"sint32\"|\"fixed32\"|\"sfixed32\"|\"int64\"|\"uint64\"|\"sint64\"|\"fixed64\"|\"sfixed64\"|\"string\"|\"bool\"|\"bytes\"|Object} fieldType Field type\r\n * @param {\"optional\"|\"required\"|\"repeated\"} [fieldRule=\"optional\"] Field rule\r\n * @param {T} [defaultValue] Default value\r\n * @returns {FieldDecorator} Decorator function\r\n * @template T extends number | number[] | Long | Long[] | string | string[] | boolean | boolean[] | Uint8Array | Uint8Array[] | Buffer | Buffer[]\r\n */\r\nField.d = function decorateField(fieldId, fieldType, fieldRule, defaultValue) {\r\n\r\n    // submessage: decorate the submessage and use its name as the type\r\n    if (typeof fieldType === \"function\")\r\n        fieldType = util.decorateType(fieldType).name;\r\n\r\n    // enum reference: create a reflected copy of the enum and keep reuseing it\r\n    else if (fieldType && typeof fieldType === \"object\")\r\n        fieldType = util.decorateEnum(fieldType).name;\r\n\r\n    return function fieldDecorator(prototype, fieldName) {\r\n        util.decorateType(prototype.constructor)\r\n            .add(new Field(fieldName, fieldId, fieldType, fieldRule, { \"default\": defaultValue }));\r\n    };\r\n};\r\n\r\n/**\r\n * Field decorator (TypeScript).\r\n * @name Field.d\r\n * @function\r\n * @param {number} fieldId Field id\r\n * @param {Constructor<T>|string} fieldType Field type\r\n * @param {\"optional\"|\"required\"|\"repeated\"} [fieldRule=\"optional\"] Field rule\r\n * @returns {FieldDecorator} Decorator function\r\n * @template T extends Message<T>\r\n * @variation 2\r\n */\r\n// like Field.d but without a default value\r\n\r\n// Sets up cyclic dependencies (called in index-light)\r\nField._configure = function configure(Type_) {\r\n    Type = Type_;\r\n};\r\n","\"use strict\";\r\nvar protobuf = module.exports = require(\"./index-minimal\");\r\n\r\nprotobuf.build = \"light\";\r\n\r\n/**\r\n * A node-style callback as used by {@link load} and {@link Root#load}.\r\n * @typedef LoadCallback\r\n * @type {function}\r\n * @param {Error|null} error Error, if any, otherwise `null`\r\n * @param {Root} [root] Root, if there hasn't been an error\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Loads one or multiple .proto or preprocessed .json files into a common root namespace and calls the callback.\r\n * @param {string|string[]} filename One or multiple files to load\r\n * @param {Root} root Root namespace, defaults to create a new one if omitted.\r\n * @param {LoadCallback} callback Callback function\r\n * @returns {undefined}\r\n * @see {@link Root#load}\r\n */\r\nfunction load(filename, root, callback) {\r\n    if (typeof root === \"function\") {\r\n        callback = root;\r\n        root = new protobuf.Root();\r\n    } else if (!root)\r\n        root = new protobuf.Root();\r\n    return root.load(filename, callback);\r\n}\r\n\r\n/**\r\n * Loads one or multiple .proto or preprocessed .json files into a common root namespace and calls the callback.\r\n * @name load\r\n * @function\r\n * @param {string|string[]} filename One or multiple files to load\r\n * @param {LoadCallback} callback Callback function\r\n * @returns {undefined}\r\n * @see {@link Root#load}\r\n * @variation 2\r\n */\r\n// function load(filename:string, callback:LoadCallback):undefined\r\n\r\n/**\r\n * Loads one or multiple .proto or preprocessed .json files into a common root namespace and returns a promise.\r\n * @name load\r\n * @function\r\n * @param {string|string[]} filename One or multiple files to load\r\n * @param {Root} [root] Root namespace, defaults to create a new one if omitted.\r\n * @returns {Promise<Root>} Promise\r\n * @see {@link Root#load}\r\n * @variation 3\r\n */\r\n// function load(filename:string, [root:Root]):Promise<Root>\r\n\r\nprotobuf.load = load;\r\n\r\n/**\r\n * Synchronously loads one or multiple .proto or preprocessed .json files into a common root namespace (node only).\r\n * @param {string|string[]} filename One or multiple files to load\r\n * @param {Root} [root] Root namespace, defaults to create a new one if omitted.\r\n * @returns {Root} Root namespace\r\n * @throws {Error} If synchronous fetching is not supported (i.e. in browsers) or if a file's syntax is invalid\r\n * @see {@link Root#loadSync}\r\n */\r\nfunction loadSync(filename, root) {\r\n    if (!root)\r\n        root = new protobuf.Root();\r\n    return root.loadSync(filename);\r\n}\r\n\r\nprotobuf.loadSync = loadSync;\r\n\r\n// Serialization\r\nprotobuf.encoder          = require(\"./encoder\");\r\nprotobuf.decoder          = require(\"./decoder\");\r\nprotobuf.verifier         = require(\"./verifier\");\r\nprotobuf.converter        = require(\"./converter\");\r\n\r\n// Reflection\r\nprotobuf.ReflectionObject = require(\"./object\");\r\nprotobuf.Namespace        = require(\"./namespace\");\r\nprotobuf.Root             = require(\"./root\");\r\nprotobuf.Enum             = require(\"./enum\");\r\nprotobuf.Type             = require(\"./type\");\r\nprotobuf.Field            = require(\"./field\");\r\nprotobuf.OneOf            = require(\"./oneof\");\r\nprotobuf.MapField         = require(\"./mapfield\");\r\nprotobuf.Service          = require(\"./service\");\r\nprotobuf.Method           = require(\"./method\");\r\n\r\n// Runtime\r\nprotobuf.Message          = require(\"./message\");\r\nprotobuf.wrappers         = require(\"./wrappers\");\r\n\r\n// Utility\r\nprotobuf.types            = require(\"./types\");\r\nprotobuf.util             = require(\"./util\");\r\n\r\n// Set up possibly cyclic reflection dependencies\r\nprotobuf.ReflectionObject._configure(protobuf.Root);\r\nprotobuf.Namespace._configure(protobuf.Type, protobuf.Service, protobuf.Enum);\r\nprotobuf.Root._configure(protobuf.Type);\r\nprotobuf.Field._configure(protobuf.Type);\r\n","\"use strict\";\r\nvar protobuf = exports;\r\n\r\n/**\r\n * Build type, one of `\"full\"`, `\"light\"` or `\"minimal\"`.\r\n * @name build\r\n * @type {string}\r\n * @const\r\n */\r\nprotobuf.build = \"minimal\";\r\n\r\n// Serialization\r\nprotobuf.Writer       = require(\"./writer\");\r\nprotobuf.BufferWriter = require(\"./writer_buffer\");\r\nprotobuf.Reader       = require(\"./reader\");\r\nprotobuf.BufferReader = require(\"./reader_buffer\");\r\n\r\n// Utility\r\nprotobuf.util         = require(\"./util/minimal\");\r\nprotobuf.rpc          = require(\"./rpc\");\r\nprotobuf.roots        = require(\"./roots\");\r\nprotobuf.configure    = configure;\r\n\r\n/* istanbul ignore next */\r\n/**\r\n * Reconfigures the library according to the environment.\r\n * @returns {undefined}\r\n */\r\nfunction configure() {\r\n    protobuf.util._configure();\r\n    protobuf.Writer._configure(protobuf.BufferWriter);\r\n    protobuf.Reader._configure(protobuf.BufferReader);\r\n}\r\n\r\n// Set up buffer utility according to the environment\r\nconfigure();\r\n","\"use strict\";\r\nmodule.exports = MapField;\r\n\r\n// extends Field\r\nvar Field = require(\"./field\");\r\n((MapField.prototype = Object.create(Field.prototype)).constructor = MapField).className = \"MapField\";\r\n\r\nvar types   = require(\"./types\"),\r\n    util    = require(\"./util\");\r\n\r\n/**\r\n * Constructs a new map field instance.\r\n * @classdesc Reflected map field.\r\n * @extends FieldBase\r\n * @constructor\r\n * @param {string} name Unique name within its namespace\r\n * @param {number} id Unique id within its namespace\r\n * @param {string} keyType Key type\r\n * @param {string} type Value type\r\n * @param {Object.<string,*>} [options] Declared options\r\n * @param {string} [comment] Comment associated with this field\r\n */\r\nfunction MapField(name, id, keyType, type, options, comment) {\r\n    Field.call(this, name, id, type, undefined, undefined, options, comment);\r\n\r\n    /* istanbul ignore if */\r\n    if (!util.isString(keyType))\r\n        throw TypeError(\"keyType must be a string\");\r\n\r\n    /**\r\n     * Key type.\r\n     * @type {string}\r\n     */\r\n    this.keyType = keyType; // toJSON, marker\r\n\r\n    /**\r\n     * Resolved key type if not a basic type.\r\n     * @type {ReflectionObject|null}\r\n     */\r\n    this.resolvedKeyType = null;\r\n\r\n    // Overrides Field#map\r\n    this.map = true;\r\n}\r\n\r\n/**\r\n * Map field descriptor.\r\n * @interface IMapField\r\n * @extends {IField}\r\n * @property {string} keyType Key type\r\n */\r\n\r\n/**\r\n * Extension map field descriptor.\r\n * @interface IExtensionMapField\r\n * @extends IMapField\r\n * @property {string} extend Extended type\r\n */\r\n\r\n/**\r\n * Constructs a map field from a map field descriptor.\r\n * @param {string} name Field name\r\n * @param {IMapField} json Map field descriptor\r\n * @returns {MapField} Created map field\r\n * @throws {TypeError} If arguments are invalid\r\n */\r\nMapField.fromJSON = function fromJSON(name, json) {\r\n    return new MapField(name, json.id, json.keyType, json.type, json.options, json.comment);\r\n};\r\n\r\n/**\r\n * Converts this map field to a map field descriptor.\r\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\r\n * @returns {IMapField} Map field descriptor\r\n */\r\nMapField.prototype.toJSON = function toJSON(toJSONOptions) {\r\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\r\n    return util.toObject([\r\n        \"keyType\" , this.keyType,\r\n        \"type\"    , this.type,\r\n        \"id\"      , this.id,\r\n        \"extend\"  , this.extend,\r\n        \"options\" , this.options,\r\n        \"comment\" , keepComments ? this.comment : undefined\r\n    ]);\r\n};\r\n\r\n/**\r\n * @override\r\n */\r\nMapField.prototype.resolve = function resolve() {\r\n    if (this.resolved)\r\n        return this;\r\n\r\n    // Besides a value type, map fields have a key type that may be \"any scalar type except for floating point types and bytes\"\r\n    if (types.mapKey[this.keyType] === undefined)\r\n        throw Error(\"invalid key type: \" + this.keyType);\r\n\r\n    return Field.prototype.resolve.call(this);\r\n};\r\n\r\n/**\r\n * Map field decorator (TypeScript).\r\n * @name MapField.d\r\n * @function\r\n * @param {number} fieldId Field id\r\n * @param {\"int32\"|\"uint32\"|\"sint32\"|\"fixed32\"|\"sfixed32\"|\"int64\"|\"uint64\"|\"sint64\"|\"fixed64\"|\"sfixed64\"|\"bool\"|\"string\"} fieldKeyType Field key type\r\n * @param {\"double\"|\"float\"|\"int32\"|\"uint32\"|\"sint32\"|\"fixed32\"|\"sfixed32\"|\"int64\"|\"uint64\"|\"sint64\"|\"fixed64\"|\"sfixed64\"|\"bool\"|\"string\"|\"bytes\"|Object|Constructor<{}>} fieldValueType Field value type\r\n * @returns {FieldDecorator} Decorator function\r\n * @template T extends { [key: string]: number | Long | string | boolean | Uint8Array | Buffer | number[] | Message<{}> }\r\n */\r\nMapField.d = function decorateMapField(fieldId, fieldKeyType, fieldValueType) {\r\n\r\n    // submessage value: decorate the submessage and use its name as the type\r\n    if (typeof fieldValueType === \"function\")\r\n        fieldValueType = util.decorateType(fieldValueType).name;\r\n\r\n    // enum reference value: create a reflected copy of the enum and keep reuseing it\r\n    else if (fieldValueType && typeof fieldValueType === \"object\")\r\n        fieldValueType = util.decorateEnum(fieldValueType).name;\r\n\r\n    return function mapFieldDecorator(prototype, fieldName) {\r\n        util.decorateType(prototype.constructor)\r\n            .add(new MapField(fieldName, fieldId, fieldKeyType, fieldValueType));\r\n    };\r\n};\r\n","\"use strict\";\r\nmodule.exports = Message;\r\n\r\nvar util = require(\"./util/minimal\");\r\n\r\n/**\r\n * Constructs a new message instance.\r\n * @classdesc Abstract runtime message.\r\n * @constructor\r\n * @param {Properties<T>} [properties] Properties to set\r\n * @template T extends object = object\r\n */\r\nfunction Message(properties) {\r\n    // not used internally\r\n    if (properties)\r\n        for (var keys = Object.keys(properties), i = 0; i < keys.length; ++i)\r\n            this[keys[i]] = properties[keys[i]];\r\n}\r\n\r\n/**\r\n * Reference to the reflected type.\r\n * @name Message.$type\r\n * @type {Type}\r\n * @readonly\r\n */\r\n\r\n/**\r\n * Reference to the reflected type.\r\n * @name Message#$type\r\n * @type {Type}\r\n * @readonly\r\n */\r\n\r\n/*eslint-disable valid-jsdoc*/\r\n\r\n/**\r\n * Creates a new message of this type using the specified properties.\r\n * @param {Object.<string,*>} [properties] Properties to set\r\n * @returns {Message<T>} Message instance\r\n * @template T extends Message<T>\r\n * @this Constructor<T>\r\n */\r\nMessage.create = function create(properties) {\r\n    return this.$type.create(properties);\r\n};\r\n\r\n/**\r\n * Encodes a message of this type.\r\n * @param {T|Object.<string,*>} message Message to encode\r\n * @param {Writer} [writer] Writer to use\r\n * @returns {Writer} Writer\r\n * @template T extends Message<T>\r\n * @this Constructor<T>\r\n */\r\nMessage.encode = function encode(message, writer) {\r\n    return this.$type.encode(message, writer);\r\n};\r\n\r\n/**\r\n * Encodes a message of this type preceeded by its length as a varint.\r\n * @param {T|Object.<string,*>} message Message to encode\r\n * @param {Writer} [writer] Writer to use\r\n * @returns {Writer} Writer\r\n * @template T extends Message<T>\r\n * @this Constructor<T>\r\n */\r\nMessage.encodeDelimited = function encodeDelimited(message, writer) {\r\n    return this.$type.encodeDelimited(message, writer);\r\n};\r\n\r\n/**\r\n * Decodes a message of this type.\r\n * @name Message.decode\r\n * @function\r\n * @param {Reader|Uint8Array} reader Reader or buffer to decode\r\n * @returns {T} Decoded message\r\n * @template T extends Message<T>\r\n * @this Constructor<T>\r\n */\r\nMessage.decode = function decode(reader) {\r\n    return this.$type.decode(reader);\r\n};\r\n\r\n/**\r\n * Decodes a message of this type preceeded by its length as a varint.\r\n * @name Message.decodeDelimited\r\n * @function\r\n * @param {Reader|Uint8Array} reader Reader or buffer to decode\r\n * @returns {T} Decoded message\r\n * @template T extends Message<T>\r\n * @this Constructor<T>\r\n */\r\nMessage.decodeDelimited = function decodeDelimited(reader) {\r\n    return this.$type.decodeDelimited(reader);\r\n};\r\n\r\n/**\r\n * Verifies a message of this type.\r\n * @name Message.verify\r\n * @function\r\n * @param {Object.<string,*>} message Plain object to verify\r\n * @returns {string|null} `null` if valid, otherwise the reason why it is not\r\n */\r\nMessage.verify = function verify(message) {\r\n    return this.$type.verify(message);\r\n};\r\n\r\n/**\r\n * Creates a new message of this type from a plain object. Also converts values to their respective internal types.\r\n * @param {Object.<string,*>} object Plain object\r\n * @returns {T} Message instance\r\n * @template T extends Message<T>\r\n * @this Constructor<T>\r\n */\r\nMessage.fromObject = function fromObject(object) {\r\n    return this.$type.fromObject(object);\r\n};\r\n\r\n/**\r\n * Creates a plain object from a message of this type. Also converts values to other types if specified.\r\n * @param {T} message Message instance\r\n * @param {IConversionOptions} [options] Conversion options\r\n * @returns {Object.<string,*>} Plain object\r\n * @template T extends Message<T>\r\n * @this Constructor<T>\r\n */\r\nMessage.toObject = function toObject(message, options) {\r\n    return this.$type.toObject(message, options);\r\n};\r\n\r\n/**\r\n * Converts this message to JSON.\r\n * @returns {Object.<string,*>} JSON object\r\n */\r\nMessage.prototype.toJSON = function toJSON() {\r\n    return this.$type.toObject(this, util.toJSONOptions);\r\n};\r\n\r\n/*eslint-enable valid-jsdoc*/","\"use strict\";\r\nmodule.exports = Method;\r\n\r\n// extends ReflectionObject\r\nvar ReflectionObject = require(\"./object\");\r\n((Method.prototype = Object.create(ReflectionObject.prototype)).constructor = Method).className = \"Method\";\r\n\r\nvar util = require(\"./util\");\r\n\r\n/**\r\n * Constructs a new service method instance.\r\n * @classdesc Reflected service method.\r\n * @extends ReflectionObject\r\n * @constructor\r\n * @param {string} name Method name\r\n * @param {string|undefined} type Method type, usually `\"rpc\"`\r\n * @param {string} requestType Request message type\r\n * @param {string} responseType Response message type\r\n * @param {boolean|Object.<string,*>} [requestStream] Whether the request is streamed\r\n * @param {boolean|Object.<string,*>} [responseStream] Whether the response is streamed\r\n * @param {Object.<string,*>} [options] Declared options\r\n * @param {string} [comment] The comment for this method\r\n * @param {Object.<string,*>} [parsedOptions] Declared options, properly parsed into an object\r\n */\r\nfunction Method(name, type, requestType, responseType, requestStream, responseStream, options, comment, parsedOptions) {\r\n\r\n    /* istanbul ignore next */\r\n    if (util.isObject(requestStream)) {\r\n        options = requestStream;\r\n        requestStream = responseStream = undefined;\r\n    } else if (util.isObject(responseStream)) {\r\n        options = responseStream;\r\n        responseStream = undefined;\r\n    }\r\n\r\n    /* istanbul ignore if */\r\n    if (!(type === undefined || util.isString(type)))\r\n        throw TypeError(\"type must be a string\");\r\n\r\n    /* istanbul ignore if */\r\n    if (!util.isString(requestType))\r\n        throw TypeError(\"requestType must be a string\");\r\n\r\n    /* istanbul ignore if */\r\n    if (!util.isString(responseType))\r\n        throw TypeError(\"responseType must be a string\");\r\n\r\n    ReflectionObject.call(this, name, options);\r\n\r\n    /**\r\n     * Method type.\r\n     * @type {string}\r\n     */\r\n    this.type = type || \"rpc\"; // toJSON\r\n\r\n    /**\r\n     * Request type.\r\n     * @type {string}\r\n     */\r\n    this.requestType = requestType; // toJSON, marker\r\n\r\n    /**\r\n     * Whether requests are streamed or not.\r\n     * @type {boolean|undefined}\r\n     */\r\n    this.requestStream = requestStream ? true : undefined; // toJSON\r\n\r\n    /**\r\n     * Response type.\r\n     * @type {string}\r\n     */\r\n    this.responseType = responseType; // toJSON\r\n\r\n    /**\r\n     * Whether responses are streamed or not.\r\n     * @type {boolean|undefined}\r\n     */\r\n    this.responseStream = responseStream ? true : undefined; // toJSON\r\n\r\n    /**\r\n     * Resolved request type.\r\n     * @type {Type|null}\r\n     */\r\n    this.resolvedRequestType = null;\r\n\r\n    /**\r\n     * Resolved response type.\r\n     * @type {Type|null}\r\n     */\r\n    this.resolvedResponseType = null;\r\n\r\n    /**\r\n     * Comment for this method\r\n     * @type {string|null}\r\n     */\r\n    this.comment = comment;\r\n\r\n    /**\r\n     * Options properly parsed into an object\r\n     */\r\n    this.parsedOptions = parsedOptions;\r\n}\r\n\r\n/**\r\n * Method descriptor.\r\n * @interface IMethod\r\n * @property {string} [type=\"rpc\"] Method type\r\n * @property {string} requestType Request type\r\n * @property {string} responseType Response type\r\n * @property {boolean} [requestStream=false] Whether requests are streamed\r\n * @property {boolean} [responseStream=false] Whether responses are streamed\r\n * @property {Object.<string,*>} [options] Method options\r\n * @property {string} comment Method comments\r\n * @property {Object.<string,*>} [parsedOptions] Method options properly parsed into an object\r\n */\r\n\r\n/**\r\n * Constructs a method from a method descriptor.\r\n * @param {string} name Method name\r\n * @param {IMethod} json Method descriptor\r\n * @returns {Method} Created method\r\n * @throws {TypeError} If arguments are invalid\r\n */\r\nMethod.fromJSON = function fromJSON(name, json) {\r\n    return new Method(name, json.type, json.requestType, json.responseType, json.requestStream, json.responseStream, json.options, json.comment, json.parsedOptions);\r\n};\r\n\r\n/**\r\n * Converts this method to a method descriptor.\r\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\r\n * @returns {IMethod} Method descriptor\r\n */\r\nMethod.prototype.toJSON = function toJSON(toJSONOptions) {\r\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\r\n    return util.toObject([\r\n        \"type\"           , this.type !== \"rpc\" && /* istanbul ignore next */ this.type || undefined,\r\n        \"requestType\"    , this.requestType,\r\n        \"requestStream\"  , this.requestStream,\r\n        \"responseType\"   , this.responseType,\r\n        \"responseStream\" , this.responseStream,\r\n        \"options\"        , this.options,\r\n        \"comment\"        , keepComments ? this.comment : undefined,\r\n        \"parsedOptions\"  , this.parsedOptions,\r\n    ]);\r\n};\r\n\r\n/**\r\n * @override\r\n */\r\nMethod.prototype.resolve = function resolve() {\r\n\r\n    /* istanbul ignore if */\r\n    if (this.resolved)\r\n        return this;\r\n\r\n    this.resolvedRequestType = this.parent.lookupType(this.requestType);\r\n    this.resolvedResponseType = this.parent.lookupType(this.responseType);\r\n\r\n    return ReflectionObject.prototype.resolve.call(this);\r\n};\r\n","\"use strict\";\r\nmodule.exports = Namespace;\r\n\r\n// extends ReflectionObject\r\nvar ReflectionObject = require(\"./object\");\r\n((Namespace.prototype = Object.create(ReflectionObject.prototype)).constructor = Namespace).className = \"Namespace\";\r\n\r\nvar Field    = require(\"./field\"),\r\n    util     = require(\"./util\"),\r\n    OneOf    = require(\"./oneof\");\r\n\r\nvar Type,    // cyclic\r\n    Service,\r\n    Enum;\r\n\r\n/**\r\n * Constructs a new namespace instance.\r\n * @name Namespace\r\n * @classdesc Reflected namespace.\r\n * @extends NamespaceBase\r\n * @constructor\r\n * @param {string} name Namespace name\r\n * @param {Object.<string,*>} [options] Declared options\r\n */\r\n\r\n/**\r\n * Constructs a namespace from JSON.\r\n * @memberof Namespace\r\n * @function\r\n * @param {string} name Namespace name\r\n * @param {Object.<string,*>} json JSON object\r\n * @returns {Namespace} Created namespace\r\n * @throws {TypeError} If arguments are invalid\r\n */\r\nNamespace.fromJSON = function fromJSON(name, json) {\r\n    return new Namespace(name, json.options).addJSON(json.nested);\r\n};\r\n\r\n/**\r\n * Converts an array of reflection objects to JSON.\r\n * @memberof Namespace\r\n * @param {ReflectionObject[]} array Object array\r\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\r\n * @returns {Object.<string,*>|undefined} JSON object or `undefined` when array is empty\r\n */\r\nfunction arrayToJSON(array, toJSONOptions) {\r\n    if (!(array && array.length))\r\n        return undefined;\r\n    var obj = {};\r\n    for (var i = 0; i < array.length; ++i)\r\n        obj[array[i].name] = array[i].toJSON(toJSONOptions);\r\n    return obj;\r\n}\r\n\r\nNamespace.arrayToJSON = arrayToJSON;\r\n\r\n/**\r\n * Tests if the specified id is reserved.\r\n * @param {Array.<number[]|string>|undefined} reserved Array of reserved ranges and names\r\n * @param {number} id Id to test\r\n * @returns {boolean} `true` if reserved, otherwise `false`\r\n */\r\nNamespace.isReservedId = function isReservedId(reserved, id) {\r\n    if (reserved)\r\n        for (var i = 0; i < reserved.length; ++i)\r\n            if (typeof reserved[i] !== \"string\" && reserved[i][0] <= id && reserved[i][1] > id)\r\n                return true;\r\n    return false;\r\n};\r\n\r\n/**\r\n * Tests if the specified name is reserved.\r\n * @param {Array.<number[]|string>|undefined} reserved Array of reserved ranges and names\r\n * @param {string} name Name to test\r\n * @returns {boolean} `true` if reserved, otherwise `false`\r\n */\r\nNamespace.isReservedName = function isReservedName(reserved, name) {\r\n    if (reserved)\r\n        for (var i = 0; i < reserved.length; ++i)\r\n            if (reserved[i] === name)\r\n                return true;\r\n    return false;\r\n};\r\n\r\n/**\r\n * Not an actual constructor. Use {@link Namespace} instead.\r\n * @classdesc Base class of all reflection objects containing nested objects. This is not an actual class but here for the sake of having consistent type definitions.\r\n * @exports NamespaceBase\r\n * @extends ReflectionObject\r\n * @abstract\r\n * @constructor\r\n * @param {string} name Namespace name\r\n * @param {Object.<string,*>} [options] Declared options\r\n * @see {@link Namespace}\r\n */\r\nfunction Namespace(name, options) {\r\n    ReflectionObject.call(this, name, options);\r\n\r\n    /**\r\n     * Nested objects by name.\r\n     * @type {Object.<string,ReflectionObject>|undefined}\r\n     */\r\n    this.nested = undefined; // toJSON\r\n\r\n    /**\r\n     * Cached nested objects as an array.\r\n     * @type {ReflectionObject[]|null}\r\n     * @private\r\n     */\r\n    this._nestedArray = null;\r\n}\r\n\r\nfunction clearCache(namespace) {\r\n    namespace._nestedArray = null;\r\n    return namespace;\r\n}\r\n\r\n/**\r\n * Nested objects of this namespace as an array for iteration.\r\n * @name NamespaceBase#nestedArray\r\n * @type {ReflectionObject[]}\r\n * @readonly\r\n */\r\nObject.defineProperty(Namespace.prototype, \"nestedArray\", {\r\n    get: function() {\r\n        return this._nestedArray || (this._nestedArray = util.toArray(this.nested));\r\n    }\r\n});\r\n\r\n/**\r\n * Namespace descriptor.\r\n * @interface INamespace\r\n * @property {Object.<string,*>} [options] Namespace options\r\n * @property {Object.<string,AnyNestedObject>} [nested] Nested object descriptors\r\n */\r\n\r\n/**\r\n * Any extension field descriptor.\r\n * @typedef AnyExtensionField\r\n * @type {IExtensionField|IExtensionMapField}\r\n */\r\n\r\n/**\r\n * Any nested object descriptor.\r\n * @typedef AnyNestedObject\r\n * @type {IEnum|IType|IService|AnyExtensionField|INamespace|IOneOf}\r\n */\r\n\r\n/**\r\n * Converts this namespace to a namespace descriptor.\r\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\r\n * @returns {INamespace} Namespace descriptor\r\n */\r\nNamespace.prototype.toJSON = function toJSON(toJSONOptions) {\r\n    return util.toObject([\r\n        \"options\" , this.options,\r\n        \"nested\"  , arrayToJSON(this.nestedArray, toJSONOptions)\r\n    ]);\r\n};\r\n\r\n/**\r\n * Adds nested objects to this namespace from nested object descriptors.\r\n * @param {Object.<string,AnyNestedObject>} nestedJson Any nested object descriptors\r\n * @returns {Namespace} `this`\r\n */\r\nNamespace.prototype.addJSON = function addJSON(nestedJson) {\r\n    var ns = this;\r\n    /* istanbul ignore else */\r\n    if (nestedJson) {\r\n        for (var names = Object.keys(nestedJson), i = 0, nested; i < names.length; ++i) {\r\n            nested = nestedJson[names[i]];\r\n            ns.add( // most to least likely\r\n                ( nested.fields !== undefined\r\n                ? Type.fromJSON\r\n                : nested.values !== undefined\r\n                ? Enum.fromJSON\r\n                : nested.methods !== undefined\r\n                ? Service.fromJSON\r\n                : nested.id !== undefined\r\n                ? Field.fromJSON\r\n                : Namespace.fromJSON )(names[i], nested)\r\n            );\r\n        }\r\n    }\r\n    return this;\r\n};\r\n\r\n/**\r\n * Gets the nested object of the specified name.\r\n * @param {string} name Nested object name\r\n * @returns {ReflectionObject|null} The reflection object or `null` if it doesn't exist\r\n */\r\nNamespace.prototype.get = function get(name) {\r\n    return this.nested && this.nested[name]\r\n        || null;\r\n};\r\n\r\n/**\r\n * Gets the values of the nested {@link Enum|enum} of the specified name.\r\n * This methods differs from {@link Namespace#get|get} in that it returns an enum's values directly and throws instead of returning `null`.\r\n * @param {string} name Nested enum name\r\n * @returns {Object.<string,number>} Enum values\r\n * @throws {Error} If there is no such enum\r\n */\r\nNamespace.prototype.getEnum = function getEnum(name) {\r\n    if (this.nested && this.nested[name] instanceof Enum)\r\n        return this.nested[name].values;\r\n    throw Error(\"no such enum: \" + name);\r\n};\r\n\r\n/**\r\n * Adds a nested object to this namespace.\r\n * @param {ReflectionObject} object Nested object to add\r\n * @returns {Namespace} `this`\r\n * @throws {TypeError} If arguments are invalid\r\n * @throws {Error} If there is already a nested object with this name\r\n */\r\nNamespace.prototype.add = function add(object) {\r\n\r\n    if (!(object instanceof Field && object.extend !== undefined || object instanceof Type  || object instanceof OneOf || object instanceof Enum || object instanceof Service || object instanceof Namespace))\r\n        throw TypeError(\"object must be a valid nested object\");\r\n\r\n    if (!this.nested)\r\n        this.nested = {};\r\n    else {\r\n        var prev = this.get(object.name);\r\n        if (prev) {\r\n            if (prev instanceof Namespace && object instanceof Namespace && !(prev instanceof Type || prev instanceof Service)) {\r\n                // replace plain namespace but keep existing nested elements and options\r\n                var nested = prev.nestedArray;\r\n                for (var i = 0; i < nested.length; ++i)\r\n                    object.add(nested[i]);\r\n                this.remove(prev);\r\n                if (!this.nested)\r\n                    this.nested = {};\r\n                object.setOptions(prev.options, true);\r\n\r\n            } else\r\n                throw Error(\"duplicate name '\" + object.name + \"' in \" + this);\r\n        }\r\n    }\r\n    this.nested[object.name] = object;\r\n    object.onAdd(this);\r\n    return clearCache(this);\r\n};\r\n\r\n/**\r\n * Removes a nested object from this namespace.\r\n * @param {ReflectionObject} object Nested object to remove\r\n * @returns {Namespace} `this`\r\n * @throws {TypeError} If arguments are invalid\r\n * @throws {Error} If `object` is not a member of this namespace\r\n */\r\nNamespace.prototype.remove = function remove(object) {\r\n\r\n    if (!(object instanceof ReflectionObject))\r\n        throw TypeError(\"object must be a ReflectionObject\");\r\n    if (object.parent !== this)\r\n        throw Error(object + \" is not a member of \" + this);\r\n\r\n    delete this.nested[object.name];\r\n    if (!Object.keys(this.nested).length)\r\n        this.nested = undefined;\r\n\r\n    object.onRemove(this);\r\n    return clearCache(this);\r\n};\r\n\r\n/**\r\n * Defines additial namespaces within this one if not yet existing.\r\n * @param {string|string[]} path Path to create\r\n * @param {*} [json] Nested types to create from JSON\r\n * @returns {Namespace} Pointer to the last namespace created or `this` if path is empty\r\n */\r\nNamespace.prototype.define = function define(path, json) {\r\n\r\n    if (util.isString(path))\r\n        path = path.split(\".\");\r\n    else if (!Array.isArray(path))\r\n        throw TypeError(\"illegal path\");\r\n    if (path && path.length && path[0] === \"\")\r\n        throw Error(\"path must be relative\");\r\n\r\n    var ptr = this;\r\n    while (path.length > 0) {\r\n        var part = path.shift();\r\n        if (ptr.nested && ptr.nested[part]) {\r\n            ptr = ptr.nested[part];\r\n            if (!(ptr instanceof Namespace))\r\n                throw Error(\"path conflicts with non-namespace objects\");\r\n        } else\r\n            ptr.add(ptr = new Namespace(part));\r\n    }\r\n    if (json)\r\n        ptr.addJSON(json);\r\n    return ptr;\r\n};\r\n\r\n/**\r\n * Resolves this namespace's and all its nested objects' type references. Useful to validate a reflection tree, but comes at a cost.\r\n * @returns {Namespace} `this`\r\n */\r\nNamespace.prototype.resolveAll = function resolveAll() {\r\n    var nested = this.nestedArray, i = 0;\r\n    while (i < nested.length)\r\n        if (nested[i] instanceof Namespace)\r\n            nested[i++].resolveAll();\r\n        else\r\n            nested[i++].resolve();\r\n    return this.resolve();\r\n};\r\n\r\n/**\r\n * Recursively looks up the reflection object matching the specified path in the scope of this namespace.\r\n * @param {string|string[]} path Path to look up\r\n * @param {*|Array.<*>} filterTypes Filter types, any combination of the constructors of `protobuf.Type`, `protobuf.Enum`, `protobuf.Service` etc.\r\n * @param {boolean} [parentAlreadyChecked=false] If known, whether the parent has already been checked\r\n * @returns {ReflectionObject|null} Looked up object or `null` if none could be found\r\n */\r\nNamespace.prototype.lookup = function lookup(path, filterTypes, parentAlreadyChecked) {\r\n\r\n    /* istanbul ignore next */\r\n    if (typeof filterTypes === \"boolean\") {\r\n        parentAlreadyChecked = filterTypes;\r\n        filterTypes = undefined;\r\n    } else if (filterTypes && !Array.isArray(filterTypes))\r\n        filterTypes = [ filterTypes ];\r\n\r\n    if (util.isString(path) && path.length) {\r\n        if (path === \".\")\r\n            return this.root;\r\n        path = path.split(\".\");\r\n    } else if (!path.length)\r\n        return this;\r\n\r\n    // Start at root if path is absolute\r\n    if (path[0] === \"\")\r\n        return this.root.lookup(path.slice(1), filterTypes);\r\n\r\n    // Test if the first part matches any nested object, and if so, traverse if path contains more\r\n    var found = this.get(path[0]);\r\n    if (found) {\r\n        if (path.length === 1) {\r\n            if (!filterTypes || filterTypes.indexOf(found.constructor) > -1)\r\n                return found;\r\n        } else if (found instanceof Namespace && (found = found.lookup(path.slice(1), filterTypes, true)))\r\n            return found;\r\n\r\n    // Otherwise try each nested namespace\r\n    } else\r\n        for (var i = 0; i < this.nestedArray.length; ++i)\r\n            if (this._nestedArray[i] instanceof Namespace && (found = this._nestedArray[i].lookup(path, filterTypes, true)))\r\n                return found;\r\n\r\n    // If there hasn't been a match, try again at the parent\r\n    if (this.parent === null || parentAlreadyChecked)\r\n        return null;\r\n    return this.parent.lookup(path, filterTypes);\r\n};\r\n\r\n/**\r\n * Looks up the reflection object at the specified path, relative to this namespace.\r\n * @name NamespaceBase#lookup\r\n * @function\r\n * @param {string|string[]} path Path to look up\r\n * @param {boolean} [parentAlreadyChecked=false] Whether the parent has already been checked\r\n * @returns {ReflectionObject|null} Looked up object or `null` if none could be found\r\n * @variation 2\r\n */\r\n// lookup(path: string, [parentAlreadyChecked: boolean])\r\n\r\n/**\r\n * Looks up the {@link Type|type} at the specified path, relative to this namespace.\r\n * Besides its signature, this methods differs from {@link Namespace#lookup|lookup} in that it throws instead of returning `null`.\r\n * @param {string|string[]} path Path to look up\r\n * @returns {Type} Looked up type\r\n * @throws {Error} If `path` does not point to a type\r\n */\r\nNamespace.prototype.lookupType = function lookupType(path) {\r\n    var found = this.lookup(path, [ Type ]);\r\n    if (!found)\r\n        throw Error(\"no such type: \" + path);\r\n    return found;\r\n};\r\n\r\n/**\r\n * Looks up the values of the {@link Enum|enum} at the specified path, relative to this namespace.\r\n * Besides its signature, this methods differs from {@link Namespace#lookup|lookup} in that it throws instead of returning `null`.\r\n * @param {string|string[]} path Path to look up\r\n * @returns {Enum} Looked up enum\r\n * @throws {Error} If `path` does not point to an enum\r\n */\r\nNamespace.prototype.lookupEnum = function lookupEnum(path) {\r\n    var found = this.lookup(path, [ Enum ]);\r\n    if (!found)\r\n        throw Error(\"no such Enum '\" + path + \"' in \" + this);\r\n    return found;\r\n};\r\n\r\n/**\r\n * Looks up the {@link Type|type} or {@link Enum|enum} at the specified path, relative to this namespace.\r\n * Besides its signature, this methods differs from {@link Namespace#lookup|lookup} in that it throws instead of returning `null`.\r\n * @param {string|string[]} path Path to look up\r\n * @returns {Type} Looked up type or enum\r\n * @throws {Error} If `path` does not point to a type or enum\r\n */\r\nNamespace.prototype.lookupTypeOrEnum = function lookupTypeOrEnum(path) {\r\n    var found = this.lookup(path, [ Type, Enum ]);\r\n    if (!found)\r\n        throw Error(\"no such Type or Enum '\" + path + \"' in \" + this);\r\n    return found;\r\n};\r\n\r\n/**\r\n * Looks up the {@link Service|service} at the specified path, relative to this namespace.\r\n * Besides its signature, this methods differs from {@link Namespace#lookup|lookup} in that it throws instead of returning `null`.\r\n * @param {string|string[]} path Path to look up\r\n * @returns {Service} Looked up service\r\n * @throws {Error} If `path` does not point to a service\r\n */\r\nNamespace.prototype.lookupService = function lookupService(path) {\r\n    var found = this.lookup(path, [ Service ]);\r\n    if (!found)\r\n        throw Error(\"no such Service '\" + path + \"' in \" + this);\r\n    return found;\r\n};\r\n\r\n// Sets up cyclic dependencies (called in index-light)\r\nNamespace._configure = function(Type_, Service_, Enum_) {\r\n    Type    = Type_;\r\n    Service = Service_;\r\n    Enum    = Enum_;\r\n};\r\n","\"use strict\";\r\nmodule.exports = ReflectionObject;\r\n\r\nReflectionObject.className = \"ReflectionObject\";\r\n\r\nvar util = require(\"./util\");\r\n\r\nvar Root; // cyclic\r\n\r\n/**\r\n * Constructs a new reflection object instance.\r\n * @classdesc Base class of all reflection objects.\r\n * @constructor\r\n * @param {string} name Object name\r\n * @param {Object.<string,*>} [options] Declared options\r\n * @abstract\r\n */\r\nfunction ReflectionObject(name, options) {\r\n\r\n    if (!util.isString(name))\r\n        throw TypeError(\"name must be a string\");\r\n\r\n    if (options && !util.isObject(options))\r\n        throw TypeError(\"options must be an object\");\r\n\r\n    /**\r\n     * Options.\r\n     * @type {Object.<string,*>|undefined}\r\n     */\r\n    this.options = options; // toJSON\r\n\r\n    /**\r\n     * Parsed Options.\r\n     * @type {Array.<Object.<string,*>>|undefined}\r\n     */\r\n    this.parsedOptions = null;\r\n\r\n    /**\r\n     * Unique name within its namespace.\r\n     * @type {string}\r\n     */\r\n    this.name = name;\r\n\r\n    /**\r\n     * Parent namespace.\r\n     * @type {Namespace|null}\r\n     */\r\n    this.parent = null;\r\n\r\n    /**\r\n     * Whether already resolved or not.\r\n     * @type {boolean}\r\n     */\r\n    this.resolved = false;\r\n\r\n    /**\r\n     * Comment text, if any.\r\n     * @type {string|null}\r\n     */\r\n    this.comment = null;\r\n\r\n    /**\r\n     * Defining file name.\r\n     * @type {string|null}\r\n     */\r\n    this.filename = null;\r\n}\r\n\r\nObject.defineProperties(ReflectionObject.prototype, {\r\n\r\n    /**\r\n     * Reference to the root namespace.\r\n     * @name ReflectionObject#root\r\n     * @type {Root}\r\n     * @readonly\r\n     */\r\n    root: {\r\n        get: function() {\r\n            var ptr = this;\r\n            while (ptr.parent !== null)\r\n                ptr = ptr.parent;\r\n            return ptr;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Full name including leading dot.\r\n     * @name ReflectionObject#fullName\r\n     * @type {string}\r\n     * @readonly\r\n     */\r\n    fullName: {\r\n        get: function() {\r\n            var path = [ this.name ],\r\n                ptr = this.parent;\r\n            while (ptr) {\r\n                path.unshift(ptr.name);\r\n                ptr = ptr.parent;\r\n            }\r\n            return path.join(\".\");\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * Converts this reflection object to its descriptor representation.\r\n * @returns {Object.<string,*>} Descriptor\r\n * @abstract\r\n */\r\nReflectionObject.prototype.toJSON = /* istanbul ignore next */ function toJSON() {\r\n    throw Error(); // not implemented, shouldn't happen\r\n};\r\n\r\n/**\r\n * Called when this object is added to a parent.\r\n * @param {ReflectionObject} parent Parent added to\r\n * @returns {undefined}\r\n */\r\nReflectionObject.prototype.onAdd = function onAdd(parent) {\r\n    if (this.parent && this.parent !== parent)\r\n        this.parent.remove(this);\r\n    this.parent = parent;\r\n    this.resolved = false;\r\n    var root = parent.root;\r\n    if (root instanceof Root)\r\n        root._handleAdd(this);\r\n};\r\n\r\n/**\r\n * Called when this object is removed from a parent.\r\n * @param {ReflectionObject} parent Parent removed from\r\n * @returns {undefined}\r\n */\r\nReflectionObject.prototype.onRemove = function onRemove(parent) {\r\n    var root = parent.root;\r\n    if (root instanceof Root)\r\n        root._handleRemove(this);\r\n    this.parent = null;\r\n    this.resolved = false;\r\n};\r\n\r\n/**\r\n * Resolves this objects type references.\r\n * @returns {ReflectionObject} `this`\r\n */\r\nReflectionObject.prototype.resolve = function resolve() {\r\n    if (this.resolved)\r\n        return this;\r\n    if (this.root instanceof Root)\r\n        this.resolved = true; // only if part of a root\r\n    return this;\r\n};\r\n\r\n/**\r\n * Gets an option value.\r\n * @param {string} name Option name\r\n * @returns {*} Option value or `undefined` if not set\r\n */\r\nReflectionObject.prototype.getOption = function getOption(name) {\r\n    if (this.options)\r\n        return this.options[name];\r\n    return undefined;\r\n};\r\n\r\n/**\r\n * Sets an option.\r\n * @param {string} name Option name\r\n * @param {*} value Option value\r\n * @param {boolean} [ifNotSet] Sets the option only if it isn't currently set\r\n * @returns {ReflectionObject} `this`\r\n */\r\nReflectionObject.prototype.setOption = function setOption(name, value, ifNotSet) {\r\n    if (!ifNotSet || !this.options || this.options[name] === undefined)\r\n        (this.options || (this.options = {}))[name] = value;\r\n    return this;\r\n};\r\n\r\n/**\r\n * Sets a parsed option.\r\n * @param {string} name parsed Option name\r\n * @param {*} value Option value\r\n * @param {string} propName dot '.' delimited full path of property within the option to set. if undefined\\empty, will add a new option with that value\r\n * @returns {ReflectionObject} `this`\r\n */\r\nReflectionObject.prototype.setParsedOption = function setParsedOption(name, value, propName) {\r\n    if (!this.parsedOptions) {\r\n        this.parsedOptions = [];\r\n    }\r\n    var parsedOptions = this.parsedOptions;\r\n    if (propName) {\r\n        // If setting a sub property of an option then try to merge it\r\n        // with an existing option\r\n        var opt = parsedOptions.find(function (opt) {\r\n            return Object.prototype.hasOwnProperty.call(opt, name);\r\n        });\r\n        if (opt) {\r\n            // If we found an existing option - just merge the property value\r\n            var newValue = opt[name];\r\n            util.setProperty(newValue, propName, value);\r\n        } else {\r\n            // otherwise, create a new option, set it's property and add it to the list\r\n            opt = {};\r\n            opt[name] = util.setProperty({}, propName, value);\r\n            parsedOptions.push(opt);\r\n        }\r\n    } else {\r\n        // Always create a new option when setting the value of the option itself\r\n        var newOpt = {};\r\n        newOpt[name] = value;\r\n        parsedOptions.push(newOpt);\r\n    }\r\n    return this;\r\n};\r\n\r\n/**\r\n * Sets multiple options.\r\n * @param {Object.<string,*>} options Options to set\r\n * @param {boolean} [ifNotSet] Sets an option only if it isn't currently set\r\n * @returns {ReflectionObject} `this`\r\n */\r\nReflectionObject.prototype.setOptions = function setOptions(options, ifNotSet) {\r\n    if (options)\r\n        for (var keys = Object.keys(options), i = 0; i < keys.length; ++i)\r\n            this.setOption(keys[i], options[keys[i]], ifNotSet);\r\n    return this;\r\n};\r\n\r\n/**\r\n * Converts this instance to its string representation.\r\n * @returns {string} Class name[, space, full name]\r\n */\r\nReflectionObject.prototype.toString = function toString() {\r\n    var className = this.constructor.className,\r\n        fullName  = this.fullName;\r\n    if (fullName.length)\r\n        return className + \" \" + fullName;\r\n    return className;\r\n};\r\n\r\n// Sets up cyclic dependencies (called in index-light)\r\nReflectionObject._configure = function(Root_) {\r\n    Root = Root_;\r\n};\r\n","\"use strict\";\r\nmodule.exports = OneOf;\r\n\r\n// extends ReflectionObject\r\nvar ReflectionObject = require(\"./object\");\r\n((OneOf.prototype = Object.create(ReflectionObject.prototype)).constructor = OneOf).className = \"OneOf\";\r\n\r\nvar Field = require(\"./field\"),\r\n    util  = require(\"./util\");\r\n\r\n/**\r\n * Constructs a new oneof instance.\r\n * @classdesc Reflected oneof.\r\n * @extends ReflectionObject\r\n * @constructor\r\n * @param {string} name Oneof name\r\n * @param {string[]|Object.<string,*>} [fieldNames] Field names\r\n * @param {Object.<string,*>} [options] Declared options\r\n * @param {string} [comment] Comment associated with this field\r\n */\r\nfunction OneOf(name, fieldNames, options, comment) {\r\n    if (!Array.isArray(fieldNames)) {\r\n        options = fieldNames;\r\n        fieldNames = undefined;\r\n    }\r\n    ReflectionObject.call(this, name, options);\r\n\r\n    /* istanbul ignore if */\r\n    if (!(fieldNames === undefined || Array.isArray(fieldNames)))\r\n        throw TypeError(\"fieldNames must be an Array\");\r\n\r\n    /**\r\n     * Field names that belong to this oneof.\r\n     * @type {string[]}\r\n     */\r\n    this.oneof = fieldNames || []; // toJSON, marker\r\n\r\n    /**\r\n     * Fields that belong to this oneof as an array for iteration.\r\n     * @type {Field[]}\r\n     * @readonly\r\n     */\r\n    this.fieldsArray = []; // declared readonly for conformance, possibly not yet added to parent\r\n\r\n    /**\r\n     * Comment for this field.\r\n     * @type {string|null}\r\n     */\r\n    this.comment = comment;\r\n}\r\n\r\n/**\r\n * Oneof descriptor.\r\n * @interface IOneOf\r\n * @property {Array.<string>} oneof Oneof field names\r\n * @property {Object.<string,*>} [options] Oneof options\r\n */\r\n\r\n/**\r\n * Constructs a oneof from a oneof descriptor.\r\n * @param {string} name Oneof name\r\n * @param {IOneOf} json Oneof descriptor\r\n * @returns {OneOf} Created oneof\r\n * @throws {TypeError} If arguments are invalid\r\n */\r\nOneOf.fromJSON = function fromJSON(name, json) {\r\n    return new OneOf(name, json.oneof, json.options, json.comment);\r\n};\r\n\r\n/**\r\n * Converts this oneof to a oneof descriptor.\r\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\r\n * @returns {IOneOf} Oneof descriptor\r\n */\r\nOneOf.prototype.toJSON = function toJSON(toJSONOptions) {\r\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\r\n    return util.toObject([\r\n        \"options\" , this.options,\r\n        \"oneof\"   , this.oneof,\r\n        \"comment\" , keepComments ? this.comment : undefined\r\n    ]);\r\n};\r\n\r\n/**\r\n * Adds the fields of the specified oneof to the parent if not already done so.\r\n * @param {OneOf} oneof The oneof\r\n * @returns {undefined}\r\n * @inner\r\n * @ignore\r\n */\r\nfunction addFieldsToParent(oneof) {\r\n    if (oneof.parent)\r\n        for (var i = 0; i < oneof.fieldsArray.length; ++i)\r\n            if (!oneof.fieldsArray[i].parent)\r\n                oneof.parent.add(oneof.fieldsArray[i]);\r\n}\r\n\r\n/**\r\n * Adds a field to this oneof and removes it from its current parent, if any.\r\n * @param {Field} field Field to add\r\n * @returns {OneOf} `this`\r\n */\r\nOneOf.prototype.add = function add(field) {\r\n\r\n    /* istanbul ignore if */\r\n    if (!(field instanceof Field))\r\n        throw TypeError(\"field must be a Field\");\r\n\r\n    if (field.parent && field.parent !== this.parent)\r\n        field.parent.remove(field);\r\n    this.oneof.push(field.name);\r\n    this.fieldsArray.push(field);\r\n    field.partOf = this; // field.parent remains null\r\n    addFieldsToParent(this);\r\n    return this;\r\n};\r\n\r\n/**\r\n * Removes a field from this oneof and puts it back to the oneof's parent.\r\n * @param {Field} field Field to remove\r\n * @returns {OneOf} `this`\r\n */\r\nOneOf.prototype.remove = function remove(field) {\r\n\r\n    /* istanbul ignore if */\r\n    if (!(field instanceof Field))\r\n        throw TypeError(\"field must be a Field\");\r\n\r\n    var index = this.fieldsArray.indexOf(field);\r\n\r\n    /* istanbul ignore if */\r\n    if (index < 0)\r\n        throw Error(field + \" is not a member of \" + this);\r\n\r\n    this.fieldsArray.splice(index, 1);\r\n    index = this.oneof.indexOf(field.name);\r\n\r\n    /* istanbul ignore else */\r\n    if (index > -1) // theoretical\r\n        this.oneof.splice(index, 1);\r\n\r\n    field.partOf = null;\r\n    return this;\r\n};\r\n\r\n/**\r\n * @override\r\n */\r\nOneOf.prototype.onAdd = function onAdd(parent) {\r\n    ReflectionObject.prototype.onAdd.call(this, parent);\r\n    var self = this;\r\n    // Collect present fields\r\n    for (var i = 0; i < this.oneof.length; ++i) {\r\n        var field = parent.get(this.oneof[i]);\r\n        if (field && !field.partOf) {\r\n            field.partOf = self;\r\n            self.fieldsArray.push(field);\r\n        }\r\n    }\r\n    // Add not yet present fields\r\n    addFieldsToParent(this);\r\n};\r\n\r\n/**\r\n * @override\r\n */\r\nOneOf.prototype.onRemove = function onRemove(parent) {\r\n    for (var i = 0, field; i < this.fieldsArray.length; ++i)\r\n        if ((field = this.fieldsArray[i]).parent)\r\n            field.parent.remove(field);\r\n    ReflectionObject.prototype.onRemove.call(this, parent);\r\n};\r\n\r\n/**\r\n * Decorator function as returned by {@link OneOf.d} (TypeScript).\r\n * @typedef OneOfDecorator\r\n * @type {function}\r\n * @param {Object} prototype Target prototype\r\n * @param {string} oneofName OneOf name\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * OneOf decorator (TypeScript).\r\n * @function\r\n * @param {...string} fieldNames Field names\r\n * @returns {OneOfDecorator} Decorator function\r\n * @template T extends string\r\n */\r\nOneOf.d = function decorateOneOf() {\r\n    var fieldNames = new Array(arguments.length),\r\n        index = 0;\r\n    while (index < arguments.length)\r\n        fieldNames[index] = arguments[index++];\r\n    return function oneOfDecorator(prototype, oneofName) {\r\n        util.decorateType(prototype.constructor)\r\n            .add(new OneOf(oneofName, fieldNames));\r\n        Object.defineProperty(prototype, oneofName, {\r\n            get: util.oneOfGetter(fieldNames),\r\n            set: util.oneOfSetter(fieldNames)\r\n        });\r\n    };\r\n};\r\n","\"use strict\";\r\nmodule.exports = Reader;\r\n\r\nvar util      = require(\"./util/minimal\");\r\n\r\nvar BufferReader; // cyclic\r\n\r\nvar LongBits  = util.LongBits,\r\n    utf8      = util.utf8;\r\n\r\n/* istanbul ignore next */\r\nfunction indexOutOfRange(reader, writeLength) {\r\n    return RangeError(\"index out of range: \" + reader.pos + \" + \" + (writeLength || 1) + \" > \" + reader.len);\r\n}\r\n\r\n/**\r\n * Constructs a new reader instance using the specified buffer.\r\n * @classdesc Wire format reader using `Uint8Array` if available, otherwise `Array`.\r\n * @constructor\r\n * @param {Uint8Array} buffer Buffer to read from\r\n */\r\nfunction Reader(buffer) {\r\n\r\n    /**\r\n     * Read buffer.\r\n     * @type {Uint8Array}\r\n     */\r\n    this.buf = buffer;\r\n\r\n    /**\r\n     * Read buffer position.\r\n     * @type {number}\r\n     */\r\n    this.pos = 0;\r\n\r\n    /**\r\n     * Read buffer length.\r\n     * @type {number}\r\n     */\r\n    this.len = buffer.length;\r\n}\r\n\r\nvar create_array = typeof Uint8Array !== \"undefined\"\r\n    ? function create_typed_array(buffer) {\r\n        if (buffer instanceof Uint8Array || Array.isArray(buffer))\r\n            return new Reader(buffer);\r\n        throw Error(\"illegal buffer\");\r\n    }\r\n    /* istanbul ignore next */\r\n    : function create_array(buffer) {\r\n        if (Array.isArray(buffer))\r\n            return new Reader(buffer);\r\n        throw Error(\"illegal buffer\");\r\n    };\r\n\r\nvar create = function create() {\r\n    return util.Buffer\r\n        ? function create_buffer_setup(buffer) {\r\n            return (Reader.create = function create_buffer(buffer) {\r\n                return util.Buffer.isBuffer(buffer)\r\n                    ? new BufferReader(buffer)\r\n                    /* istanbul ignore next */\r\n                    : create_array(buffer);\r\n            })(buffer);\r\n        }\r\n        /* istanbul ignore next */\r\n        : create_array;\r\n};\r\n\r\n/**\r\n * Creates a new reader using the specified buffer.\r\n * @function\r\n * @param {Uint8Array|Buffer} buffer Buffer to read from\r\n * @returns {Reader|BufferReader} A {@link BufferReader} if `buffer` is a Buffer, otherwise a {@link Reader}\r\n * @throws {Error} If `buffer` is not a valid buffer\r\n */\r\nReader.create = create();\r\n\r\nReader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */ util.Array.prototype.slice;\r\n\r\n/**\r\n * Reads a varint as an unsigned 32 bit value.\r\n * @function\r\n * @returns {number} Value read\r\n */\r\nReader.prototype.uint32 = (function read_uint32_setup() {\r\n    var value = 4294967295; // optimizer type-hint, tends to deopt otherwise (?!)\r\n    return function read_uint32() {\r\n        value = (         this.buf[this.pos] & 127       ) >>> 0; if (this.buf[this.pos++] < 128) return value;\r\n        value = (value | (this.buf[this.pos] & 127) <<  7) >>> 0; if (this.buf[this.pos++] < 128) return value;\r\n        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0; if (this.buf[this.pos++] < 128) return value;\r\n        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0; if (this.buf[this.pos++] < 128) return value;\r\n        value = (value | (this.buf[this.pos] &  15) << 28) >>> 0; if (this.buf[this.pos++] < 128) return value;\r\n\r\n        /* istanbul ignore if */\r\n        if ((this.pos += 5) > this.len) {\r\n            this.pos = this.len;\r\n            throw indexOutOfRange(this, 10);\r\n        }\r\n        return value;\r\n    };\r\n})();\r\n\r\n/**\r\n * Reads a varint as a signed 32 bit value.\r\n * @returns {number} Value read\r\n */\r\nReader.prototype.int32 = function read_int32() {\r\n    return this.uint32() | 0;\r\n};\r\n\r\n/**\r\n * Reads a zig-zag encoded varint as a signed 32 bit value.\r\n * @returns {number} Value read\r\n */\r\nReader.prototype.sint32 = function read_sint32() {\r\n    var value = this.uint32();\r\n    return value >>> 1 ^ -(value & 1) | 0;\r\n};\r\n\r\n/* eslint-disable no-invalid-this */\r\n\r\nfunction readLongVarint() {\r\n    // tends to deopt with local vars for octet etc.\r\n    var bits = new LongBits(0, 0);\r\n    var i = 0;\r\n    if (this.len - this.pos > 4) { // fast route (lo)\r\n        for (; i < 4; ++i) {\r\n            // 1st..4th\r\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\r\n            if (this.buf[this.pos++] < 128)\r\n                return bits;\r\n        }\r\n        // 5th\r\n        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;\r\n        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >>  4) >>> 0;\r\n        if (this.buf[this.pos++] < 128)\r\n            return bits;\r\n        i = 0;\r\n    } else {\r\n        for (; i < 3; ++i) {\r\n            /* istanbul ignore if */\r\n            if (this.pos >= this.len)\r\n                throw indexOutOfRange(this);\r\n            // 1st..3th\r\n            bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;\r\n            if (this.buf[this.pos++] < 128)\r\n                return bits;\r\n        }\r\n        // 4th\r\n        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;\r\n        return bits;\r\n    }\r\n    if (this.len - this.pos > 4) { // fast route (hi)\r\n        for (; i < 5; ++i) {\r\n            // 6th..10th\r\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\r\n            if (this.buf[this.pos++] < 128)\r\n                return bits;\r\n        }\r\n    } else {\r\n        for (; i < 5; ++i) {\r\n            /* istanbul ignore if */\r\n            if (this.pos >= this.len)\r\n                throw indexOutOfRange(this);\r\n            // 6th..10th\r\n            bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;\r\n            if (this.buf[this.pos++] < 128)\r\n                return bits;\r\n        }\r\n    }\r\n    /* istanbul ignore next */\r\n    throw Error(\"invalid varint encoding\");\r\n}\r\n\r\n/* eslint-enable no-invalid-this */\r\n\r\n/**\r\n * Reads a varint as a signed 64 bit value.\r\n * @name Reader#int64\r\n * @function\r\n * @returns {Long} Value read\r\n */\r\n\r\n/**\r\n * Reads a varint as an unsigned 64 bit value.\r\n * @name Reader#uint64\r\n * @function\r\n * @returns {Long} Value read\r\n */\r\n\r\n/**\r\n * Reads a zig-zag encoded varint as a signed 64 bit value.\r\n * @name Reader#sint64\r\n * @function\r\n * @returns {Long} Value read\r\n */\r\n\r\n/**\r\n * Reads a varint as a boolean.\r\n * @returns {boolean} Value read\r\n */\r\nReader.prototype.bool = function read_bool() {\r\n    return this.uint32() !== 0;\r\n};\r\n\r\nfunction readFixed32_end(buf, end) { // note that this uses `end`, not `pos`\r\n    return (buf[end - 4]\r\n          | buf[end - 3] << 8\r\n          | buf[end - 2] << 16\r\n          | buf[end - 1] << 24) >>> 0;\r\n}\r\n\r\n/**\r\n * Reads fixed 32 bits as an unsigned 32 bit integer.\r\n * @returns {number} Value read\r\n */\r\nReader.prototype.fixed32 = function read_fixed32() {\r\n\r\n    /* istanbul ignore if */\r\n    if (this.pos + 4 > this.len)\r\n        throw indexOutOfRange(this, 4);\r\n\r\n    return readFixed32_end(this.buf, this.pos += 4);\r\n};\r\n\r\n/**\r\n * Reads fixed 32 bits as a signed 32 bit integer.\r\n * @returns {number} Value read\r\n */\r\nReader.prototype.sfixed32 = function read_sfixed32() {\r\n\r\n    /* istanbul ignore if */\r\n    if (this.pos + 4 > this.len)\r\n        throw indexOutOfRange(this, 4);\r\n\r\n    return readFixed32_end(this.buf, this.pos += 4) | 0;\r\n};\r\n\r\n/* eslint-disable no-invalid-this */\r\n\r\nfunction readFixed64(/* this: Reader */) {\r\n\r\n    /* istanbul ignore if */\r\n    if (this.pos + 8 > this.len)\r\n        throw indexOutOfRange(this, 8);\r\n\r\n    return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));\r\n}\r\n\r\n/* eslint-enable no-invalid-this */\r\n\r\n/**\r\n * Reads fixed 64 bits.\r\n * @name Reader#fixed64\r\n * @function\r\n * @returns {Long} Value read\r\n */\r\n\r\n/**\r\n * Reads zig-zag encoded fixed 64 bits.\r\n * @name Reader#sfixed64\r\n * @function\r\n * @returns {Long} Value read\r\n */\r\n\r\n/**\r\n * Reads a float (32 bit) as a number.\r\n * @function\r\n * @returns {number} Value read\r\n */\r\nReader.prototype.float = function read_float() {\r\n\r\n    /* istanbul ignore if */\r\n    if (this.pos + 4 > this.len)\r\n        throw indexOutOfRange(this, 4);\r\n\r\n    var value = util.float.readFloatLE(this.buf, this.pos);\r\n    this.pos += 4;\r\n    return value;\r\n};\r\n\r\n/**\r\n * Reads a double (64 bit float) as a number.\r\n * @function\r\n * @returns {number} Value read\r\n */\r\nReader.prototype.double = function read_double() {\r\n\r\n    /* istanbul ignore if */\r\n    if (this.pos + 8 > this.len)\r\n        throw indexOutOfRange(this, 4);\r\n\r\n    var value = util.float.readDoubleLE(this.buf, this.pos);\r\n    this.pos += 8;\r\n    return value;\r\n};\r\n\r\n/**\r\n * Reads a sequence of bytes preceeded by its length as a varint.\r\n * @returns {Uint8Array} Value read\r\n */\r\nReader.prototype.bytes = function read_bytes() {\r\n    var length = this.uint32(),\r\n        start  = this.pos,\r\n        end    = this.pos + length;\r\n\r\n    /* istanbul ignore if */\r\n    if (end > this.len)\r\n        throw indexOutOfRange(this, length);\r\n\r\n    this.pos += length;\r\n    if (Array.isArray(this.buf)) // plain array\r\n        return this.buf.slice(start, end);\r\n\r\n    if (start === end) { // fix for IE 10/Win8 and others' subarray returning array of size 1\r\n        var nativeBuffer = util.Buffer;\r\n        return nativeBuffer\r\n            ? nativeBuffer.alloc(0)\r\n            : new this.buf.constructor(0);\r\n    }\r\n    return this._slice.call(this.buf, start, end);\r\n};\r\n\r\n/**\r\n * Reads a string preceeded by its byte length as a varint.\r\n * @returns {string} Value read\r\n */\r\nReader.prototype.string = function read_string() {\r\n    var bytes = this.bytes();\r\n    return utf8.read(bytes, 0, bytes.length);\r\n};\r\n\r\n/**\r\n * Skips the specified number of bytes if specified, otherwise skips a varint.\r\n * @param {number} [length] Length if known, otherwise a varint is assumed\r\n * @returns {Reader} `this`\r\n */\r\nReader.prototype.skip = function skip(length) {\r\n    if (typeof length === \"number\") {\r\n        /* istanbul ignore if */\r\n        if (this.pos + length > this.len)\r\n            throw indexOutOfRange(this, length);\r\n        this.pos += length;\r\n    } else {\r\n        do {\r\n            /* istanbul ignore if */\r\n            if (this.pos >= this.len)\r\n                throw indexOutOfRange(this);\r\n        } while (this.buf[this.pos++] & 128);\r\n    }\r\n    return this;\r\n};\r\n\r\n/**\r\n * Skips the next element of the specified wire type.\r\n * @param {number} wireType Wire type received\r\n * @returns {Reader} `this`\r\n */\r\nReader.prototype.skipType = function(wireType) {\r\n    switch (wireType) {\r\n        case 0:\r\n            this.skip();\r\n            break;\r\n        case 1:\r\n            this.skip(8);\r\n            break;\r\n        case 2:\r\n            this.skip(this.uint32());\r\n            break;\r\n        case 3:\r\n            while ((wireType = this.uint32() & 7) !== 4) {\r\n                this.skipType(wireType);\r\n            }\r\n            break;\r\n        case 5:\r\n            this.skip(4);\r\n            break;\r\n\r\n        /* istanbul ignore next */\r\n        default:\r\n            throw Error(\"invalid wire type \" + wireType + \" at offset \" + this.pos);\r\n    }\r\n    return this;\r\n};\r\n\r\nReader._configure = function(BufferReader_) {\r\n    BufferReader = BufferReader_;\r\n    Reader.create = create();\r\n    BufferReader._configure();\r\n\r\n    var fn = util.Long ? \"toLong\" : /* istanbul ignore next */ \"toNumber\";\r\n    util.merge(Reader.prototype, {\r\n\r\n        int64: function read_int64() {\r\n            return readLongVarint.call(this)[fn](false);\r\n        },\r\n\r\n        uint64: function read_uint64() {\r\n            return readLongVarint.call(this)[fn](true);\r\n        },\r\n\r\n        sint64: function read_sint64() {\r\n            return readLongVarint.call(this).zzDecode()[fn](false);\r\n        },\r\n\r\n        fixed64: function read_fixed64() {\r\n            return readFixed64.call(this)[fn](true);\r\n        },\r\n\r\n        sfixed64: function read_sfixed64() {\r\n            return readFixed64.call(this)[fn](false);\r\n        }\r\n\r\n    });\r\n};\r\n","\"use strict\";\r\nmodule.exports = BufferReader;\r\n\r\n// extends Reader\r\nvar Reader = require(\"./reader\");\r\n(BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;\r\n\r\nvar util = require(\"./util/minimal\");\r\n\r\n/**\r\n * Constructs a new buffer reader instance.\r\n * @classdesc Wire format reader using node buffers.\r\n * @extends Reader\r\n * @constructor\r\n * @param {Buffer} buffer Buffer to read from\r\n */\r\nfunction BufferReader(buffer) {\r\n    Reader.call(this, buffer);\r\n\r\n    /**\r\n     * Read buffer.\r\n     * @name BufferReader#buf\r\n     * @type {Buffer}\r\n     */\r\n}\r\n\r\nBufferReader._configure = function () {\r\n    /* istanbul ignore else */\r\n    if (util.Buffer)\r\n        BufferReader.prototype._slice = util.Buffer.prototype.slice;\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nBufferReader.prototype.string = function read_string_buffer() {\r\n    var len = this.uint32(); // modifies pos\r\n    return this.buf.utf8Slice\r\n        ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len))\r\n        : this.buf.toString(\"utf-8\", this.pos, this.pos = Math.min(this.pos + len, this.len));\r\n};\r\n\r\n/**\r\n * Reads a sequence of bytes preceeded by its length as a varint.\r\n * @name BufferReader#bytes\r\n * @function\r\n * @returns {Buffer} Value read\r\n */\r\n\r\nBufferReader._configure();\r\n","\"use strict\";\r\nmodule.exports = Root;\r\n\r\n// extends Namespace\r\nvar Namespace = require(\"./namespace\");\r\n((Root.prototype = Object.create(Namespace.prototype)).constructor = Root).className = \"Root\";\r\n\r\nvar Field   = require(\"./field\"),\r\n    Enum    = require(\"./enum\"),\r\n    OneOf   = require(\"./oneof\"),\r\n    util    = require(\"./util\");\r\n\r\nvar Type,   // cyclic\r\n    parse,  // might be excluded\r\n    common; // \"\r\n\r\n/**\r\n * Constructs a new root namespace instance.\r\n * @classdesc Root namespace wrapping all types, enums, services, sub-namespaces etc. that belong together.\r\n * @extends NamespaceBase\r\n * @constructor\r\n * @param {Object.<string,*>} [options] Top level options\r\n */\r\nfunction Root(options) {\r\n    Namespace.call(this, \"\", options);\r\n\r\n    /**\r\n     * Deferred extension fields.\r\n     * @type {Field[]}\r\n     */\r\n    this.deferred = [];\r\n\r\n    /**\r\n     * Resolved file names of loaded files.\r\n     * @type {string[]}\r\n     */\r\n    this.files = [];\r\n}\r\n\r\n/**\r\n * Loads a namespace descriptor into a root namespace.\r\n * @param {INamespace} json Nameespace descriptor\r\n * @param {Root} [root] Root namespace, defaults to create a new one if omitted\r\n * @returns {Root} Root namespace\r\n */\r\nRoot.fromJSON = function fromJSON(json, root) {\r\n    if (!root)\r\n        root = new Root();\r\n    if (json.options)\r\n        root.setOptions(json.options);\r\n    return root.addJSON(json.nested);\r\n};\r\n\r\n/**\r\n * Resolves the path of an imported file, relative to the importing origin.\r\n * This method exists so you can override it with your own logic in case your imports are scattered over multiple directories.\r\n * @function\r\n * @param {string} origin The file name of the importing file\r\n * @param {string} target The file name being imported\r\n * @returns {string|null} Resolved path to `target` or `null` to skip the file\r\n */\r\nRoot.prototype.resolvePath = util.path.resolve;\r\n\r\n/**\r\n * Fetch content from file path or url\r\n * This method exists so you can override it with your own logic.\r\n * @function\r\n * @param {string} path File path or url\r\n * @param {FetchCallback} callback Callback function\r\n * @returns {undefined}\r\n */\r\nRoot.prototype.fetch = util.fetch;\r\n\r\n// A symbol-like function to safely signal synchronous loading\r\n/* istanbul ignore next */\r\nfunction SYNC() {} // eslint-disable-line no-empty-function\r\n\r\n/**\r\n * Loads one or multiple .proto or preprocessed .json files into this root namespace and calls the callback.\r\n * @param {string|string[]} filename Names of one or multiple files to load\r\n * @param {IParseOptions} options Parse options\r\n * @param {LoadCallback} callback Callback function\r\n * @returns {undefined}\r\n */\r\nRoot.prototype.load = function load(filename, options, callback) {\r\n    if (typeof options === \"function\") {\r\n        callback = options;\r\n        options = undefined;\r\n    }\r\n    var self = this;\r\n    if (!callback)\r\n        return util.asPromise(load, self, filename, options);\r\n\r\n    var sync = callback === SYNC; // undocumented\r\n\r\n    // Finishes loading by calling the callback (exactly once)\r\n    function finish(err, root) {\r\n        /* istanbul ignore if */\r\n        if (!callback)\r\n            return;\r\n        if (sync)\r\n            throw err;\r\n        var cb = callback;\r\n        callback = null;\r\n        cb(err, root);\r\n    }\r\n\r\n    // Bundled definition existence checking\r\n    function getBundledFileName(filename) {\r\n        var idx = filename.lastIndexOf(\"google/protobuf/\");\r\n        if (idx > -1) {\r\n            var altname = filename.substring(idx);\r\n            if (altname in common) return altname;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // Processes a single file\r\n    function process(filename, source) {\r\n        try {\r\n            if (util.isString(source) && source.charAt(0) === \"{\")\r\n                source = JSON.parse(source);\r\n            if (!util.isString(source))\r\n                self.setOptions(source.options).addJSON(source.nested);\r\n            else {\r\n                parse.filename = filename;\r\n                var parsed = parse(source, self, options),\r\n                    resolved,\r\n                    i = 0;\r\n                if (parsed.imports)\r\n                    for (; i < parsed.imports.length; ++i)\r\n                        if (resolved = getBundledFileName(parsed.imports[i]) || self.resolvePath(filename, parsed.imports[i]))\r\n                            fetch(resolved);\r\n                if (parsed.weakImports)\r\n                    for (i = 0; i < parsed.weakImports.length; ++i)\r\n                        if (resolved = getBundledFileName(parsed.weakImports[i]) || self.resolvePath(filename, parsed.weakImports[i]))\r\n                            fetch(resolved, true);\r\n            }\r\n        } catch (err) {\r\n            finish(err);\r\n        }\r\n        if (!sync && !queued)\r\n            finish(null, self); // only once anyway\r\n    }\r\n\r\n    // Fetches a single file\r\n    function fetch(filename, weak) {\r\n        filename = getBundledFileName(filename) || filename;\r\n\r\n        // Skip if already loaded / attempted\r\n        if (self.files.indexOf(filename) > -1)\r\n            return;\r\n        self.files.push(filename);\r\n\r\n        // Shortcut bundled definitions\r\n        if (filename in common) {\r\n            if (sync)\r\n                process(filename, common[filename]);\r\n            else {\r\n                ++queued;\r\n                setTimeout(function() {\r\n                    --queued;\r\n                    process(filename, common[filename]);\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Otherwise fetch from disk or network\r\n        if (sync) {\r\n            var source;\r\n            try {\r\n                source = util.fs.readFileSync(filename).toString(\"utf8\");\r\n            } catch (err) {\r\n                if (!weak)\r\n                    finish(err);\r\n                return;\r\n            }\r\n            process(filename, source);\r\n        } else {\r\n            ++queued;\r\n            self.fetch(filename, function(err, source) {\r\n                --queued;\r\n                /* istanbul ignore if */\r\n                if (!callback)\r\n                    return; // terminated meanwhile\r\n                if (err) {\r\n                    /* istanbul ignore else */\r\n                    if (!weak)\r\n                        finish(err);\r\n                    else if (!queued) // can't be covered reliably\r\n                        finish(null, self);\r\n                    return;\r\n                }\r\n                process(filename, source);\r\n            });\r\n        }\r\n    }\r\n    var queued = 0;\r\n\r\n    // Assembling the root namespace doesn't require working type\r\n    // references anymore, so we can load everything in parallel\r\n    if (util.isString(filename))\r\n        filename = [ filename ];\r\n    for (var i = 0, resolved; i < filename.length; ++i)\r\n        if (resolved = self.resolvePath(\"\", filename[i]))\r\n            fetch(resolved);\r\n\r\n    if (sync)\r\n        return self;\r\n    if (!queued)\r\n        finish(null, self);\r\n    return undefined;\r\n};\r\n// function load(filename:string, options:IParseOptions, callback:LoadCallback):undefined\r\n\r\n/**\r\n * Loads one or multiple .proto or preprocessed .json files into this root namespace and calls the callback.\r\n * @function Root#load\r\n * @param {string|string[]} filename Names of one or multiple files to load\r\n * @param {LoadCallback} callback Callback function\r\n * @returns {undefined}\r\n * @variation 2\r\n */\r\n// function load(filename:string, callback:LoadCallback):undefined\r\n\r\n/**\r\n * Loads one or multiple .proto or preprocessed .json files into this root namespace and returns a promise.\r\n * @function Root#load\r\n * @param {string|string[]} filename Names of one or multiple files to load\r\n * @param {IParseOptions} [options] Parse options. Defaults to {@link parse.defaults} when omitted.\r\n * @returns {Promise<Root>} Promise\r\n * @variation 3\r\n */\r\n// function load(filename:string, [options:IParseOptions]):Promise<Root>\r\n\r\n/**\r\n * Synchronously loads one or multiple .proto or preprocessed .json files into this root namespace (node only).\r\n * @function Root#loadSync\r\n * @param {string|string[]} filename Names of one or multiple files to load\r\n * @param {IParseOptions} [options] Parse options. Defaults to {@link parse.defaults} when omitted.\r\n * @returns {Root} Root namespace\r\n * @throws {Error} If synchronous fetching is not supported (i.e. in browsers) or if a file's syntax is invalid\r\n */\r\nRoot.prototype.loadSync = function loadSync(filename, options) {\r\n    if (!util.isNode)\r\n        throw Error(\"not supported\");\r\n    return this.load(filename, options, SYNC);\r\n};\r\n\r\n/**\r\n * @override\r\n */\r\nRoot.prototype.resolveAll = function resolveAll() {\r\n    if (this.deferred.length)\r\n        throw Error(\"unresolvable extensions: \" + this.deferred.map(function(field) {\r\n            return \"'extend \" + field.extend + \"' in \" + field.parent.fullName;\r\n        }).join(\", \"));\r\n    return Namespace.prototype.resolveAll.call(this);\r\n};\r\n\r\n// only uppercased (and thus conflict-free) children are exposed, see below\r\nvar exposeRe = /^[A-Z]/;\r\n\r\n/**\r\n * Handles a deferred declaring extension field by creating a sister field to represent it within its extended type.\r\n * @param {Root} root Root instance\r\n * @param {Field} field Declaring extension field witin the declaring type\r\n * @returns {boolean} `true` if successfully added to the extended type, `false` otherwise\r\n * @inner\r\n * @ignore\r\n */\r\nfunction tryHandleExtension(root, field) {\r\n    var extendedType = field.parent.lookup(field.extend);\r\n    if (extendedType) {\r\n        var sisterField = new Field(field.fullName, field.id, field.type, field.rule, undefined, field.options);\r\n        //do not allow to extend same field twice to prevent the error\r\n        if (extendedType.get(sisterField.name)) {\r\n            return true;\r\n        }\r\n        sisterField.declaringField = field;\r\n        field.extensionField = sisterField;\r\n        extendedType.add(sisterField);\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Called when any object is added to this root or its sub-namespaces.\r\n * @param {ReflectionObject} object Object added\r\n * @returns {undefined}\r\n * @private\r\n */\r\nRoot.prototype._handleAdd = function _handleAdd(object) {\r\n    if (object instanceof Field) {\r\n\r\n        if (/* an extension field (implies not part of a oneof) */ object.extend !== undefined && /* not already handled */ !object.extensionField)\r\n            if (!tryHandleExtension(this, object))\r\n                this.deferred.push(object);\r\n\r\n    } else if (object instanceof Enum) {\r\n\r\n        if (exposeRe.test(object.name))\r\n            object.parent[object.name] = object.values; // expose enum values as property of its parent\r\n\r\n    } else if (!(object instanceof OneOf)) /* everything else is a namespace */ {\r\n\r\n        if (object instanceof Type) // Try to handle any deferred extensions\r\n            for (var i = 0; i < this.deferred.length;)\r\n                if (tryHandleExtension(this, this.deferred[i]))\r\n                    this.deferred.splice(i, 1);\r\n                else\r\n                    ++i;\r\n        for (var j = 0; j < /* initializes */ object.nestedArray.length; ++j) // recurse into the namespace\r\n            this._handleAdd(object._nestedArray[j]);\r\n        if (exposeRe.test(object.name))\r\n            object.parent[object.name] = object; // expose namespace as property of its parent\r\n    }\r\n\r\n    // The above also adds uppercased (and thus conflict-free) nested types, services and enums as\r\n    // properties of namespaces just like static code does. This allows using a .d.ts generated for\r\n    // a static module with reflection-based solutions where the condition is met.\r\n};\r\n\r\n/**\r\n * Called when any object is removed from this root or its sub-namespaces.\r\n * @param {ReflectionObject} object Object removed\r\n * @returns {undefined}\r\n * @private\r\n */\r\nRoot.prototype._handleRemove = function _handleRemove(object) {\r\n    if (object instanceof Field) {\r\n\r\n        if (/* an extension field */ object.extend !== undefined) {\r\n            if (/* already handled */ object.extensionField) { // remove its sister field\r\n                object.extensionField.parent.remove(object.extensionField);\r\n                object.extensionField = null;\r\n            } else { // cancel the extension\r\n                var index = this.deferred.indexOf(object);\r\n                /* istanbul ignore else */\r\n                if (index > -1)\r\n                    this.deferred.splice(index, 1);\r\n            }\r\n        }\r\n\r\n    } else if (object instanceof Enum) {\r\n\r\n        if (exposeRe.test(object.name))\r\n            delete object.parent[object.name]; // unexpose enum values\r\n\r\n    } else if (object instanceof Namespace) {\r\n\r\n        for (var i = 0; i < /* initializes */ object.nestedArray.length; ++i) // recurse into the namespace\r\n            this._handleRemove(object._nestedArray[i]);\r\n\r\n        if (exposeRe.test(object.name))\r\n            delete object.parent[object.name]; // unexpose namespaces\r\n\r\n    }\r\n};\r\n\r\n// Sets up cyclic dependencies (called in index-light)\r\nRoot._configure = function(Type_, parse_, common_) {\r\n    Type   = Type_;\r\n    parse  = parse_;\r\n    common = common_;\r\n};\r\n","\"use strict\";\r\nmodule.exports = {};\r\n\r\n/**\r\n * Named roots.\r\n * This is where pbjs stores generated structures (the option `-r, --root` specifies a name).\r\n * Can also be used manually to make roots available across modules.\r\n * @name roots\r\n * @type {Object.<string,Root>}\r\n * @example\r\n * // pbjs -r myroot -o compiled.js ...\r\n *\r\n * // in another module:\r\n * require(\"./compiled.js\");\r\n *\r\n * // in any subsequent module:\r\n * var root = protobuf.roots[\"myroot\"];\r\n */\r\n","\"use strict\";\r\n\r\n/**\r\n * Streaming RPC helpers.\r\n * @namespace\r\n */\r\nvar rpc = exports;\r\n\r\n/**\r\n * RPC implementation passed to {@link Service#create} performing a service request on network level, i.e. by utilizing http requests or websockets.\r\n * @typedef RPCImpl\r\n * @type {function}\r\n * @param {Method|rpc.ServiceMethod<Message<{}>,Message<{}>>} method Reflected or static method being called\r\n * @param {Uint8Array} requestData Request data\r\n * @param {RPCImplCallback} callback Callback function\r\n * @returns {undefined}\r\n * @example\r\n * function rpcImpl(method, requestData, callback) {\r\n *     if (protobuf.util.lcFirst(method.name) !== \"myMethod\") // compatible with static code\r\n *         throw Error(\"no such method\");\r\n *     asynchronouslyObtainAResponse(requestData, function(err, responseData) {\r\n *         callback(err, responseData);\r\n *     });\r\n * }\r\n */\r\n\r\n/**\r\n * Node-style callback as used by {@link RPCImpl}.\r\n * @typedef RPCImplCallback\r\n * @type {function}\r\n * @param {Error|null} error Error, if any, otherwise `null`\r\n * @param {Uint8Array|null} [response] Response data or `null` to signal end of stream, if there hasn't been an error\r\n * @returns {undefined}\r\n */\r\n\r\nrpc.Service = require(\"./rpc/service\");\r\n","\"use strict\";\r\nmodule.exports = Service;\r\n\r\nvar util = require(\"../util/minimal\");\r\n\r\n// Extends EventEmitter\r\n(Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;\r\n\r\n/**\r\n * A service method callback as used by {@link rpc.ServiceMethod|ServiceMethod}.\r\n *\r\n * Differs from {@link RPCImplCallback} in that it is an actual callback of a service method which may not return `response = null`.\r\n * @typedef rpc.ServiceMethodCallback\r\n * @template TRes extends Message<TRes>\r\n * @type {function}\r\n * @param {Error|null} error Error, if any\r\n * @param {TRes} [response] Response message\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * A service method part of a {@link rpc.Service} as created by {@link Service.create}.\r\n * @typedef rpc.ServiceMethod\r\n * @template TReq extends Message<TReq>\r\n * @template TRes extends Message<TRes>\r\n * @type {function}\r\n * @param {TReq|Properties<TReq>} request Request message or plain object\r\n * @param {rpc.ServiceMethodCallback<TRes>} [callback] Node-style callback called with the error, if any, and the response message\r\n * @returns {Promise<Message<TRes>>} Promise if `callback` has been omitted, otherwise `undefined`\r\n */\r\n\r\n/**\r\n * Constructs a new RPC service instance.\r\n * @classdesc An RPC service as returned by {@link Service#create}.\r\n * @exports rpc.Service\r\n * @extends util.EventEmitter\r\n * @constructor\r\n * @param {RPCImpl} rpcImpl RPC implementation\r\n * @param {boolean} [requestDelimited=false] Whether requests are length-delimited\r\n * @param {boolean} [responseDelimited=false] Whether responses are length-delimited\r\n */\r\nfunction Service(rpcImpl, requestDelimited, responseDelimited) {\r\n\r\n    if (typeof rpcImpl !== \"function\")\r\n        throw TypeError(\"rpcImpl must be a function\");\r\n\r\n    util.EventEmitter.call(this);\r\n\r\n    /**\r\n     * RPC implementation. Becomes `null` once the service is ended.\r\n     * @type {RPCImpl|null}\r\n     */\r\n    this.rpcImpl = rpcImpl;\r\n\r\n    /**\r\n     * Whether requests are length-delimited.\r\n     * @type {boolean}\r\n     */\r\n    this.requestDelimited = Boolean(requestDelimited);\r\n\r\n    /**\r\n     * Whether responses are length-delimited.\r\n     * @type {boolean}\r\n     */\r\n    this.responseDelimited = Boolean(responseDelimited);\r\n}\r\n\r\n/**\r\n * Calls a service method through {@link rpc.Service#rpcImpl|rpcImpl}.\r\n * @param {Method|rpc.ServiceMethod<TReq,TRes>} method Reflected or static method\r\n * @param {Constructor<TReq>} requestCtor Request constructor\r\n * @param {Constructor<TRes>} responseCtor Response constructor\r\n * @param {TReq|Properties<TReq>} request Request message or plain object\r\n * @param {rpc.ServiceMethodCallback<TRes>} callback Service callback\r\n * @returns {undefined}\r\n * @template TReq extends Message<TReq>\r\n * @template TRes extends Message<TRes>\r\n */\r\nService.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {\r\n\r\n    if (!request)\r\n        throw TypeError(\"request must be specified\");\r\n\r\n    var self = this;\r\n    if (!callback)\r\n        return util.asPromise(rpcCall, self, method, requestCtor, responseCtor, request);\r\n\r\n    if (!self.rpcImpl) {\r\n        setTimeout(function() { callback(Error(\"already ended\")); }, 0);\r\n        return undefined;\r\n    }\r\n\r\n    try {\r\n        return self.rpcImpl(\r\n            method,\r\n            requestCtor[self.requestDelimited ? \"encodeDelimited\" : \"encode\"](request).finish(),\r\n            function rpcCallback(err, response) {\r\n\r\n                if (err) {\r\n                    self.emit(\"error\", err, method);\r\n                    return callback(err);\r\n                }\r\n\r\n                if (response === null) {\r\n                    self.end(/* endedByRPC */ true);\r\n                    return undefined;\r\n                }\r\n\r\n                if (!(response instanceof responseCtor)) {\r\n                    try {\r\n                        response = responseCtor[self.responseDelimited ? \"decodeDelimited\" : \"decode\"](response);\r\n                    } catch (err) {\r\n                        self.emit(\"error\", err, method);\r\n                        return callback(err);\r\n                    }\r\n                }\r\n\r\n                self.emit(\"data\", response, method);\r\n                return callback(null, response);\r\n            }\r\n        );\r\n    } catch (err) {\r\n        self.emit(\"error\", err, method);\r\n        setTimeout(function() { callback(err); }, 0);\r\n        return undefined;\r\n    }\r\n};\r\n\r\n/**\r\n * Ends this service and emits the `end` event.\r\n * @param {boolean} [endedByRPC=false] Whether the service has been ended by the RPC implementation.\r\n * @returns {rpc.Service} `this`\r\n */\r\nService.prototype.end = function end(endedByRPC) {\r\n    if (this.rpcImpl) {\r\n        if (!endedByRPC) // signal end to rpcImpl\r\n            this.rpcImpl(null, null, null);\r\n        this.rpcImpl = null;\r\n        this.emit(\"end\").off();\r\n    }\r\n    return this;\r\n};\r\n","\"use strict\";\r\nmodule.exports = Service;\r\n\r\n// extends Namespace\r\nvar Namespace = require(\"./namespace\");\r\n((Service.prototype = Object.create(Namespace.prototype)).constructor = Service).className = \"Service\";\r\n\r\nvar Method = require(\"./method\"),\r\n    util   = require(\"./util\"),\r\n    rpc    = require(\"./rpc\");\r\n\r\n/**\r\n * Constructs a new service instance.\r\n * @classdesc Reflected service.\r\n * @extends NamespaceBase\r\n * @constructor\r\n * @param {string} name Service name\r\n * @param {Object.<string,*>} [options] Service options\r\n * @throws {TypeError} If arguments are invalid\r\n */\r\nfunction Service(name, options) {\r\n    Namespace.call(this, name, options);\r\n\r\n    /**\r\n     * Service methods.\r\n     * @type {Object.<string,Method>}\r\n     */\r\n    this.methods = {}; // toJSON, marker\r\n\r\n    /**\r\n     * Cached methods as an array.\r\n     * @type {Method[]|null}\r\n     * @private\r\n     */\r\n    this._methodsArray = null;\r\n}\r\n\r\n/**\r\n * Service descriptor.\r\n * @interface IService\r\n * @extends INamespace\r\n * @property {Object.<string,IMethod>} methods Method descriptors\r\n */\r\n\r\n/**\r\n * Constructs a service from a service descriptor.\r\n * @param {string} name Service name\r\n * @param {IService} json Service descriptor\r\n * @returns {Service} Created service\r\n * @throws {TypeError} If arguments are invalid\r\n */\r\nService.fromJSON = function fromJSON(name, json) {\r\n    var service = new Service(name, json.options);\r\n    /* istanbul ignore else */\r\n    if (json.methods)\r\n        for (var names = Object.keys(json.methods), i = 0; i < names.length; ++i)\r\n            service.add(Method.fromJSON(names[i], json.methods[names[i]]));\r\n    if (json.nested)\r\n        service.addJSON(json.nested);\r\n    service.comment = json.comment;\r\n    return service;\r\n};\r\n\r\n/**\r\n * Converts this service to a service descriptor.\r\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\r\n * @returns {IService} Service descriptor\r\n */\r\nService.prototype.toJSON = function toJSON(toJSONOptions) {\r\n    var inherited = Namespace.prototype.toJSON.call(this, toJSONOptions);\r\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\r\n    return util.toObject([\r\n        \"options\" , inherited && inherited.options || undefined,\r\n        \"methods\" , Namespace.arrayToJSON(this.methodsArray, toJSONOptions) || /* istanbul ignore next */ {},\r\n        \"nested\"  , inherited && inherited.nested || undefined,\r\n        \"comment\" , keepComments ? this.comment : undefined\r\n    ]);\r\n};\r\n\r\n/**\r\n * Methods of this service as an array for iteration.\r\n * @name Service#methodsArray\r\n * @type {Method[]}\r\n * @readonly\r\n */\r\nObject.defineProperty(Service.prototype, \"methodsArray\", {\r\n    get: function() {\r\n        return this._methodsArray || (this._methodsArray = util.toArray(this.methods));\r\n    }\r\n});\r\n\r\nfunction clearCache(service) {\r\n    service._methodsArray = null;\r\n    return service;\r\n}\r\n\r\n/**\r\n * @override\r\n */\r\nService.prototype.get = function get(name) {\r\n    return this.methods[name]\r\n        || Namespace.prototype.get.call(this, name);\r\n};\r\n\r\n/**\r\n * @override\r\n */\r\nService.prototype.resolveAll = function resolveAll() {\r\n    var methods = this.methodsArray;\r\n    for (var i = 0; i < methods.length; ++i)\r\n        methods[i].resolve();\r\n    return Namespace.prototype.resolve.call(this);\r\n};\r\n\r\n/**\r\n * @override\r\n */\r\nService.prototype.add = function add(object) {\r\n\r\n    /* istanbul ignore if */\r\n    if (this.get(object.name))\r\n        throw Error(\"duplicate name '\" + object.name + \"' in \" + this);\r\n\r\n    if (object instanceof Method) {\r\n        this.methods[object.name] = object;\r\n        object.parent = this;\r\n        return clearCache(this);\r\n    }\r\n    return Namespace.prototype.add.call(this, object);\r\n};\r\n\r\n/**\r\n * @override\r\n */\r\nService.prototype.remove = function remove(object) {\r\n    if (object instanceof Method) {\r\n\r\n        /* istanbul ignore if */\r\n        if (this.methods[object.name] !== object)\r\n            throw Error(object + \" is not a member of \" + this);\r\n\r\n        delete this.methods[object.name];\r\n        object.parent = null;\r\n        return clearCache(this);\r\n    }\r\n    return Namespace.prototype.remove.call(this, object);\r\n};\r\n\r\n/**\r\n * Creates a runtime service using the specified rpc implementation.\r\n * @param {RPCImpl} rpcImpl RPC implementation\r\n * @param {boolean} [requestDelimited=false] Whether requests are length-delimited\r\n * @param {boolean} [responseDelimited=false] Whether responses are length-delimited\r\n * @returns {rpc.Service} RPC service. Useful where requests and/or responses are streamed.\r\n */\r\nService.prototype.create = function create(rpcImpl, requestDelimited, responseDelimited) {\r\n    var rpcService = new rpc.Service(rpcImpl, requestDelimited, responseDelimited);\r\n    for (var i = 0, method; i < /* initializes */ this.methodsArray.length; ++i) {\r\n        var methodName = util.lcFirst((method = this._methodsArray[i]).resolve().name).replace(/[^$\\w_]/g, \"\");\r\n        rpcService[methodName] = util.codegen([\"r\",\"c\"], util.isReserved(methodName) ? methodName + \"_\" : methodName)(\"return this.rpcCall(m,q,s,r,c)\")({\r\n            m: method,\r\n            q: method.resolvedRequestType.ctor,\r\n            s: method.resolvedResponseType.ctor\r\n        });\r\n    }\r\n    return rpcService;\r\n};\r\n","\"use strict\";\r\nmodule.exports = Type;\r\n\r\n// extends Namespace\r\nvar Namespace = require(\"./namespace\");\r\n((Type.prototype = Object.create(Namespace.prototype)).constructor = Type).className = \"Type\";\r\n\r\nvar Enum      = require(\"./enum\"),\r\n    OneOf     = require(\"./oneof\"),\r\n    Field     = require(\"./field\"),\r\n    MapField  = require(\"./mapfield\"),\r\n    Service   = require(\"./service\"),\r\n    Message   = require(\"./message\"),\r\n    Reader    = require(\"./reader\"),\r\n    Writer    = require(\"./writer\"),\r\n    util      = require(\"./util\"),\r\n    encoder   = require(\"./encoder\"),\r\n    decoder   = require(\"./decoder\"),\r\n    verifier  = require(\"./verifier\"),\r\n    converter = require(\"./converter\"),\r\n    wrappers  = require(\"./wrappers\");\r\n\r\n/**\r\n * Constructs a new reflected message type instance.\r\n * @classdesc Reflected message type.\r\n * @extends NamespaceBase\r\n * @constructor\r\n * @param {string} name Message name\r\n * @param {Object.<string,*>} [options] Declared options\r\n */\r\nfunction Type(name, options) {\r\n    Namespace.call(this, name, options);\r\n\r\n    /**\r\n     * Message fields.\r\n     * @type {Object.<string,Field>}\r\n     */\r\n    this.fields = {};  // toJSON, marker\r\n\r\n    /**\r\n     * Oneofs declared within this namespace, if any.\r\n     * @type {Object.<string,OneOf>}\r\n     */\r\n    this.oneofs = undefined; // toJSON\r\n\r\n    /**\r\n     * Extension ranges, if any.\r\n     * @type {number[][]}\r\n     */\r\n    this.extensions = undefined; // toJSON\r\n\r\n    /**\r\n     * Reserved ranges, if any.\r\n     * @type {Array.<number[]|string>}\r\n     */\r\n    this.reserved = undefined; // toJSON\r\n\r\n    /*?\r\n     * Whether this type is a legacy group.\r\n     * @type {boolean|undefined}\r\n     */\r\n    this.group = undefined; // toJSON\r\n\r\n    /**\r\n     * Cached fields by id.\r\n     * @type {Object.<number,Field>|null}\r\n     * @private\r\n     */\r\n    this._fieldsById = null;\r\n\r\n    /**\r\n     * Cached fields as an array.\r\n     * @type {Field[]|null}\r\n     * @private\r\n     */\r\n    this._fieldsArray = null;\r\n\r\n    /**\r\n     * Cached oneofs as an array.\r\n     * @type {OneOf[]|null}\r\n     * @private\r\n     */\r\n    this._oneofsArray = null;\r\n\r\n    /**\r\n     * Cached constructor.\r\n     * @type {Constructor<{}>}\r\n     * @private\r\n     */\r\n    this._ctor = null;\r\n}\r\n\r\nObject.defineProperties(Type.prototype, {\r\n\r\n    /**\r\n     * Message fields by id.\r\n     * @name Type#fieldsById\r\n     * @type {Object.<number,Field>}\r\n     * @readonly\r\n     */\r\n    fieldsById: {\r\n        get: function() {\r\n\r\n            /* istanbul ignore if */\r\n            if (this._fieldsById)\r\n                return this._fieldsById;\r\n\r\n            this._fieldsById = {};\r\n            for (var names = Object.keys(this.fields), i = 0; i < names.length; ++i) {\r\n                var field = this.fields[names[i]],\r\n                    id = field.id;\r\n\r\n                /* istanbul ignore if */\r\n                if (this._fieldsById[id])\r\n                    throw Error(\"duplicate id \" + id + \" in \" + this);\r\n\r\n                this._fieldsById[id] = field;\r\n            }\r\n            return this._fieldsById;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Fields of this message as an array for iteration.\r\n     * @name Type#fieldsArray\r\n     * @type {Field[]}\r\n     * @readonly\r\n     */\r\n    fieldsArray: {\r\n        get: function() {\r\n            return this._fieldsArray || (this._fieldsArray = util.toArray(this.fields));\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Oneofs of this message as an array for iteration.\r\n     * @name Type#oneofsArray\r\n     * @type {OneOf[]}\r\n     * @readonly\r\n     */\r\n    oneofsArray: {\r\n        get: function() {\r\n            return this._oneofsArray || (this._oneofsArray = util.toArray(this.oneofs));\r\n        }\r\n    },\r\n\r\n    /**\r\n     * The registered constructor, if any registered, otherwise a generic constructor.\r\n     * Assigning a function replaces the internal constructor. If the function does not extend {@link Message} yet, its prototype will be setup accordingly and static methods will be populated. If it already extends {@link Message}, it will just replace the internal constructor.\r\n     * @name Type#ctor\r\n     * @type {Constructor<{}>}\r\n     */\r\n    ctor: {\r\n        get: function() {\r\n            return this._ctor || (this.ctor = Type.generateConstructor(this)());\r\n        },\r\n        set: function(ctor) {\r\n\r\n            // Ensure proper prototype\r\n            var prototype = ctor.prototype;\r\n            if (!(prototype instanceof Message)) {\r\n                (ctor.prototype = new Message()).constructor = ctor;\r\n                util.merge(ctor.prototype, prototype);\r\n            }\r\n\r\n            // Classes and messages reference their reflected type\r\n            ctor.$type = ctor.prototype.$type = this;\r\n\r\n            // Mix in static methods\r\n            util.merge(ctor, Message, true);\r\n\r\n            this._ctor = ctor;\r\n\r\n            // Messages have non-enumerable default values on their prototype\r\n            var i = 0;\r\n            for (; i < /* initializes */ this.fieldsArray.length; ++i)\r\n                this._fieldsArray[i].resolve(); // ensures a proper value\r\n\r\n            // Messages have non-enumerable getters and setters for each virtual oneof field\r\n            var ctorProperties = {};\r\n            for (i = 0; i < /* initializes */ this.oneofsArray.length; ++i)\r\n                ctorProperties[this._oneofsArray[i].resolve().name] = {\r\n                    get: util.oneOfGetter(this._oneofsArray[i].oneof),\r\n                    set: util.oneOfSetter(this._oneofsArray[i].oneof)\r\n                };\r\n            if (i)\r\n                Object.defineProperties(ctor.prototype, ctorProperties);\r\n        }\r\n    }\r\n});\r\n\r\n/**\r\n * Generates a constructor function for the specified type.\r\n * @param {Type} mtype Message type\r\n * @returns {Codegen} Codegen instance\r\n */\r\nType.generateConstructor = function generateConstructor(mtype) {\r\n    /* eslint-disable no-unexpected-multiline */\r\n    var gen = util.codegen([\"p\"], mtype.name);\r\n    // explicitly initialize mutable object/array fields so that these aren't just inherited from the prototype\r\n    for (var i = 0, field; i < mtype.fieldsArray.length; ++i)\r\n        if ((field = mtype._fieldsArray[i]).map) gen\r\n            (\"this%s={}\", util.safeProp(field.name));\r\n        else if (field.repeated) gen\r\n            (\"this%s=[]\", util.safeProp(field.name));\r\n    return gen\r\n    (\"if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)\") // omit undefined or null\r\n        (\"this[ks[i]]=p[ks[i]]\");\r\n    /* eslint-enable no-unexpected-multiline */\r\n};\r\n\r\nfunction clearCache(type) {\r\n    type._fieldsById = type._fieldsArray = type._oneofsArray = null;\r\n    delete type.encode;\r\n    delete type.decode;\r\n    delete type.verify;\r\n    return type;\r\n}\r\n\r\n/**\r\n * Message type descriptor.\r\n * @interface IType\r\n * @extends INamespace\r\n * @property {Object.<string,IOneOf>} [oneofs] Oneof descriptors\r\n * @property {Object.<string,IField>} fields Field descriptors\r\n * @property {number[][]} [extensions] Extension ranges\r\n * @property {Array.<number[]|string>} [reserved] Reserved ranges\r\n * @property {boolean} [group=false] Whether a legacy group or not\r\n */\r\n\r\n/**\r\n * Creates a message type from a message type descriptor.\r\n * @param {string} name Message name\r\n * @param {IType} json Message type descriptor\r\n * @returns {Type} Created message type\r\n */\r\nType.fromJSON = function fromJSON(name, json) {\r\n    var type = new Type(name, json.options);\r\n    type.extensions = json.extensions;\r\n    type.reserved = json.reserved;\r\n    var names = Object.keys(json.fields),\r\n        i = 0;\r\n    for (; i < names.length; ++i)\r\n        type.add(\r\n            ( typeof json.fields[names[i]].keyType !== \"undefined\"\r\n            ? MapField.fromJSON\r\n            : Field.fromJSON )(names[i], json.fields[names[i]])\r\n        );\r\n    if (json.oneofs)\r\n        for (names = Object.keys(json.oneofs), i = 0; i < names.length; ++i)\r\n            type.add(OneOf.fromJSON(names[i], json.oneofs[names[i]]));\r\n    if (json.nested)\r\n        for (names = Object.keys(json.nested), i = 0; i < names.length; ++i) {\r\n            var nested = json.nested[names[i]];\r\n            type.add( // most to least likely\r\n                ( nested.id !== undefined\r\n                ? Field.fromJSON\r\n                : nested.fields !== undefined\r\n                ? Type.fromJSON\r\n                : nested.values !== undefined\r\n                ? Enum.fromJSON\r\n                : nested.methods !== undefined\r\n                ? Service.fromJSON\r\n                : Namespace.fromJSON )(names[i], nested)\r\n            );\r\n        }\r\n    if (json.extensions && json.extensions.length)\r\n        type.extensions = json.extensions;\r\n    if (json.reserved && json.reserved.length)\r\n        type.reserved = json.reserved;\r\n    if (json.group)\r\n        type.group = true;\r\n    if (json.comment)\r\n        type.comment = json.comment;\r\n    return type;\r\n};\r\n\r\n/**\r\n * Converts this message type to a message type descriptor.\r\n * @param {IToJSONOptions} [toJSONOptions] JSON conversion options\r\n * @returns {IType} Message type descriptor\r\n */\r\nType.prototype.toJSON = function toJSON(toJSONOptions) {\r\n    var inherited = Namespace.prototype.toJSON.call(this, toJSONOptions);\r\n    var keepComments = toJSONOptions ? Boolean(toJSONOptions.keepComments) : false;\r\n    return util.toObject([\r\n        \"options\"    , inherited && inherited.options || undefined,\r\n        \"oneofs\"     , Namespace.arrayToJSON(this.oneofsArray, toJSONOptions),\r\n        \"fields\"     , Namespace.arrayToJSON(this.fieldsArray.filter(function(obj) { return !obj.declaringField; }), toJSONOptions) || {},\r\n        \"extensions\" , this.extensions && this.extensions.length ? this.extensions : undefined,\r\n        \"reserved\"   , this.reserved && this.reserved.length ? this.reserved : undefined,\r\n        \"group\"      , this.group || undefined,\r\n        \"nested\"     , inherited && inherited.nested || undefined,\r\n        \"comment\"    , keepComments ? this.comment : undefined\r\n    ]);\r\n};\r\n\r\n/**\r\n * @override\r\n */\r\nType.prototype.resolveAll = function resolveAll() {\r\n    var fields = this.fieldsArray, i = 0;\r\n    while (i < fields.length)\r\n        fields[i++].resolve();\r\n    var oneofs = this.oneofsArray; i = 0;\r\n    while (i < oneofs.length)\r\n        oneofs[i++].resolve();\r\n    return Namespace.prototype.resolveAll.call(this);\r\n};\r\n\r\n/**\r\n * @override\r\n */\r\nType.prototype.get = function get(name) {\r\n    return this.fields[name]\r\n        || this.oneofs && this.oneofs[name]\r\n        || this.nested && this.nested[name]\r\n        || null;\r\n};\r\n\r\n/**\r\n * Adds a nested object to this type.\r\n * @param {ReflectionObject} object Nested object to add\r\n * @returns {Type} `this`\r\n * @throws {TypeError} If arguments are invalid\r\n * @throws {Error} If there is already a nested object with this name or, if a field, when there is already a field with this id\r\n */\r\nType.prototype.add = function add(object) {\r\n\r\n    if (this.get(object.name))\r\n        throw Error(\"duplicate name '\" + object.name + \"' in \" + this);\r\n\r\n    if (object instanceof Field && object.extend === undefined) {\r\n        // NOTE: Extension fields aren't actual fields on the declaring type, but nested objects.\r\n        // The root object takes care of adding distinct sister-fields to the respective extended\r\n        // type instead.\r\n\r\n        // avoids calling the getter if not absolutely necessary because it's called quite frequently\r\n        if (this._fieldsById ? /* istanbul ignore next */ this._fieldsById[object.id] : this.fieldsById[object.id])\r\n            throw Error(\"duplicate id \" + object.id + \" in \" + this);\r\n        if (this.isReservedId(object.id))\r\n            throw Error(\"id \" + object.id + \" is reserved in \" + this);\r\n        if (this.isReservedName(object.name))\r\n            throw Error(\"name '\" + object.name + \"' is reserved in \" + this);\r\n\r\n        if (object.parent)\r\n            object.parent.remove(object);\r\n        this.fields[object.name] = object;\r\n        object.message = this;\r\n        object.onAdd(this);\r\n        return clearCache(this);\r\n    }\r\n    if (object instanceof OneOf) {\r\n        if (!this.oneofs)\r\n            this.oneofs = {};\r\n        this.oneofs[object.name] = object;\r\n        object.onAdd(this);\r\n        return clearCache(this);\r\n    }\r\n    return Namespace.prototype.add.call(this, object);\r\n};\r\n\r\n/**\r\n * Removes a nested object from this type.\r\n * @param {ReflectionObject} object Nested object to remove\r\n * @returns {Type} `this`\r\n * @throws {TypeError} If arguments are invalid\r\n * @throws {Error} If `object` is not a member of this type\r\n */\r\nType.prototype.remove = function remove(object) {\r\n    if (object instanceof Field && object.extend === undefined) {\r\n        // See Type#add for the reason why extension fields are excluded here.\r\n\r\n        /* istanbul ignore if */\r\n        if (!this.fields || this.fields[object.name] !== object)\r\n            throw Error(object + \" is not a member of \" + this);\r\n\r\n        delete this.fields[object.name];\r\n        object.parent = null;\r\n        object.onRemove(this);\r\n        return clearCache(this);\r\n    }\r\n    if (object instanceof OneOf) {\r\n\r\n        /* istanbul ignore if */\r\n        if (!this.oneofs || this.oneofs[object.name] !== object)\r\n            throw Error(object + \" is not a member of \" + this);\r\n\r\n        delete this.oneofs[object.name];\r\n        object.parent = null;\r\n        object.onRemove(this);\r\n        return clearCache(this);\r\n    }\r\n    return Namespace.prototype.remove.call(this, object);\r\n};\r\n\r\n/**\r\n * Tests if the specified id is reserved.\r\n * @param {number} id Id to test\r\n * @returns {boolean} `true` if reserved, otherwise `false`\r\n */\r\nType.prototype.isReservedId = function isReservedId(id) {\r\n    return Namespace.isReservedId(this.reserved, id);\r\n};\r\n\r\n/**\r\n * Tests if the specified name is reserved.\r\n * @param {string} name Name to test\r\n * @returns {boolean} `true` if reserved, otherwise `false`\r\n */\r\nType.prototype.isReservedName = function isReservedName(name) {\r\n    return Namespace.isReservedName(this.reserved, name);\r\n};\r\n\r\n/**\r\n * Creates a new message of this type using the specified properties.\r\n * @param {Object.<string,*>} [properties] Properties to set\r\n * @returns {Message<{}>} Message instance\r\n */\r\nType.prototype.create = function create(properties) {\r\n    return new this.ctor(properties);\r\n};\r\n\r\n/**\r\n * Sets up {@link Type#encode|encode}, {@link Type#decode|decode} and {@link Type#verify|verify}.\r\n * @returns {Type} `this`\r\n */\r\nType.prototype.setup = function setup() {\r\n    // Sets up everything at once so that the prototype chain does not have to be re-evaluated\r\n    // multiple times (V8, soft-deopt prototype-check).\r\n\r\n    var fullName = this.fullName,\r\n        types    = [];\r\n    for (var i = 0; i < /* initializes */ this.fieldsArray.length; ++i)\r\n        types.push(this._fieldsArray[i].resolve().resolvedType);\r\n\r\n    // Replace setup methods with type-specific generated functions\r\n    this.encode = encoder(this)({\r\n        Writer : Writer,\r\n        types  : types,\r\n        util   : util\r\n    });\r\n    this.decode = decoder(this)({\r\n        Reader : Reader,\r\n        types  : types,\r\n        util   : util\r\n    });\r\n    this.verify = verifier(this)({\r\n        types : types,\r\n        util  : util\r\n    });\r\n    this.fromObject = converter.fromObject(this)({\r\n        types : types,\r\n        util  : util\r\n    });\r\n    this.toObject = converter.toObject(this)({\r\n        types : types,\r\n        util  : util\r\n    });\r\n\r\n    // Inject custom wrappers for common types\r\n    var wrapper = wrappers[fullName];\r\n    if (wrapper) {\r\n        var originalThis = Object.create(this);\r\n        // if (wrapper.fromObject) {\r\n            originalThis.fromObject = this.fromObject;\r\n            this.fromObject = wrapper.fromObject.bind(originalThis);\r\n        // }\r\n        // if (wrapper.toObject) {\r\n            originalThis.toObject = this.toObject;\r\n            this.toObject = wrapper.toObject.bind(originalThis);\r\n        // }\r\n    }\r\n\r\n    return this;\r\n};\r\n\r\n/**\r\n * Encodes a message of this type. Does not implicitly {@link Type#verify|verify} messages.\r\n * @param {Message<{}>|Object.<string,*>} message Message instance or plain object\r\n * @param {Writer} [writer] Writer to encode to\r\n * @returns {Writer} writer\r\n */\r\nType.prototype.encode = function encode_setup(message, writer) {\r\n    return this.setup().encode(message, writer); // overrides this method\r\n};\r\n\r\n/**\r\n * Encodes a message of this type preceeded by its byte length as a varint. Does not implicitly {@link Type#verify|verify} messages.\r\n * @param {Message<{}>|Object.<string,*>} message Message instance or plain object\r\n * @param {Writer} [writer] Writer to encode to\r\n * @returns {Writer} writer\r\n */\r\nType.prototype.encodeDelimited = function encodeDelimited(message, writer) {\r\n    return this.encode(message, writer && writer.len ? writer.fork() : writer).ldelim();\r\n};\r\n\r\n/**\r\n * Decodes a message of this type.\r\n * @param {Reader|Uint8Array} reader Reader or buffer to decode from\r\n * @param {number} [length] Length of the message, if known beforehand\r\n * @returns {Message<{}>} Decoded message\r\n * @throws {Error} If the payload is not a reader or valid buffer\r\n * @throws {util.ProtocolError<{}>} If required fields are missing\r\n */\r\nType.prototype.decode = function decode_setup(reader, length) {\r\n    return this.setup().decode(reader, length); // overrides this method\r\n};\r\n\r\n/**\r\n * Decodes a message of this type preceeded by its byte length as a varint.\r\n * @param {Reader|Uint8Array} reader Reader or buffer to decode from\r\n * @returns {Message<{}>} Decoded message\r\n * @throws {Error} If the payload is not a reader or valid buffer\r\n * @throws {util.ProtocolError} If required fields are missing\r\n */\r\nType.prototype.decodeDelimited = function decodeDelimited(reader) {\r\n    if (!(reader instanceof Reader))\r\n        reader = Reader.create(reader);\r\n    return this.decode(reader, reader.uint32());\r\n};\r\n\r\n/**\r\n * Verifies that field values are valid and that required fields are present.\r\n * @param {Object.<string,*>} message Plain object to verify\r\n * @returns {null|string} `null` if valid, otherwise the reason why it is not\r\n */\r\nType.prototype.verify = function verify_setup(message) {\r\n    return this.setup().verify(message); // overrides this method\r\n};\r\n\r\n/**\r\n * Creates a new message of this type from a plain object. Also converts values to their respective internal types.\r\n * @param {Object.<string,*>} object Plain object to convert\r\n * @returns {Message<{}>} Message instance\r\n */\r\nType.prototype.fromObject = function fromObject(object) {\r\n    return this.setup().fromObject(object);\r\n};\r\n\r\n/**\r\n * Conversion options as used by {@link Type#toObject} and {@link Message.toObject}.\r\n * @interface IConversionOptions\r\n * @property {Function} [longs] Long conversion type.\r\n * Valid values are `String` and `Number` (the global types).\r\n * Defaults to copy the present value, which is a possibly unsafe number without and a {@link Long} with a long library.\r\n * @property {Function} [enums] Enum value conversion type.\r\n * Only valid value is `String` (the global type).\r\n * Defaults to copy the present value, which is the numeric id.\r\n * @property {Function} [bytes] Bytes value conversion type.\r\n * Valid values are `Array` and (a base64 encoded) `String` (the global types).\r\n * Defaults to copy the present value, which usually is a Buffer under node and an Uint8Array in the browser.\r\n * @property {boolean} [defaults=false] Also sets default values on the resulting object\r\n * @property {boolean} [arrays=false] Sets empty arrays for missing repeated fields even if `defaults=false`\r\n * @property {boolean} [objects=false] Sets empty objects for missing map fields even if `defaults=false`\r\n * @property {boolean} [oneofs=false] Includes virtual oneof properties set to the present field's name, if any\r\n * @property {boolean} [json=false] Performs additional JSON compatibility conversions, i.e. NaN and Infinity to strings\r\n */\r\n\r\n/**\r\n * Creates a plain object from a message of this type. Also converts values to other types if specified.\r\n * @param {Message<{}>} message Message instance\r\n * @param {IConversionOptions} [options] Conversion options\r\n * @returns {Object.<string,*>} Plain object\r\n */\r\nType.prototype.toObject = function toObject(message, options) {\r\n    return this.setup().toObject(message, options);\r\n};\r\n\r\n/**\r\n * Decorator function as returned by {@link Type.d} (TypeScript).\r\n * @typedef TypeDecorator\r\n * @type {function}\r\n * @param {Constructor<T>} target Target constructor\r\n * @returns {undefined}\r\n * @template T extends Message<T>\r\n */\r\n\r\n/**\r\n * Type decorator (TypeScript).\r\n * @param {string} [typeName] Type name, defaults to the constructor's name\r\n * @returns {TypeDecorator<T>} Decorator function\r\n * @template T extends Message<T>\r\n */\r\nType.d = function decorateType(typeName) {\r\n    return function typeDecorator(target) {\r\n        util.decorateType(target, typeName);\r\n    };\r\n};\r\n","\"use strict\";\r\n\r\n/**\r\n * Common type constants.\r\n * @namespace\r\n */\r\nvar types = exports;\r\n\r\nvar util = require(\"./util\");\r\n\r\nvar s = [\r\n    \"double\",   // 0\r\n    \"float\",    // 1\r\n    \"int32\",    // 2\r\n    \"uint32\",   // 3\r\n    \"sint32\",   // 4\r\n    \"fixed32\",  // 5\r\n    \"sfixed32\", // 6\r\n    \"int64\",    // 7\r\n    \"uint64\",   // 8\r\n    \"sint64\",   // 9\r\n    \"fixed64\",  // 10\r\n    \"sfixed64\", // 11\r\n    \"bool\",     // 12\r\n    \"string\",   // 13\r\n    \"bytes\"     // 14\r\n];\r\n\r\nfunction bake(values, offset) {\r\n    var i = 0, o = {};\r\n    offset |= 0;\r\n    while (i < values.length) o[s[i + offset]] = values[i++];\r\n    return o;\r\n}\r\n\r\n/**\r\n * Basic type wire types.\r\n * @type {Object.<string,number>}\r\n * @const\r\n * @property {number} double=1 Fixed64 wire type\r\n * @property {number} float=5 Fixed32 wire type\r\n * @property {number} int32=0 Varint wire type\r\n * @property {number} uint32=0 Varint wire type\r\n * @property {number} sint32=0 Varint wire type\r\n * @property {number} fixed32=5 Fixed32 wire type\r\n * @property {number} sfixed32=5 Fixed32 wire type\r\n * @property {number} int64=0 Varint wire type\r\n * @property {number} uint64=0 Varint wire type\r\n * @property {number} sint64=0 Varint wire type\r\n * @property {number} fixed64=1 Fixed64 wire type\r\n * @property {number} sfixed64=1 Fixed64 wire type\r\n * @property {number} bool=0 Varint wire type\r\n * @property {number} string=2 Ldelim wire type\r\n * @property {number} bytes=2 Ldelim wire type\r\n */\r\ntypes.basic = bake([\r\n    /* double   */ 1,\r\n    /* float    */ 5,\r\n    /* int32    */ 0,\r\n    /* uint32   */ 0,\r\n    /* sint32   */ 0,\r\n    /* fixed32  */ 5,\r\n    /* sfixed32 */ 5,\r\n    /* int64    */ 0,\r\n    /* uint64   */ 0,\r\n    /* sint64   */ 0,\r\n    /* fixed64  */ 1,\r\n    /* sfixed64 */ 1,\r\n    /* bool     */ 0,\r\n    /* string   */ 2,\r\n    /* bytes    */ 2\r\n]);\r\n\r\n/**\r\n * Basic type defaults.\r\n * @type {Object.<string,*>}\r\n * @const\r\n * @property {number} double=0 Double default\r\n * @property {number} float=0 Float default\r\n * @property {number} int32=0 Int32 default\r\n * @property {number} uint32=0 Uint32 default\r\n * @property {number} sint32=0 Sint32 default\r\n * @property {number} fixed32=0 Fixed32 default\r\n * @property {number} sfixed32=0 Sfixed32 default\r\n * @property {number} int64=0 Int64 default\r\n * @property {number} uint64=0 Uint64 default\r\n * @property {number} sint64=0 Sint32 default\r\n * @property {number} fixed64=0 Fixed64 default\r\n * @property {number} sfixed64=0 Sfixed64 default\r\n * @property {boolean} bool=false Bool default\r\n * @property {string} string=\"\" String default\r\n * @property {Array.<number>} bytes=Array(0) Bytes default\r\n * @property {null} message=null Message default\r\n */\r\ntypes.defaults = bake([\r\n    /* double   */ 0,\r\n    /* float    */ 0,\r\n    /* int32    */ 0,\r\n    /* uint32   */ 0,\r\n    /* sint32   */ 0,\r\n    /* fixed32  */ 0,\r\n    /* sfixed32 */ 0,\r\n    /* int64    */ 0,\r\n    /* uint64   */ 0,\r\n    /* sint64   */ 0,\r\n    /* fixed64  */ 0,\r\n    /* sfixed64 */ 0,\r\n    /* bool     */ false,\r\n    /* string   */ \"\",\r\n    /* bytes    */ util.emptyArray,\r\n    /* message  */ null\r\n]);\r\n\r\n/**\r\n * Basic long type wire types.\r\n * @type {Object.<string,number>}\r\n * @const\r\n * @property {number} int64=0 Varint wire type\r\n * @property {number} uint64=0 Varint wire type\r\n * @property {number} sint64=0 Varint wire type\r\n * @property {number} fixed64=1 Fixed64 wire type\r\n * @property {number} sfixed64=1 Fixed64 wire type\r\n */\r\ntypes.long = bake([\r\n    /* int64    */ 0,\r\n    /* uint64   */ 0,\r\n    /* sint64   */ 0,\r\n    /* fixed64  */ 1,\r\n    /* sfixed64 */ 1\r\n], 7);\r\n\r\n/**\r\n * Allowed types for map keys with their associated wire type.\r\n * @type {Object.<string,number>}\r\n * @const\r\n * @property {number} int32=0 Varint wire type\r\n * @property {number} uint32=0 Varint wire type\r\n * @property {number} sint32=0 Varint wire type\r\n * @property {number} fixed32=5 Fixed32 wire type\r\n * @property {number} sfixed32=5 Fixed32 wire type\r\n * @property {number} int64=0 Varint wire type\r\n * @property {number} uint64=0 Varint wire type\r\n * @property {number} sint64=0 Varint wire type\r\n * @property {number} fixed64=1 Fixed64 wire type\r\n * @property {number} sfixed64=1 Fixed64 wire type\r\n * @property {number} bool=0 Varint wire type\r\n * @property {number} string=2 Ldelim wire type\r\n */\r\ntypes.mapKey = bake([\r\n    /* int32    */ 0,\r\n    /* uint32   */ 0,\r\n    /* sint32   */ 0,\r\n    /* fixed32  */ 5,\r\n    /* sfixed32 */ 5,\r\n    /* int64    */ 0,\r\n    /* uint64   */ 0,\r\n    /* sint64   */ 0,\r\n    /* fixed64  */ 1,\r\n    /* sfixed64 */ 1,\r\n    /* bool     */ 0,\r\n    /* string   */ 2\r\n], 2);\r\n\r\n/**\r\n * Allowed types for packed repeated fields with their associated wire type.\r\n * @type {Object.<string,number>}\r\n * @const\r\n * @property {number} double=1 Fixed64 wire type\r\n * @property {number} float=5 Fixed32 wire type\r\n * @property {number} int32=0 Varint wire type\r\n * @property {number} uint32=0 Varint wire type\r\n * @property {number} sint32=0 Varint wire type\r\n * @property {number} fixed32=5 Fixed32 wire type\r\n * @property {number} sfixed32=5 Fixed32 wire type\r\n * @property {number} int64=0 Varint wire type\r\n * @property {number} uint64=0 Varint wire type\r\n * @property {number} sint64=0 Varint wire type\r\n * @property {number} fixed64=1 Fixed64 wire type\r\n * @property {number} sfixed64=1 Fixed64 wire type\r\n * @property {number} bool=0 Varint wire type\r\n */\r\ntypes.packed = bake([\r\n    /* double   */ 1,\r\n    /* float    */ 5,\r\n    /* int32    */ 0,\r\n    /* uint32   */ 0,\r\n    /* sint32   */ 0,\r\n    /* fixed32  */ 5,\r\n    /* sfixed32 */ 5,\r\n    /* int64    */ 0,\r\n    /* uint64   */ 0,\r\n    /* sint64   */ 0,\r\n    /* fixed64  */ 1,\r\n    /* sfixed64 */ 1,\r\n    /* bool     */ 0\r\n]);\r\n","\"use strict\";\r\n\r\n/**\r\n * Various utility functions.\r\n * @namespace\r\n */\r\nvar util = module.exports = require(\"./util/minimal\");\r\n\r\nvar roots = require(\"./roots\");\r\n\r\nvar Type, // cyclic\r\n    Enum;\r\n\r\nutil.codegen = require(\"@protobufjs/codegen\");\r\nutil.fetch   = require(\"@protobufjs/fetch\");\r\nutil.path    = require(\"@protobufjs/path\");\r\n\r\n/**\r\n * Node's fs module if available.\r\n * @type {Object.<string,*>}\r\n */\r\nutil.fs = util.inquire(\"fs\");\r\n\r\n/**\r\n * Converts an object's values to an array.\r\n * @param {Object.<string,*>} object Object to convert\r\n * @returns {Array.<*>} Converted array\r\n */\r\nutil.toArray = function toArray(object) {\r\n    if (object) {\r\n        var keys  = Object.keys(object),\r\n            array = new Array(keys.length),\r\n            index = 0;\r\n        while (index < keys.length)\r\n            array[index] = object[keys[index++]];\r\n        return array;\r\n    }\r\n    return [];\r\n};\r\n\r\n/**\r\n * Converts an array of keys immediately followed by their respective value to an object, omitting undefined values.\r\n * @param {Array.<*>} array Array to convert\r\n * @returns {Object.<string,*>} Converted object\r\n */\r\nutil.toObject = function toObject(array) {\r\n    var object = {},\r\n        index  = 0;\r\n    while (index < array.length) {\r\n        var key = array[index++],\r\n            val = array[index++];\r\n        if (val !== undefined)\r\n            object[key] = val;\r\n    }\r\n    return object;\r\n};\r\n\r\nvar safePropBackslashRe = /\\\\/g,\r\n    safePropQuoteRe     = /\"/g;\r\n\r\n/**\r\n * Tests whether the specified name is a reserved word in JS.\r\n * @param {string} name Name to test\r\n * @returns {boolean} `true` if reserved, otherwise `false`\r\n */\r\nutil.isReserved = function isReserved(name) {\r\n    return /^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(name);\r\n};\r\n\r\n/**\r\n * Returns a safe property accessor for the specified property name.\r\n * @param {string} prop Property name\r\n * @returns {string} Safe accessor\r\n */\r\nutil.safeProp = function safeProp(prop) {\r\n    if (!/^[$\\w_]+$/.test(prop) || util.isReserved(prop))\r\n        return \"[\\\"\" + prop.replace(safePropBackslashRe, \"\\\\\\\\\").replace(safePropQuoteRe, \"\\\\\\\"\") + \"\\\"]\";\r\n    return \".\" + prop;\r\n};\r\n\r\n/**\r\n * Converts the first character of a string to upper case.\r\n * @param {string} str String to convert\r\n * @returns {string} Converted string\r\n */\r\nutil.ucFirst = function ucFirst(str) {\r\n    return str.charAt(0).toUpperCase() + str.substring(1);\r\n};\r\n\r\nvar camelCaseRe = /_([a-z])/g;\r\n\r\n/**\r\n * Converts a string to camel case.\r\n * @param {string} str String to convert\r\n * @returns {string} Converted string\r\n */\r\nutil.camelCase = function camelCase(str) {\r\n    return str.substring(0, 1)\r\n         + str.substring(1)\r\n               .replace(camelCaseRe, function($0, $1) { return $1.toUpperCase(); });\r\n};\r\n\r\n/**\r\n * Compares reflected fields by id.\r\n * @param {Field} a First field\r\n * @param {Field} b Second field\r\n * @returns {number} Comparison value\r\n */\r\nutil.compareFieldsById = function compareFieldsById(a, b) {\r\n    return a.id - b.id;\r\n};\r\n\r\n/**\r\n * Decorator helper for types (TypeScript).\r\n * @param {Constructor<T>} ctor Constructor function\r\n * @param {string} [typeName] Type name, defaults to the constructor's name\r\n * @returns {Type} Reflected type\r\n * @template T extends Message<T>\r\n * @property {Root} root Decorators root\r\n */\r\nutil.decorateType = function decorateType(ctor, typeName) {\r\n\r\n    /* istanbul ignore if */\r\n    if (ctor.$type) {\r\n        if (typeName && ctor.$type.name !== typeName) {\r\n            util.decorateRoot.remove(ctor.$type);\r\n            ctor.$type.name = typeName;\r\n            util.decorateRoot.add(ctor.$type);\r\n        }\r\n        return ctor.$type;\r\n    }\r\n\r\n    /* istanbul ignore next */\r\n    if (!Type)\r\n        Type = require(\"./type\");\r\n\r\n    var type = new Type(typeName || ctor.name);\r\n    util.decorateRoot.add(type);\r\n    type.ctor = ctor; // sets up .encode, .decode etc.\r\n    Object.defineProperty(ctor, \"$type\", { value: type, enumerable: false });\r\n    Object.defineProperty(ctor.prototype, \"$type\", { value: type, enumerable: false });\r\n    return type;\r\n};\r\n\r\nvar decorateEnumIndex = 0;\r\n\r\n/**\r\n * Decorator helper for enums (TypeScript).\r\n * @param {Object} object Enum object\r\n * @returns {Enum} Reflected enum\r\n */\r\nutil.decorateEnum = function decorateEnum(object) {\r\n\r\n    /* istanbul ignore if */\r\n    if (object.$type)\r\n        return object.$type;\r\n\r\n    /* istanbul ignore next */\r\n    if (!Enum)\r\n        Enum = require(\"./enum\");\r\n\r\n    var enm = new Enum(\"Enum\" + decorateEnumIndex++, object);\r\n    util.decorateRoot.add(enm);\r\n    Object.defineProperty(object, \"$type\", { value: enm, enumerable: false });\r\n    return enm;\r\n};\r\n\r\n\r\n/**\r\n * Sets the value of a property by property path. If a value already exists, it is turned to an array\r\n * @param {Object.<string,*>} dst Destination object\r\n * @param {string} path dot '.' delimited path of the property to set\r\n * @param {Object} value the value to set\r\n * @returns {Object.<string,*>} Destination object\r\n */\r\nutil.setProperty = function setProperty(dst, path, value) {\r\n    function setProp(dst, path, value) {\r\n        var part = path.shift();\r\n        if (part === \"__proto__\" || part === \"prototype\") {\r\n          return dst;\r\n        }\r\n        if (path.length > 0) {\r\n            dst[part] = setProp(dst[part] || {}, path, value);\r\n        } else {\r\n            var prevValue = dst[part];\r\n            if (prevValue)\r\n                value = [].concat(prevValue).concat(value);\r\n            dst[part] = value;\r\n        }\r\n        return dst;\r\n    }\r\n\r\n    if (typeof dst !== \"object\")\r\n        throw TypeError(\"dst must be an object\");\r\n    if (!path)\r\n        throw TypeError(\"path must be specified\");\r\n\r\n    path = path.split(\".\");\r\n    return setProp(dst, path, value);\r\n};\r\n\r\n/**\r\n * Decorator root (TypeScript).\r\n * @name util.decorateRoot\r\n * @type {Root}\r\n * @readonly\r\n */\r\nObject.defineProperty(util, \"decorateRoot\", {\r\n    get: function() {\r\n        return roots[\"decorated\"] || (roots[\"decorated\"] = new (require(\"./root\"))());\r\n    }\r\n});\r\n","\"use strict\";\r\nmodule.exports = LongBits;\r\n\r\nvar util = require(\"../util/minimal\");\r\n\r\n/**\r\n * Constructs new long bits.\r\n * @classdesc Helper class for working with the low and high bits of a 64 bit value.\r\n * @memberof util\r\n * @constructor\r\n * @param {number} lo Low 32 bits, unsigned\r\n * @param {number} hi High 32 bits, unsigned\r\n */\r\nfunction LongBits(lo, hi) {\r\n\r\n    // note that the casts below are theoretically unnecessary as of today, but older statically\r\n    // generated converter code might still call the ctor with signed 32bits. kept for compat.\r\n\r\n    /**\r\n     * Low bits.\r\n     * @type {number}\r\n     */\r\n    this.lo = lo >>> 0;\r\n\r\n    /**\r\n     * High bits.\r\n     * @type {number}\r\n     */\r\n    this.hi = hi >>> 0;\r\n}\r\n\r\n/**\r\n * Zero bits.\r\n * @memberof util.LongBits\r\n * @type {util.LongBits}\r\n */\r\nvar zero = LongBits.zero = new LongBits(0, 0);\r\n\r\nzero.toNumber = function() { return 0; };\r\nzero.zzEncode = zero.zzDecode = function() { return this; };\r\nzero.length = function() { return 1; };\r\n\r\n/**\r\n * Zero hash.\r\n * @memberof util.LongBits\r\n * @type {string}\r\n */\r\nvar zeroHash = LongBits.zeroHash = \"\\0\\0\\0\\0\\0\\0\\0\\0\";\r\n\r\n/**\r\n * Constructs new long bits from the specified number.\r\n * @param {number} value Value\r\n * @returns {util.LongBits} Instance\r\n */\r\nLongBits.fromNumber = function fromNumber(value) {\r\n    if (value === 0)\r\n        return zero;\r\n    var sign = value < 0;\r\n    if (sign)\r\n        value = -value;\r\n    var lo = value >>> 0,\r\n        hi = (value - lo) / 4294967296 >>> 0;\r\n    if (sign) {\r\n        hi = ~hi >>> 0;\r\n        lo = ~lo >>> 0;\r\n        if (++lo > 4294967295) {\r\n            lo = 0;\r\n            if (++hi > 4294967295)\r\n                hi = 0;\r\n        }\r\n    }\r\n    return new LongBits(lo, hi);\r\n};\r\n\r\n/**\r\n * Constructs new long bits from a number, long or string.\r\n * @param {Long|number|string} value Value\r\n * @returns {util.LongBits} Instance\r\n */\r\nLongBits.from = function from(value) {\r\n    if (typeof value === \"number\")\r\n        return LongBits.fromNumber(value);\r\n    if (util.isString(value)) {\r\n        /* istanbul ignore else */\r\n        if (util.Long)\r\n            value = util.Long.fromString(value);\r\n        else\r\n            return LongBits.fromNumber(parseInt(value, 10));\r\n    }\r\n    return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;\r\n};\r\n\r\n/**\r\n * Converts this long bits to a possibly unsafe JavaScript number.\r\n * @param {boolean} [unsigned=false] Whether unsigned or not\r\n * @returns {number} Possibly unsafe number\r\n */\r\nLongBits.prototype.toNumber = function toNumber(unsigned) {\r\n    if (!unsigned && this.hi >>> 31) {\r\n        var lo = ~this.lo + 1 >>> 0,\r\n            hi = ~this.hi     >>> 0;\r\n        if (!lo)\r\n            hi = hi + 1 >>> 0;\r\n        return -(lo + hi * 4294967296);\r\n    }\r\n    return this.lo + this.hi * 4294967296;\r\n};\r\n\r\n/**\r\n * Converts this long bits to a long.\r\n * @param {boolean} [unsigned=false] Whether unsigned or not\r\n * @returns {Long} Long\r\n */\r\nLongBits.prototype.toLong = function toLong(unsigned) {\r\n    return util.Long\r\n        ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned))\r\n        /* istanbul ignore next */\r\n        : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };\r\n};\r\n\r\nvar charCodeAt = String.prototype.charCodeAt;\r\n\r\n/**\r\n * Constructs new long bits from the specified 8 characters long hash.\r\n * @param {string} hash Hash\r\n * @returns {util.LongBits} Bits\r\n */\r\nLongBits.fromHash = function fromHash(hash) {\r\n    if (hash === zeroHash)\r\n        return zero;\r\n    return new LongBits(\r\n        ( charCodeAt.call(hash, 0)\r\n        | charCodeAt.call(hash, 1) << 8\r\n        | charCodeAt.call(hash, 2) << 16\r\n        | charCodeAt.call(hash, 3) << 24) >>> 0\r\n    ,\r\n        ( charCodeAt.call(hash, 4)\r\n        | charCodeAt.call(hash, 5) << 8\r\n        | charCodeAt.call(hash, 6) << 16\r\n        | charCodeAt.call(hash, 7) << 24) >>> 0\r\n    );\r\n};\r\n\r\n/**\r\n * Converts this long bits to a 8 characters long hash.\r\n * @returns {string} Hash\r\n */\r\nLongBits.prototype.toHash = function toHash() {\r\n    return String.fromCharCode(\r\n        this.lo        & 255,\r\n        this.lo >>> 8  & 255,\r\n        this.lo >>> 16 & 255,\r\n        this.lo >>> 24      ,\r\n        this.hi        & 255,\r\n        this.hi >>> 8  & 255,\r\n        this.hi >>> 16 & 255,\r\n        this.hi >>> 24\r\n    );\r\n};\r\n\r\n/**\r\n * Zig-zag encodes this long bits.\r\n * @returns {util.LongBits} `this`\r\n */\r\nLongBits.prototype.zzEncode = function zzEncode() {\r\n    var mask =   this.hi >> 31;\r\n    this.hi  = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;\r\n    this.lo  = ( this.lo << 1                   ^ mask) >>> 0;\r\n    return this;\r\n};\r\n\r\n/**\r\n * Zig-zag decodes this long bits.\r\n * @returns {util.LongBits} `this`\r\n */\r\nLongBits.prototype.zzDecode = function zzDecode() {\r\n    var mask = -(this.lo & 1);\r\n    this.lo  = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;\r\n    this.hi  = ( this.hi >>> 1                  ^ mask) >>> 0;\r\n    return this;\r\n};\r\n\r\n/**\r\n * Calculates the length of this longbits when encoded as a varint.\r\n * @returns {number} Length\r\n */\r\nLongBits.prototype.length = function length() {\r\n    var part0 =  this.lo,\r\n        part1 = (this.lo >>> 28 | this.hi << 4) >>> 0,\r\n        part2 =  this.hi >>> 24;\r\n    return part2 === 0\r\n         ? part1 === 0\r\n           ? part0 < 16384\r\n             ? part0 < 128 ? 1 : 2\r\n             : part0 < 2097152 ? 3 : 4\r\n           : part1 < 16384\r\n             ? part1 < 128 ? 5 : 6\r\n             : part1 < 2097152 ? 7 : 8\r\n         : part2 < 128 ? 9 : 10;\r\n};\r\n","\"use strict\";\r\nvar util = exports;\r\n\r\n// used to return a Promise where callback is omitted\r\nutil.asPromise = require(\"@protobufjs/aspromise\");\r\n\r\n// converts to / from base64 encoded strings\r\nutil.base64 = require(\"@protobufjs/base64\");\r\n\r\n// base class of rpc.Service\r\nutil.EventEmitter = require(\"@protobufjs/eventemitter\");\r\n\r\n// float handling accross browsers\r\nutil.float = require(\"@protobufjs/float\");\r\n\r\n// requires modules optionally and hides the call from bundlers\r\nutil.inquire = require(\"@protobufjs/inquire\");\r\n\r\n// converts to / from utf8 encoded strings\r\nutil.utf8 = require(\"@protobufjs/utf8\");\r\n\r\n// provides a node-like buffer pool in the browser\r\nutil.pool = require(\"@protobufjs/pool\");\r\n\r\n// utility to work with the low and high bits of a 64 bit value\r\nutil.LongBits = require(\"./longbits\");\r\n\r\n/**\r\n * Whether running within node or not.\r\n * @memberof util\r\n * @type {boolean}\r\n */\r\nutil.isNode = Boolean(typeof global !== \"undefined\"\r\n                   && global\r\n                   && global.process\r\n                   && global.process.versions\r\n                   && global.process.versions.node);\r\n\r\n/**\r\n * Global object reference.\r\n * @memberof util\r\n * @type {Object}\r\n */\r\nutil.global = util.isNode && global\r\n           || typeof window !== \"undefined\" && window\r\n           || typeof self   !== \"undefined\" && self\r\n           || this; // eslint-disable-line no-invalid-this\r\n\r\n/**\r\n * An immuable empty array.\r\n * @memberof util\r\n * @type {Array.<*>}\r\n * @const\r\n */\r\nutil.emptyArray = Object.freeze ? Object.freeze([]) : /* istanbul ignore next */ []; // used on prototypes\r\n\r\n/**\r\n * An immutable empty object.\r\n * @type {Object}\r\n * @const\r\n */\r\nutil.emptyObject = Object.freeze ? Object.freeze({}) : /* istanbul ignore next */ {}; // used on prototypes\r\n\r\n/**\r\n * Tests if the specified value is an integer.\r\n * @function\r\n * @param {*} value Value to test\r\n * @returns {boolean} `true` if the value is an integer\r\n */\r\nutil.isInteger = Number.isInteger || /* istanbul ignore next */ function isInteger(value) {\r\n    return typeof value === \"number\" && isFinite(value) && Math.floor(value) === value;\r\n};\r\n\r\n/**\r\n * Tests if the specified value is a string.\r\n * @param {*} value Value to test\r\n * @returns {boolean} `true` if the value is a string\r\n */\r\nutil.isString = function isString(value) {\r\n    return typeof value === \"string\" || value instanceof String;\r\n};\r\n\r\n/**\r\n * Tests if the specified value is a non-null object.\r\n * @param {*} value Value to test\r\n * @returns {boolean} `true` if the value is a non-null object\r\n */\r\nutil.isObject = function isObject(value) {\r\n    return value && typeof value === \"object\";\r\n};\r\n\r\n/**\r\n * Checks if a property on a message is considered to be present.\r\n * This is an alias of {@link util.isSet}.\r\n * @function\r\n * @param {Object} obj Plain object or message instance\r\n * @param {string} prop Property name\r\n * @returns {boolean} `true` if considered to be present, otherwise `false`\r\n */\r\nutil.isset =\r\n\r\n/**\r\n * Checks if a property on a message is considered to be present.\r\n * @param {Object} obj Plain object or message instance\r\n * @param {string} prop Property name\r\n * @returns {boolean} `true` if considered to be present, otherwise `false`\r\n */\r\nutil.isSet = function isSet(obj, prop) {\r\n    var value = obj[prop];\r\n    if (value != null && obj.hasOwnProperty(prop)) // eslint-disable-line eqeqeq, no-prototype-builtins\r\n        return typeof value !== \"object\" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;\r\n    return false;\r\n};\r\n\r\n/**\r\n * Any compatible Buffer instance.\r\n * This is a minimal stand-alone definition of a Buffer instance. The actual type is that exported by node's typings.\r\n * @interface Buffer\r\n * @extends Uint8Array\r\n */\r\n\r\n/**\r\n * Node's Buffer class if available.\r\n * @type {Constructor<Buffer>}\r\n */\r\nutil.Buffer = (function() {\r\n    try {\r\n        var Buffer = util.inquire(\"buffer\").Buffer;\r\n        // refuse to use non-node buffers if not explicitly assigned (perf reasons):\r\n        return Buffer.prototype.utf8Write ? Buffer : /* istanbul ignore next */ null;\r\n    } catch (e) {\r\n        /* istanbul ignore next */\r\n        return null;\r\n    }\r\n})();\r\n\r\n// Internal alias of or polyfull for Buffer.from.\r\nutil._Buffer_from = null;\r\n\r\n// Internal alias of or polyfill for Buffer.allocUnsafe.\r\nutil._Buffer_allocUnsafe = null;\r\n\r\n/**\r\n * Creates a new buffer of whatever type supported by the environment.\r\n * @param {number|number[]} [sizeOrArray=0] Buffer size or number array\r\n * @returns {Uint8Array|Buffer} Buffer\r\n */\r\nutil.newBuffer = function newBuffer(sizeOrArray) {\r\n    /* istanbul ignore next */\r\n    return typeof sizeOrArray === \"number\"\r\n        ? util.Buffer\r\n            ? util._Buffer_allocUnsafe(sizeOrArray)\r\n            : new util.Array(sizeOrArray)\r\n        : util.Buffer\r\n            ? util._Buffer_from(sizeOrArray)\r\n            : typeof Uint8Array === \"undefined\"\r\n                ? sizeOrArray\r\n                : new Uint8Array(sizeOrArray);\r\n};\r\n\r\n/**\r\n * Array implementation used in the browser. `Uint8Array` if supported, otherwise `Array`.\r\n * @type {Constructor<Uint8Array>}\r\n */\r\nutil.Array = typeof Uint8Array !== \"undefined\" ? Uint8Array /* istanbul ignore next */ : Array;\r\n\r\n/**\r\n * Any compatible Long instance.\r\n * This is a minimal stand-alone definition of a Long instance. The actual type is that exported by long.js.\r\n * @interface Long\r\n * @property {number} low Low bits\r\n * @property {number} high High bits\r\n * @property {boolean} unsigned Whether unsigned or not\r\n */\r\n\r\n/**\r\n * Long.js's Long class if available.\r\n * @type {Constructor<Long>}\r\n */\r\nutil.Long = /* istanbul ignore next */ util.global.dcodeIO && /* istanbul ignore next */ util.global.dcodeIO.Long\r\n         || /* istanbul ignore next */ util.global.Long\r\n         || util.inquire(\"long\");\r\n\r\n/**\r\n * Regular expression used to verify 2 bit (`bool`) map keys.\r\n * @type {RegExp}\r\n * @const\r\n */\r\nutil.key2Re = /^true|false|0|1$/;\r\n\r\n/**\r\n * Regular expression used to verify 32 bit (`int32` etc.) map keys.\r\n * @type {RegExp}\r\n * @const\r\n */\r\nutil.key32Re = /^-?(?:0|[1-9][0-9]*)$/;\r\n\r\n/**\r\n * Regular expression used to verify 64 bit (`int64` etc.) map keys.\r\n * @type {RegExp}\r\n * @const\r\n */\r\nutil.key64Re = /^(?:[\\\\x00-\\\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;\r\n\r\n/**\r\n * Converts a number or long to an 8 characters long hash string.\r\n * @param {Long|number} value Value to convert\r\n * @returns {string} Hash\r\n */\r\nutil.longToHash = function longToHash(value) {\r\n    return value\r\n        ? util.LongBits.from(value).toHash()\r\n        : util.LongBits.zeroHash;\r\n};\r\n\r\n/**\r\n * Converts an 8 characters long hash string to a long or number.\r\n * @param {string} hash Hash\r\n * @param {boolean} [unsigned=false] Whether unsigned or not\r\n * @returns {Long|number} Original value\r\n */\r\nutil.longFromHash = function longFromHash(hash, unsigned) {\r\n    var bits = util.LongBits.fromHash(hash);\r\n    if (util.Long)\r\n        return util.Long.fromBits(bits.lo, bits.hi, unsigned);\r\n    return bits.toNumber(Boolean(unsigned));\r\n};\r\n\r\n/**\r\n * Merges the properties of the source object into the destination object.\r\n * @memberof util\r\n * @param {Object.<string,*>} dst Destination object\r\n * @param {Object.<string,*>} src Source object\r\n * @param {boolean} [ifNotSet=false] Merges only if the key is not already set\r\n * @returns {Object.<string,*>} Destination object\r\n */\r\nfunction merge(dst, src, ifNotSet) { // used by converters\r\n    for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)\r\n        if (dst[keys[i]] === undefined || !ifNotSet)\r\n            dst[keys[i]] = src[keys[i]];\r\n    return dst;\r\n}\r\n\r\nutil.merge = merge;\r\n\r\n/**\r\n * Converts the first character of a string to lower case.\r\n * @param {string} str String to convert\r\n * @returns {string} Converted string\r\n */\r\nutil.lcFirst = function lcFirst(str) {\r\n    return str.charAt(0).toLowerCase() + str.substring(1);\r\n};\r\n\r\n/**\r\n * Creates a custom error constructor.\r\n * @memberof util\r\n * @param {string} name Error name\r\n * @returns {Constructor<Error>} Custom error constructor\r\n */\r\nfunction newError(name) {\r\n\r\n    function CustomError(message, properties) {\r\n\r\n        if (!(this instanceof CustomError))\r\n            return new CustomError(message, properties);\r\n\r\n        // Error.call(this, message);\r\n        // ^ just returns a new error instance because the ctor can be called as a function\r\n\r\n        Object.defineProperty(this, \"message\", { get: function() { return message; } });\r\n\r\n        /* istanbul ignore next */\r\n        if (Error.captureStackTrace) // node\r\n            Error.captureStackTrace(this, CustomError);\r\n        else\r\n            Object.defineProperty(this, \"stack\", { value: new Error().stack || \"\" });\r\n\r\n        if (properties)\r\n            merge(this, properties);\r\n    }\r\n\r\n    CustomError.prototype = Object.create(Error.prototype, {\r\n        constructor: {\r\n            value: CustomError,\r\n            writable: true,\r\n            enumerable: false,\r\n            configurable: true,\r\n        },\r\n        name: {\r\n            get: function get() { return name; },\r\n            set: undefined,\r\n            enumerable: false,\r\n            // configurable: false would accurately preserve the behavior of\r\n            // the original, but I'm guessing that was not intentional.\r\n            // For an actual error subclass, this property would\r\n            // be configurable.\r\n            configurable: true,\r\n        },\r\n        toString: {\r\n            value: function value() { return this.name + \": \" + this.message; },\r\n            writable: true,\r\n            enumerable: false,\r\n            configurable: true,\r\n        },\r\n    });\r\n\r\n    return CustomError;\r\n}\r\n\r\nutil.newError = newError;\r\n\r\n/**\r\n * Constructs a new protocol error.\r\n * @classdesc Error subclass indicating a protocol specifc error.\r\n * @memberof util\r\n * @extends Error\r\n * @template T extends Message<T>\r\n * @constructor\r\n * @param {string} message Error message\r\n * @param {Object.<string,*>} [properties] Additional properties\r\n * @example\r\n * try {\r\n *     MyMessage.decode(someBuffer); // throws if required fields are missing\r\n * } catch (e) {\r\n *     if (e instanceof ProtocolError && e.instance)\r\n *         console.log(\"decoded so far: \" + JSON.stringify(e.instance));\r\n * }\r\n */\r\nutil.ProtocolError = newError(\"ProtocolError\");\r\n\r\n/**\r\n * So far decoded message instance.\r\n * @name util.ProtocolError#instance\r\n * @type {Message<T>}\r\n */\r\n\r\n/**\r\n * A OneOf getter as returned by {@link util.oneOfGetter}.\r\n * @typedef OneOfGetter\r\n * @type {function}\r\n * @returns {string|undefined} Set field name, if any\r\n */\r\n\r\n/**\r\n * Builds a getter for a oneof's present field name.\r\n * @param {string[]} fieldNames Field names\r\n * @returns {OneOfGetter} Unbound getter\r\n */\r\nutil.oneOfGetter = function getOneOf(fieldNames) {\r\n    var fieldMap = {};\r\n    for (var i = 0; i < fieldNames.length; ++i)\r\n        fieldMap[fieldNames[i]] = 1;\r\n\r\n    /**\r\n     * @returns {string|undefined} Set field name, if any\r\n     * @this Object\r\n     * @ignore\r\n     */\r\n    return function() { // eslint-disable-line consistent-return\r\n        for (var keys = Object.keys(this), i = keys.length - 1; i > -1; --i)\r\n            if (fieldMap[keys[i]] === 1 && this[keys[i]] !== undefined && this[keys[i]] !== null)\r\n                return keys[i];\r\n    };\r\n};\r\n\r\n/**\r\n * A OneOf setter as returned by {@link util.oneOfSetter}.\r\n * @typedef OneOfSetter\r\n * @type {function}\r\n * @param {string|undefined} value Field name\r\n * @returns {undefined}\r\n */\r\n\r\n/**\r\n * Builds a setter for a oneof's present field name.\r\n * @param {string[]} fieldNames Field names\r\n * @returns {OneOfSetter} Unbound setter\r\n */\r\nutil.oneOfSetter = function setOneOf(fieldNames) {\r\n\r\n    /**\r\n     * @param {string} name Field name\r\n     * @returns {undefined}\r\n     * @this Object\r\n     * @ignore\r\n     */\r\n    return function(name) {\r\n        for (var i = 0; i < fieldNames.length; ++i)\r\n            if (fieldNames[i] !== name)\r\n                delete this[fieldNames[i]];\r\n    };\r\n};\r\n\r\n/**\r\n * Default conversion options used for {@link Message#toJSON} implementations.\r\n *\r\n * These options are close to proto3's JSON mapping with the exception that internal types like Any are handled just like messages. More precisely:\r\n *\r\n * - Longs become strings\r\n * - Enums become string keys\r\n * - Bytes become base64 encoded strings\r\n * - (Sub-)Messages become plain objects\r\n * - Maps become plain objects with all string keys\r\n * - Repeated fields become arrays\r\n * - NaN and Infinity for float and double fields become strings\r\n *\r\n * @type {IConversionOptions}\r\n * @see https://developers.google.com/protocol-buffers/docs/proto3?hl=en#json\r\n */\r\nutil.toJSONOptions = {\r\n    longs: String,\r\n    enums: String,\r\n    bytes: String,\r\n    json: true\r\n};\r\n\r\n// Sets up buffer utility according to the environment (called in index-minimal)\r\nutil._configure = function() {\r\n    var Buffer = util.Buffer;\r\n    /* istanbul ignore if */\r\n    if (!Buffer) {\r\n        util._Buffer_from = util._Buffer_allocUnsafe = null;\r\n        return;\r\n    }\r\n    // because node 4.x buffers are incompatible & immutable\r\n    // see: https://github.com/dcodeIO/protobuf.js/pull/665\r\n    util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from ||\r\n        /* istanbul ignore next */\r\n        function Buffer_from(value, encoding) {\r\n            return new Buffer(value, encoding);\r\n        };\r\n    util._Buffer_allocUnsafe = Buffer.allocUnsafe ||\r\n        /* istanbul ignore next */\r\n        function Buffer_allocUnsafe(size) {\r\n            return new Buffer(size);\r\n        };\r\n};\r\n","\"use strict\";\r\nmodule.exports = verifier;\r\n\r\nvar Enum      = require(\"./enum\"),\r\n    util      = require(\"./util\");\r\n\r\nfunction invalid(field, expected) {\r\n    return field.name + \": \" + expected + (field.repeated && expected !== \"array\" ? \"[]\" : field.map && expected !== \"object\" ? \"{k:\"+field.keyType+\"}\" : \"\") + \" expected\";\r\n}\r\n\r\n/**\r\n * Generates a partial value verifier.\r\n * @param {Codegen} gen Codegen instance\r\n * @param {Field} field Reflected field\r\n * @param {number} fieldIndex Field index\r\n * @param {string} ref Variable reference\r\n * @returns {Codegen} Codegen instance\r\n * @ignore\r\n */\r\nfunction genVerifyValue(gen, field, fieldIndex, ref) {\r\n    /* eslint-disable no-unexpected-multiline */\r\n    if (field.resolvedType) {\r\n        if (field.resolvedType instanceof Enum) { gen\r\n            (\"switch(%s){\", ref)\r\n                (\"default:\")\r\n                    (\"return%j\", invalid(field, \"enum value\"));\r\n            for (var keys = Object.keys(field.resolvedType.values), j = 0; j < keys.length; ++j) gen\r\n                (\"case %i:\", field.resolvedType.values[keys[j]]);\r\n            gen\r\n                    (\"break\")\r\n            (\"}\");\r\n        } else {\r\n            gen\r\n            (\"{\")\r\n                (\"var e=types[%i].verify(%s);\", fieldIndex, ref)\r\n                (\"if(e)\")\r\n                    (\"return%j+e\", field.name + \".\")\r\n            (\"}\");\r\n        }\r\n    } else {\r\n        switch (field.type) {\r\n            case \"int32\":\r\n            case \"uint32\":\r\n            case \"sint32\":\r\n            case \"fixed32\":\r\n            case \"sfixed32\": gen\r\n                (\"if(!util.isInteger(%s))\", ref)\r\n                    (\"return%j\", invalid(field, \"integer\"));\r\n                break;\r\n            case \"int64\":\r\n            case \"uint64\":\r\n            case \"sint64\":\r\n            case \"fixed64\":\r\n            case \"sfixed64\": gen\r\n                (\"if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))\", ref, ref, ref, ref)\r\n                    (\"return%j\", invalid(field, \"integer|Long\"));\r\n                break;\r\n            case \"float\":\r\n            case \"double\": gen\r\n                (\"if(typeof %s!==\\\"number\\\")\", ref)\r\n                    (\"return%j\", invalid(field, \"number\"));\r\n                break;\r\n            case \"bool\": gen\r\n                (\"if(typeof %s!==\\\"boolean\\\")\", ref)\r\n                    (\"return%j\", invalid(field, \"boolean\"));\r\n                break;\r\n            case \"string\": gen\r\n                (\"if(!util.isString(%s))\", ref)\r\n                    (\"return%j\", invalid(field, \"string\"));\r\n                break;\r\n            case \"bytes\": gen\r\n                (\"if(!(%s&&typeof %s.length===\\\"number\\\"||util.isString(%s)))\", ref, ref, ref)\r\n                    (\"return%j\", invalid(field, \"buffer\"));\r\n                break;\r\n        }\r\n    }\r\n    return gen;\r\n    /* eslint-enable no-unexpected-multiline */\r\n}\r\n\r\n/**\r\n * Generates a partial key verifier.\r\n * @param {Codegen} gen Codegen instance\r\n * @param {Field} field Reflected field\r\n * @param {string} ref Variable reference\r\n * @returns {Codegen} Codegen instance\r\n * @ignore\r\n */\r\nfunction genVerifyKey(gen, field, ref) {\r\n    /* eslint-disable no-unexpected-multiline */\r\n    switch (field.keyType) {\r\n        case \"int32\":\r\n        case \"uint32\":\r\n        case \"sint32\":\r\n        case \"fixed32\":\r\n        case \"sfixed32\": gen\r\n            (\"if(!util.key32Re.test(%s))\", ref)\r\n                (\"return%j\", invalid(field, \"integer key\"));\r\n            break;\r\n        case \"int64\":\r\n        case \"uint64\":\r\n        case \"sint64\":\r\n        case \"fixed64\":\r\n        case \"sfixed64\": gen\r\n            (\"if(!util.key64Re.test(%s))\", ref) // see comment above: x is ok, d is not\r\n                (\"return%j\", invalid(field, \"integer|Long key\"));\r\n            break;\r\n        case \"bool\": gen\r\n            (\"if(!util.key2Re.test(%s))\", ref)\r\n                (\"return%j\", invalid(field, \"boolean key\"));\r\n            break;\r\n    }\r\n    return gen;\r\n    /* eslint-enable no-unexpected-multiline */\r\n}\r\n\r\n/**\r\n * Generates a verifier specific to the specified message type.\r\n * @param {Type} mtype Message type\r\n * @returns {Codegen} Codegen instance\r\n */\r\nfunction verifier(mtype) {\r\n    /* eslint-disable no-unexpected-multiline */\r\n\r\n    var gen = util.codegen([\"m\"], mtype.name + \"$verify\")\r\n    (\"if(typeof m!==\\\"object\\\"||m===null)\")\r\n        (\"return%j\", \"object expected\");\r\n    var oneofs = mtype.oneofsArray,\r\n        seenFirstField = {};\r\n    if (oneofs.length) gen\r\n    (\"var p={}\");\r\n\r\n    for (var i = 0; i < /* initializes */ mtype.fieldsArray.length; ++i) {\r\n        var field = mtype._fieldsArray[i].resolve(),\r\n            ref   = \"m\" + util.safeProp(field.name);\r\n\r\n        if (field.optional) gen\r\n        (\"if(%s!=null&&m.hasOwnProperty(%j)){\", ref, field.name); // !== undefined && !== null\r\n\r\n        // map fields\r\n        if (field.map) { gen\r\n            (\"if(!util.isObject(%s))\", ref)\r\n                (\"return%j\", invalid(field, \"object\"))\r\n            (\"var k=Object.keys(%s)\", ref)\r\n            (\"for(var i=0;i<k.length;++i){\");\r\n                genVerifyKey(gen, field, \"k[i]\");\r\n                genVerifyValue(gen, field, i, ref + \"[k[i]]\")\r\n            (\"}\");\r\n\r\n        // repeated fields\r\n        } else if (field.repeated) { gen\r\n            (\"if(!Array.isArray(%s))\", ref)\r\n                (\"return%j\", invalid(field, \"array\"))\r\n            (\"for(var i=0;i<%s.length;++i){\", ref);\r\n                genVerifyValue(gen, field, i, ref + \"[i]\")\r\n            (\"}\");\r\n\r\n        // required or present fields\r\n        } else {\r\n            if (field.partOf) {\r\n                var oneofProp = util.safeProp(field.partOf.name);\r\n                if (seenFirstField[field.partOf.name] === 1) gen\r\n            (\"if(p%s===1)\", oneofProp)\r\n                (\"return%j\", field.partOf.name + \": multiple values\");\r\n                seenFirstField[field.partOf.name] = 1;\r\n                gen\r\n            (\"p%s=1\", oneofProp);\r\n            }\r\n            genVerifyValue(gen, field, i, ref);\r\n        }\r\n        if (field.optional) gen\r\n        (\"}\");\r\n    }\r\n    return gen\r\n    (\"return null\");\r\n    /* eslint-enable no-unexpected-multiline */\r\n}","\"use strict\";\r\n\r\n/**\r\n * Wrappers for common types.\r\n * @type {Object.<string,IWrapper>}\r\n * @const\r\n */\r\nvar wrappers = exports;\r\n\r\nvar Message = require(\"./message\");\r\n\r\n/**\r\n * From object converter part of an {@link IWrapper}.\r\n * @typedef WrapperFromObjectConverter\r\n * @type {function}\r\n * @param {Object.<string,*>} object Plain object\r\n * @returns {Message<{}>} Message instance\r\n * @this Type\r\n */\r\n\r\n/**\r\n * To object converter part of an {@link IWrapper}.\r\n * @typedef WrapperToObjectConverter\r\n * @type {function}\r\n * @param {Message<{}>} message Message instance\r\n * @param {IConversionOptions} [options] Conversion options\r\n * @returns {Object.<string,*>} Plain object\r\n * @this Type\r\n */\r\n\r\n/**\r\n * Common type wrapper part of {@link wrappers}.\r\n * @interface IWrapper\r\n * @property {WrapperFromObjectConverter} [fromObject] From object converter\r\n * @property {WrapperToObjectConverter} [toObject] To object converter\r\n */\r\n\r\n// Custom wrapper for Any\r\nwrappers[\".google.protobuf.Any\"] = {\r\n\r\n    fromObject: function(object) {\r\n\r\n        // unwrap value type if mapped\r\n        if (object && object[\"@type\"]) {\r\n             // Only use fully qualified type name after the last '/'\r\n            var name = object[\"@type\"].substring(object[\"@type\"].lastIndexOf(\"/\") + 1);\r\n            var type = this.lookup(name);\r\n            /* istanbul ignore else */\r\n            if (type) {\r\n                // type_url does not accept leading \".\"\r\n                var type_url = object[\"@type\"].charAt(0) === \".\" ?\r\n                    object[\"@type\"].slice(1) : object[\"@type\"];\r\n                // type_url prefix is optional, but path seperator is required\r\n                if (type_url.indexOf(\"/\") === -1) {\r\n                    type_url = \"/\" + type_url;\r\n                }\r\n                return this.create({\r\n                    type_url: type_url,\r\n                    value: type.encode(type.fromObject(object)).finish()\r\n                });\r\n            }\r\n        }\r\n\r\n        return this.fromObject(object);\r\n    },\r\n\r\n    toObject: function(message, options) {\r\n\r\n        // Default prefix\r\n        var googleApi = \"type.googleapis.com/\";\r\n        var prefix = \"\";\r\n        var name = \"\";\r\n\r\n        // decode value if requested and unmapped\r\n        if (options && options.json && message.type_url && message.value) {\r\n            // Only use fully qualified type name after the last '/'\r\n            name = message.type_url.substring(message.type_url.lastIndexOf(\"/\") + 1);\r\n            // Separate the prefix used\r\n            prefix = message.type_url.substring(0, message.type_url.lastIndexOf(\"/\") + 1);\r\n            var type = this.lookup(name);\r\n            /* istanbul ignore else */\r\n            if (type)\r\n                message = type.decode(message.value);\r\n        }\r\n\r\n        // wrap value if unmapped\r\n        if (!(message instanceof this.ctor) && message instanceof Message) {\r\n            var object = message.$type.toObject(message, options);\r\n            var messageName = message.$type.fullName[0] === \".\" ?\r\n                message.$type.fullName.slice(1) : message.$type.fullName;\r\n            // Default to type.googleapis.com prefix if no prefix is used\r\n            if (prefix === \"\") {\r\n                prefix = googleApi;\r\n            }\r\n            name = prefix + messageName;\r\n            object[\"@type\"] = name;\r\n            return object;\r\n        }\r\n\r\n        return this.toObject(message, options);\r\n    }\r\n};\r\n","\"use strict\";\r\nmodule.exports = Writer;\r\n\r\nvar util      = require(\"./util/minimal\");\r\n\r\nvar BufferWriter; // cyclic\r\n\r\nvar LongBits  = util.LongBits,\r\n    base64    = util.base64,\r\n    utf8      = util.utf8;\r\n\r\n/**\r\n * Constructs a new writer operation instance.\r\n * @classdesc Scheduled writer operation.\r\n * @constructor\r\n * @param {function(*, Uint8Array, number)} fn Function to call\r\n * @param {number} len Value byte length\r\n * @param {*} val Value to write\r\n * @ignore\r\n */\r\nfunction Op(fn, len, val) {\r\n\r\n    /**\r\n     * Function to call.\r\n     * @type {function(Uint8Array, number, *)}\r\n     */\r\n    this.fn = fn;\r\n\r\n    /**\r\n     * Value byte length.\r\n     * @type {number}\r\n     */\r\n    this.len = len;\r\n\r\n    /**\r\n     * Next operation.\r\n     * @type {Writer.Op|undefined}\r\n     */\r\n    this.next = undefined;\r\n\r\n    /**\r\n     * Value to write.\r\n     * @type {*}\r\n     */\r\n    this.val = val; // type varies\r\n}\r\n\r\n/* istanbul ignore next */\r\nfunction noop() {} // eslint-disable-line no-empty-function\r\n\r\n/**\r\n * Constructs a new writer state instance.\r\n * @classdesc Copied writer state.\r\n * @memberof Writer\r\n * @constructor\r\n * @param {Writer} writer Writer to copy state from\r\n * @ignore\r\n */\r\nfunction State(writer) {\r\n\r\n    /**\r\n     * Current head.\r\n     * @type {Writer.Op}\r\n     */\r\n    this.head = writer.head;\r\n\r\n    /**\r\n     * Current tail.\r\n     * @type {Writer.Op}\r\n     */\r\n    this.tail = writer.tail;\r\n\r\n    /**\r\n     * Current buffer length.\r\n     * @type {number}\r\n     */\r\n    this.len = writer.len;\r\n\r\n    /**\r\n     * Next state.\r\n     * @type {State|null}\r\n     */\r\n    this.next = writer.states;\r\n}\r\n\r\n/**\r\n * Constructs a new writer instance.\r\n * @classdesc Wire format writer using `Uint8Array` if available, otherwise `Array`.\r\n * @constructor\r\n */\r\nfunction Writer() {\r\n\r\n    /**\r\n     * Current length.\r\n     * @type {number}\r\n     */\r\n    this.len = 0;\r\n\r\n    /**\r\n     * Operations head.\r\n     * @type {Object}\r\n     */\r\n    this.head = new Op(noop, 0, 0);\r\n\r\n    /**\r\n     * Operations tail\r\n     * @type {Object}\r\n     */\r\n    this.tail = this.head;\r\n\r\n    /**\r\n     * Linked forked states.\r\n     * @type {Object|null}\r\n     */\r\n    this.states = null;\r\n\r\n    // When a value is written, the writer calculates its byte length and puts it into a linked\r\n    // list of operations to perform when finish() is called. This both allows us to allocate\r\n    // buffers of the exact required size and reduces the amount of work we have to do compared\r\n    // to first calculating over objects and then encoding over objects. In our case, the encoding\r\n    // part is just a linked list walk calling operations with already prepared values.\r\n}\r\n\r\nvar create = function create() {\r\n    return util.Buffer\r\n        ? function create_buffer_setup() {\r\n            return (Writer.create = function create_buffer() {\r\n                return new BufferWriter();\r\n            })();\r\n        }\r\n        /* istanbul ignore next */\r\n        : function create_array() {\r\n            return new Writer();\r\n        };\r\n};\r\n\r\n/**\r\n * Creates a new writer.\r\n * @function\r\n * @returns {BufferWriter|Writer} A {@link BufferWriter} when Buffers are supported, otherwise a {@link Writer}\r\n */\r\nWriter.create = create();\r\n\r\n/**\r\n * Allocates a buffer of the specified size.\r\n * @param {number} size Buffer size\r\n * @returns {Uint8Array} Buffer\r\n */\r\nWriter.alloc = function alloc(size) {\r\n    return new util.Array(size);\r\n};\r\n\r\n// Use Uint8Array buffer pool in the browser, just like node does with buffers\r\n/* istanbul ignore else */\r\nif (util.Array !== Array)\r\n    Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);\r\n\r\n/**\r\n * Pushes a new operation to the queue.\r\n * @param {function(Uint8Array, number, *)} fn Function to call\r\n * @param {number} len Value byte length\r\n * @param {number} val Value to write\r\n * @returns {Writer} `this`\r\n * @private\r\n */\r\nWriter.prototype._push = function push(fn, len, val) {\r\n    this.tail = this.tail.next = new Op(fn, len, val);\r\n    this.len += len;\r\n    return this;\r\n};\r\n\r\nfunction writeByte(val, buf, pos) {\r\n    buf[pos] = val & 255;\r\n}\r\n\r\nfunction writeVarint32(val, buf, pos) {\r\n    while (val > 127) {\r\n        buf[pos++] = val & 127 | 128;\r\n        val >>>= 7;\r\n    }\r\n    buf[pos] = val;\r\n}\r\n\r\n/**\r\n * Constructs a new varint writer operation instance.\r\n * @classdesc Scheduled varint writer operation.\r\n * @extends Op\r\n * @constructor\r\n * @param {number} len Value byte length\r\n * @param {number} val Value to write\r\n * @ignore\r\n */\r\nfunction VarintOp(len, val) {\r\n    this.len = len;\r\n    this.next = undefined;\r\n    this.val = val;\r\n}\r\n\r\nVarintOp.prototype = Object.create(Op.prototype);\r\nVarintOp.prototype.fn = writeVarint32;\r\n\r\n/**\r\n * Writes an unsigned 32 bit value as a varint.\r\n * @param {number} value Value to write\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.uint32 = function write_uint32(value) {\r\n    // here, the call to this.push has been inlined and a varint specific Op subclass is used.\r\n    // uint32 is by far the most frequently used operation and benefits significantly from this.\r\n    this.len += (this.tail = this.tail.next = new VarintOp(\r\n        (value = value >>> 0)\r\n                < 128       ? 1\r\n        : value < 16384     ? 2\r\n        : value < 2097152   ? 3\r\n        : value < 268435456 ? 4\r\n        :                     5,\r\n    value)).len;\r\n    return this;\r\n};\r\n\r\n/**\r\n * Writes a signed 32 bit value as a varint.\r\n * @function\r\n * @param {number} value Value to write\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.int32 = function write_int32(value) {\r\n    return value < 0\r\n        ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) // 10 bytes per spec\r\n        : this.uint32(value);\r\n};\r\n\r\n/**\r\n * Writes a 32 bit value as a varint, zig-zag encoded.\r\n * @param {number} value Value to write\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.sint32 = function write_sint32(value) {\r\n    return this.uint32((value << 1 ^ value >> 31) >>> 0);\r\n};\r\n\r\nfunction writeVarint64(val, buf, pos) {\r\n    while (val.hi) {\r\n        buf[pos++] = val.lo & 127 | 128;\r\n        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;\r\n        val.hi >>>= 7;\r\n    }\r\n    while (val.lo > 127) {\r\n        buf[pos++] = val.lo & 127 | 128;\r\n        val.lo = val.lo >>> 7;\r\n    }\r\n    buf[pos++] = val.lo;\r\n}\r\n\r\n/**\r\n * Writes an unsigned 64 bit value as a varint.\r\n * @param {Long|number|string} value Value to write\r\n * @returns {Writer} `this`\r\n * @throws {TypeError} If `value` is a string and no long library is present.\r\n */\r\nWriter.prototype.uint64 = function write_uint64(value) {\r\n    var bits = LongBits.from(value);\r\n    return this._push(writeVarint64, bits.length(), bits);\r\n};\r\n\r\n/**\r\n * Writes a signed 64 bit value as a varint.\r\n * @function\r\n * @param {Long|number|string} value Value to write\r\n * @returns {Writer} `this`\r\n * @throws {TypeError} If `value` is a string and no long library is present.\r\n */\r\nWriter.prototype.int64 = Writer.prototype.uint64;\r\n\r\n/**\r\n * Writes a signed 64 bit value as a varint, zig-zag encoded.\r\n * @param {Long|number|string} value Value to write\r\n * @returns {Writer} `this`\r\n * @throws {TypeError} If `value` is a string and no long library is present.\r\n */\r\nWriter.prototype.sint64 = function write_sint64(value) {\r\n    var bits = LongBits.from(value).zzEncode();\r\n    return this._push(writeVarint64, bits.length(), bits);\r\n};\r\n\r\n/**\r\n * Writes a boolish value as a varint.\r\n * @param {boolean} value Value to write\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.bool = function write_bool(value) {\r\n    return this._push(writeByte, 1, value ? 1 : 0);\r\n};\r\n\r\nfunction writeFixed32(val, buf, pos) {\r\n    buf[pos    ] =  val         & 255;\r\n    buf[pos + 1] =  val >>> 8   & 255;\r\n    buf[pos + 2] =  val >>> 16  & 255;\r\n    buf[pos + 3] =  val >>> 24;\r\n}\r\n\r\n/**\r\n * Writes an unsigned 32 bit value as fixed 32 bits.\r\n * @param {number} value Value to write\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.fixed32 = function write_fixed32(value) {\r\n    return this._push(writeFixed32, 4, value >>> 0);\r\n};\r\n\r\n/**\r\n * Writes a signed 32 bit value as fixed 32 bits.\r\n * @function\r\n * @param {number} value Value to write\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.sfixed32 = Writer.prototype.fixed32;\r\n\r\n/**\r\n * Writes an unsigned 64 bit value as fixed 64 bits.\r\n * @param {Long|number|string} value Value to write\r\n * @returns {Writer} `this`\r\n * @throws {TypeError} If `value` is a string and no long library is present.\r\n */\r\nWriter.prototype.fixed64 = function write_fixed64(value) {\r\n    var bits = LongBits.from(value);\r\n    return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);\r\n};\r\n\r\n/**\r\n * Writes a signed 64 bit value as fixed 64 bits.\r\n * @function\r\n * @param {Long|number|string} value Value to write\r\n * @returns {Writer} `this`\r\n * @throws {TypeError} If `value` is a string and no long library is present.\r\n */\r\nWriter.prototype.sfixed64 = Writer.prototype.fixed64;\r\n\r\n/**\r\n * Writes a float (32 bit).\r\n * @function\r\n * @param {number} value Value to write\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.float = function write_float(value) {\r\n    return this._push(util.float.writeFloatLE, 4, value);\r\n};\r\n\r\n/**\r\n * Writes a double (64 bit float).\r\n * @function\r\n * @param {number} value Value to write\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.double = function write_double(value) {\r\n    return this._push(util.float.writeDoubleLE, 8, value);\r\n};\r\n\r\nvar writeBytes = util.Array.prototype.set\r\n    ? function writeBytes_set(val, buf, pos) {\r\n        buf.set(val, pos); // also works for plain array values\r\n    }\r\n    /* istanbul ignore next */\r\n    : function writeBytes_for(val, buf, pos) {\r\n        for (var i = 0; i < val.length; ++i)\r\n            buf[pos + i] = val[i];\r\n    };\r\n\r\n/**\r\n * Writes a sequence of bytes.\r\n * @param {Uint8Array|string} value Buffer or base64 encoded string to write\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.bytes = function write_bytes(value) {\r\n    var len = value.length >>> 0;\r\n    if (!len)\r\n        return this._push(writeByte, 1, 0);\r\n    if (util.isString(value)) {\r\n        var buf = Writer.alloc(len = base64.length(value));\r\n        base64.decode(value, buf, 0);\r\n        value = buf;\r\n    }\r\n    return this.uint32(len)._push(writeBytes, len, value);\r\n};\r\n\r\n/**\r\n * Writes a string.\r\n * @param {string} value Value to write\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.string = function write_string(value) {\r\n    var len = utf8.length(value);\r\n    return len\r\n        ? this.uint32(len)._push(utf8.write, len, value)\r\n        : this._push(writeByte, 1, 0);\r\n};\r\n\r\n/**\r\n * Forks this writer's state by pushing it to a stack.\r\n * Calling {@link Writer#reset|reset} or {@link Writer#ldelim|ldelim} resets the writer to the previous state.\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.fork = function fork() {\r\n    this.states = new State(this);\r\n    this.head = this.tail = new Op(noop, 0, 0);\r\n    this.len = 0;\r\n    return this;\r\n};\r\n\r\n/**\r\n * Resets this instance to the last state.\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.reset = function reset() {\r\n    if (this.states) {\r\n        this.head   = this.states.head;\r\n        this.tail   = this.states.tail;\r\n        this.len    = this.states.len;\r\n        this.states = this.states.next;\r\n    } else {\r\n        this.head = this.tail = new Op(noop, 0, 0);\r\n        this.len  = 0;\r\n    }\r\n    return this;\r\n};\r\n\r\n/**\r\n * Resets to the last state and appends the fork state's current write length as a varint followed by its operations.\r\n * @returns {Writer} `this`\r\n */\r\nWriter.prototype.ldelim = function ldelim() {\r\n    var head = this.head,\r\n        tail = this.tail,\r\n        len  = this.len;\r\n    this.reset().uint32(len);\r\n    if (len) {\r\n        this.tail.next = head.next; // skip noop\r\n        this.tail = tail;\r\n        this.len += len;\r\n    }\r\n    return this;\r\n};\r\n\r\n/**\r\n * Finishes the write operation.\r\n * @returns {Uint8Array} Finished buffer\r\n */\r\nWriter.prototype.finish = function finish() {\r\n    var head = this.head.next, // skip noop\r\n        buf  = this.constructor.alloc(this.len),\r\n        pos  = 0;\r\n    while (head) {\r\n        head.fn(head.val, buf, pos);\r\n        pos += head.len;\r\n        head = head.next;\r\n    }\r\n    // this.head = this.tail = null;\r\n    return buf;\r\n};\r\n\r\nWriter._configure = function(BufferWriter_) {\r\n    BufferWriter = BufferWriter_;\r\n    Writer.create = create();\r\n    BufferWriter._configure();\r\n};\r\n","\"use strict\";\r\nmodule.exports = BufferWriter;\r\n\r\n// extends Writer\r\nvar Writer = require(\"./writer\");\r\n(BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;\r\n\r\nvar util = require(\"./util/minimal\");\r\n\r\n/**\r\n * Constructs a new buffer writer instance.\r\n * @classdesc Wire format writer using node buffers.\r\n * @extends Writer\r\n * @constructor\r\n */\r\nfunction BufferWriter() {\r\n    Writer.call(this);\r\n}\r\n\r\nBufferWriter._configure = function () {\r\n    /**\r\n     * Allocates a buffer of the specified size.\r\n     * @function\r\n     * @param {number} size Buffer size\r\n     * @returns {Buffer} Buffer\r\n     */\r\n    BufferWriter.alloc = util._Buffer_allocUnsafe;\r\n\r\n    BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === \"set\"\r\n        ? function writeBytesBuffer_set(val, buf, pos) {\r\n          buf.set(val, pos); // faster than copy (requires node >= 4 where Buffers extend Uint8Array and set is properly inherited)\r\n          // also works for plain array values\r\n        }\r\n        /* istanbul ignore next */\r\n        : function writeBytesBuffer_copy(val, buf, pos) {\r\n          if (val.copy) // Buffer values\r\n            val.copy(buf, pos, 0, val.length);\r\n          else for (var i = 0; i < val.length;) // plain array values\r\n            buf[pos++] = val[i++];\r\n        };\r\n};\r\n\r\n\r\n/**\r\n * @override\r\n */\r\nBufferWriter.prototype.bytes = function write_bytes_buffer(value) {\r\n    if (util.isString(value))\r\n        value = util._Buffer_from(value, \"base64\");\r\n    var len = value.length >>> 0;\r\n    this.uint32(len);\r\n    if (len)\r\n        this._push(BufferWriter.writeBytesBuffer, len, value);\r\n    return this;\r\n};\r\n\r\nfunction writeStringBuffer(val, buf, pos) {\r\n    if (val.length < 40) // plain js is faster for short strings (probably due to redundant assertions)\r\n        util.utf8.write(val, buf, pos);\r\n    else if (buf.utf8Write)\r\n        buf.utf8Write(val, pos);\r\n    else\r\n        buf.write(val, pos);\r\n}\r\n\r\n/**\r\n * @override\r\n */\r\nBufferWriter.prototype.string = function write_string_buffer(value) {\r\n    var len = util.Buffer.byteLength(value);\r\n    this.uint32(len);\r\n    if (len)\r\n        this._push(writeStringBuffer, len, value);\r\n    return this;\r\n};\r\n\r\n\r\n/**\r\n * Finishes the write operation.\r\n * @name BufferWriter#finish\r\n * @function\r\n * @returns {Buffer} Finished buffer\r\n */\r\n\r\nBufferWriter._configure();\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"DraggableCore\", {\n  enumerable: true,\n  get: function () {\n    return _DraggableCore.default;\n  }\n});\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\nvar _domFns = require(\"./utils/domFns\");\nvar _positionFns = require(\"./utils/positionFns\");\nvar _shims = require(\"./utils/shims\");\nvar _DraggableCore = _interopRequireDefault(require(\"./DraggableCore\"));\nvar _log = _interopRequireDefault(require(\"./utils/log\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); } /*:: import type {ControlPosition, PositionOffsetControlPosition, DraggableCoreProps, DraggableCoreDefaultProps} from './DraggableCore';*/\n/*:: import type {Bounds, DraggableEventHandler} from './utils/types';*/\n/*:: import type {Element as ReactElement} from 'react';*/\n/*:: type DraggableState = {\n  dragging: boolean,\n  dragged: boolean,\n  x: number, y: number,\n  slackX: number, slackY: number,\n  isElementSVG: boolean,\n  prevPropsPosition: ?ControlPosition,\n};*/\n/*:: export type DraggableDefaultProps = {\n  ...DraggableCoreDefaultProps,\n  axis: 'both' | 'x' | 'y' | 'none',\n  bounds: Bounds | string | false,\n  defaultClassName: string,\n  defaultClassNameDragging: string,\n  defaultClassNameDragged: string,\n  defaultPosition: ControlPosition,\n  scale: number,\n};*/\n/*:: export type DraggableProps = {\n  ...DraggableCoreProps,\n  ...DraggableDefaultProps,\n  positionOffset: PositionOffsetControlPosition,\n  position: ControlPosition,\n};*/\n//\n// Define <Draggable>\n//\nclass Draggable extends React.Component /*:: <DraggableProps, DraggableState>*/{\n  // React 16.3+\n  // Arity (props, state)\n  static getDerivedStateFromProps(_ref /*:: */, _ref2 /*:: */) /*: ?Partial<DraggableState>*/{\n    let {\n      position\n    } /*: DraggableProps*/ = _ref /*: DraggableProps*/;\n    let {\n      prevPropsPosition\n    } /*: DraggableState*/ = _ref2 /*: DraggableState*/;\n    // Set x/y if a new position is provided in props that is different than the previous.\n    if (position && (!prevPropsPosition || position.x !== prevPropsPosition.x || position.y !== prevPropsPosition.y)) {\n      (0, _log.default)('Draggable: getDerivedStateFromProps %j', {\n        position,\n        prevPropsPosition\n      });\n      return {\n        x: position.x,\n        y: position.y,\n        prevPropsPosition: {\n          ...position\n        }\n      };\n    }\n    return null;\n  }\n  constructor(props /*: DraggableProps*/) {\n    super(props);\n    _defineProperty(this, \"onDragStart\", (e, coreData) => {\n      (0, _log.default)('Draggable: onDragStart: %j', coreData);\n\n      // Short-circuit if user's callback killed it.\n      const shouldStart = this.props.onStart(e, (0, _positionFns.createDraggableData)(this, coreData));\n      // Kills start event on core as well, so move handlers are never bound.\n      if (shouldStart === false) return false;\n      this.setState({\n        dragging: true,\n        dragged: true\n      });\n    });\n    _defineProperty(this, \"onDrag\", (e, coreData) => {\n      if (!this.state.dragging) return false;\n      (0, _log.default)('Draggable: onDrag: %j', coreData);\n      const uiData = (0, _positionFns.createDraggableData)(this, coreData);\n      const newState = {\n        x: uiData.x,\n        y: uiData.y,\n        slackX: 0,\n        slackY: 0\n      };\n\n      // Keep within bounds.\n      if (this.props.bounds) {\n        // Save original x and y.\n        const {\n          x,\n          y\n        } = newState;\n\n        // Add slack to the values used to calculate bound position. This will ensure that if\n        // we start removing slack, the element won't react to it right away until it's been\n        // completely removed.\n        newState.x += this.state.slackX;\n        newState.y += this.state.slackY;\n\n        // Get bound position. This will ceil/floor the x and y within the boundaries.\n        const [newStateX, newStateY] = (0, _positionFns.getBoundPosition)(this, newState.x, newState.y);\n        newState.x = newStateX;\n        newState.y = newStateY;\n\n        // Recalculate slack by noting how much was shaved by the boundPosition handler.\n        newState.slackX = this.state.slackX + (x - newState.x);\n        newState.slackY = this.state.slackY + (y - newState.y);\n\n        // Update the event we fire to reflect what really happened after bounds took effect.\n        uiData.x = newState.x;\n        uiData.y = newState.y;\n        uiData.deltaX = newState.x - this.state.x;\n        uiData.deltaY = newState.y - this.state.y;\n      }\n\n      // Short-circuit if user's callback killed it.\n      const shouldUpdate = this.props.onDrag(e, uiData);\n      if (shouldUpdate === false) return false;\n      this.setState(newState);\n    });\n    _defineProperty(this, \"onDragStop\", (e, coreData) => {\n      if (!this.state.dragging) return false;\n\n      // Short-circuit if user's callback killed it.\n      const shouldContinue = this.props.onStop(e, (0, _positionFns.createDraggableData)(this, coreData));\n      if (shouldContinue === false) return false;\n      (0, _log.default)('Draggable: onDragStop: %j', coreData);\n      const newState /*: Partial<DraggableState>*/ = {\n        dragging: false,\n        slackX: 0,\n        slackY: 0\n      };\n\n      // If this is a controlled component, the result of this operation will be to\n      // revert back to the old position. We expect a handler on `onDragStop`, at the least.\n      const controlled = Boolean(this.props.position);\n      if (controlled) {\n        const {\n          x,\n          y\n        } = this.props.position;\n        newState.x = x;\n        newState.y = y;\n      }\n      this.setState(newState);\n    });\n    this.state = {\n      // Whether or not we are currently dragging.\n      dragging: false,\n      // Whether or not we have been dragged before.\n      dragged: false,\n      // Current transform x and y.\n      x: props.position ? props.position.x : props.defaultPosition.x,\n      y: props.position ? props.position.y : props.defaultPosition.y,\n      prevPropsPosition: {\n        ...props.position\n      },\n      // Used for compensating for out-of-bounds drags\n      slackX: 0,\n      slackY: 0,\n      // Can only determine if SVG after mounting\n      isElementSVG: false\n    };\n    if (props.position && !(props.onDrag || props.onStop)) {\n      // eslint-disable-next-line no-console\n      console.warn('A `position` was applied to this <Draggable>, without drag handlers. This will make this ' + 'component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the ' + '`position` of this element.');\n    }\n  }\n  componentDidMount() {\n    // Check to see if the element passed is an instanceof SVGElement\n    if (typeof window.SVGElement !== 'undefined' && this.findDOMNode() instanceof window.SVGElement) {\n      this.setState({\n        isElementSVG: true\n      });\n    }\n  }\n  componentWillUnmount() {\n    this.setState({\n      dragging: false\n    }); // prevents invariant if unmounted while dragging\n  }\n\n  // React Strict Mode compatibility: if `nodeRef` is passed, we will use it instead of trying to find\n  // the underlying DOM node ourselves. See the README for more information.\n  findDOMNode() /*: ?HTMLElement*/{\n    var _this$props$nodeRef$c, _this$props;\n    return (_this$props$nodeRef$c = (_this$props = this.props) === null || _this$props === void 0 || (_this$props = _this$props.nodeRef) === null || _this$props === void 0 ? void 0 : _this$props.current) !== null && _this$props$nodeRef$c !== void 0 ? _this$props$nodeRef$c : _reactDom.default.findDOMNode(this);\n  }\n  render() /*: ReactElement<any>*/{\n    const {\n      axis,\n      bounds,\n      children,\n      defaultPosition,\n      defaultClassName,\n      defaultClassNameDragging,\n      defaultClassNameDragged,\n      position,\n      positionOffset,\n      scale,\n      ...draggableCoreProps\n    } = this.props;\n    let style = {};\n    let svgTransform = null;\n\n    // If this is controlled, we don't want to move it - unless it's dragging.\n    const controlled = Boolean(position);\n    const draggable = !controlled || this.state.dragging;\n    const validPosition = position || defaultPosition;\n    const transformOpts = {\n      // Set left if horizontal drag is enabled\n      x: (0, _positionFns.canDragX)(this) && draggable ? this.state.x : validPosition.x,\n      // Set top if vertical drag is enabled\n      y: (0, _positionFns.canDragY)(this) && draggable ? this.state.y : validPosition.y\n    };\n\n    // If this element was SVG, we use the `transform` attribute.\n    if (this.state.isElementSVG) {\n      svgTransform = (0, _domFns.createSVGTransform)(transformOpts, positionOffset);\n    } else {\n      // Add a CSS transform to move the element around. This allows us to move the element around\n      // without worrying about whether or not it is relatively or absolutely positioned.\n      // If the item you are dragging already has a transform set, wrap it in a <span> so <Draggable>\n      // has a clean slate.\n      style = (0, _domFns.createCSSTransform)(transformOpts, positionOffset);\n    }\n\n    // Mark with class while dragging\n    const className = (0, _clsx.default)(children.props.className || '', defaultClassName, {\n      [defaultClassNameDragging]: this.state.dragging,\n      [defaultClassNameDragged]: this.state.dragged\n    });\n\n    // Reuse the child provided\n    // This makes it flexible to use whatever element is wanted (div, ul, etc)\n    return /*#__PURE__*/React.createElement(_DraggableCore.default, _extends({}, draggableCoreProps, {\n      onStart: this.onDragStart,\n      onDrag: this.onDrag,\n      onStop: this.onDragStop\n    }), /*#__PURE__*/React.cloneElement(React.Children.only(children), {\n      className: className,\n      style: {\n        ...children.props.style,\n        ...style\n      },\n      transform: svgTransform\n    }));\n  }\n}\nexports.default = Draggable;\n_defineProperty(Draggable, \"displayName\", 'Draggable');\n_defineProperty(Draggable, \"propTypes\", {\n  // Accepts all props <DraggableCore> accepts.\n  ..._DraggableCore.default.propTypes,\n  /**\n   * `axis` determines which axis the draggable can move.\n   *\n   *  Note that all callbacks will still return data as normal. This only\n   *  controls flushing to the DOM.\n   *\n   * 'both' allows movement horizontally and vertically.\n   * 'x' limits movement to horizontal axis.\n   * 'y' limits movement to vertical axis.\n   * 'none' limits all movement.\n   *\n   * Defaults to 'both'.\n   */\n  axis: _propTypes.default.oneOf(['both', 'x', 'y', 'none']),\n  /**\n   * `bounds` determines the range of movement available to the element.\n   * Available values are:\n   *\n   * 'parent' restricts movement within the Draggable's parent node.\n   *\n   * Alternatively, pass an object with the following properties, all of which are optional:\n   *\n   * {left: LEFT_BOUND, right: RIGHT_BOUND, bottom: BOTTOM_BOUND, top: TOP_BOUND}\n   *\n   * All values are in px.\n   *\n   * Example:\n   *\n   * ```jsx\n   *   let App = React.createClass({\n   *       render: function () {\n   *         return (\n   *            <Draggable bounds={{right: 300, bottom: 300}}>\n   *              <div>Content</div>\n   *           </Draggable>\n   *         );\n   *       }\n   *   });\n   * ```\n   */\n  bounds: _propTypes.default.oneOfType([_propTypes.default.shape({\n    left: _propTypes.default.number,\n    right: _propTypes.default.number,\n    top: _propTypes.default.number,\n    bottom: _propTypes.default.number\n  }), _propTypes.default.string, _propTypes.default.oneOf([false])]),\n  defaultClassName: _propTypes.default.string,\n  defaultClassNameDragging: _propTypes.default.string,\n  defaultClassNameDragged: _propTypes.default.string,\n  /**\n   * `defaultPosition` specifies the x and y that the dragged item should start at\n   *\n   * Example:\n   *\n   * ```jsx\n   *      let App = React.createClass({\n   *          render: function () {\n   *              return (\n   *                  <Draggable defaultPosition={{x: 25, y: 25}}>\n   *                      <div>I start with transformX: 25px and transformY: 25px;</div>\n   *                  </Draggable>\n   *              );\n   *          }\n   *      });\n   * ```\n   */\n  defaultPosition: _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  }),\n  positionOffset: _propTypes.default.shape({\n    x: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string]),\n    y: _propTypes.default.oneOfType([_propTypes.default.number, _propTypes.default.string])\n  }),\n  /**\n   * `position`, if present, defines the current position of the element.\n   *\n   *  This is similar to how form elements in React work - if no `position` is supplied, the component\n   *  is uncontrolled.\n   *\n   * Example:\n   *\n   * ```jsx\n   *      let App = React.createClass({\n   *          render: function () {\n   *              return (\n   *                  <Draggable position={{x: 25, y: 25}}>\n   *                      <div>I start with transformX: 25px and transformY: 25px;</div>\n   *                  </Draggable>\n   *              );\n   *          }\n   *      });\n   * ```\n   */\n  position: _propTypes.default.shape({\n    x: _propTypes.default.number,\n    y: _propTypes.default.number\n  }),\n  /**\n   * These properties should be defined on the child, not here.\n   */\n  className: _shims.dontSetMe,\n  style: _shims.dontSetMe,\n  transform: _shims.dontSetMe\n});\n_defineProperty(Draggable, \"defaultProps\", {\n  ..._DraggableCore.default.defaultProps,\n  axis: 'both',\n  bounds: false,\n  defaultClassName: 'react-draggable',\n  defaultClassNameDragging: 'react-draggable-dragging',\n  defaultClassNameDragged: 'react-draggable-dragged',\n  defaultPosition: {\n    x: 0,\n    y: 0\n  },\n  scale: 1\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\nvar _domFns = require(\"./utils/domFns\");\nvar _positionFns = require(\"./utils/positionFns\");\nvar _shims = require(\"./utils/shims\");\nvar _log = _interopRequireDefault(require(\"./utils/log\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n/*:: import type {EventHandler, MouseTouchEvent} from './utils/types';*/\n/*:: import type {Element as ReactElement} from 'react';*/\n// Simple abstraction for dragging events names.\nconst eventsFor = {\n  touch: {\n    start: 'touchstart',\n    move: 'touchmove',\n    stop: 'touchend'\n  },\n  mouse: {\n    start: 'mousedown',\n    move: 'mousemove',\n    stop: 'mouseup'\n  }\n};\n\n// Default to mouse events.\nlet dragEventFor = eventsFor.mouse;\n/*:: export type DraggableData = {\n  node: HTMLElement,\n  x: number, y: number,\n  deltaX: number, deltaY: number,\n  lastX: number, lastY: number,\n};*/\n/*:: export type DraggableEventHandler = (e: MouseEvent, data: DraggableData) => void | false;*/\n/*:: export type ControlPosition = {x: number, y: number};*/\n/*:: export type PositionOffsetControlPosition = {x: number|string, y: number|string};*/\n/*:: export type DraggableCoreDefaultProps = {\n  allowAnyClick: boolean,\n  disabled: boolean,\n  enableUserSelectHack: boolean,\n  onStart: DraggableEventHandler,\n  onDrag: DraggableEventHandler,\n  onStop: DraggableEventHandler,\n  onMouseDown: (e: MouseEvent) => void,\n  scale: number,\n};*/\n/*:: export type DraggableCoreProps = {\n  ...DraggableCoreDefaultProps,\n  cancel: string,\n  children: ReactElement<any>,\n  offsetParent: HTMLElement,\n  grid: [number, number],\n  handle: string,\n  nodeRef?: ?React.ElementRef<any>,\n};*/\n//\n// Define <DraggableCore>.\n//\n// <DraggableCore> is for advanced usage of <Draggable>. It maintains minimal internal state so it can\n// work well with libraries that require more control over the element.\n//\n\nclass DraggableCore extends React.Component /*:: <DraggableCoreProps>*/{\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"dragging\", false);\n    // Used while dragging to determine deltas.\n    _defineProperty(this, \"lastX\", NaN);\n    _defineProperty(this, \"lastY\", NaN);\n    _defineProperty(this, \"touchIdentifier\", null);\n    _defineProperty(this, \"mounted\", false);\n    _defineProperty(this, \"handleDragStart\", e => {\n      // Make it possible to attach event handlers on top of this one.\n      this.props.onMouseDown(e);\n\n      // Only accept left-clicks.\n      if (!this.props.allowAnyClick && typeof e.button === 'number' && e.button !== 0) return false;\n\n      // Get nodes. Be sure to grab relative document (could be iframed)\n      const thisNode = this.findDOMNode();\n      if (!thisNode || !thisNode.ownerDocument || !thisNode.ownerDocument.body) {\n        throw new Error('<DraggableCore> not mounted on DragStart!');\n      }\n      const {\n        ownerDocument\n      } = thisNode;\n\n      // Short circuit if handle or cancel prop was provided and selector doesn't match.\n      if (this.props.disabled || !(e.target instanceof ownerDocument.defaultView.Node) || this.props.handle && !(0, _domFns.matchesSelectorAndParentsTo)(e.target, this.props.handle, thisNode) || this.props.cancel && (0, _domFns.matchesSelectorAndParentsTo)(e.target, this.props.cancel, thisNode)) {\n        return;\n      }\n\n      // Prevent scrolling on mobile devices, like ipad/iphone.\n      // Important that this is after handle/cancel.\n      if (e.type === 'touchstart') e.preventDefault();\n\n      // Set touch identifier in component state if this is a touch event. This allows us to\n      // distinguish between individual touches on multitouch screens by identifying which\n      // touchpoint was set to this element.\n      const touchIdentifier = (0, _domFns.getTouchIdentifier)(e);\n      this.touchIdentifier = touchIdentifier;\n\n      // Get the current drag point from the event. This is used as the offset.\n      const position = (0, _positionFns.getControlPosition)(e, touchIdentifier, this);\n      if (position == null) return; // not possible but satisfies flow\n      const {\n        x,\n        y\n      } = position;\n\n      // Create an event object with all the data parents need to make a decision here.\n      const coreEvent = (0, _positionFns.createCoreData)(this, x, y);\n      (0, _log.default)('DraggableCore: handleDragStart: %j', coreEvent);\n\n      // Call event handler. If it returns explicit false, cancel.\n      (0, _log.default)('calling', this.props.onStart);\n      const shouldUpdate = this.props.onStart(e, coreEvent);\n      if (shouldUpdate === false || this.mounted === false) return;\n\n      // Add a style to the body to disable user-select. This prevents text from\n      // being selected all over the page.\n      if (this.props.enableUserSelectHack) (0, _domFns.addUserSelectStyles)(ownerDocument);\n\n      // Initiate dragging. Set the current x and y as offsets\n      // so we know how much we've moved during the drag. This allows us\n      // to drag elements around even if they have been moved, without issue.\n      this.dragging = true;\n      this.lastX = x;\n      this.lastY = y;\n\n      // Add events to the document directly so we catch when the user's mouse/touch moves outside of\n      // this element. We use different events depending on whether or not we have detected that this\n      // is a touch-capable device.\n      (0, _domFns.addEvent)(ownerDocument, dragEventFor.move, this.handleDrag);\n      (0, _domFns.addEvent)(ownerDocument, dragEventFor.stop, this.handleDragStop);\n    });\n    _defineProperty(this, \"handleDrag\", e => {\n      // Get the current drag point from the event. This is used as the offset.\n      const position = (0, _positionFns.getControlPosition)(e, this.touchIdentifier, this);\n      if (position == null) return;\n      let {\n        x,\n        y\n      } = position;\n\n      // Snap to grid if prop has been provided\n      if (Array.isArray(this.props.grid)) {\n        let deltaX = x - this.lastX,\n          deltaY = y - this.lastY;\n        [deltaX, deltaY] = (0, _positionFns.snapToGrid)(this.props.grid, deltaX, deltaY);\n        if (!deltaX && !deltaY) return; // skip useless drag\n        x = this.lastX + deltaX, y = this.lastY + deltaY;\n      }\n      const coreEvent = (0, _positionFns.createCoreData)(this, x, y);\n      (0, _log.default)('DraggableCore: handleDrag: %j', coreEvent);\n\n      // Call event handler. If it returns explicit false, trigger end.\n      const shouldUpdate = this.props.onDrag(e, coreEvent);\n      if (shouldUpdate === false || this.mounted === false) {\n        try {\n          // $FlowIgnore\n          this.handleDragStop(new MouseEvent('mouseup'));\n        } catch (err) {\n          // Old browsers\n          const event = ((document.createEvent('MouseEvents') /*: any*/) /*: MouseTouchEvent*/);\n          // I see why this insanity was deprecated\n          // $FlowIgnore\n          event.initMouseEvent('mouseup', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n          this.handleDragStop(event);\n        }\n        return;\n      }\n      this.lastX = x;\n      this.lastY = y;\n    });\n    _defineProperty(this, \"handleDragStop\", e => {\n      if (!this.dragging) return;\n      const position = (0, _positionFns.getControlPosition)(e, this.touchIdentifier, this);\n      if (position == null) return;\n      let {\n        x,\n        y\n      } = position;\n\n      // Snap to grid if prop has been provided\n      if (Array.isArray(this.props.grid)) {\n        let deltaX = x - this.lastX || 0;\n        let deltaY = y - this.lastY || 0;\n        [deltaX, deltaY] = (0, _positionFns.snapToGrid)(this.props.grid, deltaX, deltaY);\n        x = this.lastX + deltaX, y = this.lastY + deltaY;\n      }\n      const coreEvent = (0, _positionFns.createCoreData)(this, x, y);\n\n      // Call event handler\n      const shouldContinue = this.props.onStop(e, coreEvent);\n      if (shouldContinue === false || this.mounted === false) return false;\n      const thisNode = this.findDOMNode();\n      if (thisNode) {\n        // Remove user-select hack\n        if (this.props.enableUserSelectHack) (0, _domFns.removeUserSelectStyles)(thisNode.ownerDocument);\n      }\n      (0, _log.default)('DraggableCore: handleDragStop: %j', coreEvent);\n\n      // Reset the el.\n      this.dragging = false;\n      this.lastX = NaN;\n      this.lastY = NaN;\n      if (thisNode) {\n        // Remove event handlers\n        (0, _log.default)('DraggableCore: Removing handlers');\n        (0, _domFns.removeEvent)(thisNode.ownerDocument, dragEventFor.move, this.handleDrag);\n        (0, _domFns.removeEvent)(thisNode.ownerDocument, dragEventFor.stop, this.handleDragStop);\n      }\n    });\n    _defineProperty(this, \"onMouseDown\", e => {\n      dragEventFor = eventsFor.mouse; // on touchscreen laptops we could switch back to mouse\n\n      return this.handleDragStart(e);\n    });\n    _defineProperty(this, \"onMouseUp\", e => {\n      dragEventFor = eventsFor.mouse;\n      return this.handleDragStop(e);\n    });\n    // Same as onMouseDown (start drag), but now consider this a touch device.\n    _defineProperty(this, \"onTouchStart\", e => {\n      // We're on a touch device now, so change the event handlers\n      dragEventFor = eventsFor.touch;\n      return this.handleDragStart(e);\n    });\n    _defineProperty(this, \"onTouchEnd\", e => {\n      // We're on a touch device now, so change the event handlers\n      dragEventFor = eventsFor.touch;\n      return this.handleDragStop(e);\n    });\n  }\n  componentDidMount() {\n    this.mounted = true;\n    // Touch handlers must be added with {passive: false} to be cancelable.\n    // https://developers.google.com/web/updates/2017/01/scrolling-intervention\n    const thisNode = this.findDOMNode();\n    if (thisNode) {\n      (0, _domFns.addEvent)(thisNode, eventsFor.touch.start, this.onTouchStart, {\n        passive: false\n      });\n    }\n  }\n  componentWillUnmount() {\n    this.mounted = false;\n    // Remove any leftover event handlers. Remove both touch and mouse handlers in case\n    // some browser quirk caused a touch event to fire during a mouse move, or vice versa.\n    const thisNode = this.findDOMNode();\n    if (thisNode) {\n      const {\n        ownerDocument\n      } = thisNode;\n      (0, _domFns.removeEvent)(ownerDocument, eventsFor.mouse.move, this.handleDrag);\n      (0, _domFns.removeEvent)(ownerDocument, eventsFor.touch.move, this.handleDrag);\n      (0, _domFns.removeEvent)(ownerDocument, eventsFor.mouse.stop, this.handleDragStop);\n      (0, _domFns.removeEvent)(ownerDocument, eventsFor.touch.stop, this.handleDragStop);\n      (0, _domFns.removeEvent)(thisNode, eventsFor.touch.start, this.onTouchStart, {\n        passive: false\n      });\n      if (this.props.enableUserSelectHack) (0, _domFns.removeUserSelectStyles)(ownerDocument);\n    }\n  }\n\n  // React Strict Mode compatibility: if `nodeRef` is passed, we will use it instead of trying to find\n  // the underlying DOM node ourselves. See the README for more information.\n  findDOMNode() /*: ?HTMLElement*/{\n    var _this$props, _this$props2;\n    return (_this$props = this.props) !== null && _this$props !== void 0 && _this$props.nodeRef ? (_this$props2 = this.props) === null || _this$props2 === void 0 || (_this$props2 = _this$props2.nodeRef) === null || _this$props2 === void 0 ? void 0 : _this$props2.current : _reactDom.default.findDOMNode(this);\n  }\n  render() /*: React.Element<any>*/{\n    // Reuse the child provided\n    // This makes it flexible to use whatever element is wanted (div, ul, etc)\n    return /*#__PURE__*/React.cloneElement(React.Children.only(this.props.children), {\n      // Note: mouseMove handler is attached to document so it will still function\n      // when the user drags quickly and leaves the bounds of the element.\n      onMouseDown: this.onMouseDown,\n      onMouseUp: this.onMouseUp,\n      // onTouchStart is added on `componentDidMount` so they can be added with\n      // {passive: false}, which allows it to cancel. See\n      // https://developers.google.com/web/updates/2017/01/scrolling-intervention\n      onTouchEnd: this.onTouchEnd\n    });\n  }\n}\nexports.default = DraggableCore;\n_defineProperty(DraggableCore, \"displayName\", 'DraggableCore');\n_defineProperty(DraggableCore, \"propTypes\", {\n  /**\n   * `allowAnyClick` allows dragging using any mouse button.\n   * By default, we only accept the left button.\n   *\n   * Defaults to `false`.\n   */\n  allowAnyClick: _propTypes.default.bool,\n  children: _propTypes.default.node.isRequired,\n  /**\n   * `disabled`, if true, stops the <Draggable> from dragging. All handlers,\n   * with the exception of `onMouseDown`, will not fire.\n   */\n  disabled: _propTypes.default.bool,\n  /**\n   * By default, we add 'user-select:none' attributes to the document body\n   * to prevent ugly text selection during drag. If this is causing problems\n   * for your app, set this to `false`.\n   */\n  enableUserSelectHack: _propTypes.default.bool,\n  /**\n   * `offsetParent`, if set, uses the passed DOM node to compute drag offsets\n   * instead of using the parent node.\n   */\n  offsetParent: function (props /*: DraggableCoreProps*/, propName /*: $Keys<DraggableCoreProps>*/) {\n    if (props[propName] && props[propName].nodeType !== 1) {\n      throw new Error('Draggable\\'s offsetParent must be a DOM Node.');\n    }\n  },\n  /**\n   * `grid` specifies the x and y that dragging should snap to.\n   */\n  grid: _propTypes.default.arrayOf(_propTypes.default.number),\n  /**\n   * `handle` specifies a selector to be used as the handle that initiates drag.\n   *\n   * Example:\n   *\n   * ```jsx\n   *   let App = React.createClass({\n   *       render: function () {\n   *         return (\n   *            <Draggable handle=\".handle\">\n   *              <div>\n   *                  <div className=\"handle\">Click me to drag</div>\n   *                  <div>This is some other content</div>\n   *              </div>\n   *           </Draggable>\n   *         );\n   *       }\n   *   });\n   * ```\n   */\n  handle: _propTypes.default.string,\n  /**\n   * `cancel` specifies a selector to be used to prevent drag initialization.\n   *\n   * Example:\n   *\n   * ```jsx\n   *   let App = React.createClass({\n   *       render: function () {\n   *           return(\n   *               <Draggable cancel=\".cancel\">\n   *                   <div>\n   *                     <div className=\"cancel\">You can't drag from here</div>\n   *                     <div>Dragging here works fine</div>\n   *                   </div>\n   *               </Draggable>\n   *           );\n   *       }\n   *   });\n   * ```\n   */\n  cancel: _propTypes.default.string,\n  /* If running in React Strict mode, ReactDOM.findDOMNode() is deprecated.\n   * Unfortunately, in order for <Draggable> to work properly, we need raw access\n   * to the underlying DOM node. If you want to avoid the warning, pass a `nodeRef`\n   * as in this example:\n   *\n   * function MyComponent() {\n   *   const nodeRef = React.useRef(null);\n   *   return (\n   *     <Draggable nodeRef={nodeRef}>\n   *       <div ref={nodeRef}>Example Target</div>\n   *     </Draggable>\n   *   );\n   * }\n   *\n   * This can be used for arbitrarily nested components, so long as the ref ends up\n   * pointing to the actual child DOM node and not a custom component.\n   */\n  nodeRef: _propTypes.default.object,\n  /**\n   * Called when dragging starts.\n   * If this function returns the boolean false, dragging will be canceled.\n   */\n  onStart: _propTypes.default.func,\n  /**\n   * Called while dragging.\n   * If this function returns the boolean false, dragging will be canceled.\n   */\n  onDrag: _propTypes.default.func,\n  /**\n   * Called when dragging stops.\n   * If this function returns the boolean false, the drag will remain active.\n   */\n  onStop: _propTypes.default.func,\n  /**\n   * A workaround option which can be passed if onMouseDown needs to be accessed,\n   * since it'll always be blocked (as there is internal use of onMouseDown)\n   */\n  onMouseDown: _propTypes.default.func,\n  /**\n   * `scale`, if set, applies scaling while dragging an element\n   */\n  scale: _propTypes.default.number,\n  /**\n   * These properties should be defined on the child, not here.\n   */\n  className: _shims.dontSetMe,\n  style: _shims.dontSetMe,\n  transform: _shims.dontSetMe\n});\n_defineProperty(DraggableCore, \"defaultProps\", {\n  allowAnyClick: false,\n  // by default only accept left click\n  disabled: false,\n  enableUserSelectHack: true,\n  onStart: function () {},\n  onDrag: function () {},\n  onStop: function () {},\n  onMouseDown: function () {},\n  scale: 1\n});","\"use strict\";\n\nconst {\n  default: Draggable,\n  DraggableCore\n} = require('./Draggable');\n\n// Previous versions of this lib exported <Draggable> as the root export. As to no-// them, or TypeScript, we export *both* as the root and as 'default'.\n// See https://github.com/mzabriskie/react-draggable/pull/254\n// and https://github.com/mzabriskie/react-draggable/issues/266\nmodule.exports = Draggable;\nmodule.exports.default = Draggable;\nmodule.exports.DraggableCore = DraggableCore;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addClassName = addClassName;\nexports.addEvent = addEvent;\nexports.addUserSelectStyles = addUserSelectStyles;\nexports.createCSSTransform = createCSSTransform;\nexports.createSVGTransform = createSVGTransform;\nexports.getTouch = getTouch;\nexports.getTouchIdentifier = getTouchIdentifier;\nexports.getTranslation = getTranslation;\nexports.innerHeight = innerHeight;\nexports.innerWidth = innerWidth;\nexports.matchesSelector = matchesSelector;\nexports.matchesSelectorAndParentsTo = matchesSelectorAndParentsTo;\nexports.offsetXYFromParent = offsetXYFromParent;\nexports.outerHeight = outerHeight;\nexports.outerWidth = outerWidth;\nexports.removeClassName = removeClassName;\nexports.removeEvent = removeEvent;\nexports.removeUserSelectStyles = removeUserSelectStyles;\nvar _shims = require(\"./shims\");\nvar _getPrefix = _interopRequireWildcard(require(\"./getPrefix\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n/*:: import type {ControlPosition, PositionOffsetControlPosition, MouseTouchEvent} from './types';*/\nlet matchesSelectorFunc = '';\nfunction matchesSelector(el /*: Node*/, selector /*: string*/) /*: boolean*/{\n  if (!matchesSelectorFunc) {\n    matchesSelectorFunc = (0, _shims.findInArray)(['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'], function (method) {\n      // $FlowIgnore: Doesn't think elements are indexable\n      return (0, _shims.isFunction)(el[method]);\n    });\n  }\n\n  // Might not be found entirely (not an Element?) - in that case, bail\n  // $FlowIgnore: Doesn't think elements are indexable\n  if (!(0, _shims.isFunction)(el[matchesSelectorFunc])) return false;\n\n  // $FlowIgnore: Doesn't think elements are indexable\n  return el[matchesSelectorFunc](selector);\n}\n\n// Works up the tree to the draggable itself attempting to match selector.\nfunction matchesSelectorAndParentsTo(el /*: Node*/, selector /*: string*/, baseNode /*: Node*/) /*: boolean*/{\n  let node = el;\n  do {\n    if (matchesSelector(node, selector)) return true;\n    if (node === baseNode) return false;\n    // $FlowIgnore[incompatible-type]\n    node = node.parentNode;\n  } while (node);\n  return false;\n}\nfunction addEvent(el /*: ?Node*/, event /*: string*/, handler /*: Function*/, inputOptions /*: Object*/) /*: void*/{\n  if (!el) return;\n  const options = {\n    capture: true,\n    ...inputOptions\n  };\n  // $FlowIgnore[method-unbinding]\n  if (el.addEventListener) {\n    el.addEventListener(event, handler, options);\n  } else if (el.attachEvent) {\n    el.attachEvent('on' + event, handler);\n  } else {\n    // $FlowIgnore: Doesn't think elements are indexable\n    el['on' + event] = handler;\n  }\n}\nfunction removeEvent(el /*: ?Node*/, event /*: string*/, handler /*: Function*/, inputOptions /*: Object*/) /*: void*/{\n  if (!el) return;\n  const options = {\n    capture: true,\n    ...inputOptions\n  };\n  // $FlowIgnore[method-unbinding]\n  if (el.removeEventListener) {\n    el.removeEventListener(event, handler, options);\n  } else if (el.detachEvent) {\n    el.detachEvent('on' + event, handler);\n  } else {\n    // $FlowIgnore: Doesn't think elements are indexable\n    el['on' + event] = null;\n  }\n}\nfunction outerHeight(node /*: HTMLElement*/) /*: number*/{\n  // This is deliberately excluding margin for our calculations, since we are using\n  // offsetTop which is including margin. See getBoundPosition\n  let height = node.clientHeight;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  height += (0, _shims.int)(computedStyle.borderTopWidth);\n  height += (0, _shims.int)(computedStyle.borderBottomWidth);\n  return height;\n}\nfunction outerWidth(node /*: HTMLElement*/) /*: number*/{\n  // This is deliberately excluding margin for our calculations, since we are using\n  // offsetLeft which is including margin. See getBoundPosition\n  let width = node.clientWidth;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  width += (0, _shims.int)(computedStyle.borderLeftWidth);\n  width += (0, _shims.int)(computedStyle.borderRightWidth);\n  return width;\n}\nfunction innerHeight(node /*: HTMLElement*/) /*: number*/{\n  let height = node.clientHeight;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  height -= (0, _shims.int)(computedStyle.paddingTop);\n  height -= (0, _shims.int)(computedStyle.paddingBottom);\n  return height;\n}\nfunction innerWidth(node /*: HTMLElement*/) /*: number*/{\n  let width = node.clientWidth;\n  const computedStyle = node.ownerDocument.defaultView.getComputedStyle(node);\n  width -= (0, _shims.int)(computedStyle.paddingLeft);\n  width -= (0, _shims.int)(computedStyle.paddingRight);\n  return width;\n}\n/*:: interface EventWithOffset {\n  clientX: number, clientY: number\n}*/\n// Get from offsetParent\nfunction offsetXYFromParent(evt /*: EventWithOffset*/, offsetParent /*: HTMLElement*/, scale /*: number*/) /*: ControlPosition*/{\n  const isBody = offsetParent === offsetParent.ownerDocument.body;\n  const offsetParentRect = isBody ? {\n    left: 0,\n    top: 0\n  } : offsetParent.getBoundingClientRect();\n  const x = (evt.clientX + offsetParent.scrollLeft - offsetParentRect.left) / scale;\n  const y = (evt.clientY + offsetParent.scrollTop - offsetParentRect.top) / scale;\n  return {\n    x,\n    y\n  };\n}\nfunction createCSSTransform(controlPos /*: ControlPosition*/, positionOffset /*: PositionOffsetControlPosition*/) /*: Object*/{\n  const translation = getTranslation(controlPos, positionOffset, 'px');\n  return {\n    [(0, _getPrefix.browserPrefixToKey)('transform', _getPrefix.default)]: translation\n  };\n}\nfunction createSVGTransform(controlPos /*: ControlPosition*/, positionOffset /*: PositionOffsetControlPosition*/) /*: string*/{\n  const translation = getTranslation(controlPos, positionOffset, '');\n  return translation;\n}\nfunction getTranslation(_ref /*:: */, positionOffset /*: PositionOffsetControlPosition*/, unitSuffix /*: string*/) /*: string*/{\n  let {\n    x,\n    y\n  } /*: ControlPosition*/ = _ref /*: ControlPosition*/;\n  let translation = \"translate(\".concat(x).concat(unitSuffix, \",\").concat(y).concat(unitSuffix, \")\");\n  if (positionOffset) {\n    const defaultX = \"\".concat(typeof positionOffset.x === 'string' ? positionOffset.x : positionOffset.x + unitSuffix);\n    const defaultY = \"\".concat(typeof positionOffset.y === 'string' ? positionOffset.y : positionOffset.y + unitSuffix);\n    translation = \"translate(\".concat(defaultX, \", \").concat(defaultY, \")\") + translation;\n  }\n  return translation;\n}\nfunction getTouch(e /*: MouseTouchEvent*/, identifier /*: number*/) /*: ?{clientX: number, clientY: number}*/{\n  return e.targetTouches && (0, _shims.findInArray)(e.targetTouches, t => identifier === t.identifier) || e.changedTouches && (0, _shims.findInArray)(e.changedTouches, t => identifier === t.identifier);\n}\nfunction getTouchIdentifier(e /*: MouseTouchEvent*/) /*: ?number*/{\n  if (e.targetTouches && e.targetTouches[0]) return e.targetTouches[0].identifier;\n  if (e.changedTouches && e.changedTouches[0]) return e.changedTouches[0].identifier;\n}\n\n// User-select Hacks:\n//\n// Useful for preventing blue highlights all over everything when dragging.\n\n// Note we're passing `document` b/c we could be iframed\nfunction addUserSelectStyles(doc /*: ?Document*/) {\n  if (!doc) return;\n  let styleEl = doc.getElementById('react-draggable-style-el');\n  if (!styleEl) {\n    styleEl = doc.createElement('style');\n    styleEl.type = 'text/css';\n    styleEl.id = 'react-draggable-style-el';\n    styleEl.innerHTML = '.react-draggable-transparent-selection *::-moz-selection {all: inherit;}\\n';\n    styleEl.innerHTML += '.react-draggable-transparent-selection *::selection {all: inherit;}\\n';\n    doc.getElementsByTagName('head')[0].appendChild(styleEl);\n  }\n  if (doc.body) addClassName(doc.body, 'react-draggable-transparent-selection');\n}\nfunction removeUserSelectStyles(doc /*: ?Document*/) {\n  if (!doc) return;\n  try {\n    if (doc.body) removeClassName(doc.body, 'react-draggable-transparent-selection');\n    // $FlowIgnore: IE\n    if (doc.selection) {\n      // $FlowIgnore: IE\n      doc.selection.empty();\n    } else {\n      // Remove selection caused by scroll, unless it's a focused input\n      // (we use doc.defaultView in case we're in an iframe)\n      const selection = (doc.defaultView || window).getSelection();\n      if (selection && selection.type !== 'Caret') {\n        selection.removeAllRanges();\n      }\n    }\n  } catch (e) {\n    // probably IE\n  }\n}\nfunction addClassName(el /*: HTMLElement*/, className /*: string*/) {\n  if (el.classList) {\n    el.classList.add(className);\n  } else {\n    if (!el.className.match(new RegExp(\"(?:^|\\\\s)\".concat(className, \"(?!\\\\S)\")))) {\n      el.className += \" \".concat(className);\n    }\n  }\n}\nfunction removeClassName(el /*: HTMLElement*/, className /*: string*/) {\n  if (el.classList) {\n    el.classList.remove(className);\n  } else {\n    el.className = el.className.replace(new RegExp(\"(?:^|\\\\s)\".concat(className, \"(?!\\\\S)\"), 'g'), '');\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.browserPrefixToKey = browserPrefixToKey;\nexports.browserPrefixToStyle = browserPrefixToStyle;\nexports.default = void 0;\nexports.getPrefix = getPrefix;\nconst prefixes = ['Moz', 'Webkit', 'O', 'ms'];\nfunction getPrefix() /*: string*/{\n  var _window$document;\n  let prop /*: string*/ = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'transform';\n  // Ensure we're running in an environment where there is actually a global\n  // `window` obj\n  if (typeof window === 'undefined') return '';\n\n  // If we're in a pseudo-browser server-side environment, this access\n  // path may not exist, so bail out if it doesn't.\n  const style = (_window$document = window.document) === null || _window$document === void 0 || (_window$document = _window$document.documentElement) === null || _window$document === void 0 ? void 0 : _window$document.style;\n  if (!style) return '';\n  if (prop in style) return '';\n  for (let i = 0; i < prefixes.length; i++) {\n    if (browserPrefixToKey(prop, prefixes[i]) in style) return prefixes[i];\n  }\n  return '';\n}\nfunction browserPrefixToKey(prop /*: string*/, prefix /*: string*/) /*: string*/{\n  return prefix ? \"\".concat(prefix).concat(kebabToTitleCase(prop)) : prop;\n}\nfunction browserPrefixToStyle(prop /*: string*/, prefix /*: string*/) /*: string*/{\n  return prefix ? \"-\".concat(prefix.toLowerCase(), \"-\").concat(prop) : prop;\n}\nfunction kebabToTitleCase(str /*: string*/) /*: string*/{\n  let out = '';\n  let shouldCapitalize = true;\n  for (let i = 0; i < str.length; i++) {\n    if (shouldCapitalize) {\n      out += str[i].toUpperCase();\n      shouldCapitalize = false;\n    } else if (str[i] === '-') {\n      shouldCapitalize = true;\n    } else {\n      out += str[i];\n    }\n  }\n  return out;\n}\n\n// Default export is the prefix itself, like 'Moz', 'Webkit', etc\n// Note that you may have to re-test for certain things; for instance, Chrome 50\n// can handle unprefixed `transform`, but not unprefixed `user-select`\nvar _default = exports.default = (getPrefix() /*: string*/);","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = log;\n/*eslint no-console:0*/\nfunction log() {\n  if (undefined) console.log(...arguments);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canDragX = canDragX;\nexports.canDragY = canDragY;\nexports.createCoreData = createCoreData;\nexports.createDraggableData = createDraggableData;\nexports.getBoundPosition = getBoundPosition;\nexports.getControlPosition = getControlPosition;\nexports.snapToGrid = snapToGrid;\nvar _shims = require(\"./shims\");\nvar _domFns = require(\"./domFns\");\n/*:: import type Draggable from '../Draggable';*/\n/*:: import type {Bounds, ControlPosition, DraggableData, MouseTouchEvent} from './types';*/\n/*:: import type DraggableCore from '../DraggableCore';*/\nfunction getBoundPosition(draggable /*: Draggable*/, x /*: number*/, y /*: number*/) /*: [number, number]*/{\n  // If no bounds, short-circuit and move on\n  if (!draggable.props.bounds) return [x, y];\n\n  // Clone new bounds\n  let {\n    bounds\n  } = draggable.props;\n  bounds = typeof bounds === 'string' ? bounds : cloneBounds(bounds);\n  const node = findDOMNode(draggable);\n  if (typeof bounds === 'string') {\n    const {\n      ownerDocument\n    } = node;\n    const ownerWindow = ownerDocument.defaultView;\n    let boundNode;\n    if (bounds === 'parent') {\n      boundNode = node.parentNode;\n    } else {\n      boundNode = ownerDocument.querySelector(bounds);\n    }\n    if (!(boundNode instanceof ownerWindow.HTMLElement)) {\n      throw new Error('Bounds selector \"' + bounds + '\" could not find an element.');\n    }\n    const boundNodeEl /*: HTMLElement*/ = boundNode; // for Flow, can't seem to refine correctly\n    const nodeStyle = ownerWindow.getComputedStyle(node);\n    const boundNodeStyle = ownerWindow.getComputedStyle(boundNodeEl);\n    // Compute bounds. This is a pain with padding and offsets but this gets it exactly right.\n    bounds = {\n      left: -node.offsetLeft + (0, _shims.int)(boundNodeStyle.paddingLeft) + (0, _shims.int)(nodeStyle.marginLeft),\n      top: -node.offsetTop + (0, _shims.int)(boundNodeStyle.paddingTop) + (0, _shims.int)(nodeStyle.marginTop),\n      right: (0, _domFns.innerWidth)(boundNodeEl) - (0, _domFns.outerWidth)(node) - node.offsetLeft + (0, _shims.int)(boundNodeStyle.paddingRight) - (0, _shims.int)(nodeStyle.marginRight),\n      bottom: (0, _domFns.innerHeight)(boundNodeEl) - (0, _domFns.outerHeight)(node) - node.offsetTop + (0, _shims.int)(boundNodeStyle.paddingBottom) - (0, _shims.int)(nodeStyle.marginBottom)\n    };\n  }\n\n  // Keep x and y below right and bottom limits...\n  if ((0, _shims.isNum)(bounds.right)) x = Math.min(x, bounds.right);\n  if ((0, _shims.isNum)(bounds.bottom)) y = Math.min(y, bounds.bottom);\n\n  // But above left and top limits.\n  if ((0, _shims.isNum)(bounds.left)) x = Math.max(x, bounds.left);\n  if ((0, _shims.isNum)(bounds.top)) y = Math.max(y, bounds.top);\n  return [x, y];\n}\nfunction snapToGrid(grid /*: [number, number]*/, pendingX /*: number*/, pendingY /*: number*/) /*: [number, number]*/{\n  const x = Math.round(pendingX / grid[0]) * grid[0];\n  const y = Math.round(pendingY / grid[1]) * grid[1];\n  return [x, y];\n}\nfunction canDragX(draggable /*: Draggable*/) /*: boolean*/{\n  return draggable.props.axis === 'both' || draggable.props.axis === 'x';\n}\nfunction canDragY(draggable /*: Draggable*/) /*: boolean*/{\n  return draggable.props.axis === 'both' || draggable.props.axis === 'y';\n}\n\n// Get {x, y} positions from event.\nfunction getControlPosition(e /*: MouseTouchEvent*/, touchIdentifier /*: ?number*/, draggableCore /*: DraggableCore*/) /*: ?ControlPosition*/{\n  const touchObj = typeof touchIdentifier === 'number' ? (0, _domFns.getTouch)(e, touchIdentifier) : null;\n  if (typeof touchIdentifier === 'number' && !touchObj) return null; // not the right touch\n  const node = findDOMNode(draggableCore);\n  // User can provide an offsetParent if desired.\n  const offsetParent = draggableCore.props.offsetParent || node.offsetParent || node.ownerDocument.body;\n  return (0, _domFns.offsetXYFromParent)(touchObj || e, offsetParent, draggableCore.props.scale);\n}\n\n// Create an data object exposed by <DraggableCore>'s events\nfunction createCoreData(draggable /*: DraggableCore*/, x /*: number*/, y /*: number*/) /*: DraggableData*/{\n  const isStart = !(0, _shims.isNum)(draggable.lastX);\n  const node = findDOMNode(draggable);\n  if (isStart) {\n    // If this is our first move, use the x and y as last coords.\n    return {\n      node,\n      deltaX: 0,\n      deltaY: 0,\n      lastX: x,\n      lastY: y,\n      x,\n      y\n    };\n  } else {\n    // Otherwise calculate proper values.\n    return {\n      node,\n      deltaX: x - draggable.lastX,\n      deltaY: y - draggable.lastY,\n      lastX: draggable.lastX,\n      lastY: draggable.lastY,\n      x,\n      y\n    };\n  }\n}\n\n// Create an data exposed by <Draggable>'s events\nfunction createDraggableData(draggable /*: Draggable*/, coreData /*: DraggableData*/) /*: DraggableData*/{\n  const scale = draggable.props.scale;\n  return {\n    node: coreData.node,\n    x: draggable.state.x + coreData.deltaX / scale,\n    y: draggable.state.y + coreData.deltaY / scale,\n    deltaX: coreData.deltaX / scale,\n    deltaY: coreData.deltaY / scale,\n    lastX: draggable.state.x,\n    lastY: draggable.state.y\n  };\n}\n\n// A lot faster than stringify/parse\nfunction cloneBounds(bounds /*: Bounds*/) /*: Bounds*/{\n  return {\n    left: bounds.left,\n    top: bounds.top,\n    right: bounds.right,\n    bottom: bounds.bottom\n  };\n}\nfunction findDOMNode(draggable /*: Draggable | DraggableCore*/) /*: HTMLElement*/{\n  const node = draggable.findDOMNode();\n  if (!node) {\n    throw new Error('<DraggableCore>: Unmounted during event!');\n  }\n  // $FlowIgnore we can't assert on HTMLElement due to tests... FIXME\n  return node;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dontSetMe = dontSetMe;\nexports.findInArray = findInArray;\nexports.int = int;\nexports.isFunction = isFunction;\nexports.isNum = isNum;\n// @credits https://gist.github.com/rogozhnikoff/a43cfed27c41e4e68cdc\nfunction findInArray(array /*: Array<any> | TouchList*/, callback /*: Function*/) /*: any*/{\n  for (let i = 0, length = array.length; i < length; i++) {\n    if (callback.apply(callback, [array[i], i, array])) return array[i];\n  }\n}\nfunction isFunction(func /*: any*/) /*: boolean %checks*/{\n  // $FlowIgnore[method-unbinding]\n  return typeof func === 'function' || Object.prototype.toString.call(func) === '[object Function]';\n}\nfunction isNum(num /*: any*/) /*: boolean %checks*/{\n  return typeof num === 'number' && !isNaN(num);\n}\nfunction int(a /*: string*/) /*: number*/{\n  return parseInt(a, 10);\n}\nfunction dontSetMe(props /*: Object*/, propName /*: string*/, componentName /*: string*/) /*: ?Error*/{\n  if (props[propName]) {\n    return new Error(\"Invalid prop \".concat(propName, \" passed to \").concat(componentName, \" - do not set this, set it on the child.\"));\n  }\n}","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f);else for(t in e)e[t]&&(n&&(n+=\" \"),n+=t);return n}export function clsx(){for(var e,t,f=0,n=\"\";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\n\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView;\n\n// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.3\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n    var it;\n    if (hasMap && (a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      return true;\n    }\n\n    if (hasSet && (a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      return true;\n    }\n    // END: Modifications\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    // START: Modifications:\n    // Apply guards for `Object.create(null)` handling. See:\n    // - https://github.com/FormidableLabs/react-fast-compare/issues/64\n    // - https://github.com/epoberezkin/fast-deep-equal/issues/49\n    if (a.valueOf !== Object.prototype.valueOf && typeof a.valueOf === 'function' && typeof b.valueOf === 'function') return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString && typeof a.toString === 'function' && typeof b.toString === 'function') return a.toString() === b.toString();\n    // END: Modifications\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    // END: fast-deep-equal\n\n    // START: react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element) return false;\n\n    // custom handling for React/Preact\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n\n        continue;\n      }\n\n      // all other properties should be traversed as usual\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    // END: react-fast-compare\n\n    // START: fast-deep-equal\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (((error.message || '').match(/stack|recursion/i))) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _reactDraggable = require(\"react-draggable\");\n\nvar _reactResizable = require(\"react-resizable\");\n\nvar _utils = require(\"./utils\");\n\nvar _calculateUtils = require(\"./calculateUtils\");\n\nvar _ReactGridLayoutPropTypes = require(\"./ReactGridLayoutPropTypes\");\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * An individual item within a ReactGridLayout.\n */\nvar GridItem = /*#__PURE__*/function (_React$Component) {\n  _inherits(GridItem, _React$Component);\n\n  var _super = _createSuper(GridItem);\n\n  function GridItem() {\n    var _this;\n\n    _classCallCheck(this, GridItem);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      resizing: null,\n      dragging: null,\n      className: \"\"\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"elementRef\", /*#__PURE__*/_react.default.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragStart\", function (e, _ref) {\n      var node = _ref.node;\n      var _this$props = _this.props,\n          onDragStart = _this$props.onDragStart,\n          transformScale = _this$props.transformScale;\n      if (!onDragStart) return;\n      var newPosition\n      /*: PartialPosition*/\n      = {\n        top: 0,\n        left: 0\n      }; // TODO: this wont work on nested parents\n\n      var offsetParent = node.offsetParent;\n      if (!offsetParent) return;\n      var parentRect = offsetParent.getBoundingClientRect();\n      var clientRect = node.getBoundingClientRect();\n      var cLeft = clientRect.left / transformScale;\n      var pLeft = parentRect.left / transformScale;\n      var cTop = clientRect.top / transformScale;\n      var pTop = parentRect.top / transformScale;\n      newPosition.left = cLeft - pLeft + offsetParent.scrollLeft;\n      newPosition.top = cTop - pTop + offsetParent.scrollTop;\n\n      _this.setState({\n        dragging: newPosition\n      }); // Call callback with this data\n\n\n      var _calcXY = (0, _calculateUtils.calcXY)(_this.getPositionParams(), newPosition.top, newPosition.left, _this.props.w, _this.props.h),\n          x = _calcXY.x,\n          y = _calcXY.y;\n\n      return onDragStart.call(_assertThisInitialized(_this), _this.props.i, x, y, {\n        e: e,\n        node: node,\n        newPosition: newPosition\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDrag\", function (e, _ref2) {\n      var node = _ref2.node,\n          deltaX = _ref2.deltaX,\n          deltaY = _ref2.deltaY;\n      var onDrag = _this.props.onDrag;\n      if (!onDrag) return;\n\n      if (!_this.state.dragging) {\n        throw new Error(\"onDrag called before onDragStart.\");\n      }\n\n      var top = _this.state.dragging.top + deltaY;\n      var left = _this.state.dragging.left + deltaX;\n      var _this$props2 = _this.props,\n          isBounded = _this$props2.isBounded,\n          i = _this$props2.i,\n          w = _this$props2.w,\n          h = _this$props2.h,\n          containerWidth = _this$props2.containerWidth;\n\n      var positionParams = _this.getPositionParams(); // Boundary calculations; keeps items within the grid\n\n\n      if (isBounded) {\n        var offsetParent = node.offsetParent;\n\n        if (offsetParent) {\n          var _this$props3 = _this.props,\n              margin = _this$props3.margin,\n              rowHeight = _this$props3.rowHeight;\n          var bottomBoundary = offsetParent.clientHeight - (0, _calculateUtils.calcGridItemWHPx)(h, rowHeight, margin[1]);\n          top = (0, _calculateUtils.clamp)(top, 0, bottomBoundary);\n          var colWidth = (0, _calculateUtils.calcGridColWidth)(positionParams);\n          var rightBoundary = containerWidth - (0, _calculateUtils.calcGridItemWHPx)(w, colWidth, margin[0]);\n          left = (0, _calculateUtils.clamp)(left, 0, rightBoundary);\n        }\n      }\n\n      var newPosition\n      /*: PartialPosition*/\n      = {\n        top: top,\n        left: left\n      };\n\n      _this.setState({\n        dragging: newPosition\n      }); // Call callback with this data\n\n\n      var _calcXY2 = (0, _calculateUtils.calcXY)(positionParams, top, left, w, h),\n          x = _calcXY2.x,\n          y = _calcXY2.y;\n\n      return onDrag.call(_assertThisInitialized(_this), i, x, y, {\n        e: e,\n        node: node,\n        newPosition: newPosition\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragStop\", function (e, _ref3) {\n      var node = _ref3.node;\n      var onDragStop = _this.props.onDragStop;\n      if (!onDragStop) return;\n\n      if (!_this.state.dragging) {\n        throw new Error(\"onDragEnd called before onDragStart.\");\n      }\n\n      var _this$props4 = _this.props,\n          w = _this$props4.w,\n          h = _this$props4.h,\n          i = _this$props4.i;\n      var _this$state$dragging = _this.state.dragging,\n          left = _this$state$dragging.left,\n          top = _this$state$dragging.top;\n      var newPosition\n      /*: PartialPosition*/\n      = {\n        top: top,\n        left: left\n      };\n\n      _this.setState({\n        dragging: null\n      });\n\n      var _calcXY3 = (0, _calculateUtils.calcXY)(_this.getPositionParams(), top, left, w, h),\n          x = _calcXY3.x,\n          y = _calcXY3.y;\n\n      return onDragStop.call(_assertThisInitialized(_this), i, x, y, {\n        e: e,\n        node: node,\n        newPosition: newPosition\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResizeStop\", function (e, callbackData) {\n      _this.onResizeHandler(e, callbackData, \"onResizeStop\");\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResizeStart\", function (e, callbackData) {\n      _this.onResizeHandler(e, callbackData, \"onResizeStart\");\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResize\", function (e, callbackData) {\n      _this.onResizeHandler(e, callbackData, \"onResize\");\n    });\n\n    return _this;\n  }\n\n  _createClass(GridItem, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps\n    /*: Props*/\n    , nextState\n    /*: State*/\n    )\n    /*: boolean*/\n    {\n      // We can't deeply compare children. If the developer memoizes them, we can\n      // use this optimization.\n      if (this.props.children !== nextProps.children) return true;\n      if (this.props.droppingPosition !== nextProps.droppingPosition) return true; // TODO memoize these calculations so they don't take so long?\n\n      var oldPosition = (0, _calculateUtils.calcGridItemPosition)(this.getPositionParams(this.props), this.props.x, this.props.y, this.props.w, this.props.h, this.state);\n      var newPosition = (0, _calculateUtils.calcGridItemPosition)(this.getPositionParams(nextProps), nextProps.x, nextProps.y, nextProps.w, nextProps.h, nextState);\n      return !(0, _utils.fastPositionEqual)(oldPosition, newPosition) || this.props.useCSSTransforms !== nextProps.useCSSTransforms;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.moveDroppingItem({});\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps\n    /*: Props*/\n    ) {\n      this.moveDroppingItem(prevProps);\n    } // When a droppingPosition is present, this means we should fire a move event, as if we had moved\n    // this element by `x, y` pixels.\n\n  }, {\n    key: \"moveDroppingItem\",\n    value: function moveDroppingItem(prevProps\n    /*: Props*/\n    ) {\n      var droppingPosition = this.props.droppingPosition;\n      if (!droppingPosition) return;\n      var node = this.elementRef.current; // Can't find DOM node (are we unmounted?)\n\n      if (!node) return;\n      var prevDroppingPosition = prevProps.droppingPosition || {\n        left: 0,\n        top: 0\n      };\n      var dragging = this.state.dragging;\n      var shouldDrag = dragging && droppingPosition.left !== prevDroppingPosition.left || droppingPosition.top !== prevDroppingPosition.top;\n\n      if (!dragging) {\n        this.onDragStart(droppingPosition.e, {\n          node: node,\n          deltaX: droppingPosition.left,\n          deltaY: droppingPosition.top\n        });\n      } else if (shouldDrag) {\n        var deltaX = droppingPosition.left - dragging.left;\n        var deltaY = droppingPosition.top - dragging.top;\n        this.onDrag(droppingPosition.e, {\n          node: node,\n          deltaX: deltaX,\n          deltaY: deltaY\n        });\n      }\n    }\n  }, {\n    key: \"getPositionParams\",\n    value: function getPositionParams()\n    /*: PositionParams*/\n    {\n      var props\n      /*: Props*/\n      = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n      return {\n        cols: props.cols,\n        containerPadding: props.containerPadding,\n        containerWidth: props.containerWidth,\n        margin: props.margin,\n        maxRows: props.maxRows,\n        rowHeight: props.rowHeight\n      };\n    }\n    /**\n     * This is where we set the grid item's absolute placement. It gets a little tricky because we want to do it\n     * well when server rendering, and the only way to do that properly is to use percentage width/left because\n     * we don't know exactly what the browser viewport is.\n     * Unfortunately, CSS Transforms, which are great for performance, break in this instance because a percentage\n     * left is relative to the item itself, not its container! So we cannot use them on the server rendering pass.\n     *\n     * @param  {Object} pos Position object with width, height, left, top.\n     * @return {Object}     Style object.\n     */\n\n  }, {\n    key: \"createStyle\",\n    value: function createStyle(pos\n    /*: Position*/\n    )\n    /*: { [key: string]: ?string }*/\n    {\n      var _this$props5 = this.props,\n          usePercentages = _this$props5.usePercentages,\n          containerWidth = _this$props5.containerWidth,\n          useCSSTransforms = _this$props5.useCSSTransforms;\n      var style; // CSS Transforms support (default)\n\n      if (useCSSTransforms) {\n        style = (0, _utils.setTransform)(pos);\n      } else {\n        // top,left (slow)\n        style = (0, _utils.setTopLeft)(pos); // This is used for server rendering.\n\n        if (usePercentages) {\n          style.left = (0, _utils.perc)(pos.left / containerWidth);\n          style.width = (0, _utils.perc)(pos.width / containerWidth);\n        }\n      }\n\n      return style;\n    }\n    /**\n     * Mix a Draggable instance into a child.\n     * @param  {Element} child    Child element.\n     * @return {Element}          Child wrapped in Draggable.\n     */\n\n  }, {\n    key: \"mixinDraggable\",\n    value: function mixinDraggable(child\n    /*: ReactElement<any>*/\n    , isDraggable\n    /*: boolean*/\n    )\n    /*: ReactElement<any>*/\n    {\n      return /*#__PURE__*/_react.default.createElement(_reactDraggable.DraggableCore, {\n        disabled: !isDraggable,\n        onStart: this.onDragStart,\n        onDrag: this.onDrag,\n        onStop: this.onDragStop,\n        handle: this.props.handle,\n        cancel: \".react-resizable-handle\" + (this.props.cancel ? \",\" + this.props.cancel : \"\"),\n        scale: this.props.transformScale,\n        nodeRef: this.elementRef\n      }, child);\n    }\n    /**\n     * Mix a Resizable instance into a child.\n     * @param  {Element} child    Child element.\n     * @param  {Object} position  Position object (pixel values)\n     * @return {Element}          Child wrapped in Resizable.\n     */\n\n  }, {\n    key: \"mixinResizable\",\n    value: function mixinResizable(child\n    /*: ReactElement<any>*/\n    , position\n    /*: Position*/\n    , isResizable\n    /*: boolean*/\n    )\n    /*: ReactElement<any>*/\n    {\n      var _this$props6 = this.props,\n          cols = _this$props6.cols,\n          x = _this$props6.x,\n          minW = _this$props6.minW,\n          minH = _this$props6.minH,\n          maxW = _this$props6.maxW,\n          maxH = _this$props6.maxH,\n          transformScale = _this$props6.transformScale,\n          resizeHandles = _this$props6.resizeHandles,\n          resizeHandle = _this$props6.resizeHandle;\n      var positionParams = this.getPositionParams(); // This is the max possible width - doesn't go to infinity because of the width of the window\n\n      var maxWidth = (0, _calculateUtils.calcGridItemPosition)(positionParams, 0, 0, cols - x, 0).width; // Calculate min/max constraints using our min & maxes\n\n      var mins = (0, _calculateUtils.calcGridItemPosition)(positionParams, 0, 0, minW, minH);\n      var maxes = (0, _calculateUtils.calcGridItemPosition)(positionParams, 0, 0, maxW, maxH);\n      var minConstraints = [mins.width, mins.height];\n      var maxConstraints = [Math.min(maxes.width, maxWidth), Math.min(maxes.height, Infinity)];\n      return /*#__PURE__*/_react.default.createElement(_reactResizable.Resizable // These are opts for the resize handle itself\n      , {\n        draggableOpts: {\n          disabled: !isResizable\n        },\n        className: isResizable ? undefined : \"react-resizable-hide\",\n        width: position.width,\n        height: position.height,\n        minConstraints: minConstraints,\n        maxConstraints: maxConstraints,\n        onResizeStop: this.onResizeStop,\n        onResizeStart: this.onResizeStart,\n        onResize: this.onResize,\n        transformScale: transformScale,\n        resizeHandles: resizeHandles,\n        handle: resizeHandle\n      }, child);\n    }\n    /**\n     * onDragStart event handler\n     * @param  {Event}  e             event data\n     * @param  {Object} callbackData  an object with node, delta and position information\n     */\n\n  }, {\n    key: \"onResizeHandler\",\n    value:\n    /**\n     * Wrapper around drag events to provide more useful data.\n     * All drag events call the function with the given handler name,\n     * with the signature (index, x, y).\n     *\n     * @param  {String} handlerName Handler name to wrap.\n     * @return {Function}           Handler function.\n     */\n    function onResizeHandler(e\n    /*: Event*/\n    , _ref4, handlerName\n    /*: string*/\n    )\n    /*: void*/\n    {\n      var node = _ref4.node,\n          size = _ref4.size;\n      var handler = this.props[handlerName];\n      if (!handler) return;\n      var _this$props7 = this.props,\n          cols = _this$props7.cols,\n          x = _this$props7.x,\n          y = _this$props7.y,\n          i = _this$props7.i,\n          maxH = _this$props7.maxH,\n          minH = _this$props7.minH;\n      var _this$props8 = this.props,\n          minW = _this$props8.minW,\n          maxW = _this$props8.maxW; // Get new XY\n\n      var _calcWH = (0, _calculateUtils.calcWH)(this.getPositionParams(), size.width, size.height, x, y),\n          w = _calcWH.w,\n          h = _calcWH.h; // minW should be at least 1 (TODO propTypes validation?)\n\n\n      minW = Math.max(minW, 1); // maxW should be at most (cols - x)\n\n      maxW = Math.min(maxW, cols - x); // Min/max capping\n\n      w = (0, _calculateUtils.clamp)(w, minW, maxW);\n      h = (0, _calculateUtils.clamp)(h, minH, maxH);\n      this.setState({\n        resizing: handlerName === \"onResizeStop\" ? null : size\n      });\n      handler.call(this, i, w, h, {\n        e: e,\n        node: node,\n        size: size\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render()\n    /*: ReactNode*/\n    {\n      var _this$props9 = this.props,\n          x = _this$props9.x,\n          y = _this$props9.y,\n          w = _this$props9.w,\n          h = _this$props9.h,\n          isDraggable = _this$props9.isDraggable,\n          isResizable = _this$props9.isResizable,\n          droppingPosition = _this$props9.droppingPosition,\n          useCSSTransforms = _this$props9.useCSSTransforms;\n      var pos = (0, _calculateUtils.calcGridItemPosition)(this.getPositionParams(), x, y, w, h, this.state);\n\n      var child = _react.default.Children.only(this.props.children); // Create the child element. We clone the existing element but modify its className and style.\n\n\n      var newChild = /*#__PURE__*/_react.default.cloneElement(child, {\n        ref: this.elementRef,\n        className: (0, _clsx.default)(\"react-grid-item\", child.props.className, this.props.className, {\n          static: this.props.static,\n          resizing: Boolean(this.state.resizing),\n          \"react-draggable\": isDraggable,\n          \"react-draggable-dragging\": Boolean(this.state.dragging),\n          dropping: Boolean(droppingPosition),\n          cssTransforms: useCSSTransforms\n        }),\n        // We can set the width and height on the child, but unfortunately we can't set the position.\n        style: _objectSpread(_objectSpread(_objectSpread({}, this.props.style), child.props.style), this.createStyle(pos))\n      }); // Resizable support. This is usually on but the user can toggle it off.\n\n\n      newChild = this.mixinResizable(newChild, pos, isResizable); // Draggable support. This is always on, except for with placeholders.\n\n      newChild = this.mixinDraggable(newChild, isDraggable);\n      return newChild;\n    }\n  }]);\n\n  return GridItem;\n}(_react.default.Component);\n\nexports.default = GridItem;\n\n_defineProperty(GridItem, \"propTypes\", {\n  // Children must be only a single element\n  children: _propTypes.default.element,\n  // General grid attributes\n  cols: _propTypes.default.number.isRequired,\n  containerWidth: _propTypes.default.number.isRequired,\n  rowHeight: _propTypes.default.number.isRequired,\n  margin: _propTypes.default.array.isRequired,\n  maxRows: _propTypes.default.number.isRequired,\n  containerPadding: _propTypes.default.array.isRequired,\n  // These are all in grid units\n  x: _propTypes.default.number.isRequired,\n  y: _propTypes.default.number.isRequired,\n  w: _propTypes.default.number.isRequired,\n  h: _propTypes.default.number.isRequired,\n  // All optional\n  minW: function minW(props\n  /*: Props*/\n  , propName\n  /*: string*/\n  ) {\n    var value = props[propName];\n    if (typeof value !== \"number\") return new Error(\"minWidth not Number\");\n    if (value > props.w || value > props.maxW) return new Error(\"minWidth larger than item width/maxWidth\");\n  },\n  maxW: function maxW(props\n  /*: Props*/\n  , propName\n  /*: string*/\n  ) {\n    var value = props[propName];\n    if (typeof value !== \"number\") return new Error(\"maxWidth not Number\");\n    if (value < props.w || value < props.minW) return new Error(\"maxWidth smaller than item width/minWidth\");\n  },\n  minH: function minH(props\n  /*: Props*/\n  , propName\n  /*: string*/\n  ) {\n    var value = props[propName];\n    if (typeof value !== \"number\") return new Error(\"minHeight not Number\");\n    if (value > props.h || value > props.maxH) return new Error(\"minHeight larger than item height/maxHeight\");\n  },\n  maxH: function maxH(props\n  /*: Props*/\n  , propName\n  /*: string*/\n  ) {\n    var value = props[propName];\n    if (typeof value !== \"number\") return new Error(\"maxHeight not Number\");\n    if (value < props.h || value < props.minH) return new Error(\"maxHeight smaller than item height/minHeight\");\n  },\n  // ID is nice to have for callbacks\n  i: _propTypes.default.string.isRequired,\n  // Resize handle options\n  resizeHandles: _ReactGridLayoutPropTypes.resizeHandleAxesType,\n  resizeHandle: _ReactGridLayoutPropTypes.resizeHandleType,\n  // Functions\n  onDragStop: _propTypes.default.func,\n  onDragStart: _propTypes.default.func,\n  onDrag: _propTypes.default.func,\n  onResizeStop: _propTypes.default.func,\n  onResizeStart: _propTypes.default.func,\n  onResize: _propTypes.default.func,\n  // Flags\n  isDraggable: _propTypes.default.bool.isRequired,\n  isResizable: _propTypes.default.bool.isRequired,\n  isBounded: _propTypes.default.bool.isRequired,\n  static: _propTypes.default.bool,\n  // Use CSS transforms instead of top/left\n  useCSSTransforms: _propTypes.default.bool.isRequired,\n  transformScale: _propTypes.default.number,\n  // Others\n  className: _propTypes.default.string,\n  // Selector for draggable handle\n  handle: _propTypes.default.string,\n  // Selector for draggable cancel (see react-draggable)\n  cancel: _propTypes.default.string,\n  // Current position of a dropping element\n  droppingPosition: _propTypes.default.shape({\n    e: _propTypes.default.object.isRequired,\n    left: _propTypes.default.number.isRequired,\n    top: _propTypes.default.number.isRequired\n  })\n});\n\n_defineProperty(GridItem, \"defaultProps\", {\n  className: \"\",\n  cancel: \"\",\n  handle: \"\",\n  minH: 1,\n  minW: 1,\n  maxH: Infinity,\n  maxW: Infinity,\n  transformScale: 1\n});","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash.isequal\"));\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar _utils = require(\"./utils\");\n\nvar _calculateUtils = require(\"./calculateUtils\");\n\nvar _GridItem = _interopRequireDefault(require(\"./GridItem\"));\n\nvar _ReactGridLayoutPropTypes = _interopRequireDefault(require(\"./ReactGridLayoutPropTypes\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// End Types\nvar layoutClassName = \"react-grid-layout\";\nvar isFirefox = false; // Try...catch will protect from navigator not existing (e.g. node) or a bad implementation of navigator\n\ntry {\n  isFirefox = /firefox/i.test(navigator.userAgent);\n} catch (e) {\n  /* Ignore */\n}\n/**\n * A reactive, fluid grid layout with draggable, resizable components.\n */\n\n\nvar ReactGridLayout = /*#__PURE__*/function (_React$Component) {\n  _inherits(ReactGridLayout, _React$Component);\n\n  var _super = _createSuper(ReactGridLayout);\n\n  function ReactGridLayout() {\n    var _this;\n\n    _classCallCheck(this, ReactGridLayout);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      activeDrag: null,\n      layout: (0, _utils.synchronizeLayoutWithChildren)(_this.props.layout, _this.props.children, _this.props.cols, // Legacy support for verticalCompact: false\n      (0, _utils.compactType)(_this.props), _this.props.allowOverlap),\n      mounted: false,\n      oldDragItem: null,\n      oldLayout: null,\n      oldResizeItem: null,\n      droppingDOMNode: null,\n      children: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"dragEnterCounter\", 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragStart\", function (i\n    /*: string*/\n    , x\n    /*: number*/\n    , y\n    /*: number*/\n    , _ref) {\n      var e = _ref.e,\n          node = _ref.node;\n      var layout = _this.state.layout;\n      var l = (0, _utils.getLayoutItem)(layout, i);\n      if (!l) return;\n\n      _this.setState({\n        oldDragItem: (0, _utils.cloneLayoutItem)(l),\n        oldLayout: layout\n      });\n\n      return _this.props.onDragStart(layout, l, l, null, e, node);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDrag\", function (i, x, y, _ref2) {\n      var e = _ref2.e,\n          node = _ref2.node;\n      var oldDragItem = _this.state.oldDragItem;\n      var layout = _this.state.layout;\n      var _this$props = _this.props,\n          cols = _this$props.cols,\n          allowOverlap = _this$props.allowOverlap,\n          preventCollision = _this$props.preventCollision;\n      var l = (0, _utils.getLayoutItem)(layout, i);\n      if (!l) return; // Create placeholder (display only)\n\n      var placeholder = {\n        w: l.w,\n        h: l.h,\n        x: l.x,\n        y: l.y,\n        placeholder: true,\n        i: i\n      }; // Move the element to the dragged location.\n\n      var isUserAction = true;\n      layout = (0, _utils.moveElement)(layout, l, x, y, isUserAction, preventCollision, (0, _utils.compactType)(_this.props), cols, allowOverlap);\n\n      _this.props.onDrag(layout, oldDragItem, l, placeholder, e, node);\n\n      _this.setState({\n        layout: allowOverlap ? layout : (0, _utils.compact)(layout, (0, _utils.compactType)(_this.props), cols),\n        activeDrag: placeholder\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragStop\", function (i, x, y, _ref3) {\n      var e = _ref3.e,\n          node = _ref3.node;\n      if (!_this.state.activeDrag) return;\n      var oldDragItem = _this.state.oldDragItem;\n      var layout = _this.state.layout;\n      var _this$props2 = _this.props,\n          cols = _this$props2.cols,\n          preventCollision = _this$props2.preventCollision,\n          allowOverlap = _this$props2.allowOverlap;\n      var l = (0, _utils.getLayoutItem)(layout, i);\n      if (!l) return; // Move the element here\n\n      var isUserAction = true;\n      layout = (0, _utils.moveElement)(layout, l, x, y, isUserAction, preventCollision, (0, _utils.compactType)(_this.props), cols, allowOverlap);\n\n      _this.props.onDragStop(layout, oldDragItem, l, null, e, node); // Set state\n\n\n      var newLayout = allowOverlap ? layout : (0, _utils.compact)(layout, (0, _utils.compactType)(_this.props), cols);\n      var oldLayout = _this.state.oldLayout;\n\n      _this.setState({\n        activeDrag: null,\n        layout: newLayout,\n        oldDragItem: null,\n        oldLayout: null\n      });\n\n      _this.onLayoutMaybeChanged(newLayout, oldLayout);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResizeStart\", function (i, w, h, _ref4) {\n      var e = _ref4.e,\n          node = _ref4.node;\n      var layout = _this.state.layout;\n      var l = (0, _utils.getLayoutItem)(layout, i);\n      if (!l) return;\n\n      _this.setState({\n        oldResizeItem: (0, _utils.cloneLayoutItem)(l),\n        oldLayout: _this.state.layout\n      });\n\n      _this.props.onResizeStart(layout, l, l, null, e, node);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResize\", function (i, w, h, _ref5) {\n      var e = _ref5.e,\n          node = _ref5.node;\n      var _this$state = _this.state,\n          layout = _this$state.layout,\n          oldResizeItem = _this$state.oldResizeItem;\n      var _this$props3 = _this.props,\n          cols = _this$props3.cols,\n          preventCollision = _this$props3.preventCollision,\n          allowOverlap = _this$props3.allowOverlap;\n\n      var _withLayoutItem = (0, _utils.withLayoutItem)(layout, i, function (l) {\n        // Something like quad tree should be used\n        // to find collisions faster\n        var hasCollisions;\n\n        if (preventCollision && !allowOverlap) {\n          var collisions = (0, _utils.getAllCollisions)(layout, _objectSpread(_objectSpread({}, l), {}, {\n            w: w,\n            h: h\n          })).filter(function (layoutItem) {\n            return layoutItem.i !== l.i;\n          });\n          hasCollisions = collisions.length > 0; // If we're colliding, we need adjust the placeholder.\n\n          // If we're colliding, we need adjust the placeholder.\n          if (hasCollisions) {\n            // adjust w && h to maximum allowed space\n            var leastX = Infinity,\n                leastY = Infinity;\n            collisions.forEach(function (layoutItem) {\n              if (layoutItem.x > l.x) leastX = Math.min(leastX, layoutItem.x);\n              if (layoutItem.y > l.y) leastY = Math.min(leastY, layoutItem.y);\n            });\n            if (Number.isFinite(leastX)) l.w = leastX - l.x;\n            if (Number.isFinite(leastY)) l.h = leastY - l.y;\n          }\n        }\n\n        if (!hasCollisions) {\n          // Set new width and height.\n          l.w = w;\n          l.h = h;\n        }\n\n        return l;\n      }),\n          _withLayoutItem2 = _slicedToArray(_withLayoutItem, 2),\n          newLayout = _withLayoutItem2[0],\n          l = _withLayoutItem2[1]; // Shouldn't ever happen, but typechecking makes it necessary\n\n\n      if (!l) return; // Create placeholder element (display only)\n\n      var placeholder = {\n        w: l.w,\n        h: l.h,\n        x: l.x,\n        y: l.y,\n        static: true,\n        i: i\n      };\n\n      _this.props.onResize(newLayout, oldResizeItem, l, placeholder, e, node); // Re-compact the newLayout and set the drag placeholder.\n\n\n      _this.setState({\n        layout: allowOverlap ? newLayout : (0, _utils.compact)(newLayout, (0, _utils.compactType)(_this.props), cols),\n        activeDrag: placeholder\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onResizeStop\", function (i, w, h, _ref6) {\n      var e = _ref6.e,\n          node = _ref6.node;\n      var _this$state2 = _this.state,\n          layout = _this$state2.layout,\n          oldResizeItem = _this$state2.oldResizeItem;\n      var _this$props4 = _this.props,\n          cols = _this$props4.cols,\n          allowOverlap = _this$props4.allowOverlap;\n      var l = (0, _utils.getLayoutItem)(layout, i);\n\n      _this.props.onResizeStop(layout, oldResizeItem, l, null, e, node); // Set state\n\n\n      var newLayout = allowOverlap ? layout : (0, _utils.compact)(layout, (0, _utils.compactType)(_this.props), cols);\n      var oldLayout = _this.state.oldLayout;\n\n      _this.setState({\n        activeDrag: null,\n        layout: newLayout,\n        oldResizeItem: null,\n        oldLayout: null\n      });\n\n      _this.onLayoutMaybeChanged(newLayout, oldLayout);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragOver\", function (e) {\n      var _e$nativeEvent$target;\n\n      e.preventDefault(); // Prevent any browser native action\n\n      e.stopPropagation(); // we should ignore events from layout's children in Firefox\n      // to avoid unpredictable jumping of a dropping placeholder\n      // FIXME remove this hack\n\n      if (isFirefox && // $FlowIgnore can't figure this out\n      !((_e$nativeEvent$target = e.nativeEvent.target) !== null && _e$nativeEvent$target !== void 0 && _e$nativeEvent$target.classList.contains(layoutClassName))) {\n        return false;\n      }\n\n      var _this$props5 = _this.props,\n          droppingItem = _this$props5.droppingItem,\n          onDropDragOver = _this$props5.onDropDragOver,\n          margin = _this$props5.margin,\n          cols = _this$props5.cols,\n          rowHeight = _this$props5.rowHeight,\n          maxRows = _this$props5.maxRows,\n          width = _this$props5.width,\n          containerPadding = _this$props5.containerPadding,\n          transformScale = _this$props5.transformScale; // Allow user to customize the dropping item or short-circuit the drop based on the results\n      // of the `onDragOver(e: Event)` callback.\n\n      var onDragOverResult = onDropDragOver === null || onDropDragOver === void 0 ? void 0 : onDropDragOver(e);\n\n      if (onDragOverResult === false) {\n        if (_this.state.droppingDOMNode) {\n          _this.removeDroppingPlaceholder();\n        }\n\n        return false;\n      }\n\n      var finalDroppingItem = _objectSpread(_objectSpread({}, droppingItem), onDragOverResult);\n\n      var layout = _this.state.layout; // This is relative to the DOM element that this event fired for.\n\n      var _e$nativeEvent = e.nativeEvent,\n          layerX = _e$nativeEvent.layerX,\n          layerY = _e$nativeEvent.layerY;\n      var droppingPosition = {\n        left: layerX / transformScale,\n        top: layerY / transformScale,\n        e: e\n      };\n\n      if (!_this.state.droppingDOMNode) {\n        var positionParams\n        /*: PositionParams*/\n        = {\n          cols: cols,\n          margin: margin,\n          maxRows: maxRows,\n          rowHeight: rowHeight,\n          containerWidth: width,\n          containerPadding: containerPadding || margin\n        };\n        var calculatedPosition = (0, _calculateUtils.calcXY)(positionParams, layerY, layerX, finalDroppingItem.w, finalDroppingItem.h);\n\n        _this.setState({\n          droppingDOMNode: /*#__PURE__*/React.createElement(\"div\", {\n            key: finalDroppingItem.i\n          }),\n          droppingPosition: droppingPosition,\n          layout: [].concat(_toConsumableArray(layout), [_objectSpread(_objectSpread({}, finalDroppingItem), {}, {\n            x: calculatedPosition.x,\n            y: calculatedPosition.y,\n            static: false,\n            isDraggable: true\n          })])\n        });\n      } else if (_this.state.droppingPosition) {\n        var _this$state$droppingP = _this.state.droppingPosition,\n            left = _this$state$droppingP.left,\n            top = _this$state$droppingP.top;\n        var shouldUpdatePosition = left != layerX || top != layerY;\n\n        if (shouldUpdatePosition) {\n          _this.setState({\n            droppingPosition: droppingPosition\n          });\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeDroppingPlaceholder\", function () {\n      var _this$props6 = _this.props,\n          droppingItem = _this$props6.droppingItem,\n          cols = _this$props6.cols;\n      var layout = _this.state.layout;\n      var newLayout = (0, _utils.compact)(layout.filter(function (l) {\n        return l.i !== droppingItem.i;\n      }), (0, _utils.compactType)(_this.props), cols);\n\n      _this.setState({\n        layout: newLayout,\n        droppingDOMNode: null,\n        activeDrag: null,\n        droppingPosition: undefined\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragLeave\", function (e) {\n      e.preventDefault(); // Prevent any browser native action\n\n      e.stopPropagation();\n      _this.dragEnterCounter--; // onDragLeave can be triggered on each layout's child.\n      // But we know that count of dragEnter and dragLeave events\n      // will be balanced after leaving the layout's container\n      // so we can increase and decrease count of dragEnter and\n      // when it'll be equal to 0 we'll remove the placeholder\n\n      if (_this.dragEnterCounter === 0) {\n        _this.removeDroppingPlaceholder();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDragEnter\", function (e) {\n      e.preventDefault(); // Prevent any browser native action\n\n      e.stopPropagation();\n      _this.dragEnterCounter++;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDrop\", function (e\n    /*: Event*/\n    ) {\n      e.preventDefault(); // Prevent any browser native action\n\n      e.stopPropagation();\n      var droppingItem = _this.props.droppingItem;\n      var layout = _this.state.layout;\n      var item = layout.find(function (l) {\n        return l.i === droppingItem.i;\n      }); // reset dragEnter counter on drop\n\n      _this.dragEnterCounter = 0;\n\n      _this.removeDroppingPlaceholder();\n\n      _this.props.onDrop(layout, item, e);\n    });\n\n    return _this;\n  }\n\n  _createClass(ReactGridLayout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        mounted: true\n      }); // Possibly call back with layout on mount. This should be done after correcting the layout width\n      // to ensure we don't rerender with the wrong width.\n\n      this.onLayoutMaybeChanged(this.state.layout, this.props.layout);\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps\n    /*: Props*/\n    , nextState\n    /*: State*/\n    )\n    /*: boolean*/\n    {\n      return (// NOTE: this is almost always unequal. Therefore the only way to get better performance\n        // from SCU is if the user intentionally memoizes children. If they do, and they can\n        // handle changes properly, performance will increase.\n        this.props.children !== nextProps.children || !(0, _utils.fastRGLPropsEqual)(this.props, nextProps, _lodash.default) || this.state.activeDrag !== nextState.activeDrag || this.state.mounted !== nextState.mounted || this.state.droppingPosition !== nextState.droppingPosition\n      );\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps\n    /*: Props*/\n    , prevState\n    /*: State*/\n    ) {\n      if (!this.state.activeDrag) {\n        var newLayout = this.state.layout;\n        var oldLayout = prevState.layout;\n        this.onLayoutMaybeChanged(newLayout, oldLayout);\n      }\n    }\n    /**\n     * Calculates a pixel value for the container.\n     * @return {String} Container height in pixels.\n     */\n\n  }, {\n    key: \"containerHeight\",\n    value: function containerHeight()\n    /*: ?string*/\n    {\n      if (!this.props.autoSize) return;\n      var nbRow = (0, _utils.bottom)(this.state.layout);\n      var containerPaddingY = this.props.containerPadding ? this.props.containerPadding[1] : this.props.margin[1];\n      return nbRow * this.props.rowHeight + (nbRow - 1) * this.props.margin[1] + containerPaddingY * 2 + \"px\";\n    }\n    /**\n     * When dragging starts\n     * @param {String} i Id of the child\n     * @param {Number} x X position of the move\n     * @param {Number} y Y position of the move\n     * @param {Event} e The mousedown event\n     * @param {Element} node The current dragging DOM element\n     */\n\n  }, {\n    key: \"onLayoutMaybeChanged\",\n    value: function onLayoutMaybeChanged(newLayout\n    /*: Layout*/\n    , oldLayout\n    /*: ?Layout*/\n    ) {\n      if (!oldLayout) oldLayout = this.state.layout;\n\n      if (!(0, _lodash.default)(oldLayout, newLayout)) {\n        this.props.onLayoutChange(newLayout);\n      }\n    }\n  }, {\n    key: \"placeholder\",\n    value:\n    /**\n     * Create a placeholder object.\n     * @return {Element} Placeholder div.\n     */\n    function placeholder()\n    /*: ?ReactElement<any>*/\n    {\n      var activeDrag = this.state.activeDrag;\n      if (!activeDrag) return null;\n      var _this$props7 = this.props,\n          width = _this$props7.width,\n          cols = _this$props7.cols,\n          margin = _this$props7.margin,\n          containerPadding = _this$props7.containerPadding,\n          rowHeight = _this$props7.rowHeight,\n          maxRows = _this$props7.maxRows,\n          useCSSTransforms = _this$props7.useCSSTransforms,\n          transformScale = _this$props7.transformScale; // {...this.state.activeDrag} is pretty slow, actually\n\n      return /*#__PURE__*/React.createElement(_GridItem.default, {\n        w: activeDrag.w,\n        h: activeDrag.h,\n        x: activeDrag.x,\n        y: activeDrag.y,\n        i: activeDrag.i,\n        className: \"react-grid-placeholder\",\n        containerWidth: width,\n        cols: cols,\n        margin: margin,\n        containerPadding: containerPadding || margin,\n        maxRows: maxRows,\n        rowHeight: rowHeight,\n        isDraggable: false,\n        isResizable: false,\n        isBounded: false,\n        useCSSTransforms: useCSSTransforms,\n        transformScale: transformScale\n      }, /*#__PURE__*/React.createElement(\"div\", null));\n    }\n    /**\n     * Given a grid item, set its style attributes & surround in a <Draggable>.\n     * @param  {Element} child React element.\n     * @return {Element}       Element wrapped in draggable and properly placed.\n     */\n\n  }, {\n    key: \"processGridItem\",\n    value: function processGridItem(child\n    /*: ReactElement<any>*/\n    , isDroppingItem\n    /*: boolean*/\n    )\n    /*: ?ReactElement<any>*/\n    {\n      if (!child || !child.key) return;\n      var l = (0, _utils.getLayoutItem)(this.state.layout, String(child.key));\n      if (!l) return null;\n      var _this$props8 = this.props,\n          width = _this$props8.width,\n          cols = _this$props8.cols,\n          margin = _this$props8.margin,\n          containerPadding = _this$props8.containerPadding,\n          rowHeight = _this$props8.rowHeight,\n          maxRows = _this$props8.maxRows,\n          isDraggable = _this$props8.isDraggable,\n          isResizable = _this$props8.isResizable,\n          isBounded = _this$props8.isBounded,\n          useCSSTransforms = _this$props8.useCSSTransforms,\n          transformScale = _this$props8.transformScale,\n          draggableCancel = _this$props8.draggableCancel,\n          draggableHandle = _this$props8.draggableHandle,\n          resizeHandles = _this$props8.resizeHandles,\n          resizeHandle = _this$props8.resizeHandle;\n      var _this$state3 = this.state,\n          mounted = _this$state3.mounted,\n          droppingPosition = _this$state3.droppingPosition; // Determine user manipulations possible.\n      // If an item is static, it can't be manipulated by default.\n      // Any properties defined directly on the grid item will take precedence.\n\n      var draggable = typeof l.isDraggable === \"boolean\" ? l.isDraggable : !l.static && isDraggable;\n      var resizable = typeof l.isResizable === \"boolean\" ? l.isResizable : !l.static && isResizable;\n      var resizeHandlesOptions = l.resizeHandles || resizeHandles; // isBounded set on child if set on parent, and child is not explicitly false\n\n      var bounded = draggable && isBounded && l.isBounded !== false;\n      return /*#__PURE__*/React.createElement(_GridItem.default, {\n        containerWidth: width,\n        cols: cols,\n        margin: margin,\n        containerPadding: containerPadding || margin,\n        maxRows: maxRows,\n        rowHeight: rowHeight,\n        cancel: draggableCancel,\n        handle: draggableHandle,\n        onDragStop: this.onDragStop,\n        onDragStart: this.onDragStart,\n        onDrag: this.onDrag,\n        onResizeStart: this.onResizeStart,\n        onResize: this.onResize,\n        onResizeStop: this.onResizeStop,\n        isDraggable: draggable,\n        isResizable: resizable,\n        isBounded: bounded,\n        useCSSTransforms: useCSSTransforms && mounted,\n        usePercentages: !mounted,\n        transformScale: transformScale,\n        w: l.w,\n        h: l.h,\n        x: l.x,\n        y: l.y,\n        i: l.i,\n        minH: l.minH,\n        minW: l.minW,\n        maxH: l.maxH,\n        maxW: l.maxW,\n        static: l.static,\n        droppingPosition: isDroppingItem ? droppingPosition : undefined,\n        resizeHandles: resizeHandlesOptions,\n        resizeHandle: resizeHandle\n      }, child);\n    } // Called while dragging an element. Part of browser native drag/drop API.\n    // Native event target might be the layout itself, or an element within the layout.\n\n  }, {\n    key: \"render\",\n    value: function render()\n    /*: React.Element<\"div\">*/\n    {\n      var _this2 = this;\n\n      var _this$props9 = this.props,\n          className = _this$props9.className,\n          style = _this$props9.style,\n          isDroppable = _this$props9.isDroppable,\n          innerRef = _this$props9.innerRef;\n      var mergedClassName = (0, _clsx.default)(layoutClassName, className);\n\n      var mergedStyle = _objectSpread({\n        height: this.containerHeight()\n      }, style);\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: innerRef,\n        className: mergedClassName,\n        style: mergedStyle,\n        onDrop: isDroppable ? this.onDrop : _utils.noop,\n        onDragLeave: isDroppable ? this.onDragLeave : _utils.noop,\n        onDragEnter: isDroppable ? this.onDragEnter : _utils.noop,\n        onDragOver: isDroppable ? this.onDragOver : _utils.noop\n      }, React.Children.map(this.props.children, function (child) {\n        return _this2.processGridItem(child);\n      }), isDroppable && this.state.droppingDOMNode && this.processGridItem(this.state.droppingDOMNode, true), this.placeholder());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps\n    /*: Props*/\n    , prevState\n    /*: State*/\n    )\n    /*: $Shape<State> | null*/\n    {\n      var newLayoutBase;\n\n      if (prevState.activeDrag) {\n        return null;\n      } // Legacy support for compactType\n      // Allow parent to set layout directly.\n\n\n      if (!(0, _lodash.default)(nextProps.layout, prevState.propsLayout) || nextProps.compactType !== prevState.compactType) {\n        newLayoutBase = nextProps.layout;\n      } else if (!(0, _utils.childrenEqual)(nextProps.children, prevState.children)) {\n        // If children change, also regenerate the layout. Use our state\n        // as the base in case because it may be more up to date than\n        // what is in props.\n        newLayoutBase = prevState.layout;\n      } // We need to regenerate the layout.\n\n\n      if (newLayoutBase) {\n        var newLayout = (0, _utils.synchronizeLayoutWithChildren)(newLayoutBase, nextProps.children, nextProps.cols, (0, _utils.compactType)(nextProps), nextProps.allowOverlap);\n        return {\n          layout: newLayout,\n          // We need to save these props to state for using\n          // getDerivedStateFromProps instead of componentDidMount (in which we would get extra rerender)\n          compactType: nextProps.compactType,\n          children: nextProps.children,\n          propsLayout: nextProps.layout\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return ReactGridLayout;\n}(React.Component);\n\nexports.default = ReactGridLayout;\n\n_defineProperty(ReactGridLayout, \"displayName\", \"ReactGridLayout\");\n\n_defineProperty(ReactGridLayout, \"propTypes\", _ReactGridLayoutPropTypes.default);\n\n_defineProperty(ReactGridLayout, \"defaultProps\", {\n  autoSize: true,\n  cols: 12,\n  className: \"\",\n  style: {},\n  draggableHandle: \"\",\n  draggableCancel: \"\",\n  containerPadding: null,\n  rowHeight: 150,\n  maxRows: Infinity,\n  // infinite vertical growth\n  layout: [],\n  margin: [10, 10],\n  isBounded: false,\n  isDraggable: true,\n  isResizable: true,\n  allowOverlap: false,\n  isDroppable: false,\n  useCSSTransforms: true,\n  transformScale: 1,\n  verticalCompact: true,\n  compactType: \"vertical\",\n  preventCollision: false,\n  droppingItem: {\n    i: \"__dropping-elem__\",\n    h: 1,\n    w: 1\n  },\n  resizeHandles: [\"se\"],\n  onLayoutChange: _utils.noop,\n  onDragStart: _utils.noop,\n  onDrag: _utils.noop,\n  onDragStop: _utils.noop,\n  onResizeStart: _utils.noop,\n  onResize: _utils.noop,\n  onResizeStop: _utils.noop,\n  onDrop: _utils.noop,\n  onDropDragOver: _utils.noop\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resizeHandleType = exports.resizeHandleAxesType = exports.default = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Defines which resize handles should be rendered (default: 'se')\n// Allows for any combination of:\n// 's' - South handle (bottom-center)\n// 'w' - West handle (left-center)\n// 'e' - East handle (right-center)\n// 'n' - North handle (top-center)\n// 'sw' - Southwest handle (bottom-left)\n// 'nw' - Northwest handle (top-left)\n// 'se' - Southeast handle (bottom-right)\n// 'ne' - Northeast handle (top-right)\nvar resizeHandleAxesType\n/*: ReactPropsChainableTypeChecker*/\n= _propTypes.default.arrayOf(_propTypes.default.oneOf([\"s\", \"w\", \"e\", \"n\", \"sw\", \"nw\", \"se\", \"ne\"])); // Custom component for resize handles\n\n\nexports.resizeHandleAxesType = resizeHandleAxesType;\n\nvar resizeHandleType\n/*: ReactPropsChainableTypeChecker*/\n= _propTypes.default.oneOfType([_propTypes.default.node, _propTypes.default.func]);\n/*:: export type Props = {|\n  className: string,\n  style: Object,\n  width: number,\n  autoSize: boolean,\n  cols: number,\n  draggableCancel: string,\n  draggableHandle: string,\n  verticalCompact: boolean,\n  compactType: CompactType,\n  layout: Layout,\n  margin: [number, number],\n  containerPadding: ?[number, number],\n  rowHeight: number,\n  maxRows: number,\n  isBounded: boolean,\n  isDraggable: boolean,\n  isResizable: boolean,\n  isDroppable: boolean,\n  preventCollision: boolean,\n  useCSSTransforms: boolean,\n  transformScale: number,\n  droppingItem: $Shape<LayoutItem>,\n  resizeHandles: ResizeHandleAxis[],\n  resizeHandle?: ResizeHandle,\n  allowOverlap: boolean,\n\n  // Callbacks\n  onLayoutChange: Layout => void,\n  onDrag: EventCallback,\n  onDragStart: EventCallback,\n  onDragStop: EventCallback,\n  onResize: EventCallback,\n  onResizeStart: EventCallback,\n  onResizeStop: EventCallback,\n  onDropDragOver: (e: DragOverEvent) => ?({| w?: number, h?: number |} | false),\n  onDrop: (layout: Layout, item: ?LayoutItem, e: Event) => void,\n  children: ReactChildrenArray<ReactElement<any>>,\n  innerRef?: Ref<\"div\">\n|};*/\n\n/*:: export type DefaultProps = $Diff<\n  Props,\n  {\n    children: ReactChildrenArray<ReactElement<any>>,\n    width: number\n  }\n>;*/\n\n\nexports.resizeHandleType = resizeHandleType;\nvar _default = {\n  //\n  // Basic props\n  //\n  className: _propTypes.default.string,\n  style: _propTypes.default.object,\n  // This can be set explicitly. If it is not set, it will automatically\n  // be set to the container width. Note that resizes will *not* cause this to adjust.\n  // If you need that behavior, use WidthProvider.\n  width: _propTypes.default.number,\n  // If true, the container height swells and contracts to fit contents\n  autoSize: _propTypes.default.bool,\n  // # of cols.\n  cols: _propTypes.default.number,\n  // A selector that will not be draggable.\n  draggableCancel: _propTypes.default.string,\n  // A selector for the draggable handler\n  draggableHandle: _propTypes.default.string,\n  // Deprecated\n  verticalCompact: function verticalCompact(props\n  /*: Props*/\n  ) {\n    if (props.verticalCompact === false && process.env.NODE_ENV !== \"production\") {\n      console.warn( // eslint-disable-line no-console\n      \"`verticalCompact` on <ReactGridLayout> is deprecated and will be removed soon. \" + 'Use `compactType`: \"horizontal\" | \"vertical\" | null.');\n    }\n  },\n  // Choose vertical or hotizontal compaction\n  compactType: (_propTypes.default.oneOf([\"vertical\", \"horizontal\"])\n  /*: ReactPropsChainableTypeChecker*/\n  ),\n  // layout is an array of object with the format:\n  // {x: Number, y: Number, w: Number, h: Number, i: String}\n  layout: function layout(props\n  /*: Props*/\n  ) {\n    var layout = props.layout; // I hope you're setting the data-grid property on the grid items\n\n    if (layout === undefined) return;\n\n    require(\"./utils\").validateLayout(layout, \"layout\");\n  },\n  //\n  // Grid Dimensions\n  //\n  // Margin between items [x, y] in px\n  margin: (_propTypes.default.arrayOf(_propTypes.default.number)\n  /*: ReactPropsChainableTypeChecker*/\n  ),\n  // Padding inside the container [x, y] in px\n  containerPadding: (_propTypes.default.arrayOf(_propTypes.default.number)\n  /*: ReactPropsChainableTypeChecker*/\n  ),\n  // Rows have a static height, but you can change this based on breakpoints if you like\n  rowHeight: _propTypes.default.number,\n  // Default Infinity, but you can specify a max here if you like.\n  // Note that this isn't fully fleshed out and won't error if you specify a layout that\n  // extends beyond the row capacity. It will, however, not allow users to drag/resize\n  // an item past the barrier. They can push items beyond the barrier, though.\n  // Intentionally not documented for this reason.\n  maxRows: _propTypes.default.number,\n  //\n  // Flags\n  //\n  isBounded: _propTypes.default.bool,\n  isDraggable: _propTypes.default.bool,\n  isResizable: _propTypes.default.bool,\n  // If true, grid can be placed one over the other.\n  allowOverlap: _propTypes.default.bool,\n  // If true, grid items won't change position when being dragged over.\n  preventCollision: _propTypes.default.bool,\n  // Use CSS transforms instead of top/left\n  useCSSTransforms: _propTypes.default.bool,\n  // parent layout transform scale\n  transformScale: _propTypes.default.number,\n  // If true, an external element can trigger onDrop callback with a specific grid position as a parameter\n  isDroppable: _propTypes.default.bool,\n  // Resize handle options\n  resizeHandles: resizeHandleAxesType,\n  resizeHandle: resizeHandleType,\n  //\n  // Callbacks\n  //\n  // Callback so you can save the layout. Calls after each drag & resize stops.\n  onLayoutChange: _propTypes.default.func,\n  // Calls when drag starts. Callback is of the signature (layout, oldItem, newItem, placeholder, e, ?node).\n  // All callbacks below have the same signature. 'start' and 'stop' callbacks omit the 'placeholder'.\n  onDragStart: _propTypes.default.func,\n  // Calls on each drag movement.\n  onDrag: _propTypes.default.func,\n  // Calls when drag is complete.\n  onDragStop: _propTypes.default.func,\n  //Calls when resize starts.\n  onResizeStart: _propTypes.default.func,\n  // Calls when resize movement happens.\n  onResize: _propTypes.default.func,\n  // Calls when resize is complete.\n  onResizeStop: _propTypes.default.func,\n  // Calls when some element is dropped.\n  onDrop: _propTypes.default.func,\n  //\n  // Other validations\n  //\n  droppingItem: (_propTypes.default.shape({\n    i: _propTypes.default.string.isRequired,\n    w: _propTypes.default.number.isRequired,\n    h: _propTypes.default.number.isRequired\n  })\n  /*: ReactPropsChainableTypeChecker*/\n  ),\n  // Children must not have duplicate keys.\n  children: function children(props\n  /*: Props*/\n  , propName\n  /*: string*/\n  ) {\n    var children = props[propName]; // Check children keys for duplicates. Throw if found.\n\n    var keys = {};\n\n    _react.default.Children.forEach(children, function (child) {\n      if ((child === null || child === void 0 ? void 0 : child.key) == null) return;\n\n      if (keys[child.key]) {\n        throw new Error('Duplicate child key \"' + child.key + '\" found! This will cause problems in ReactGridLayout.');\n      }\n\n      keys[child.key] = true;\n    });\n  },\n  // Optional ref for getting a reference for the wrapping div.\n  innerRef: _propTypes.default.any\n};\nexports.default = _default;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash.isequal\"));\n\nvar _utils = require(\"./utils\");\n\nvar _responsiveUtils = require(\"./responsiveUtils\");\n\nvar _ReactGridLayout = _interopRequireDefault(require(\"./ReactGridLayout\"));\n\nvar _excluded = [\"breakpoint\", \"breakpoints\", \"cols\", \"layouts\", \"margin\", \"containerPadding\", \"onBreakpointChange\", \"onLayoutChange\", \"onWidthChange\"];\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// $FlowFixMe[method-unbinding]\nvar type = function type(obj) {\n  return Object.prototype.toString.call(obj);\n};\n/**\n * Get a value of margin or containerPadding.\n *\n * @param  {Array | Object} param Margin | containerPadding, e.g. [10, 10] | {lg: [10, 10], ...}.\n * @param  {String} breakpoint   Breakpoint: lg, md, sm, xs and etc.\n * @return {Array}\n */\n\n\nfunction getIndentationValue\n/*:: <T: ?[number, number]>*/\n(param\n/*: { [key: string]: T } | T*/\n, breakpoint\n/*: string*/\n)\n/*: T*/\n{\n  // $FlowIgnore TODO fix this typedef\n  if (param == null) return null; // $FlowIgnore TODO fix this typedef\n\n  return Array.isArray(param) ? param : param[breakpoint];\n}\n/*:: type State = {\n  layout: Layout,\n  breakpoint: string,\n  cols: number,\n  layouts?: ResponsiveLayout<string>\n};*/\n\n/*:: type Props<Breakpoint: string = string> = {|\n  ...React.ElementConfig<typeof ReactGridLayout>,\n\n  // Responsive config\n  breakpoint?: ?Breakpoint,\n  breakpoints: Breakpoints<Breakpoint>,\n  cols: { [key: Breakpoint]: number },\n  layouts: ResponsiveLayout<Breakpoint>,\n  width: number,\n  margin: { [key: Breakpoint]: [number, number] } | [number, number],\n  /* prettier-ignore *-/\n  containerPadding: { [key: Breakpoint]: ?[number, number] } | ?[number, number],\n\n  // Callbacks\n  onBreakpointChange: (Breakpoint, cols: number) => void,\n  onLayoutChange: OnLayoutChangeCallback,\n  onWidthChange: (\n    containerWidth: number,\n    margin: [number, number],\n    cols: number,\n    containerPadding: ?[number, number]\n  ) => void\n|};*/\n\n/*:: type DefaultProps = Pick<\n  Props<>,\n  {|\n    allowOverlap: 0,\n    breakpoints: 0,\n    cols: 0,\n    containerPadding: 0,\n    layouts: 0,\n    margin: 0,\n    onBreakpointChange: 0,\n    onLayoutChange: 0,\n    onWidthChange: 0\n  |}\n>;*/\n\n\nvar ResponsiveReactGridLayout = /*#__PURE__*/function (_React$Component) {\n  _inherits(ResponsiveReactGridLayout, _React$Component);\n\n  var _super = _createSuper(ResponsiveReactGridLayout);\n\n  function ResponsiveReactGridLayout() {\n    var _this;\n\n    _classCallCheck(this, ResponsiveReactGridLayout);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", _this.generateInitialState());\n\n    _defineProperty(_assertThisInitialized(_this), \"onLayoutChange\", function (layout\n    /*: Layout*/\n    ) {\n      _this.props.onLayoutChange(layout, _objectSpread(_objectSpread({}, _this.props.layouts), {}, _defineProperty({}, _this.state.breakpoint, layout)));\n    });\n\n    return _this;\n  }\n\n  _createClass(ResponsiveReactGridLayout, [{\n    key: \"generateInitialState\",\n    value: function generateInitialState()\n    /*: State*/\n    {\n      var _this$props = this.props,\n          width = _this$props.width,\n          breakpoints = _this$props.breakpoints,\n          layouts = _this$props.layouts,\n          cols = _this$props.cols;\n      var breakpoint = (0, _responsiveUtils.getBreakpointFromWidth)(breakpoints, width);\n      var colNo = (0, _responsiveUtils.getColsFromBreakpoint)(breakpoint, cols); // verticalCompact compatibility, now deprecated\n\n      var compactType = this.props.verticalCompact === false ? null : this.props.compactType; // Get the initial layout. This can tricky; we try to generate one however possible if one doesn't exist\n      // for this layout.\n\n      var initialLayout = (0, _responsiveUtils.findOrGenerateResponsiveLayout)(layouts, breakpoints, breakpoint, breakpoint, colNo, compactType);\n      return {\n        layout: initialLayout,\n        breakpoint: breakpoint,\n        cols: colNo\n      };\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps\n    /*: Props<*>*/\n    ) {\n      // Allow parent to set width or breakpoint directly.\n      if (this.props.width != prevProps.width || this.props.breakpoint !== prevProps.breakpoint || !(0, _lodash.default)(this.props.breakpoints, prevProps.breakpoints) || !(0, _lodash.default)(this.props.cols, prevProps.cols)) {\n        this.onWidthChange(prevProps);\n      }\n    } // wrap layouts so we do not need to pass layouts to child\n\n  }, {\n    key: \"onWidthChange\",\n    value:\n    /**\n     * When the width changes work through breakpoints and reset state with the new width & breakpoint.\n     * Width changes are necessary to figure out the widget widths.\n     */\n    function onWidthChange(prevProps\n    /*: Props<*>*/\n    ) {\n      var _this$props2 = this.props,\n          breakpoints = _this$props2.breakpoints,\n          cols = _this$props2.cols,\n          layouts = _this$props2.layouts,\n          compactType = _this$props2.compactType;\n      var newBreakpoint = this.props.breakpoint || (0, _responsiveUtils.getBreakpointFromWidth)(this.props.breakpoints, this.props.width);\n      var lastBreakpoint = this.state.breakpoint;\n      var newCols\n      /*: number*/\n      = (0, _responsiveUtils.getColsFromBreakpoint)(newBreakpoint, cols);\n\n      var newLayouts = _objectSpread({}, layouts); // Breakpoint change\n\n\n      if (lastBreakpoint !== newBreakpoint || prevProps.breakpoints !== breakpoints || prevProps.cols !== cols) {\n        // Preserve the current layout if the current breakpoint is not present in the next layouts.\n        if (!(lastBreakpoint in newLayouts)) newLayouts[lastBreakpoint] = (0, _utils.cloneLayout)(this.state.layout); // Find or generate a new layout.\n\n        var layout = (0, _responsiveUtils.findOrGenerateResponsiveLayout)(newLayouts, breakpoints, newBreakpoint, lastBreakpoint, newCols, compactType); // This adds missing items.\n\n        layout = (0, _utils.synchronizeLayoutWithChildren)(layout, this.props.children, newCols, compactType, this.props.allowOverlap); // Store the new layout.\n\n        newLayouts[newBreakpoint] = layout; // callbacks\n\n        this.props.onLayoutChange(layout, newLayouts);\n        this.props.onBreakpointChange(newBreakpoint, newCols);\n        this.setState({\n          breakpoint: newBreakpoint,\n          layout: layout,\n          cols: newCols\n        });\n      }\n\n      var margin = getIndentationValue(this.props.margin, newBreakpoint);\n      var containerPadding = getIndentationValue(this.props.containerPadding, newBreakpoint); //call onWidthChange on every change of width, not only on breakpoint changes\n\n      this.props.onWidthChange(this.props.width, margin, newCols, containerPadding);\n    }\n  }, {\n    key: \"render\",\n    value: function render()\n    /*: React.Element<typeof ReactGridLayout>*/\n    {\n      /* eslint-disable no-unused-vars */\n      var _this$props3 = this.props,\n          breakpoint = _this$props3.breakpoint,\n          breakpoints = _this$props3.breakpoints,\n          cols = _this$props3.cols,\n          layouts = _this$props3.layouts,\n          margin = _this$props3.margin,\n          containerPadding = _this$props3.containerPadding,\n          onBreakpointChange = _this$props3.onBreakpointChange,\n          onLayoutChange = _this$props3.onLayoutChange,\n          onWidthChange = _this$props3.onWidthChange,\n          other = _objectWithoutProperties(_this$props3, _excluded);\n      /* eslint-enable no-unused-vars */\n\n\n      return /*#__PURE__*/React.createElement(_ReactGridLayout.default, _extends({}, other, {\n        // $FlowIgnore should allow nullable here due to DefaultProps\n        margin: getIndentationValue(margin, this.state.breakpoint),\n        containerPadding: getIndentationValue(containerPadding, this.state.breakpoint),\n        onLayoutChange: this.onLayoutChange,\n        layout: this.state.layout,\n        cols: this.state.cols\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps\n    /*: Props<*>*/\n    , prevState\n    /*: State*/\n    )\n    /*: ?$Shape<State>*/\n    {\n      if (!(0, _lodash.default)(nextProps.layouts, prevState.layouts)) {\n        // Allow parent to set layouts directly.\n        var breakpoint = prevState.breakpoint,\n            _cols = prevState.cols; // Since we're setting an entirely new layout object, we must generate a new responsive layout\n        // if one does not exist.\n\n        var newLayout = (0, _responsiveUtils.findOrGenerateResponsiveLayout)(nextProps.layouts, nextProps.breakpoints, breakpoint, breakpoint, _cols, nextProps.compactType);\n        return {\n          layout: newLayout,\n          layouts: nextProps.layouts\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return ResponsiveReactGridLayout;\n}(React.Component);\n\nexports.default = ResponsiveReactGridLayout;\n\n_defineProperty(ResponsiveReactGridLayout, \"propTypes\", {\n  //\n  // Basic props\n  //\n  // Optional, but if you are managing width yourself you may want to set the breakpoint\n  // yourself as well.\n  breakpoint: _propTypes.default.string,\n  // {name: pxVal}, e.g. {lg: 1200, md: 996, sm: 768, xs: 480}\n  breakpoints: _propTypes.default.object,\n  allowOverlap: _propTypes.default.bool,\n  // # of cols. This is a breakpoint -> cols map\n  cols: _propTypes.default.object,\n  // # of margin. This is a breakpoint -> margin map\n  // e.g. { lg: [5, 5], md: [10, 10], sm: [15, 15] }\n  // Margin between items [x, y] in px\n  // e.g. [10, 10]\n  margin: _propTypes.default.oneOfType([_propTypes.default.array, _propTypes.default.object]),\n  // # of containerPadding. This is a breakpoint -> containerPadding map\n  // e.g. { lg: [5, 5], md: [10, 10], sm: [15, 15] }\n  // Padding inside the container [x, y] in px\n  // e.g. [10, 10]\n  containerPadding: _propTypes.default.oneOfType([_propTypes.default.array, _propTypes.default.object]),\n  // layouts is an object mapping breakpoints to layouts.\n  // e.g. {lg: Layout, md: Layout, ...}\n  layouts: function layouts(props\n  /*: Props<>*/\n  , propName\n  /*: string*/\n  ) {\n    if (type(props[propName]) !== \"[object Object]\") {\n      throw new Error(\"Layout property must be an object. Received: \" + type(props[propName]));\n    }\n\n    Object.keys(props[propName]).forEach(function (key) {\n      if (!(key in props.breakpoints)) {\n        throw new Error(\"Each key in layouts must align with a key in breakpoints.\");\n      }\n\n      (0, _utils.validateLayout)(props.layouts[key], \"layouts.\" + key);\n    });\n  },\n  // The width of this component.\n  // Required in this propTypes stanza because generateInitialState() will fail without it.\n  width: _propTypes.default.number.isRequired,\n  //\n  // Callbacks\n  //\n  // Calls back with breakpoint and new # cols\n  onBreakpointChange: _propTypes.default.func,\n  // Callback so you can save the layout.\n  // Calls back with (currentLayout, allLayouts). allLayouts are keyed by breakpoint.\n  onLayoutChange: _propTypes.default.func,\n  // Calls back with (containerWidth, margin, cols, containerPadding)\n  onWidthChange: _propTypes.default.func\n});\n\n_defineProperty(ResponsiveReactGridLayout, \"defaultProps\", {\n  breakpoints: {\n    lg: 1200,\n    md: 996,\n    sm: 768,\n    xs: 480,\n    xxs: 0\n  },\n  cols: {\n    lg: 12,\n    md: 10,\n    sm: 6,\n    xs: 4,\n    xxs: 2\n  },\n  containerPadding: {\n    lg: null,\n    md: null,\n    sm: null,\n    xs: null,\n    xxs: null\n  },\n  layouts: {},\n  margin: [10, 10],\n  allowOverlap: false,\n  onBreakpointChange: _utils.noop,\n  onLayoutChange: _utils.noop,\n  onWidthChange: _utils.noop\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calcGridColWidth = calcGridColWidth;\nexports.calcGridItemPosition = calcGridItemPosition;\nexports.calcGridItemWHPx = calcGridItemWHPx;\nexports.calcWH = calcWH;\nexports.calcXY = calcXY;\nexports.clamp = clamp;\n\n/*:: import type { Position } from \"./utils\";*/\n\n/*:: export type PositionParams = {\n  margin: [number, number],\n  containerPadding: [number, number],\n  containerWidth: number,\n  cols: number,\n  rowHeight: number,\n  maxRows: number\n};*/\n// Helper for generating column width\nfunction calcGridColWidth(positionParams\n/*: PositionParams*/\n)\n/*: number*/\n{\n  var margin = positionParams.margin,\n      containerPadding = positionParams.containerPadding,\n      containerWidth = positionParams.containerWidth,\n      cols = positionParams.cols;\n  return (containerWidth - margin[0] * (cols - 1) - containerPadding[0] * 2) / cols;\n} // This can either be called:\n// calcGridItemWHPx(w, colWidth, margin[0])\n// or\n// calcGridItemWHPx(h, rowHeight, margin[1])\n\n\nfunction calcGridItemWHPx(gridUnits\n/*: number*/\n, colOrRowSize\n/*: number*/\n, marginPx\n/*: number*/\n)\n/*: number*/\n{\n  // 0 * Infinity === NaN, which causes problems with resize contraints\n  if (!Number.isFinite(gridUnits)) return gridUnits;\n  return Math.round(colOrRowSize * gridUnits + Math.max(0, gridUnits - 1) * marginPx);\n}\n/**\n * Return position on the page given an x, y, w, h.\n * left, top, width, height are all in pixels.\n * @param  {PositionParams} positionParams  Parameters of grid needed for coordinates calculations.\n * @param  {Number}  x                      X coordinate in grid units.\n * @param  {Number}  y                      Y coordinate in grid units.\n * @param  {Number}  w                      W coordinate in grid units.\n * @param  {Number}  h                      H coordinate in grid units.\n * @return {Position}                       Object containing coords.\n */\n\n\nfunction calcGridItemPosition(positionParams\n/*: PositionParams*/\n, x\n/*: number*/\n, y\n/*: number*/\n, w\n/*: number*/\n, h\n/*: number*/\n, state\n/*: ?Object*/\n)\n/*: Position*/\n{\n  var margin = positionParams.margin,\n      containerPadding = positionParams.containerPadding,\n      rowHeight = positionParams.rowHeight;\n  var colWidth = calcGridColWidth(positionParams);\n  var out = {}; // If resizing, use the exact width and height as returned from resizing callbacks.\n\n  if (state && state.resizing) {\n    out.width = Math.round(state.resizing.width);\n    out.height = Math.round(state.resizing.height);\n  } // Otherwise, calculate from grid units.\n  else {\n    out.width = calcGridItemWHPx(w, colWidth, margin[0]);\n    out.height = calcGridItemWHPx(h, rowHeight, margin[1]);\n  } // If dragging, use the exact width and height as returned from dragging callbacks.\n\n\n  if (state && state.dragging) {\n    out.top = Math.round(state.dragging.top);\n    out.left = Math.round(state.dragging.left);\n  } // Otherwise, calculate from grid units.\n  else {\n    out.top = Math.round((rowHeight + margin[1]) * y + containerPadding[1]);\n    out.left = Math.round((colWidth + margin[0]) * x + containerPadding[0]);\n  }\n\n  return out;\n}\n/**\n * Translate x and y coordinates from pixels to grid units.\n * @param  {PositionParams} positionParams  Parameters of grid needed for coordinates calculations.\n * @param  {Number} top                     Top position (relative to parent) in pixels.\n * @param  {Number} left                    Left position (relative to parent) in pixels.\n * @param  {Number} w                       W coordinate in grid units.\n * @param  {Number} h                       H coordinate in grid units.\n * @return {Object}                         x and y in grid units.\n */\n\n\nfunction calcXY(positionParams\n/*: PositionParams*/\n, top\n/*: number*/\n, left\n/*: number*/\n, w\n/*: number*/\n, h\n/*: number*/\n)\n/*: { x: number, y: number }*/\n{\n  var margin = positionParams.margin,\n      cols = positionParams.cols,\n      rowHeight = positionParams.rowHeight,\n      maxRows = positionParams.maxRows;\n  var colWidth = calcGridColWidth(positionParams); // left = colWidth * x + margin * (x + 1)\n  // l = cx + m(x+1)\n  // l = cx + mx + m\n  // l - m = cx + mx\n  // l - m = x(c + m)\n  // (l - m) / (c + m) = x\n  // x = (left - margin) / (coldWidth + margin)\n\n  var x = Math.round((left - margin[0]) / (colWidth + margin[0]));\n  var y = Math.round((top - margin[1]) / (rowHeight + margin[1])); // Capping\n\n  x = clamp(x, 0, cols - w);\n  y = clamp(y, 0, maxRows - h);\n  return {\n    x: x,\n    y: y\n  };\n}\n/**\n * Given a height and width in pixel values, calculate grid units.\n * @param  {PositionParams} positionParams  Parameters of grid needed for coordinates calcluations.\n * @param  {Number} height                  Height in pixels.\n * @param  {Number} width                   Width in pixels.\n * @param  {Number} x                       X coordinate in grid units.\n * @param  {Number} y                       Y coordinate in grid units.\n * @return {Object}                         w, h as grid units.\n */\n\n\nfunction calcWH(positionParams\n/*: PositionParams*/\n, width\n/*: number*/\n, height\n/*: number*/\n, x\n/*: number*/\n, y\n/*: number*/\n)\n/*: { w: number, h: number }*/\n{\n  var margin = positionParams.margin,\n      maxRows = positionParams.maxRows,\n      cols = positionParams.cols,\n      rowHeight = positionParams.rowHeight;\n  var colWidth = calcGridColWidth(positionParams); // width = colWidth * w - (margin * (w - 1))\n  // ...\n  // w = (width + margin) / (colWidth + margin)\n\n  var w = Math.round((width + margin[0]) / (colWidth + margin[0]));\n  var h = Math.round((height + margin[1]) / (rowHeight + margin[1])); // Capping\n\n  w = clamp(w, 0, cols - x);\n  h = clamp(h, 0, maxRows - y);\n  return {\n    w: w,\n    h: h\n  };\n} // Similar to _.clamp\n\n\nfunction clamp(num\n/*: number*/\n, lowerBound\n/*: number*/\n, upperBound\n/*: number*/\n)\n/*: number*/\n{\n  return Math.max(Math.min(num, upperBound), lowerBound);\n}","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = WidthProvideRGL;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar _excluded = [\"measureBeforeMount\"];\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar layoutClassName = \"react-grid-layout\";\n/*\n * A simple HOC that provides facility for listening to container resizes.\n *\n * The Flow type is pretty janky here. I can't just spread `WPProps` into this returned object - I wish I could - but it triggers\n * a flow bug of some sort that causes it to stop typechecking.\n */\n\nfunction WidthProvideRGL\n/*:: <Config>*/\n(ComposedComponent\n/*: React.AbstractComponent<Config>*/\n)\n/*: React.AbstractComponent<ComposedProps<Config>>*/\n{\n  var _class;\n\n  return _class = /*#__PURE__*/function (_React$Component) {\n    _inherits(WidthProvider, _React$Component);\n\n    var _super = _createSuper(WidthProvider);\n\n    function WidthProvider() {\n      var _this;\n\n      _classCallCheck(this, WidthProvider);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n\n      _defineProperty(_assertThisInitialized(_this), \"state\", {\n        width: 1280\n      });\n\n      _defineProperty(_assertThisInitialized(_this), \"elementRef\", /*#__PURE__*/React.createRef());\n\n      _defineProperty(_assertThisInitialized(_this), \"mounted\", false);\n\n      _defineProperty(_assertThisInitialized(_this), \"onWindowResize\", function () {\n        if (!_this.mounted) return;\n        var node = _this.elementRef.current; // Flow casts this to Text | Element\n        // fix: grid position error when node or parentNode display is none by window resize\n        // #924 #1084\n\n        if (node instanceof HTMLElement && node.offsetWidth) {\n          _this.setState({\n            width: node.offsetWidth\n          });\n        }\n      });\n\n      return _this;\n    }\n\n    _createClass(WidthProvider, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        this.mounted = true;\n        window.addEventListener(\"resize\", this.onWindowResize); // Call to properly set the breakpoint and resize the elements.\n        // Note that if you're doing a full-width element, this can get a little wonky if a scrollbar\n        // appears because of the grid. In that case, fire your own resize event, or set `overflow: scroll` on your body.\n\n        this.onWindowResize();\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this.mounted = false;\n        window.removeEventListener(\"resize\", this.onWindowResize);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this$props = this.props,\n            measureBeforeMount = _this$props.measureBeforeMount,\n            rest = _objectWithoutProperties(_this$props, _excluded);\n\n        if (measureBeforeMount && !this.mounted) {\n          return /*#__PURE__*/React.createElement(\"div\", {\n            className: (0, _clsx.default)(this.props.className, layoutClassName),\n            style: this.props.style // $FlowIgnore ref types\n            ,\n            ref: this.elementRef\n          });\n        }\n\n        return /*#__PURE__*/React.createElement(ComposedComponent, _extends({\n          innerRef: this.elementRef\n        }, rest, this.state));\n      }\n    }]);\n\n    return WidthProvider;\n  }(React.Component), _defineProperty(_class, \"defaultProps\", {\n    measureBeforeMount: false\n  }), _defineProperty(_class, \"propTypes\", {\n    // If true, will not render children until mounted. Useful for getting the exact width before\n    // rendering, to prevent any unsightly resizing.\n    measureBeforeMount: _propTypes.default.bool\n  }), _class;\n}","// this file was prevaled\nmodule.exports = function fastRGLPropsEqual(a, b, isEqualImpl) {\n  if (a === b) return true;\n  return a.className === b.className && isEqualImpl(a.style, b.style) && a.width === b.width && a.autoSize === b.autoSize && a.cols === b.cols && a.draggableCancel === b.draggableCancel && a.draggableHandle === b.draggableHandle && isEqualImpl(a.verticalCompact, b.verticalCompact) && isEqualImpl(a.compactType, b.compactType) && isEqualImpl(a.layout, b.layout) && isEqualImpl(a.margin, b.margin) && isEqualImpl(a.containerPadding, b.containerPadding) && a.rowHeight === b.rowHeight && a.maxRows === b.maxRows && a.isBounded === b.isBounded && a.isDraggable === b.isDraggable && a.isResizable === b.isResizable && a.allowOverlap === b.allowOverlap && a.preventCollision === b.preventCollision && a.useCSSTransforms === b.useCSSTransforms && a.transformScale === b.transformScale && a.isDroppable === b.isDroppable && isEqualImpl(a.resizeHandles, b.resizeHandles) && isEqualImpl(a.resizeHandle, b.resizeHandle) && a.onLayoutChange === b.onLayoutChange && a.onDragStart === b.onDragStart && a.onDrag === b.onDrag && a.onDragStop === b.onDragStop && a.onResizeStart === b.onResizeStart && a.onResize === b.onResize && a.onResizeStop === b.onResizeStop && a.onDrop === b.onDrop && isEqualImpl(a.droppingItem, b.droppingItem) && isEqualImpl(a.innerRef, b.innerRef);\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.findOrGenerateResponsiveLayout = findOrGenerateResponsiveLayout;\nexports.getBreakpointFromWidth = getBreakpointFromWidth;\nexports.getColsFromBreakpoint = getColsFromBreakpoint;\nexports.sortBreakpoints = sortBreakpoints;\n\nvar _utils = require(\"./utils\");\n\n/**\n * Given a width, find the highest breakpoint that matches is valid for it (width > breakpoint).\n *\n * @param  {Object} breakpoints Breakpoints object (e.g. {lg: 1200, md: 960, ...})\n * @param  {Number} width Screen width.\n * @return {String}       Highest breakpoint that is less than width.\n */\nfunction getBreakpointFromWidth(breakpoints\n/*: Breakpoints<Breakpoint>*/\n, width\n/*: number*/\n)\n/*: Breakpoint*/\n{\n  var sorted = sortBreakpoints(breakpoints);\n  var matching = sorted[0];\n\n  for (var i = 1, len = sorted.length; i < len; i++) {\n    var breakpointName = sorted[i];\n    if (width > breakpoints[breakpointName]) matching = breakpointName;\n  }\n\n  return matching;\n}\n/**\n * Given a breakpoint, get the # of cols set for it.\n * @param  {String} breakpoint Breakpoint name.\n * @param  {Object} cols       Map of breakpoints to cols.\n * @return {Number}            Number of cols.\n */\n\n\nfunction getColsFromBreakpoint(breakpoint\n/*: Breakpoint*/\n, cols\n/*: Breakpoints<Breakpoint>*/\n)\n/*: number*/\n{\n  if (!cols[breakpoint]) {\n    throw new Error(\"ResponsiveReactGridLayout: `cols` entry for breakpoint \" + breakpoint + \" is missing!\");\n  }\n\n  return cols[breakpoint];\n}\n/**\n * Given existing layouts and a new breakpoint, find or generate a new layout.\n *\n * This finds the layout above the new one and generates from it, if it exists.\n *\n * @param  {Object} layouts     Existing layouts.\n * @param  {Array} breakpoints All breakpoints.\n * @param  {String} breakpoint New breakpoint.\n * @param  {String} breakpoint Last breakpoint (for fallback).\n * @param  {Number} cols       Column count at new breakpoint.\n * @param  {Boolean} verticalCompact Whether or not to compact the layout\n *   vertically.\n * @return {Array}             New layout.\n */\n\n\nfunction findOrGenerateResponsiveLayout(layouts\n/*: ResponsiveLayout<Breakpoint>*/\n, breakpoints\n/*: Breakpoints<Breakpoint>*/\n, breakpoint\n/*: Breakpoint*/\n, lastBreakpoint\n/*: Breakpoint*/\n, cols\n/*: number*/\n, compactType\n/*: CompactType*/\n)\n/*: Layout*/\n{\n  // If it already exists, just return it.\n  if (layouts[breakpoint]) return (0, _utils.cloneLayout)(layouts[breakpoint]); // Find or generate the next layout\n\n  var layout = layouts[lastBreakpoint];\n  var breakpointsSorted = sortBreakpoints(breakpoints);\n  var breakpointsAbove = breakpointsSorted.slice(breakpointsSorted.indexOf(breakpoint));\n\n  for (var i = 0, len = breakpointsAbove.length; i < len; i++) {\n    var b = breakpointsAbove[i];\n\n    if (layouts[b]) {\n      layout = layouts[b];\n      break;\n    }\n  }\n\n  layout = (0, _utils.cloneLayout)(layout || []); // clone layout so we don't modify existing items\n\n  return (0, _utils.compact)((0, _utils.correctBounds)(layout, {\n    cols: cols\n  }), compactType, cols);\n}\n/**\n * Given breakpoints, return an array of breakpoints sorted by width. This is usually\n * e.g. ['xxs', 'xs', 'sm', ...]\n *\n * @param  {Object} breakpoints Key/value pair of breakpoint names to widths.\n * @return {Array}              Sorted breakpoints.\n */\n\n\nfunction sortBreakpoints(breakpoints\n/*: Breakpoints<Breakpoint>*/\n)\n/*: Array<Breakpoint>*/\n{\n  var keys\n  /*: Array<string>*/\n  = Object.keys(breakpoints);\n  return keys.sort(function (a, b) {\n    return breakpoints[a] - breakpoints[b];\n  });\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bottom = bottom;\nexports.childrenEqual = childrenEqual;\nexports.cloneLayout = cloneLayout;\nexports.cloneLayoutItem = cloneLayoutItem;\nexports.collides = collides;\nexports.compact = compact;\nexports.compactItem = compactItem;\nexports.compactType = compactType;\nexports.correctBounds = correctBounds;\nexports.fastPositionEqual = fastPositionEqual;\nexports.fastRGLPropsEqual = void 0;\nexports.getAllCollisions = getAllCollisions;\nexports.getFirstCollision = getFirstCollision;\nexports.getLayoutItem = getLayoutItem;\nexports.getStatics = getStatics;\nexports.modifyLayout = modifyLayout;\nexports.moveElement = moveElement;\nexports.moveElementAwayFromCollision = moveElementAwayFromCollision;\nexports.noop = void 0;\nexports.perc = perc;\nexports.setTopLeft = setTopLeft;\nexports.setTransform = setTransform;\nexports.sortLayoutItems = sortLayoutItems;\nexports.sortLayoutItemsByColRow = sortLayoutItemsByColRow;\nexports.sortLayoutItemsByRowCol = sortLayoutItemsByRowCol;\nexports.synchronizeLayoutWithChildren = synchronizeLayoutWithChildren;\nexports.validateLayout = validateLayout;\nexports.withLayoutItem = withLayoutItem;\n\nvar _lodash = _interopRequireDefault(require(\"lodash.isequal\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar isProduction = process.env.NODE_ENV === \"production\";\nvar DEBUG = false;\n/**\n * Return the bottom coordinate of the layout.\n *\n * @param  {Array} layout Layout array.\n * @return {Number}       Bottom coordinate.\n */\n\nfunction bottom(layout\n/*: Layout*/\n)\n/*: number*/\n{\n  var max = 0,\n      bottomY;\n\n  for (var i = 0, len = layout.length; i < len; i++) {\n    bottomY = layout[i].y + layout[i].h;\n    if (bottomY > max) max = bottomY;\n  }\n\n  return max;\n}\n\nfunction cloneLayout(layout\n/*: Layout*/\n)\n/*: Layout*/\n{\n  var newLayout = Array(layout.length);\n\n  for (var i = 0, len = layout.length; i < len; i++) {\n    newLayout[i] = cloneLayoutItem(layout[i]);\n  }\n\n  return newLayout;\n} // Modify a layoutItem inside a layout. Returns a new Layout,\n// does not mutate. Carries over all other LayoutItems unmodified.\n\n\nfunction modifyLayout(layout\n/*: Layout*/\n, layoutItem\n/*: LayoutItem*/\n)\n/*: Layout*/\n{\n  var newLayout = Array(layout.length);\n\n  for (var i = 0, len = layout.length; i < len; i++) {\n    if (layoutItem.i === layout[i].i) {\n      newLayout[i] = layoutItem;\n    } else {\n      newLayout[i] = layout[i];\n    }\n  }\n\n  return newLayout;\n} // Function to be called to modify a layout item.\n// Does defensive clones to ensure the layout is not modified.\n\n\nfunction withLayoutItem(layout\n/*: Layout*/\n, itemKey\n/*: string*/\n, cb\n/*: LayoutItem => LayoutItem*/\n)\n/*: [Layout, ?LayoutItem]*/\n{\n  var item = getLayoutItem(layout, itemKey);\n  if (!item) return [layout, null];\n  item = cb(cloneLayoutItem(item)); // defensive clone then modify\n  // FIXME could do this faster if we already knew the index\n\n  layout = modifyLayout(layout, item);\n  return [layout, item];\n} // Fast path to cloning, since this is monomorphic\n\n\nfunction cloneLayoutItem(layoutItem\n/*: LayoutItem*/\n)\n/*: LayoutItem*/\n{\n  return {\n    w: layoutItem.w,\n    h: layoutItem.h,\n    x: layoutItem.x,\n    y: layoutItem.y,\n    i: layoutItem.i,\n    minW: layoutItem.minW,\n    maxW: layoutItem.maxW,\n    minH: layoutItem.minH,\n    maxH: layoutItem.maxH,\n    moved: Boolean(layoutItem.moved),\n    static: Boolean(layoutItem.static),\n    // These can be null/undefined\n    isDraggable: layoutItem.isDraggable,\n    isResizable: layoutItem.isResizable,\n    resizeHandles: layoutItem.resizeHandles,\n    isBounded: layoutItem.isBounded\n  };\n}\n/**\n * Comparing React `children` is a bit difficult. This is a good way to compare them.\n * This will catch differences in keys, order, and length.\n */\n\n\nfunction childrenEqual(a\n/*: ReactChildren*/\n, b\n/*: ReactChildren*/\n)\n/*: boolean*/\n{\n  return (0, _lodash.default)(_react.default.Children.map(a, function (c) {\n    return c === null || c === void 0 ? void 0 : c.key;\n  }), _react.default.Children.map(b, function (c) {\n    return c === null || c === void 0 ? void 0 : c.key;\n  }));\n}\n/**\n * See `fastRGLPropsEqual.js`.\n * We want this to run as fast as possible - it is called often - and to be\n * resilient to new props that we add. So rather than call lodash.isEqual,\n * which isn't suited to comparing props very well, we use this specialized\n * function in conjunction with preval to generate the fastest possible comparison\n * function, tuned for exactly our props.\n */\n\n/*:: type FastRGLPropsEqual = (Object, Object, Function) => boolean;*/\n\n\nvar fastRGLPropsEqual\n/*: FastRGLPropsEqual*/\n= require(\"./fastRGLPropsEqual\"); // Like the above, but a lot simpler.\n\n\nexports.fastRGLPropsEqual = fastRGLPropsEqual;\n\nfunction fastPositionEqual(a\n/*: Position*/\n, b\n/*: Position*/\n)\n/*: boolean*/\n{\n  return a.left === b.left && a.top === b.top && a.width === b.width && a.height === b.height;\n}\n/**\n * Given two layoutitems, check if they collide.\n */\n\n\nfunction collides(l1\n/*: LayoutItem*/\n, l2\n/*: LayoutItem*/\n)\n/*: boolean*/\n{\n  if (l1.i === l2.i) return false; // same element\n\n  if (l1.x + l1.w <= l2.x) return false; // l1 is left of l2\n\n  if (l1.x >= l2.x + l2.w) return false; // l1 is right of l2\n\n  if (l1.y + l1.h <= l2.y) return false; // l1 is above l2\n\n  if (l1.y >= l2.y + l2.h) return false; // l1 is below l2\n\n  return true; // boxes overlap\n}\n/**\n * Given a layout, compact it. This involves going down each y coordinate and removing gaps\n * between items.\n *\n * Does not modify layout items (clones). Creates a new layout array.\n *\n * @param  {Array} layout Layout.\n * @param  {Boolean} verticalCompact Whether or not to compact the layout\n *   vertically.\n * @return {Array}       Compacted Layout.\n */\n\n\nfunction compact(layout\n/*: Layout*/\n, compactType\n/*: CompactType*/\n, cols\n/*: number*/\n)\n/*: Layout*/\n{\n  // Statics go in the compareWith array right away so items flow around them.\n  var compareWith = getStatics(layout); // We go through the items by row and column.\n\n  var sorted = sortLayoutItems(layout, compactType); // Holding for new items.\n\n  var out = Array(layout.length);\n\n  for (var i = 0, len = sorted.length; i < len; i++) {\n    var l = cloneLayoutItem(sorted[i]); // Don't move static elements\n\n    if (!l.static) {\n      l = compactItem(compareWith, l, compactType, cols, sorted); // Add to comparison array. We only collide with items before this one.\n      // Statics are already in this array.\n\n      compareWith.push(l);\n    } // Add to output array to make sure they still come out in the right order.\n\n\n    out[layout.indexOf(sorted[i])] = l; // Clear moved flag, if it exists.\n\n    l.moved = false;\n  }\n\n  return out;\n}\n\nvar heightWidth = {\n  x: \"w\",\n  y: \"h\"\n};\n/**\n * Before moving item down, it will check if the movement will cause collisions and move those items down before.\n */\n\nfunction resolveCompactionCollision(layout\n/*: Layout*/\n, item\n/*: LayoutItem*/\n, moveToCoord\n/*: number*/\n, axis\n/*: \"x\" | \"y\"*/\n) {\n  var sizeProp = heightWidth[axis];\n  item[axis] += 1;\n  var itemIndex = layout.map(function (layoutItem) {\n    return layoutItem.i;\n  }).indexOf(item.i); // Go through each item we collide with.\n\n  for (var i = itemIndex + 1; i < layout.length; i++) {\n    var otherItem = layout[i]; // Ignore static items\n\n    if (otherItem.static) continue; // Optimization: we can break early if we know we're past this el\n    // We can do this b/c it's a sorted layout\n\n    if (otherItem.y > item.y + item.h) break;\n\n    if (collides(item, otherItem)) {\n      resolveCompactionCollision(layout, otherItem, moveToCoord + item[sizeProp], axis);\n    }\n  }\n\n  item[axis] = moveToCoord;\n}\n/**\n * Compact an item in the layout.\n *\n * Modifies item.\n *\n */\n\n\nfunction compactItem(compareWith\n/*: Layout*/\n, l\n/*: LayoutItem*/\n, compactType\n/*: CompactType*/\n, cols\n/*: number*/\n, fullLayout\n/*: Layout*/\n)\n/*: LayoutItem*/\n{\n  var compactV = compactType === \"vertical\";\n  var compactH = compactType === \"horizontal\";\n\n  if (compactV) {\n    // Bottom 'y' possible is the bottom of the layout.\n    // This allows you to do nice stuff like specify {y: Infinity}\n    // This is here because the layout must be sorted in order to get the correct bottom `y`.\n    l.y = Math.min(bottom(compareWith), l.y); // Move the element up as far as it can go without colliding.\n\n    while (l.y > 0 && !getFirstCollision(compareWith, l)) {\n      l.y--;\n    }\n  } else if (compactH) {\n    // Move the element left as far as it can go without colliding.\n    while (l.x > 0 && !getFirstCollision(compareWith, l)) {\n      l.x--;\n    }\n  } // Move it down, and keep moving it down if it's colliding.\n\n\n  var collides;\n\n  while (collides = getFirstCollision(compareWith, l)) {\n    if (compactH) {\n      resolveCompactionCollision(fullLayout, l, collides.x + collides.w, \"x\");\n    } else {\n      resolveCompactionCollision(fullLayout, l, collides.y + collides.h, \"y\");\n    } // Since we can't grow without bounds horizontally, if we've overflown, let's move it down and try again.\n\n\n    if (compactH && l.x + l.w > cols) {\n      l.x = cols - l.w;\n      l.y++;\n    }\n  } // Ensure that there are no negative positions\n\n\n  l.y = Math.max(l.y, 0);\n  l.x = Math.max(l.x, 0);\n  return l;\n}\n/**\n * Given a layout, make sure all elements fit within its bounds.\n *\n * Modifies layout items.\n *\n * @param  {Array} layout Layout array.\n * @param  {Number} bounds Number of columns.\n */\n\n\nfunction correctBounds(layout\n/*: Layout*/\n, bounds\n/*: { cols: number }*/\n)\n/*: Layout*/\n{\n  var collidesWith = getStatics(layout);\n\n  for (var i = 0, len = layout.length; i < len; i++) {\n    var l = layout[i]; // Overflows right\n\n    if (l.x + l.w > bounds.cols) l.x = bounds.cols - l.w; // Overflows left\n\n    if (l.x < 0) {\n      l.x = 0;\n      l.w = bounds.cols;\n    }\n\n    if (!l.static) collidesWith.push(l);else {\n      // If this is static and collides with other statics, we must move it down.\n      // We have to do something nicer than just letting them overlap.\n      while (getFirstCollision(collidesWith, l)) {\n        l.y++;\n      }\n    }\n  }\n\n  return layout;\n}\n/**\n * Get a layout item by ID. Used so we can override later on if necessary.\n *\n * @param  {Array}  layout Layout array.\n * @param  {String} id     ID\n * @return {LayoutItem}    Item at ID.\n */\n\n\nfunction getLayoutItem(layout\n/*: Layout*/\n, id\n/*: string*/\n)\n/*: ?LayoutItem*/\n{\n  for (var i = 0, len = layout.length; i < len; i++) {\n    if (layout[i].i === id) return layout[i];\n  }\n}\n/**\n * Returns the first item this layout collides with.\n * It doesn't appear to matter which order we approach this from, although\n * perhaps that is the wrong thing to do.\n *\n * @param  {Object} layoutItem Layout item.\n * @return {Object|undefined}  A colliding layout item, or undefined.\n */\n\n\nfunction getFirstCollision(layout\n/*: Layout*/\n, layoutItem\n/*: LayoutItem*/\n)\n/*: ?LayoutItem*/\n{\n  for (var i = 0, len = layout.length; i < len; i++) {\n    if (collides(layout[i], layoutItem)) return layout[i];\n  }\n}\n\nfunction getAllCollisions(layout\n/*: Layout*/\n, layoutItem\n/*: LayoutItem*/\n)\n/*: Array<LayoutItem>*/\n{\n  return layout.filter(function (l) {\n    return collides(l, layoutItem);\n  });\n}\n/**\n * Get all static elements.\n * @param  {Array} layout Array of layout objects.\n * @return {Array}        Array of static layout items..\n */\n\n\nfunction getStatics(layout\n/*: Layout*/\n)\n/*: Array<LayoutItem>*/\n{\n  return layout.filter(function (l) {\n    return l.static;\n  });\n}\n/**\n * Move an element. Responsible for doing cascading movements of other elements.\n *\n * Modifies layout items.\n *\n * @param  {Array}      layout            Full layout to modify.\n * @param  {LayoutItem} l                 element to move.\n * @param  {Number}     [x]               X position in grid units.\n * @param  {Number}     [y]               Y position in grid units.\n */\n\n\nfunction moveElement(layout\n/*: Layout*/\n, l\n/*: LayoutItem*/\n, x\n/*: ?number*/\n, y\n/*: ?number*/\n, isUserAction\n/*: ?boolean*/\n, preventCollision\n/*: ?boolean*/\n, compactType\n/*: CompactType*/\n, cols\n/*: number*/\n, allowOverlap\n/*: ?boolean*/\n)\n/*: Layout*/\n{\n  // If this is static and not explicitly enabled as draggable,\n  // no move is possible, so we can short-circuit this immediately.\n  if (l.static && l.isDraggable !== true) return layout; // Short-circuit if nothing to do.\n\n  if (l.y === y && l.x === x) return layout;\n  log(\"Moving element \".concat(l.i, \" to [\").concat(String(x), \",\").concat(String(y), \"] from [\").concat(l.x, \",\").concat(l.y, \"]\"));\n  var oldX = l.x;\n  var oldY = l.y; // This is quite a bit faster than extending the object\n\n  if (typeof x === \"number\") l.x = x;\n  if (typeof y === \"number\") l.y = y;\n  l.moved = true; // If this collides with anything, move it.\n  // When doing this comparison, we have to sort the items we compare with\n  // to ensure, in the case of multiple collisions, that we're getting the\n  // nearest collision.\n\n  var sorted = sortLayoutItems(layout, compactType);\n  var movingUp = compactType === \"vertical\" && typeof y === \"number\" ? oldY >= y : compactType === \"horizontal\" && typeof x === \"number\" ? oldX >= x : false; // $FlowIgnore acceptable modification of read-only array as it was recently cloned\n\n  if (movingUp) sorted = sorted.reverse();\n  var collisions = getAllCollisions(sorted, l);\n  var hasCollisions = collisions.length > 0; // We may have collisions. We can short-circuit if we've turned off collisions or\n  // allowed overlap.\n\n  if (hasCollisions && allowOverlap) {\n    // Easy, we don't need to resolve collisions. But we *did* change the layout,\n    // so clone it on the way out.\n    return cloneLayout(layout);\n  } else if (hasCollisions && preventCollision) {\n    // If we are preventing collision but not allowing overlap, we need to\n    // revert the position of this element so it goes to where it came from, rather\n    // than the user's desired location.\n    log(\"Collision prevented on \".concat(l.i, \", reverting.\"));\n    l.x = oldX;\n    l.y = oldY;\n    l.moved = false;\n    return layout; // did not change so don't clone\n  } // Move each item that collides away from this element.\n\n\n  for (var i = 0, len = collisions.length; i < len; i++) {\n    var collision = collisions[i];\n    log(\"Resolving collision between \".concat(l.i, \" at [\").concat(l.x, \",\").concat(l.y, \"] and \").concat(collision.i, \" at [\").concat(collision.x, \",\").concat(collision.y, \"]\")); // Short circuit so we can't infinite loop\n\n    if (collision.moved) continue; // Don't move static items - we have to move *this* element away\n\n    if (collision.static) {\n      layout = moveElementAwayFromCollision(layout, collision, l, isUserAction, compactType, cols);\n    } else {\n      layout = moveElementAwayFromCollision(layout, l, collision, isUserAction, compactType, cols);\n    }\n  }\n\n  return layout;\n}\n/**\n * This is where the magic needs to happen - given a collision, move an element away from the collision.\n * We attempt to move it up if there's room, otherwise it goes below.\n *\n * @param  {Array} layout            Full layout to modify.\n * @param  {LayoutItem} collidesWith Layout item we're colliding with.\n * @param  {LayoutItem} itemToMove   Layout item we're moving.\n */\n\n\nfunction moveElementAwayFromCollision(layout\n/*: Layout*/\n, collidesWith\n/*: LayoutItem*/\n, itemToMove\n/*: LayoutItem*/\n, isUserAction\n/*: ?boolean*/\n, compactType\n/*: CompactType*/\n, cols\n/*: number*/\n)\n/*: Layout*/\n{\n  var compactH = compactType === \"horizontal\"; // Compact vertically if not set to horizontal\n\n  var compactV = compactType !== \"horizontal\";\n  var preventCollision = collidesWith.static; // we're already colliding (not for static items)\n  // If there is enough space above the collision to put this element, move it there.\n  // We only do this on the main collision as this can get funky in cascades and cause\n  // unwanted swapping behavior.\n\n  if (isUserAction) {\n    // Reset isUserAction flag because we're not in the main collision anymore.\n    isUserAction = false; // Make a mock item so we don't modify the item here, only modify in moveElement.\n\n    var fakeItem\n    /*: LayoutItem*/\n    = {\n      x: compactH ? Math.max(collidesWith.x - itemToMove.w, 0) : itemToMove.x,\n      y: compactV ? Math.max(collidesWith.y - itemToMove.h, 0) : itemToMove.y,\n      w: itemToMove.w,\n      h: itemToMove.h,\n      i: \"-1\"\n    }; // No collision? If so, we can go up there; otherwise, we'll end up moving down as normal\n\n    if (!getFirstCollision(layout, fakeItem)) {\n      log(\"Doing reverse collision on \".concat(itemToMove.i, \" up to [\").concat(fakeItem.x, \",\").concat(fakeItem.y, \"].\"));\n      return moveElement(layout, itemToMove, compactH ? fakeItem.x : undefined, compactV ? fakeItem.y : undefined, isUserAction, preventCollision, compactType, cols);\n    }\n  }\n\n  return moveElement(layout, itemToMove, compactH ? itemToMove.x + 1 : undefined, compactV ? itemToMove.y + 1 : undefined, isUserAction, preventCollision, compactType, cols);\n}\n/**\n * Helper to convert a number to a percentage string.\n *\n * @param  {Number} num Any number\n * @return {String}     That number as a percentage.\n */\n\n\nfunction perc(num\n/*: number*/\n)\n/*: string*/\n{\n  return num * 100 + \"%\";\n}\n\nfunction setTransform(_ref)\n/*: Object*/\n{\n  var top = _ref.top,\n      left = _ref.left,\n      width = _ref.width,\n      height = _ref.height;\n  // Replace unitless items with px\n  var translate = \"translate(\".concat(left, \"px,\").concat(top, \"px)\");\n  return {\n    transform: translate,\n    WebkitTransform: translate,\n    MozTransform: translate,\n    msTransform: translate,\n    OTransform: translate,\n    width: \"\".concat(width, \"px\"),\n    height: \"\".concat(height, \"px\"),\n    position: \"absolute\"\n  };\n}\n\nfunction setTopLeft(_ref2)\n/*: Object*/\n{\n  var top = _ref2.top,\n      left = _ref2.left,\n      width = _ref2.width,\n      height = _ref2.height;\n  return {\n    top: \"\".concat(top, \"px\"),\n    left: \"\".concat(left, \"px\"),\n    width: \"\".concat(width, \"px\"),\n    height: \"\".concat(height, \"px\"),\n    position: \"absolute\"\n  };\n}\n/**\n * Get layout items sorted from top left to right and down.\n *\n * @return {Array} Array of layout objects.\n * @return {Array}        Layout, sorted static items first.\n */\n\n\nfunction sortLayoutItems(layout\n/*: Layout*/\n, compactType\n/*: CompactType*/\n)\n/*: Layout*/\n{\n  if (compactType === \"horizontal\") return sortLayoutItemsByColRow(layout);\n  if (compactType === \"vertical\") return sortLayoutItemsByRowCol(layout);else return layout;\n}\n/**\n * Sort layout items by row ascending and column ascending.\n *\n * Does not modify Layout.\n */\n\n\nfunction sortLayoutItemsByRowCol(layout\n/*: Layout*/\n)\n/*: Layout*/\n{\n  // Slice to clone array as sort modifies\n  return layout.slice(0).sort(function (a, b) {\n    if (a.y > b.y || a.y === b.y && a.x > b.x) {\n      return 1;\n    } else if (a.y === b.y && a.x === b.x) {\n      // Without this, we can get different sort results in IE vs. Chrome/FF\n      return 0;\n    }\n\n    return -1;\n  });\n}\n/**\n * Sort layout items by column ascending then row ascending.\n *\n * Does not modify Layout.\n */\n\n\nfunction sortLayoutItemsByColRow(layout\n/*: Layout*/\n)\n/*: Layout*/\n{\n  return layout.slice(0).sort(function (a, b) {\n    if (a.x > b.x || a.x === b.x && a.y > b.y) {\n      return 1;\n    }\n\n    return -1;\n  });\n}\n/**\n * Generate a layout using the initialLayout and children as a template.\n * Missing entries will be added, extraneous ones will be truncated.\n *\n * Does not modify initialLayout.\n *\n * @param  {Array}  initialLayout Layout passed in through props.\n * @param  {String} breakpoint    Current responsive breakpoint.\n * @param  {?String} compact      Compaction option.\n * @return {Array}                Working layout.\n */\n\n\nfunction synchronizeLayoutWithChildren(initialLayout\n/*: Layout*/\n, children\n/*: ReactChildren*/\n, cols\n/*: number*/\n, compactType\n/*: CompactType*/\n, allowOverlap\n/*: ?boolean*/\n)\n/*: Layout*/\n{\n  initialLayout = initialLayout || []; // Generate one layout item per child.\n\n  var layout\n  /*: LayoutItem[]*/\n  = [];\n\n  _react.default.Children.forEach(children, function (child\n  /*: ReactElement<any>*/\n  ) {\n    // Child may not exist\n    if ((child === null || child === void 0 ? void 0 : child.key) == null) return; // Don't overwrite if it already exists.\n\n    var exists = getLayoutItem(initialLayout, String(child.key));\n\n    if (exists) {\n      layout.push(cloneLayoutItem(exists));\n    } else {\n      if (!isProduction && child.props._grid) {\n        console.warn(\"`_grid` properties on children have been deprecated as of React 15.2. \" + \"Please use `data-grid` or add your properties directly to the `layout`.\");\n      }\n\n      var g = child.props[\"data-grid\"] || child.props._grid; // Hey, this item has a data-grid property, use it.\n\n      if (g) {\n        if (!isProduction) {\n          validateLayout([g], \"ReactGridLayout.children\");\n        } // FIXME clone not really necessary here\n\n\n        layout.push(cloneLayoutItem(_objectSpread(_objectSpread({}, g), {}, {\n          i: child.key\n        })));\n      } else {\n        // Nothing provided: ensure this is added to the bottom\n        // FIXME clone not really necessary here\n        layout.push(cloneLayoutItem({\n          w: 1,\n          h: 1,\n          x: 0,\n          y: bottom(layout),\n          i: String(child.key)\n        }));\n      }\n    }\n  }); // Correct the layout.\n\n\n  var correctedLayout = correctBounds(layout, {\n    cols: cols\n  });\n  return allowOverlap ? correctedLayout : compact(correctedLayout, compactType, cols);\n}\n/**\n * Validate a layout. Throws errors.\n *\n * @param  {Array}  layout        Array of layout items.\n * @param  {String} [contextName] Context name for errors.\n * @throw  {Error}                Validation error.\n */\n\n\nfunction validateLayout(layout\n/*: Layout*/\n)\n/*: void*/\n{\n  var contextName\n  /*: string*/\n  = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"Layout\";\n  var subProps = [\"x\", \"y\", \"w\", \"h\"];\n  if (!Array.isArray(layout)) throw new Error(contextName + \" must be an array!\");\n\n  for (var i = 0, len = layout.length; i < len; i++) {\n    var item = layout[i];\n\n    for (var j = 0; j < subProps.length; j++) {\n      if (typeof item[subProps[j]] !== \"number\") {\n        throw new Error(\"ReactGridLayout: \" + contextName + \"[\" + i + \"].\" + subProps[j] + \" must be a number!\");\n      }\n    }\n  }\n} // Legacy support for verticalCompact: false\n\n\nfunction compactType(props\n/*: ?{ verticalCompact: boolean, compactType: CompactType }*/\n)\n/*: CompactType*/\n{\n  var _ref3 = props || {},\n      verticalCompact = _ref3.verticalCompact,\n      compactType = _ref3.compactType;\n\n  return verticalCompact === false ? null : compactType;\n}\n\nfunction log() {\n  var _console;\n\n  if (!DEBUG) return; // eslint-disable-next-line no-console\n\n  (_console = console).log.apply(_console, arguments);\n}\n\nvar noop = function noop() {};\n\nexports.noop = noop;","module.exports = require(\"./build/ReactGridLayout\").default;\nmodule.exports.utils = require(\"./build/utils\");\nmodule.exports.Responsive =\n  require(\"./build/ResponsiveReactGridLayout\").default;\nmodule.exports.Responsive.utils = require(\"./build/responsiveUtils\");\nmodule.exports.WidthProvider =\n  require(\"./build/components/WidthProvider\").default;\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f);else for(t in e)e[t]&&(n&&(n+=\" \"),n+=t);return n}export function clsx(){for(var e,t,f=0,n=\"\";f<arguments.length;)(e=arguments[f++])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _reactDraggable = require(\"react-draggable\");\nvar _utils = require(\"./utils\");\nvar _propTypes = require(\"./propTypes\");\nvar _excluded = [\"children\", \"className\", \"draggableOpts\", \"width\", \"height\", \"handle\", \"handleSize\", \"lockAspectRatio\", \"axis\", \"minConstraints\", \"maxConstraints\", \"onResize\", \"onResizeStop\", \"onResizeStart\", \"resizeHandles\", \"transformScale\"];\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// The base <Resizable> component.\n// This component does not have state and relies on the parent to set its props based on callback data.\nvar Resizable = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Resizable, _React$Component);\n  function Resizable() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.handleRefs = {};\n    _this.lastHandleRect = null;\n    _this.slack = null;\n    return _this;\n  }\n  var _proto = Resizable.prototype;\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.resetData();\n  };\n  _proto.resetData = function resetData() {\n    this.lastHandleRect = this.slack = null;\n  }\n\n  // Clamp width and height within provided constraints\n  ;\n  _proto.runConstraints = function runConstraints(width, height) {\n    var _this$props = this.props,\n      minConstraints = _this$props.minConstraints,\n      maxConstraints = _this$props.maxConstraints,\n      lockAspectRatio = _this$props.lockAspectRatio;\n    // short circuit\n    if (!minConstraints && !maxConstraints && !lockAspectRatio) return [width, height];\n\n    // If constraining to min and max, we need to also fit width and height to aspect ratio.\n    if (lockAspectRatio) {\n      var ratio = this.props.width / this.props.height;\n      var deltaW = width - this.props.width;\n      var deltaH = height - this.props.height;\n\n      // Find which coordinate was greater and should push the other toward it.\n      // E.g.:\n      // ratio = 1, deltaW = 10, deltaH = 5, deltaH should become 10.\n      // ratio = 2, deltaW = 10, deltaH = 6, deltaW should become 12.\n      if (Math.abs(deltaW) > Math.abs(deltaH * ratio)) {\n        height = width / ratio;\n      } else {\n        width = height * ratio;\n      }\n    }\n    var oldW = width,\n      oldH = height;\n\n    // Add slack to the values used to calculate bound position. This will ensure that if\n    // we start removing slack, the element won't react to it right away until it's been\n    // completely removed.\n    var _ref = this.slack || [0, 0],\n      slackW = _ref[0],\n      slackH = _ref[1];\n    width += slackW;\n    height += slackH;\n    if (minConstraints) {\n      width = Math.max(minConstraints[0], width);\n      height = Math.max(minConstraints[1], height);\n    }\n    if (maxConstraints) {\n      width = Math.min(maxConstraints[0], width);\n      height = Math.min(maxConstraints[1], height);\n    }\n\n    // If the width or height changed, we must have introduced some slack. Record it for the next iteration.\n    this.slack = [slackW + (oldW - width), slackH + (oldH - height)];\n    return [width, height];\n  }\n\n  /**\n   * Wrapper around drag events to provide more useful data.\n   *\n   * @param  {String} handlerName Handler name to wrap.\n   * @return {Function}           Handler function.\n   */;\n  _proto.resizeHandler = function resizeHandler(handlerName, axis) {\n    var _this2 = this;\n    return function (e, _ref2) {\n      var node = _ref2.node,\n        deltaX = _ref2.deltaX,\n        deltaY = _ref2.deltaY;\n      // Reset data in case it was left over somehow (should not be possible)\n      if (handlerName === 'onResizeStart') _this2.resetData();\n\n      // Axis restrictions\n      var canDragX = (_this2.props.axis === 'both' || _this2.props.axis === 'x') && axis !== 'n' && axis !== 's';\n      var canDragY = (_this2.props.axis === 'both' || _this2.props.axis === 'y') && axis !== 'e' && axis !== 'w';\n      // No dragging possible.\n      if (!canDragX && !canDragY) return;\n\n      // Decompose axis for later use\n      var axisV = axis[0];\n      var axisH = axis[axis.length - 1]; // intentionally not axis[1], so that this catches axis === 'w' for example\n\n      // Track the element being dragged to account for changes in position.\n      // If a handle's position is changed between callbacks, we need to factor this in to the next callback.\n      // Failure to do so will cause the element to \"skip\" when resized upwards or leftwards.\n      var handleRect = node.getBoundingClientRect();\n      if (_this2.lastHandleRect != null) {\n        // If the handle has repositioned on either axis since last render,\n        // we need to increase our callback values by this much.\n        // Only checking 'n', 'w' since resizing by 's', 'w' won't affect the overall position on page,\n        if (axisH === 'w') {\n          var deltaLeftSinceLast = handleRect.left - _this2.lastHandleRect.left;\n          deltaX += deltaLeftSinceLast;\n        }\n        if (axisV === 'n') {\n          var deltaTopSinceLast = handleRect.top - _this2.lastHandleRect.top;\n          deltaY += deltaTopSinceLast;\n        }\n      }\n      // Storage of last rect so we know how much it has really moved.\n      _this2.lastHandleRect = handleRect;\n\n      // Reverse delta if using top or left drag handles.\n      if (axisH === 'w') deltaX = -deltaX;\n      if (axisV === 'n') deltaY = -deltaY;\n\n      // Update w/h by the deltas. Also factor in transformScale.\n      var width = _this2.props.width + (canDragX ? deltaX / _this2.props.transformScale : 0);\n      var height = _this2.props.height + (canDragY ? deltaY / _this2.props.transformScale : 0);\n\n      // Run user-provided constraints.\n      var _this2$runConstraints = _this2.runConstraints(width, height);\n      width = _this2$runConstraints[0];\n      height = _this2$runConstraints[1];\n      var dimensionsChanged = width !== _this2.props.width || height !== _this2.props.height;\n\n      // Call user-supplied callback if present.\n      var cb = typeof _this2.props[handlerName] === 'function' ? _this2.props[handlerName] : null;\n      // Don't call 'onResize' if dimensions haven't changed.\n      var shouldSkipCb = handlerName === 'onResize' && !dimensionsChanged;\n      if (cb && !shouldSkipCb) {\n        e.persist == null ? void 0 : e.persist();\n        cb(e, {\n          node: node,\n          size: {\n            width: width,\n            height: height\n          },\n          handle: axis\n        });\n      }\n\n      // Reset internal data\n      if (handlerName === 'onResizeStop') _this2.resetData();\n    };\n  }\n\n  // Render a resize handle given an axis & DOM ref. Ref *must* be attached for\n  // the underlying draggable library to work properly.\n  ;\n  _proto.renderResizeHandle = function renderResizeHandle(handleAxis, ref) {\n    var handle = this.props.handle;\n    // No handle provided, make the default\n    if (!handle) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"react-resizable-handle react-resizable-handle-\" + handleAxis,\n        ref: ref\n      });\n    }\n    // Handle is a function, such as:\n    // `handle={(handleAxis) => <span className={...} />}`\n    if (typeof handle === 'function') {\n      return handle(handleAxis, ref);\n    }\n    // Handle is a React component (composite or DOM).\n    var isDOMElement = typeof handle.type === 'string';\n    var props = _objectSpread({\n      ref: ref\n    }, isDOMElement ? {} : {\n      handleAxis: handleAxis\n    });\n    return /*#__PURE__*/React.cloneElement(handle, props);\n  };\n  _proto.render = function render() {\n    var _this3 = this;\n    // Pass along only props not meant for the `<Resizable>`.`\n    // eslint-disable-next-line no-unused-vars\n    var _this$props2 = this.props,\n      children = _this$props2.children,\n      className = _this$props2.className,\n      draggableOpts = _this$props2.draggableOpts,\n      width = _this$props2.width,\n      height = _this$props2.height,\n      handle = _this$props2.handle,\n      handleSize = _this$props2.handleSize,\n      lockAspectRatio = _this$props2.lockAspectRatio,\n      axis = _this$props2.axis,\n      minConstraints = _this$props2.minConstraints,\n      maxConstraints = _this$props2.maxConstraints,\n      onResize = _this$props2.onResize,\n      onResizeStop = _this$props2.onResizeStop,\n      onResizeStart = _this$props2.onResizeStart,\n      resizeHandles = _this$props2.resizeHandles,\n      transformScale = _this$props2.transformScale,\n      p = _objectWithoutPropertiesLoose(_this$props2, _excluded);\n\n    // What we're doing here is getting the child of this element, and cloning it with this element's props.\n    // We are then defining its children as:\n    // 1. Its original children (resizable's child's children), and\n    // 2. One or more draggable handles.\n    return (0, _utils.cloneElement)(children, _objectSpread(_objectSpread({}, p), {}, {\n      className: (className ? className + \" \" : '') + \"react-resizable\",\n      children: [].concat(children.props.children, resizeHandles.map(function (handleAxis) {\n        var _this3$handleRefs$han;\n        // Create a ref to the handle so that `<DraggableCore>` doesn't have to use ReactDOM.findDOMNode().\n        var ref = (_this3$handleRefs$han = _this3.handleRefs[handleAxis]) != null ? _this3$handleRefs$han : _this3.handleRefs[handleAxis] = /*#__PURE__*/React.createRef();\n        return /*#__PURE__*/React.createElement(_reactDraggable.DraggableCore, _extends({}, draggableOpts, {\n          nodeRef: ref,\n          key: \"resizableHandle-\" + handleAxis,\n          onStop: _this3.resizeHandler('onResizeStop', handleAxis),\n          onStart: _this3.resizeHandler('onResizeStart', handleAxis),\n          onDrag: _this3.resizeHandler('onResize', handleAxis)\n        }), _this3.renderResizeHandle(handleAxis, ref));\n      }))\n    }));\n  };\n  return Resizable;\n}(React.Component);\nexports.default = Resizable;\nResizable.propTypes = _propTypes.resizableProps;\nResizable.defaultProps = {\n  axis: 'both',\n  handleSize: [20, 20],\n  lockAspectRatio: false,\n  minConstraints: [20, 20],\n  maxConstraints: [Infinity, Infinity],\n  resizeHandles: ['se'],\n  transformScale: 1\n};","\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _Resizable = _interopRequireDefault(require(\"./Resizable\"));\nvar _propTypes2 = require(\"./propTypes\");\nvar _excluded = [\"handle\", \"handleSize\", \"onResize\", \"onResizeStart\", \"onResizeStop\", \"draggableOpts\", \"minConstraints\", \"maxConstraints\", \"lockAspectRatio\", \"axis\", \"width\", \"height\", \"resizeHandles\", \"style\", \"transformScale\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar ResizableBox = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(ResizableBox, _React$Component);\n  function ResizableBox() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      width: _this.props.width,\n      height: _this.props.height,\n      propsWidth: _this.props.width,\n      propsHeight: _this.props.height\n    };\n    _this.onResize = function (e, data) {\n      var size = data.size;\n      if (_this.props.onResize) {\n        e.persist == null ? void 0 : e.persist();\n        _this.setState(size, function () {\n          return _this.props.onResize && _this.props.onResize(e, data);\n        });\n      } else {\n        _this.setState(size);\n      }\n    };\n    return _this;\n  }\n  ResizableBox.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {\n    // If parent changes height/width, set that in our state.\n    if (state.propsWidth !== props.width || state.propsHeight !== props.height) {\n      return {\n        width: props.width,\n        height: props.height,\n        propsWidth: props.width,\n        propsHeight: props.height\n      };\n    }\n    return null;\n  };\n  var _proto = ResizableBox.prototype;\n  _proto.render = function render() {\n    // Basic wrapper around a Resizable instance.\n    // If you use Resizable directly, you are responsible for updating the child component\n    // with a new width and height.\n    var _this$props = this.props,\n      handle = _this$props.handle,\n      handleSize = _this$props.handleSize,\n      onResize = _this$props.onResize,\n      onResizeStart = _this$props.onResizeStart,\n      onResizeStop = _this$props.onResizeStop,\n      draggableOpts = _this$props.draggableOpts,\n      minConstraints = _this$props.minConstraints,\n      maxConstraints = _this$props.maxConstraints,\n      lockAspectRatio = _this$props.lockAspectRatio,\n      axis = _this$props.axis,\n      width = _this$props.width,\n      height = _this$props.height,\n      resizeHandles = _this$props.resizeHandles,\n      style = _this$props.style,\n      transformScale = _this$props.transformScale,\n      props = _objectWithoutPropertiesLoose(_this$props, _excluded);\n    return /*#__PURE__*/React.createElement(_Resizable.default, {\n      axis: axis,\n      draggableOpts: draggableOpts,\n      handle: handle,\n      handleSize: handleSize,\n      height: this.state.height,\n      lockAspectRatio: lockAspectRatio,\n      maxConstraints: maxConstraints,\n      minConstraints: minConstraints,\n      onResizeStart: onResizeStart,\n      onResize: this.onResize,\n      onResizeStop: onResizeStop,\n      resizeHandles: resizeHandles,\n      transformScale: transformScale,\n      width: this.state.width\n    }, /*#__PURE__*/React.createElement(\"div\", _extends({}, props, {\n      style: _objectSpread(_objectSpread({}, style), {}, {\n        width: this.state.width + 'px',\n        height: this.state.height + 'px'\n      })\n    })));\n  };\n  return ResizableBox;\n}(React.Component);\nexports.default = ResizableBox;\n// PropTypes are identical to <Resizable>, except that children are not strictly required to be present.\nResizableBox.propTypes = _objectSpread(_objectSpread({}, _propTypes2.resizableProps), {}, {\n  children: _propTypes.default.element\n});","\"use strict\";\n\nexports.__esModule = true;\nexports.resizableProps = void 0;\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\nvar _reactDraggable = require(\"react-draggable\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nvar resizableProps = {\n  /*\n  * Restricts resizing to a particular axis (default: 'both')\n  * 'both' - allows resizing by width or height\n  * 'x' - only allows the width to be changed\n  * 'y' - only allows the height to be changed\n  * 'none' - disables resizing altogether\n  * */\n  axis: _propTypes.default.oneOf(['both', 'x', 'y', 'none']),\n  className: _propTypes.default.string,\n  /*\n  * Require that one and only one child be present.\n  * */\n  children: _propTypes.default.element.isRequired,\n  /*\n  * These will be passed wholesale to react-draggable's DraggableCore\n  * */\n  draggableOpts: _propTypes.default.shape({\n    allowAnyClick: _propTypes.default.bool,\n    cancel: _propTypes.default.string,\n    children: _propTypes.default.node,\n    disabled: _propTypes.default.bool,\n    enableUserSelectHack: _propTypes.default.bool,\n    offsetParent: _propTypes.default.node,\n    grid: _propTypes.default.arrayOf(_propTypes.default.number),\n    handle: _propTypes.default.string,\n    nodeRef: _propTypes.default.object,\n    onStart: _propTypes.default.func,\n    onDrag: _propTypes.default.func,\n    onStop: _propTypes.default.func,\n    onMouseDown: _propTypes.default.func,\n    scale: _propTypes.default.number\n  }),\n  /*\n  * Initial height\n  * */\n  height: function height() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var props = args[0];\n    // Required if resizing height or both\n    if (props.axis === 'both' || props.axis === 'y') {\n      var _PropTypes$number;\n      return (_PropTypes$number = _propTypes.default.number).isRequired.apply(_PropTypes$number, args);\n    }\n    return _propTypes.default.number.apply(_propTypes.default, args);\n  },\n  /*\n  * Customize cursor resize handle\n  * */\n  handle: _propTypes.default.oneOfType([_propTypes.default.node, _propTypes.default.func]),\n  /*\n  * If you change this, be sure to update your css\n  * */\n  handleSize: _propTypes.default.arrayOf(_propTypes.default.number),\n  lockAspectRatio: _propTypes.default.bool,\n  /*\n  * Max X & Y measure\n  * */\n  maxConstraints: _propTypes.default.arrayOf(_propTypes.default.number),\n  /*\n  * Min X & Y measure\n  * */\n  minConstraints: _propTypes.default.arrayOf(_propTypes.default.number),\n  /*\n  * Called on stop resize event\n  * */\n  onResizeStop: _propTypes.default.func,\n  /*\n  * Called on start resize event\n  * */\n  onResizeStart: _propTypes.default.func,\n  /*\n  * Called on resize event\n  * */\n  onResize: _propTypes.default.func,\n  /*\n  * Defines which resize handles should be rendered (default: 'se')\n  * 's' - South handle (bottom-center)\n  * 'w' - West handle (left-center)\n  * 'e' - East handle (right-center)\n  * 'n' - North handle (top-center)\n  * 'sw' - Southwest handle (bottom-left)\n  * 'nw' - Northwest handle (top-left)\n  * 'se' - Southeast handle (bottom-right)\n  * 'ne' - Northeast handle (top-center)\n  * */\n  resizeHandles: _propTypes.default.arrayOf(_propTypes.default.oneOf(['s', 'w', 'e', 'n', 'sw', 'nw', 'se', 'ne'])),\n  /*\n  * If `transform: scale(n)` is set on the parent, this should be set to `n`.\n  * */\n  transformScale: _propTypes.default.number,\n  /*\n   * Initial width\n   */\n  width: function width() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    var props = args[0];\n    // Required if resizing width or both\n    if (props.axis === 'both' || props.axis === 'x') {\n      var _PropTypes$number2;\n      return (_PropTypes$number2 = _propTypes.default.number).isRequired.apply(_PropTypes$number2, args);\n    }\n    return _propTypes.default.number.apply(_propTypes.default, args);\n  }\n};\nexports.resizableProps = resizableProps;","\"use strict\";\n\nexports.__esModule = true;\nexports.cloneElement = cloneElement;\nvar _react = _interopRequireDefault(require(\"react\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n// React.addons.cloneWithProps look-alike that merges style & className.\nfunction cloneElement(element, props) {\n  if (props.style && element.props.style) {\n    props.style = _objectSpread(_objectSpread({}, element.props.style), props.style);\n  }\n  if (props.className && element.props.className) {\n    props.className = element.props.className + \" \" + props.className;\n  }\n  return /*#__PURE__*/_react.default.cloneElement(element, props);\n}","'use strict';\nmodule.exports = function() {\n  throw new Error(\"Don't instantiate Resizable directly! Use require('react-resizable').Resizable\");\n};\n\nmodule.exports.Resizable = require('./build/Resizable').default;\nmodule.exports.ResizableBox = require('./build/ResizableBox').default;\n","'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = require('react');\nvar React__default = _interopDefault(React);\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\nfunction withSideEffect(reducePropsToState, handleStateChangeOnClient, mapStateOnServer) {\n  if (typeof reducePropsToState !== 'function') {\n    throw new Error('Expected reducePropsToState to be a function.');\n  }\n\n  if (typeof handleStateChangeOnClient !== 'function') {\n    throw new Error('Expected handleStateChangeOnClient to be a function.');\n  }\n\n  if (typeof mapStateOnServer !== 'undefined' && typeof mapStateOnServer !== 'function') {\n    throw new Error('Expected mapStateOnServer to either be undefined or a function.');\n  }\n\n  function getDisplayName(WrappedComponent) {\n    return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  }\n\n  return function wrap(WrappedComponent) {\n    if (typeof WrappedComponent !== 'function') {\n      throw new Error('Expected WrappedComponent to be a React component.');\n    }\n\n    var mountedInstances = [];\n    var state;\n\n    function emitChange() {\n      state = reducePropsToState(mountedInstances.map(function (instance) {\n        return instance.props;\n      }));\n\n      if (SideEffect.canUseDOM) {\n        handleStateChangeOnClient(state);\n      } else if (mapStateOnServer) {\n        state = mapStateOnServer(state);\n      }\n    }\n\n    var SideEffect =\n    /*#__PURE__*/\n    function (_PureComponent) {\n      _inheritsLoose(SideEffect, _PureComponent);\n\n      function SideEffect() {\n        return _PureComponent.apply(this, arguments) || this;\n      }\n\n      // Try to use displayName of wrapped component\n      // Expose canUseDOM so tests can monkeypatch it\n      SideEffect.peek = function peek() {\n        return state;\n      };\n\n      SideEffect.rewind = function rewind() {\n        if (SideEffect.canUseDOM) {\n          throw new Error('You may only call rewind() on the server. Call peek() to read the current state.');\n        }\n\n        var recordedState = state;\n        state = undefined;\n        mountedInstances = [];\n        return recordedState;\n      };\n\n      var _proto = SideEffect.prototype;\n\n      _proto.UNSAFE_componentWillMount = function UNSAFE_componentWillMount() {\n        mountedInstances.push(this);\n        emitChange();\n      };\n\n      _proto.componentDidUpdate = function componentDidUpdate() {\n        emitChange();\n      };\n\n      _proto.componentWillUnmount = function componentWillUnmount() {\n        var index = mountedInstances.indexOf(this);\n        mountedInstances.splice(index, 1);\n        emitChange();\n      };\n\n      _proto.render = function render() {\n        return React__default.createElement(WrappedComponent, this.props);\n      };\n\n      return SideEffect;\n    }(React.PureComponent);\n\n    _defineProperty(SideEffect, \"displayName\", \"SideEffect(\" + getDisplayName(WrappedComponent) + \")\");\n\n    _defineProperty(SideEffect, \"canUseDOM\", canUseDOM);\n\n    return SideEffect;\n  };\n}\n\nmodule.exports = withSideEffect;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar react_1 = require(\"react\");\nvar useTimeoutFn_1 = tslib_1.__importDefault(require(\"./useTimeoutFn\"));\nfunction useDebounce(fn, ms, deps) {\n    if (ms === void 0) { ms = 0; }\n    if (deps === void 0) { deps = []; }\n    var _a = useTimeoutFn_1.default(fn, ms), isReady = _a[0], cancel = _a[1], reset = _a[2];\n    react_1.useEffect(reset, deps);\n    return [isReady, cancel];\n}\nexports.default = useDebounce;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nfunction usePrevious(state) {\n    var ref = react_1.useRef();\n    react_1.useEffect(function () {\n        ref.current = state;\n    });\n    return ref.current;\n}\nexports.default = usePrevious;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nfunction useTimeoutFn(fn, ms) {\n    if (ms === void 0) { ms = 0; }\n    var ready = react_1.useRef(false);\n    var timeout = react_1.useRef();\n    var callback = react_1.useRef(fn);\n    var isReady = react_1.useCallback(function () { return ready.current; }, []);\n    var set = react_1.useCallback(function () {\n        ready.current = false;\n        timeout.current && clearTimeout(timeout.current);\n        timeout.current = setTimeout(function () {\n            ready.current = true;\n            callback.current();\n        }, ms);\n    }, [ms]);\n    var clear = react_1.useCallback(function () {\n        ready.current = null;\n        timeout.current && clearTimeout(timeout.current);\n    }, []);\n    // update ref when function changes\n    react_1.useEffect(function () {\n        callback.current = fn;\n    }, [fn]);\n    // set on mount, clear on unmount\n    react_1.useEffect(function () {\n        set();\n        return clear;\n    }, [ms]);\n    return [isReady, clear, set];\n}\nexports.default = useTimeoutFn;\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","const ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.format()\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range\n      .trim()\n      .split(/\\s+/)\n      .join(' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.format()\n  }\n\n  format () {\n    this.range = this.set\n      .map((comps) => comps.join(' ').trim())\n      .join('||')\n      .trim()\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","const debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n          version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (!identifier && identifierBase === false) {\n          throw new Error('invalid increment argument: identifier is empty')\n        }\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","const parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","const eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","const SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n","const SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","const compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","const SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","const parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // Otherwise it can be determined by checking the high version\n\n    if (highVersion.patch) {\n      // anything higher than a patch bump would result in the wrong version\n      return 'patch'\n    }\n\n    if (highVersion.minor) {\n      // anything higher than a minor bump would result in the wrong version\n      return 'minor'\n    }\n\n    // bumping major/minor/patch all have same result\n    return 'major'\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","const compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","const compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","const compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","const SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","const compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","const compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","const SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","const SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","const compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","const SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","const SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","const parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","const compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","const compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","const Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","const compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","const parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","const debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","const numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","class LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n","// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","const {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NUMERICIDENTIFIER]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NUMERICIDENTIFIERLOOSE]\n}|${src[t.NONNUMERICIDENTIFIER]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","const Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","const outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","const SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","const SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","const Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","const Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","const Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n\tvar results = [];\n\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (isArrayish(arg)) {\n\t\t\t// http://jsperf.com/javascript-array-concat-vs-push/98\n\t\t\tresults = concat.call(results, slice.call(arg));\n\t\t} else {\n\t\t\tresults.push(arg);\n\t\t}\n\t}\n\n\treturn results;\n};\n\nswizzle.wrap = function (fn) {\n\treturn function () {\n\t\treturn fn(swizzle(arguments));\n\t};\n};\n","module.exports = function isArrayish(obj) {\n\tif (!obj || typeof obj === 'string') {\n\t\treturn false;\n\t}\n\n\treturn obj instanceof Array || Array.isArray(obj) ||\n\t\t(obj.length >= 0 && (obj.splice instanceof Function ||\n\t\t\t(Object.getOwnPropertyDescriptor(obj, (obj.length - 1)) && obj.constructor.name !== 'String')));\n};\n","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.38\n   Copyright  2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.38',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 500;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bop(?:rg)?x\\/([\\w\\.]+)/i                                          // Opera GX\n            ], [VERSION, [NAME, OPERA+' GX']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i            // Baidu\n            ], [VERSION, [NAME, 'Baidu']], [\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant|iemobile|slim)\\s?(?:browser)?[\\/ ]?([\\w\\.]*)/i,             // Avant/IEMobile/SlimBrowser\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(heytap|ovi)browser\\/([\\d\\.]+)/i,                                  // Heytap/Ovi\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /\\bddg\\/([\\w\\.]+)/i                                                 // DuckDuckGo\n            ], [VERSION, [NAME, 'DuckDuckGo']], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i,\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /slbrowser\\/([\\w\\.]+)/i                                             // Smart Lenovo Browser\n            ], [VERSION, [NAME, 'Smart Lenovo '+BROWSER]], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [\n            /fxios\\/([-\\w\\.]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihu|(qi?ho?o?|360)browser/i                                     // 360\n            ], [[NAME, '360 ' + BROWSER]], [\n            /(oculus|sailfish|huawei|vivo)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 ' + BROWSER], VERSION], [                    // Oculus/Sailfish/HuaweiBrowser/VivoBrowser\n            /samsungbrowser\\/([\\w\\.]+)/i                                        // Samsung Internet\n            ], [VERSION, [NAME, SAMSUNG + ' Internet']], [\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /metasr[\\/ ]?([\\d\\.]+)/i                                            // Sogou Explorer\n            ], [VERSION, [NAME, 'Sogou Explorer']], [\n            /(sogou)mo\\w+\\/([\\d\\.]+)/i                                          // Sogou Mobile\n            ], [[NAME, 'Sogou Mobile'], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|2345Explorer)[\\/ ]?([\\w\\.]+)/i                        // QQBrowser/2345 Browser\n            ], [NAME, VERSION], [\n            /(lbbrowser)/i,                                                     // LieBao Browser\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(Klarna)\\/([\\w\\.]+)/i,                                             // Klarna Shopping Browser for iOS & Android\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(alipay)client\\/([\\w\\.]+)/i,                                       // Alipay\n            /(twitter)(?:and| f.+e\\/([\\w\\.]+))/i,                               // Twitter\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i,                                             // Links\n            /panasonic;(viera)/i                                                // Panasonic Viera\n            ], [NAME, VERSION], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]([-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,        // Xiaomi Redmi 'numeric' models\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /oid[^\\)]+; (2\\d{4}(283|rpbf)[cgl])( bui|\\))/i,                     // Redmi Pad\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n            /\\b(opd2\\d{3}a?) bui/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, TABLET]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,                             // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n                \n            // Ulefone\n            /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Ulefone'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mitv-\\w{5}) bui/i                                                 // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n            /(quest( \\d| pro)?)/i                                               // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n            /\\b(libweb)/i\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i             // Windows Phone\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /windows nt 6\\.2; (arm)/i,                                        // Windows RT\n            /windows[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n            /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[VERSION, strMapper, windowsVersionMap], [NAME, 'Windows']], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6089__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8531__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2007__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4201__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3241__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5959__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8398__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3806__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1269__;","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// src/utils.ts\nvar isServer = typeof window === \"undefined\" || \"Deno\" in globalThis;\nfunction noop() {\n  return void 0;\n}\nfunction functionalUpdate(updater, input) {\n  return typeof updater === \"function\" ? updater(input) : updater;\n}\nfunction isValidTimeout(value) {\n  return typeof value === \"number\" && value >= 0 && value !== Infinity;\n}\nfunction timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nfunction resolveStaleTime(staleTime, query) {\n  return typeof staleTime === \"function\" ? staleTime(query) : staleTime;\n}\nfunction resolveEnabled(enabled, query) {\n  return typeof enabled === \"function\" ? enabled(query) : enabled;\n}\nfunction matchQuery(filters, query) {\n  const {\n    type = \"all\",\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale\n  } = filters;\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n  if (type !== \"all\") {\n    const isActive = query.isActive();\n    if (type === \"active\" && !isActive) {\n      return false;\n    }\n    if (type === \"inactive\" && isActive) {\n      return false;\n    }\n  }\n  if (typeof stale === \"boolean\" && query.isStale() !== stale) {\n    return false;\n  }\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false;\n  }\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n  return true;\n}\nfunction matchMutation(filters, mutation) {\n  const { exact, status, predicate, mutationKey } = filters;\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n  if (status && mutation.state.status !== status) {\n    return false;\n  }\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n  return true;\n}\nfunction hashQueryKeyByOptions(queryKey, options) {\n  const hashFn = options?.queryKeyHashFn || hashKey;\n  return hashFn(queryKey);\n}\nfunction hashKey(queryKey) {\n  return JSON.stringify(\n    queryKey,\n    (_, val) => isPlainObject(val) ? Object.keys(val).sort().reduce((result, key) => {\n      result[key] = val[key];\n      return result;\n    }, {}) : val\n  );\n}\nfunction partialMatchKey(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\n    return !Object.keys(b).some((key) => !partialMatchKey(a[key], b[key]));\n  }\n  return false;\n}\nfunction replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n  const array = isPlainArray(a) && isPlainArray(b);\n  if (array || isPlainObject(a) && isPlainObject(b)) {\n    const aItems = array ? a : Object.keys(a);\n    const aSize = aItems.length;\n    const bItems = array ? b : Object.keys(b);\n    const bSize = bItems.length;\n    const copy = array ? [] : {};\n    let equalItems = 0;\n    for (let i = 0; i < bSize; i++) {\n      const key = array ? i : bItems[i];\n      if ((!array && aItems.includes(key) || array) && a[key] === void 0 && b[key] === void 0) {\n        copy[key] = void 0;\n        equalItems++;\n      } else {\n        copy[key] = replaceEqualDeep(a[key], b[key]);\n        if (copy[key] === a[key] && a[key] !== void 0) {\n          equalItems++;\n        }\n      }\n    }\n    return aSize === bSize && equalItems === aSize ? a : copy;\n  }\n  return b;\n}\nfunction shallowEqualObjects(a, b) {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPlainArray(value) {\n  return Array.isArray(value) && value.length === Object.keys(value).length;\n}\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  }\n  const ctor = o.constructor;\n  if (ctor === void 0) {\n    return true;\n  }\n  const prot = ctor.prototype;\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  }\n  if (!prot.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false;\n  }\n  return true;\n}\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === \"[object Object]\";\n}\nfunction sleep(ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}\nfunction replaceData(prevData, data, options) {\n  if (typeof options.structuralSharing === \"function\") {\n    return options.structuralSharing(prevData, data);\n  } else if (options.structuralSharing !== false) {\n    return replaceEqualDeep(prevData, data);\n  }\n  return data;\n}\nfunction keepPreviousData(previousData) {\n  return previousData;\n}\nfunction addToEnd(items, item, max = 0) {\n  const newItems = [...items, item];\n  return max && newItems.length > max ? newItems.slice(1) : newItems;\n}\nfunction addToStart(items, item, max = 0) {\n  const newItems = [item, ...items];\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;\n}\nvar skipToken = Symbol();\nvar ensureQueryFn = (options, fetchOptions) => {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`\n      );\n    }\n  }\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise;\n  }\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));\n  }\n  return options.queryFn;\n};\nexport {\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  isPlainArray,\n  isPlainObject,\n  isServer,\n  isValidTimeout,\n  keepPreviousData,\n  matchMutation,\n  matchQuery,\n  noop,\n  partialMatchKey,\n  replaceData,\n  replaceEqualDeep,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  skipToken,\n  sleep,\n  timeUntilStale\n};\n//# sourceMappingURL=utils.js.map","// src/notifyManager.ts\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n  let notifyFn = (callback) => {\n    callback();\n  };\n  let batchNotifyFn = (callback) => {\n    callback();\n  };\n  let scheduleFn = (cb) => setTimeout(cb, 0);\n  const setScheduler = (fn) => {\n    scheduleFn = fn;\n  };\n  const batch = (callback) => {\n    let result;\n    transactions++;\n    try {\n      result = callback();\n    } finally {\n      transactions--;\n      if (!transactions) {\n        flush();\n      }\n    }\n    return result;\n  };\n  const schedule = (callback) => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n  const batchCalls = (callback) => {\n    return (...args) => {\n      schedule(() => {\n        callback(...args);\n      });\n    };\n  };\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  const setNotifyFunction = (fn) => {\n    notifyFn = fn;\n  };\n  const setBatchNotifyFunction = (fn) => {\n    batchNotifyFn = fn;\n  };\n  return {\n    batch,\n    batchCalls,\n    schedule,\n    setNotifyFunction,\n    setBatchNotifyFunction,\n    setScheduler\n  };\n}\nvar notifyManager = createNotifyManager();\nexport {\n  createNotifyManager,\n  notifyManager\n};\n//# sourceMappingURL=notifyManager.js.map","// src/subscribable.ts\nvar Subscribable = class {\n  constructor() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.subscribe = this.subscribe.bind(this);\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    this.onSubscribe();\n    return () => {\n      this.listeners.delete(listener);\n      this.onUnsubscribe();\n    };\n  }\n  hasListeners() {\n    return this.listeners.size > 0;\n  }\n  onSubscribe() {\n  }\n  onUnsubscribe() {\n  }\n};\nexport {\n  Subscribable\n};\n//# sourceMappingURL=subscribable.js.map","// src/focusManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar FocusManager = class extends Subscribable {\n  #focused;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onFocus) => {\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus();\n        window.addEventListener(\"visibilitychange\", listener, false);\n        return () => {\n          window.removeEventListener(\"visibilitychange\", listener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === \"boolean\") {\n        this.setFocused(focused);\n      } else {\n        this.onFocus();\n      }\n    });\n  }\n  setFocused(focused) {\n    const changed = this.#focused !== focused;\n    if (changed) {\n      this.#focused = focused;\n      this.onFocus();\n    }\n  }\n  onFocus() {\n    const isFocused = this.isFocused();\n    this.listeners.forEach((listener) => {\n      listener(isFocused);\n    });\n  }\n  isFocused() {\n    if (typeof this.#focused === \"boolean\") {\n      return this.#focused;\n    }\n    return globalThis.document?.visibilityState !== \"hidden\";\n  }\n};\nvar focusManager = new FocusManager();\nexport {\n  FocusManager,\n  focusManager\n};\n//# sourceMappingURL=focusManager.js.map","// src/onlineManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar OnlineManager = class extends Subscribable {\n  #online = true;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onOnline) => {\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true);\n        const offlineListener = () => onOnline(false);\n        window.addEventListener(\"online\", onlineListener, false);\n        window.addEventListener(\"offline\", offlineListener, false);\n        return () => {\n          window.removeEventListener(\"online\", onlineListener);\n          window.removeEventListener(\"offline\", offlineListener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup(this.setOnline.bind(this));\n  }\n  setOnline(online) {\n    const changed = this.#online !== online;\n    if (changed) {\n      this.#online = online;\n      this.listeners.forEach((listener) => {\n        listener(online);\n      });\n    }\n  }\n  isOnline() {\n    return this.#online;\n  }\n};\nvar onlineManager = new OnlineManager();\nexport {\n  OnlineManager,\n  onlineManager\n};\n//# sourceMappingURL=onlineManager.js.map","// src/retryer.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { isServer, sleep } from \"./utils.js\";\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1e3 * 2 ** failureCount, 3e4);\n}\nfunction canFetch(networkMode) {\n  return (networkMode ?? \"online\") === \"online\" ? onlineManager.isOnline() : true;\n}\nvar CancelledError = class {\n  constructor(options) {\n    this.revert = options?.revert;\n    this.silent = options?.silent;\n  }\n};\nfunction isCancelledError(value) {\n  return value instanceof CancelledError;\n}\nfunction createRetryer(config) {\n  let isRetryCancelled = false;\n  let failureCount = 0;\n  let isResolved = false;\n  let continueFn;\n  let promiseResolve;\n  let promiseReject;\n  const promise = new Promise((outerResolve, outerReject) => {\n    promiseResolve = outerResolve;\n    promiseReject = outerReject;\n  });\n  const cancel = (cancelOptions) => {\n    if (!isResolved) {\n      reject(new CancelledError(cancelOptions));\n      config.abort?.();\n    }\n  };\n  const cancelRetry = () => {\n    isRetryCancelled = true;\n  };\n  const continueRetry = () => {\n    isRetryCancelled = false;\n  };\n  const canContinue = () => focusManager.isFocused() && (config.networkMode === \"always\" || onlineManager.isOnline()) && config.canRun();\n  const canStart = () => canFetch(config.networkMode) && config.canRun();\n  const resolve = (value) => {\n    if (!isResolved) {\n      isResolved = true;\n      config.onSuccess?.(value);\n      continueFn?.();\n      promiseResolve(value);\n    }\n  };\n  const reject = (value) => {\n    if (!isResolved) {\n      isResolved = true;\n      config.onError?.(value);\n      continueFn?.();\n      promiseReject(value);\n    }\n  };\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved || canContinue()) {\n          continueResolve(value);\n        }\n      };\n      config.onPause?.();\n    }).then(() => {\n      continueFn = void 0;\n      if (!isResolved) {\n        config.onContinue?.();\n      }\n    });\n  };\n  const run = () => {\n    if (isResolved) {\n      return;\n    }\n    let promiseOrValue;\n    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;\n    try {\n      promiseOrValue = initialPromise ?? config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    }\n    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {\n      if (isResolved) {\n        return;\n      }\n      const retry = config.retry ?? (isServer ? 0 : 3);\n      const retryDelay = config.retryDelay ?? defaultRetryDelay;\n      const delay = typeof retryDelay === \"function\" ? retryDelay(failureCount, error) : retryDelay;\n      const shouldRetry = retry === true || typeof retry === \"number\" && failureCount < retry || typeof retry === \"function\" && retry(failureCount, error);\n      if (isRetryCancelled || !shouldRetry) {\n        reject(error);\n        return;\n      }\n      failureCount++;\n      config.onFail?.(failureCount, error);\n      sleep(delay).then(() => {\n        return canContinue() ? void 0 : pause();\n      }).then(() => {\n        if (isRetryCancelled) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  };\n  return {\n    promise,\n    cancel,\n    continue: () => {\n      continueFn?.();\n      return promise;\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      if (canStart()) {\n        run();\n      } else {\n        pause().then(run);\n      }\n      return promise;\n    }\n  };\n}\nexport {\n  CancelledError,\n  canFetch,\n  createRetryer,\n  isCancelledError\n};\n//# sourceMappingURL=retryer.js.map","// src/removable.ts\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)\n    );\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport {\n  Removable\n};\n//# sourceMappingURL=removable.js.map","// src/query.ts\nimport {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { canFetch, createRetryer, isCancelledError } from \"./retryer.js\";\nimport { Removable } from \"./removable.js\";\nvar Query = class extends Removable {\n  #initialState;\n  #revertState;\n  #cache;\n  #retryer;\n  #defaultOptions;\n  #abortSignalConsumed;\n  constructor(config) {\n    super();\n    this.#abortSignalConsumed = false;\n    this.#defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.#cache = config.cache;\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.#initialState = config.state || getDefaultState(this.options);\n    this.state = this.#initialState;\n    this.scheduleGc();\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  get promise() {\n    return this.#retryer?.promise;\n  }\n  setOptions(options) {\n    this.options = { ...this.#defaultOptions, ...options };\n    this.updateGcTime(this.options.gcTime);\n  }\n  optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === \"idle\") {\n      this.#cache.remove(this);\n    }\n  }\n  setData(newData, options) {\n    const data = replaceData(this.state.data, newData, this.options);\n    this.#dispatch({\n      data,\n      type: \"success\",\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual\n    });\n    return data;\n  }\n  setState(state, setStateOptions) {\n    this.#dispatch({ type: \"setState\", state, setStateOptions });\n  }\n  cancel(options) {\n    const promise = this.#retryer?.promise;\n    this.#retryer?.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  }\n  destroy() {\n    super.destroy();\n    this.cancel({ silent: true });\n  }\n  reset() {\n    this.destroy();\n    this.setState(this.#initialState);\n  }\n  isActive() {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false\n    );\n  }\n  isDisabled() {\n    return this.getObserversCount() > 0 && !this.isActive();\n  }\n  isStale() {\n    if (this.state.isInvalidated) {\n      return true;\n    }\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale\n      );\n    }\n    return this.state.data === void 0;\n  }\n  isStaleByTime(staleTime = 0) {\n    return this.state.isInvalidated || this.state.data === void 0 || !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  }\n  onFocus() {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  onOnline() {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  addObserver(observer) {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer);\n      this.clearGcTimeout();\n      this.#cache.notify({ type: \"observerAdded\", query: this, observer });\n    }\n  }\n  removeObserver(observer) {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer);\n      if (!this.observers.length) {\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true });\n          } else {\n            this.#retryer.cancelRetry();\n          }\n        }\n        this.scheduleGc();\n      }\n      this.#cache.notify({ type: \"observerRemoved\", query: this, observer });\n    }\n  }\n  getObserversCount() {\n    return this.observers.length;\n  }\n  invalidate() {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: \"invalidate\" });\n    }\n  }\n  fetch(options, fetchOptions) {\n    if (this.state.fetchStatus !== \"idle\") {\n      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {\n        this.cancel({ silent: true });\n      } else if (this.#retryer) {\n        this.#retryer.continueRetry();\n        return this.#retryer.promise;\n      }\n    }\n    if (options) {\n      this.setOptions(options);\n    }\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn);\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`\n        );\n      }\n    }\n    const abortController = new AbortController();\n    const addSignalProperty = (object) => {\n      Object.defineProperty(object, \"signal\", {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true;\n          return abortController.signal;\n        }\n      });\n    };\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions);\n      const queryFnContext = {\n        queryKey: this.queryKey,\n        meta: this.meta\n      };\n      addSignalProperty(queryFnContext);\n      this.#abortSignalConsumed = false;\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this\n        );\n      }\n      return queryFn(queryFnContext);\n    };\n    const context = {\n      fetchOptions,\n      options: this.options,\n      queryKey: this.queryKey,\n      state: this.state,\n      fetchFn\n    };\n    addSignalProperty(context);\n    this.options.behavior?.onFetch(\n      context,\n      this\n    );\n    this.#revertState = this.state;\n    if (this.state.fetchStatus === \"idle\" || this.state.fetchMeta !== context.fetchOptions?.meta) {\n      this.#dispatch({ type: \"fetch\", meta: context.fetchOptions?.meta });\n    }\n    const onError = (error) => {\n      if (!(isCancelledError(error) && error.silent)) {\n        this.#dispatch({\n          type: \"error\",\n          error\n        });\n      }\n      if (!isCancelledError(error)) {\n        this.#cache.config.onError?.(\n          error,\n          this\n        );\n        this.#cache.config.onSettled?.(\n          this.state.data,\n          error,\n          this\n        );\n      }\n      if (!this.isFetchingOptimistic) {\n        this.scheduleGc();\n      }\n      this.isFetchingOptimistic = false;\n    };\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise,\n      fn: context.fetchFn,\n      abort: abortController.abort.bind(abortController),\n      onSuccess: (data) => {\n        if (data === void 0) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(\n              `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`\n            );\n          }\n          onError(new Error(`${this.queryHash} data is undefined`));\n          return;\n        }\n        this.setData(data);\n        this.#cache.config.onSuccess?.(data, this);\n        this.#cache.config.onSettled?.(\n          data,\n          this.state.error,\n          this\n        );\n        if (!this.isFetchingOptimistic) {\n          this.scheduleGc();\n        }\n        this.isFetchingOptimistic = false;\n      },\n      onError,\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true\n    });\n    return this.#retryer.start();\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            fetchStatus: \"paused\"\n          };\n        case \"continue\":\n          return {\n            ...state,\n            fetchStatus: \"fetching\"\n          };\n        case \"fetch\":\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            dataUpdateCount: state.dataUpdateCount + 1,\n            dataUpdatedAt: action.dataUpdatedAt ?? Date.now(),\n            error: null,\n            isInvalidated: false,\n            status: \"success\",\n            ...!action.manual && {\n              fetchStatus: \"idle\",\n              fetchFailureCount: 0,\n              fetchFailureReason: null\n            }\n          };\n        case \"error\":\n          const error = action.error;\n          if (isCancelledError(error) && error.revert && this.#revertState) {\n            return { ...this.#revertState, fetchStatus: \"idle\" };\n          }\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: \"idle\",\n            status: \"error\"\n          };\n        case \"invalidate\":\n          return {\n            ...state,\n            isInvalidated: true\n          };\n        case \"setState\":\n          return {\n            ...state,\n            ...action.state\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate();\n      });\n      this.#cache.notify({ query: this, type: \"updated\", action });\n    });\n  }\n};\nfunction fetchState(data, options) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? \"fetching\" : \"paused\",\n    ...data === void 0 && {\n      error: null,\n      status: \"pending\"\n    }\n  };\n}\nfunction getDefaultState(options) {\n  const data = typeof options.initialData === \"function\" ? options.initialData() : options.initialData;\n  const hasData = data !== void 0;\n  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === \"function\" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? \"success\" : \"pending\",\n    fetchStatus: \"idle\"\n  };\n}\nexport {\n  Query,\n  fetchState\n};\n//# sourceMappingURL=query.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        cache: this,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map","// src/mutation.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Removable } from \"./removable.js\";\nimport { createRetryer } from \"./retryer.js\";\nvar Mutation = class extends Removable {\n  #observers;\n  #mutationCache;\n  #retryer;\n  constructor(config) {\n    super();\n    this.mutationId = config.mutationId;\n    this.#mutationCache = config.mutationCache;\n    this.#observers = [];\n    this.state = config.state || getDefaultState();\n    this.setOptions(config.options);\n    this.scheduleGc();\n  }\n  setOptions(options) {\n    this.options = options;\n    this.updateGcTime(this.options.gcTime);\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  addObserver(observer) {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer);\n      this.clearGcTimeout();\n      this.#mutationCache.notify({\n        type: \"observerAdded\",\n        mutation: this,\n        observer\n      });\n    }\n  }\n  removeObserver(observer) {\n    this.#observers = this.#observers.filter((x) => x !== observer);\n    this.scheduleGc();\n    this.#mutationCache.notify({\n      type: \"observerRemoved\",\n      mutation: this,\n      observer\n    });\n  }\n  optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === \"pending\") {\n        this.scheduleGc();\n      } else {\n        this.#mutationCache.remove(this);\n      }\n    }\n  }\n  continue() {\n    return this.#retryer?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n    this.execute(this.state.variables);\n  }\n  async execute(variables) {\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error(\"No mutationFn found\"));\n        }\n        return this.options.mutationFn(variables);\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this)\n    });\n    const restored = this.state.status === \"pending\";\n    const isPaused = !this.#retryer.canStart();\n    try {\n      if (!restored) {\n        this.#dispatch({ type: \"pending\", variables, isPaused });\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this\n        );\n        const context = await this.options.onMutate?.(variables);\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: \"pending\",\n            context,\n            variables,\n            isPaused\n          });\n        }\n      }\n      const data = await this.#retryer.start();\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSuccess?.(data, variables, this.state.context);\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this\n      );\n      await this.options.onSettled?.(data, null, variables, this.state.context);\n      this.#dispatch({ type: \"success\", data });\n      return data;\n    } catch (error) {\n      try {\n        await this.#mutationCache.config.onError?.(\n          error,\n          variables,\n          this.state.context,\n          this\n        );\n        await this.options.onError?.(\n          error,\n          variables,\n          this.state.context\n        );\n        await this.#mutationCache.config.onSettled?.(\n          void 0,\n          error,\n          this.state.variables,\n          this.state.context,\n          this\n        );\n        await this.options.onSettled?.(\n          void 0,\n          error,\n          variables,\n          this.state.context\n        );\n        throw error;\n      } finally {\n        this.#dispatch({ type: \"error\", error });\n      }\n    } finally {\n      this.#mutationCache.runNext(this);\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            isPaused: true\n          };\n        case \"continue\":\n          return {\n            ...state,\n            isPaused: false\n          };\n        case \"pending\":\n          return {\n            ...state,\n            context: action.context,\n            data: void 0,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: \"pending\",\n            variables: action.variables,\n            submittedAt: Date.now()\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: \"success\",\n            isPaused: false\n          };\n        case \"error\":\n          return {\n            ...state,\n            data: void 0,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: \"error\"\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action);\n      });\n      this.#mutationCache.notify({\n        mutation: this,\n        type: \"updated\",\n        action\n      });\n    });\n  }\n};\nfunction getDefaultState() {\n  return {\n    context: void 0,\n    data: void 0,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: \"idle\",\n    variables: void 0,\n    submittedAt: 0\n  };\n}\nexport {\n  Mutation,\n  getDefaultState\n};\n//# sourceMappingURL=mutation.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Map();\n    this.#mutationId = Date.now();\n  }\n  #mutations;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    const scope = scopeFor(mutation);\n    const mutations = this.#mutations.get(scope) ?? [];\n    mutations.push(mutation);\n    this.#mutations.set(scope, mutations);\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    const scope = scopeFor(mutation);\n    if (this.#mutations.has(scope)) {\n      const mutations = this.#mutations.get(scope)?.filter((x) => x !== mutation);\n      if (mutations) {\n        if (mutations.length === 0) {\n          this.#mutations.delete(scope);\n        } else {\n          this.#mutations.set(scope, mutations);\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const firstPendingMutation = this.#mutations.get(scopeFor(mutation))?.find((m) => m.state.status === \"pending\");\n    return !firstPendingMutation || firstPendingMutation === mutation;\n  }\n  runNext(mutation) {\n    const foundMutation = this.#mutations.get(scopeFor(mutation))?.find((m) => m !== mutation && m.state.isPaused);\n    return foundMutation?.continue() ?? Promise.resolve();\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((mutation) => {\n        this.remove(mutation);\n      });\n    });\n  }\n  getAll() {\n    return [...this.#mutations.values()].flat();\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id ?? String(mutation.mutationId);\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const fetchFn = async () => {\n        const options = context.options;\n        const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n        const oldPages = context.state.data?.pages || [];\n        const oldPageParams = context.state.data?.pageParams || [];\n        const empty = { pages: [], pageParams: [] };\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const queryFnContext = {\n            queryKey: context.queryKey,\n            pageParam: param,\n            direction: previous ? \"backward\" : \"forward\",\n            meta: context.options.meta\n          };\n          addSignalProperty(queryFnContext);\n          const page = await queryFn(\n            queryFnContext\n          );\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        let result;\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          result = await fetchPage(\n            empty,\n            oldPageParams[0] ?? options.initialPageParam\n          );\n          const remainingPages = pages ?? oldPages.length;\n          for (let i = 1; i < remainingPages; i++) {\n            const param = getNextPageParam(options, result);\n            result = await fetchPage(result, param);\n          }\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  );\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return options.getPreviousPageParam?.(\n    pages[0],\n    pages,\n    pageParams[0],\n    pageParams\n  );\n}\nfunction hasNextPage(options, data) {\n  if (!data)\n    return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam)\n    return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","import { QueryClient } from '@tanstack/react-query';\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      networkMode: 'always',\n      retry: false,\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1)\n      return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0)\n      return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const cachedData = this.getQueryData(options.queryKey);\n    if (cachedData === void 0)\n      return this.fetchQuery(options);\n    else {\n      const defaultedOptions = this.defaultQueryOptions(options);\n      const query = this.#queryCache.build(this, defaultedOptions);\n      if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n        void this.prefetchQuery(defaultedOptions);\n      }\n      return Promise.resolve(cachedData);\n    }\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    const refetchFilters = {\n      type: \"active\",\n      ...filters\n    };\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(refetchFilters, options);\n    });\n  }\n  cancelQueries(filters = {}, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters = {}, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      const refetchFilters = {\n        ...filters,\n        type: filters.refetchType ?? filters.type ?? \"active\"\n      };\n      return this.refetchQueries(refetchFilters, options);\n    });\n  }\n  refetchQueries(filters = {}, options) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options?.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    let result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        result = { ...result, ...queryDefault.defaultOptions };\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    let result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        result = { ...result, ...queryDefault.defaultOptions };\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.enabled !== true && defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","export var TransportItemType;\n(function (TransportItemType) {\n    TransportItemType[\"EXCEPTION\"] = \"exception\";\n    TransportItemType[\"LOG\"] = \"log\";\n    TransportItemType[\"MEASUREMENT\"] = \"measurement\";\n    TransportItemType[\"TRACE\"] = \"trace\";\n    TransportItemType[\"EVENT\"] = \"event\";\n})(TransportItemType || (TransportItemType = {}));\nexport const transportItemTypeToBodyKey = {\n    [TransportItemType.EXCEPTION]: 'exceptions',\n    [TransportItemType.LOG]: 'logs',\n    [TransportItemType.MEASUREMENT]: 'measurements',\n    [TransportItemType.TRACE]: 'traces',\n    [TransportItemType.EVENT]: 'events',\n};\n//# sourceMappingURL=const.js.map","export function dateNow() {\n    return Date.now();\n}\nexport function getCurrentTimestamp() {\n    return new Date().toISOString();\n}\nexport function timestampToIsoString(value) {\n    return new Date(value).toISOString();\n}\n//# sourceMappingURL=date.js.map","export function isTypeof(value, type) {\n    return typeof value === type;\n}\nexport function isToString(value, type) {\n    return Object.prototype.toString.call(value) === `[object ${type}]`;\n}\nexport function isInstanceOf(value, reference) {\n    try {\n        return value instanceof reference;\n    }\n    catch (err) {\n        return false;\n    }\n}\nexport const isUndefined = ((value) => isTypeof(value, 'undefined'));\nexport const isNull = ((value) => isTypeof(value, 'null'));\nexport const isString = ((value) => isTypeof(value, 'string'));\nexport const isNumber = ((value) => (isTypeof(value, 'number') && !isNaN(value)) || isTypeof(value, 'bigint'));\nexport const isInt = ((value) => isNumber(value) && Number.isInteger(value));\nexport const isBoolean = ((value) => isTypeof(value, 'boolean'));\nexport const isSymbol = ((value) => isTypeof(value, 'symbol'));\nexport const isObject = ((value) => !isNull(value) && isTypeof(value, 'object'));\nexport const isFunction = ((value) => isTypeof(value, 'function'));\nexport const isArray = ((value) => isToString(value, 'Array'));\nexport const isRegExp = ((value) => isToString(value, 'RegExp'));\nexport const isThenable = ((value) => isFunction(value === null || value === void 0 ? void 0 : value.then));\nexport const isPrimitive = ((value) => !isObject(value) && !isFunction(value));\nexport const isEventDefined = typeof Event !== 'undefined';\nexport const isEvent = ((value) => isEventDefined && isInstanceOf(value, Event));\nexport const isErrorDefined = typeof Error !== 'undefined';\nexport const isError = ((value) => isErrorDefined && isInstanceOf(value, Error));\nexport const isErrorEvent = ((value) => isToString(value, 'ErrorEvent'));\nexport const isDomError = ((value) => isToString(value, 'DOMError'));\nexport const isDomException = ((value) => isToString(value, 'DOMException'));\nexport const isElementDefined = typeof Element !== 'undefined';\nexport const isElement = ((value) => isElementDefined && isInstanceOf(value, Element));\nexport const isMapDefined = typeof Map !== 'undefined';\nexport const isMap = ((value) => isMapDefined && isInstanceOf(value, Map));\nexport const isSyntheticEvent = ((value) => isObject(value) &&\n    'nativeEvent' in value &&\n    'preventDefault' in value &&\n    'stopPropagation' in value);\n//# sourceMappingURL=is.js.map","import { isArray, isObject, isTypeof } from './is';\n// This function was inspired by fast-deep-equal\n// fast-deep-equal has issues with Rollup and also it checks for some edge cases that we don't need\nexport function deepEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    // Using isTypeOf instead of isNumber as isNumber also checks against NaN\n    if (isTypeof(a, 'number') && isNaN(a)) {\n        return isTypeof(b, 'number') && isNaN(b);\n    }\n    const aIsArray = isArray(a);\n    const bIsArray = isArray(b);\n    if (aIsArray !== bIsArray) {\n        return false;\n    }\n    if (aIsArray && bIsArray) {\n        const length = a.length;\n        if (length !== b.length) {\n            return false;\n        }\n        for (let idx = length; idx-- !== 0;) {\n            if (!deepEqual(a[idx], b[idx])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    const aIsObject = isObject(a);\n    const bIsObject = isObject(b);\n    if (aIsObject !== bIsObject) {\n        return false;\n    }\n    if (a && b && aIsObject && bIsObject) {\n        const aKeys = Object.keys(a);\n        const bKeys = Object.keys(b);\n        const aLength = aKeys.length;\n        const bLength = bKeys.length;\n        if (aLength !== bLength) {\n            return false;\n        }\n        for (let aKey of aKeys) {\n            if (!bKeys.includes(aKey)) {\n                return false;\n            }\n        }\n        for (let aKey of aKeys) {\n            if (!deepEqual(a[aKey], b[aKey])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=deepEqual.js.map","export const defaultExceptionType = 'Error';\n//# sourceMappingURL=const.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, getCurrentTimestamp, isNull } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport { defaultExceptionType } from './const';\nlet stacktraceParser;\nexport function initializeExceptionsAPI(_unpatchedConsole, internalLogger, config, metas, transports, tracesApi) {\n    var _a;\n    internalLogger.debug('Initializing exceptions API');\n    let lastPayload = null;\n    stacktraceParser = (_a = config.parseStacktrace) !== null && _a !== void 0 ? _a : stacktraceParser;\n    const changeStacktraceParser = (newStacktraceParser) => {\n        internalLogger.debug('Changing stacktrace parser');\n        stacktraceParser = newStacktraceParser !== null && newStacktraceParser !== void 0 ? newStacktraceParser : stacktraceParser;\n    };\n    const getStacktraceParser = () => stacktraceParser;\n    const pushError = (error, { skipDedupe, stackFrames, type, context, spanContext, timestampOverwriteMs } = {}) => {\n        type = type || error.name || defaultExceptionType;\n        const item = {\n            meta: metas.value,\n            payload: {\n                type,\n                value: error.message,\n                timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n                trace: spanContext\n                    ? {\n                        trace_id: spanContext.traceId,\n                        span_id: spanContext.spanId,\n                    }\n                    : tracesApi.getTraceContext(),\n                context: context !== null && context !== void 0 ? context : {},\n            },\n            type: TransportItemType.EXCEPTION,\n        };\n        stackFrames = stackFrames !== null && stackFrames !== void 0 ? stackFrames : (error.stack ? stacktraceParser === null || stacktraceParser === void 0 ? void 0 : stacktraceParser(error).frames : undefined);\n        if (stackFrames === null || stackFrames === void 0 ? void 0 : stackFrames.length) {\n            item.payload.stacktrace = {\n                frames: stackFrames,\n            };\n        }\n        const testingPayload = {\n            type: item.payload.type,\n            value: item.payload.value,\n            stackTrace: item.payload.stacktrace,\n            context: item.payload.context,\n        };\n        if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n            internalLogger.debug('Skipping error push because it is the same as the last one\\n', item.payload);\n            return;\n        }\n        lastPayload = testingPayload;\n        internalLogger.debug('Pushing exception\\n', item);\n        transports.execute(item);\n    };\n    changeStacktraceParser(config.parseStacktrace);\n    return {\n        changeStacktraceParser,\n        getStacktraceParser,\n        pushError,\n    };\n}\n//# sourceMappingURL=initialize.js.map","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[\"TRACE\"] = \"trace\";\n    LogLevel[\"DEBUG\"] = \"debug\";\n    LogLevel[\"INFO\"] = \"info\";\n    LogLevel[\"LOG\"] = \"log\";\n    LogLevel[\"WARN\"] = \"warn\";\n    LogLevel[\"ERROR\"] = \"error\";\n})(LogLevel || (LogLevel = {}));\nexport const defaultLogLevel = LogLevel.LOG;\nexport const allLogLevels = [\n    LogLevel.TRACE,\n    LogLevel.DEBUG,\n    LogLevel.INFO,\n    LogLevel.LOG,\n    LogLevel.WARN,\n    LogLevel.ERROR,\n];\n//# sourceMappingURL=logLevels.js.map","export const defaultLogArgsSerializer = (args) => args\n    .map((arg) => {\n    try {\n        return String(arg);\n    }\n    catch (err) {\n        return '';\n    }\n})\n    .join(' ');\n//# sourceMappingURL=const.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { noop } from '../utils';\nexport var InternalLoggerLevel;\n(function (InternalLoggerLevel) {\n    InternalLoggerLevel[InternalLoggerLevel[\"OFF\"] = 0] = \"OFF\";\n    InternalLoggerLevel[InternalLoggerLevel[\"ERROR\"] = 1] = \"ERROR\";\n    InternalLoggerLevel[InternalLoggerLevel[\"WARN\"] = 2] = \"WARN\";\n    InternalLoggerLevel[InternalLoggerLevel[\"INFO\"] = 3] = \"INFO\";\n    InternalLoggerLevel[InternalLoggerLevel[\"VERBOSE\"] = 4] = \"VERBOSE\";\n})(InternalLoggerLevel || (InternalLoggerLevel = {}));\nexport const defaultInternalLoggerPrefix = 'Faro';\nexport const defaultInternalLogger = {\n    debug: noop,\n    error: noop,\n    info: noop,\n    prefix: defaultInternalLoggerPrefix,\n    warn: noop,\n};\nexport const defaultInternalLoggerLevel = InternalLoggerLevel.ERROR;\n//# sourceMappingURL=const.js.map","export const defaultUnpatchedConsole = Object.assign({}, console);\n//# sourceMappingURL=const.js.map","import { defaultUnpatchedConsole } from '../unpatchedConsole';\nimport { noop } from '../utils';\nimport { defaultInternalLogger, defaultInternalLoggerLevel, InternalLoggerLevel } from './const';\nexport function createInternalLogger(unpatchedConsole = defaultUnpatchedConsole, internalLoggerLevel = defaultInternalLoggerLevel) {\n    const internalLogger = defaultInternalLogger;\n    if (internalLoggerLevel > InternalLoggerLevel.OFF) {\n        internalLogger.error =\n            internalLoggerLevel >= InternalLoggerLevel.ERROR\n                ? function (...args) {\n                    unpatchedConsole.error(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n        internalLogger.warn =\n            internalLoggerLevel >= InternalLoggerLevel.WARN\n                ? function (...args) {\n                    unpatchedConsole.warn(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n        internalLogger.info =\n            internalLoggerLevel >= InternalLoggerLevel.INFO\n                ? function (...args) {\n                    unpatchedConsole.info(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n        internalLogger.debug =\n            internalLoggerLevel >= InternalLoggerLevel.VERBOSE\n                ? function (...args) {\n                    unpatchedConsole.debug(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n    }\n    return internalLogger;\n}\n//# sourceMappingURL=createInternalLogger.js.map","import { defaultInternalLogger } from './const';\nimport { createInternalLogger } from './createInternalLogger';\nexport let internalLogger = defaultInternalLogger;\nexport function initializeInternalLogger(unpatchedConsole, config) {\n    internalLogger = createInternalLogger(unpatchedConsole, config.internalLoggerLevel);\n    return internalLogger;\n}\n//# sourceMappingURL=initialize.js.map","// This does not uses isUndefined method because it will throw an error in non-browser environments\nexport const globalObject = (typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof global !== 'undefined'\n        ? global\n        : typeof self !== 'undefined'\n            ? self\n            : undefined);\n//# sourceMappingURL=globalObject.js.map","// auto-generated by bin/genVersion.ts\nexport const VERSION = '1.10.0';\n//# sourceMappingURL=version.js.map","export const internalGlobalObjectKey = '_faroInternal';\n//# sourceMappingURL=const.js.map","import { setFaroOnGlobalObject } from './faroGlobalObject';\nimport { setInternalFaroOnGlobalObject } from './internalFaroGlobalObject';\nexport let faro = {};\nexport function registerFaro(unpatchedConsole, internalLogger, config, metas, transports, api, instrumentations) {\n    internalLogger.debug('Initializing Faro');\n    faro = {\n        api,\n        config,\n        instrumentations,\n        internalLogger,\n        metas,\n        pause: transports.pause,\n        transports,\n        unpatchedConsole,\n        unpause: transports.unpause,\n    };\n    setInternalFaroOnGlobalObject(faro);\n    setFaroOnGlobalObject(faro);\n    return faro;\n}\n//# sourceMappingURL=registerFaro.js.map","import { globalObject } from '../globalObject';\nimport { internalGlobalObjectKey } from './const';\nexport function getInternalFromGlobalObject() {\n    return globalObject[internalGlobalObjectKey];\n}\nexport function setInternalFaroOnGlobalObject(faro) {\n    if (!faro.config.isolate) {\n        faro.internalLogger.debug('Registering internal Faro instance on global object');\n        Object.defineProperty(globalObject, internalGlobalObjectKey, {\n            configurable: false,\n            enumerable: false,\n            writable: false,\n            value: faro,\n        });\n    }\n    else {\n        faro.internalLogger.debug('Skipping registering internal Faro instance on global object');\n    }\n}\nexport function isInternalFaroOnGlobalObject() {\n    return internalGlobalObjectKey in globalObject;\n}\n//# sourceMappingURL=internalFaroGlobalObject.js.map","import { globalObject } from '../globalObject';\nexport function setFaroOnGlobalObject(faro) {\n    if (!faro.config.preventGlobalExposure) {\n        faro.internalLogger.debug(`Registering public faro reference in the global scope using \"${faro.config.globalObjectKey}\" key`);\n        if (faro.config.globalObjectKey in globalObject) {\n            faro.internalLogger.warn(`Skipping global registration due to key \"${faro.config.globalObjectKey}\" being used already. Please set \"globalObjectKey\" to something else or set \"preventGlobalExposure\" to \"true\"`);\n            return;\n        }\n        Object.defineProperty(globalObject, faro.config.globalObjectKey, {\n            configurable: false,\n            writable: false,\n            value: faro,\n        });\n    }\n    else {\n        faro.internalLogger.debug('Skipping registering public Faro instance in the global scope');\n    }\n}\n//# sourceMappingURL=faroGlobalObject.js.map","const DEFAULT_SEND_TIMEOUT_MS = 250;\nconst DEFAULT_BATCH_ITEM_LIMIT = 50;\nexport class BatchExecutor {\n    constructor(sendFn, options) {\n        var _a, _b;\n        this.signalBuffer = [];\n        this.itemLimit = (_a = options === null || options === void 0 ? void 0 : options.itemLimit) !== null && _a !== void 0 ? _a : DEFAULT_BATCH_ITEM_LIMIT;\n        this.sendTimeout = (_b = options === null || options === void 0 ? void 0 : options.sendTimeout) !== null && _b !== void 0 ? _b : DEFAULT_SEND_TIMEOUT_MS;\n        this.paused = (options === null || options === void 0 ? void 0 : options.paused) || false;\n        this.sendFn = sendFn;\n        this.flushInterval = -1;\n        if (!this.paused) {\n            this.start();\n        }\n        // Send batched/buffered data when user navigates to new page, switches or closes the tab, minimizes or closes the browser.\n        // If on mobile, it also sends data if user switches from the browser to a different app.\n        document.addEventListener('visibilitychange', () => {\n            if (document.visibilityState === 'hidden') {\n                this.flush();\n            }\n        });\n    }\n    addItem(item) {\n        if (this.paused) {\n            return;\n        }\n        this.signalBuffer.push(item);\n        if (this.signalBuffer.length >= this.itemLimit) {\n            this.flush();\n        }\n    }\n    start() {\n        this.paused = false;\n        if (this.sendTimeout > 0) {\n            this.flushInterval = window.setInterval(() => this.flush(), this.sendTimeout);\n        }\n    }\n    pause() {\n        this.paused = true;\n        clearInterval(this.flushInterval);\n    }\n    groupItems(items) {\n        const itemMap = new Map();\n        items.forEach((item) => {\n            const metaKey = JSON.stringify(item.meta);\n            let currentItems = itemMap.get(metaKey);\n            if (currentItems === undefined) {\n                currentItems = [item];\n            }\n            else {\n                currentItems = [...currentItems, item];\n            }\n            itemMap.set(metaKey, currentItems);\n        });\n        return Array.from(itemMap.values());\n    }\n    flush() {\n        if (this.paused || this.signalBuffer.length === 0) {\n            return;\n        }\n        const itemGroups = this.groupItems(this.signalBuffer);\n        itemGroups.forEach(this.sendFn);\n        this.signalBuffer = [];\n    }\n}\n//# sourceMappingURL=batchExecutor.js.map","import { isString } from '../utils';\nimport { BatchExecutor } from './batchExecutor';\nimport { TransportItemType } from './const';\nexport function shouldIgnoreEvent(patterns, msg) {\n    return patterns.some((pattern) => {\n        return isString(pattern) ? msg.includes(pattern) : !!msg.match(pattern);\n    });\n}\nexport function createBeforeSendHookFromIgnorePatterns(patterns) {\n    return (item) => {\n        if (item.type === TransportItemType.EXCEPTION && item.payload) {\n            const evt = item.payload;\n            const msg = `${evt.type}: ${evt.value}`;\n            if (shouldIgnoreEvent(patterns, msg)) {\n                return null;\n            }\n        }\n        return item;\n    };\n}\nexport function initializeTransports(unpatchedConsole, internalLogger, config, metas) {\n    var _a;\n    internalLogger.debug('Initializing transports');\n    const transports = [];\n    let paused = config.paused;\n    let beforeSendHooks = [];\n    const add = (...newTransports) => {\n        internalLogger.debug('Adding transports');\n        newTransports.forEach((newTransport) => {\n            internalLogger.debug(`Adding \"${newTransport.name}\" transport`);\n            const exists = transports.some((existingTransport) => existingTransport === newTransport);\n            if (exists) {\n                internalLogger.warn(`Transport ${newTransport.name} is already added`);\n                return;\n            }\n            newTransport.unpatchedConsole = unpatchedConsole;\n            newTransport.internalLogger = internalLogger;\n            newTransport.config = config;\n            newTransport.metas = metas;\n            transports.push(newTransport);\n        });\n    };\n    const addBeforeSendHooks = (...newBeforeSendHooks) => {\n        internalLogger.debug('Adding beforeSendHooks\\n', beforeSendHooks);\n        newBeforeSendHooks.forEach((beforeSendHook) => {\n            if (beforeSendHook) {\n                beforeSendHooks.push(beforeSendHook);\n            }\n        });\n    };\n    const addIgnoreErrorsPatterns = (...ignoreErrorsPatterns) => {\n        internalLogger.debug('Adding ignoreErrorsPatterns\\n', ignoreErrorsPatterns);\n        ignoreErrorsPatterns.forEach((ignoreErrorsPattern) => {\n            if (ignoreErrorsPattern) {\n                beforeSendHooks.push(createBeforeSendHookFromIgnorePatterns(ignoreErrorsPattern));\n            }\n        });\n    };\n    const applyBeforeSendHooks = (items) => {\n        let filteredItems = items;\n        for (const hook of beforeSendHooks) {\n            const modified = filteredItems.map(hook).filter(Boolean);\n            if (modified.length === 0) {\n                return [];\n            }\n            filteredItems = modified;\n        }\n        return filteredItems;\n    };\n    const batchedSend = (items) => {\n        const filteredItems = applyBeforeSendHooks(items);\n        if (filteredItems.length === 0) {\n            return;\n        }\n        for (const transport of transports) {\n            internalLogger.debug(`Transporting item using ${transport.name}\\n`, filteredItems);\n            if (transport.isBatched()) {\n                transport.send(filteredItems);\n            }\n        }\n    };\n    const instantSend = (item) => {\n        var _a, _b;\n        // prevent all beforeSend hooks being executed twice if batching is enabled.\n        if (((_a = config.batching) === null || _a === void 0 ? void 0 : _a.enabled) && transports.every((transport) => transport.isBatched())) {\n            return;\n        }\n        const [filteredItem] = applyBeforeSendHooks([item]);\n        if (filteredItem === undefined) {\n            return;\n        }\n        for (const transport of transports) {\n            internalLogger.debug(`Transporting item using ${transport.name}\\n`, filteredItem);\n            if (!transport.isBatched()) {\n                transport.send(filteredItem);\n            }\n            else if (!((_b = config.batching) === null || _b === void 0 ? void 0 : _b.enabled)) {\n                transport.send([filteredItem]);\n            }\n        }\n    };\n    let batchExecutor;\n    if ((_a = config.batching) === null || _a === void 0 ? void 0 : _a.enabled) {\n        batchExecutor = new BatchExecutor(batchedSend, {\n            sendTimeout: config.batching.sendTimeout,\n            itemLimit: config.batching.itemLimit,\n            paused,\n        });\n    }\n    // Send a signal to the appropriate transports\n    //\n    // 1. If SDK is paused, early return\n    // 2. If batching is not enabled send the signal to all transports\n    //    instantly.\n    // 3i. If batching is enabled, enqueue the signal\n    // 3ii. Send the signal instantly to all un-batched transports\n    const execute = (item) => {\n        var _a;\n        if (paused) {\n            return;\n        }\n        if ((_a = config.batching) === null || _a === void 0 ? void 0 : _a.enabled) {\n            batchExecutor === null || batchExecutor === void 0 ? void 0 : batchExecutor.addItem(item);\n        }\n        instantSend(item);\n    };\n    const getBeforeSendHooks = () => [...beforeSendHooks];\n    const isPaused = () => paused;\n    const pause = () => {\n        internalLogger.debug('Pausing transports');\n        batchExecutor === null || batchExecutor === void 0 ? void 0 : batchExecutor.pause();\n        paused = true;\n    };\n    const remove = (...transportsToRemove) => {\n        internalLogger.debug('Removing transports');\n        transportsToRemove.forEach((transportToRemove) => {\n            internalLogger.debug(`Removing \"${transportToRemove.name}\" transport`);\n            const existingTransportIndex = transports.indexOf(transportToRemove);\n            if (existingTransportIndex === -1) {\n                internalLogger.warn(`Transport \"${transportToRemove.name}\" is not added`);\n                return;\n            }\n            transports.splice(existingTransportIndex, 1);\n        });\n    };\n    const removeBeforeSendHooks = (...beforeSendHooksToRemove) => {\n        beforeSendHooks.filter((beforeSendHook) => !beforeSendHooksToRemove.includes(beforeSendHook));\n    };\n    const unpause = () => {\n        internalLogger.debug('Unpausing transports');\n        batchExecutor === null || batchExecutor === void 0 ? void 0 : batchExecutor.start();\n        paused = false;\n    };\n    return {\n        add,\n        addBeforeSendHooks,\n        addIgnoreErrorsPatterns,\n        getBeforeSendHooks,\n        execute,\n        isPaused,\n        pause,\n        remove,\n        removeBeforeSendHooks,\n        get transports() {\n            return [...transports];\n        },\n        unpause,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { defaultUnpatchedConsole } from './const';\nexport let unpatchedConsole = defaultUnpatchedConsole;\nexport function initializeUnpatchedConsole(config) {\n    var _a;\n    unpatchedConsole = (_a = config.unpatchedConsole) !== null && _a !== void 0 ? _a : unpatchedConsole;\n    return unpatchedConsole;\n}\n//# sourceMappingURL=initialize.js.map","import { initializeAPI } from './api';\nimport { initializeInstrumentations, registerInitialInstrumentations } from './instrumentations';\nimport { initializeInternalLogger } from './internalLogger';\nimport { initializeMetas, registerInitialMetas } from './metas';\nimport { isInternalFaroOnGlobalObject, registerFaro } from './sdk';\nimport { initializeTransports, registerInitialTransports } from './transports';\nimport { initializeUnpatchedConsole } from './unpatchedConsole';\nexport function initializeFaro(config) {\n    const unpatchedConsole = initializeUnpatchedConsole(config);\n    const internalLogger = initializeInternalLogger(unpatchedConsole, config);\n    if (isInternalFaroOnGlobalObject() && !config.isolate) {\n        internalLogger.error('Faro is already registered. Either add instrumentations, transports etc. to the global faro instance or use the \"isolate\" property');\n        return undefined;\n    }\n    internalLogger.debug('Initializing');\n    // Initializing the APIs\n    const metas = initializeMetas(unpatchedConsole, internalLogger, config);\n    const transports = initializeTransports(unpatchedConsole, internalLogger, config, metas);\n    const api = initializeAPI(unpatchedConsole, internalLogger, config, metas, transports);\n    const instrumentations = initializeInstrumentations(unpatchedConsole, internalLogger, config, metas, transports, api);\n    const faro = registerFaro(unpatchedConsole, internalLogger, config, metas, transports, api, instrumentations);\n    // make sure Faro is initialized before registering default metas, instrumentations, transports etc.\n    registerInitialMetas(faro);\n    registerInitialTransports(faro);\n    registerInitialInstrumentations(faro);\n    return faro;\n}\n//# sourceMappingURL=initialize.js.map","import { isFunction } from '../utils';\nexport function initializeMetas(_unpatchedConsole, internalLogger, _config) {\n    let items = [];\n    let listeners = [];\n    const getValue = () => items.reduce((acc, item) => Object.assign(acc, isFunction(item) ? item() : item), {});\n    const notifyListeners = () => {\n        if (listeners.length) {\n            const value = getValue();\n            listeners.forEach((listener) => listener(value));\n        }\n    };\n    const add = (...newItems) => {\n        internalLogger.debug('Adding metas\\n', newItems);\n        items.push(...newItems);\n        notifyListeners();\n    };\n    const remove = (...itemsToRemove) => {\n        internalLogger.debug('Removing metas\\n', itemsToRemove);\n        items = items.filter((currentItem) => !itemsToRemove.includes(currentItem));\n        notifyListeners();\n    };\n    const addListener = (listener) => {\n        internalLogger.debug('Adding metas listener\\n', listener);\n        listeners.push(listener);\n    };\n    const removeListener = (listener) => {\n        internalLogger.debug('Removing metas listener\\n', listener);\n        listeners = listeners.filter((currentListener) => currentListener !== listener);\n    };\n    return {\n        add,\n        remove,\n        addListener,\n        removeListener,\n        get value() {\n            return getValue();\n        },\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { initializeEventsAPI } from './events';\nimport { initializeExceptionsAPI } from './exceptions';\nimport { initializeLogsAPI } from './logs';\nimport { initializeMeasurementsAPI } from './measurements';\nimport { initializeMetaAPI } from './meta';\nimport { initializeTracesAPI } from './traces';\nexport function initializeAPI(unpatchedConsole, internalLogger, config, metas, transports) {\n    internalLogger.debug('Initializing API');\n    const tracesApi = initializeTracesAPI(unpatchedConsole, internalLogger, config, metas, transports);\n    return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, tracesApi), initializeExceptionsAPI(unpatchedConsole, internalLogger, config, metas, transports, tracesApi)), initializeMetaAPI(unpatchedConsole, internalLogger, config, metas, transports)), initializeLogsAPI(unpatchedConsole, internalLogger, config, metas, transports, tracesApi)), initializeMeasurementsAPI(unpatchedConsole, internalLogger, config, metas, transports, tracesApi)), initializeEventsAPI(unpatchedConsole, internalLogger, config, metas, transports, tracesApi));\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nexport function initializeTracesAPI(_unpatchedConsole, internalLogger, _config, metas, transports) {\n    internalLogger.debug('Initializing traces API');\n    let otel = undefined;\n    const initOTEL = (trace, context) => {\n        internalLogger.debug('Initializing OpenTelemetry');\n        otel = {\n            trace,\n            context,\n        };\n    };\n    const getTraceContext = () => {\n        const ctx = otel === null || otel === void 0 ? void 0 : otel.trace.getSpanContext(otel.context.active());\n        return !ctx\n            ? undefined\n            : {\n                trace_id: ctx.traceId,\n                span_id: ctx.spanId,\n            };\n    };\n    const pushTraces = (payload) => {\n        try {\n            const item = {\n                type: TransportItemType.TRACE,\n                payload,\n                meta: metas.value,\n            };\n            internalLogger.debug('Pushing trace\\n', item);\n            transports.execute(item);\n        }\n        catch (err) {\n            internalLogger.error('Error pushing trace\\n', err);\n        }\n    };\n    const getOTEL = () => otel;\n    const isOTELInitialized = () => !!otel;\n    return {\n        getOTEL,\n        getTraceContext,\n        initOTEL,\n        isOTELInitialized,\n        pushTraces,\n    };\n}\n//# sourceMappingURL=initialize.js.map","export function initializeMetaAPI(_unpatchedConsole, internalLogger, _config, metas, _transports) {\n    internalLogger.debug('Initializing meta API');\n    let metaSession = undefined;\n    let metaUser = undefined;\n    let metaView = undefined;\n    const setUser = (user) => {\n        if (metaUser) {\n            metas.remove(metaUser);\n        }\n        metaUser = {\n            user,\n        };\n        metas.add(metaUser);\n    };\n    const setSession = (session) => {\n        if (metaSession) {\n            metas.remove(metaSession);\n        }\n        metaSession = {\n            session,\n        };\n        metas.add(metaSession);\n    };\n    const getSession = () => metas.value.session;\n    const setView = (view) => {\n        var _a;\n        if (((_a = metaView === null || metaView === void 0 ? void 0 : metaView.view) === null || _a === void 0 ? void 0 : _a.name) === (view === null || view === void 0 ? void 0 : view.name)) {\n            return;\n        }\n        const previousView = metaView;\n        metaView = {\n            view,\n        };\n        metas.add(metaView);\n        if (previousView) {\n            metas.remove(previousView);\n        }\n    };\n    const getView = () => metas.value.view;\n    return {\n        setUser,\n        resetUser: setUser,\n        setSession,\n        resetSession: setSession,\n        getSession,\n        setView,\n        getView,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, defaultLogLevel, getCurrentTimestamp, isNull } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport { defaultLogArgsSerializer } from './const';\nexport function initializeLogsAPI(_unpatchedConsole, internalLogger, config, metas, transports, tracesApi) {\n    var _a;\n    internalLogger.debug('Initializing logs API');\n    let lastPayload = null;\n    const logArgsSerializer = (_a = config.logArgsSerializer) !== null && _a !== void 0 ? _a : defaultLogArgsSerializer;\n    const pushLog = (args, { context, level, skipDedupe, spanContext, timestampOverwriteMs } = {}) => {\n        try {\n            const item = {\n                type: TransportItemType.LOG,\n                payload: {\n                    message: logArgsSerializer(args),\n                    level: level !== null && level !== void 0 ? level : defaultLogLevel,\n                    context: context !== null && context !== void 0 ? context : {},\n                    timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n                    trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext(),\n                },\n                meta: metas.value,\n            };\n            const testingPayload = {\n                message: item.payload.message,\n                level: item.payload.level,\n                context: item.payload.context,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping log push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing log\\n', item);\n            transports.execute(item);\n        }\n        catch (err) {\n            internalLogger.error('Error pushing log\\n', err);\n        }\n    };\n    return {\n        pushLog,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, getCurrentTimestamp, isNull } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nexport function initializeMeasurementsAPI(_unpatchedConsole, internalLogger, config, metas, transports, tracesApi) {\n    internalLogger.debug('Initializing measurements API');\n    let lastPayload = null;\n    const pushMeasurement = (payload, { skipDedupe, context, spanContext, timestampOverwriteMs } = {}) => {\n        try {\n            const item = {\n                type: TransportItemType.MEASUREMENT,\n                payload: Object.assign(Object.assign({}, payload), { trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext(), timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(), context: context !== null && context !== void 0 ? context : {} }),\n                meta: metas.value,\n            };\n            const testingPayload = {\n                type: item.payload.type,\n                values: item.payload.values,\n                context: item.payload.context,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping measurement push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing measurement\\n', item);\n            transports.execute(item);\n        }\n        catch (err) {\n            internalLogger.error('Error pushing measurement\\n', err);\n        }\n    };\n    return {\n        pushMeasurement,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, getCurrentTimestamp, isNull } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nexport function initializeEventsAPI(_unpatchedConsole, internalLogger, config, metas, transports, tracesApi) {\n    let lastPayload = null;\n    const pushEvent = (name, attributes, domain, { skipDedupe, spanContext, timestampOverwriteMs } = {}) => {\n        try {\n            const item = {\n                meta: metas.value,\n                payload: {\n                    name,\n                    domain: domain !== null && domain !== void 0 ? domain : config.eventDomain,\n                    attributes,\n                    timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n                    trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext(),\n                },\n                type: TransportItemType.EVENT,\n            };\n            const testingPayload = {\n                name: item.payload.name,\n                attributes: item.payload.attributes,\n                domain: item.payload.domain,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping event push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing event\\n', item);\n            transports.execute(item);\n        }\n        catch (err) {\n            internalLogger.error('Error pushing event', err);\n        }\n    };\n    return {\n        pushEvent,\n    };\n}\n//# sourceMappingURL=initialize.js.map","export function initializeInstrumentations(unpatchedConsole, internalLogger, config, metas, transports, api) {\n    internalLogger.debug('Initializing instrumentations');\n    const instrumentations = [];\n    const add = (...newInstrumentations) => {\n        internalLogger.debug('Adding instrumentations');\n        newInstrumentations.forEach((newInstrumentation) => {\n            internalLogger.debug(`Adding \"${newInstrumentation.name}\" instrumentation`);\n            const exists = instrumentations.some((existingInstrumentation) => existingInstrumentation.name === newInstrumentation.name);\n            if (exists) {\n                internalLogger.warn(`Instrumentation ${newInstrumentation.name} is already added`);\n                return;\n            }\n            newInstrumentation.unpatchedConsole = unpatchedConsole;\n            newInstrumentation.internalLogger = internalLogger;\n            newInstrumentation.config = config;\n            newInstrumentation.metas = metas;\n            newInstrumentation.transports = transports;\n            newInstrumentation.api = api;\n            instrumentations.push(newInstrumentation);\n            newInstrumentation.initialize();\n        });\n    };\n    const remove = (...instrumentationsToRemove) => {\n        internalLogger.debug('Removing instrumentations');\n        instrumentationsToRemove.forEach((instrumentationToRemove) => {\n            var _a, _b;\n            internalLogger.debug(`Removing \"${instrumentationToRemove.name}\" instrumentation`);\n            const existingInstrumentationIndex = instrumentations.reduce((acc, existingInstrumentation, existingTransportIndex) => {\n                if (acc === null && existingInstrumentation.name === instrumentationToRemove.name) {\n                    return existingTransportIndex;\n                }\n                return null;\n            }, null);\n            if (!existingInstrumentationIndex) {\n                internalLogger.warn(`Instrumentation \"${instrumentationToRemove.name}\" is not added`);\n                return;\n            }\n            (_b = (_a = instrumentations[existingInstrumentationIndex]).destroy) === null || _b === void 0 ? void 0 : _b.call(_a);\n            instrumentations.splice(existingInstrumentationIndex, 1);\n        });\n    };\n    return {\n        add,\n        get instrumentations() {\n            return [...instrumentations];\n        },\n        remove,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { getBundleId } from '../utils/sourceMaps';\nimport { VERSION } from '../version';\nexport function registerInitialMetas(faro) {\n    var _a, _b;\n    const initial = {\n        sdk: {\n            version: VERSION,\n        },\n        app: {\n            bundleId: faro.config.app.name && getBundleId(faro.config.app.name),\n        },\n    };\n    const session = (_a = faro.config.sessionTracking) === null || _a === void 0 ? void 0 : _a.session;\n    if (session) {\n        faro.api.setSession(session);\n    }\n    if (faro.config.app) {\n        initial.app = Object.assign(Object.assign({}, faro.config.app), initial.app);\n    }\n    if (faro.config.user) {\n        initial.user = faro.config.user;\n    }\n    if (faro.config.view) {\n        initial.view = faro.config.view;\n    }\n    faro.metas.add(initial, ...((_b = faro.config.metas) !== null && _b !== void 0 ? _b : []));\n}\n//# sourceMappingURL=registerInitial.js.map","import { globalObject } from '../globalObject';\nexport function getBundleId(appName) {\n    return globalObject === null || globalObject === void 0 ? void 0 : globalObject[`__faroBundleId_${appName}`];\n}\n//# sourceMappingURL=sourceMaps.js.map","export function registerInitialTransports(faro) {\n    faro.transports.add(...faro.config.transports);\n    faro.transports.addBeforeSendHooks(faro.config.beforeSend);\n    faro.transports.addIgnoreErrorsPatterns(faro.config.ignoreErrors);\n}\n//# sourceMappingURL=registerInitial.js.map","export function registerInitialInstrumentations(faro) {\n    faro.instrumentations.add(...faro.config.instrumentations);\n}\n//# sourceMappingURL=registerInitial.js.map","export const defaultGlobalObjectKey = 'faro';\nexport const defaultBatchingConfig = {\n    enabled: true,\n    sendTimeout: 250,\n    itemLimit: 50,\n};\n//# sourceMappingURL=const.js.map","export const newLineString = '\\n';\nexport const evalString = 'eval';\nexport const unknownSymbolString = '?';\nexport const atString = '@';\nexport const webkitLineRegex = /^\\s*at (?:(.*\\).*?|.*?) ?\\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nexport const webkitEvalRegex = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\nexport const webkitEvalString = 'eval';\nexport const webkitAddressAtString = 'address at ';\nexport const webkitAddressAtStringLength = webkitAddressAtString.length;\nexport const firefoxLineRegex = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\\/.*?|\\[native code]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nexport const firefoxEvalRegex = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nexport const firefoxEvalString = ' > eval';\nexport const safariExtensionString = 'safari-extension';\nexport const safariWebExtensionString = 'safari-web-extension';\nexport const reactMinifiedRegex = /Minified React error #\\d+;/i;\n//# sourceMappingURL=const.js.map","import { unknownSymbolString } from './const';\nexport function buildStackFrame(filename, func, lineno, colno) {\n    const stackFrame = {\n        filename: filename || document.location.href,\n        function: func || unknownSymbolString,\n    };\n    if (lineno !== undefined) {\n        stackFrame.lineno = lineno;\n    }\n    if (colno !== undefined) {\n        stackFrame.colno = colno;\n    }\n    return stackFrame;\n}\n//# sourceMappingURL=buildStackFrame.js.map","import { atString, safariExtensionString, safariWebExtensionString } from './const';\nexport function getDataFromSafariExtensions(func, filename) {\n    const isSafariExtension = func === null || func === void 0 ? void 0 : func.includes(safariExtensionString);\n    const isSafariWebExtension = !isSafariExtension && (func === null || func === void 0 ? void 0 : func.includes(safariWebExtensionString));\n    if (!isSafariExtension && !isSafariWebExtension) {\n        return [func, filename];\n    }\n    return [\n        (func === null || func === void 0 ? void 0 : func.includes(atString)) ? func.split(atString)[0] : func,\n        isSafariExtension ? `${safariExtensionString}:${filename}` : `${safariWebExtensionString}:${filename}`,\n    ];\n}\n//# sourceMappingURL=getDataFromSafariExtensions.js.map","import { isNumber } from '@grafana/faro-core';\nimport { buildStackFrame } from './buildStackFrame';\nimport { evalString, firefoxEvalRegex, firefoxEvalString, firefoxLineRegex, newLineString, reactMinifiedRegex, webkitAddressAtString, webkitAddressAtStringLength, webkitEvalRegex, webkitEvalString, webkitLineRegex, } from './const';\nimport { getDataFromSafariExtensions } from './getDataFromSafariExtensions';\nexport function getStackFramesFromError(error) {\n    let lines = [];\n    if (error.stacktrace) {\n        lines = error.stacktrace.split(newLineString).filter((_line, idx) => idx % 2 === 0);\n    }\n    else if (error.stack) {\n        lines = error.stack.split(newLineString);\n    }\n    const stackFrames = lines.reduce((acc, line, idx) => {\n        let parts;\n        let func;\n        let filename;\n        let lineno;\n        let colno;\n        if ((parts = webkitLineRegex.exec(line))) {\n            func = parts[1];\n            filename = parts[2];\n            lineno = parts[3];\n            colno = parts[4];\n            if (filename === null || filename === void 0 ? void 0 : filename.startsWith(webkitEvalString)) {\n                const submatch = webkitEvalRegex.exec(filename);\n                if (submatch) {\n                    filename = submatch[1];\n                    lineno = submatch[2];\n                    colno = submatch[3];\n                }\n            }\n            filename = (filename === null || filename === void 0 ? void 0 : filename.startsWith(webkitAddressAtString))\n                ? filename.substring(webkitAddressAtStringLength)\n                : filename;\n            [func, filename] = getDataFromSafariExtensions(func, filename);\n        }\n        else if ((parts = firefoxLineRegex.exec(line))) {\n            func = parts[1];\n            filename = parts[3];\n            lineno = parts[4];\n            colno = parts[5];\n            if (!!filename && filename.includes(firefoxEvalString)) {\n                const submatch = firefoxEvalRegex.exec(filename);\n                if (submatch) {\n                    func = func || evalString;\n                    filename = submatch[1];\n                    lineno = submatch[2];\n                }\n            }\n            else if (idx === 0 && !colno && isNumber(error.columnNumber)) {\n                colno = String(error.columnNumber + 1);\n            }\n            [func, filename] = getDataFromSafariExtensions(func, filename);\n        }\n        if (filename || func) {\n            acc.push(buildStackFrame(filename, func, lineno ? Number(lineno) : undefined, colno ? Number(colno) : undefined));\n        }\n        return acc;\n    }, []);\n    if (reactMinifiedRegex.test(error.message)) {\n        return stackFrames.slice(1);\n    }\n    return stackFrames;\n}\n//# sourceMappingURL=getStackFramesFromError.js.map","import { getStackFramesFromError } from './getStackFramesFromError';\nexport function parseStacktrace(error) {\n    return {\n        frames: getStackFramesFromError(error),\n    };\n}\n//# sourceMappingURL=parseStacktrace.js.map","export const STORAGE_KEY = 'com.grafana.faro.session';\nexport const SESSION_EXPIRATION_TIME = 4 * 60 * 60 * 1000; // hrs\nexport const SESSION_INACTIVITY_TIME = 15 * 60 * 1000; // minutes\nexport const STORAGE_UPDATE_DELAY = 1 * 1000; // seconds\n/**\n * @deprecated MAX_SESSION_PERSISTENCE_TIME_BUFFER is not used anymore. The constant will be removed in the future\n */\nexport const MAX_SESSION_PERSISTENCE_TIME_BUFFER = 1 * 60 * 1000;\nexport const MAX_SESSION_PERSISTENCE_TIME = SESSION_INACTIVITY_TIME;\nexport const defaultSessionTrackingConfig = {\n    enabled: true,\n    persistent: false,\n    maxSessionPersistenceTime: MAX_SESSION_PERSISTENCE_TIME,\n};\n//# sourceMappingURL=sessionConstants.js.map","export const unknownString = 'unknown';\n//# sourceMappingURL=consts.js.map","import { browserMeta } from './browser';\nimport { pageMeta } from './page';\nexport const defaultMetas = [browserMeta, pageMeta];\n//# sourceMappingURL=const.js.map","import { UAParser } from 'ua-parser-js';\nimport { unknownString } from '@grafana/faro-core';\nexport const browserMeta = () => {\n    const parser = new UAParser();\n    const { name, version } = parser.getBrowser();\n    const { name: osName, version: osVersion } = parser.getOS();\n    const userAgent = parser.getUA();\n    const language = navigator.language;\n    const mobile = navigator.userAgent.includes('Mobi');\n    const brands = getBrands();\n    return {\n        browser: {\n            name: name !== null && name !== void 0 ? name : unknownString,\n            version: version !== null && version !== void 0 ? version : unknownString,\n            os: `${osName !== null && osName !== void 0 ? osName : unknownString} ${osVersion !== null && osVersion !== void 0 ? osVersion : unknownString}`,\n            userAgent: userAgent !== null && userAgent !== void 0 ? userAgent : unknownString,\n            language: language !== null && language !== void 0 ? language : unknownString,\n            mobile,\n            brands: brands !== null && brands !== void 0 ? brands : unknownString,\n            viewportWidth: `${window.innerWidth}`,\n            viewportHeight: `${window.innerHeight}`,\n        },\n    };\n    function getBrands() {\n        if (!name || !version) {\n            return undefined;\n        }\n        if ('userAgentData' in navigator && navigator.userAgentData) {\n            // userAgentData in experimental (only Chrome supports it) thus TS does not ship the respective type declarations\n            return navigator.userAgentData.brands;\n        }\n        return undefined;\n    }\n};\n//# sourceMappingURL=meta.js.map","export const pageMeta = () => ({\n    page: {\n        url: location.href,\n    },\n});\n//# sourceMappingURL=meta.js.map","export const k6Meta = () => {\n    const k6Properties = window.k6;\n    return {\n        k6: Object.assign({ \n            // we only add the k6 meta if Faro is running inside a k6 environment, so this is always true\n            isK6Browser: true }, ((k6Properties === null || k6Properties === void 0 ? void 0 : k6Properties.testRunId) && { testRunId: k6Properties === null || k6Properties === void 0 ? void 0 : k6Properties.testRunId })),\n    };\n};\n//# sourceMappingURL=meta.js.map","import { defaultInternalLogger } from '../internalLogger';\nimport { defaultUnpatchedConsole } from '../unpatchedConsole';\nexport class BaseExtension {\n    constructor() {\n        this.unpatchedConsole = defaultUnpatchedConsole;\n        this.internalLogger = defaultInternalLogger;\n        this.config = {};\n        this.metas = {};\n    }\n    logDebug(...args) {\n        this.internalLogger.debug(`${this.name}\\n`, ...args);\n    }\n    logInfo(...args) {\n        this.internalLogger.info(`${this.name}\\n`, ...args);\n    }\n    logWarn(...args) {\n        this.internalLogger.warn(`${this.name}\\n`, ...args);\n    }\n    logError(...args) {\n        this.internalLogger.error(`${this.name}\\n`, ...args);\n    }\n}\n//# sourceMappingURL=baseExtension.js.map","import { BaseExtension } from '../extensions';\nexport class BaseTransport extends BaseExtension {\n    isBatched() {\n        return false;\n    }\n    getIgnoreUrls() {\n        return [];\n    }\n}\n//# sourceMappingURL=base.js.map","import { TransportItemType, transportItemTypeToBodyKey } from './const';\nexport function mergeResourceSpans(traces, resourceSpans) {\n    var _a, _b;\n    if (resourceSpans === undefined) {\n        return traces;\n    }\n    if (traces === undefined) {\n        return {\n            resourceSpans,\n        };\n    }\n    const currentResource = (_a = traces.resourceSpans) === null || _a === void 0 ? void 0 : _a[0];\n    if (currentResource === undefined) {\n        return traces;\n    }\n    const currentSpans = (currentResource === null || currentResource === void 0 ? void 0 : currentResource.scopeSpans) || [];\n    const newSpans = ((_b = resourceSpans === null || resourceSpans === void 0 ? void 0 : resourceSpans[0]) === null || _b === void 0 ? void 0 : _b.scopeSpans) || [];\n    return Object.assign(Object.assign({}, traces), { resourceSpans: [\n            Object.assign(Object.assign({}, currentResource), { scopeSpans: [...currentSpans, ...newSpans] }),\n        ] });\n}\nexport function getTransportBody(item) {\n    let body = {\n        meta: {},\n    };\n    if (item[0] !== undefined) {\n        body.meta = item[0].meta;\n    }\n    item.forEach((currentItem) => {\n        switch (currentItem.type) {\n            case TransportItemType.LOG:\n            case TransportItemType.EVENT:\n            case TransportItemType.EXCEPTION:\n            case TransportItemType.MEASUREMENT:\n                const bk = transportItemTypeToBodyKey[currentItem.type];\n                const signals = body[bk];\n                body = Object.assign(Object.assign({}, body), { [bk]: signals === undefined ? [currentItem.payload] : [...signals, currentItem.payload] });\n                break;\n            case TransportItemType.TRACE:\n                body = Object.assign(Object.assign({}, body), { traces: mergeResourceSpans(body.traces, currentItem.payload.resourceSpans) });\n                break;\n        }\n    });\n    return body;\n}\n//# sourceMappingURL=utils.js.map","/**\n * Tail based throttle which caches the args of the last call and updates\n */\nexport function throttle(callback, delay) {\n    let pause = false;\n    let lastPending;\n    const timeoutBehavior = () => {\n        if (lastPending == null) {\n            pause = false;\n            return;\n        }\n        callback(...lastPending);\n        lastPending = null;\n        setTimeout(timeoutBehavior, delay);\n    };\n    return (...args) => {\n        if (pause) {\n            lastPending = args;\n            return;\n        }\n        callback(...args);\n        pause = true;\n        setTimeout(timeoutBehavior, delay);\n    };\n}\n//# sourceMappingURL=throttle.js.map","import { faro } from '@grafana/faro-core';\nexport const webStorageType = {\n    session: 'sessionStorage',\n    local: 'localStorage',\n};\n// TODO: remove default storage type from all function\n/**\n * Check if selected web storage mechanism is available.\n * @param type storage mechanism to test availability for.\n * @returns\n */\nexport function isWebStorageAvailable(type) {\n    var _a;\n    try {\n        let storage;\n        storage = window[type];\n        const testItem = '__faro_storage_test__';\n        storage.setItem(testItem, testItem);\n        storage.removeItem(testItem);\n        return true;\n    }\n    catch (error) {\n        // the above can throw\n        (_a = faro.internalLogger) === null || _a === void 0 ? void 0 : _a.info(`Web storage of type ${type} is not available. Reason: ${error}`);\n        return false;\n    }\n}\n/**\n * Get item from SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function getItem(key, webStorageMechanism) {\n    if (isWebStorageTypeAvailable(webStorageMechanism)) {\n        return window[webStorageMechanism].getItem(key);\n    }\n    return null;\n}\n/**\n * Store item in SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param value: the item data.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function setItem(key, value, webStorageMechanism) {\n    if (isWebStorageTypeAvailable(webStorageMechanism)) {\n        try {\n            window[webStorageMechanism].setItem(key, value);\n        }\n        catch (error) {\n            // do nothing\n        }\n    }\n}\n/**\n * Remove item from SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function removeItem(key, webStorageMechanism) {\n    if (isWebStorageTypeAvailable(webStorageMechanism)) {\n        window[webStorageMechanism].removeItem(key);\n    }\n}\nexport const isLocalStorageAvailable = isWebStorageAvailable(webStorageType.local);\nexport const isSessionStorageAvailable = isWebStorageAvailable(webStorageType.session);\nfunction isWebStorageTypeAvailable(webStorageMechanism) {\n    if (webStorageMechanism === webStorageType.local) {\n        return isLocalStorageAvailable;\n    }\n    if (webStorageMechanism === webStorageType.session) {\n        return isSessionStorageAvailable;\n    }\n    return false;\n}\n//# sourceMappingURL=webStorage.js.map","import { faro } from '@grafana/faro-core';\nexport function isSampled() {\n    var _a, _b, _c;\n    const sendAllSignals = 1;\n    const sessionTracking = faro.config.sessionTracking;\n    let samplingRate = (_c = (_b = (_a = sessionTracking === null || sessionTracking === void 0 ? void 0 : sessionTracking.sampler) === null || _a === void 0 ? void 0 : _a.call(sessionTracking, { metas: faro.metas.value })) !== null && _b !== void 0 ? _b : sessionTracking === null || sessionTracking === void 0 ? void 0 : sessionTracking.samplingRate) !== null && _c !== void 0 ? _c : sendAllSignals;\n    if (typeof samplingRate !== 'number') {\n        const sendNoSignals = 0;\n        samplingRate = sendNoSignals;\n    }\n    return Math.random() < samplingRate;\n}\n//# sourceMappingURL=sampling.js.map","const alphabet = 'abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789';\nexport function genShortID(length = 10) {\n    return Array.from(Array(length))\n        .map(() => alphabet[Math.floor(Math.random() * alphabet.length)])\n        .join('');\n}\n//# sourceMappingURL=shortId.js.map","import { dateNow, faro, genShortID } from '@grafana/faro-core';\nimport { isLocalStorageAvailable, isSessionStorageAvailable } from '../../../utils';\nimport { isSampled } from './sampling';\nimport { SESSION_EXPIRATION_TIME, SESSION_INACTIVITY_TIME } from './sessionConstants';\nexport function createUserSessionObject({ sessionId, started, lastActivity, isSampled = true, } = {}) {\n    var _a, _b;\n    const now = dateNow();\n    const generateSessionId = (_b = (_a = faro.config) === null || _a === void 0 ? void 0 : _a.sessionTracking) === null || _b === void 0 ? void 0 : _b.generateSessionId;\n    if (sessionId == null) {\n        sessionId = typeof generateSessionId === 'function' ? generateSessionId() : genShortID();\n    }\n    return {\n        sessionId,\n        lastActivity: lastActivity !== null && lastActivity !== void 0 ? lastActivity : now,\n        started: started !== null && started !== void 0 ? started : now,\n        isSampled: isSampled,\n    };\n}\nexport function isUserSessionValid(session) {\n    if (session == null) {\n        return false;\n    }\n    const now = dateNow();\n    const lifetimeValid = now - session.started < SESSION_EXPIRATION_TIME;\n    if (!lifetimeValid) {\n        return false;\n    }\n    const inactivityPeriodValid = now - session.lastActivity < SESSION_INACTIVITY_TIME;\n    return inactivityPeriodValid;\n}\nexport function getUserSessionUpdater({ fetchUserSession, storeUserSession, }) {\n    return function updateSession({ forceSessionExtend } = { forceSessionExtend: false }) {\n        var _a, _b, _c;\n        if (!fetchUserSession || !storeUserSession) {\n            return;\n        }\n        const sessionTrackingConfig = faro.config.sessionTracking;\n        const isPersistentSessions = sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.persistent;\n        if ((isPersistentSessions && !isLocalStorageAvailable) || (!isPersistentSessions && !isSessionStorageAvailable)) {\n            return;\n        }\n        const sessionFromStorage = fetchUserSession();\n        if (forceSessionExtend === false && isUserSessionValid(sessionFromStorage)) {\n            storeUserSession(Object.assign(Object.assign({}, sessionFromStorage), { lastActivity: dateNow() }));\n        }\n        else {\n            let newSession = addSessionMetadataToNextSession(createUserSessionObject({ isSampled: isSampled() }), sessionFromStorage);\n            storeUserSession(newSession);\n            (_a = faro.api) === null || _a === void 0 ? void 0 : _a.setSession(newSession.sessionMeta);\n            (_b = sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.onSessionChange) === null || _b === void 0 ? void 0 : _b.call(sessionTrackingConfig, (_c = sessionFromStorage === null || sessionFromStorage === void 0 ? void 0 : sessionFromStorage.sessionMeta) !== null && _c !== void 0 ? _c : null, newSession.sessionMeta);\n        }\n    };\n}\nexport function addSessionMetadataToNextSession(newSession, previousSession) {\n    var _a, _b, _c, _d;\n    const sessionWithMeta = Object.assign(Object.assign({}, newSession), { sessionMeta: {\n            id: newSession.sessionId,\n            attributes: Object.assign(Object.assign(Object.assign(Object.assign({}, (_b = (_a = faro.config.sessionTracking) === null || _a === void 0 ? void 0 : _a.session) === null || _b === void 0 ? void 0 : _b.attributes), ((_d = (_c = faro.metas.value.session) === null || _c === void 0 ? void 0 : _c.attributes) !== null && _d !== void 0 ? _d : {})), (previousSession != null ? { previousSession: previousSession.sessionId } : {})), { isSampled: newSession.isSampled.toString() }),\n        } });\n    return sessionWithMeta;\n}\n//# sourceMappingURL=sessionManagerUtils.js.map","import { faro } from '@grafana/faro-core';\nimport { throttle } from '../../../utils';\nimport { getItem, removeItem, setItem, webStorageType } from '../../../utils/webStorage';\nimport { isSampled } from './sampling';\nimport { STORAGE_KEY, STORAGE_UPDATE_DELAY } from './sessionConstants';\nimport { addSessionMetadataToNextSession, createUserSessionObject, getUserSessionUpdater } from './sessionManagerUtils';\nexport class PersistentSessionsManager {\n    constructor() {\n        this.updateSession = throttle(() => this.updateUserSession(), STORAGE_UPDATE_DELAY);\n        this.updateUserSession = getUserSessionUpdater({\n            fetchUserSession: PersistentSessionsManager.fetchUserSession,\n            storeUserSession: PersistentSessionsManager.storeUserSession,\n        });\n        this.init();\n    }\n    static removeUserSession() {\n        removeItem(STORAGE_KEY, PersistentSessionsManager.storageTypeLocal);\n    }\n    static storeUserSession(session) {\n        setItem(STORAGE_KEY, JSON.stringify(session), PersistentSessionsManager.storageTypeLocal);\n    }\n    static fetchUserSession() {\n        const storedSession = getItem(STORAGE_KEY, PersistentSessionsManager.storageTypeLocal);\n        if (storedSession) {\n            return JSON.parse(storedSession);\n        }\n        return null;\n    }\n    init() {\n        document.addEventListener('visibilitychange', () => {\n            if (document.visibilityState === 'visible') {\n                this.updateSession();\n            }\n        });\n        // Users can call the setSession() method, so we need to sync this with the local storage session\n        faro.metas.addListener(function syncSessionIfChangedExternally(meta) {\n            const session = meta.session;\n            const sessionFromLocalStorage = PersistentSessionsManager.fetchUserSession();\n            if (session && session.id !== (sessionFromLocalStorage === null || sessionFromLocalStorage === void 0 ? void 0 : sessionFromLocalStorage.sessionId)) {\n                const userSession = addSessionMetadataToNextSession(createUserSessionObject({ sessionId: session.id, isSampled: isSampled() }), sessionFromLocalStorage);\n                PersistentSessionsManager.storeUserSession(userSession);\n                faro.api.setSession(userSession.sessionMeta);\n            }\n        });\n    }\n}\nPersistentSessionsManager.storageTypeLocal = webStorageType.local;\n//# sourceMappingURL=PersistentSessionsManager.js.map","import { faro } from '@grafana/faro-core';\nimport { throttle } from '../../../utils';\nimport { getItem, removeItem, setItem, webStorageType } from '../../../utils/webStorage';\nimport { isSampled } from './sampling';\nimport { STORAGE_KEY, STORAGE_UPDATE_DELAY } from './sessionConstants';\nimport { addSessionMetadataToNextSession, createUserSessionObject, getUserSessionUpdater } from './sessionManagerUtils';\nexport class VolatileSessionsManager {\n    constructor() {\n        this.updateSession = throttle(() => this.updateUserSession(), STORAGE_UPDATE_DELAY);\n        this.updateUserSession = getUserSessionUpdater({\n            fetchUserSession: VolatileSessionsManager.fetchUserSession,\n            storeUserSession: VolatileSessionsManager.storeUserSession,\n        });\n        this.init();\n    }\n    static removeUserSession() {\n        removeItem(STORAGE_KEY, VolatileSessionsManager.storageTypeSession);\n    }\n    static storeUserSession(session) {\n        setItem(STORAGE_KEY, JSON.stringify(session), VolatileSessionsManager.storageTypeSession);\n    }\n    static fetchUserSession() {\n        const storedSession = getItem(STORAGE_KEY, VolatileSessionsManager.storageTypeSession);\n        if (storedSession) {\n            return JSON.parse(storedSession);\n        }\n        return null;\n    }\n    init() {\n        document.addEventListener('visibilitychange', () => {\n            if (document.visibilityState === 'visible') {\n                this.updateSession();\n            }\n        });\n        // Users can call the setSession() method, so we need to sync this with the local storage session\n        faro.metas.addListener(function syncSessionIfChangedExternally(meta) {\n            const session = meta.session;\n            const sessionFromSessionStorage = VolatileSessionsManager.fetchUserSession();\n            if (session && session.id !== (sessionFromSessionStorage === null || sessionFromSessionStorage === void 0 ? void 0 : sessionFromSessionStorage.sessionId)) {\n                const userSession = addSessionMetadataToNextSession(createUserSessionObject({ sessionId: session.id, isSampled: isSampled() }), sessionFromSessionStorage);\n                VolatileSessionsManager.storeUserSession(userSession);\n                faro.api.setSession(userSession.sessionMeta);\n            }\n        });\n    }\n}\nVolatileSessionsManager.storageTypeSession = webStorageType.session;\n//# sourceMappingURL=VolatileSessionManager.js.map","import { PersistentSessionsManager } from './PersistentSessionsManager';\nimport { VolatileSessionsManager } from './VolatileSessionManager';\nexport function getSessionManagerByConfig(sessionTrackingConfig) {\n    return (sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.persistent) ? PersistentSessionsManager : VolatileSessionsManager;\n}\n//# sourceMappingURL=getSessionManagerByConfig.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { BaseTransport, createPromiseBuffer, getTransportBody, noop, VERSION, } from '@grafana/faro-core';\nimport { getSessionManagerByConfig } from '../../instrumentations/session/sessionManager';\nimport { getUserSessionUpdater } from '../../instrumentations/session/sessionManager/sessionManagerUtils';\nconst DEFAULT_BUFFER_SIZE = 30;\nconst DEFAULT_CONCURRENCY = 5; // chrome supports 10 total, firefox 17\nconst DEFAULT_RATE_LIMIT_BACKOFF_MS = 5000;\nconst BEACON_BODY_SIZE_LIMIT = 60000;\nconst TOO_MANY_REQUESTS = 429;\nconst ACCEPTED = 202;\nexport class FetchTransport extends BaseTransport {\n    constructor(options) {\n        var _a, _b, _c, _d;\n        super();\n        this.options = options;\n        this.name = '@grafana/faro-web-sdk:transport-fetch';\n        this.version = VERSION;\n        this.disabledUntil = new Date();\n        this.rateLimitBackoffMs = (_a = options.defaultRateLimitBackoffMs) !== null && _a !== void 0 ? _a : DEFAULT_RATE_LIMIT_BACKOFF_MS;\n        this.getNow = (_b = options.getNow) !== null && _b !== void 0 ? _b : (() => Date.now());\n        this.promiseBuffer = createPromiseBuffer({\n            size: (_c = options.bufferSize) !== null && _c !== void 0 ? _c : DEFAULT_BUFFER_SIZE,\n            concurrency: (_d = options.concurrency) !== null && _d !== void 0 ? _d : DEFAULT_CONCURRENCY,\n        });\n    }\n    send(items) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (this.disabledUntil > new Date(this.getNow())) {\n                    this.logWarn(`Dropping transport item due to too many requests. Backoff until ${this.disabledUntil}`);\n                    return Promise.resolve();\n                }\n                yield this.promiseBuffer.add(() => {\n                    const body = JSON.stringify(getTransportBody(items));\n                    const { url, requestOptions, apiKey } = this.options;\n                    const _a = requestOptions !== null && requestOptions !== void 0 ? requestOptions : {}, { headers } = _a, restOfRequestOptions = __rest(_a, [\"headers\"]);\n                    let sessionId;\n                    const sessionMeta = this.metas.value.session;\n                    if (sessionMeta != null) {\n                        sessionId = sessionMeta.id;\n                    }\n                    return fetch(url, Object.assign({ method: 'POST', headers: Object.assign(Object.assign(Object.assign({ 'Content-Type': 'application/json' }, (headers !== null && headers !== void 0 ? headers : {})), (apiKey ? { 'x-api-key': apiKey } : {})), (sessionId ? { 'x-faro-session-id': sessionId } : {})), body, keepalive: body.length <= BEACON_BODY_SIZE_LIMIT }, (restOfRequestOptions !== null && restOfRequestOptions !== void 0 ? restOfRequestOptions : {})))\n                        .then((response) => __awaiter(this, void 0, void 0, function* () {\n                        if (response.status === ACCEPTED) {\n                            const sessionExpired = response.headers.get('X-Faro-Session-Status') === 'invalid';\n                            if (sessionExpired) {\n                                this.extendFaroSession(this.config, this.logDebug);\n                            }\n                        }\n                        if (response.status === TOO_MANY_REQUESTS) {\n                            this.disabledUntil = this.getRetryAfterDate(response);\n                            this.logWarn(`Too many requests, backing off until ${this.disabledUntil}`);\n                        }\n                        // read the body so the connection can be closed\n                        response.text().catch(noop);\n                        return response;\n                    }))\n                        .catch((err) => {\n                        this.logError('Failed sending payload to the receiver\\n', JSON.parse(body), err);\n                    });\n                });\n            }\n            catch (err) {\n                this.logError(err);\n            }\n        });\n    }\n    getIgnoreUrls() {\n        var _a;\n        return [this.options.url].concat((_a = this.config.ignoreUrls) !== null && _a !== void 0 ? _a : []);\n    }\n    isBatched() {\n        return true;\n    }\n    getRetryAfterDate(response) {\n        const now = this.getNow();\n        const retryAfterHeader = response.headers.get('Retry-After');\n        if (retryAfterHeader) {\n            const delay = Number(retryAfterHeader);\n            if (!isNaN(delay)) {\n                return new Date(delay * 1000 + now);\n            }\n            const date = Date.parse(retryAfterHeader);\n            if (!isNaN(date)) {\n                return new Date(date);\n            }\n        }\n        return new Date(now + this.rateLimitBackoffMs);\n    }\n    extendFaroSession(config, logDebug) {\n        const SessionExpiredString = `Session expired`;\n        const sessionTrackingConfig = config.sessionTracking;\n        if (sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.enabled) {\n            const { fetchUserSession, storeUserSession } = getSessionManagerByConfig(sessionTrackingConfig);\n            getUserSessionUpdater({ fetchUserSession, storeUserSession })({ forceSessionExtend: true });\n            logDebug(`${SessionExpiredString} created new session.`);\n        }\n        else {\n            logDebug(`${SessionExpiredString}.`);\n        }\n    }\n}\n//# sourceMappingURL=transport.js.map","export function createPromiseBuffer(options) {\n    const { size, concurrency } = options;\n    const buffer = []; // pending, not-yet-started tasks\n    let inProgress = 0; // counter for tasks currently in progress\n    const work = () => {\n        // if there's space for a task and buffer is not empty,\n        // take one task from buffer and run it\n        if (inProgress < concurrency && buffer.length) {\n            const { producer, resolve, reject } = buffer.shift();\n            inProgress++;\n            producer().then((result) => {\n                inProgress--;\n                work();\n                resolve(result);\n            }, (reason) => {\n                inProgress--;\n                work();\n                reject(reason);\n            });\n        }\n    };\n    const add = (promiseProducer) => {\n        if (buffer.length + inProgress >= size) {\n            throw new Error('Task buffer full');\n        }\n        return new Promise((resolve, reject) => {\n            buffer.push({\n                producer: promiseProducer,\n                resolve,\n                reject,\n            });\n            work();\n        });\n    };\n    return {\n        add,\n    };\n}\n//# sourceMappingURL=promiseBuffer.js.map","import { BaseExtension } from '../extensions';\nexport class BaseInstrumentation extends BaseExtension {\n    constructor() {\n        super(...arguments);\n        this.api = {};\n        this.transports = {};\n    }\n}\n//# sourceMappingURL=base.js.map","export const primitiveUnhandledValue = 'Non-Error promise rejection captured with value:';\nexport const primitiveUnhandledType = 'UnhandledRejection';\nexport const domErrorType = 'DOMError';\nexport const domExceptionType = 'DOMException';\nexport const objectEventValue = 'Non-Error exception captured with keys:';\nexport const unknownSymbolString = '?';\nexport const valueTypeRegex = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;\n//# sourceMappingURL=const.js.map","import { isDomError, isDomException, isError, isErrorEvent, isEvent, isObject } from '@grafana/faro-core';\nimport { domErrorType, domExceptionType, objectEventValue } from './const';\nimport { getStackFramesFromError } from './stackFrames';\nexport function getErrorDetails(evt) {\n    let value;\n    let type;\n    let stackFrames = [];\n    let isDomErrorRes;\n    let isEventRes;\n    if (isErrorEvent(evt) && evt.error) {\n        value = evt.error.message;\n        type = evt.error.name;\n        stackFrames = getStackFramesFromError(evt.error);\n    }\n    else if ((isDomErrorRes = isDomError(evt)) || isDomException(evt)) {\n        const { name, message } = evt;\n        type = name !== null && name !== void 0 ? name : (isDomErrorRes ? domErrorType : domExceptionType);\n        value = message ? `${type}: ${message}` : type;\n    }\n    else if (isError(evt)) {\n        value = evt.message;\n        stackFrames = getStackFramesFromError(evt);\n    }\n    else if (isObject(evt) || (isEventRes = isEvent(evt))) {\n        type = isEventRes ? evt.constructor.name : undefined;\n        value = `${objectEventValue} ${Object.keys(evt)}`;\n    }\n    return [value, type, stackFrames];\n}\n//# sourceMappingURL=getErrorDetails.js.map","import { BaseInstrumentation, VERSION } from '@grafana/faro-core';\nimport { registerOnerror } from './registerOnerror';\nimport { registerOnunhandledrejection } from './registerOnunhandledrejection';\nexport class ErrorsInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-errors';\n        this.version = VERSION;\n    }\n    initialize() {\n        this.logDebug('Initializing');\n        registerOnerror(this.api);\n        registerOnunhandledrejection(this.api);\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { isPrimitive } from '@grafana/faro-core';\nimport { primitiveUnhandledType, primitiveUnhandledValue } from './const';\nimport { getErrorDetails } from './getErrorDetails';\nexport function registerOnunhandledrejection(api) {\n    window.addEventListener('unhandledrejection', (evt) => {\n        var _a, _b;\n        let error = evt;\n        if (error.reason) {\n            error = evt.reason;\n        }\n        else if ((_a = evt.detail) === null || _a === void 0 ? void 0 : _a.reason) {\n            error = (_b = evt.detail) === null || _b === void 0 ? void 0 : _b.reason;\n        }\n        let value;\n        let type;\n        let stackFrames = [];\n        if (isPrimitive(error)) {\n            value = `${primitiveUnhandledValue} ${String(error)}`;\n            type = primitiveUnhandledType;\n        }\n        else {\n            [value, type, stackFrames] = getErrorDetails(error);\n        }\n        if (value) {\n            api.pushError(new Error(value), { type, stackFrames });\n        }\n    });\n}\n//# sourceMappingURL=registerOnunhandledrejection.js.map","import { isString } from '@grafana/faro-core';\nimport { unknownSymbolString } from './const';\nimport { getErrorDetails } from './getErrorDetails';\nimport { getValueAndTypeFromMessage } from './getValueAndTypeFromMessage';\nimport { buildStackFrame } from './stackFrames';\nexport function registerOnerror(api) {\n    const oldOnerror = window.onerror;\n    window.onerror = (...args) => {\n        try {\n            const [evt, source, lineno, colno, error] = args;\n            let value;\n            let type;\n            let stackFrames = [];\n            const eventIsString = isString(evt);\n            const initialStackFrame = buildStackFrame(source, unknownSymbolString, lineno, colno);\n            if (error || !eventIsString) {\n                [value, type, stackFrames] = getErrorDetails((error !== null && error !== void 0 ? error : evt));\n                if (stackFrames.length === 0) {\n                    stackFrames = [initialStackFrame];\n                }\n            }\n            else if (eventIsString) {\n                [value, type] = getValueAndTypeFromMessage(evt);\n                stackFrames = [initialStackFrame];\n            }\n            if (value) {\n                api.pushError(new Error(value), { type, stackFrames });\n            }\n        }\n        finally {\n            oldOnerror === null || oldOnerror === void 0 ? void 0 : oldOnerror.apply(window, args);\n        }\n    };\n}\n//# sourceMappingURL=registerOnerror.js.map","import { defaultExceptionType } from '@grafana/faro-core';\nimport { valueTypeRegex } from './const';\nexport function getValueAndTypeFromMessage(message) {\n    var _a, _b;\n    const groups = message.match(valueTypeRegex);\n    const type = (_a = groups === null || groups === void 0 ? void 0 : groups[1]) !== null && _a !== void 0 ? _a : defaultExceptionType;\n    const value = (_b = groups === null || groups === void 0 ? void 0 : groups[2]) !== null && _b !== void 0 ? _b : message;\n    return [value, type];\n}\n//# sourceMappingURL=getValueAndTypeFromMessage.js.map","var e,n,t,r,i,o=-1,a=function(e){addEventListener(\"pageshow\",(function(n){n.persisted&&(o=n.timeStamp,e(n))}),!0)},c=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},u=function(){var e=c();return e&&e.activationStart||0},f=function(e,n){var t=c(),r=\"navigate\";o>=0?r=\"back-forward-cache\":t&&(document.prerendering||u()>0?r=\"prerender\":document.wasDiscarded?r=\"restore\":t.type&&(r=t.type.replace(/_/g,\"-\")));return{name:e,value:void 0===n?-1:n,rating:\"good\",delta:0,entries:[],id:\"v4-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},s=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){n(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},t||{})),r}}catch(e){}},d=function(e,n,t,r){var i,o;return function(a){n.value>=0&&(a||r)&&((o=n.value-(i||0))||void 0===i)&&(i=n.value,n.delta=o,n.rating=function(e,n){return e>n[1]?\"poor\":e>n[0]?\"needs-improvement\":\"good\"}(n.value,t),e(n))}},l=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},p=function(e){document.addEventListener(\"visibilitychange\",(function(){\"hidden\"===document.visibilityState&&e()}))},v=function(e){var n=!1;return function(){n||(e(),n=!0)}},m=-1,h=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},g=function(e){\"hidden\"===document.visibilityState&&m>-1&&(m=\"visibilitychange\"===e.type?e.timeStamp:0,T())},y=function(){addEventListener(\"visibilitychange\",g,!0),addEventListener(\"prerenderingchange\",g,!0)},T=function(){removeEventListener(\"visibilitychange\",g,!0),removeEventListener(\"prerenderingchange\",g,!0)},E=function(){return m<0&&(m=h(),y(),a((function(){setTimeout((function(){m=h(),y()}),0)}))),{get firstHiddenTime(){return m}}},C=function(e){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return e()}),!0):e()},b=[1800,3e3],S=function(e,n){n=n||{},C((function(){var t,r=E(),i=f(\"FCP\"),o=s(\"paint\",(function(e){e.forEach((function(e){\"first-contentful-paint\"===e.name&&(o.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-u(),0),i.entries.push(e),t(!0)))}))}));o&&(t=d(e,i,b,n.reportAllChanges),a((function(r){i=f(\"FCP\"),t=d(e,i,b,n.reportAllChanges),l((function(){i.value=performance.now()-r.timeStamp,t(!0)}))})))}))},L=[.1,.25],w=function(e,n){n=n||{},S(v((function(){var t,r=f(\"CLS\",0),i=0,o=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var n=o[0],t=o[o.length-1];i&&e.startTime-t.startTime<1e3&&e.startTime-n.startTime<5e3?(i+=e.value,o.push(e)):(i=e.value,o=[e])}})),i>r.value&&(r.value=i,r.entries=o,t())},u=s(\"layout-shift\",c);u&&(t=d(e,r,L,n.reportAllChanges),p((function(){c(u.takeRecords()),t(!0)})),a((function(){i=0,r=f(\"CLS\",0),t=d(e,r,L,n.reportAllChanges),l((function(){return t()}))})),setTimeout(t,0))})))},A=0,I=1/0,P=0,M=function(e){e.forEach((function(e){e.interactionId&&(I=Math.min(I,e.interactionId),P=Math.max(P,e.interactionId),A=P?(P-I)/7+1:0)}))},k=function(){\"interactionCount\"in performance||e||(e=s(\"event\",M,{type:\"event\",buffered:!0,durationThreshold:0}))},F=[],D=new Map,x=0,R=function(){return(e?A:performance.interactionCount||0)-x},B=[],H=function(e){if(B.forEach((function(n){return n(e)})),e.interactionId||\"first-input\"===e.entryType){var n=F[F.length-1],t=D.get(e.interactionId);if(t||F.length<10||e.duration>n.latency){if(t)e.duration>t.latency?(t.entries=[e],t.latency=e.duration):e.duration===t.latency&&e.startTime===t.entries[0].startTime&&t.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};D.set(r.id,r),F.push(r)}F.sort((function(e,n){return n.latency-e.latency})),F.length>10&&F.splice(10).forEach((function(e){return D.delete(e.id)}))}}},q=function(e){var n=self.requestIdleCallback||self.setTimeout,t=-1;return e=v(e),\"hidden\"===document.visibilityState?e():(t=n(e),p(e)),t},O=[200,500],N=function(e,n){\"PerformanceEventTiming\"in self&&\"interactionId\"in PerformanceEventTiming.prototype&&(n=n||{},C((function(){var t;k();var r,i=f(\"INP\"),o=function(e){q((function(){e.forEach(H);var n,t=(n=Math.min(F.length-1,Math.floor(R()/50)),F[n]);t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r())}))},c=s(\"event\",o,{durationThreshold:null!==(t=n.durationThreshold)&&void 0!==t?t:40});r=d(e,i,O,n.reportAllChanges),c&&(c.observe({type:\"first-input\",buffered:!0}),p((function(){o(c.takeRecords()),r(!0)})),a((function(){x=0,F.length=0,D.clear(),i=f(\"INP\"),r=d(e,i,O,n.reportAllChanges)})))})))},j=[2500,4e3],_={},z=function(e,n){n=n||{},C((function(){var t,r=E(),i=f(\"LCP\"),o=function(e){n.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-u(),0),i.entries=[e],t())}))},c=s(\"largest-contentful-paint\",o);if(c){t=d(e,i,j,n.reportAllChanges);var m=v((function(){_[i.id]||(o(c.takeRecords()),c.disconnect(),_[i.id]=!0,t(!0))}));[\"keydown\",\"click\"].forEach((function(e){addEventListener(e,(function(){return q(m)}),!0)})),p(m),a((function(r){i=f(\"LCP\"),t=d(e,i,j,n.reportAllChanges),l((function(){i.value=performance.now()-r.timeStamp,_[i.id]=!0,t(!0)}))}))}}))},G=[800,1800],J=function e(n){document.prerendering?C((function(){return e(n)})):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return e(n)}),!0):setTimeout(n,0)},K=function(e,n){n=n||{};var t=f(\"TTFB\"),r=d(e,t,G,n.reportAllChanges);J((function(){var i=c();i&&(t.value=Math.max(i.responseStart-u(),0),t.entries=[i],r(!0),a((function(){t=f(\"TTFB\",0),(r=d(e,t,G,n.reportAllChanges))(!0)})))}))},Q={passive:!0,capture:!0},U=new Date,V=function(e,i){n||(n=i,t=e,r=new Date,Y(removeEventListener),W())},W=function(){if(t>=0&&t<r-U){var e={entryType:\"first-input\",name:n.type,target:n.target,cancelable:n.cancelable,startTime:n.timeStamp,processingStart:n.timeStamp+t};i.forEach((function(n){n(e)})),i=[]}},X=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,n){var t=function(){V(e,n),i()},r=function(){i()},i=function(){removeEventListener(\"pointerup\",t,Q),removeEventListener(\"pointercancel\",r,Q)};addEventListener(\"pointerup\",t,Q),addEventListener(\"pointercancel\",r,Q)}(n,e):V(n,e)}},Y=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(n){return e(n,X,Q)}))},Z=[100,300],$=function(e,r){r=r||{},C((function(){var o,c=E(),u=f(\"FID\"),l=function(e){e.startTime<c.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),o(!0))},m=function(e){e.forEach(l)},h=s(\"first-input\",m);o=d(e,u,Z,r.reportAllChanges),h&&(p(v((function(){m(h.takeRecords()),h.disconnect()}))),a((function(){var a;u=f(\"FID\"),o=d(e,u,Z,r.reportAllChanges),i=[],t=-1,n=null,Y(addEventListener),a=l,i.push(a),W()})))}))};export{L as CLSThresholds,b as FCPThresholds,Z as FIDThresholds,O as INPThresholds,j as LCPThresholds,G as TTFBThresholds,w as onCLS,S as onFCP,$ as onFID,N as onINP,z as onLCP,K as onTTFB};\n","import { onCLS, onFCP, onFID, onINP, onLCP, onTTFB } from 'web-vitals';\nexport class WebVitalsBasic {\n    constructor(pushMeasurement) {\n        this.pushMeasurement = pushMeasurement;\n    }\n    initialize() {\n        Object.entries(WebVitalsBasic.mapping).forEach(([indicator, executor]) => {\n            executor((metric) => {\n                this.pushMeasurement({\n                    type: 'web-vitals',\n                    values: {\n                        [indicator]: metric.value,\n                    },\n                });\n            });\n        });\n    }\n}\nWebVitalsBasic.mapping = {\n    cls: onCLS,\n    fcp: onFCP,\n    fid: onFID,\n    inp: onINP,\n    lcp: onLCP,\n    ttfb: onTTFB,\n};\n//# sourceMappingURL=webVitalsBasic.js.map","var t,e,n,r=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},i=function(t){if(\"loading\"===document.readyState)return\"loading\";var e=r();if(e){if(t<e.domInteractive)return\"loading\";if(0===e.domContentLoadedEventStart||t<e.domContentLoadedEventStart)return\"dom-interactive\";if(0===e.domComplete||t<e.domComplete)return\"dom-content-loaded\"}return\"complete\"},a=function(t){var e=t.nodeName;return 1===t.nodeType?e.toLowerCase():e.toUpperCase().replace(/^#/,\"\")},o=function(t,e){var n=\"\";try{for(;t&&9!==t.nodeType;){var r=t,i=r.id?\"#\"+r.id:a(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?\".\"+r.classList.value.trim().replace(/\\s+/g,\".\"):\"\");if(n.length+i.length>(e||100)-1)return n||i;if(n=n?i+\">\"+n:i,r.id)break;t=r.parentNode}}catch(t){}return n},c=-1,u=function(){return c},s=function(t){addEventListener(\"pageshow\",(function(e){e.persisted&&(c=e.timeStamp,t(e))}),!0)},f=function(){var t=r();return t&&t.activationStart||0},d=function(t,e){var n=r(),i=\"navigate\";u()>=0?i=\"back-forward-cache\":n&&(document.prerendering||f()>0?i=\"prerender\":document.wasDiscarded?i=\"restore\":n.type&&(i=n.type.replace(/_/g,\"-\")));return{name:t,value:void 0===e?-1:e,rating:\"good\",delta:0,entries:[],id:\"v4-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},l=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){e(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch(t){}},m=function(t,e,n,r){var i,a;return function(o){e.value>=0&&(o||r)&&((a=e.value-(i||0))||void 0===i)&&(i=e.value,e.delta=a,e.rating=function(t,e){return t>e[1]?\"poor\":t>e[0]?\"needs-improvement\":\"good\"}(e.value,n),t(e))}},p=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},v=function(t){document.addEventListener(\"visibilitychange\",(function(){\"hidden\"===document.visibilityState&&t()}))},g=function(t){var e=!1;return function(){e||(t(),e=!0)}},h=-1,T=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},y=function(t){\"hidden\"===document.visibilityState&&h>-1&&(h=\"visibilitychange\"===t.type?t.timeStamp:0,S())},E=function(){addEventListener(\"visibilitychange\",y,!0),addEventListener(\"prerenderingchange\",y,!0)},S=function(){removeEventListener(\"visibilitychange\",y,!0),removeEventListener(\"prerenderingchange\",y,!0)},b=function(){return h<0&&(h=T(),E(),s((function(){setTimeout((function(){h=T(),E()}),0)}))),{get firstHiddenTime(){return h}}},L=function(t){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return t()}),!0):t()},C=[1800,3e3],M=function(t,e){e=e||{},L((function(){var n,r=b(),i=d(\"FCP\"),a=l(\"paint\",(function(t){t.forEach((function(t){\"first-contentful-paint\"===t.name&&(a.disconnect(),t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-f(),0),i.entries.push(t),n(!0)))}))}));a&&(n=m(t,i,C,e.reportAllChanges),s((function(r){i=d(\"FCP\"),n=m(t,i,C,e.reportAllChanges),p((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))},D=[.1,.25],w=function(t,e){!function(t,e){e=e||{},M(g((function(){var n,r=d(\"CLS\",0),i=0,a=[],o=function(t){t.forEach((function(t){if(!t.hadRecentInput){var e=a[0],n=a[a.length-1];i&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(i+=t.value,a.push(t)):(i=t.value,a=[t])}})),i>r.value&&(r.value=i,r.entries=a,n())},c=l(\"layout-shift\",o);c&&(n=m(t,r,D,e.reportAllChanges),v((function(){o(c.takeRecords()),n(!0)})),s((function(){i=0,r=d(\"CLS\",0),n=m(t,r,D,e.reportAllChanges),p((function(){return n()}))})),setTimeout(n,0))})))}((function(e){var n=function(t){var e,n={};if(t.entries.length){var r=t.entries.reduce((function(t,e){return t&&t.value>e.value?t:e}));if(r&&r.sources&&r.sources.length){var a=(e=r.sources).find((function(t){return t.node&&1===t.node.nodeType}))||e[0];a&&(n={largestShiftTarget:o(a.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:a,largestShiftEntry:r,loadState:i(r.startTime)})}}return Object.assign(t,{attribution:n})}(e);t(n)}),e)},x=function(t,e){M((function(e){var n=function(t){var e={timeToFirstByte:0,firstByteToFCP:t.value,loadState:i(u())};if(t.entries.length){var n=r(),a=t.entries[t.entries.length-1];if(n){var o=n.activationStart||0,c=Math.max(0,n.responseStart-o);e={timeToFirstByte:c,firstByteToFCP:t.value-c,loadState:i(t.entries[0].startTime),navigationEntry:n,fcpEntry:a}}}return Object.assign(t,{attribution:e})}(e);t(n)}),e)},I=0,k=1/0,A=0,F=function(t){t.forEach((function(t){t.interactionId&&(k=Math.min(k,t.interactionId),A=Math.max(A,t.interactionId),I=A?(A-k)/7+1:0)}))},P=function(){\"interactionCount\"in performance||t||(t=l(\"event\",F,{type:\"event\",buffered:!0,durationThreshold:0}))},B=[],O=new Map,R=0,j=function(){return(t?I:performance.interactionCount||0)-R},q=[],H=function(t){if(q.forEach((function(e){return e(t)})),t.interactionId||\"first-input\"===t.entryType){var e=B[B.length-1],n=O.get(t.interactionId);if(n||B.length<10||t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===n.entries[0].startTime&&n.entries.push(t);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};O.set(r.id,r),B.push(r)}B.sort((function(t,e){return e.latency-t.latency})),B.length>10&&B.splice(10).forEach((function(t){return O.delete(t.id)}))}}},N=function(t){var e=self.requestIdleCallback||self.setTimeout,n=-1;return t=g(t),\"hidden\"===document.visibilityState?t():(n=e(t),v(t)),n},W=[200,500],z=function(t,e){\"PerformanceEventTiming\"in self&&\"interactionId\"in PerformanceEventTiming.prototype&&(e=e||{},L((function(){var n;P();var r,i=d(\"INP\"),a=function(t){N((function(){t.forEach(H);var e,n=(e=Math.min(B.length-1,Math.floor(j()/50)),B[e]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,r())}))},o=l(\"event\",a,{durationThreshold:null!==(n=e.durationThreshold)&&void 0!==n?n:40});r=m(t,i,W,e.reportAllChanges),o&&(o.observe({type:\"first-input\",buffered:!0}),v((function(){a(o.takeRecords()),r(!0)})),s((function(){R=0,B.length=0,O.clear(),i=d(\"INP\"),r=m(t,i,W,e.reportAllChanges)})))})))},U=[],V=[],_=new WeakMap,G=new Map,J=-1,K=function(t){U=U.concat(t),Q()},Q=function(){J<0&&(J=N(X))},X=function(){G.size>10&&G.forEach((function(t,e){O.has(e)||G.delete(e)}));var t=B.map((function(t){return _.get(t.entries[0])})),e=V.length-50;V=V.filter((function(n,r){return r>=e||t.includes(n)}));for(var r=new Set,i=0;i<V.length;i++){var a=V[i];et(a.startTime,a.processingEnd).forEach((function(t){r.add(t)}))}for(var o=0;o<50;o++){var c=U[U.length-1-o];if(!c||c.startTime<n)break;r.add(c)}U=Array.from(r),J=-1};q.push((function(t){t.interactionId&&t.target&&!G.has(t.interactionId)&&G.set(t.interactionId,t.target)}),(function(t){var e,r=t.startTime+t.duration;n=Math.max(n,t.processingEnd);for(var i=V.length-1;i>=0;i--){var a=V[i];if(Math.abs(r-a.renderTime)<=8){(e=a).startTime=Math.min(t.startTime,e.startTime),e.processingStart=Math.min(t.processingStart,e.processingStart),e.processingEnd=Math.max(t.processingEnd,e.processingEnd),e.entries.push(t);break}}e||(e={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:r,entries:[t]},V.push(e)),(t.interactionId||\"first-input\"===t.entryType)&&_.set(t,e),Q()}));var Y,Z,$,tt,et=function(t,e){for(var n,r=[],i=0;n=U[i];i++)if(!(n.startTime+n.duration<t)){if(n.startTime>e)break;r.push(n)}return r},nt=function(t,n){e||(e=l(\"long-animation-frame\",K)),z((function(e){var n=function(t){var e=t.entries[0],n=_.get(e),r=e.processingStart,a=n.processingEnd,c=n.entries.sort((function(t,e){return t.processingStart-e.processingStart})),u=et(e.startTime,a),s=t.entries.find((function(t){return t.target})),f=s&&s.target||G.get(e.interactionId),d=[e.startTime+e.duration,a].concat(u.map((function(t){return t.startTime+t.duration}))),l=Math.max.apply(Math,d),m={interactionTarget:o(f),interactionTargetElement:f,interactionType:e.name.startsWith(\"key\")?\"keyboard\":\"pointer\",interactionTime:e.startTime,nextPaintTime:l,processedEventEntries:c,longAnimationFrameEntries:u,inputDelay:r-e.startTime,processingDuration:a-r,presentationDelay:Math.max(l-a,0),loadState:i(e.startTime)};return Object.assign(t,{attribution:m})}(e);t(n)}),n)},rt=[2500,4e3],it={},at=function(t,e){!function(t,e){e=e||{},L((function(){var n,r=b(),i=d(\"LCP\"),a=function(t){e.reportAllChanges||(t=t.slice(-1)),t.forEach((function(t){t.startTime<r.firstHiddenTime&&(i.value=Math.max(t.startTime-f(),0),i.entries=[t],n())}))},o=l(\"largest-contentful-paint\",a);if(o){n=m(t,i,rt,e.reportAllChanges);var c=g((function(){it[i.id]||(a(o.takeRecords()),o.disconnect(),it[i.id]=!0,n(!0))}));[\"keydown\",\"click\"].forEach((function(t){addEventListener(t,(function(){return N(c)}),!0)})),v(c),s((function(r){i=d(\"LCP\"),n=m(t,i,rt,e.reportAllChanges),p((function(){i.value=performance.now()-r.timeStamp,it[i.id]=!0,n(!0)}))}))}}))}((function(e){var n=function(t){var e={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:t.value};if(t.entries.length){var n=r();if(n){var i=n.activationStart||0,a=t.entries[t.entries.length-1],c=a.url&&performance.getEntriesByType(\"resource\").filter((function(t){return t.name===a.url}))[0],u=Math.max(0,n.responseStart-i),s=Math.max(u,c?(c.requestStart||c.startTime)-i:0),f=Math.max(s,c?c.responseEnd-i:0),d=Math.max(f,a.startTime-i);e={element:o(a.element),timeToFirstByte:u,resourceLoadDelay:s-u,resourceLoadDuration:f-s,elementRenderDelay:d-f,navigationEntry:n,lcpEntry:a},a.url&&(e.url=a.url),c&&(e.lcpResourceEntry=c)}}return Object.assign(t,{attribution:e})}(e);t(n)}),e)},ot=[800,1800],ct=function t(e){document.prerendering?L((function(){return t(e)})):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return t(e)}),!0):setTimeout(e,0)},ut=function(t,e){e=e||{};var n=d(\"TTFB\"),i=m(t,n,ot,e.reportAllChanges);ct((function(){var a=r();a&&(n.value=Math.max(a.responseStart-f(),0),n.entries=[a],i(!0),s((function(){n=d(\"TTFB\",0),(i=m(t,n,ot,e.reportAllChanges))(!0)})))}))},st=function(t,e){ut((function(e){var n=function(t){var e={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(t.entries.length){var n=t.entries[0],r=n.activationStart||0,i=Math.max((n.workerStart||n.fetchStart)-r,0),a=Math.max(n.domainLookupStart-r,0),o=Math.max(n.connectStart-r,0),c=Math.max(n.connectEnd-r,0);e={waitingDuration:i,cacheDuration:a-i,dnsDuration:o-a,connectionDuration:c-o,requestDuration:t.value-c,navigationEntry:n}}return Object.assign(t,{attribution:e})}(e);t(n)}),e)},ft={passive:!0,capture:!0},dt=new Date,lt=function(t,e){Y||(Y=e,Z=t,$=new Date,vt(removeEventListener),mt())},mt=function(){if(Z>=0&&Z<$-dt){var t={entryType:\"first-input\",name:Y.type,target:Y.target,cancelable:Y.cancelable,startTime:Y.timeStamp,processingStart:Y.timeStamp+Z};tt.forEach((function(e){e(t)})),tt=[]}},pt=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;\"pointerdown\"==t.type?function(t,e){var n=function(){lt(t,e),i()},r=function(){i()},i=function(){removeEventListener(\"pointerup\",n,ft),removeEventListener(\"pointercancel\",r,ft)};addEventListener(\"pointerup\",n,ft),addEventListener(\"pointercancel\",r,ft)}(e,t):lt(e,t)}},vt=function(t){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(e){return t(e,pt,ft)}))},gt=[100,300],ht=function(t,e){e=e||{},L((function(){var n,r=b(),i=d(\"FID\"),a=function(t){t.startTime<r.firstHiddenTime&&(i.value=t.processingStart-t.startTime,i.entries.push(t),n(!0))},o=function(t){t.forEach(a)},c=l(\"first-input\",o);n=m(t,i,gt,e.reportAllChanges),c&&(v(g((function(){o(c.takeRecords()),c.disconnect()}))),s((function(){var r;i=d(\"FID\"),n=m(t,i,gt,e.reportAllChanges),tt=[],Z=-1,Y=null,vt(addEventListener),r=a,tt.push(r),mt()})))}))},Tt=function(t,e){ht((function(e){var n=function(t){var e=t.entries[0],n={eventTarget:o(e.target),eventType:e.name,eventTime:e.startTime,eventEntry:e,loadState:i(e.startTime)};return Object.assign(t,{attribution:n})}(e);t(n)}),e)};export{D as CLSThresholds,C as FCPThresholds,gt as FIDThresholds,W as INPThresholds,rt as LCPThresholds,ot as TTFBThresholds,w as onCLS,x as onFCP,Tt as onFID,nt as onINP,at as onLCP,st as onTTFB};\n","export const NAVIGATION_ID_STORAGE_KEY = 'com.grafana.faro.lastNavigationId';\n//# sourceMappingURL=instrumentationConstants.js.map","import { onCLS, onFCP, onFID, onINP, onLCP, onTTFB } from 'web-vitals/attribution';\nimport { unknownString } from '@grafana/faro-core';\nimport { getItem, webStorageType } from '../../utils';\nimport { NAVIGATION_ID_STORAGE_KEY } from '../instrumentationConstants';\n// duplicate keys saved in variables to save bundle size\n// refs: https://github.com/grafana/faro-web-sdk/pull/595#discussion_r1615833968\nconst loadStateKey = 'load_state';\nconst timeToFirstByteKey = 'time_to_first_byte';\nexport class WebVitalsWithAttribution {\n    constructor(corePushMeasurement) {\n        this.corePushMeasurement = corePushMeasurement;\n    }\n    initialize() {\n        this.measureCLS();\n        this.measureFCP();\n        this.measureFID();\n        this.measureINP();\n        this.measureLCP();\n        this.measureTTFB();\n    }\n    measureCLS() {\n        onCLS((metric) => {\n            const { loadState, largestShiftValue, largestShiftTime, largestShiftTarget } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'largest_shift_value', largestShiftValue);\n            this.addIfPresent(values, 'largest_shift_time', largestShiftTime);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, loadStateKey, loadState);\n            this.addIfPresent(context, 'largest_shift_target', largestShiftTarget);\n            this.pushMeasurement(values, context);\n        });\n    }\n    measureFCP() {\n        onFCP((metric) => {\n            const { firstByteToFCP, timeToFirstByte, loadState } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'first_byte_to_fcp', firstByteToFCP);\n            this.addIfPresent(values, timeToFirstByteKey, timeToFirstByte);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, loadStateKey, loadState);\n            this.pushMeasurement(values, context);\n        });\n    }\n    measureFID() {\n        onFID((metric) => {\n            const { eventTime, eventTarget, eventType, loadState } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'event_time', eventTime);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, 'event_target', eventTarget);\n            this.addIfPresent(context, 'event_type', eventType);\n            this.addIfPresent(context, loadStateKey, loadState);\n            this.pushMeasurement(values, context);\n        });\n    }\n    measureINP() {\n        onINP((metric) => {\n            const { interactionTime, presentationDelay, inputDelay, processingDuration, nextPaintTime, loadState, interactionTarget, interactionType, } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'interaction_time', interactionTime);\n            this.addIfPresent(values, 'presentation_delay', presentationDelay);\n            this.addIfPresent(values, 'input_delay', inputDelay);\n            this.addIfPresent(values, 'processing_duration', processingDuration);\n            this.addIfPresent(values, 'next_paint_time', nextPaintTime);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, loadStateKey, loadState);\n            this.addIfPresent(context, 'interaction_target', interactionTarget);\n            this.addIfPresent(context, 'interaction_type', interactionType);\n            this.pushMeasurement(values, context);\n        });\n    }\n    measureLCP() {\n        onLCP((metric) => {\n            const { elementRenderDelay, resourceLoadDelay, resourceLoadDuration, timeToFirstByte, element } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'element_render_delay', elementRenderDelay);\n            this.addIfPresent(values, 'resource_load_delay', resourceLoadDelay);\n            this.addIfPresent(values, 'resource_load_duration', resourceLoadDuration);\n            this.addIfPresent(values, timeToFirstByteKey, timeToFirstByte);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, 'element', element);\n            this.pushMeasurement(values, context);\n        });\n    }\n    measureTTFB() {\n        onTTFB((metric) => {\n            const { dnsDuration, connectionDuration, requestDuration, waitingDuration, cacheDuration } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'dns_duration', dnsDuration);\n            this.addIfPresent(values, 'connection_duration', connectionDuration);\n            this.addIfPresent(values, 'request_duration', requestDuration);\n            this.addIfPresent(values, 'waiting_duration', waitingDuration);\n            this.addIfPresent(values, 'cache_duration', cacheDuration);\n            const context = this.buildInitialContext(metric);\n            this.pushMeasurement(values, context);\n        });\n    }\n    buildInitialValues(metric) {\n        const indicator = metric.name.toLowerCase();\n        return {\n            [indicator]: metric.value,\n            delta: metric.delta,\n        };\n    }\n    buildInitialContext(metric) {\n        var _a;\n        const navigationEntryId = (_a = getItem(NAVIGATION_ID_STORAGE_KEY, webStorageType.session)) !== null && _a !== void 0 ? _a : unknownString;\n        return {\n            id: metric.id,\n            rating: metric.rating,\n            navigation_type: metric.navigationType,\n            navigation_entry_id: navigationEntryId,\n        };\n    }\n    pushMeasurement(values, context) {\n        const type = 'web-vitals';\n        this.corePushMeasurement({ type, values }, { context });\n    }\n    addIfPresent(source, key, metric) {\n        if (metric) {\n            source[key] = metric;\n        }\n    }\n}\n//# sourceMappingURL=webVitalsWithAttribution.js.map","import { BaseInstrumentation, VERSION } from '@grafana/faro-core';\nimport { WebVitalsBasic } from './webVitalsBasic';\nimport { WebVitalsWithAttribution } from './webVitalsWithAttribution';\nexport class WebVitalsInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-web-vitals';\n        this.version = VERSION;\n    }\n    initialize() {\n        this.logDebug('Initializing');\n        const webVitals = this.intializeWebVitalsInstrumentation();\n        webVitals.initialize();\n    }\n    intializeWebVitalsInstrumentation() {\n        if (this.config.trackWebVitalsAttribution) {\n            return new WebVitalsWithAttribution(this.api.pushMeasurement);\n        }\n        return new WebVitalsBasic(this.api.pushMeasurement);\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","/**\n * @deprecated The conventions object will be removed in a future version\n */\nexport const Conventions = {\n    /**\n     * @deprecated The event names object will be removed in a future version\n     */\n    EventNames: {\n        CLICK: 'click',\n        NAVIGATION: 'navigation',\n        SESSION_START: 'session_start',\n        VIEW_CHANGED: 'view_changed',\n    },\n};\nexport const EVENT_CLICK = 'click';\nexport const EVENT_NAVIGATION = 'navigation';\nexport const EVENT_VIEW_CHANGED = 'view_changed';\nexport const EVENT_SESSION_START = 'session_start';\nexport const EVENT_SESSION_RESUME = 'session_resume';\nexport const EVENT_SESSION_EXTEND = 'session_extend';\nexport const EVENT_ROUTE_CHANGE = 'route_change';\n//# sourceMappingURL=semantic.js.map","import { BaseInstrumentation, dateNow, EVENT_SESSION_EXTEND, EVENT_SESSION_RESUME, EVENT_SESSION_START, VERSION, } from '@grafana/faro-core';\nimport { createSession } from '../../metas';\nimport { getSessionManagerByConfig, isSampled } from './sessionManager';\nimport { PersistentSessionsManager } from './sessionManager/PersistentSessionsManager';\nimport { createUserSessionObject, isUserSessionValid } from './sessionManager/sessionManagerUtils';\nexport class SessionInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-session';\n        this.version = VERSION;\n    }\n    sendSessionStartEvent(meta) {\n        var _a, _b;\n        const session = meta.session;\n        if (session && session.id !== ((_a = this.notifiedSession) === null || _a === void 0 ? void 0 : _a.id)) {\n            if (this.notifiedSession && this.notifiedSession.id === ((_b = session.attributes) === null || _b === void 0 ? void 0 : _b['previousSession'])) {\n                this.api.pushEvent(EVENT_SESSION_EXTEND, {}, undefined, { skipDedupe: true });\n                this.notifiedSession = session;\n                return;\n            }\n            this.notifiedSession = session;\n            // no need to add attributes and session id, they are included as part of meta\n            // automatically\n            this.api.pushEvent(EVENT_SESSION_START, {}, undefined, { skipDedupe: true });\n        }\n    }\n    createInitialSession(SessionManager, sessionsConfig) {\n        var _a, _b, _c, _d, _e;\n        let userSession = SessionManager.fetchUserSession();\n        if (sessionsConfig.persistent && sessionsConfig.maxSessionPersistenceTime && userSession) {\n            const now = dateNow();\n            const shouldClearPersistentSession = userSession.lastActivity < now - sessionsConfig.maxSessionPersistenceTime;\n            if (shouldClearPersistentSession) {\n                PersistentSessionsManager.removeUserSession();\n                userSession = null;\n            }\n        }\n        let lifecycleType;\n        let initialSession;\n        if (isUserSessionValid(userSession)) {\n            const sessionId = userSession === null || userSession === void 0 ? void 0 : userSession.sessionId;\n            initialSession = createUserSessionObject({\n                sessionId,\n                isSampled: userSession.isSampled || false,\n                started: userSession === null || userSession === void 0 ? void 0 : userSession.started,\n            });\n            initialSession.sessionMeta = {\n                id: sessionId,\n                attributes: Object.assign(Object.assign(Object.assign({}, (_a = sessionsConfig.session) === null || _a === void 0 ? void 0 : _a.attributes), (_b = userSession === null || userSession === void 0 ? void 0 : userSession.sessionMeta) === null || _b === void 0 ? void 0 : _b.attributes), { \n                    // For valid resumed sessions we do not want to recalculate the sampling decision on each init phase.\n                    isSampled: initialSession.isSampled.toString() }),\n            };\n            lifecycleType = EVENT_SESSION_RESUME;\n        }\n        else {\n            const sessionId = (_d = (_c = sessionsConfig.session) === null || _c === void 0 ? void 0 : _c.id) !== null && _d !== void 0 ? _d : createSession().id;\n            initialSession = createUserSessionObject({\n                sessionId,\n                isSampled: isSampled(),\n            });\n            initialSession.sessionMeta = {\n                id: sessionId,\n                attributes: Object.assign({ isSampled: initialSession.isSampled.toString() }, (_e = sessionsConfig.session) === null || _e === void 0 ? void 0 : _e.attributes),\n            };\n            lifecycleType = EVENT_SESSION_START;\n        }\n        return { initialSession, lifecycleType };\n    }\n    registerBeforeSendHook(SessionManager) {\n        var _a;\n        const { updateSession } = new SessionManager();\n        (_a = this.transports) === null || _a === void 0 ? void 0 : _a.addBeforeSendHooks((item) => {\n            var _a, _b, _c;\n            updateSession();\n            const attributes = (_a = item.meta.session) === null || _a === void 0 ? void 0 : _a.attributes;\n            if (attributes && (attributes === null || attributes === void 0 ? void 0 : attributes['isSampled']) === 'true') {\n                let newItem = JSON.parse(JSON.stringify(item));\n                const newAttributes = (_b = newItem.meta.session) === null || _b === void 0 ? void 0 : _b.attributes;\n                newAttributes === null || newAttributes === void 0 ? true : delete newAttributes['isSampled'];\n                if (Object.keys(newAttributes !== null && newAttributes !== void 0 ? newAttributes : {}).length === 0) {\n                    (_c = newItem.meta.session) === null || _c === void 0 ? true : delete _c.attributes;\n                }\n                return newItem;\n            }\n            return null;\n        });\n    }\n    initialize() {\n        this.logDebug('init session instrumentation');\n        const sessionTrackingConfig = this.config.sessionTracking;\n        if (sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.enabled) {\n            const SessionManager = getSessionManagerByConfig(sessionTrackingConfig);\n            this.registerBeforeSendHook(SessionManager);\n            const { initialSession, lifecycleType } = this.createInitialSession(SessionManager, sessionTrackingConfig);\n            SessionManager.storeUserSession(initialSession);\n            const initialSessionMeta = initialSession.sessionMeta;\n            this.notifiedSession = initialSessionMeta;\n            this.api.setSession(initialSessionMeta);\n            if (lifecycleType === EVENT_SESSION_START) {\n                this.api.pushEvent(EVENT_SESSION_START, {}, undefined, { skipDedupe: true });\n            }\n            if (lifecycleType === EVENT_SESSION_RESUME) {\n                this.api.pushEvent(EVENT_SESSION_RESUME, {}, undefined, { skipDedupe: true });\n            }\n        }\n        this.metas.addListener(this.sendSessionStartEvent.bind(this));\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { faro, genShortID } from '@grafana/faro-core';\nexport function createSession(attributes) {\n    var _a, _b, _c, _d;\n    return {\n        id: (_d = (_c = (_b = (_a = faro.config) === null || _a === void 0 ? void 0 : _a.sessionTracking) === null || _b === void 0 ? void 0 : _b.generateSessionId) === null || _c === void 0 ? void 0 : _c.call(_b)) !== null && _d !== void 0 ? _d : genShortID(),\n        attributes,\n    };\n}\n//# sourceMappingURL=createSession.js.map","import { BaseInstrumentation, EVENT_VIEW_CHANGED, unknownString, VERSION } from '@grafana/faro-core';\n// all this does is send VIEW_CHANGED event\nexport class ViewInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-view';\n        this.version = VERSION;\n    }\n    sendViewChangedEvent(meta) {\n        var _a, _b, _c, _d;\n        const view = meta.view;\n        if (view && view.name !== ((_a = this.notifiedView) === null || _a === void 0 ? void 0 : _a.name)) {\n            this.api.pushEvent(EVENT_VIEW_CHANGED, {\n                fromView: (_c = (_b = this.notifiedView) === null || _b === void 0 ? void 0 : _b.name) !== null && _c !== void 0 ? _c : unknownString,\n                toView: (_d = view.name) !== null && _d !== void 0 ? _d : unknownString,\n            }, undefined, { skipDedupe: true });\n            this.notifiedView = view;\n        }\n    }\n    initialize() {\n        this.metas.addListener(this.sendViewChangedEvent.bind(this));\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","export const NAVIGATION_ENTRY = 'navigation';\nexport const RESOURCE_ENTRY = 'resource';\n//# sourceMappingURL=performanceConstants.js.map","import { isArray, unknownString } from '@grafana/faro-core';\nconst w3cTraceparentFormat = /^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9]{1,2}$/;\n// Extract traceparent from serverTiming, if present\nexport function getSpanContextFromServerTiming(serverTimings = []) {\n    for (const serverEntry of serverTimings) {\n        if (serverEntry.name === 'traceparent') {\n            if (!w3cTraceparentFormat.test(serverEntry.description)) {\n                continue;\n            }\n            const [, traceId, spanId] = serverEntry.description.split('-');\n            if (traceId != null && spanId != null) {\n                return { traceId, spanId };\n            }\n            break;\n        }\n    }\n    return undefined;\n}\nexport function performanceObserverSupported() {\n    return 'PerformanceObserver' in window;\n}\nexport function entryUrlIsIgnored(ignoredUrls = [], entryName) {\n    return ignoredUrls.some((url) => url && entryName.match(url) != null);\n}\nexport function onDocumentReady(handleReady) {\n    if (document.readyState === 'complete') {\n        handleReady();\n    }\n    else {\n        const readyStateCompleteHandler = () => {\n            if (document.readyState === 'complete') {\n                handleReady();\n                document.removeEventListener('readystatechange', readyStateCompleteHandler);\n            }\n        };\n        document.addEventListener('readystatechange', readyStateCompleteHandler);\n    }\n}\nexport function includePerformanceEntry(performanceEntryJSON, allowProps = {}) {\n    for (const [allowPropKey, allowPropValue] of Object.entries(allowProps)) {\n        const perfEntryPropVal = performanceEntryJSON[allowPropKey];\n        if (perfEntryPropVal == null) {\n            return false;\n        }\n        if (isArray(allowPropValue)) {\n            return allowPropValue.includes(perfEntryPropVal);\n        }\n        return perfEntryPropVal === allowPropValue;\n    }\n    // empty object allows all\n    return true;\n}\nexport function createFaroResourceTiming(resourceEntryRaw) {\n    const { connectEnd, connectStart, decodedBodySize, domainLookupEnd, domainLookupStart, duration, encodedBodySize, fetchStart, initiatorType, name, nextHopProtocol, redirectEnd, redirectStart, \n    // @ts-expect-error the renderBlockingStatus property is not available in all browsers\n    renderBlockingStatus: rbs, requestStart, responseEnd, responseStart, \n    // @ts-expect-error the renderBlockingStatus property is not available in all browsers\n    responseStatus, secureConnectionStart, transferSize, workerStart, } = resourceEntryRaw;\n    return {\n        name: name,\n        duration: toFaroPerformanceTimingString(duration),\n        tcpHandshakeTime: toFaroPerformanceTimingString(connectEnd - connectStart),\n        dnsLookupTime: toFaroPerformanceTimingString(domainLookupEnd - domainLookupStart),\n        tlsNegotiationTime: toFaroPerformanceTimingString(requestStart - secureConnectionStart),\n        responseStatus: toFaroPerformanceTimingString(responseStatus),\n        redirectTime: toFaroPerformanceTimingString(redirectEnd - redirectStart),\n        requestTime: toFaroPerformanceTimingString(responseStart - requestStart),\n        responseTime: toFaroPerformanceTimingString(responseEnd - responseStart),\n        fetchTime: toFaroPerformanceTimingString(responseEnd - fetchStart),\n        serviceWorkerTime: toFaroPerformanceTimingString(fetchStart - workerStart),\n        decodedBodySize: toFaroPerformanceTimingString(decodedBodySize),\n        encodedBodySize: toFaroPerformanceTimingString(encodedBodySize),\n        cacheHitStatus: getCacheType(),\n        renderBlockingStatus: toFaroPerformanceTimingString(rbs),\n        protocol: nextHopProtocol,\n        initiatorType: initiatorType,\n        // TODO: add in future iteration, ideally after nested objects are supported by the collector.\n        // serverTiming: resourceEntryRaw.serverTiming,\n    };\n    function getCacheType() {\n        let cacheType = 'fullLoad';\n        if (transferSize === 0) {\n            if (decodedBodySize > 0) {\n                cacheType = 'cache';\n            }\n        }\n        else {\n            if (responseStatus != null) {\n                if (responseStatus === 304) {\n                    cacheType = 'conditionalFetch';\n                }\n            }\n            else if (encodedBodySize > 0 && transferSize < encodedBodySize) {\n                cacheType = 'conditionalFetch';\n            }\n        }\n        return cacheType;\n    }\n}\nexport function createFaroNavigationTiming(navigationEntryRaw) {\n    const { activationStart, domComplete, domContentLoadedEventEnd, domContentLoadedEventStart, domInteractive, fetchStart, loadEventEnd, loadEventStart, responseStart, type, } = navigationEntryRaw;\n    const parserStart = getDocumentParsingTime();\n    return Object.assign({ visibilityState: document.visibilityState, pageLoadTime: toFaroPerformanceTimingString(domComplete - fetchStart), documentParsingTime: toFaroPerformanceTimingString(parserStart ? domInteractive - parserStart : null), domProcessingTime: toFaroPerformanceTimingString(domComplete - domInteractive), domContentLoadHandlerTime: toFaroPerformanceTimingString(domContentLoadedEventEnd - domContentLoadedEventStart), onLoadTime: toFaroPerformanceTimingString(loadEventEnd - loadEventStart), \n        // For more accuracy on prerendered pages page we calculate relative top the activationStart instead of the start of the navigation.\n        // clamp to 0 if activationStart occurs after first byte is received.\n        ttfb: toFaroPerformanceTimingString(Math.max(responseStart - (activationStart !== null && activationStart !== void 0 ? activationStart : 0), 0)), type: type }, createFaroResourceTiming(navigationEntryRaw));\n}\nfunction getDocumentParsingTime() {\n    var _a;\n    if (((_a = performance.timing) === null || _a === void 0 ? void 0 : _a.domLoading) != null) {\n        // the browser is about to start parsing the first received bytes of the HTML document.\n        // This property is deprecated but there isn't a really good alternative atm.\n        // For now we stick with domLoading and keep researching a better alternative.\n        return performance.timing.domLoading - performance.timeOrigin;\n    }\n    return null;\n}\nfunction toFaroPerformanceTimingString(v) {\n    if (v == null) {\n        return unknownString;\n    }\n    if (typeof v === 'number') {\n        return Math.round(v).toString();\n    }\n    return v.toString();\n}\n//# sourceMappingURL=performanceUtils.js.map","import { faro, genShortID } from '@grafana/faro-core';\nimport { RESOURCE_ENTRY } from './performanceConstants';\nimport { createFaroResourceTiming, entryUrlIsIgnored, getSpanContextFromServerTiming, includePerformanceEntry, } from './performanceUtils';\nconst DEFAULT_TRACK_RESOURCES = { initiatorType: ['xmlhttprequest', 'fetch'] };\nexport function observeResourceTimings(faroNavigationId, pushEvent, ignoredUrls) {\n    const trackResources = faro.config.trackResources;\n    const observer = new PerformanceObserver((observedEntries) => {\n        const entries = observedEntries.getEntries();\n        for (const resourceEntryRaw of entries) {\n            if (entryUrlIsIgnored(ignoredUrls, resourceEntryRaw.name)) {\n                return;\n            }\n            const resourceEntryJson = resourceEntryRaw.toJSON();\n            let spanContext = getSpanContextFromServerTiming(resourceEntryJson === null || resourceEntryJson === void 0 ? void 0 : resourceEntryJson.serverTiming);\n            if ((trackResources == null && includePerformanceEntry(resourceEntryJson, DEFAULT_TRACK_RESOURCES)) ||\n                trackResources) {\n                const faroResourceEntry = Object.assign(Object.assign({}, createFaroResourceTiming(resourceEntryJson)), { faroNavigationId, faroResourceId: genShortID() });\n                pushEvent('faro.performance.resource', faroResourceEntry, undefined, {\n                    spanContext,\n                    timestampOverwriteMs: performance.timeOrigin + resourceEntryJson.startTime,\n                });\n            }\n        }\n    });\n    observer.observe({\n        type: RESOURCE_ENTRY,\n        buffered: true,\n    });\n}\n//# sourceMappingURL=resource.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { BaseInstrumentation, VERSION } from '@grafana/faro-core';\nimport { getNavigationTimings } from './navigation';\nimport { onDocumentReady, performanceObserverSupported } from './performanceUtils';\nimport { observeResourceTimings } from './resource';\nexport class PerformanceInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-performance';\n        this.version = VERSION;\n    }\n    initialize() {\n        if (!performanceObserverSupported()) {\n            this.logDebug('performance observer not supported. Disable performance instrumentation.');\n            return;\n        }\n        onDocumentReady(() => __awaiter(this, void 0, void 0, function* () {\n            const pushEvent = this.api.pushEvent;\n            const ignoredUrls = this.getIgnoreUrls();\n            const { faroNavigationId } = yield getNavigationTimings(pushEvent, ignoredUrls);\n            if (faroNavigationId != null) {\n                observeResourceTimings(faroNavigationId, pushEvent, ignoredUrls);\n            }\n        }));\n    }\n    getIgnoreUrls() {\n        var _a;\n        return (_a = this.transports.transports) === null || _a === void 0 ? void 0 : _a.flatMap((transport) => transport.getIgnoreUrls());\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { genShortID, unknownString } from '@grafana/faro-core';\nimport { getItem, setItem, webStorageType } from '../../utils';\nimport { NAVIGATION_ID_STORAGE_KEY } from '../instrumentationConstants';\nimport { NAVIGATION_ENTRY } from './performanceConstants';\nimport { createFaroNavigationTiming, entryUrlIsIgnored, getSpanContextFromServerTiming } from './performanceUtils';\nexport function getNavigationTimings(pushEvent, ignoredUrls) {\n    let faroNavigationEntryResolve;\n    const faroNavigationEntryPromise = new Promise((resolve) => {\n        faroNavigationEntryResolve = resolve;\n    });\n    const observer = new PerformanceObserver((observedEntries) => {\n        var _a;\n        const [navigationEntryRaw] = observedEntries.getEntries();\n        if (navigationEntryRaw == null || entryUrlIsIgnored(ignoredUrls, navigationEntryRaw.name)) {\n            return;\n        }\n        const navEntryJson = navigationEntryRaw.toJSON();\n        let spanContext = getSpanContextFromServerTiming(navEntryJson === null || navEntryJson === void 0 ? void 0 : navEntryJson.serverTiming);\n        const faroPreviousNavigationId = (_a = getItem(NAVIGATION_ID_STORAGE_KEY, webStorageType.session)) !== null && _a !== void 0 ? _a : unknownString;\n        const faroNavigationEntry = Object.assign(Object.assign({}, createFaroNavigationTiming(navEntryJson)), { faroNavigationId: genShortID(), faroPreviousNavigationId });\n        setItem(NAVIGATION_ID_STORAGE_KEY, faroNavigationEntry.faroNavigationId, webStorageType.session);\n        pushEvent('faro.performance.navigation', faroNavigationEntry, undefined, {\n            spanContext,\n            timestampOverwriteMs: performance.timeOrigin + navEntryJson.startTime,\n        });\n        faroNavigationEntryResolve(faroNavigationEntry);\n    });\n    observer.observe({\n        type: NAVIGATION_ENTRY,\n        buffered: true,\n    });\n    return faroNavigationEntryPromise;\n}\n//# sourceMappingURL=navigation.js.map","import { allLogLevels, BaseInstrumentation, LogLevel, VERSION } from '@grafana/faro-core';\nexport class ConsoleInstrumentation extends BaseInstrumentation {\n    constructor(options = {}) {\n        super();\n        this.options = options;\n        this.name = '@grafana/faro-web-sdk:instrumentation-console';\n        this.version = VERSION;\n    }\n    initialize() {\n        this.logDebug('Initializing\\n', this.options);\n        allLogLevels\n            .filter((level) => { var _a; return !((_a = this.options.disabledLevels) !== null && _a !== void 0 ? _a : ConsoleInstrumentation.defaultDisabledLevels).includes(level); })\n            .forEach((level) => {\n            /* eslint-disable-next-line no-console */\n            console[level] = (...args) => {\n                try {\n                    this.api.pushLog(args, { level });\n                }\n                catch (err) {\n                    this.logError(err);\n                }\n                finally {\n                    this.unpatchedConsole[level](...args);\n                }\n            };\n        });\n    }\n}\nConsoleInstrumentation.defaultDisabledLevels = [LogLevel.DEBUG, LogLevel.TRACE, LogLevel.LOG];\n//# sourceMappingURL=instrumentation.js.map","import { ConsoleInstrumentation, ErrorsInstrumentation, PerformanceInstrumentation, SessionInstrumentation, ViewInstrumentation, WebVitalsInstrumentation, } from '../instrumentations';\nexport function getWebInstrumentations(options = {}) {\n    const instrumentations = [\n        new ErrorsInstrumentation(),\n        new WebVitalsInstrumentation(),\n        new SessionInstrumentation(),\n        new ViewInstrumentation(),\n    ];\n    if (options.enablePerformanceInstrumentation !== false) {\n        // unshift to ensure that initialization starts before the other instrumentations\n        instrumentations.unshift(new PerformanceInstrumentation());\n    }\n    if (options.captureConsole !== false) {\n        instrumentations.push(new ConsoleInstrumentation({\n            disabledLevels: options.captureConsoleDisabledLevels,\n        }));\n    }\n    return instrumentations;\n}\n//# sourceMappingURL=getWebInstrumentations.js.map","import plugin from './plugin.json';\n\nexport const PYROSCOPE_APP_ID = plugin.id;\n\nexport const PLUGIN_BASE_URL = `/a/${PYROSCOPE_APP_ID}`;\n\nexport enum ROUTES {\n  PROFILES_EXPLORER_VIEW = '/profiles-explorer',\n  ADHOC_VIEW = '/ad-hoc',\n  SETTINGS = '/settings',\n}\n","export const GIT_COMMIT = '31687553b4ab2a3bc72f9f7d8077c7bb20d6fbe3';\n","export type Environment = 'local' | 'dev' | 'ops' | 'prod';\n\nconst MATCHERS: Array<{ regExp: RegExp; environment: Environment }> = [\n  {\n    regExp: /localhost/,\n    environment: 'local',\n  },\n  {\n    regExp: /grafana-dev\\.net/,\n    environment: 'dev',\n  },\n  {\n    regExp: /grafana-ops\\.net/,\n    environment: 'ops',\n  },\n  {\n    regExp: /grafana\\.net/,\n    environment: 'prod',\n  },\n];\n\nexport function getEnvironment(): Environment | null {\n  if (!window?.location?.host) {\n    return null;\n  }\n\n  const found = MATCHERS.find(({ regExp }) => regExp.test(window.location.host));\n\n  return found ? found.environment : null;\n}\n","import { Environment } from '../getEnvironment';\nimport { FaroEnvironment } from './getFaroEnvironment';\n\nexport const FARO_ENVIRONMENTS = new Map<Environment, FaroEnvironment>([\n  // Uncomment this map entry to test from your local machine\n  // [\n  //   'local',\n  //   {\n  //     environment: 'local',\n  //     appName: 'grafana-pyroscope-local',\n  //     faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/d6ca259b3387e6ddd641973d0fad3ed0',\n  //   },\n  // ],\n  // Always keep the options below\n  [\n    'dev',\n    {\n      environment: 'dev',\n      appName: 'grafana-pyroscope-dev',\n      faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/48e03a2647389f2f6494af7f975b4084',\n    },\n  ],\n  [\n    'ops',\n    {\n      environment: 'ops',\n      appName: 'grafana-pyroscope-ops',\n      faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/b5cfd5eeb412cf5e74bd828b4ddd17ff',\n    },\n  ],\n  [\n    'prod',\n    {\n      environment: 'prod',\n      appName: 'grafana-pyroscope-prod',\n      faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/6cbe17b3af4b72ce5936bf4d15a5c393',\n    },\n  ],\n]);\n","import { Faro, getWebInstrumentations, initializeFaro } from '@grafana/faro-web-sdk';\nimport { config } from '@grafana/runtime';\n\nimport { PYROSCOPE_APP_ID } from '../../../../constants';\nimport { GIT_COMMIT } from '../../../../version';\nimport { getFaroEnvironment } from './getFaroEnvironment';\n\nlet faro: Faro | null = null;\n\nexport const getFaro = () => faro;\nexport const setFaro = (instance: Faro | null) => (faro = instance);\n\nexport function initFaro() {\n  if (getFaro()) {\n    return;\n  }\n\n  const faroEnvironment = getFaroEnvironment();\n  if (!faroEnvironment) {\n    return;\n  }\n\n  const { environment, faroUrl, appName } = faroEnvironment;\n\n  const { apps, bootData, buildInfo } = config;\n\n  const appRelease = apps[PYROSCOPE_APP_ID].version;\n  const userEmail = bootData.user.email;\n  const grafanaVersion = `v${buildInfo.version} (${buildInfo.edition})`;\n\n  setFaro(\n    initializeFaro({\n      url: faroUrl,\n      app: {\n        name: appName,\n        release: appRelease,\n        version: GIT_COMMIT,\n        environment,\n        namespace: grafanaVersion, // :man_shrug:\n      },\n      user: {\n        email: userEmail,\n      },\n      instrumentations: [\n        ...getWebInstrumentations({\n          captureConsole: false,\n        }),\n      ],\n      isolate: true,\n      beforeSend: (event) => {\n        if ((event.meta.page?.url ?? '').includes(PYROSCOPE_APP_ID)) {\n          event.meta.view = {\n            name: new URLSearchParams(event.meta.page?.url).get('explorationType') || '',\n          };\n\n          return event;\n        }\n\n        return null;\n      },\n    })\n  );\n}\n","\"use client\";\n\n// src/QueryClientProvider.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar QueryClientContext = React.createContext(\n  void 0\n);\nvar useQueryClient = (queryClient) => {\n  const client = React.useContext(QueryClientContext);\n  if (queryClient) {\n    return queryClient;\n  }\n  if (!client) {\n    throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");\n  }\n  return client;\n};\nvar QueryClientProvider = ({\n  client,\n  children\n}) => {\n  React.useEffect(() => {\n    client.mount();\n    return () => {\n      client.unmount();\n    };\n  }, [client]);\n  return /* @__PURE__ */ jsx(QueryClientContext.Provider, { value: client, children });\n};\nexport {\n  QueryClientContext,\n  QueryClientProvider,\n  useQueryClient\n};\n//# sourceMappingURL=QueryClientProvider.js.map","import { LogLevel } from '@grafana/faro-web-sdk';\nimport { getFaro } from '@shared/infrastructure/tracking/faro/faro';\n\nimport { Environment, getEnvironment } from './getEnvironment';\n\nexport type ErrorContext = Record<string, string>;\n\nexport class Logger {\n  #environment: Environment | null;\n\n  constructor() {\n    this.#environment = getEnvironment();\n  }\n\n  #callConsole(methodName: 'trace' | 'debug' | 'info' | 'log' | 'warn' | 'error', args: any[]) {\n    // silence console in production\n    if (this.#environment !== 'prod') {\n      console[methodName](...args); // eslint-disable-line no-console\n    }\n  }\n\n  trace() {\n    this.#callConsole('trace', []);\n\n    getFaro()?.api.pushLog([], {\n      level: LogLevel.TRACE,\n    });\n  }\n\n  debug(...args: any) {\n    this.#callConsole('debug', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.DEBUG,\n    });\n  }\n\n  info(...args: any) {\n    this.#callConsole('info', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.INFO,\n    });\n  }\n\n  log(...args: any) {\n    this.#callConsole('log', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.LOG,\n    });\n  }\n\n  warn(...args: any) {\n    this.#callConsole('warn', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.WARN,\n    });\n  }\n\n  error(error: Error, context?: ErrorContext) {\n    this.#callConsole('error', [error]);\n\n    if (context) {\n      this.#callConsole('error', ['Error context', context]);\n    }\n\n    // does not report an error, but an exception ;)\n    getFaro()?.api.pushError(error, {\n      context,\n    });\n  }\n}\n\nexport const logger = new Logger();\n","import { logger } from '@shared/infrastructure/tracking/logger';\n\nimport plugin from '../../plugin.json';\n\nclass UserStorage {\n  #storage: Storage = window.localStorage;\n\n  KEYS = {\n    SETTINGS: `${plugin.id}.userSettings`,\n    GITHUB_INTEGRATION: `${plugin.id}.gitHubIntegration`,\n    PROFILES_EXPLORER: `${plugin.id}.profilesExplorer`,\n  };\n\n  has(itemName: string): boolean {\n    return this.#storage.hasOwnProperty(itemName);\n  }\n\n  get(itemName: string): null | any {\n    if (!this.has(itemName)) {\n      return null;\n    }\n\n    try {\n      return JSON.parse(this.#storage.getItem(itemName) as string);\n    } catch (error) {\n      logger.error(error as Error, { info: `Error parsing JSON for storage item \"${itemName}\"!` });\n      return null;\n    }\n  }\n\n  set(itemName: string, value: any): void {\n    try {\n      this.#storage.setItem(itemName, JSON.stringify(value));\n    } catch (error) {\n      logger.error(error as Error, { info: `Error setting storage item \"${itemName}\"!` });\n    }\n  }\n}\n\nexport const userStorage = new UserStorage();\n","export const noOp = () => {};\n","export class HttpClientError extends Error {\n  response: Response;\n  reason?: any;\n\n  constructor(response: Response, responseJson?: Record<string, any>) {\n    let message = `HTTP ${response.status} (${response.statusText || '?'})`;\n\n    if (responseJson?.message) {\n      message = `${message}  ${responseJson.message}`;\n    }\n\n    super(message);\n\n    this.response = response;\n  }\n}\n","import { noOp } from '@shared/domain/noOp';\n\nimport { HttpClientError } from './HttpClientError';\n\nexport class HttpClient {\n  baseUrl = '';\n  defaultHeaders = {};\n  abortController?: AbortController | null = null;\n\n  constructor(baseUrl: string, defaultHeaders: Record<string, string> = {}) {\n    this.baseUrl = baseUrl;\n    this.defaultHeaders = Object.freeze(defaultHeaders);\n  }\n\n  async fetch(pathname: string, options?: RequestInit) {\n    this.abortController = new AbortController();\n    const { signal } = this.abortController;\n\n    const fullUrl = `${this.baseUrl}${pathname}`;\n    const headers = { ...this.defaultHeaders, ...options?.headers };\n    const fullOptions = {\n      signal, // we allow signal to be passed as an option\n      ...options,\n      headers,\n    };\n\n    let response;\n\n    try {\n      response = await fetch(fullUrl, fullOptions);\n\n      if (!response.ok) {\n        throw new HttpClientError(response, await response.json().catch(noOp));\n      }\n    } catch (error) {\n      if (this.isAbortError(error)) {\n        (error as any).reason = options?.signal?.reason || signal.reason;\n      }\n\n      throw error;\n    } finally {\n      this.abortController = null;\n    }\n\n    return response;\n  }\n\n  abort(reason?: any) {\n    if (this.abortController) {\n      this.abortController.abort(reason);\n    }\n  }\n\n  isAbortError(error: unknown) {\n    return error instanceof DOMException && error.name === 'AbortError';\n  }\n}\n","import { DataSourceInstanceSettings, DataSourceJsonData } from '@grafana/data';\nimport { config } from '@grafana/runtime';\n\nimport { logger } from '../tracking/logger';\nimport { userStorage } from '../userStorage';\nimport { HttpClient } from './HttpClient';\n\nconst PYROSCOPE_DATA_SOURCES_TYPE = 'grafana-pyroscope-datasource';\nconst PYROSCOPE_URL_SEARCH_PARAM_NAME = 'var-dataSource'; // matches with the Scenes library\n\ntype CustomDataSourceJsonData = { overridesDefault: boolean };\ntype CustomDataSourceInstanceSettings = DataSourceInstanceSettings<DataSourceJsonData & CustomDataSourceJsonData>;\n\n/**\n * An HTTP client ready to fetch data from the plugin's backend\n */\nexport class ApiClient extends HttpClient {\n  static getPyroscopeDataSources() {\n    return Object.values(config.datasources).filter((ds) => ds.type === PYROSCOPE_DATA_SOURCES_TYPE);\n  }\n\n  static selectDefaultDataSource() {\n    const pyroscopeDataSources = ApiClient.getPyroscopeDataSources() as CustomDataSourceInstanceSettings[];\n\n    const uidFromUrl = new URL(window.location.href).searchParams.get(PYROSCOPE_URL_SEARCH_PARAM_NAME);\n    const uidFromLocalStorage = userStorage.get(userStorage.KEYS.PROFILES_EXPLORER)?.dataSource;\n\n    const defaultDataSource =\n      pyroscopeDataSources.find((ds) => ds.uid === uidFromUrl) ||\n      pyroscopeDataSources.find((ds) => ds.uid === uidFromLocalStorage) ||\n      pyroscopeDataSources.find((ds) => ds.jsonData.overridesDefault) ||\n      pyroscopeDataSources.find((ds) => ds.isDefault) ||\n      pyroscopeDataSources[0];\n\n    if (!defaultDataSource) {\n      logger.warn(\n        'Cannot find any Pyroscope data source! Please add and configure a Pyroscope data source to your Grafana instance.'\n      );\n\n      // because we instantiate most of our API clients before exporting them,\n      // we have to return a dummy data source to prevent the whole app to fail\n      return { uid: 'no-data-source-configured' };\n    }\n\n    return defaultDataSource;\n  }\n\n  static getBaseUrl() {\n    const pyroscopeDataSource = ApiClient.selectDefaultDataSource();\n\n    let appSubUrl = config.appSubUrl || '';\n    if (appSubUrl.at(-1) !== '/') {\n      // ensures that the API pathname is appended correctly (appUrl seems to always have it but better to be extra careful)\n      appSubUrl += '/';\n    }\n\n    return `${appSubUrl}api/datasources/proxy/uid/${pyroscopeDataSource.uid}`;\n  }\n\n  constructor() {\n    super(ApiClient.getBaseUrl().toString(), {\n      'content-type': 'application/json',\n      'X-Grafana-Org-Id': String(config.bootData?.user?.orgId || ''),\n    });\n  }\n}\n","// src/queryObserver.ts\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { fetchState } from \"./query.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options, notifyOptions) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult(notifyOptions);\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    const trackedResult = {};\n    Object.keys(result).forEach((key) => {\n      Object.defineProperty(trackedResult, key, {\n        configurable: false,\n        enumerable: true,\n        get: () => {\n          this.trackProp(key);\n          onPropTracked?.(key);\n          return result[key];\n        }\n      });\n    });\n    return trackedResult;\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    query.isFetchingOptimistic = true;\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    if (options.select && newState.data !== void 0) {\n      if (prevResult && newState.data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(newState.data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    } else {\n      data = newState.data;\n    }\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n        if (options.select && placeholderData !== void 0) {\n          try {\n            placeholderData = options.select(placeholderData);\n            this.#selectError = null;\n          } catch (selectError) {\n            this.#selectError = selectError;\n          }\n        }\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch\n    };\n    return result;\n  }\n  updateResult(notifyOptions) {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const defaultNotifyOptions = {};\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    if (notifyOptions?.listeners !== false && shouldNotifyListeners()) {\n      defaultNotifyOptions.listeners = true;\n    }\n    this.#notify({ ...defaultNotifyOptions, ...notifyOptions });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false) {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","\"use client\";\n\n// src/QueryErrorResetBoundary.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createValue() {\n  let isReset = false;\n  return {\n    clearReset: () => {\n      isReset = false;\n    },\n    reset: () => {\n      isReset = true;\n    },\n    isReset: () => {\n      return isReset;\n    }\n  };\n}\nvar QueryErrorResetBoundaryContext = React.createContext(createValue());\nvar useQueryErrorResetBoundary = () => React.useContext(QueryErrorResetBoundaryContext);\nvar QueryErrorResetBoundary = ({\n  children\n}) => {\n  const [value] = React.useState(() => createValue());\n  return /* @__PURE__ */ jsx(QueryErrorResetBoundaryContext.Provider, { value, children: typeof children === \"function\" ? children(value) : children });\n};\nexport {\n  QueryErrorResetBoundary,\n  useQueryErrorResetBoundary\n};\n//# sourceMappingURL=QueryErrorResetBoundary.js.map","\"use client\";\n\n// src/isRestoring.ts\nimport * as React from \"react\";\nvar IsRestoringContext = React.createContext(false);\nvar useIsRestoring = () => React.useContext(IsRestoringContext);\nvar IsRestoringProvider = IsRestoringContext.Provider;\nexport {\n  IsRestoringProvider,\n  useIsRestoring\n};\n//# sourceMappingURL=isRestoring.js.map","// src/utils.ts\nfunction shouldThrowError(throwError, params) {\n  if (typeof throwError === \"function\") {\n    return throwError(...params);\n  }\n  return !!throwError;\n}\nfunction noop() {\n}\nexport {\n  noop,\n  shouldThrowError\n};\n//# sourceMappingURL=utils.js.map","\"use client\";\n\n// src/errorBoundaryUtils.ts\nimport * as React from \"react\";\nimport { shouldThrowError } from \"./utils.js\";\nvar ensurePreventErrorBoundaryRetry = (options, errorResetBoundary) => {\n  if (options.suspense || options.throwOnError) {\n    if (!errorResetBoundary.isReset()) {\n      options.retryOnMount = false;\n    }\n  }\n};\nvar useClearResetErrorBoundary = (errorResetBoundary) => {\n  React.useEffect(() => {\n    errorResetBoundary.clearReset();\n  }, [errorResetBoundary]);\n};\nvar getHasError = ({\n  result,\n  errorResetBoundary,\n  throwOnError,\n  query\n}) => {\n  return result.isError && !errorResetBoundary.isReset() && !result.isFetching && query && shouldThrowError(throwOnError, [result.error, query]);\n};\nexport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n};\n//# sourceMappingURL=errorBoundaryUtils.js.map","// src/suspense.ts\nvar defaultThrowOnError = (_error, query) => query.state.data === void 0;\nvar ensureStaleTime = (defaultedOptions) => {\n  if (defaultedOptions.suspense) {\n    if (typeof defaultedOptions.staleTime !== \"number\") {\n      defaultedOptions.staleTime = 1e3;\n    }\n  }\n};\nvar willFetch = (result, isRestoring) => result.isLoading && result.isFetching && !isRestoring;\nvar shouldSuspend = (defaultedOptions, result) => defaultedOptions?.suspense && result.isPending;\nvar fetchOptimistic = (defaultedOptions, observer, errorResetBoundary) => observer.fetchOptimistic(defaultedOptions).catch(() => {\n  errorResetBoundary.clearReset();\n});\nexport {\n  defaultThrowOnError,\n  ensureStaleTime,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n};\n//# sourceMappingURL=suspense.js.map","\"use client\";\n\n// src/useQuery.ts\nimport { QueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useQuery(options, queryClient) {\n  return useBaseQuery(options, QueryObserver, queryClient);\n}\nexport {\n  useQuery\n};\n//# sourceMappingURL=useQuery.js.map","\"use client\";\n\n// src/useBaseQuery.ts\nimport * as React from \"react\";\nimport { notifyManager } from \"@tanstack/query-core\";\nimport { useQueryErrorResetBoundary } from \"./QueryErrorResetBoundary.js\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { useIsRestoring } from \"./isRestoring.js\";\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n} from \"./errorBoundaryUtils.js\";\nimport { ensureStaleTime, fetchOptimistic, shouldSuspend } from \"./suspense.js\";\nfunction useBaseQuery(options, Observer, queryClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof options !== \"object\" || Array.isArray(options)) {\n      throw new Error(\n        'Bad argument type. Starting with v5, only the \"Object\" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object'\n      );\n    }\n  }\n  const client = useQueryClient(queryClient);\n  const isRestoring = useIsRestoring();\n  const errorResetBoundary = useQueryErrorResetBoundary();\n  const defaultedOptions = client.defaultQueryOptions(options);\n  client.getDefaultOptions().queries?._experimental_beforeQuery?.(\n    defaultedOptions\n  );\n  defaultedOptions._optimisticResults = isRestoring ? \"isRestoring\" : \"optimistic\";\n  ensureStaleTime(defaultedOptions);\n  ensurePreventErrorBoundaryRetry(defaultedOptions, errorResetBoundary);\n  useClearResetErrorBoundary(errorResetBoundary);\n  const [observer] = React.useState(\n    () => new Observer(\n      client,\n      defaultedOptions\n    )\n  );\n  const result = observer.getOptimisticResult(defaultedOptions);\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => {\n        const unsubscribe = isRestoring ? () => void 0 : observer.subscribe(notifyManager.batchCalls(onStoreChange));\n        observer.updateResult();\n        return unsubscribe;\n      },\n      [observer, isRestoring]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  React.useEffect(() => {\n    observer.setOptions(defaultedOptions, { listeners: false });\n  }, [defaultedOptions, observer]);\n  if (shouldSuspend(defaultedOptions, result)) {\n    throw fetchOptimistic(defaultedOptions, observer, errorResetBoundary);\n  }\n  if (getHasError({\n    result,\n    errorResetBoundary,\n    throwOnError: defaultedOptions.throwOnError,\n    query: client.getQueryCache().get(defaultedOptions.queryHash)\n  })) {\n    throw result.error;\n  }\n  ;\n  client.getDefaultOptions().queries?._experimental_afterQuery?.(\n    defaultedOptions,\n    result\n  );\n  return !defaultedOptions.notifyOnChangeProps ? observer.trackResult(result) : result;\n}\nexport {\n  useBaseQuery\n};\n//# sourceMappingURL=useBaseQuery.js.map","import { ApiClient } from '@shared/infrastructure/http/ApiClient';\n\nexport type Stats = {\n  hasIngestedData: boolean;\n  oldestProfileTime: number;\n  newestProfileTime: number;\n};\n\nclass StatsApiClient extends ApiClient {\n  async get(): Promise<Stats> {\n    const response = await this.fetch('/querier.v1.QuerierService/GetProfileStats', {\n      method: 'POST',\n      body: JSON.stringify({}),\n    });\n\n    const json = await response.json();\n\n    return {\n      hasIngestedData: json.dataIngested,\n      oldestProfileTime: Number(json.oldestProfileTime),\n      newestProfileTime: Number(json.newestProfileTime),\n    };\n  }\n}\n\nexport const statsApiClient = new StatsApiClient();\n","import { css } from '@emotion/css';\nimport { formattedValueToString, getValueFormat, GrafanaTheme2 } from '@grafana/data';\nimport { Divider, IconButton, styleMixins, Toggletip, useStyles2 } from '@grafana/ui';\nimport React, { useMemo } from 'react';\n\nimport { QueryAnalysisResult } from './domain/QueryAnalysis';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  row: css({\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n  }),\n  headerColumn: css({\n    display: 'flex',\n    flexDirection: 'column',\n    minWidth: '120px',\n    alignItems: 'start',\n  }),\n  column: css({\n    display: 'flex',\n    flexDirection: 'column',\n    minWidth: '120px',\n    alignItems: 'end',\n  }),\n  tooltip: css({\n    display: 'flex',\n    color: theme.colors.text.secondary,\n    fontSize: theme.typography.bodySmall.fontSize,\n  }),\n  contentWithIcon: css({\n    display: 'none',\n\n    [`@media ${styleMixins.mediaUp(theme.v1.breakpoints.sm)}`]: {\n      display: 'block',\n    },\n  }),\n});\n\ntype QueryAnalysisTooltipProps = {\n  data: QueryAnalysisResult;\n};\n\nconst formatSize = (size: number) => formattedValueToString(getValueFormat('decbytes')(size));\n\nconst formatCount = (count: number) => formattedValueToString(getValueFormat('short')(count));\n\nexport function QueryAnalysisTooltip(props: QueryAnalysisTooltipProps) {\n  const styles = useStyles2(getStyles);\n  const { data } = props;\n  const totalBytesInTimeRange = formatSize(data.queryImpact.totalBytesInTimeRange);\n\n  const queryAnalysisTooltip = useMemo(() => {\n    return (\n      <div data-testid=\"queryAnalysis-popup\">\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Data in time range</div>\n          <div className={styles.column}>{totalBytesInTimeRange}</div>\n          <div className={styles.column}>&nbsp;</div>\n        </div>\n        {data.queryImpact.totalQueriedSeries !== undefined && (\n          <div className={styles.row}>\n            <div className={styles.headerColumn}>Series in query</div>\n            <div className={styles.column}>{formatCount(data.queryImpact.totalQueriedSeries)}</div>\n            <div className={styles.column}>&nbsp;</div>\n          </div>\n        )}\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Deduplication</div>\n          <div className={styles.column}>{data.queryImpact.deduplicationNeeded ? 'yes' : 'no'}</div>\n          <div className={styles.column}>&nbsp;</div>\n        </div>\n        <Divider />\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>&nbsp;</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              <strong>{s.componentType}</strong>\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Replicas</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {s.componentCount || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Blocks</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatCount(s.blockCount) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Series</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatCount(s.seriesCount) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Profiles</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatCount(s.profileCount) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Samples</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatCount(s.sampleCount) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>&nbsp;</div>\n          <div className={styles.column}>&nbsp;</div>\n          <div className={styles.column}>&nbsp;</div>\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Index Store</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatSize(s.indexBytes) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Profiles Store</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatSize(s.profileBytes) || '/'}\n            </div>\n          ))}\n        </div>\n        <div className={styles.row}>\n          <div className={styles.headerColumn}>Symbols Store</div>\n          {data.queryScopes.map((s, i) => (\n            <div key={i} className={styles.column}>\n              {formatSize(s.symbolBytes) || '/'}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }, [data, styles, totalBytesInTimeRange]);\n\n  return (\n    <>\n      {data.queryImpact.totalBytesInTimeRange !== undefined ? (\n        <Toggletip content={queryAnalysisTooltip} fitContent={true}>\n          <div className={styles.tooltip} data-testid=\"queryAnalysis-tooltip\">\n            <span className={styles.contentWithIcon}>Stored data in time range: {totalBytesInTimeRange}</span>\n            &nbsp;\n            <IconButton name=\"database\" aria-label=\"Query info\" />\n          </div>\n        </Toggletip>\n      ) : null}\n    </>\n  );\n}\n","import PropTypes from 'prop-types';\nimport withSideEffect from 'react-side-effect';\nimport isEqual from 'react-fast-compare';\nimport React from 'react';\nimport objectAssign from 'object-assign';\n\nvar ATTRIBUTE_NAMES = {\n    BODY: \"bodyAttributes\",\n    HTML: \"htmlAttributes\",\n    TITLE: \"titleAttributes\"\n};\n\nvar TAG_NAMES = {\n    BASE: \"base\",\n    BODY: \"body\",\n    HEAD: \"head\",\n    HTML: \"html\",\n    LINK: \"link\",\n    META: \"meta\",\n    NOSCRIPT: \"noscript\",\n    SCRIPT: \"script\",\n    STYLE: \"style\",\n    TITLE: \"title\"\n};\n\nvar VALID_TAG_NAMES = Object.keys(TAG_NAMES).map(function (name) {\n    return TAG_NAMES[name];\n});\n\nvar TAG_PROPERTIES = {\n    CHARSET: \"charset\",\n    CSS_TEXT: \"cssText\",\n    HREF: \"href\",\n    HTTPEQUIV: \"http-equiv\",\n    INNER_HTML: \"innerHTML\",\n    ITEM_PROP: \"itemprop\",\n    NAME: \"name\",\n    PROPERTY: \"property\",\n    REL: \"rel\",\n    SRC: \"src\",\n    TARGET: \"target\"\n};\n\nvar REACT_TAG_MAP = {\n    accesskey: \"accessKey\",\n    charset: \"charSet\",\n    class: \"className\",\n    contenteditable: \"contentEditable\",\n    contextmenu: \"contextMenu\",\n    \"http-equiv\": \"httpEquiv\",\n    itemprop: \"itemProp\",\n    tabindex: \"tabIndex\"\n};\n\nvar HELMET_PROPS = {\n    DEFAULT_TITLE: \"defaultTitle\",\n    DEFER: \"defer\",\n    ENCODE_SPECIAL_CHARACTERS: \"encodeSpecialCharacters\",\n    ON_CHANGE_CLIENT_STATE: \"onChangeClientState\",\n    TITLE_TEMPLATE: \"titleTemplate\"\n};\n\nvar HTML_TAG_MAP = Object.keys(REACT_TAG_MAP).reduce(function (obj, key) {\n    obj[REACT_TAG_MAP[key]] = key;\n    return obj;\n}, {});\n\nvar SELF_CLOSING_TAGS = [TAG_NAMES.NOSCRIPT, TAG_NAMES.SCRIPT, TAG_NAMES.STYLE];\n\nvar HELMET_ATTRIBUTE = \"data-react-helmet\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar encodeSpecialCharacters = function encodeSpecialCharacters(str) {\n    var encode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n    if (encode === false) {\n        return String(str);\n    }\n\n    return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#x27;\");\n};\n\nvar getTitleFromPropsList = function getTitleFromPropsList(propsList) {\n    var innermostTitle = getInnermostProperty(propsList, TAG_NAMES.TITLE);\n    var innermostTemplate = getInnermostProperty(propsList, HELMET_PROPS.TITLE_TEMPLATE);\n\n    if (innermostTemplate && innermostTitle) {\n        // use function arg to avoid need to escape $ characters\n        return innermostTemplate.replace(/%s/g, function () {\n            return Array.isArray(innermostTitle) ? innermostTitle.join(\"\") : innermostTitle;\n        });\n    }\n\n    var innermostDefaultTitle = getInnermostProperty(propsList, HELMET_PROPS.DEFAULT_TITLE);\n\n    return innermostTitle || innermostDefaultTitle || undefined;\n};\n\nvar getOnChangeClientState = function getOnChangeClientState(propsList) {\n    return getInnermostProperty(propsList, HELMET_PROPS.ON_CHANGE_CLIENT_STATE) || function () {};\n};\n\nvar getAttributesFromPropsList = function getAttributesFromPropsList(tagType, propsList) {\n    return propsList.filter(function (props) {\n        return typeof props[tagType] !== \"undefined\";\n    }).map(function (props) {\n        return props[tagType];\n    }).reduce(function (tagAttrs, current) {\n        return _extends({}, tagAttrs, current);\n    }, {});\n};\n\nvar getBaseTagFromPropsList = function getBaseTagFromPropsList(primaryAttributes, propsList) {\n    return propsList.filter(function (props) {\n        return typeof props[TAG_NAMES.BASE] !== \"undefined\";\n    }).map(function (props) {\n        return props[TAG_NAMES.BASE];\n    }).reverse().reduce(function (innermostBaseTag, tag) {\n        if (!innermostBaseTag.length) {\n            var keys = Object.keys(tag);\n\n            for (var i = 0; i < keys.length; i++) {\n                var attributeKey = keys[i];\n                var lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n                if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && tag[lowerCaseAttributeKey]) {\n                    return innermostBaseTag.concat(tag);\n                }\n            }\n        }\n\n        return innermostBaseTag;\n    }, []);\n};\n\nvar getTagsFromPropsList = function getTagsFromPropsList(tagName, primaryAttributes, propsList) {\n    // Calculate list of tags, giving priority innermost component (end of the propslist)\n    var approvedSeenTags = {};\n\n    return propsList.filter(function (props) {\n        if (Array.isArray(props[tagName])) {\n            return true;\n        }\n        if (typeof props[tagName] !== \"undefined\") {\n            warn(\"Helmet: \" + tagName + \" should be of type \\\"Array\\\". Instead found type \\\"\" + _typeof(props[tagName]) + \"\\\"\");\n        }\n        return false;\n    }).map(function (props) {\n        return props[tagName];\n    }).reverse().reduce(function (approvedTags, instanceTags) {\n        var instanceSeenTags = {};\n\n        instanceTags.filter(function (tag) {\n            var primaryAttributeKey = void 0;\n            var keys = Object.keys(tag);\n            for (var i = 0; i < keys.length; i++) {\n                var attributeKey = keys[i];\n                var lowerCaseAttributeKey = attributeKey.toLowerCase();\n\n                // Special rule with link tags, since rel and href are both primary tags, rel takes priority\n                if (primaryAttributes.indexOf(lowerCaseAttributeKey) !== -1 && !(primaryAttributeKey === TAG_PROPERTIES.REL && tag[primaryAttributeKey].toLowerCase() === \"canonical\") && !(lowerCaseAttributeKey === TAG_PROPERTIES.REL && tag[lowerCaseAttributeKey].toLowerCase() === \"stylesheet\")) {\n                    primaryAttributeKey = lowerCaseAttributeKey;\n                }\n                // Special case for innerHTML which doesn't work lowercased\n                if (primaryAttributes.indexOf(attributeKey) !== -1 && (attributeKey === TAG_PROPERTIES.INNER_HTML || attributeKey === TAG_PROPERTIES.CSS_TEXT || attributeKey === TAG_PROPERTIES.ITEM_PROP)) {\n                    primaryAttributeKey = attributeKey;\n                }\n            }\n\n            if (!primaryAttributeKey || !tag[primaryAttributeKey]) {\n                return false;\n            }\n\n            var value = tag[primaryAttributeKey].toLowerCase();\n\n            if (!approvedSeenTags[primaryAttributeKey]) {\n                approvedSeenTags[primaryAttributeKey] = {};\n            }\n\n            if (!instanceSeenTags[primaryAttributeKey]) {\n                instanceSeenTags[primaryAttributeKey] = {};\n            }\n\n            if (!approvedSeenTags[primaryAttributeKey][value]) {\n                instanceSeenTags[primaryAttributeKey][value] = true;\n                return true;\n            }\n\n            return false;\n        }).reverse().forEach(function (tag) {\n            return approvedTags.push(tag);\n        });\n\n        // Update seen tags with tags from this instance\n        var keys = Object.keys(instanceSeenTags);\n        for (var i = 0; i < keys.length; i++) {\n            var attributeKey = keys[i];\n            var tagUnion = objectAssign({}, approvedSeenTags[attributeKey], instanceSeenTags[attributeKey]);\n\n            approvedSeenTags[attributeKey] = tagUnion;\n        }\n\n        return approvedTags;\n    }, []).reverse();\n};\n\nvar getInnermostProperty = function getInnermostProperty(propsList, property) {\n    for (var i = propsList.length - 1; i >= 0; i--) {\n        var props = propsList[i];\n\n        if (props.hasOwnProperty(property)) {\n            return props[property];\n        }\n    }\n\n    return null;\n};\n\nvar reducePropsToState = function reducePropsToState(propsList) {\n    return {\n        baseTag: getBaseTagFromPropsList([TAG_PROPERTIES.HREF, TAG_PROPERTIES.TARGET], propsList),\n        bodyAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.BODY, propsList),\n        defer: getInnermostProperty(propsList, HELMET_PROPS.DEFER),\n        encode: getInnermostProperty(propsList, HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),\n        htmlAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.HTML, propsList),\n        linkTags: getTagsFromPropsList(TAG_NAMES.LINK, [TAG_PROPERTIES.REL, TAG_PROPERTIES.HREF], propsList),\n        metaTags: getTagsFromPropsList(TAG_NAMES.META, [TAG_PROPERTIES.NAME, TAG_PROPERTIES.CHARSET, TAG_PROPERTIES.HTTPEQUIV, TAG_PROPERTIES.PROPERTY, TAG_PROPERTIES.ITEM_PROP], propsList),\n        noscriptTags: getTagsFromPropsList(TAG_NAMES.NOSCRIPT, [TAG_PROPERTIES.INNER_HTML], propsList),\n        onChangeClientState: getOnChangeClientState(propsList),\n        scriptTags: getTagsFromPropsList(TAG_NAMES.SCRIPT, [TAG_PROPERTIES.SRC, TAG_PROPERTIES.INNER_HTML], propsList),\n        styleTags: getTagsFromPropsList(TAG_NAMES.STYLE, [TAG_PROPERTIES.CSS_TEXT], propsList),\n        title: getTitleFromPropsList(propsList),\n        titleAttributes: getAttributesFromPropsList(ATTRIBUTE_NAMES.TITLE, propsList)\n    };\n};\n\nvar rafPolyfill = function () {\n    var clock = Date.now();\n\n    return function (callback) {\n        var currentTime = Date.now();\n\n        if (currentTime - clock > 16) {\n            clock = currentTime;\n            callback(currentTime);\n        } else {\n            setTimeout(function () {\n                rafPolyfill(callback);\n            }, 0);\n        }\n    };\n}();\n\nvar cafPolyfill = function cafPolyfill(id) {\n    return clearTimeout(id);\n};\n\nvar requestAnimationFrame = typeof window !== \"undefined\" ? window.requestAnimationFrame && window.requestAnimationFrame.bind(window) || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || rafPolyfill : global.requestAnimationFrame || rafPolyfill;\n\nvar cancelAnimationFrame = typeof window !== \"undefined\" ? window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || cafPolyfill : global.cancelAnimationFrame || cafPolyfill;\n\nvar warn = function warn(msg) {\n    return console && typeof console.warn === \"function\" && console.warn(msg);\n};\n\nvar _helmetCallback = null;\n\nvar handleClientStateChange = function handleClientStateChange(newState) {\n    if (_helmetCallback) {\n        cancelAnimationFrame(_helmetCallback);\n    }\n\n    if (newState.defer) {\n        _helmetCallback = requestAnimationFrame(function () {\n            commitTagChanges(newState, function () {\n                _helmetCallback = null;\n            });\n        });\n    } else {\n        commitTagChanges(newState);\n        _helmetCallback = null;\n    }\n};\n\nvar commitTagChanges = function commitTagChanges(newState, cb) {\n    var baseTag = newState.baseTag,\n        bodyAttributes = newState.bodyAttributes,\n        htmlAttributes = newState.htmlAttributes,\n        linkTags = newState.linkTags,\n        metaTags = newState.metaTags,\n        noscriptTags = newState.noscriptTags,\n        onChangeClientState = newState.onChangeClientState,\n        scriptTags = newState.scriptTags,\n        styleTags = newState.styleTags,\n        title = newState.title,\n        titleAttributes = newState.titleAttributes;\n\n    updateAttributes(TAG_NAMES.BODY, bodyAttributes);\n    updateAttributes(TAG_NAMES.HTML, htmlAttributes);\n\n    updateTitle(title, titleAttributes);\n\n    var tagUpdates = {\n        baseTag: updateTags(TAG_NAMES.BASE, baseTag),\n        linkTags: updateTags(TAG_NAMES.LINK, linkTags),\n        metaTags: updateTags(TAG_NAMES.META, metaTags),\n        noscriptTags: updateTags(TAG_NAMES.NOSCRIPT, noscriptTags),\n        scriptTags: updateTags(TAG_NAMES.SCRIPT, scriptTags),\n        styleTags: updateTags(TAG_NAMES.STYLE, styleTags)\n    };\n\n    var addedTags = {};\n    var removedTags = {};\n\n    Object.keys(tagUpdates).forEach(function (tagType) {\n        var _tagUpdates$tagType = tagUpdates[tagType],\n            newTags = _tagUpdates$tagType.newTags,\n            oldTags = _tagUpdates$tagType.oldTags;\n\n\n        if (newTags.length) {\n            addedTags[tagType] = newTags;\n        }\n        if (oldTags.length) {\n            removedTags[tagType] = tagUpdates[tagType].oldTags;\n        }\n    });\n\n    cb && cb();\n\n    onChangeClientState(newState, addedTags, removedTags);\n};\n\nvar flattenArray = function flattenArray(possibleArray) {\n    return Array.isArray(possibleArray) ? possibleArray.join(\"\") : possibleArray;\n};\n\nvar updateTitle = function updateTitle(title, attributes) {\n    if (typeof title !== \"undefined\" && document.title !== title) {\n        document.title = flattenArray(title);\n    }\n\n    updateAttributes(TAG_NAMES.TITLE, attributes);\n};\n\nvar updateAttributes = function updateAttributes(tagName, attributes) {\n    var elementTag = document.getElementsByTagName(tagName)[0];\n\n    if (!elementTag) {\n        return;\n    }\n\n    var helmetAttributeString = elementTag.getAttribute(HELMET_ATTRIBUTE);\n    var helmetAttributes = helmetAttributeString ? helmetAttributeString.split(\",\") : [];\n    var attributesToRemove = [].concat(helmetAttributes);\n    var attributeKeys = Object.keys(attributes);\n\n    for (var i = 0; i < attributeKeys.length; i++) {\n        var attribute = attributeKeys[i];\n        var value = attributes[attribute] || \"\";\n\n        if (elementTag.getAttribute(attribute) !== value) {\n            elementTag.setAttribute(attribute, value);\n        }\n\n        if (helmetAttributes.indexOf(attribute) === -1) {\n            helmetAttributes.push(attribute);\n        }\n\n        var indexToSave = attributesToRemove.indexOf(attribute);\n        if (indexToSave !== -1) {\n            attributesToRemove.splice(indexToSave, 1);\n        }\n    }\n\n    for (var _i = attributesToRemove.length - 1; _i >= 0; _i--) {\n        elementTag.removeAttribute(attributesToRemove[_i]);\n    }\n\n    if (helmetAttributes.length === attributesToRemove.length) {\n        elementTag.removeAttribute(HELMET_ATTRIBUTE);\n    } else if (elementTag.getAttribute(HELMET_ATTRIBUTE) !== attributeKeys.join(\",\")) {\n        elementTag.setAttribute(HELMET_ATTRIBUTE, attributeKeys.join(\",\"));\n    }\n};\n\nvar updateTags = function updateTags(type, tags) {\n    var headElement = document.head || document.querySelector(TAG_NAMES.HEAD);\n    var tagNodes = headElement.querySelectorAll(type + \"[\" + HELMET_ATTRIBUTE + \"]\");\n    var oldTags = Array.prototype.slice.call(tagNodes);\n    var newTags = [];\n    var indexToDelete = void 0;\n\n    if (tags && tags.length) {\n        tags.forEach(function (tag) {\n            var newElement = document.createElement(type);\n\n            for (var attribute in tag) {\n                if (tag.hasOwnProperty(attribute)) {\n                    if (attribute === TAG_PROPERTIES.INNER_HTML) {\n                        newElement.innerHTML = tag.innerHTML;\n                    } else if (attribute === TAG_PROPERTIES.CSS_TEXT) {\n                        if (newElement.styleSheet) {\n                            newElement.styleSheet.cssText = tag.cssText;\n                        } else {\n                            newElement.appendChild(document.createTextNode(tag.cssText));\n                        }\n                    } else {\n                        var value = typeof tag[attribute] === \"undefined\" ? \"\" : tag[attribute];\n                        newElement.setAttribute(attribute, value);\n                    }\n                }\n            }\n\n            newElement.setAttribute(HELMET_ATTRIBUTE, \"true\");\n\n            // Remove a duplicate tag from domTagstoRemove, so it isn't cleared.\n            if (oldTags.some(function (existingTag, index) {\n                indexToDelete = index;\n                return newElement.isEqualNode(existingTag);\n            })) {\n                oldTags.splice(indexToDelete, 1);\n            } else {\n                newTags.push(newElement);\n            }\n        });\n    }\n\n    oldTags.forEach(function (tag) {\n        return tag.parentNode.removeChild(tag);\n    });\n    newTags.forEach(function (tag) {\n        return headElement.appendChild(tag);\n    });\n\n    return {\n        oldTags: oldTags,\n        newTags: newTags\n    };\n};\n\nvar generateElementAttributesAsString = function generateElementAttributesAsString(attributes) {\n    return Object.keys(attributes).reduce(function (str, key) {\n        var attr = typeof attributes[key] !== \"undefined\" ? key + \"=\\\"\" + attributes[key] + \"\\\"\" : \"\" + key;\n        return str ? str + \" \" + attr : attr;\n    }, \"\");\n};\n\nvar generateTitleAsString = function generateTitleAsString(type, title, attributes, encode) {\n    var attributeString = generateElementAttributesAsString(attributes);\n    var flattenedTitle = flattenArray(title);\n    return attributeString ? \"<\" + type + \" \" + HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeString + \">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\" : \"<\" + type + \" \" + HELMET_ATTRIBUTE + \"=\\\"true\\\">\" + encodeSpecialCharacters(flattenedTitle, encode) + \"</\" + type + \">\";\n};\n\nvar generateTagsAsString = function generateTagsAsString(type, tags, encode) {\n    return tags.reduce(function (str, tag) {\n        var attributeHtml = Object.keys(tag).filter(function (attribute) {\n            return !(attribute === TAG_PROPERTIES.INNER_HTML || attribute === TAG_PROPERTIES.CSS_TEXT);\n        }).reduce(function (string, attribute) {\n            var attr = typeof tag[attribute] === \"undefined\" ? attribute : attribute + \"=\\\"\" + encodeSpecialCharacters(tag[attribute], encode) + \"\\\"\";\n            return string ? string + \" \" + attr : attr;\n        }, \"\");\n\n        var tagContent = tag.innerHTML || tag.cssText || \"\";\n\n        var isSelfClosing = SELF_CLOSING_TAGS.indexOf(type) === -1;\n\n        return str + \"<\" + type + \" \" + HELMET_ATTRIBUTE + \"=\\\"true\\\" \" + attributeHtml + (isSelfClosing ? \"/>\" : \">\" + tagContent + \"</\" + type + \">\");\n    }, \"\");\n};\n\nvar convertElementAttributestoReactProps = function convertElementAttributestoReactProps(attributes) {\n    var initProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    return Object.keys(attributes).reduce(function (obj, key) {\n        obj[REACT_TAG_MAP[key] || key] = attributes[key];\n        return obj;\n    }, initProps);\n};\n\nvar convertReactPropstoHtmlAttributes = function convertReactPropstoHtmlAttributes(props) {\n    var initAttributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    return Object.keys(props).reduce(function (obj, key) {\n        obj[HTML_TAG_MAP[key] || key] = props[key];\n        return obj;\n    }, initAttributes);\n};\n\nvar generateTitleAsReactComponent = function generateTitleAsReactComponent(type, title, attributes) {\n    var _initProps;\n\n    // assigning into an array to define toString function on it\n    var initProps = (_initProps = {\n        key: title\n    }, _initProps[HELMET_ATTRIBUTE] = true, _initProps);\n    var props = convertElementAttributestoReactProps(attributes, initProps);\n\n    return [React.createElement(TAG_NAMES.TITLE, props, title)];\n};\n\nvar generateTagsAsReactComponent = function generateTagsAsReactComponent(type, tags) {\n    return tags.map(function (tag, i) {\n        var _mappedTag;\n\n        var mappedTag = (_mappedTag = {\n            key: i\n        }, _mappedTag[HELMET_ATTRIBUTE] = true, _mappedTag);\n\n        Object.keys(tag).forEach(function (attribute) {\n            var mappedAttribute = REACT_TAG_MAP[attribute] || attribute;\n\n            if (mappedAttribute === TAG_PROPERTIES.INNER_HTML || mappedAttribute === TAG_PROPERTIES.CSS_TEXT) {\n                var content = tag.innerHTML || tag.cssText;\n                mappedTag.dangerouslySetInnerHTML = { __html: content };\n            } else {\n                mappedTag[mappedAttribute] = tag[attribute];\n            }\n        });\n\n        return React.createElement(type, mappedTag);\n    });\n};\n\nvar getMethodsForTag = function getMethodsForTag(type, tags, encode) {\n    switch (type) {\n        case TAG_NAMES.TITLE:\n            return {\n                toComponent: function toComponent() {\n                    return generateTitleAsReactComponent(type, tags.title, tags.titleAttributes, encode);\n                },\n                toString: function toString() {\n                    return generateTitleAsString(type, tags.title, tags.titleAttributes, encode);\n                }\n            };\n        case ATTRIBUTE_NAMES.BODY:\n        case ATTRIBUTE_NAMES.HTML:\n            return {\n                toComponent: function toComponent() {\n                    return convertElementAttributestoReactProps(tags);\n                },\n                toString: function toString() {\n                    return generateElementAttributesAsString(tags);\n                }\n            };\n        default:\n            return {\n                toComponent: function toComponent() {\n                    return generateTagsAsReactComponent(type, tags);\n                },\n                toString: function toString() {\n                    return generateTagsAsString(type, tags, encode);\n                }\n            };\n    }\n};\n\nvar mapStateOnServer = function mapStateOnServer(_ref) {\n    var baseTag = _ref.baseTag,\n        bodyAttributes = _ref.bodyAttributes,\n        encode = _ref.encode,\n        htmlAttributes = _ref.htmlAttributes,\n        linkTags = _ref.linkTags,\n        metaTags = _ref.metaTags,\n        noscriptTags = _ref.noscriptTags,\n        scriptTags = _ref.scriptTags,\n        styleTags = _ref.styleTags,\n        _ref$title = _ref.title,\n        title = _ref$title === undefined ? \"\" : _ref$title,\n        titleAttributes = _ref.titleAttributes;\n    return {\n        base: getMethodsForTag(TAG_NAMES.BASE, baseTag, encode),\n        bodyAttributes: getMethodsForTag(ATTRIBUTE_NAMES.BODY, bodyAttributes, encode),\n        htmlAttributes: getMethodsForTag(ATTRIBUTE_NAMES.HTML, htmlAttributes, encode),\n        link: getMethodsForTag(TAG_NAMES.LINK, linkTags, encode),\n        meta: getMethodsForTag(TAG_NAMES.META, metaTags, encode),\n        noscript: getMethodsForTag(TAG_NAMES.NOSCRIPT, noscriptTags, encode),\n        script: getMethodsForTag(TAG_NAMES.SCRIPT, scriptTags, encode),\n        style: getMethodsForTag(TAG_NAMES.STYLE, styleTags, encode),\n        title: getMethodsForTag(TAG_NAMES.TITLE, { title: title, titleAttributes: titleAttributes }, encode)\n    };\n};\n\nvar Helmet = function Helmet(Component) {\n    var _class, _temp;\n\n    return _temp = _class = function (_React$Component) {\n        inherits(HelmetWrapper, _React$Component);\n\n        function HelmetWrapper() {\n            classCallCheck(this, HelmetWrapper);\n            return possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n        }\n\n        HelmetWrapper.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n            return !isEqual(this.props, nextProps);\n        };\n\n        HelmetWrapper.prototype.mapNestedChildrenToProps = function mapNestedChildrenToProps(child, nestedChildren) {\n            if (!nestedChildren) {\n                return null;\n            }\n\n            switch (child.type) {\n                case TAG_NAMES.SCRIPT:\n                case TAG_NAMES.NOSCRIPT:\n                    return {\n                        innerHTML: nestedChildren\n                    };\n\n                case TAG_NAMES.STYLE:\n                    return {\n                        cssText: nestedChildren\n                    };\n            }\n\n            throw new Error(\"<\" + child.type + \" /> elements are self-closing and can not contain children. Refer to our API for more information.\");\n        };\n\n        HelmetWrapper.prototype.flattenArrayTypeChildren = function flattenArrayTypeChildren(_ref) {\n            var _babelHelpers$extends;\n\n            var child = _ref.child,\n                arrayTypeChildren = _ref.arrayTypeChildren,\n                newChildProps = _ref.newChildProps,\n                nestedChildren = _ref.nestedChildren;\n\n            return _extends({}, arrayTypeChildren, (_babelHelpers$extends = {}, _babelHelpers$extends[child.type] = [].concat(arrayTypeChildren[child.type] || [], [_extends({}, newChildProps, this.mapNestedChildrenToProps(child, nestedChildren))]), _babelHelpers$extends));\n        };\n\n        HelmetWrapper.prototype.mapObjectTypeChildren = function mapObjectTypeChildren(_ref2) {\n            var _babelHelpers$extends2, _babelHelpers$extends3;\n\n            var child = _ref2.child,\n                newProps = _ref2.newProps,\n                newChildProps = _ref2.newChildProps,\n                nestedChildren = _ref2.nestedChildren;\n\n            switch (child.type) {\n                case TAG_NAMES.TITLE:\n                    return _extends({}, newProps, (_babelHelpers$extends2 = {}, _babelHelpers$extends2[child.type] = nestedChildren, _babelHelpers$extends2.titleAttributes = _extends({}, newChildProps), _babelHelpers$extends2));\n\n                case TAG_NAMES.BODY:\n                    return _extends({}, newProps, {\n                        bodyAttributes: _extends({}, newChildProps)\n                    });\n\n                case TAG_NAMES.HTML:\n                    return _extends({}, newProps, {\n                        htmlAttributes: _extends({}, newChildProps)\n                    });\n            }\n\n            return _extends({}, newProps, (_babelHelpers$extends3 = {}, _babelHelpers$extends3[child.type] = _extends({}, newChildProps), _babelHelpers$extends3));\n        };\n\n        HelmetWrapper.prototype.mapArrayTypeChildrenToProps = function mapArrayTypeChildrenToProps(arrayTypeChildren, newProps) {\n            var newFlattenedProps = _extends({}, newProps);\n\n            Object.keys(arrayTypeChildren).forEach(function (arrayChildName) {\n                var _babelHelpers$extends4;\n\n                newFlattenedProps = _extends({}, newFlattenedProps, (_babelHelpers$extends4 = {}, _babelHelpers$extends4[arrayChildName] = arrayTypeChildren[arrayChildName], _babelHelpers$extends4));\n            });\n\n            return newFlattenedProps;\n        };\n\n        HelmetWrapper.prototype.warnOnInvalidChildren = function warnOnInvalidChildren(child, nestedChildren) {\n            if (process.env.NODE_ENV !== \"production\") {\n                if (!VALID_TAG_NAMES.some(function (name) {\n                    return child.type === name;\n                })) {\n                    if (typeof child.type === \"function\") {\n                        return warn(\"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.\");\n                    }\n\n                    return warn(\"Only elements types \" + VALID_TAG_NAMES.join(\", \") + \" are allowed. Helmet does not support rendering <\" + child.type + \"> elements. Refer to our API for more information.\");\n                }\n\n                if (nestedChildren && typeof nestedChildren !== \"string\" && (!Array.isArray(nestedChildren) || nestedChildren.some(function (nestedChild) {\n                    return typeof nestedChild !== \"string\";\n                }))) {\n                    throw new Error(\"Helmet expects a string as a child of <\" + child.type + \">. Did you forget to wrap your children in braces? ( <\" + child.type + \">{``}</\" + child.type + \"> ) Refer to our API for more information.\");\n                }\n            }\n\n            return true;\n        };\n\n        HelmetWrapper.prototype.mapChildrenToProps = function mapChildrenToProps(children, newProps) {\n            var _this2 = this;\n\n            var arrayTypeChildren = {};\n\n            React.Children.forEach(children, function (child) {\n                if (!child || !child.props) {\n                    return;\n                }\n\n                var _child$props = child.props,\n                    nestedChildren = _child$props.children,\n                    childProps = objectWithoutProperties(_child$props, [\"children\"]);\n\n                var newChildProps = convertReactPropstoHtmlAttributes(childProps);\n\n                _this2.warnOnInvalidChildren(child, nestedChildren);\n\n                switch (child.type) {\n                    case TAG_NAMES.LINK:\n                    case TAG_NAMES.META:\n                    case TAG_NAMES.NOSCRIPT:\n                    case TAG_NAMES.SCRIPT:\n                    case TAG_NAMES.STYLE:\n                        arrayTypeChildren = _this2.flattenArrayTypeChildren({\n                            child: child,\n                            arrayTypeChildren: arrayTypeChildren,\n                            newChildProps: newChildProps,\n                            nestedChildren: nestedChildren\n                        });\n                        break;\n\n                    default:\n                        newProps = _this2.mapObjectTypeChildren({\n                            child: child,\n                            newProps: newProps,\n                            newChildProps: newChildProps,\n                            nestedChildren: nestedChildren\n                        });\n                        break;\n                }\n            });\n\n            newProps = this.mapArrayTypeChildrenToProps(arrayTypeChildren, newProps);\n            return newProps;\n        };\n\n        HelmetWrapper.prototype.render = function render() {\n            var _props = this.props,\n                children = _props.children,\n                props = objectWithoutProperties(_props, [\"children\"]);\n\n            var newProps = _extends({}, props);\n\n            if (children) {\n                newProps = this.mapChildrenToProps(children, newProps);\n            }\n\n            return React.createElement(Component, newProps);\n        };\n\n        createClass(HelmetWrapper, null, [{\n            key: \"canUseDOM\",\n\n\n            // Component.peek comes from react-side-effect:\n            // For testing, you may use a static peek() method available on the returned component.\n            // It lets you get the current state without resetting the mounted instance stack.\n            // Dont use it for anything other than testing.\n\n            /**\n             * @param {Object} base: {\"target\": \"_blank\", \"href\": \"http://mysite.com/\"}\n             * @param {Object} bodyAttributes: {\"className\": \"root\"}\n             * @param {String} defaultTitle: \"Default Title\"\n             * @param {Boolean} defer: true\n             * @param {Boolean} encodeSpecialCharacters: true\n             * @param {Object} htmlAttributes: {\"lang\": \"en\", \"amp\": undefined}\n             * @param {Array} link: [{\"rel\": \"canonical\", \"href\": \"http://mysite.com/example\"}]\n             * @param {Array} meta: [{\"name\": \"description\", \"content\": \"Test description\"}]\n             * @param {Array} noscript: [{\"innerHTML\": \"<img src='http://mysite.com/js/test.js'\"}]\n             * @param {Function} onChangeClientState: \"(newState) => console.log(newState)\"\n             * @param {Array} script: [{\"type\": \"text/javascript\", \"src\": \"http://mysite.com/js/test.js\"}]\n             * @param {Array} style: [{\"type\": \"text/css\", \"cssText\": \"div { display: block; color: blue; }\"}]\n             * @param {String} title: \"Title\"\n             * @param {Object} titleAttributes: {\"itemprop\": \"name\"}\n             * @param {String} titleTemplate: \"MySite.com - %s\"\n             */\n            set: function set$$1(canUseDOM) {\n                Component.canUseDOM = canUseDOM;\n            }\n        }]);\n        return HelmetWrapper;\n    }(React.Component), _class.propTypes = {\n        base: PropTypes.object,\n        bodyAttributes: PropTypes.object,\n        children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]),\n        defaultTitle: PropTypes.string,\n        defer: PropTypes.bool,\n        encodeSpecialCharacters: PropTypes.bool,\n        htmlAttributes: PropTypes.object,\n        link: PropTypes.arrayOf(PropTypes.object),\n        meta: PropTypes.arrayOf(PropTypes.object),\n        noscript: PropTypes.arrayOf(PropTypes.object),\n        onChangeClientState: PropTypes.func,\n        script: PropTypes.arrayOf(PropTypes.object),\n        style: PropTypes.arrayOf(PropTypes.object),\n        title: PropTypes.string,\n        titleAttributes: PropTypes.object,\n        titleTemplate: PropTypes.string\n    }, _class.defaultProps = {\n        defer: true,\n        encodeSpecialCharacters: true\n    }, _class.peek = Component.peek, _class.rewind = function () {\n        var mappedState = Component.rewind();\n        if (!mappedState) {\n            // provide fallback if mappedState is undefined\n            mappedState = mapStateOnServer({\n                baseTag: [],\n                bodyAttributes: {},\n                encodeSpecialCharacters: true,\n                htmlAttributes: {},\n                linkTags: [],\n                metaTags: [],\n                noscriptTags: [],\n                scriptTags: [],\n                styleTags: [],\n                title: \"\",\n                titleAttributes: {}\n            });\n        }\n\n        return mappedState;\n    }, _temp;\n};\n\nvar NullComponent = function NullComponent() {\n    return null;\n};\n\nvar HelmetSideEffects = withSideEffect(reducePropsToState, handleClientStateChange, mapStateOnServer)(NullComponent);\n\nvar HelmetExport = Helmet(HelmetSideEffects);\nHelmetExport.renderStatic = HelmetExport.rewind;\n\nexport default HelmetExport;\nexport { HelmetExport as Helmet };\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, usePluginContext } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { Dropdown, IconButton, Menu, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { GIT_COMMIT } from '../../version';\n\nconst pluginCommitSha: string = GIT_COMMIT;\nconst pluginCommitURL = `https://github.com/grafana/explore-profiles/commit/${pluginCommitSha}`;\n\nconst { buildInfo: grafanaBuildInfo } = config;\n\nfunction InfoMenuHeader() {\n  const styles = useStyles2(getStyles);\n\n  const {\n    meta: {\n      info: { version, updated },\n    },\n  } = usePluginContext();\n\n  return (\n    <div className={styles.menuHeader}>\n      <h5> Explore profiles v{version}</h5>\n      <div className={styles.subTitle}>Last update: {updated}</div>\n    </div>\n  );\n}\n\nfunction InfoMenu() {\n  const isDev = pluginCommitSha === 'dev';\n  const shortCommitSha = isDev ? pluginCommitSha : pluginCommitSha.slice(0, 8);\n\n  return (\n    <Menu header={<InfoMenuHeader />}>\n      <Menu.Item\n        label={`Commit SHA: ${shortCommitSha}`}\n        icon=\"github\"\n        onClick={() => window.open(pluginCommitURL)}\n        disabled={isDev}\n      />\n      <Menu.Item\n        label=\"Changelog\"\n        icon=\"list-ul\"\n        onClick={() => window.open('https://github.com/grafana/explore-profiles/blob/main/CHANGELOG.md')}\n      />\n      <Menu.Item\n        label=\"Contribute\"\n        icon=\"external-link-alt\"\n        onClick={() => window.open('https://github.com/grafana/explore-profiles/blob/main/docs/CONTRIBUTING.md')}\n      />\n      <Menu.Item\n        label=\"Documentation\"\n        icon=\"document-info\"\n        onClick={() => window.open('https://grafana.com/docs/grafana/latest/explore/simplified-exploration/profiles')}\n      />\n      <Menu.Item\n        label=\"Report an issue\"\n        icon=\"bug\"\n        onClick={() => window.open('https://github.com/grafana/explore-profiles/issues/new?template=bug_report.md')}\n      />\n      <Menu.Divider />\n      <Menu.Item\n        label={`Grafana ${grafanaBuildInfo.edition} v${grafanaBuildInfo.version} (${grafanaBuildInfo.env})`}\n        icon=\"github\"\n        onClick={() => window.open(`https://github.com/grafana/grafana/commit/${grafanaBuildInfo.commit}`)}\n      />\n    </Menu>\n  );\n}\n\nexport function PluginInfo() {\n  return (\n    <Dropdown overlay={() => <InfoMenu />} placement=\"bottom-end\">\n      <IconButton name=\"info-circle\" aria-label=\"Plugin info\" title=\"Plugin info\" />\n    </Dropdown>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  menuHeader: css`\n    padding: ${theme.spacing(0.5, 1)};\n    white-space: nowrap;\n  `,\n  subTitle: css`\n    color: ${theme.colors.text.secondary};\n    font-size: ${theme.typography.bodySmall.fontSize};\n  `,\n});\n","import { css, cx } from '@emotion/css';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\ntype PyroscopeLogoProps = {\n  size: 'small' | 'large';\n};\n\nfunction PyroscopeLogoComponent({ size }: PyroscopeLogoProps) {\n  const styles = useStyles2(getStyles);\n  return <img className={cx(styles.logo, size)} src=\"public/plugins/grafana-pyroscope-app/img/logo.svg\" />;\n}\n\nexport const PyroscopeLogo = React.memo(PyroscopeLogoComponent);\n\nconst getStyles = () => ({\n  logo: css`\n    &.small {\n      width: 16px;\n      height: 16px;\n      margin-right: 4px;\n      position: relative;\n      top: -2px;\n    }\n\n    &.large {\n      width: 40px;\n      height: 40px;\n    }\n  `,\n});\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Stack, useStyles2 } from '@grafana/ui';\nimport { QueryAnalysisResult } from '@shared/components/QueryAnalysisTooltip/domain/QueryAnalysis';\nimport { QueryAnalysisTooltip } from '@shared/components/QueryAnalysisTooltip/QueryAnalysisTooltip';\nimport React, { memo, ReactNode } from 'react';\nimport { Helmet } from 'react-helmet';\n\nimport { PluginInfo } from './PluginInfo';\nimport { PyroscopeLogo } from './PyroscopeLogo';\n\ntype PageTitleProps = {\n  title: ReactNode;\n  queryAnalysis?: QueryAnalysisResult;\n};\n\nfunction PageTitleComponent({ title, queryAnalysis }: PageTitleProps) {\n  const styles = useStyles2(getStyles);\n  const fullTitle = typeof title === 'string' ? `${title} | Pyroscope` : 'Pyroscope';\n\n  return (\n    <>\n      <Helmet>\n        <title>{fullTitle}</title>\n      </Helmet>\n      <div className={styles.titleContainer}>\n        <Stack justifyContent=\"space-between\">\n          <div>\n            <PyroscopeLogo size=\"large\" />\n            <h1 className={styles.title} data-testid=\"page-title\">\n              {title}\n            </h1>\n          </div>\n          <div className={styles.infoArea}>\n            <PluginInfo />\n            {queryAnalysis ? <QueryAnalysisTooltip data={queryAnalysis} /> : null}\n          </div>\n        </Stack>\n      </div>\n    </>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  titleContainer: css`\n    height: ${theme.spacing(5)};\n    line-height: ${theme.spacing(5)};\n    margin-bottom: ${theme.spacing(3)};\n  `,\n  title: css`\n    font-size: ${theme.typography.h2.fontSize};\n    display: inline-block;\n    margin: 0;\n    position: relative;\n    top: 10px;\n    left: ${theme.spacing(1)};\n  `,\n  infoArea: css`\n    align-self: end;\n    margin-bottom: 0;\n    line-height: 20px;\n    text-align: right;\n  `,\n});\n\nexport const PageTitle = memo(PageTitleComponent);\n","import { PageLayoutType } from '@grafana/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { Icon } from '@grafana/ui';\nimport { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nexport function EmptyLoadingPage() {\n  return (\n    <PluginPage layout={PageLayoutType.Canvas}>\n      <PageTitle\n        title={\n          <span>\n            Loading... <Icon name=\"fa fa-spinner\" />\n          </span>\n        }\n      />\n    </PluginPage>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Icon, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  link: css`\n    color: ${theme.colors.text.link};\n    &:hover {\n      text-decoration: underline;\n    }\n  `,\n});\n\nexport function StyledLink({ href, children }: { href: string; children: React.ReactNode }) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <a className={styles.link} href={href} target=\"_blank\" rel=\"noreferrer\">\n      {children} {<Icon name=\"external-link-alt\" />}\n    </a>\n  );\n}\n","import { PageLayoutType } from '@grafana/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { Alert } from '@grafana/ui';\nimport { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nimport { StyledLink } from './StyledLink';\n\nexport function NoDataSourcePage() {\n  return (\n    <PluginPage layout={PageLayoutType.Canvas}>\n      <PageTitle title=\"Explore Profiles\" />\n\n      <Alert severity=\"error\" title=\"Missing Pyroscope data source!\">\n        This plugin requires a Pyroscope data source. Please{' '}\n        <StyledLink href=\"/connections/datasources/new\">add and configure a Pyroscope data source</StyledLink> to your\n        Grafana instance.\n      </Alert>\n    </PluginPage>\n  );\n}\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport DecreaseLatency from '@img/decrease-latency.png';\nimport HeroImageExploreProfiles from '@img/hero-image-explore-profiles.png';\nimport HeroImage from '@img/hero-image.png';\nimport ReduceCosts from '@img/reduce-costs.png';\nimport ResolveIncidents from '@img/resolve-incidents.png';\nimport React from 'react';\n\nimport { useOnboardingModal } from '../domain/useOnboardingModal';\nimport { StyledLink } from './StyledLink';\n\n/** This was extracted from the former `styles.module.scss` */\n// TODO Use more spacial and color parameters from `theme`\nconst getStyles = (theme: GrafanaTheme2) => ({\n  onboardingRow: css`\n    background: ${theme.colors.background.secondary};\n    display: flex;\n    margin-top: 16px;\n    gap: 20px;\n    padding: 20px;\n    margin-bottom: 2.5rem;\n  `,\n  onboardingParagraph: css`\n    padding: 20px 64px;\n    text-align: center;\n    line-height: 2;\n    flex: 1;\n    margin: 0;\n  `,\n  onboardingPanel: css`\n    flex: 1;\n    display: flex;\n    flex-flow: column wrap;\n    -webkit-box-align: center;\n    align-items: center;\n    margin-top: 16px;\n    text-align: center;\n  `,\n  onboardingPanelHeader: css`\n    line-height: 1.5;\n    margin-bottom: 1em;\n  `,\n  onboardingPanelImage: css`\n    width: 5rem;\n    margin-bottom: 1em;\n  `,\n  hero: css`\n    display: flex;\n    flex-direction: row;\n  `,\n  heroTitles: css`\n    flex: 1;\n  `,\n  heroImage: css`\n    width: 40%;\n    margin-left: 16px;\n    margin-top: 16px;\n    margin-bottom: 16px;\n    border-radius: 3px;\n  `,\n  onboardingPanelNumber: css`\n    color: rgb(236, 109, 19);\n    text-align: center;\n    display: grid;\n    place-items: center;\n    background-image: linear-gradient(135deg, currentcolor, 75%, rgb(204, 204, 220));\n    border-radius: 100%;\n    font-size: 2.5rem;\n    line-height: 5rem;\n    height: 5rem;\n    width: 5rem;\n    margin-bottom: 1em;\n  `,\n  // TODO use theme.colors\n  color2: css`\n    color: rgb(190, 85, 190);\n  `,\n  // TODO use theme.colors\n  color3: css`\n    color: rgb(126, 108, 218);\n  `,\n  // FIXME use theme.colors\n  onboardingPanelNumberSpan: css`\n    color: rgb(220, 220, 220);\n  `,\n  onboardingPanelDescription: css`\n    text-align: justify;\n    text-align: center;\n    line-height: 1.66;\n    margin-top: 0;\n  `,\n  title: css`\n    margin-bottom: 0.5em;\n    line-height: 1.5;\n  `,\n  subtitle: css`\n    margin-bottom: 1em;\n    line-height: 1.5;\n    font-size: 1.25rem;\n  `,\n});\n\nexport function OnboardingModal() {\n  const styles = useStyles2(getStyles);\n  const { data } = useOnboardingModal();\n\n  return (\n    <div data-testid=\"onboarding-modal\">\n      <div className={styles.hero} data-testid=\"hero\">\n        <div className={styles.heroTitles}>\n          <h1 className={styles.title}>Welcome to {data.isCloud ? 'Grafana Cloud Profiles' : 'Explore Profiles'}</h1>\n          <h2 className={styles.subtitle}>\n            Optimize infrastructure spend, simplify debugging, and enhance application performance\n          </h2>\n          {/* <Button>Continue to Pyroscope</Button> */}\n        </div>\n        <img src={data.isCloud ? HeroImage : HeroImageExploreProfiles} className={styles.heroImage}></img>\n      </div>\n\n      <div data-testid=\"what-you-can-do\">\n        <h3>What You Can Do</h3>\n        <div className={styles.onboardingRow}>\n          <div className={styles.onboardingPanel}>\n            <img className={styles.onboardingPanelImage} src={ReduceCosts}></img>\n            <h3 className={styles.onboardingPanelHeader}>Reduce Costs</h3>\n            <p className={styles.onboardingPanelDescription}>\n              Spot CPU spikes, memory leaks, and other inefficiencies with code-level visibility into resource usage.\n              Teams can then optimize their code and lower infrastructure costs.\n            </p>\n          </div>\n          <div className={styles.onboardingPanel}>\n            <img className={styles.onboardingPanelImage} src={DecreaseLatency}></img>\n            <h3 className={styles.onboardingPanelHeader}>Decrease Latency</h3>\n            <p className={styles.onboardingPanelDescription}>\n              Maintain high speed and efficiency and improve application performance. In a competitive digital world,\n              decreasing latency translates to increasing revenue.\n            </p>\n          </div>\n          <div className={styles.onboardingPanel}>\n            <img className={styles.onboardingPanelImage} src={ResolveIncidents}></img>\n            <h3 className={styles.onboardingPanelHeader}>Resolve Incidents Faster</h3>\n            <p className={styles.onboardingPanelDescription}>\n              Cut down the mean time to resolution (MTTR) by correlating continuous profiling data with metrics, logs,\n              and traces to quickly identify the root cause of any issue.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      <div data-testid=\"how-to-get-started\">\n        <h3>How to Get Started</h3>\n        <div className={styles.onboardingRow}>\n          {data.isCloud ? (\n            <>\n              <div className={styles.onboardingPanel}>\n                <div className={styles.onboardingPanelNumber}>\n                  <span className={styles.onboardingPanelNumberSpan}>1</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Add Profiling to Your Application</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Use{' '}\n                  <StyledLink href=\"https://grafana.com/docs/pyroscope/latest/configure-client/grafana-alloy/\">\n                    Grafana Alloy\n                  </StyledLink>{' '}\n                  or{' '}\n                  <StyledLink href=\"https://grafana.com/docs/pyroscope/next/configure-client/language-sdks/\">\n                    Pyroscope SDKs\n                  </StyledLink>{' '}\n                  to push profiles from your applications to Grafana Cloud.\n                </p>\n              </div>\n              <div className={styles.onboardingPanel}>\n                <div className={cx(styles.onboardingPanelNumber, styles.color2)}>\n                  <span className={styles.onboardingPanelNumberSpan}>2</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Configure Your Applications</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Go to <StyledLink href={data.settingsUrl}>Grafana Cloud Stack settings</StyledLink> to find your\n                  Grafana Cloud Credentials.\n                </p>\n              </div>\n              <div className={styles.onboardingPanel}>\n                <div className={cx(styles.onboardingPanelNumber, styles.color3)}>\n                  <span className={styles.onboardingPanelNumberSpan}>3</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Start Getting Performance Insights</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Once you&apos;re done with initial setup, refresh this page to see your profiling data.\n                </p>\n              </div>\n            </>\n          ) : (\n            <>\n              <div className={styles.onboardingPanel}>\n                <div className={styles.onboardingPanelNumber}>\n                  <span className={styles.onboardingPanelNumberSpan}>1</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Set Up Your Pyroscope Server</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Install <StyledLink href=\"https://grafana.com/docs/pyroscope/latest/\">Pyroscope Server</StyledLink> on\n                  your infrastructure. Or if you want to use a hosted service, go to{' '}\n                  <StyledLink href={data.settingsUrl}>Grafana Cloud Stack settings</StyledLink> to find your Grafana\n                  Cloud Credentials.\n                </p>\n              </div>\n              <div className={styles.onboardingPanel}>\n                <div className={cx(styles.onboardingPanelNumber, styles.color2)}>\n                  <span className={styles.onboardingPanelNumberSpan}>2</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Configure Grafana</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Add a new <StyledLink href=\"/connections/datasources/new\">Pyroscope datasource</StyledLink>. Use your\n                  Pyroscope server URL and appropriate security credentials if you use Grafana Cloud Profiles.\n                </p>\n              </div>\n              <div className={styles.onboardingPanel}>\n                <div className={cx(styles.onboardingPanelNumber, styles.color3)}>\n                  <span className={styles.onboardingPanelNumberSpan}>3</span>\n                </div>\n                <h3 className={styles.onboardingPanelHeader}>Add Profiling to Your Application</h3>\n                <p className={styles.onboardingPanelDescription}>\n                  Use{' '}\n                  <StyledLink href=\"https://grafana.com/docs/pyroscope/latest/configure-client/grafana-alloy/\">\n                    Grafana Alloy\n                  </StyledLink>{' '}\n                  or{' '}\n                  <StyledLink href=\"https://grafana.com/docs/pyroscope/next/configure-client/language-sdks/\">\n                    Pyroscope SDKs\n                  </StyledLink>{' '}\n                  to push profiles from your applications to Grafana Cloud.\n                </p>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      {data.isCloud && (\n        <div data-testid=\"how-billing-works\">\n          <h3>How Billing Works</h3>\n          <div className={styles.onboardingRow}>\n            <p className={styles.onboardingParagraph}>\n              Usage of Grafana Cloud Profiles is subject to{' '}\n              <StyledLink href=\"https://grafana.com/pricing/\">Grafana Cloud Pricing</StyledLink> for Profiles.\n              <br></br>\n              For additional information, read the announcement&nbsp;\n              <StyledLink href=\"https://grafana.com/blog/2023/08/09/grafana-cloud-profiles-for-continuous-profiling/\">\n                blog post\n              </StyledLink>\n              .\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { useState } from 'react';\n\nimport { useFetchInstances } from '../infrastructure/useFetchInstances';\n\nexport function useOnboardingModal(): DomainHookReturnValue {\n  const { instances } = useFetchInstances();\n\n  const [settingsUrl, setSettingsUrl] = useState('https://grafana.com/auth/sign-in/');\n  const isCloud = /grafana(-dev|-ops)?\\.net/.test(window.location.host);\n\n  if (instances && instances.orgSlug && instances.hpInstanceId) {\n    const newSettingsUrl = `https://grafana.com/orgs/${instances.orgSlug}/hosted-profiles/${instances.hpInstanceId}`;\n\n    if (settingsUrl !== newSettingsUrl) {\n      setSettingsUrl(newSettingsUrl);\n    }\n  }\n\n  return {\n    data: {\n      settingsUrl,\n      isCloud,\n    },\n    actions: {},\n  };\n}\n","import { useQuery } from '@tanstack/react-query';\n\nexport function useFetchInstances() {\n  const { isFetching, error, data } = useQuery({\n    queryKey: ['instances'],\n    queryFn: () =>\n      fetch('/api/plugin-proxy/cloud-home-app/grafanacom-api/instances').then((response) => response.json()),\n  });\n\n  return {\n    isFetching,\n    error,\n    instances: data,\n  };\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, PageLayoutType } from '@grafana/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { OnboardingModal } from './OnboardingModal';\n\ntype OnboardingPageProps = {\n  onCloseModal: () => void;\n};\n\n/** This was extracted from the former `styles.module.scss` */\n// TODO Use more spacial and color parameters from `theme`\nconst getStyles = (theme: GrafanaTheme2) => ({\n  onboardingPage: css`\n    padding: 16px;\n    margin: 64px;\n    position: relative;\n    background-color: ${theme.colors.background.primary};\n  `,\n  closeButton: css`\n    position: absolute;\n    top: -30px;\n    opacity: 0.8;\n    right: -32px;\n    border: none;\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    display: block;\n    padding: 0;\n    margin: 0;\n    font-size: 22px;\n  `,\n});\n\nconst pageNav = { text: 'Onboarding' };\n\nexport function OnboardingPage({ onCloseModal }: OnboardingPageProps) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    // The use of `PluginPage` is to set a clear \"Onboarding\" breadcrumb\n    // Using `Custom` ensures that it takes up the whole page (and doesn't conflict with the other `PluginPage`)\n    <PluginPage pageNav={pageNav} layout={PageLayoutType.Custom}>\n      <div className={styles.onboardingPage}>\n        <button\n          className={styles.closeButton}\n          onClick={onCloseModal}\n          title=\"Close\"\n          data-testid=\"close-onboarding-modal\"\n        >\n          &times;\n        </button>\n        <OnboardingModal />\n      </div>\n    </PluginPage>\n  );\n}\n","import React from 'react';\n\nimport { useOnboarding } from './domain/useOnboarding';\nimport { EmptyLoadingPage } from './ui/EmptyLoadingPage';\nimport { NoDataSourcePage } from './ui/NoDataSourcePage';\nimport { OnboardingPage } from './ui/OnboardingPage';\n\ntype OnboardingProps = {\n  children: React.ReactNode;\n};\n\n/**\n * Displays an onboarding dialog instructing how to push data only when data is not present\n */\nexport function Onboarding({ children }: OnboardingProps) {\n  const { data, actions } = useOnboarding();\n\n  if (data.shouldShowLoadingPage) {\n    return <EmptyLoadingPage />;\n  }\n\n  if (data.shouldShowOnboardingPage) {\n    return <OnboardingPage onCloseModal={actions.closeModal} />;\n  }\n\n  if (data.shouldShowNoDataSourceBanner) {\n    return <NoDataSourcePage />;\n  }\n\n  return <>{children}</>;\n}\n","import { ApiClient } from '@shared/infrastructure/http/ApiClient';\nimport { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { useState } from 'react';\n\nimport { useFetchTenantStats } from '../infrastructure/useFetchTenantStats';\n\nexport function useOnboarding(): DomainHookReturnValue {\n  const [isModalClosed, setIsModalClosed] = useState(false);\n\n  const pyroscopeDataSourcesCount = ApiClient.getPyroscopeDataSources().length;\n  const { isFetching, error, stats } = useFetchTenantStats({ enabled: pyroscopeDataSourcesCount > 0 });\n  const hasNoUserData = !isFetching && !stats?.hasIngestedData;\n\n  return {\n    data: {\n      shouldShowLoadingPage: !error && isFetching,\n      shouldShowOnboardingPage: (error || !pyroscopeDataSourcesCount || hasNoUserData) && !isModalClosed,\n      shouldShowNoDataSourceBanner: !pyroscopeDataSourcesCount,\n    },\n    actions: {\n      closeModal() {\n        setIsModalClosed(true);\n      },\n    },\n  };\n}\n","import { useQuery } from '@tanstack/react-query';\n\nimport { Stats, statsApiClient } from './statsApiClient';\n\ntype FetchResponse = {\n  isFetching: boolean;\n  error: Error | null;\n  stats?: Stats;\n  refetch: () => void;\n};\n\nexport function useFetchTenantStats({ enabled }: { enabled: boolean }): FetchResponse {\n  const { isFetching, error, data, refetch } = useQuery({\n    enabled,\n    placeholderData: () => ({ hasIngestedData: true, oldestProfileTime: 0, newestProfileTime: 0 }),\n    queryKey: ['tenant-stats'],\n    queryFn: () => {\n      statsApiClient.abort();\n\n      return statsApiClient.get();\n    },\n  });\n\n  return {\n    isFetching,\n    error: statsApiClient.isAbortError(error) ? null : error,\n    stats: data,\n    refetch,\n  };\n}\n","import { PLUGIN_BASE_URL } from '../../constants';\n\nexport function prefixRouteWithPluginBaseUrl(route: string): string {\n  return `${PLUGIN_BASE_URL}/${route}`.replace(/\\/{2,}/g, '/'); // Replace duplicate slashes, TODO: use new URL()?\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    gap: ${theme.spacing(1)};\n    width: 100%;\n  `,\n  column: css`\n    width: 50%;\n  `,\n});\n\ntype AdHocColumnsProps = {\n  left: React.ReactNode;\n  right: React.ReactNode;\n};\n\nexport function AdHocColumns({ left, right }: AdHocColumnsProps) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.column}>{left}</div>\n      <div className={styles.column}>{right}</div>\n    </div>\n  );\n}\n","import { AppEvents } from '@grafana/data';\nimport { getAppEvents } from '@grafana/runtime';\nimport { logger } from '@shared/infrastructure/tracking/logger';\n\nexport function displayError(error: Error, msgs: string[]) {\n  const context = msgs.reduce((acc, msg, i) => ({ ...acc, [`info${i + 1}`]: msg }), { handheldBy: 'displayError' });\n\n  logger.error(error, context);\n\n  getAppEvents().publish({\n    type: AppEvents.alertError.name,\n    payload: msgs,\n  });\n}\n\nexport function displayWarning(msgs: string[]) {\n  logger.warn(msgs);\n\n  getAppEvents().publish({\n    type: AppEvents.alertWarning.name,\n    payload: msgs,\n  });\n}\n\nexport function displaySuccess(msgs: string[]) {\n  getAppEvents().publish({\n    type: AppEvents.alertSuccess.name,\n    payload: msgs,\n  });\n}\n","import { ApiClient } from '@shared/infrastructure/http/ApiClient';\n\nimport { AdHocProfile } from '../domain/AdHocProfile';\nimport { stripBase64Prefix } from './helpers/stripBase64Prefix';\n\nclass AdHocProfileClient extends ApiClient {\n  async get(profileId: string, profileType: string): Promise<AdHocProfile> {\n    const response = await this.fetch('/adhocprofiles.v1.AdHocProfileService/Get', {\n      method: 'POST',\n      body: JSON.stringify({\n        id: profileId,\n        profile_type: profileType,\n      }),\n    });\n\n    const json = await response.json();\n\n    return {\n      id: json.id,\n      name: json.name,\n      profileTypes: json.profileTypes,\n      profile: JSON.parse(json.flamebearerProfile),\n    };\n  }\n\n  async uploadSingle(file: File): Promise<AdHocProfile> {\n    const profile = await this._readProfileFile(file);\n\n    const response = await this.fetch('/adhocprofiles.v1.AdHocProfileService/Upload', {\n      method: 'POST',\n      body: JSON.stringify({\n        name: file.name,\n        profile,\n      }),\n    });\n\n    const json = await response.json();\n\n    return {\n      id: json.id,\n      name: file.name,\n      profileTypes: json.profileTypes,\n      // when the uploaded file contains multiple sample types, the 1st is always returned by the API\n      profile: JSON.parse(json.flamebearerProfile),\n    };\n  }\n\n  // TODO\n  async uploadDiff() {\n    return {\n      id: '?',\n      name: '??',\n      profileTypes: [],\n      profile: null,\n    };\n  }\n\n  async _readProfileFile(file: File): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const fileReader = new FileReader();\n\n      fileReader.addEventListener('load', () => {\n        try {\n          resolve(stripBase64Prefix(fileReader.result as string));\n        } catch (error) {\n          reject(error);\n        }\n      });\n\n      fileReader.addEventListener('error', (/*event: ProgressEvent<FileReader>*/) => {\n        // TODO: upgrade TS lib compiler option to support latest JS features\n        // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error/cause\n        reject(new Error(`Error while reading file \"${file.name}\"!` /*, { cause: event }*/));\n      });\n\n      fileReader.readAsDataURL(file);\n    });\n  }\n}\n\nexport const adHocProfileClient = new AdHocProfileClient();\n","export function stripBase64Prefix(fileContent: string): string {\n  const [, base64Content] = fileContent.split(';base64,');\n\n  if (!base64Content) {\n    throw new Error('No content after stripping the base64 prefix.');\n  }\n\n  if (fileContent === base64Content) {\n    throw new Error('No base64 prefix?!');\n  }\n\n  return base64Content;\n}\n","import { SelectableValue } from '@grafana/data';\nimport { displayError } from '@shared/domain/displayStatus';\nimport { useCallback, useEffect, useState } from 'react';\n\nimport { adHocProfileClient } from '../infrastructure/adHocProfileClient';\nimport { AdHocProfile } from './AdHocProfile';\n\nconst DEFAULT_PROFILE_DATA: AdHocProfile = {\n  id: '',\n  name: '',\n  profileTypes: [],\n  profile: null,\n};\n\nexport function useUploadFile() {\n  const [isLoading, setIsLoading] = useState(false);\n  const [profileData, setProfileData] = useState(DEFAULT_PROFILE_DATA);\n\n  useEffect(() => {\n    return () => {\n      adHocProfileClient.abort();\n    };\n  }, []);\n\n  const removeFile = useCallback(() => {\n    adHocProfileClient.abort();\n\n    setIsLoading(false);\n    setProfileData(DEFAULT_PROFILE_DATA);\n  }, []);\n\n  const processFile = useCallback(\n    async (file: File) => {\n      removeFile();\n\n      try {\n        setIsLoading(true);\n\n        const data = await adHocProfileClient.uploadSingle(file);\n\n        setProfileData(data);\n      } catch (error) {\n        setProfileData(DEFAULT_PROFILE_DATA);\n\n        if (!adHocProfileClient.isAbortError(error)) {\n          displayError(error as Error, ['Error while uploading profile!', (error as Error).message]);\n        }\n      }\n\n      setIsLoading(false);\n    },\n    [removeFile]\n  );\n\n  const removeProfile = () => {\n    adHocProfileClient.abort();\n\n    setIsLoading(false);\n    setProfileData((prevData) => ({ ...prevData, profile: null }));\n  };\n\n  const selectProfileType = useCallback(\n    async (option: SelectableValue<string>) => {\n      const profileType = option.value;\n\n      if (!profileType || !profileData.id || !profileData.profileTypes.includes(profileType)) {\n        return;\n      }\n\n      removeProfile();\n\n      setIsLoading(true);\n\n      try {\n        const data = await adHocProfileClient.get(profileData.id, profileType);\n\n        setProfileData((prevData) => ({\n          ...prevData,\n          profile: data.profile,\n        }));\n      } catch (error) {\n        if (!adHocProfileClient.isAbortError(error)) {\n          displayError(error as Error, ['Error while fetching profile!', (error as Error).message]);\n        }\n      }\n\n      setIsLoading(false);\n    },\n    [profileData.id, profileData.profileTypes]\n  );\n\n  return {\n    processFile,\n    profileTypes: profileData.profileTypes,\n    selectProfileType,\n    profile: profileData.profile,\n    removeFile,\n    isLoading,\n  };\n}\n","import { DropzoneFile, FileDropzone } from '@grafana/ui';\nimport { displayError } from '@shared/domain/displayStatus';\nimport React, { useCallback } from 'react';\n\nimport { ACCEPTED_FILE_TYPES } from '../domain/accepted-file-types';\n\nconst options = {\n  accept: ACCEPTED_FILE_TYPES,\n  multiple: false,\n  // maxSize: 42, // TODO?\n  onError(error: Error) {\n    displayError(error, ['Error while uploading file!', error.toString()]);\n  },\n};\n\ntype AdHocFileDropZoneProps = {\n  onFileDropped: (file: File) => void;\n  onFileRemove: (file: DropzoneFile) => void;\n};\n\nexport function AdHocFileDropZone({ onFileDropped, onFileRemove }: AdHocFileDropZoneProps) {\n  const onDropAccepted = useCallback(\n    function (files: File[]) {\n      onFileDropped(files[0]);\n    },\n    [onFileDropped]\n  );\n\n  return (\n    <FileDropzone\n      options={{\n        ...options,\n        onDropAccepted,\n      }}\n      onFileRemove={onFileRemove}\n    />\n  );\n}\n","export const ACCEPTED_FILE_TYPES = {\n  'application/gzip': ['.gz'],\n  'application/json': ['.json'],\n  'application/proto': ['.pb', '.pprof'],\n};\n","/**\n* Copyright (c) 2023, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* uFuzzy.js (Fuzzy)\n* A tiny, efficient fuzzy matcher that doesn't suck\n* https://github.com/leeoniya/uFuzzy (v1.0.14)\n*/\n\nconst cmp = new Intl.Collator('en', { numeric: true, sensitivity: 'base' }).compare;\n\nconst inf = Infinity;\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions#escaping\nconst escapeRegExp = str => str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n\n// meh, magic tmp placeholder, must be tolerant to toLocaleLowerCase(), interSplit, and intraSplit\nconst EXACT_HERE = 'eexxaacctt';\n\nconst LATIN_UPPER = 'A-Z';\nconst LATIN_LOWER = 'a-z';\n\nconst swapAlpha = (str, upper, lower) => str.replace(LATIN_UPPER, upper).replace(LATIN_LOWER, lower);\n\nconst OPTS = {\n\t// whether regexps use a /u unicode flag\n\tunicode: false,\n\n\talpha: null,\n\n\t// term segmentation & punct/whitespace merging\n\tinterSplit: \"[^A-Za-z\\\\d']+\",\n\tintraSplit: \"[a-z][A-Z]\",\n\n\t// intra bounds that will be used to increase lft1/rgt1 info counters\n\tintraBound: \"[A-Za-z]\\\\d|\\\\d[A-Za-z]|[a-z][A-Z]\",\n\n\t// inter-bounds mode\n\t// 2 = strict (will only match 'man' on whitepace and punct boundaries: Mega Man, Mega_Man, mega.man)\n\t// 1 = loose  (plus allowance for alpha-num and case-change boundaries: MegaMan, 0007man)\n\t// 0 = any    (will match 'man' as any substring: megamaniac)\n\tinterLft: 0,\n\tinterRgt: 0,\n\n\t// allowance between terms\n\tinterChars: '.',\n\tinterIns: inf,\n\n\t// allowance between chars in terms\n\tintraChars: \"[a-z\\\\d']\", // internally case-insensitive\n\tintraIns: null,\n\n\tintraContr: \"'[a-z]{1,2}\\\\b\",\n\n\t// multi-insert or single-error mode\n\tintraMode: 0,\n\n\t// single-error bounds for errors within terms, default requires exact first char\n\tintraSlice: [1, inf],\n\n\t// single-error tolerance toggles\n\tintraSub: null,\n\tintraTrn: null,\n\tintraDel: null,\n\n\t// can post-filter matches that are too far apart in distance or length\n\t// (since intraIns is between each char, it can accum to nonsense matches)\n\tintraFilt: (term, match, index) => true, // should this also accept WIP info?\n\n\t// final sorting fn\n\tsort: (info, haystack, needle) => {\n\t\tlet {\n\t\t\tidx,\n\t\t\tchars,\n\t\t\tterms,\n\t\t\tinterLft2,\n\t\t\tinterLft1,\n\t\t//\tinterRgt2,\n\t\t//\tinterRgt1,\n\t\t\tstart,\n\t\t\tintraIns,\n\t\t\tinterIns,\n\t\t} = info;\n\n\t\treturn idx.map((v, i) => i).sort((ia, ib) => (\n\t\t\t// most contig chars matched\n\t\t\tchars[ib] - chars[ia] ||\n\t\t\t// least char intra-fuzz (most contiguous)\n\t\t\tintraIns[ia] - intraIns[ib] ||\n\t\t\t// most prefix bounds, boosted by full term matches\n\t\t\t(\n\t\t\t\t(terms[ib] + interLft2[ib] + 0.5 * interLft1[ib]) -\n\t\t\t\t(terms[ia] + interLft2[ia] + 0.5 * interLft1[ia])\n\t\t\t) ||\n\t\t\t// highest density of match (least span)\n\t\t//\tspan[ia] - span[ib] ||\n\t\t\t// highest density of match (least term inter-fuzz)\n\t\t\tinterIns[ia] - interIns[ib] ||\n\t\t\t// earliest start of match\n\t\t\tstart[ia] - start[ib] ||\n\t\t\t// alphabetic\n\t\t\tcmp(haystack[idx[ia]], haystack[idx[ib]])\n\t\t));\n\t},\n};\n\nconst lazyRepeat = (chars, limit) => (\n\tlimit == 0   ? ''           :\n\tlimit == 1   ? chars + '??' :\n\tlimit == inf ? chars + '*?' :\n\t               chars + `{0,${limit}}?`\n);\n\nconst mode2Tpl = '(?:\\\\b|_)';\n\nfunction uFuzzy(opts) {\n\topts = Object.assign({}, OPTS, opts);\n\n\tlet {\n\t\tunicode,\n\t\tinterLft,\n\t\tinterRgt,\n\t\tintraMode,\n\t\tintraSlice,\n\t\tintraIns,\n\t\tintraSub,\n\t\tintraTrn,\n\t\tintraDel,\n\t\tintraContr,\n\t\tintraSplit: _intraSplit,\n\t\tinterSplit: _interSplit,\n\t\tintraBound: _intraBound,\n\t\tintraChars,\n\t} = opts;\n\n\tintraIns ??= intraMode;\n\tintraSub ??= intraMode;\n\tintraTrn ??= intraMode;\n\tintraDel ??= intraMode;\n\n\tlet alpha = opts.letters ?? opts.alpha;\n\n\tif (alpha != null) {\n\t\tlet upper = alpha.toLocaleUpperCase();\n\t\tlet lower = alpha.toLocaleLowerCase();\n\n\t\t_interSplit = swapAlpha(_interSplit, upper, lower);\n\t\t_intraSplit = swapAlpha(_intraSplit, upper, lower);\n\t\t_intraBound = swapAlpha(_intraBound, upper, lower);\n\t\tintraChars = swapAlpha(intraChars, upper, lower);\n\t\tintraContr = swapAlpha(intraContr, upper, lower);\n\t}\n\n\tlet uFlag = unicode ? 'u' : '';\n\n\tconst quotedAny = '\".+?\"';\n\tconst EXACTS_RE = new RegExp(quotedAny, 'gi' + uFlag);\n\tconst NEGS_RE = new RegExp(`(?:\\\\s+|^)-(?:${intraChars}+|${quotedAny})`, 'gi' + uFlag);\n\n\tlet { intraRules } = opts;\n\n\tif (intraRules == null) {\n\t\tintraRules = p => {\n\t\t\t// default is exact term matches only\n\t\t\tlet _intraSlice = OPTS.intraSlice, // requires first char\n\t\t\t\t_intraIns = 0,\n\t\t\t\t_intraSub = 0,\n\t\t\t\t_intraTrn = 0,\n\t\t\t\t_intraDel = 0;\n\n\t\t\t// only-digits strings should match exactly, else special rules for short strings\n\t\t\tif (/[^\\d]/.test(p)) {\n\t\t\t\tlet plen = p.length;\n\n\t\t\t\t// prevent junk matches by requiring stricter rules for short terms\n\t\t\t\tif (plen <= 4) {\n\t\t\t\t\tif (plen >= 3) {\n\t\t\t\t\t\t// one swap in non-first char when 3-4 chars\n\t\t\t\t\t\t_intraTrn = Math.min(intraTrn, 1);\n\n\t\t\t\t\t\t// or one insertion when 4 chars\n\t\t\t\t\t\tif (plen == 4)\n\t\t\t\t\t\t\t_intraIns = Math.min(intraIns, 1);\n\t\t\t\t\t}\n\t\t\t\t\t// else exact match when 1-2 chars\n\t\t\t\t}\n\t\t\t\t// use supplied opts\n\t\t\t\telse {\n\t\t\t\t\t_intraSlice = intraSlice;\n\t\t\t\t\t_intraIns = intraIns,\n\t\t\t\t\t_intraSub = intraSub,\n\t\t\t\t\t_intraTrn = intraTrn,\n\t\t\t\t\t_intraDel = intraDel;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tintraSlice: _intraSlice,\n\t\t\t\tintraIns: _intraIns,\n\t\t\t\tintraSub: _intraSub,\n\t\t\t\tintraTrn: _intraTrn,\n\t\t\t\tintraDel: _intraDel,\n\t\t\t};\n\t\t};\n\t}\n\n\tlet withIntraSplit = !!_intraSplit;\n\n\tlet intraSplit = new RegExp(_intraSplit, 'g' + uFlag);\n\tlet interSplit = new RegExp(_interSplit, 'g' + uFlag);\n\n\tlet trimRe = new RegExp('^' + _interSplit + '|' + _interSplit + '$', 'g' + uFlag);\n\tlet contrsRe = new RegExp(intraContr, 'gi' + uFlag);\n\n\tconst split = needle => {\n\t\tlet exacts = [];\n\n\t\tneedle = needle.replace(EXACTS_RE, m => {\n\t\t\texacts.push(m);\n\t\t\treturn EXACT_HERE;\n\t\t});\n\n\t\tneedle = needle.replace(trimRe, '').toLocaleLowerCase();\n\n\t\tif (withIntraSplit)\n\t\t\tneedle = needle.replace(intraSplit, m => m[0] + ' ' + m[1]);\n\n\t\tlet j = 0;\n\t\treturn needle.split(interSplit).filter(t => t != '').map(v => v === EXACT_HERE ? exacts[j++] : v);\n\t};\n\n\tconst NUM_OR_ALPHA_RE = /[^\\d]+|\\d+/g;\n\n\tconst prepQuery = (needle, capt = 0, interOR = false) => {\n\t\t// split on punct, whitespace, num-alpha, and upper-lower boundaries\n\t\tlet parts = split(needle);\n\n\t\tif (parts.length == 0)\n\t\t\treturn [];\n\n\t\t// split out any detected contractions for each term that become required suffixes\n\t\tlet contrs = Array(parts.length).fill('');\n\t\tparts = parts.map((p, pi) => p.replace(contrsRe, m => {\n\t\t\tcontrs[pi] = m;\n\t\t\treturn '';\n\t\t}));\n\n\t\t// array of regexp tpls for each term\n\t\tlet reTpl;\n\n\t\t// allows single mutations within each term\n\t\tif (intraMode == 1) {\n\t\t\treTpl = parts.map((p, pi) => {\n\t\t\t\tif (p[0] === '\"')\n\t\t\t\t\treturn escapeRegExp(p.slice(1, -1));\n\n\t\t\t\tlet reTpl = '';\n\n\t\t\t\t// split into numeric and alpha parts, so numbers are only matched as following punct or alpha boundaries, without swaps or insertions\n\t\t\t\tfor (let m of p.matchAll(NUM_OR_ALPHA_RE)) {\n\t\t\t\t\tlet p = m[0];\n\n\t\t\t\t\tlet {\n\t\t\t\t\t\tintraSlice,\n\t\t\t\t\t\tintraIns,\n\t\t\t\t\t\tintraSub,\n\t\t\t\t\t\tintraTrn,\n\t\t\t\t\t\tintraDel,\n\t\t\t\t\t} = intraRules(p);\n\n\t\t\t\t\tif (intraIns + intraSub + intraTrn + intraDel == 0)\n\t\t\t\t\t\treTpl += p + contrs[pi];\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet [lftIdx, rgtIdx] = intraSlice;\n\t\t\t\t\t\tlet lftChar = p.slice(0, lftIdx); // prefix\n\t\t\t\t\t\tlet rgtChar = p.slice(rgtIdx);    // suffix\n\n\t\t\t\t\t\tlet chars = p.slice(lftIdx, rgtIdx);\n\n\t\t\t\t\t\t// neg lookahead to prefer matching 'Test' instead of 'tTest' in ManifestTest or fittest\n\t\t\t\t\t\t// but skip when search term contains leading repetition (aardvark, aaa)\n\t\t\t\t\t\tif (intraIns == 1 && lftChar.length == 1 && lftChar != chars[0])\n\t\t\t\t\t\t\tlftChar += '(?!' + lftChar + ')';\n\n\t\t\t\t\t\tlet numChars = chars.length;\n\n\t\t\t\t\t\tlet variants = [p];\n\n\t\t\t\t\t\t// variants with single char substitutions\n\t\t\t\t\t\tif (intraSub) {\n\t\t\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + intraChars + chars.slice(i + 1) + rgtChar);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// variants with single transpositions\n\t\t\t\t\t\tif (intraTrn) {\n\t\t\t\t\t\t\tfor (let i = 0; i < numChars - 1; i++) {\n\t\t\t\t\t\t\t\tif (chars[i] != chars[i+1])\n\t\t\t\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + chars[i+1] + chars[i] + chars.slice(i + 2) + rgtChar);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// variants with single char omissions\n\t\t\t\t\t\tif (intraDel) {\n\t\t\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i + 1) + '?' + chars.slice(i + 1) + rgtChar);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// variants with single char insertions\n\t\t\t\t\t\tif (intraIns) {\n\t\t\t\t\t\t\tlet intraInsTpl = lazyRepeat(intraChars, 1);\n\n\t\t\t\t\t\t\tfor (let i = 0; i < numChars; i++)\n\t\t\t\t\t\t\t\tvariants.push(lftChar + chars.slice(0, i) + intraInsTpl + chars.slice(i) + rgtChar);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treTpl += '(?:' + variants.join('|') + ')' + contrs[pi];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t//\tconsole.log(reTpl);\n\n\t\t\t\treturn reTpl;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tlet intraInsTpl = lazyRepeat(intraChars, intraIns);\n\n\t\t\t// capture at char level\n\t\t\tif (capt == 2 && intraIns > 0) {\n\t\t\t\t// sadly, we also have to capture the inter-term junk via parenth-wrapping .*?\n\t\t\t\t// to accum other capture groups' indices for \\b boosting during scoring\n\t\t\t\tintraInsTpl = ')(' + intraInsTpl + ')(';\n\t\t\t}\n\n\t\t\treTpl = parts.map((p, pi) => p[0] === '\"' ? escapeRegExp(p.slice(1, -1)) :  p.split('').map((c, i, chars) => {\n\t\t\t\t// neg lookahead to prefer matching 'Test' instead of 'tTest' in ManifestTest or fittest\n\t\t\t\t// but skip when search term contains leading repetition (aardvark, aaa)\n\t\t\t\tif (intraIns == 1 && i == 0 && chars.length > 1 && c != chars[i+1])\n\t\t\t\t\tc += '(?!' + c + ')';\n\n\t\t\t\treturn c;\n\t\t\t}).join(intraInsTpl) + contrs[pi]);\n\t\t}\n\n\t//\tconsole.log(reTpl);\n\n\t\t// this only helps to reduce initial matches early when they can be detected\n\t\t// TODO: might want a mode 3 that excludes _\n\t\tlet preTpl = interLft == 2 ? mode2Tpl : '';\n\t\tlet sufTpl = interRgt == 2 ? mode2Tpl : '';\n\n\t\tlet interCharsTpl = sufTpl + lazyRepeat(opts.interChars, opts.interIns) + preTpl;\n\n\t\t// capture at word level\n\t\tif (capt > 0) {\n\t\t\tif (interOR) {\n\t\t\t\t// this is basically for doing .matchAll() occurence counting and highlighting without needing permuted ooo needles\n\t\t\t\treTpl = preTpl + '(' + reTpl.join(')' + sufTpl + '|' + preTpl + '(') + ')' + sufTpl;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// sadly, we also have to capture the inter-term junk via parenth-wrapping .*?\n\t\t\t\t// to accum other capture groups' indices for \\b boosting during scoring\n\t\t\t\treTpl = '(' + reTpl.join(')(' + interCharsTpl + ')(') + ')';\n\t\t\t\treTpl = '(.??' + preTpl + ')' + reTpl + '(' + sufTpl + '.*)'; // nit: trailing capture here assumes interIns = Inf\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treTpl = reTpl.join(interCharsTpl);\n\t\t\treTpl = preTpl + reTpl + sufTpl;\n\t\t}\n\n\t//\tconsole.log(reTpl);\n\n\t\treturn [new RegExp(reTpl, 'i' + uFlag), parts, contrs];\n\t};\n\n\tconst filter = (haystack, needle, idxs) => {\n\n\t\tlet [query] = prepQuery(needle);\n\n\t\tif (query == null)\n\t\t\treturn null;\n\n\t\tlet out = [];\n\n\t\tif (idxs != null) {\n\t\t\tfor (let i = 0; i < idxs.length; i++) {\n\t\t\t\tlet idx = idxs[i];\n\t\t\t\tquery.test(haystack[idx]) && out.push(idx);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfor (let i = 0; i < haystack.length; i++)\n\t\t\t\tquery.test(haystack[i]) && out.push(i);\n\t\t}\n\n\t\treturn out;\n\t};\n\n\tlet withIntraBound = !!_intraBound;\n\n\tlet interBound = new RegExp(_interSplit, uFlag);\n\tlet intraBound = new RegExp(_intraBound, uFlag);\n\n\tconst info = (idxs, haystack, needle) => {\n\n\t\tlet [query, parts, contrs] = prepQuery(needle, 1);\n\t\tlet [queryR] = prepQuery(needle, 2);\n\t\tlet partsLen = parts.length;\n\n\t\tlet len = idxs.length;\n\n\t\tlet field = Array(len).fill(0);\n\n\t\tlet info = {\n\t\t\t// idx in haystack\n\t\t\tidx: Array(len),\n\n\t\t\t// start of match\n\t\t\tstart: field.slice(),\n\t\t\t// length of match\n\t\t//\tspan: field.slice(),\n\n\t\t\t// contiguous chars matched\n\t\t\tchars: field.slice(),\n\n\t\t\t// contiguous (no fuzz) and bounded terms (intra=0, lft2/1, rgt2/1)\n\t\t\t// excludes terms that are contiguous but have < 2 bounds (substrings)\n\t\t\tterms: field.slice(),\n\n\t\t\t// cumulative length of unmatched chars (fuzz) within span\n\t\t\tinterIns: field.slice(), // between terms\n\t\t\tintraIns: field.slice(), // within terms\n\n\t\t\t// interLft/interRgt counters\n\t\t\tinterLft2: field.slice(),\n\t\t\tinterRgt2: field.slice(),\n\t\t\tinterLft1: field.slice(),\n\t\t\tinterRgt1: field.slice(),\n\n\t\t\tranges: Array(len),\n\t\t};\n\n\t\t// might discard idxs based on bounds checks\n\t\tlet mayDiscard = interLft == 1 || interRgt == 1;\n\n\t\tlet ii = 0;\n\n\t\tfor (let i = 0; i < idxs.length; i++) {\n\t\t\tlet mhstr = haystack[idxs[i]];\n\n\t\t\t// the matched parts are [full, junk, term, junk, term, junk]\n\t\t\tlet m = mhstr.match(query);\n\n\t\t\t// leading junk\n\t\t\tlet start = m.index + m[1].length;\n\n\t\t\tlet idxAcc = start;\n\t\t//\tlet span = m[0].length;\n\n\t\t\tlet disc = false;\n\t\t\tlet lft2 = 0;\n\t\t\tlet lft1 = 0;\n\t\t\tlet rgt2 = 0;\n\t\t\tlet rgt1 = 0;\n\t\t\tlet chars = 0;\n\t\t\tlet terms = 0;\n\t\t\tlet inter = 0;\n\t\t\tlet intra = 0;\n\n\t\t\tlet refine = [];\n\n\t\t\tfor (let j = 0, k = 2; j < partsLen; j++, k+=2) {\n\t\t\t\tlet group = m[k].toLocaleLowerCase();\n\t\t\t\tlet part = parts[j];\n\t\t\t\tlet term = part[0] == '\"' ? part.slice(1, -1) : part + contrs[j];\n\t\t\t\tlet termLen = term.length;\n\t\t\t\tlet groupLen = group.length;\n\t\t\t\tlet fullMatch = group == term;\n\n\t\t\t\t// this won't handle the case when an exact match exists across the boundary of the current group and the next junk\n\t\t\t\t// e.g. blob,ob when searching for 'bob' but finding the earlier `blob` (with extra insertion)\n\t\t\t\tif (!fullMatch && m[k+1].length >= termLen) {\n\t\t\t\t\t// probe for exact match in inter junk (TODO: maybe even in this matched part?)\n\t\t\t\t\tlet idxOf = m[k+1].toLocaleLowerCase().indexOf(term);\n\n\t\t\t\t\tif (idxOf > -1) {\n\t\t\t\t\t\trefine.push(idxAcc, groupLen, idxOf, termLen);\n\t\t\t\t\t\tidxAcc += refineMatch(m, k, idxOf, termLen);\n\t\t\t\t\t\tgroup = term;\n\t\t\t\t\t\tgroupLen = termLen;\n\t\t\t\t\t\tfullMatch = true;\n\n\t\t\t\t\t\tif (j == 0)\n\t\t\t\t\t\t\tstart = idxAcc;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mayDiscard || fullMatch) {\n\t\t\t\t\t// does group's left and/or right land on \\b\n\t\t\t\t\tlet lftCharIdx = idxAcc - 1;\n\t\t\t\t\tlet rgtCharIdx = idxAcc + groupLen;\n\n\t\t\t\t\tlet isPre = false;\n\t\t\t\t\tlet isSuf = false;\n\n\t\t\t\t\t// prefix info\n\t\t\t\t\tif (lftCharIdx == -1           || interBound.test(mhstr[lftCharIdx])) {\n\t\t\t\t\t\tfullMatch && lft2++;\n\t\t\t\t\t\tisPre = true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (interLft == 2) {\n\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (withIntraBound && intraBound.test(mhstr[lftCharIdx] + mhstr[lftCharIdx + 1])) {\n\t\t\t\t\t\t\tfullMatch && lft1++;\n\t\t\t\t\t\t\tisPre = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (interLft == 1) {\n\t\t\t\t\t\t\t\t// regexps are eager, so try to improve the match by probing forward inter junk for exact match at a boundary\n\t\t\t\t\t\t\t\tlet junk = m[k+1];\n\t\t\t\t\t\t\t\tlet junkIdx = idxAcc + groupLen;\n\n\t\t\t\t\t\t\t\tif (junk.length >= termLen) {\n\t\t\t\t\t\t\t\t\tlet idxOf = 0;\n\t\t\t\t\t\t\t\t\tlet found = false;\n\t\t\t\t\t\t\t\t\tlet re = new RegExp(term, 'ig' + uFlag);\n\n\t\t\t\t\t\t\t\t\tlet m2;\n\t\t\t\t\t\t\t\t\twhile (m2 = re.exec(junk)) {\n\t\t\t\t\t\t\t\t\t\tidxOf = m2.index;\n\n\t\t\t\t\t\t\t\t\t\tlet charIdx = junkIdx + idxOf;\n\t\t\t\t\t\t\t\t\t\tlet lftCharIdx = charIdx - 1;\n\n\t\t\t\t\t\t\t\t\t\tif (lftCharIdx == -1 || interBound.test(mhstr[lftCharIdx])) {\n\t\t\t\t\t\t\t\t\t\t\tlft2++;\n\t\t\t\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if (intraBound.test(mhstr[lftCharIdx] + mhstr[charIdx])) {\n\t\t\t\t\t\t\t\t\t\t\tlft1++;\n\t\t\t\t\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (found) {\n\t\t\t\t\t\t\t\t\t\tisPre = true;\n\n\t\t\t\t\t\t\t\t\t\t// identical to exact term refinement pass above\n\t\t\t\t\t\t\t\t\t\trefine.push(idxAcc, groupLen, idxOf, termLen);\n\t\t\t\t\t\t\t\t\t\tidxAcc += refineMatch(m, k, idxOf, termLen);\n\t\t\t\t\t\t\t\t\t\tgroup = term;\n\t\t\t\t\t\t\t\t\t\tgroupLen = termLen;\n\t\t\t\t\t\t\t\t\t\tfullMatch = true;\n\n\t\t\t\t\t\t\t\t\t\tif (j == 0)\n\t\t\t\t\t\t\t\t\t\t\tstart = idxAcc;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (!isPre) {\n\t\t\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// suffix info\n\t\t\t\t\tif (rgtCharIdx == mhstr.length || interBound.test(mhstr[rgtCharIdx])) {\n\t\t\t\t\t\tfullMatch && rgt2++;\n\t\t\t\t\t\tisSuf = true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (interRgt == 2) {\n\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (withIntraBound && intraBound.test(mhstr[rgtCharIdx - 1] + mhstr[rgtCharIdx])) {\n\t\t\t\t\t\t\tfullMatch && rgt1++;\n\t\t\t\t\t\t\tisSuf = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (interRgt == 1) {\n\t\t\t\t\t\t\t\tdisc = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (fullMatch) {\n\t\t\t\t\t\tchars += termLen;\n\n\t\t\t\t\t\tif (isPre && isSuf)\n\t\t\t\t\t\t\tterms++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (groupLen > termLen)\n\t\t\t\t\tintra += groupLen - termLen; // intraFuzz\n\n\t\t\t\tif (j > 0)\n\t\t\t\t\tinter += m[k-1].length; // interFuzz\n\n\t\t\t\t// TODO: group here is lowercased, which is okay for length cmp, but not more case-sensitive filts\n\t\t\t\tif (!opts.intraFilt(term, group, idxAcc)) {\n\t\t\t\t\tdisc = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (j < partsLen - 1)\n\t\t\t\t\tidxAcc += groupLen + m[k+1].length;\n\t\t\t}\n\n\t\t\tif (!disc) {\n\t\t\t\tinfo.idx[ii]       = idxs[i];\n\t\t\t\tinfo.interLft2[ii] = lft2;\n\t\t\t\tinfo.interLft1[ii] = lft1;\n\t\t\t\tinfo.interRgt2[ii] = rgt2;\n\t\t\t\tinfo.interRgt1[ii] = rgt1;\n\t\t\t\tinfo.chars[ii]     = chars;\n\t\t\t\tinfo.terms[ii]     = terms;\n\t\t\t\tinfo.interIns[ii]  = inter;\n\t\t\t\tinfo.intraIns[ii]  = intra;\n\n\t\t\t\tinfo.start[ii] = start;\n\t\t\t//\tinfo.span[ii] = span;\n\n\t\t\t\t// ranges\n\t\t\t\tlet m = mhstr.match(queryR);\n\n\t\t\t\tlet idxAcc = m.index + m[1].length;\n\n\t\t\t\tlet refLen = refine.length;\n\t\t\t\tlet ri = refLen > 0 ? 0 : Infinity;\n\t\t\t\tlet lastRi = refLen - 4;\n\n\t\t\t\tfor (let i = 2; i < m.length;) {\n\t\t\t\t\tlet len = m[i].length;\n\n\t\t\t\t\tif (ri <= lastRi && refine[ri] == idxAcc) {\n\t\t\t\t\t\tlet groupLen = refine[ri+1];\n\t\t\t\t\t\tlet idxOf    = refine[ri+2];\n\t\t\t\t\t\tlet termLen  = refine[ri+3];\n\n\t\t\t\t\t\t// advance to end of original (full) group match that includes intra-junk\n\t\t\t\t\t\tlet j = i;\n\t\t\t\t\t\tlet v = '';\n\t\t\t\t\t\tfor (let _len = 0; _len < groupLen; j++) {\n\t\t\t\t\t\t\tv += m[j];\n\t\t\t\t\t\t\t_len += m[j].length;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tm.splice(i, j - i, v);\n\n\t\t\t\t\t\tidxAcc += refineMatch(m, i, idxOf, termLen);\n\n\t\t\t\t\t\tri += 4;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tidxAcc += len;\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tidxAcc = m.index + m[1].length;\n\n\t\t\t\tlet ranges = info.ranges[ii] = [];\n\t\t\t\tlet from = idxAcc;\n\t\t\t\tlet to = idxAcc;\n\n\t\t\t\tfor (let i = 2; i < m.length; i++) {\n\t\t\t\t\tlet len = m[i].length;\n\n\t\t\t\t\tidxAcc += len;\n\n\t\t\t\t\tif (i % 2 == 0)\n\t\t\t\t\t\tto = idxAcc;\n\t\t\t\t\telse if (len > 0) {\n\t\t\t\t\t\tranges.push(from, to);\n\t\t\t\t\t\tfrom = to = idxAcc;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (to > from)\n\t\t\t\t\tranges.push(from, to);\n\n\t\t\t\tii++;\n\t\t\t}\n\t\t}\n\n\t\t// trim arrays\n\t\tif (ii < idxs.length) {\n\t\t\tfor (let k in info)\n\t\t\t\tinfo[k] = info[k].slice(0, ii);\n\t\t}\n\n\t\treturn info;\n\t};\n\n\tconst refineMatch = (m, k, idxInNext, termLen) => {\n\t\t// shift the current group into the prior junk\n\t\tlet prepend = m[k] + m[k+1].slice(0, idxInNext);\n\t\tm[k-1] += prepend;\n\t\tm[k]    = m[k+1].slice(idxInNext, idxInNext + termLen);\n\t\tm[k+1]  = m[k+1].slice(idxInNext + termLen);\n\t\treturn prepend.length;\n\t};\n\n\tconst OOO_TERMS_LIMIT = 5;\n\n\t// returns [idxs, info, order]\n\tconst _search = (haystack, needle, outOfOrder, infoThresh = 1e3, preFiltered) => {\n\t\toutOfOrder = !outOfOrder ? 0 : outOfOrder === true ? OOO_TERMS_LIMIT : outOfOrder;\n\n\t\tlet needles = null;\n\t\tlet matches = null;\n\n\t\tlet negs = [];\n\n\t\tneedle = needle.replace(NEGS_RE, m => {\n\t\t\tlet neg = m.trim().slice(1);\n\n\t\t\tif (neg[0] === '\"')\n\t\t\t\tneg = escapeRegExp(neg.slice(1,-1));\n\n\t\t\tnegs.push(neg);\n\t\t\treturn '';\n\t\t});\n\n\t\tlet terms = split(needle);\n\n\t\tlet negsRe;\n\n\t\tif (negs.length > 0) {\n\t\t\tnegsRe = new RegExp(negs.join('|'), 'i' + uFlag);\n\n\t\t\tif (terms.length == 0) {\n\t\t\t\tlet idxs = [];\n\n\t\t\t\tfor (let i = 0; i < haystack.length; i++) {\n\t\t\t\t\tif (!negsRe.test(haystack[i]))\n\t\t\t\t\t\tidxs.push(i);\n\t\t\t\t}\n\n\t\t\t\treturn [idxs, null, null];\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// abort search (needle is empty after pre-processing, e.g. no alpha-numeric chars)\n\t\t\tif (terms.length == 0)\n\t\t\t\treturn [null, null, null];\n\t\t}\n\n\t//\tconsole.log(negs);\n\t//\tconsole.log(needle);\n\n\t\tif (outOfOrder > 0) {\n\t\t\t// since uFuzzy is an AND-based search, we can iteratively pre-reduce the haystack by searching\n\t\t\t// for each term in isolation before running permutations on what's left.\n\t\t\t// this is a major perf win. e.g. searching \"test man ger pp a\" goes from 570ms -> 14ms\n\t\t\tlet terms = split(needle);\n\n\t\t\tif (terms.length > 1) {\n\t\t\t\t// longest -> shortest\n\t\t\t\tlet terms2 = terms.slice().sort((a, b) => b.length - a.length);\n\n\t\t\t\tfor (let ti = 0; ti < terms2.length; ti++) {\n\t\t\t\t\t// no haystack item contained all terms\n\t\t\t\t\tif (preFiltered?.length == 0)\n\t\t\t\t\t\treturn [[], null, null];\n\n\t\t\t\t\tpreFiltered = filter(haystack, terms2[ti], preFiltered);\n\t\t\t\t}\n\n\t\t\t\t// avoid combinatorial explosion by limiting outOfOrder to 5 terms (120 max searches)\n\t\t\t\t// fall back to just filter() otherwise\n\t\t\t\tif (terms.length > outOfOrder)\n\t\t\t\t\treturn [preFiltered, null, null];\n\n\t\t\t\tneedles = permute(terms).map(perm => perm.join(' '));\n\n\t\t\t\t// filtered matches for each needle excluding same matches for prior needles\n\t\t\t\tmatches = [];\n\n\t\t\t\t// keeps track of already-matched idxs to skip in follow-up permutations\n\t\t\t\tlet matchedIdxs = new Set();\n\n\t\t\t\tfor (let ni = 0; ni < needles.length; ni++) {\n\t\t\t\t\tif (matchedIdxs.size < preFiltered.length) {\n\t\t\t\t\t\t// filter further for this needle, exclude already-matched\n\t\t\t\t\t\tlet preFiltered2 = preFiltered.filter(idx => !matchedIdxs.has(idx));\n\n\t\t\t\t\t\tlet matched = filter(haystack, needles[ni], preFiltered2);\n\n\t\t\t\t\t\tfor (let j = 0; j < matched.length; j++)\n\t\t\t\t\t\t\tmatchedIdxs.add(matched[j]);\n\n\t\t\t\t\t\tmatches.push(matched);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tmatches.push([]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// interOR\n\t//\tconsole.log(prepQuery(needle, 1, null, true));\n\n\t\t// non-ooo or ooo w/single term\n\t\tif (needles == null) {\n\t\t\tneedles = [needle];\n\t\t\tmatches = [preFiltered?.length > 0 ? preFiltered : filter(haystack, needle)];\n\t\t}\n\n\t\tlet retInfo = null;\n\t\tlet retOrder = null;\n\n\t\tif (negs.length > 0)\n\t\t\tmatches = matches.map(idxs => idxs.filter(idx => !negsRe.test(haystack[idx])));\n\n\t\tlet matchCount = matches.reduce((acc, idxs) => acc + idxs.length, 0);\n\n\t\t// rank, sort, concat\n\t\tif (matchCount <= infoThresh) {\n\t\t\tretInfo = {};\n\t\t\tretOrder = [];\n\n\t\t\tfor (let ni = 0; ni < matches.length; ni++) {\n\t\t\t\tlet idxs = matches[ni];\n\n\t\t\t\tif (idxs == null || idxs.length == 0)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tlet needle = needles[ni];\n\t\t\t\tlet _info = info(idxs, haystack, needle);\n\t\t\t\tlet order = opts.sort(_info, haystack, needle);\n\n\t\t\t\t// offset idxs for concat'ing infos\n\t\t\t\tif (ni > 0) {\n\t\t\t\t\tfor (let i = 0; i < order.length; i++)\n\t\t\t\t\t\torder[i] += retOrder.length;\n\t\t\t\t}\n\n\t\t\t\tfor (let k in _info)\n\t\t\t\t\tretInfo[k] = (retInfo[k] ?? []).concat(_info[k]);\n\n\t\t\t\tretOrder = retOrder.concat(order);\n\t\t\t}\n\t\t}\n\n\t\treturn [\n\t\t\t[].concat(...matches),\n\t\t\tretInfo,\n\t\t\tretOrder,\n\t\t];\n\t};\n\n\treturn {\n\t\tsearch: (...args) => {\n\t\t\tlet out = _search(...args);\n\t\t\treturn out;\n\t\t},\n\t\tsplit,\n\t\tfilter,\n\t\tinfo,\n\t\tsort: opts.sort,\n\t};\n}\n\nconst latinize = (() => {\n\tlet accents = {\n\t\tA: '',\n\t\ta: '',\n\t\tE: '',\n\t\te: '',\n\t\tI: '',\n\t\ti: '',\n\t\tO: '',\n\t\to: '',\n\t\tU: '',\n\t\tu: '',\n\t\tC: '',\n\t\tc: '',\n\t\tL: '',\n\t\tl: '',\n\t\tN: '',\n\t\tn: '',\n\t\tS: '',\n\t\ts: '',\n\t\tZ: '',\n\t\tz: ''\n\t};\n\n\tlet accentsMap = new Map();\n\tlet accentsTpl = '';\n\n\tfor (let r in accents) {\n\t\taccents[r].split('').forEach(a => {\n\t\t\taccentsTpl += a;\n\t\t\taccentsMap.set(a, r);\n\t\t});\n\t}\n\n\tlet accentsRe = new RegExp(`[${accentsTpl}]`, 'g');\n\tlet replacer = m => accentsMap.get(m);\n\n\treturn strings => {\n\t\tif (typeof strings == 'string')\n\t\t\treturn strings.replace(accentsRe, replacer);\n\n\t\tlet out = Array(strings.length);\n\t\tfor (let i = 0; i < strings.length; i++)\n\t\t\tout[i] = strings[i].replace(accentsRe, replacer);\n\t\treturn out;\n\t};\n})();\n\n// https://stackoverflow.com/questions/9960908/permutations-in-javascript/37580979#37580979\nfunction permute(arr) {\n\tarr = arr.slice();\n\n\tlet length = arr.length,\n\t\tresult = [arr.slice()],\n\t\tc = new Array(length).fill(0),\n\t\ti = 1, k, p;\n\n\twhile (i < length) {\n\t\tif (c[i] < i) {\n\t\t\tk = i % 2 && c[i];\n\t\t\tp = arr[i];\n\t\t\tarr[i] = arr[k];\n\t\t\tarr[k] = p;\n\t\t\t++c[i];\n\t\t\ti = 1;\n\t\t\tresult.push(arr.slice());\n\t\t} else {\n\t\t\tc[i] = 0;\n\t\t\t++i;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nconst _mark = (part, matched) => matched ? `<mark>${part}</mark>` : part;\nconst _append = (acc, part) => acc + part;\n\nfunction highlight(str, ranges, mark = _mark, accum = '', append = _append) {\n\taccum = append(accum, mark(str.substring(0, ranges[0]), false)) ?? accum;\n\n\tfor (let i = 0; i < ranges.length; i+=2) {\n\t\tlet fr = ranges[i];\n\t\tlet to = ranges[i+1];\n\n\t\taccum = append(accum, mark(str.substring(fr, to), true)) ?? accum;\n\n\t\tif (i < ranges.length - 3)\n\t\t\taccum = append(accum, mark(str.substring(ranges[i+1], ranges[i+2]), false)) ?? accum;\n\t}\n\n\taccum = append(accum, mark(str.substring(ranges[ranges.length - 1]), false)) ?? accum;\n\n\treturn accum;\n}\n\nuFuzzy.latinize = latinize;\nuFuzzy.permute = arr => {\n\tlet idxs = permute([...Array(arr.length).keys()]).sort((a,b) => {\n\t\tfor (let i = 0; i < a.length; i++) {\n\t\t\tif (a[i] != b[i])\n\t\t\t\treturn a[i] - b[i];\n\t\t}\n\t\treturn 0;\n\t});\n\n\treturn idxs.map(pi => pi.map(i => arr[i]));\n};\nuFuzzy.highlight = highlight;\n\nexport { uFuzzy as default };\n","export var noop = function () { };\nexport function on(obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (obj && obj.addEventListener) {\n        obj.addEventListener.apply(obj, args);\n    }\n}\nexport function off(obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (obj && obj.removeEventListener) {\n        obj.removeEventListener.apply(obj, args);\n    }\n}\nexport var isBrowser = typeof window !== 'undefined';\nexport var isNavigator = typeof navigator !== 'undefined';\n","import { useEffect, useLayoutEffect } from 'react';\nimport { isBrowser } from './misc/util';\nvar useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\nexport default useIsomorphicLayoutEffect;\n","import { useMemo, useState } from 'react';\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect';\nimport { isBrowser, noop } from './misc/util';\nvar defaultState = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n};\nfunction useMeasure() {\n    var _a = useState(null), element = _a[0], ref = _a[1];\n    var _b = useState(defaultState), rect = _b[0], setRect = _b[1];\n    var observer = useMemo(function () {\n        return new window.ResizeObserver(function (entries) {\n            if (entries[0]) {\n                var _a = entries[0].contentRect, x = _a.x, y = _a.y, width = _a.width, height = _a.height, top_1 = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n                setRect({ x: x, y: y, width: width, height: height, top: top_1, left: left, bottom: bottom, right: right });\n            }\n        });\n    }, []);\n    useIsomorphicLayoutEffect(function () {\n        if (!element)\n            return;\n        observer.observe(element);\n        return function () {\n            observer.disconnect();\n        };\n    }, [element]);\n    return [ref, rect];\n}\nexport default isBrowser && typeof window.ResizeObserver !== 'undefined'\n    ? useMeasure\n    : (function () { return [noop, defaultState]; });\n","const PIXELS_PER_LEVEL = 22 * window.devicePixelRatio;\nconst MUTE_THRESHOLD = 10 * window.devicePixelRatio;\nconst HIDE_THRESHOLD = 0.5 * window.devicePixelRatio;\nconst LABEL_THRESHOLD = 20 * window.devicePixelRatio;\nconst BAR_BORDER_WIDTH = 0.5 * window.devicePixelRatio;\nconst BAR_TEXT_PADDING_LEFT = 4 * window.devicePixelRatio;\nconst GROUP_STRIP_WIDTH = 3 * window.devicePixelRatio;\nconst GROUP_STRIP_PADDING = 3 * window.devicePixelRatio;\nconst GROUP_STRIP_MARGIN_LEFT = 4 * window.devicePixelRatio;\nconst GROUP_TEXT_OFFSET = 2 * window.devicePixelRatio;\nconst MIN_WIDTH_TO_SHOW_BOTH_TOPTABLE_AND_FLAMEGRAPH = 800;\nconst TOP_TABLE_COLUMN_WIDTH = 120;\n\nexport { BAR_BORDER_WIDTH, BAR_TEXT_PADDING_LEFT, GROUP_STRIP_MARGIN_LEFT, GROUP_STRIP_PADDING, GROUP_STRIP_WIDTH, GROUP_TEXT_OFFSET, HIDE_THRESHOLD, LABEL_THRESHOLD, MIN_WIDTH_TO_SHOW_BOTH_TOPTABLE_AND_FLAMEGRAPH, MUTE_THRESHOLD, PIXELS_PER_LEVEL, TOP_TABLE_COLUMN_WIDTH };\n//# sourceMappingURL=constants.js.map\n","import { jsx, jsxs, Fragment } from 'react/jsx-runtime';\nimport { ContextMenu, MenuItem, MenuGroup } from '@grafana/ui';\n\nconst FlameGraphContextMenu = ({\n  data,\n  itemData,\n  onMenuItemClick,\n  onItemFocus,\n  onSandwich,\n  collapseConfig,\n  onExpandGroup,\n  onCollapseGroup,\n  onExpandAllGroups,\n  onCollapseAllGroups,\n  getExtraContextMenuButtons,\n  collapsing,\n  allGroupsExpanded,\n  allGroupsCollapsed,\n  selectedView,\n  search\n}) => {\n  function renderItems() {\n    const extraButtons = (getExtraContextMenuButtons == null ? void 0 : getExtraContextMenuButtons(itemData, data.data, {\n      selectedView,\n      isDiff: data.isDiffFlamegraph(),\n      search,\n      collapseConfig\n    })) || [];\n    return /* @__PURE__ */ jsxs(Fragment, { children: [\n      /* @__PURE__ */ jsx(\n        MenuItem,\n        {\n          label: \"Focus block\",\n          icon: \"eye\",\n          onClick: () => {\n            onItemFocus();\n            onMenuItemClick();\n          }\n        }\n      ),\n      /* @__PURE__ */ jsx(\n        MenuItem,\n        {\n          label: \"Copy function name\",\n          icon: \"copy\",\n          onClick: () => {\n            navigator.clipboard.writeText(itemData.label).then(() => {\n              onMenuItemClick();\n            });\n          }\n        }\n      ),\n      /* @__PURE__ */ jsx(\n        MenuItem,\n        {\n          label: \"Sandwich view\",\n          icon: \"gf-show-context\",\n          onClick: () => {\n            onSandwich();\n            onMenuItemClick();\n          }\n        }\n      ),\n      extraButtons.map(({ label, icon, onClick }) => {\n        return /* @__PURE__ */ jsx(MenuItem, { label, icon, onClick: () => onClick() }, label);\n      }),\n      collapsing && /* @__PURE__ */ jsxs(MenuGroup, { label: \"Grouping\", children: [\n        collapseConfig ? collapseConfig.collapsed ? /* @__PURE__ */ jsx(\n          MenuItem,\n          {\n            label: \"Expand group\",\n            icon: \"angle-double-down\",\n            onClick: () => {\n              onExpandGroup();\n              onMenuItemClick();\n            }\n          }\n        ) : /* @__PURE__ */ jsx(\n          MenuItem,\n          {\n            label: \"Collapse group\",\n            icon: \"angle-double-up\",\n            onClick: () => {\n              onCollapseGroup();\n              onMenuItemClick();\n            }\n          }\n        ) : null,\n        !allGroupsExpanded && /* @__PURE__ */ jsx(\n          MenuItem,\n          {\n            label: \"Expand all groups\",\n            icon: \"angle-double-down\",\n            onClick: () => {\n              onExpandAllGroups();\n              onMenuItemClick();\n            }\n          }\n        ),\n        !allGroupsCollapsed && /* @__PURE__ */ jsx(\n          MenuItem,\n          {\n            label: \"Collapse all groups\",\n            icon: \"angle-double-up\",\n            onClick: () => {\n              onCollapseAllGroups();\n              onMenuItemClick();\n            }\n          }\n        )\n      ] })\n    ] });\n  }\n  return /* @__PURE__ */ jsx(\"div\", { \"data-testid\": \"contextMenu\", children: /* @__PURE__ */ jsx(\n    ContextMenu,\n    {\n      renderMenuItems: renderItems,\n      x: itemData.posX + 10,\n      y: itemData.posY,\n      focusOnOpen: false\n    }\n  ) });\n};\n\nexport { FlameGraphContextMenu as default };\n//# sourceMappingURL=FlameGraphContextMenu.js.map\n","import { jsx, jsxs } from 'react/jsx-runtime';\nimport { css } from '@emotion/css';\nimport { getValueFormat } from '@grafana/data';\nimport { useStyles2, InteractiveTable, Portal, VizTooltipContainer } from '@grafana/ui';\n\nconst FlameGraphTooltip = ({ data, item, totalTicks, position, collapseConfig }) => {\n  const styles = useStyles2(getStyles);\n  if (!(item && position)) {\n    return null;\n  }\n  let content;\n  if (data.isDiffFlamegraph()) {\n    const tableData = getDiffTooltipData(data, item, totalTicks);\n    content = /* @__PURE__ */ jsx(\n      InteractiveTable,\n      {\n        className: styles.tooltipTable,\n        columns: [\n          { id: \"label\", header: \"\" },\n          { id: \"baseline\", header: \"Baseline\" },\n          { id: \"comparison\", header: \"Comparison\" },\n          { id: \"diff\", header: \"Diff\" }\n        ],\n        data: tableData,\n        getRowId: (originalRow) => originalRow.rowId\n      }\n    );\n  } else {\n    const tooltipData = getTooltipData(data, item, totalTicks);\n    content = /* @__PURE__ */ jsxs(\"p\", { className: styles.lastParagraph, children: [\n      tooltipData.unitTitle,\n      /* @__PURE__ */ jsx(\"br\", {}),\n      \"Total: \",\n      /* @__PURE__ */ jsx(\"b\", { children: tooltipData.unitValue }),\n      \" (\",\n      tooltipData.percentValue,\n      \"%)\",\n      /* @__PURE__ */ jsx(\"br\", {}),\n      \"Self: \",\n      /* @__PURE__ */ jsx(\"b\", { children: tooltipData.unitSelf }),\n      \" (\",\n      tooltipData.percentSelf,\n      \"%)\",\n      /* @__PURE__ */ jsx(\"br\", {}),\n      \"Samples: \",\n      /* @__PURE__ */ jsx(\"b\", { children: tooltipData.samples })\n    ] });\n  }\n  return /* @__PURE__ */ jsx(Portal, { children: /* @__PURE__ */ jsx(VizTooltipContainer, { className: styles.tooltipContainer, position, offset: { x: 15, y: 0 }, children: /* @__PURE__ */ jsxs(\"div\", { className: styles.tooltipContent, children: [\n    /* @__PURE__ */ jsxs(\"p\", { className: styles.tooltipName, children: [\n      data.getLabel(item.itemIndexes[0]),\n      collapseConfig && collapseConfig.collapsed ? /* @__PURE__ */ jsxs(\"span\", { children: [\n        /* @__PURE__ */ jsx(\"br\", {}),\n        \"and \",\n        collapseConfig.items.length,\n        \" similar items\"\n      ] }) : \"\"\n    ] }),\n    content\n  ] }) }) });\n};\nconst getTooltipData = (data, item, totalTicks) => {\n  const displayValue = data.valueDisplayProcessor(item.value);\n  const displaySelf = data.getSelfDisplay(item.itemIndexes);\n  const percentValue = Math.round(1e4 * (displayValue.numeric / totalTicks)) / 100;\n  const percentSelf = Math.round(1e4 * (displaySelf.numeric / totalTicks)) / 100;\n  let unitValue = displayValue.text + displayValue.suffix;\n  let unitSelf = displaySelf.text + displaySelf.suffix;\n  const unitTitle = data.getUnitTitle();\n  if (unitTitle === \"Count\") {\n    if (!displayValue.suffix) {\n      unitValue = displayValue.text;\n    }\n    if (!displaySelf.suffix) {\n      unitSelf = displaySelf.text;\n    }\n  }\n  return {\n    percentValue,\n    percentSelf,\n    unitTitle,\n    unitValue,\n    unitSelf,\n    samples: displayValue.numeric.toLocaleString()\n  };\n};\nconst getDiffTooltipData = (data, item, totalTicks) => {\n  const levels = data.getLevels();\n  const totalTicksRight = levels[0][0].valueRight;\n  const totalTicksLeft = totalTicks - totalTicksRight;\n  const valueLeft = item.value - item.valueRight;\n  const percentageLeft = Math.round(1e4 * valueLeft / totalTicksLeft) / 100;\n  const percentageRight = Math.round(1e4 * item.valueRight / totalTicksRight) / 100;\n  const diff = (percentageRight - percentageLeft) / percentageLeft * 100;\n  const displayValueLeft = getValueWithUnit(data, data.valueDisplayProcessor(valueLeft));\n  const displayValueRight = getValueWithUnit(data, data.valueDisplayProcessor(item.valueRight));\n  const shortValFormat = getValueFormat(\"short\");\n  return [\n    {\n      rowId: \"1\",\n      label: \"% of total\",\n      baseline: percentageLeft + \"%\",\n      comparison: percentageRight + \"%\",\n      diff: shortValFormat(diff).text + \"%\"\n    },\n    {\n      rowId: \"2\",\n      label: \"Value\",\n      baseline: displayValueLeft,\n      comparison: displayValueRight,\n      diff: getValueWithUnit(data, data.valueDisplayProcessor(item.valueRight - valueLeft))\n    },\n    {\n      rowId: \"3\",\n      label: \"Samples\",\n      baseline: shortValFormat(valueLeft).text,\n      comparison: shortValFormat(item.valueRight).text,\n      diff: shortValFormat(item.valueRight - valueLeft).text\n    }\n  ];\n};\nfunction getValueWithUnit(data, displayValue) {\n  let unitValue = displayValue.text + displayValue.suffix;\n  const unitTitle = data.getUnitTitle();\n  if (unitTitle === \"Count\") {\n    if (!displayValue.suffix) {\n      unitValue = displayValue.text;\n    }\n  }\n  return unitValue;\n}\nconst getStyles = (theme) => ({\n  tooltipContainer: css({\n    title: \"tooltipContainer\",\n    overflow: \"hidden\"\n  }),\n  tooltipContent: css({\n    title: \"tooltipContent\",\n    fontSize: theme.typography.bodySmall.fontSize,\n    width: \"100%\"\n  }),\n  tooltipName: css({\n    title: \"tooltipName\",\n    marginTop: 0,\n    wordBreak: \"break-all\"\n  }),\n  lastParagraph: css({\n    title: \"lastParagraph\",\n    marginBottom: 0\n  }),\n  name: css({\n    title: \"name\",\n    marginBottom: \"10px\"\n  }),\n  tooltipTable: css({\n    title: \"tooltipTable\",\n    maxWidth: \"400px\"\n  })\n});\n\nexport { FlameGraphTooltip as default, getDiffTooltipData, getTooltipData };\n//# sourceMappingURL=FlameGraphTooltip.js.map\n","// This file is autogenerated. It's used to publish ESM to npm.\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\nvar trimLeft = /^\\s+/;\nvar trimRight = /\\s+$/;\nfunction tinycolor(color, opts) {\n  color = color ? color : \"\";\n  opts = opts || {};\n\n  // If input is already a tinycolor, return itself\n  if (color instanceof tinycolor) {\n    return color;\n  }\n  // If we are called as a function, call using new instead\n  if (!(this instanceof tinycolor)) {\n    return new tinycolor(color, opts);\n  }\n  var rgb = inputToRGB(color);\n  this._originalInput = color, this._r = rgb.r, this._g = rgb.g, this._b = rgb.b, this._a = rgb.a, this._roundA = Math.round(100 * this._a) / 100, this._format = opts.format || rgb.format;\n  this._gradientType = opts.gradientType;\n\n  // Don't let the range of [0,255] come back in [0,1].\n  // Potentially lose a little bit of precision here, but will fix issues where\n  // .5 gets interpreted as half of the total, instead of half of 1\n  // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n  if (this._r < 1) this._r = Math.round(this._r);\n  if (this._g < 1) this._g = Math.round(this._g);\n  if (this._b < 1) this._b = Math.round(this._b);\n  this._ok = rgb.ok;\n}\ntinycolor.prototype = {\n  isDark: function isDark() {\n    return this.getBrightness() < 128;\n  },\n  isLight: function isLight() {\n    return !this.isDark();\n  },\n  isValid: function isValid() {\n    return this._ok;\n  },\n  getOriginalInput: function getOriginalInput() {\n    return this._originalInput;\n  },\n  getFormat: function getFormat() {\n    return this._format;\n  },\n  getAlpha: function getAlpha() {\n    return this._a;\n  },\n  getBrightness: function getBrightness() {\n    //http://www.w3.org/TR/AERT#color-contrast\n    var rgb = this.toRgb();\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n  },\n  getLuminance: function getLuminance() {\n    //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    var rgb = this.toRgb();\n    var RsRGB, GsRGB, BsRGB, R, G, B;\n    RsRGB = rgb.r / 255;\n    GsRGB = rgb.g / 255;\n    BsRGB = rgb.b / 255;\n    if (RsRGB <= 0.03928) R = RsRGB / 12.92;else R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n    if (GsRGB <= 0.03928) G = GsRGB / 12.92;else G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n    if (BsRGB <= 0.03928) B = BsRGB / 12.92;else B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n    return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n  },\n  setAlpha: function setAlpha(value) {\n    this._a = boundAlpha(value);\n    this._roundA = Math.round(100 * this._a) / 100;\n    return this;\n  },\n  toHsv: function toHsv() {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    return {\n      h: hsv.h * 360,\n      s: hsv.s,\n      v: hsv.v,\n      a: this._a\n    };\n  },\n  toHsvString: function toHsvString() {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    var h = Math.round(hsv.h * 360),\n      s = Math.round(hsv.s * 100),\n      v = Math.round(hsv.v * 100);\n    return this._a == 1 ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\" : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n  },\n  toHsl: function toHsl() {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    return {\n      h: hsl.h * 360,\n      s: hsl.s,\n      l: hsl.l,\n      a: this._a\n    };\n  },\n  toHslString: function toHslString() {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    var h = Math.round(hsl.h * 360),\n      s = Math.round(hsl.s * 100),\n      l = Math.round(hsl.l * 100);\n    return this._a == 1 ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\" : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n  },\n  toHex: function toHex(allow3Char) {\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\n  },\n  toHexString: function toHexString(allow3Char) {\n    return \"#\" + this.toHex(allow3Char);\n  },\n  toHex8: function toHex8(allow4Char) {\n    return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n  },\n  toHex8String: function toHex8String(allow4Char) {\n    return \"#\" + this.toHex8(allow4Char);\n  },\n  toRgb: function toRgb() {\n    return {\n      r: Math.round(this._r),\n      g: Math.round(this._g),\n      b: Math.round(this._b),\n      a: this._a\n    };\n  },\n  toRgbString: function toRgbString() {\n    return this._a == 1 ? \"rgb(\" + Math.round(this._r) + \", \" + Math.round(this._g) + \", \" + Math.round(this._b) + \")\" : \"rgba(\" + Math.round(this._r) + \", \" + Math.round(this._g) + \", \" + Math.round(this._b) + \", \" + this._roundA + \")\";\n  },\n  toPercentageRgb: function toPercentageRgb() {\n    return {\n      r: Math.round(bound01(this._r, 255) * 100) + \"%\",\n      g: Math.round(bound01(this._g, 255) * 100) + \"%\",\n      b: Math.round(bound01(this._b, 255) * 100) + \"%\",\n      a: this._a\n    };\n  },\n  toPercentageRgbString: function toPercentageRgbString() {\n    return this._a == 1 ? \"rgb(\" + Math.round(bound01(this._r, 255) * 100) + \"%, \" + Math.round(bound01(this._g, 255) * 100) + \"%, \" + Math.round(bound01(this._b, 255) * 100) + \"%)\" : \"rgba(\" + Math.round(bound01(this._r, 255) * 100) + \"%, \" + Math.round(bound01(this._g, 255) * 100) + \"%, \" + Math.round(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n  },\n  toName: function toName() {\n    if (this._a === 0) {\n      return \"transparent\";\n    }\n    if (this._a < 1) {\n      return false;\n    }\n    return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n  },\n  toFilter: function toFilter(secondColor) {\n    var hex8String = \"#\" + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n    var secondHex8String = hex8String;\n    var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n    if (secondColor) {\n      var s = tinycolor(secondColor);\n      secondHex8String = \"#\" + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n    }\n    return \"progid:DXImageTransform.Microsoft.gradient(\" + gradientType + \"startColorstr=\" + hex8String + \",endColorstr=\" + secondHex8String + \")\";\n  },\n  toString: function toString(format) {\n    var formatSet = !!format;\n    format = format || this._format;\n    var formattedString = false;\n    var hasAlpha = this._a < 1 && this._a >= 0;\n    var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n    if (needsAlphaFormat) {\n      // Special case for \"transparent\", all other non-alpha formats\n      // will return rgba when there is transparency.\n      if (format === \"name\" && this._a === 0) {\n        return this.toName();\n      }\n      return this.toRgbString();\n    }\n    if (format === \"rgb\") {\n      formattedString = this.toRgbString();\n    }\n    if (format === \"prgb\") {\n      formattedString = this.toPercentageRgbString();\n    }\n    if (format === \"hex\" || format === \"hex6\") {\n      formattedString = this.toHexString();\n    }\n    if (format === \"hex3\") {\n      formattedString = this.toHexString(true);\n    }\n    if (format === \"hex4\") {\n      formattedString = this.toHex8String(true);\n    }\n    if (format === \"hex8\") {\n      formattedString = this.toHex8String();\n    }\n    if (format === \"name\") {\n      formattedString = this.toName();\n    }\n    if (format === \"hsl\") {\n      formattedString = this.toHslString();\n    }\n    if (format === \"hsv\") {\n      formattedString = this.toHsvString();\n    }\n    return formattedString || this.toHexString();\n  },\n  clone: function clone() {\n    return tinycolor(this.toString());\n  },\n  _applyModification: function _applyModification(fn, args) {\n    var color = fn.apply(null, [this].concat([].slice.call(args)));\n    this._r = color._r;\n    this._g = color._g;\n    this._b = color._b;\n    this.setAlpha(color._a);\n    return this;\n  },\n  lighten: function lighten() {\n    return this._applyModification(_lighten, arguments);\n  },\n  brighten: function brighten() {\n    return this._applyModification(_brighten, arguments);\n  },\n  darken: function darken() {\n    return this._applyModification(_darken, arguments);\n  },\n  desaturate: function desaturate() {\n    return this._applyModification(_desaturate, arguments);\n  },\n  saturate: function saturate() {\n    return this._applyModification(_saturate, arguments);\n  },\n  greyscale: function greyscale() {\n    return this._applyModification(_greyscale, arguments);\n  },\n  spin: function spin() {\n    return this._applyModification(_spin, arguments);\n  },\n  _applyCombination: function _applyCombination(fn, args) {\n    return fn.apply(null, [this].concat([].slice.call(args)));\n  },\n  analogous: function analogous() {\n    return this._applyCombination(_analogous, arguments);\n  },\n  complement: function complement() {\n    return this._applyCombination(_complement, arguments);\n  },\n  monochromatic: function monochromatic() {\n    return this._applyCombination(_monochromatic, arguments);\n  },\n  splitcomplement: function splitcomplement() {\n    return this._applyCombination(_splitcomplement, arguments);\n  },\n  // Disabled until https://github.com/bgrins/TinyColor/issues/254\n  // polyad: function (number) {\n  //   return this._applyCombination(polyad, [number]);\n  // },\n  triad: function triad() {\n    return this._applyCombination(polyad, [3]);\n  },\n  tetrad: function tetrad() {\n    return this._applyCombination(polyad, [4]);\n  }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function (color, opts) {\n  if (_typeof(color) == \"object\") {\n    var newColor = {};\n    for (var i in color) {\n      if (color.hasOwnProperty(i)) {\n        if (i === \"a\") {\n          newColor[i] = color[i];\n        } else {\n          newColor[i] = convertToPercentage(color[i]);\n        }\n      }\n    }\n    color = newColor;\n  }\n  return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n  var rgb = {\n    r: 0,\n    g: 0,\n    b: 0\n  };\n  var a = 1;\n  var s = null;\n  var v = null;\n  var l = null;\n  var ok = false;\n  var format = false;\n  if (typeof color == \"string\") {\n    color = stringInputToObject(color);\n  }\n  if (_typeof(color) == \"object\") {\n    if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n      rgb = rgbToRgb(color.r, color.g, color.b);\n      ok = true;\n      format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n      s = convertToPercentage(color.s);\n      v = convertToPercentage(color.v);\n      rgb = hsvToRgb(color.h, s, v);\n      ok = true;\n      format = \"hsv\";\n    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n      s = convertToPercentage(color.s);\n      l = convertToPercentage(color.l);\n      rgb = hslToRgb(color.h, s, l);\n      ok = true;\n      format = \"hsl\";\n    }\n    if (color.hasOwnProperty(\"a\")) {\n      a = color.a;\n    }\n  }\n  a = boundAlpha(a);\n  return {\n    ok: ok,\n    format: color.format || format,\n    r: Math.min(255, Math.max(rgb.r, 0)),\n    g: Math.min(255, Math.max(rgb.g, 0)),\n    b: Math.min(255, Math.max(rgb.b, 0)),\n    a: a\n  };\n}\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b) {\n  return {\n    r: bound01(r, 255) * 255,\n    g: bound01(g, 255) * 255,\n    b: bound01(b, 255) * 255\n  };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    l = (max + min) / 2;\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return {\n    h: h,\n    s: s,\n    l: l\n  };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n  h = bound01(h, 360);\n  s = bound01(s, 100);\n  l = bound01(l, 100);\n  function hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n  }\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n  return {\n    r: r * 255,\n    g: g * 255,\n    b: b * 255\n  };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    v = max;\n  var d = max - min;\n  s = max === 0 ? 0 : d / max;\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return {\n    h: h,\n    s: s,\n    v: v\n  };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hsvToRgb(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n  var i = Math.floor(h),\n    f = h - i,\n    p = v * (1 - s),\n    q = v * (1 - f * s),\n    t = v * (1 - (1 - f) * s),\n    mod = i % 6,\n    r = [v, q, p, p, t, v][mod],\n    g = [t, v, v, q, p, p][mod],\n    b = [p, p, t, v, v, q][mod];\n  return {\n    r: r * 255,\n    g: g * 255,\n    b: b * 255\n  };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n  var hex = [pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16))];\n\n  // Return a 3 character hex if possible\n  if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n  }\n  return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n  var hex = [pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16)), pad2(convertDecimalToHex(a))];\n\n  // Return a 4 character hex if possible\n  if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n  }\n  return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n  var hex = [pad2(convertDecimalToHex(a)), pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16))];\n  return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n  if (!color1 || !color2) return false;\n  return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\ntinycolor.random = function () {\n  return tinycolor.fromRatio({\n    r: Math.random(),\n    g: Math.random(),\n    b: Math.random()\n  });\n};\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction _desaturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s -= amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\nfunction _saturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s += amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\nfunction _greyscale(color) {\n  return tinycolor(color).desaturate(100);\n}\nfunction _lighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l += amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\nfunction _brighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var rgb = tinycolor(color).toRgb();\n  rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n  rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n  rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n  return tinycolor(rgb);\n}\nfunction _darken(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l -= amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction _spin(color, amount) {\n  var hsl = tinycolor(color).toHsl();\n  var hue = (hsl.h + amount) % 360;\n  hsl.h = hue < 0 ? 360 + hue : hue;\n  return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction _complement(color) {\n  var hsl = tinycolor(color).toHsl();\n  hsl.h = (hsl.h + 180) % 360;\n  return tinycolor(hsl);\n}\nfunction polyad(color, number) {\n  if (isNaN(number) || number <= 0) {\n    throw new Error(\"Argument to polyad must be a positive number\");\n  }\n  var hsl = tinycolor(color).toHsl();\n  var result = [tinycolor(color)];\n  var step = 360 / number;\n  for (var i = 1; i < number; i++) {\n    result.push(tinycolor({\n      h: (hsl.h + i * step) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }));\n  }\n  return result;\n}\nfunction _splitcomplement(color) {\n  var hsl = tinycolor(color).toHsl();\n  var h = hsl.h;\n  return [tinycolor(color), tinycolor({\n    h: (h + 72) % 360,\n    s: hsl.s,\n    l: hsl.l\n  }), tinycolor({\n    h: (h + 216) % 360,\n    s: hsl.s,\n    l: hsl.l\n  })];\n}\nfunction _analogous(color, results, slices) {\n  results = results || 6;\n  slices = slices || 30;\n  var hsl = tinycolor(color).toHsl();\n  var part = 360 / slices;\n  var ret = [tinycolor(color)];\n  for (hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results;) {\n    hsl.h = (hsl.h + part) % 360;\n    ret.push(tinycolor(hsl));\n  }\n  return ret;\n}\nfunction _monochromatic(color, results) {\n  results = results || 6;\n  var hsv = tinycolor(color).toHsv();\n  var h = hsv.h,\n    s = hsv.s,\n    v = hsv.v;\n  var ret = [];\n  var modification = 1 / results;\n  while (results--) {\n    ret.push(tinycolor({\n      h: h,\n      s: s,\n      v: v\n    }));\n    v = (v + modification) % 1;\n  }\n  return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function (color1, color2, amount) {\n  amount = amount === 0 ? 0 : amount || 50;\n  var rgb1 = tinycolor(color1).toRgb();\n  var rgb2 = tinycolor(color2).toRgb();\n  var p = amount / 100;\n  var rgba = {\n    r: (rgb2.r - rgb1.r) * p + rgb1.r,\n    g: (rgb2.g - rgb1.g) * p + rgb1.g,\n    b: (rgb2.b - rgb1.b) * p + rgb1.b,\n    a: (rgb2.a - rgb1.a) * p + rgb1.a\n  };\n  return tinycolor(rgba);\n};\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function (color1, color2) {\n  var c1 = tinycolor(color1);\n  var c2 = tinycolor(color2);\n  return (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) / (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function (color1, color2, wcag2) {\n  var readability = tinycolor.readability(color1, color2);\n  var wcag2Parms, out;\n  out = false;\n  wcag2Parms = validateWCAG2Parms(wcag2);\n  switch (wcag2Parms.level + wcag2Parms.size) {\n    case \"AAsmall\":\n    case \"AAAlarge\":\n      out = readability >= 4.5;\n      break;\n    case \"AAlarge\":\n      out = readability >= 3;\n      break;\n    case \"AAAsmall\":\n      out = readability >= 7;\n      break;\n  }\n  return out;\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function (baseColor, colorList, args) {\n  var bestColor = null;\n  var bestScore = 0;\n  var readability;\n  var includeFallbackColors, level, size;\n  args = args || {};\n  includeFallbackColors = args.includeFallbackColors;\n  level = args.level;\n  size = args.size;\n  for (var i = 0; i < colorList.length; i++) {\n    readability = tinycolor.readability(baseColor, colorList[i]);\n    if (readability > bestScore) {\n      bestScore = readability;\n      bestColor = tinycolor(colorList[i]);\n    }\n  }\n  if (tinycolor.isReadable(baseColor, bestColor, {\n    level: level,\n    size: size\n  }) || !includeFallbackColors) {\n    return bestColor;\n  } else {\n    args.includeFallbackColors = false;\n    return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n  }\n};\n\n// Big List of Colors\n// ------------------\n// <https://www.w3.org/TR/css-color-4/#named-colors>\nvar names = tinycolor.names = {\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n  var flipped = {};\n  for (var i in o) {\n    if (o.hasOwnProperty(i)) {\n      flipped[o[i]] = i;\n    }\n  }\n  return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n  a = parseFloat(a);\n  if (isNaN(a) || a < 0 || a > 1) {\n    a = 1;\n  }\n  return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n  if (isOnePointZero(n)) n = \"100%\";\n  var processPercent = isPercentage(n);\n  n = Math.min(max, Math.max(0, parseFloat(n)));\n\n  // Automatically convert percentage into number\n  if (processPercent) {\n    n = parseInt(n * max, 10) / 100;\n  }\n\n  // Handle floating point rounding errors\n  if (Math.abs(n - max) < 0.000001) {\n    return 1;\n  }\n\n  // Convert into [0, 1] range if it isn't already\n  return n % max / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n  return Math.min(1, Math.max(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n  return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n  return typeof n == \"string\" && n.indexOf(\".\") != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n  return typeof n === \"string\" && n.indexOf(\"%\") != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n  return c.length == 1 ? \"0\" + c : \"\" + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n  if (n <= 1) {\n    n = n * 100 + \"%\";\n  }\n  return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n  return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n  return parseIntFromHex(h) / 255;\n}\nvar matchers = function () {\n  // <http://www.w3.org/TR/css3-values/#integers>\n  var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n  // <http://www.w3.org/TR/css3-values/#number-value>\n  var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n  // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n  var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n  // Actual matching.\n  // Parentheses and commas are optional, but not required.\n  // Whitespace can take the place of commas or opening paren\n  var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n  var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n  return {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n    rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n    hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n    hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n    hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n    hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n  };\n}();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n  return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\n  var named = false;\n  if (names[color]) {\n    color = names[color];\n    named = true;\n  } else if (color == \"transparent\") {\n    return {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0,\n      format: \"name\"\n    };\n  }\n\n  // Try to match string input using regular expressions.\n  // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n  // Just return an object and let the conversion functions handle that.\n  // This way the result will be the same whether the tinycolor is initialized with string or object.\n  var match;\n  if (match = matchers.rgb.exec(color)) {\n    return {\n      r: match[1],\n      g: match[2],\n      b: match[3]\n    };\n  }\n  if (match = matchers.rgba.exec(color)) {\n    return {\n      r: match[1],\n      g: match[2],\n      b: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hsl.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      l: match[3]\n    };\n  }\n  if (match = matchers.hsla.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      l: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hsv.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      v: match[3]\n    };\n  }\n  if (match = matchers.hsva.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      v: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hex8.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      a: convertHexToDecimal(match[4]),\n      format: named ? \"name\" : \"hex8\"\n    };\n  }\n  if (match = matchers.hex6.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      format: named ? \"name\" : \"hex\"\n    };\n  }\n  if (match = matchers.hex4.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      a: convertHexToDecimal(match[4] + \"\" + match[4]),\n      format: named ? \"name\" : \"hex8\"\n    };\n  }\n  if (match = matchers.hex3.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      format: named ? \"name\" : \"hex\"\n    };\n  }\n  return false;\n}\nfunction validateWCAG2Parms(parms) {\n  // return valid WCAG2 parms for isReadable.\n  // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n  var level, size;\n  parms = parms || {\n    level: \"AA\",\n    size: \"small\"\n  };\n  level = (parms.level || \"AA\").toUpperCase();\n  size = (parms.size || \"small\").toLowerCase();\n  if (level !== \"AA\" && level !== \"AAA\") {\n    level = \"AA\";\n  }\n  if (size !== \"small\" && size !== \"large\") {\n    size = \"small\";\n  }\n  return {\n    level: level,\n    size: size\n  };\n}\n\nexport { tinycolor as default };\n","var SampleUnit = /* @__PURE__ */ ((SampleUnit2) => {\n  SampleUnit2[\"Bytes\"] = \"bytes\";\n  SampleUnit2[\"Short\"] = \"short\";\n  SampleUnit2[\"Nanoseconds\"] = \"ns\";\n  return SampleUnit2;\n})(SampleUnit || {});\nvar SelectedView = /* @__PURE__ */ ((SelectedView2) => {\n  SelectedView2[\"TopTable\"] = \"topTable\";\n  SelectedView2[\"FlameGraph\"] = \"flameGraph\";\n  SelectedView2[\"Both\"] = \"both\";\n  return SelectedView2;\n})(SelectedView || {});\nvar ColorScheme = /* @__PURE__ */ ((ColorScheme2) => {\n  ColorScheme2[\"ValueBased\"] = \"valueBased\";\n  ColorScheme2[\"PackageBased\"] = \"packageBased\";\n  return ColorScheme2;\n})(ColorScheme || {});\nvar ColorSchemeDiff = /* @__PURE__ */ ((ColorSchemeDiff2) => {\n  ColorSchemeDiff2[\"Default\"] = \"default\";\n  ColorSchemeDiff2[\"DiffColorBlind\"] = \"diffColorBlind\";\n  return ColorSchemeDiff2;\n})(ColorSchemeDiff || {});\n\nexport { ColorScheme, ColorSchemeDiff, SampleUnit, SelectedView };\n//# sourceMappingURL=types.js.map\n","import { scaleLinear } from 'd3';\nimport color from 'tinycolor2';\nimport { ColorSchemeDiff } from '../types.js';\nimport murmurhash3_32_gc from './murmur3.js';\n\nconst packageColors = [\n  color({ h: 24, s: 69, l: 60 }),\n  color({ h: 34, s: 65, l: 65 }),\n  color({ h: 194, s: 52, l: 61 }),\n  color({ h: 163, s: 45, l: 55 }),\n  color({ h: 211, s: 48, l: 60 }),\n  color({ h: 246, s: 40, l: 65 }),\n  color({ h: 305, s: 63, l: 79 }),\n  color({ h: 47, s: 100, l: 73 }),\n  color({ r: 183, g: 219, b: 171 }),\n  color({ r: 244, g: 213, b: 152 }),\n  color({ r: 78, g: 146, b: 249 }),\n  color({ r: 249, g: 186, b: 143 }),\n  color({ r: 242, g: 145, b: 145 }),\n  color({ r: 130, g: 181, b: 216 }),\n  color({ r: 229, g: 168, b: 226 }),\n  color({ r: 174, g: 162, b: 224 }),\n  color({ r: 154, g: 196, b: 138 }),\n  color({ r: 242, g: 201, b: 109 }),\n  color({ r: 101, g: 197, b: 219 }),\n  color({ r: 249, g: 147, b: 78 }),\n  color({ r: 234, g: 100, b: 96 }),\n  color({ r: 81, g: 149, b: 206 }),\n  color({ r: 214, g: 131, b: 206 }),\n  color({ r: 128, g: 110, b: 183 })\n];\nconst byValueMinColor = getBarColorByValue(1, 100, 0, 1);\nconst byValueMaxColor = getBarColorByValue(100, 100, 0, 1);\nconst byValueGradient = `linear-gradient(90deg, ${byValueMinColor} 0%, ${byValueMaxColor} 100%)`;\nconst byPackageGradient = `linear-gradient(90deg, ${packageColors[0]} 0%, ${packageColors[2]} 30%, ${packageColors[6]} 50%, ${packageColors[7]} 70%, ${packageColors[8]} 100%)`;\nfunction getBarColorByValue(value, totalTicks, rangeMin, rangeMax) {\n  const intensity = Math.min(1, value / totalTicks / (rangeMax - rangeMin));\n  const h = 50 - 50 * intensity;\n  const l = 65 + 7 * intensity;\n  return color({ h, s: 100, l });\n}\nfunction getBarColorByPackage(label, theme) {\n  const packageName = getPackageName(label);\n  const hash = murmurhash3_32_gc(packageName || \"\", 0);\n  const colorIndex = hash % packageColors.length;\n  let packageColor = packageColors[colorIndex].clone();\n  if (theme.isLight) {\n    packageColor = packageColor.brighten(15);\n  }\n  return packageColor;\n}\nconst diffDefaultColors = [\"rgb(0, 170, 0)\", \"rgb(148, 142, 142)\", \"rgb(200, 0, 0)\"];\nconst diffDefaultGradient = `linear-gradient(90deg, ${diffDefaultColors[0]} 0%, ${diffDefaultColors[1]} 50%, ${diffDefaultColors[2]} 100%)`;\nconst diffColorBlindColors = [\"rgb(26, 133, 255)\", \"rgb(148, 142, 142)\", \"rgb(220, 50, 32)\"];\nconst diffColorBlindGradient = `linear-gradient(90deg, ${diffColorBlindColors[0]} 0%, ${diffColorBlindColors[1]} 50%, ${diffColorBlindColors[2]} 100%)`;\nfunction getBarColorByDiff(ticks, ticksRight, totalTicks, totalTicksRight, colorScheme) {\n  const range = colorScheme === ColorSchemeDiff.Default ? diffDefaultColors : diffColorBlindColors;\n  const colorScale = scaleLinear().domain([-100, 0, 100]).range(range);\n  const ticksLeft = ticks - ticksRight;\n  const totalTicksLeft = totalTicks - totalTicksRight;\n  if (totalTicksRight === 0 || totalTicksLeft === 0) {\n    const rgbString2 = colorScale(0);\n    return color(rgbString2);\n  }\n  const percentageLeft = Math.round(1e4 * ticksLeft / totalTicksLeft) / 100;\n  const percentageRight = Math.round(1e4 * ticksRight / totalTicksRight) / 100;\n  const diff = (percentageRight - percentageLeft) / percentageLeft * 100;\n  const rgbString = colorScale(diff);\n  return color(rgbString);\n}\nconst matchers = [\n  [\"phpspy\", new RegExp(\"^(?<packageName>([^\\\\/]*\\\\/)*)(?<filename>.*\\\\.php+)(?<line_info>.*)$\")],\n  [\"pyspy\", new RegExp(\"^(?<packageName>([^\\\\/]*\\\\/)*)(?<filename>.*\\\\.py+)(?<line_info>.*)$\")],\n  [\"rbspy\", new RegExp(\"^(?<packageName>([^\\\\/]*\\\\/)*)(?<filename>.*\\\\.rb+)(?<line_info>.*)$\")],\n  [\n    \"nodespy\",\n    new RegExp(\"^(\\\\.\\\\/node_modules\\\\/)?(?<packageName>[^/]*)(?<filename>.*\\\\.?(jsx?|tsx?)?):(?<functionName>.*):(?<line_info>.*)$\")\n  ],\n  [\"gospy\", new RegExp(\"^(?<packageName>.*?\\\\/.*?\\\\.|.*?\\\\.|.+)(?<functionName>.*)$\")],\n  // also 'scrape'\n  [\"javaspy\", new RegExp(\"^(?<packageName>.+\\\\/)(?<filename>.+\\\\.)(?<functionName>.+)$\")],\n  [\"dotnetspy\", new RegExp(\"^(?<packageName>.+)\\\\.(.+)\\\\.(.+)\\\\(.*\\\\)$\")],\n  [\"tracing\", new RegExp(\"^(?<packageName>.+?):.*$\")],\n  [\"pyroscope-rs\", new RegExp(\"^(?<packageName>[^::]+)\")],\n  [\"ebpfspy\", new RegExp(\"^(?<packageName>.+)$\")],\n  [\"unknown\", new RegExp(\"^(?<packageName>.+)$\")]\n];\nfunction getPackageName(name) {\n  var _a;\n  for (const [_, matcher] of matchers) {\n    const match = name.match(matcher);\n    if (match) {\n      return ((_a = match.groups) == null ? void 0 : _a.packageName) || \"\";\n    }\n  }\n  return void 0;\n}\n\nexport { byPackageGradient, byValueGradient, diffColorBlindColors, diffColorBlindGradient, diffDefaultColors, diffDefaultGradient, getBarColorByDiff, getBarColorByPackage, getBarColorByValue };\n//# sourceMappingURL=colors.js.map\n","import { useMemo, useEffect, useCallback, useState } from 'react';\nimport color from 'tinycolor2';\nimport { useTheme2 } from '@grafana/ui';\nimport { HIDE_THRESHOLD, PIXELS_PER_LEVEL, BAR_BORDER_WIDTH, LABEL_THRESHOLD, GROUP_STRIP_WIDTH, GROUP_STRIP_PADDING, MUTE_THRESHOLD, GROUP_STRIP_MARGIN_LEFT, GROUP_TEXT_OFFSET, BAR_TEXT_PADDING_LEFT } from '../constants.js';\nimport { ColorSchemeDiff, ColorScheme } from '../types.js';\nimport { getBarColorByDiff, getBarColorByValue, getBarColorByPackage } from './colors.js';\n\nfunction useFlameRender(options) {\n  const {\n    canvasRef,\n    data,\n    root,\n    depth,\n    direction,\n    wrapperWidth,\n    rangeMin,\n    rangeMax,\n    matchedLabels,\n    textAlign,\n    totalViewTicks,\n    totalColorTicks,\n    totalTicksRight,\n    colorScheme,\n    focusedItemData,\n    collapsedMap\n  } = options;\n  const ctx = useSetupCanvas(canvasRef, wrapperWidth, depth);\n  const theme = useTheme2();\n  const mutedColor = useMemo(() => {\n    const barMutedColor = color(theme.colors.background.secondary);\n    return theme.isLight ? barMutedColor.darken(10).toHexString() : barMutedColor.lighten(10).toHexString();\n  }, [theme]);\n  const getBarColor = useColorFunction(\n    totalColorTicks,\n    totalTicksRight,\n    colorScheme,\n    theme,\n    mutedColor,\n    rangeMin,\n    rangeMax,\n    matchedLabels,\n    focusedItemData ? focusedItemData.item.level : 0\n  );\n  const renderFunc = useRenderFunc(ctx, data, getBarColor, textAlign, collapsedMap);\n  useEffect(() => {\n    if (!ctx) {\n      return;\n    }\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    const mutedPath2D = new Path2D();\n    walkTree(\n      root,\n      direction,\n      data,\n      totalViewTicks,\n      rangeMin,\n      rangeMax,\n      wrapperWidth,\n      collapsedMap,\n      (item, x, y, width, height, label, muted) => {\n        if (muted) {\n          mutedPath2D.rect(x, y, width, height);\n        } else {\n          renderFunc(item, x, y, width, height, label);\n        }\n      }\n    );\n    ctx.fillStyle = mutedColor;\n    ctx.fill(mutedPath2D);\n  }, [\n    ctx,\n    data,\n    root,\n    wrapperWidth,\n    rangeMin,\n    rangeMax,\n    totalViewTicks,\n    direction,\n    renderFunc,\n    collapsedMap,\n    mutedColor\n  ]);\n}\nfunction useRenderFunc(ctx, data, getBarColor, textAlign, collapsedMap) {\n  return useMemo(() => {\n    if (!ctx) {\n      return () => {\n      };\n    }\n    const renderFunc = (item, x, y, width, height, label) => {\n      ctx.beginPath();\n      ctx.rect(x + BAR_BORDER_WIDTH, y, width, height);\n      ctx.fillStyle = getBarColor(item, label, false);\n      ctx.stroke();\n      ctx.fill();\n      const collapsedItemConfig = collapsedMap.get(item);\n      let finalLabel = label;\n      if (collapsedItemConfig && collapsedItemConfig.collapsed) {\n        const numberOfCollapsedItems = collapsedItemConfig.items.length;\n        finalLabel = `(${numberOfCollapsedItems}) ` + label;\n      }\n      if (width >= LABEL_THRESHOLD) {\n        if (collapsedItemConfig) {\n          renderLabel(\n            ctx,\n            data,\n            finalLabel,\n            item,\n            width,\n            textAlign === \"left\" ? x + GROUP_STRIP_MARGIN_LEFT + GROUP_TEXT_OFFSET : x,\n            y,\n            textAlign\n          );\n          renderGroupingStrip(ctx, x, y, height, item, collapsedItemConfig);\n        } else {\n          renderLabel(ctx, data, finalLabel, item, width, x, y, textAlign);\n        }\n      }\n    };\n    return renderFunc;\n  }, [ctx, getBarColor, textAlign, data, collapsedMap]);\n}\nfunction renderGroupingStrip(ctx, x, y, height, item, collapsedItemConfig) {\n  const groupStripX = x + GROUP_STRIP_MARGIN_LEFT;\n  ctx.beginPath();\n  ctx.rect(x, y, groupStripX - x + GROUP_STRIP_WIDTH + GROUP_STRIP_PADDING, height);\n  ctx.fill();\n  ctx.beginPath();\n  if (collapsedItemConfig.collapsed) {\n    ctx.rect(groupStripX, y + height / 4, GROUP_STRIP_WIDTH, height / 2);\n  } else {\n    if (collapsedItemConfig.items[0] === item) {\n      ctx.rect(groupStripX, y + height / 2, GROUP_STRIP_WIDTH, height / 2);\n    } else if (collapsedItemConfig.items[collapsedItemConfig.items.length - 1] === item) {\n      ctx.rect(groupStripX, y, GROUP_STRIP_WIDTH, height / 2);\n    } else {\n      ctx.rect(groupStripX, y, GROUP_STRIP_WIDTH, height);\n    }\n  }\n  ctx.fillStyle = \"#666\";\n  ctx.fill();\n}\nfunction walkTree(root, direction, data, totalViewTicks, rangeMin, rangeMax, wrapperWidth, collapsedMap, renderFunc) {\n  const stack = [];\n  stack.push({ item: root, levelOffset: 0 });\n  const pixelsPerTick = wrapperWidth * window.devicePixelRatio / totalViewTicks / (rangeMax - rangeMin);\n  let collapsedItemRendered = void 0;\n  while (stack.length > 0) {\n    const { item, levelOffset } = stack.shift();\n    let curBarTicks = item.value;\n    const muted = curBarTicks * pixelsPerTick <= MUTE_THRESHOLD;\n    const width = curBarTicks * pixelsPerTick - (muted ? 0 : BAR_BORDER_WIDTH * 2);\n    const height = PIXELS_PER_LEVEL;\n    if (width < HIDE_THRESHOLD) {\n      continue;\n    }\n    let offsetModifier = 0;\n    let skipRender = false;\n    const collapsedItemConfig = collapsedMap.get(item);\n    const isCollapsedItem = collapsedItemConfig && collapsedItemConfig.collapsed;\n    if (isCollapsedItem) {\n      if (collapsedItemRendered === collapsedItemConfig.items[0]) {\n        offsetModifier = direction === \"children\" ? -1 : 1;\n        skipRender = true;\n      } else {\n        collapsedItemRendered = void 0;\n      }\n    } else {\n      collapsedItemRendered = void 0;\n    }\n    if (!skipRender) {\n      const barX = getBarX(item.start, totalViewTicks, rangeMin, pixelsPerTick);\n      const barY = (item.level + levelOffset) * PIXELS_PER_LEVEL;\n      let label = data.getLabel(item.itemIndexes[0]);\n      if (isCollapsedItem) {\n        collapsedItemRendered = item;\n      }\n      renderFunc(item, barX, barY, width, height, label, muted);\n    }\n    const nextList = direction === \"children\" ? item.children : item.parents;\n    if (nextList) {\n      stack.unshift(...nextList.map((c) => ({ item: c, levelOffset: levelOffset + offsetModifier })));\n    }\n  }\n}\nfunction useColorFunction(totalTicks, totalTicksRight, colorScheme, theme, mutedColor, rangeMin, rangeMax, matchedLabels, topLevel) {\n  return useCallback(\n    function getColor(item, label, muted) {\n      if (muted && !matchedLabels) {\n        return mutedColor;\n      }\n      const barColor = item.valueRight !== void 0 && (colorScheme === ColorSchemeDiff.Default || colorScheme === ColorSchemeDiff.DiffColorBlind) ? getBarColorByDiff(item.value, item.valueRight, totalTicks, totalTicksRight, colorScheme) : colorScheme === ColorScheme.ValueBased ? getBarColorByValue(item.value, totalTicks, rangeMin, rangeMax) : getBarColorByPackage(label, theme);\n      if (matchedLabels) {\n        return matchedLabels.has(label) ? barColor.toHslString() : mutedColor;\n      }\n      return item.level > topLevel - 1 ? barColor.toHslString() : barColor.lighten(15).toHslString();\n    },\n    [totalTicks, totalTicksRight, colorScheme, theme, rangeMin, rangeMax, matchedLabels, topLevel, mutedColor]\n  );\n}\nfunction useSetupCanvas(canvasRef, wrapperWidth, numberOfLevels) {\n  const [ctx, setCtx] = useState();\n  useEffect(() => {\n    if (!(numberOfLevels && canvasRef.current)) {\n      return;\n    }\n    const ctx2 = canvasRef.current.getContext(\"2d\");\n    const height = PIXELS_PER_LEVEL * numberOfLevels;\n    canvasRef.current.width = Math.round(wrapperWidth * window.devicePixelRatio);\n    canvasRef.current.height = Math.round(height);\n    canvasRef.current.style.width = `${wrapperWidth}px`;\n    canvasRef.current.style.height = `${height / window.devicePixelRatio}px`;\n    ctx2.textBaseline = \"middle\";\n    ctx2.font = 12 * window.devicePixelRatio + \"px monospace\";\n    ctx2.strokeStyle = \"white\";\n    setCtx(ctx2);\n  }, [canvasRef, setCtx, wrapperWidth, numberOfLevels]);\n  return ctx;\n}\nfunction renderLabel(ctx, data, label, item, width, x, y, textAlign) {\n  ctx.save();\n  ctx.clip();\n  ctx.fillStyle = \"#222\";\n  const displayValue = data.valueDisplayProcessor(item.value);\n  const unit = displayValue.suffix ? displayValue.text + displayValue.suffix : displayValue.text;\n  const measure = ctx.measureText(label);\n  const spaceForTextInRect = width - BAR_TEXT_PADDING_LEFT;\n  let fullLabel = `${label} (${unit})`;\n  let labelX = Math.max(x, 0) + BAR_TEXT_PADDING_LEFT;\n  if (measure.width > spaceForTextInRect) {\n    ctx.textAlign = textAlign;\n    if (textAlign === \"right\") {\n      fullLabel = label;\n      labelX = x + width - BAR_TEXT_PADDING_LEFT;\n    }\n  }\n  ctx.fillText(fullLabel, labelX, y + PIXELS_PER_LEVEL / 2 + 2);\n  ctx.restore();\n}\nfunction getBarX(offset, totalTicks, rangeMin, pixelsPerTick) {\n  return (offset - totalTicks * rangeMin) * pixelsPerTick;\n}\n\nexport { getBarX, useFlameRender, walkTree };\n//# sourceMappingURL=rendering.js.map\n","function murmurhash3_32_gc(key, seed = 0) {\n  let remainder;\n  let bytes;\n  let h1;\n  let h1b;\n  let c1;\n  let c2;\n  let k1;\n  let i;\n  remainder = key.length & 3;\n  bytes = key.length - remainder;\n  h1 = seed;\n  c1 = 3432918353;\n  c2 = 461845907;\n  i = 0;\n  while (i < bytes) {\n    k1 = key.charCodeAt(i) & 255 | (key.charCodeAt(++i) & 255) << 8 | (key.charCodeAt(++i) & 255) << 16 | (key.charCodeAt(++i) & 255) << 24;\n    ++i;\n    k1 = (k1 & 65535) * c1 + (((k1 >>> 16) * c1 & 65535) << 16) & 4294967295;\n    k1 = k1 << 15 | k1 >>> 17;\n    k1 = (k1 & 65535) * c2 + (((k1 >>> 16) * c2 & 65535) << 16) & 4294967295;\n    h1 ^= k1;\n    h1 = h1 << 13 | h1 >>> 19;\n    h1b = (h1 & 65535) * 5 + (((h1 >>> 16) * 5 & 65535) << 16) & 4294967295;\n    h1 = (h1b & 65535) + 27492 + (((h1b >>> 16) + 58964 & 65535) << 16);\n  }\n  k1 = 0;\n  switch (remainder) {\n    case 3:\n      k1 ^= (key.charCodeAt(i + 2) & 255) << 16;\n    case 2:\n      k1 ^= (key.charCodeAt(i + 1) & 255) << 8;\n    case 1:\n      k1 ^= key.charCodeAt(i) & 255;\n    default:\n      k1 = (k1 & 65535) * c1 + (((k1 >>> 16) * c1 & 65535) << 16) & 4294967295;\n      k1 = k1 << 15 | k1 >>> 17;\n      k1 = (k1 & 65535) * c2 + (((k1 >>> 16) * c2 & 65535) << 16) & 4294967295;\n      h1 ^= k1;\n  }\n  h1 ^= key.length;\n  h1 ^= h1 >>> 16;\n  h1 = (h1 & 65535) * 2246822507 + (((h1 >>> 16) * 2246822507 & 65535) << 16) & 4294967295;\n  h1 ^= h1 >>> 13;\n  h1 = (h1 & 65535) * 3266489909 + (((h1 >>> 16) * 3266489909 & 65535) << 16) & 4294967295;\n  h1 ^= h1 >>> 16;\n  return h1 >>> 0;\n}\n\nexport { murmurhash3_32_gc as default };\n//# sourceMappingURL=murmur3.js.map\n","import { jsxs, jsx } from 'react/jsx-runtime';\nimport { css } from '@emotion/css';\nimport { useRef, useState, useCallback, useEffect } from 'react';\nimport { useMeasure } from 'react-use';\nimport { PIXELS_PER_LEVEL } from '../constants.js';\nimport FlameGraphContextMenu from './FlameGraphContextMenu.js';\nimport FlameGraphTooltip from './FlameGraphTooltip.js';\nimport { useFlameRender, getBarX } from './rendering.js';\n\nconst FlameGraphCanvas = ({\n  data,\n  rangeMin,\n  rangeMax,\n  matchedLabels,\n  setRangeMin,\n  setRangeMax,\n  onItemFocused,\n  focusedItemData,\n  textAlign,\n  onSandwich,\n  colorScheme,\n  totalProfileTicks,\n  totalProfileTicksRight,\n  totalViewTicks,\n  root,\n  direction,\n  depth,\n  showFlameGraphOnly,\n  collapsedMap,\n  setCollapsedMap,\n  collapsing,\n  getExtraContextMenuButtons,\n  selectedView,\n  search\n}) => {\n  const styles = getStyles();\n  const [sizeRef, { width: wrapperWidth }] = useMeasure();\n  const graphRef = useRef(null);\n  const [tooltipItem, setTooltipItem] = useState();\n  const [clickedItemData, setClickedItemData] = useState();\n  useFlameRender({\n    canvasRef: graphRef,\n    colorScheme,\n    data,\n    focusedItemData,\n    root,\n    direction,\n    depth,\n    rangeMax,\n    rangeMin,\n    matchedLabels,\n    textAlign,\n    totalViewTicks,\n    // We need this so that if we have a diff profile and are in sandwich view we still show the same diff colors.\n    totalColorTicks: data.isDiffFlamegraph() ? totalProfileTicks : totalViewTicks,\n    totalTicksRight: totalProfileTicksRight,\n    wrapperWidth,\n    collapsedMap\n  });\n  const onGraphClick = useCallback(\n    (e) => {\n      setTooltipItem(void 0);\n      const pixelsPerTick = graphRef.current.clientWidth / totalViewTicks / (rangeMax - rangeMin);\n      const item = convertPixelCoordinatesToBarCoordinates(\n        { x: e.nativeEvent.offsetX, y: e.nativeEvent.offsetY },\n        root,\n        direction,\n        depth,\n        pixelsPerTick,\n        totalViewTicks,\n        rangeMin,\n        collapsedMap\n      );\n      if (item) {\n        setClickedItemData({\n          posY: e.clientY,\n          posX: e.clientX,\n          item,\n          label: data.getLabel(item.itemIndexes[0])\n        });\n      } else {\n        setClickedItemData(void 0);\n      }\n    },\n    [data, rangeMin, rangeMax, totalViewTicks, root, direction, depth, collapsedMap]\n  );\n  const [mousePosition, setMousePosition] = useState();\n  const onGraphMouseMove = useCallback(\n    (e) => {\n      if (clickedItemData === void 0) {\n        setTooltipItem(void 0);\n        setMousePosition(void 0);\n        const pixelsPerTick = graphRef.current.clientWidth / totalViewTicks / (rangeMax - rangeMin);\n        const item = convertPixelCoordinatesToBarCoordinates(\n          { x: e.nativeEvent.offsetX, y: e.nativeEvent.offsetY },\n          root,\n          direction,\n          depth,\n          pixelsPerTick,\n          totalViewTicks,\n          rangeMin,\n          collapsedMap\n        );\n        if (item) {\n          setMousePosition({ x: e.clientX, y: e.clientY });\n          setTooltipItem(item);\n        }\n      }\n    },\n    [rangeMin, rangeMax, totalViewTicks, clickedItemData, setMousePosition, root, direction, depth, collapsedMap]\n  );\n  const onGraphMouseLeave = useCallback(() => {\n    setTooltipItem(void 0);\n  }, []);\n  useEffect(() => {\n    const handleOnClick = (e) => {\n      var _a;\n      if (e.target instanceof HTMLElement && ((_a = e.target.parentElement) == null ? void 0 : _a.id) !== \"flameGraphCanvasContainer_clickOutsideCheck\") {\n        setClickedItemData(void 0);\n      }\n    };\n    window.addEventListener(\"click\", handleOnClick);\n    return () => window.removeEventListener(\"click\", handleOnClick);\n  }, [setClickedItemData]);\n  return /* @__PURE__ */ jsxs(\"div\", { className: styles.graph, children: [\n    /* @__PURE__ */ jsx(\"div\", { className: styles.canvasWrapper, id: \"flameGraphCanvasContainer_clickOutsideCheck\", ref: sizeRef, children: /* @__PURE__ */ jsx(\n      \"canvas\",\n      {\n        ref: graphRef,\n        \"data-testid\": \"flameGraph\",\n        onClick: onGraphClick,\n        onMouseMove: onGraphMouseMove,\n        onMouseLeave: onGraphMouseLeave\n      }\n    ) }),\n    /* @__PURE__ */ jsx(\n      FlameGraphTooltip,\n      {\n        position: mousePosition,\n        item: tooltipItem,\n        data,\n        totalTicks: totalViewTicks,\n        collapseConfig: tooltipItem ? collapsedMap.get(tooltipItem) : void 0\n      }\n    ),\n    !showFlameGraphOnly && clickedItemData && /* @__PURE__ */ jsx(\n      FlameGraphContextMenu,\n      {\n        data,\n        itemData: clickedItemData,\n        collapsing,\n        collapseConfig: collapsedMap.get(clickedItemData.item),\n        onMenuItemClick: () => {\n          setClickedItemData(void 0);\n        },\n        onItemFocus: () => {\n          setRangeMin(clickedItemData.item.start / totalViewTicks);\n          setRangeMax((clickedItemData.item.start + clickedItemData.item.value) / totalViewTicks);\n          onItemFocused(clickedItemData);\n        },\n        onSandwich: () => {\n          onSandwich(data.getLabel(clickedItemData.item.itemIndexes[0]));\n        },\n        onExpandGroup: () => {\n          setCollapsedMap(collapsedMap.setCollapsedStatus(clickedItemData.item, false));\n        },\n        onCollapseGroup: () => {\n          setCollapsedMap(collapsedMap.setCollapsedStatus(clickedItemData.item, true));\n        },\n        onExpandAllGroups: () => {\n          setCollapsedMap(collapsedMap.setAllCollapsedStatus(false));\n        },\n        onCollapseAllGroups: () => {\n          setCollapsedMap(collapsedMap.setAllCollapsedStatus(true));\n        },\n        allGroupsCollapsed: Array.from(collapsedMap.values()).every((i) => i.collapsed),\n        allGroupsExpanded: Array.from(collapsedMap.values()).every((i) => !i.collapsed),\n        getExtraContextMenuButtons,\n        selectedView,\n        search\n      }\n    )\n  ] });\n};\nconst getStyles = () => ({\n  graph: css({\n    label: \"graph\",\n    overflow: \"auto\",\n    flexGrow: 1,\n    flexBasis: \"50%\"\n  }),\n  canvasContainer: css({\n    label: \"canvasContainer\",\n    display: \"flex\"\n  }),\n  canvasWrapper: css({\n    label: \"canvasWrapper\",\n    cursor: \"pointer\",\n    flex: 1,\n    overflow: \"hidden\"\n  }),\n  sandwichMarker: css({\n    label: \"sandwichMarker\",\n    writingMode: \"vertical-lr\",\n    transform: \"rotate(180deg)\",\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\"\n  }),\n  sandwichMarkerIcon: css({\n    label: \"sandwichMarkerIcon\",\n    verticalAlign: \"baseline\"\n  })\n});\nconst convertPixelCoordinatesToBarCoordinates = (pos, root, direction, depth, pixelsPerTick, totalTicks, rangeMin, collapsedMap) => {\n  let next = root;\n  let currentLevel = direction === \"children\" ? 0 : depth - 1;\n  const levelIndex = Math.floor(pos.y / (PIXELS_PER_LEVEL / window.devicePixelRatio));\n  let found = void 0;\n  while (next) {\n    const node = next;\n    next = void 0;\n    if (currentLevel === levelIndex) {\n      found = node;\n      break;\n    }\n    const nextList = direction === \"children\" ? node.children : node.parents || [];\n    for (const child of nextList) {\n      const xStart = getBarX(child.start, totalTicks, rangeMin, pixelsPerTick);\n      const xEnd = getBarX(child.start + child.value, totalTicks, rangeMin, pixelsPerTick);\n      if (xStart <= pos.x && pos.x < xEnd) {\n        next = child;\n        const collapsedConfig = collapsedMap.get(child);\n        if (!collapsedConfig || !collapsedConfig.collapsed || collapsedConfig.items[0] === child) {\n          currentLevel = currentLevel + (direction === \"children\" ? 1 : -1);\n        }\n        break;\n      }\n    }\n  }\n  return found;\n};\n\nexport { convertPixelCoordinatesToBarCoordinates, FlameGraphCanvas as default };\n//# sourceMappingURL=FlameGraphCanvas.js.map\n","import { jsxs, jsx } from 'react/jsx-runtime';\nimport { css } from '@emotion/css';\nimport { memo } from 'react';\nimport { getValueFormat } from '@grafana/data';\nimport { useStyles2, Icon, IconButton } from '@grafana/ui';\n\nconst FlameGraphMetadata = memo(\n  ({ data, focusedItem, totalTicks, sandwichedLabel, onFocusPillClick, onSandwichPillClick }) => {\n    const styles = useStyles2(getStyles);\n    const parts = [];\n    const ticksVal = getValueFormat(\"short\")(totalTicks);\n    const displayValue = data.valueDisplayProcessor(totalTicks);\n    let unitValue = displayValue.text + displayValue.suffix;\n    const unitTitle = data.getUnitTitle();\n    if (unitTitle === \"Count\") {\n      if (!displayValue.suffix) {\n        unitValue = displayValue.text;\n      }\n    }\n    parts.push(\n      /* @__PURE__ */ jsxs(\"div\", { className: styles.metadataPill, children: [\n        unitValue,\n        \" | \",\n        ticksVal.text,\n        ticksVal.suffix,\n        \" samples (\",\n        unitTitle,\n        \")\"\n      ] }, \"default\")\n    );\n    if (sandwichedLabel) {\n      parts.push(\n        /* @__PURE__ */ jsxs(\"span\", { children: [\n          /* @__PURE__ */ jsx(Icon, { size: \"sm\", name: \"angle-right\" }),\n          /* @__PURE__ */ jsxs(\"div\", { className: styles.metadataPill, children: [\n            /* @__PURE__ */ jsx(Icon, { size: \"sm\", name: \"gf-show-context\" }),\n            \" \",\n            /* @__PURE__ */ jsx(\"span\", { className: styles.metadataPillName, children: sandwichedLabel.substring(sandwichedLabel.lastIndexOf(\"/\") + 1) }),\n            /* @__PURE__ */ jsx(\n              IconButton,\n              {\n                className: styles.pillCloseButton,\n                name: \"times\",\n                size: \"sm\",\n                onClick: onSandwichPillClick,\n                tooltip: \"Remove sandwich view\",\n                \"aria-label\": \"Remove sandwich view\"\n              }\n            )\n          ] })\n        ] }, \"sandwich\")\n      );\n    }\n    if (focusedItem) {\n      const percentValue = Math.round(1e4 * (focusedItem.item.value / totalTicks)) / 100;\n      parts.push(\n        /* @__PURE__ */ jsxs(\"span\", { children: [\n          /* @__PURE__ */ jsx(Icon, { size: \"sm\", name: \"angle-right\" }),\n          /* @__PURE__ */ jsxs(\"div\", { className: styles.metadataPill, children: [\n            /* @__PURE__ */ jsx(Icon, { size: \"sm\", name: \"eye\" }),\n            \" \",\n            percentValue,\n            \"% of total\",\n            /* @__PURE__ */ jsx(\n              IconButton,\n              {\n                className: styles.pillCloseButton,\n                name: \"times\",\n                size: \"sm\",\n                onClick: onFocusPillClick,\n                tooltip: \"Remove focus\",\n                \"aria-label\": \"Remove focus\"\n              }\n            )\n          ] })\n        ] }, \"focus\")\n      );\n    }\n    return /* @__PURE__ */ jsx(\"div\", { className: styles.metadata, children: parts });\n  }\n);\nFlameGraphMetadata.displayName = \"FlameGraphMetadata\";\nconst getStyles = (theme) => ({\n  metadataPill: css({\n    label: \"metadataPill\",\n    display: \"inline-flex\",\n    alignItems: \"center\",\n    background: theme.colors.background.secondary,\n    borderRadius: theme.shape.borderRadius(8),\n    padding: theme.spacing(0.5, 1),\n    fontSize: theme.typography.bodySmall.fontSize,\n    fontWeight: theme.typography.fontWeightMedium,\n    lineHeight: theme.typography.bodySmall.lineHeight,\n    color: theme.colors.text.secondary\n  }),\n  pillCloseButton: css({\n    label: \"pillCloseButton\",\n    verticalAlign: \"text-bottom\",\n    margin: theme.spacing(0, 0.5)\n  }),\n  metadata: css({\n    margin: \"8px 0\",\n    textAlign: \"center\"\n  }),\n  metadataPillName: css({\n    label: \"metadataPillName\",\n    maxWidth: \"200px\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\",\n    marginLeft: theme.spacing(0.5)\n  })\n});\n\nexport { FlameGraphMetadata as default };\n//# sourceMappingURL=FlameGraphMetadata.js.map\n","import { jsxs, Fragment, jsx } from 'react/jsx-runtime';\nimport { cx, css } from '@emotion/css';\nimport { useState, useEffect } from 'react';\nimport { Icon } from '@grafana/ui';\nimport { PIXELS_PER_LEVEL } from '../constants.js';\nimport FlameGraphCanvas from './FlameGraphCanvas.js';\nimport FlameGraphMetadata from './FlameGraphMetadata.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst FlameGraph = ({\n  data,\n  rangeMin,\n  rangeMax,\n  matchedLabels,\n  setRangeMin,\n  setRangeMax,\n  onItemFocused,\n  focusedItemData,\n  textAlign,\n  onSandwich,\n  sandwichItem,\n  onFocusPillClick,\n  onSandwichPillClick,\n  colorScheme,\n  showFlameGraphOnly,\n  getExtraContextMenuButtons,\n  collapsing,\n  selectedView,\n  search,\n  collapsedMap,\n  setCollapsedMap\n}) => {\n  const styles = getStyles();\n  const [levels, setLevels] = useState();\n  const [levelsCallers, setLevelsCallers] = useState();\n  const [totalProfileTicks, setTotalProfileTicks] = useState(0);\n  const [totalProfileTicksRight, setTotalProfileTicksRight] = useState();\n  const [totalViewTicks, setTotalViewTicks] = useState(0);\n  useEffect(() => {\n    var _a, _b, _c;\n    if (data) {\n      let levels2 = data.getLevels();\n      let totalProfileTicks2 = levels2.length ? levels2[0][0].value : 0;\n      let totalProfileTicksRight2 = levels2.length ? levels2[0][0].valueRight : void 0;\n      let totalViewTicks2 = totalProfileTicks2;\n      let levelsCallers2 = void 0;\n      if (sandwichItem) {\n        const [callers, callees] = data.getSandwichLevels(sandwichItem);\n        levels2 = callees;\n        levelsCallers2 = callers;\n        totalViewTicks2 = (_c = (_b = (_a = callees[0]) == null ? void 0 : _a[0]) == null ? void 0 : _b.value) != null ? _c : 0;\n      }\n      setLevels(levels2);\n      setLevelsCallers(levelsCallers2);\n      setTotalProfileTicks(totalProfileTicks2);\n      setTotalProfileTicksRight(totalProfileTicksRight2);\n      setTotalViewTicks(totalViewTicks2);\n    }\n  }, [data, sandwichItem]);\n  if (!levels) {\n    return null;\n  }\n  const commonCanvasProps = {\n    data,\n    rangeMin,\n    rangeMax,\n    matchedLabels,\n    setRangeMin,\n    setRangeMax,\n    onItemFocused,\n    focusedItemData,\n    textAlign,\n    onSandwich,\n    colorScheme,\n    totalProfileTicks,\n    totalProfileTicksRight,\n    totalViewTicks,\n    showFlameGraphOnly,\n    collapsedMap,\n    setCollapsedMap,\n    getExtraContextMenuButtons,\n    collapsing,\n    search,\n    selectedView\n  };\n  const canvas = levelsCallers ? /* @__PURE__ */ jsxs(Fragment, { children: [\n    /* @__PURE__ */ jsxs(\"div\", { className: styles.sandwichCanvasWrapper, children: [\n      /* @__PURE__ */ jsxs(\"div\", { className: styles.sandwichMarker, children: [\n        \"Callers\",\n        /* @__PURE__ */ jsx(Icon, { className: styles.sandwichMarkerIcon, name: \"arrow-down\" })\n      ] }),\n      /* @__PURE__ */ jsx(\n        FlameGraphCanvas,\n        __spreadProps(__spreadValues({}, commonCanvasProps), {\n          root: levelsCallers[levelsCallers.length - 1][0],\n          depth: levelsCallers.length,\n          direction: \"parents\",\n          collapsing: false\n        })\n      )\n    ] }),\n    /* @__PURE__ */ jsxs(\"div\", { className: styles.sandwichCanvasWrapper, children: [\n      /* @__PURE__ */ jsxs(\"div\", { className: cx(styles.sandwichMarker, styles.sandwichMarkerCalees), children: [\n        /* @__PURE__ */ jsx(Icon, { className: styles.sandwichMarkerIcon, name: \"arrow-up\" }),\n        \"Callees\"\n      ] }),\n      /* @__PURE__ */ jsx(\n        FlameGraphCanvas,\n        __spreadProps(__spreadValues({}, commonCanvasProps), {\n          root: levels[0][0],\n          depth: levels.length,\n          direction: \"children\",\n          collapsing: false\n        })\n      )\n    ] })\n  ] }) : /* @__PURE__ */ jsx(FlameGraphCanvas, __spreadProps(__spreadValues({}, commonCanvasProps), { root: levels[0][0], depth: levels.length, direction: \"children\" }));\n  return /* @__PURE__ */ jsxs(\"div\", { className: styles.graph, children: [\n    /* @__PURE__ */ jsx(\n      FlameGraphMetadata,\n      {\n        data,\n        focusedItem: focusedItemData,\n        sandwichedLabel: sandwichItem,\n        totalTicks: totalViewTicks,\n        onFocusPillClick,\n        onSandwichPillClick\n      }\n    ),\n    canvas\n  ] });\n};\nconst getStyles = () => ({\n  graph: css({\n    label: \"graph\",\n    overflow: \"auto\",\n    flexGrow: 1,\n    flexBasis: \"50%\"\n  }),\n  sandwichCanvasWrapper: css({\n    label: \"sandwichCanvasWrapper\",\n    display: \"flex\",\n    marginBottom: `${PIXELS_PER_LEVEL / window.devicePixelRatio}px`\n  }),\n  sandwichMarker: css({\n    label: \"sandwichMarker\",\n    writingMode: \"vertical-lr\",\n    transform: \"rotate(180deg)\",\n    overflow: \"hidden\",\n    whiteSpace: \"nowrap\"\n  }),\n  sandwichMarkerCalees: css({\n    label: \"sandwichMarkerCalees\",\n    textAlign: \"right\"\n  }),\n  sandwichMarkerIcon: css({\n    label: \"sandwichMarkerIcon\",\n    verticalAlign: \"baseline\"\n  })\n});\n\nexport { FlameGraph as default };\n//# sourceMappingURL=FlameGraph.js.map\n","import { groupBy } from 'lodash';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction mergeParentSubtrees(roots, data) {\n  const newRoots = getParentSubtrees(roots);\n  return mergeSubtrees(newRoots, data, \"parents\");\n}\nfunction getParentSubtrees(roots) {\n  return roots.map((r) => {\n    var _a, _b;\n    if (!((_a = r.parents) == null ? void 0 : _a.length)) {\n      return r;\n    }\n    const newRoot = __spreadProps(__spreadValues({}, r), {\n      children: []\n    });\n    const stack = [\n      { child: newRoot, parent: r.parents[0] }\n    ];\n    while (stack.length) {\n      const args = stack.shift();\n      const newNode = __spreadProps(__spreadValues({}, args.parent), {\n        children: args.child ? [args.child] : [],\n        parents: []\n      });\n      if (args.child) {\n        newNode.value = args.child.value;\n        args.child.parents = [newNode];\n      }\n      if ((_b = args.parent.parents) == null ? void 0 : _b.length) {\n        stack.push({ child: newNode, parent: args.parent.parents[0] });\n      }\n    }\n    return newRoot;\n  });\n}\nfunction mergeSubtrees(roots, data, direction = \"children\") {\n  var _a;\n  const oppositeDirection = direction === \"parents\" ? \"children\" : \"parents\";\n  const levels = [];\n  const stack = [\n    { previous: void 0, items: roots, level: 0 }\n  ];\n  while (stack.length) {\n    const args = stack.shift();\n    const indexes = args.items.flatMap((i) => i.itemIndexes);\n    const newItem = {\n      // We use the items value instead of value from the data frame, cause we could have changed it in the process\n      value: args.items.reduce((acc, i) => acc + i.value, 0),\n      itemIndexes: indexes,\n      // these will change later\n      children: [],\n      parents: [],\n      start: 0,\n      level: args.level\n    };\n    levels[args.level] = levels[args.level] || [];\n    levels[args.level].push(newItem);\n    if (args.previous) {\n      newItem[oppositeDirection] = [args.previous];\n      const prevSiblingsVal = ((_a = args.previous[direction]) == null ? void 0 : _a.reduce((acc, node) => {\n        return acc + node.value;\n      }, 0)) || 0;\n      newItem.start = args.previous.start + prevSiblingsVal;\n      args.previous[direction].push(newItem);\n    }\n    const nextItems = args.items.flatMap((i) => i[direction] || []);\n    const nextGroups = groupBy(nextItems, (c) => data.getLabel(c.itemIndexes[0]));\n    for (const g of Object.values(nextGroups)) {\n      stack.push({ previous: newItem, items: g, level: args.level + 1 });\n    }\n  }\n  if (direction === \"parents\") {\n    levels.reverse();\n    levels.forEach((level, index) => {\n      level.forEach((item) => {\n        item.level = index;\n      });\n    });\n  }\n  return levels;\n}\n\nexport { mergeParentSubtrees, mergeSubtrees };\n//# sourceMappingURL=treeTransforms.js.map\n","import { FieldType, getDisplayProcessor, createTheme } from '@grafana/data';\nimport { SampleUnit } from '../types.js';\nimport { mergeParentSubtrees, mergeSubtrees } from './treeTransforms.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nfunction nestedSetToLevels(container, options) {\n  const levels = [];\n  let offset = 0;\n  let parent = void 0;\n  const uniqueLabels = {};\n  for (let i = 0; i < container.data.length; i++) {\n    const currentLevel = container.getLevel(i);\n    const prevLevel = i > 0 ? container.getLevel(i - 1) : void 0;\n    levels[currentLevel] = levels[currentLevel] || [];\n    if (prevLevel && prevLevel >= currentLevel) {\n      const lastSibling = levels[currentLevel][levels[currentLevel].length - 1];\n      offset = lastSibling.start + container.getValue(lastSibling.itemIndexes[0]) + container.getValueRight(lastSibling.itemIndexes[0]);\n      parent = lastSibling.parents[0];\n    }\n    const newItem = {\n      itemIndexes: [i],\n      value: container.getValue(i) + container.getValueRight(i),\n      valueRight: container.isDiffFlamegraph() ? container.getValueRight(i) : void 0,\n      start: offset,\n      parents: parent && [parent],\n      children: [],\n      level: currentLevel\n    };\n    if (uniqueLabels[container.getLabel(i)]) {\n      uniqueLabels[container.getLabel(i)].push(newItem);\n    } else {\n      uniqueLabels[container.getLabel(i)] = [newItem];\n    }\n    if (parent) {\n      parent.children.push(newItem);\n    }\n    parent = newItem;\n    levels[currentLevel].push(newItem);\n  }\n  const collapsedMapContainer = new CollapsedMapBuilder(options == null ? void 0 : options.collapsingThreshold);\n  if (options == null ? void 0 : options.collapsing) {\n    collapsedMapContainer.addTree(levels[0][0]);\n  }\n  return [levels, uniqueLabels, collapsedMapContainer.getCollapsedMap()];\n}\nclass CollapsedMap {\n  constructor(map) {\n    // The levelItem used as a key is the item that will always be rendered in the flame graph. The config.items are all\n    // the items that are in the group and if the config.collapsed is true they will be hidden.\n    __publicField(this, \"map\", /* @__PURE__ */ new Map());\n    this.map = map || /* @__PURE__ */ new Map();\n  }\n  get(item) {\n    return this.map.get(item);\n  }\n  keys() {\n    return this.map.keys();\n  }\n  values() {\n    return this.map.values();\n  }\n  size() {\n    return this.map.size;\n  }\n  setCollapsedStatus(item, collapsed) {\n    const newMap = new Map(this.map);\n    const collapsedConfig = this.map.get(item);\n    const newConfig = __spreadProps(__spreadValues({}, collapsedConfig), { collapsed });\n    for (const item2 of collapsedConfig.items) {\n      newMap.set(item2, newConfig);\n    }\n    return new CollapsedMap(newMap);\n  }\n  setAllCollapsedStatus(collapsed) {\n    const newMap = new Map(this.map);\n    for (const item of this.map.keys()) {\n      const collapsedConfig = this.map.get(item);\n      const newConfig = __spreadProps(__spreadValues({}, collapsedConfig), { collapsed });\n      newMap.set(item, newConfig);\n    }\n    return new CollapsedMap(newMap);\n  }\n}\nclass CollapsedMapBuilder {\n  constructor(threshold) {\n    __publicField(this, \"map\", /* @__PURE__ */ new Map());\n    __publicField(this, \"threshold\", 0.99);\n    if (threshold !== void 0) {\n      this.threshold = threshold;\n    }\n  }\n  addTree(root) {\n    var _a;\n    const stack = [root];\n    while (stack.length) {\n      const current = stack.shift();\n      if ((_a = current.parents) == null ? void 0 : _a.length) {\n        this.addItem(current, current.parents[0]);\n      }\n      if (current.children.length) {\n        stack.unshift(...current.children);\n      }\n    }\n  }\n  // The heuristics here is pretty simple right now. Just check if it's single child and if we are within threshold.\n  // We assume items with small self just aren't too important while we cannot really collapse items with siblings\n  // as it's not clear what to do with said sibling.\n  addItem(item, parent) {\n    if (parent && item.value > parent.value * this.threshold && parent.children.length === 1) {\n      if (this.map.has(parent)) {\n        const config = this.map.get(parent);\n        this.map.set(item, config);\n        config.items.push(item);\n      } else {\n        const config = { items: [parent, item], collapsed: true };\n        this.map.set(parent, config);\n        this.map.set(item, config);\n      }\n    }\n  }\n  getCollapsedMap() {\n    return new CollapsedMap(this.map);\n  }\n}\nfunction getMessageCheckFieldsResult(wrongFields) {\n  if (wrongFields.missingFields.length) {\n    return `Data is missing fields: ${wrongFields.missingFields.join(\", \")}`;\n  }\n  if (wrongFields.wrongTypeFields.length) {\n    return `Data has fields of wrong type: ${wrongFields.wrongTypeFields.map((f) => `${f.name} has type ${f.type} but should be ${f.expectedTypes.join(\" or \")}`).join(\", \")}`;\n  }\n  return \"\";\n}\nfunction checkFields(data) {\n  const fields = [\n    [\"label\", [FieldType.string, FieldType.enum]],\n    [\"level\", [FieldType.number]],\n    [\"value\", [FieldType.number]],\n    [\"self\", [FieldType.number]]\n  ];\n  const missingFields = [];\n  const wrongTypeFields = [];\n  for (const field of fields) {\n    const [name, types] = field;\n    const frameField = data.fields.find((f) => f.name === name);\n    if (!frameField) {\n      missingFields.push(name);\n      continue;\n    }\n    if (!types.includes(frameField.type)) {\n      wrongTypeFields.push({ name, expectedTypes: types, type: frameField.type });\n    }\n  }\n  if (missingFields.length > 0 || wrongTypeFields.length > 0) {\n    return {\n      wrongTypeFields,\n      missingFields\n    };\n  }\n  return void 0;\n}\nclass FlameGraphDataContainer {\n  constructor(data, options, theme = createTheme()) {\n    __publicField(this, \"data\");\n    __publicField(this, \"options\");\n    __publicField(this, \"labelField\");\n    __publicField(this, \"levelField\");\n    __publicField(this, \"valueField\");\n    __publicField(this, \"selfField\");\n    // Optional fields for diff view\n    __publicField(this, \"valueRightField\");\n    __publicField(this, \"selfRightField\");\n    __publicField(this, \"labelDisplayProcessor\");\n    __publicField(this, \"valueDisplayProcessor\");\n    __publicField(this, \"uniqueLabels\");\n    __publicField(this, \"levels\");\n    __publicField(this, \"uniqueLabelsMap\");\n    __publicField(this, \"collapsedMap\");\n    var _a, _b, _c;\n    this.data = data;\n    this.options = options;\n    const wrongFields = checkFields(data);\n    if (wrongFields) {\n      throw new Error(getMessageCheckFieldsResult(wrongFields));\n    }\n    this.labelField = data.fields.find((f) => f.name === \"label\");\n    this.levelField = data.fields.find((f) => f.name === \"level\");\n    this.valueField = data.fields.find((f) => f.name === \"value\");\n    this.selfField = data.fields.find((f) => f.name === \"self\");\n    this.valueRightField = data.fields.find((f) => f.name === \"valueRight\");\n    this.selfRightField = data.fields.find((f) => f.name === \"selfRight\");\n    if ((this.valueField || this.selfField) && !(this.valueField && this.selfField)) {\n      throw new Error(\n        \"Malformed dataFrame: both valueRight and selfRight has to be present if one of them is present.\"\n      );\n    }\n    const enumConfig = (_c = (_b = (_a = this.labelField) == null ? void 0 : _a.config) == null ? void 0 : _b.type) == null ? void 0 : _c.enum;\n    if (enumConfig) {\n      this.labelDisplayProcessor = getDisplayProcessor({ field: this.labelField, theme });\n      this.uniqueLabels = enumConfig.text || [];\n    } else {\n      this.labelDisplayProcessor = (value) => ({\n        text: value + \"\",\n        numeric: 0\n      });\n      this.uniqueLabels = [...new Set(this.labelField.values)];\n    }\n    this.valueDisplayProcessor = getDisplayProcessor({\n      field: this.valueField,\n      theme\n    });\n  }\n  isDiffFlamegraph() {\n    return Boolean(this.valueRightField && this.selfRightField);\n  }\n  getLabel(index) {\n    return this.labelDisplayProcessor(this.labelField.values[index]).text;\n  }\n  getLevel(index) {\n    return this.levelField.values[index];\n  }\n  getValue(index) {\n    return fieldAccessor(this.valueField, index);\n  }\n  getValueRight(index) {\n    return fieldAccessor(this.valueRightField, index);\n  }\n  getSelf(index) {\n    return fieldAccessor(this.selfField, index);\n  }\n  getSelfRight(index) {\n    return fieldAccessor(this.selfRightField, index);\n  }\n  getSelfDisplay(index) {\n    return this.valueDisplayProcessor(this.getSelf(index));\n  }\n  getUniqueLabels() {\n    return this.uniqueLabels;\n  }\n  getUnitTitle() {\n    switch (this.valueField.config.unit) {\n      case SampleUnit.Bytes:\n        return \"RAM\";\n      case SampleUnit.Nanoseconds:\n        return \"Time\";\n    }\n    return \"Count\";\n  }\n  getLevels() {\n    this.initLevels();\n    return this.levels;\n  }\n  getSandwichLevels(label) {\n    const nodes = this.getNodesWithLabel(label);\n    if (!(nodes == null ? void 0 : nodes.length)) {\n      return [[], []];\n    }\n    const callers = mergeParentSubtrees(nodes, this);\n    const callees = mergeSubtrees(nodes, this);\n    return [callers, callees];\n  }\n  getNodesWithLabel(label) {\n    this.initLevels();\n    return this.uniqueLabelsMap[label];\n  }\n  getCollapsedMap() {\n    this.initLevels();\n    return this.collapsedMap;\n  }\n  initLevels() {\n    if (!this.levels) {\n      const [levels, uniqueLabelsMap, collapsedMap] = nestedSetToLevels(this, this.options);\n      this.levels = levels;\n      this.uniqueLabelsMap = uniqueLabelsMap;\n      this.collapsedMap = collapsedMap;\n    }\n  }\n}\nfunction fieldAccessor(field, index) {\n  if (!field) {\n    return 0;\n  }\n  let indexArray = typeof index === \"number\" ? [index] : index;\n  return indexArray.reduce((acc, index2) => {\n    return acc + field.values[index2];\n  }, 0);\n}\n\nexport { CollapsedMap, CollapsedMapBuilder, FlameGraphDataContainer, checkFields, getMessageCheckFieldsResult, nestedSetToLevels };\n//# sourceMappingURL=dataTransform.js.map\n","import { jsxs, jsx } from 'react/jsx-runtime';\nimport { cx, css } from '@emotion/css';\nimport { useState, useEffect } from 'react';\nimport useDebounce from 'react-use/lib/useDebounce';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport { useStyles2, Input, Button, ButtonGroup, RadioButtonGroup, Menu, Dropdown } from '@grafana/ui';\nimport { byValueGradient, byPackageGradient, diffDefaultGradient, diffColorBlindGradient } from './FlameGraph/colors.js';\nimport { MIN_WIDTH_TO_SHOW_BOTH_TOPTABLE_AND_FLAMEGRAPH } from './constants.js';\nimport { SelectedView, ColorScheme, ColorSchemeDiff } from './types.js';\n\nconst FlameGraphHeader = ({\n  search,\n  setSearch,\n  selectedView,\n  setSelectedView,\n  containerWidth,\n  onReset,\n  textAlign,\n  onTextAlignChange,\n  showResetButton,\n  colorScheme,\n  onColorSchemeChange,\n  stickyHeader,\n  extraHeaderElements,\n  vertical,\n  isDiffMode,\n  setCollapsedMap,\n  collapsedMap\n}) => {\n  const styles = useStyles2(getStyles);\n  const [localSearch, setLocalSearch] = useSearchInput(search, setSearch);\n  const suffix = localSearch !== \"\" ? /* @__PURE__ */ jsx(\n    Button,\n    {\n      icon: \"times\",\n      fill: \"text\",\n      size: \"sm\",\n      onClick: () => {\n        setSearch(\"\");\n        setLocalSearch(\"\");\n      },\n      children: \"Clear\"\n    }\n  ) : null;\n  return /* @__PURE__ */ jsxs(\"div\", { className: cx(styles.header, { [styles.stickyHeader]: stickyHeader }), children: [\n    /* @__PURE__ */ jsx(\"div\", { className: styles.inputContainer, children: /* @__PURE__ */ jsx(\n      Input,\n      {\n        value: localSearch || \"\",\n        onChange: (v) => {\n          setLocalSearch(v.currentTarget.value);\n        },\n        placeholder: \"Search...\",\n        suffix\n      }\n    ) }),\n    /* @__PURE__ */ jsxs(\"div\", { className: styles.rightContainer, children: [\n      showResetButton && /* @__PURE__ */ jsx(\n        Button,\n        {\n          variant: \"secondary\",\n          fill: \"outline\",\n          size: \"sm\",\n          icon: \"history-alt\",\n          tooltip: \"Reset focus and sandwich state\",\n          onClick: () => {\n            onReset();\n          },\n          className: styles.buttonSpacing,\n          \"aria-label\": \"Reset focus and sandwich state\"\n        }\n      ),\n      /* @__PURE__ */ jsx(ColorSchemeButton, { value: colorScheme, onChange: onColorSchemeChange, isDiffMode }),\n      /* @__PURE__ */ jsxs(ButtonGroup, { className: styles.buttonSpacing, children: [\n        /* @__PURE__ */ jsx(\n          Button,\n          {\n            variant: \"secondary\",\n            fill: \"outline\",\n            size: \"sm\",\n            tooltip: \"Expand all groups\",\n            onClick: () => {\n              setCollapsedMap(collapsedMap.setAllCollapsedStatus(false));\n            },\n            \"aria-label\": \"Expand all groups\",\n            icon: \"angle-double-down\",\n            disabled: selectedView === SelectedView.TopTable\n          }\n        ),\n        /* @__PURE__ */ jsx(\n          Button,\n          {\n            variant: \"secondary\",\n            fill: \"outline\",\n            size: \"sm\",\n            tooltip: \"Collapse all groups\",\n            onClick: () => {\n              setCollapsedMap(collapsedMap.setAllCollapsedStatus(true));\n            },\n            \"aria-label\": \"Collapse all groups\",\n            icon: \"angle-double-up\",\n            disabled: selectedView === SelectedView.TopTable\n          }\n        )\n      ] }),\n      /* @__PURE__ */ jsx(\n        RadioButtonGroup,\n        {\n          size: \"sm\",\n          disabled: selectedView === SelectedView.TopTable,\n          options: alignOptions,\n          value: textAlign,\n          onChange: onTextAlignChange,\n          className: styles.buttonSpacing\n        }\n      ),\n      /* @__PURE__ */ jsx(\n        RadioButtonGroup,\n        {\n          size: \"sm\",\n          options: getViewOptions(containerWidth, vertical),\n          value: selectedView,\n          onChange: setSelectedView\n        }\n      ),\n      extraHeaderElements && /* @__PURE__ */ jsx(\"div\", { className: styles.extraElements, children: extraHeaderElements })\n    ] })\n  ] });\n};\nfunction ColorSchemeButton(props) {\n  const styles = useStyles2(getStyles);\n  let menu = /* @__PURE__ */ jsxs(Menu, { children: [\n    /* @__PURE__ */ jsx(Menu.Item, { label: \"By package name\", onClick: () => props.onChange(ColorScheme.PackageBased) }),\n    /* @__PURE__ */ jsx(Menu.Item, { label: \"By value\", onClick: () => props.onChange(ColorScheme.ValueBased) })\n  ] });\n  const colorDotStyle = {\n    [ColorScheme.ValueBased]: styles.colorDotByValue,\n    [ColorScheme.PackageBased]: styles.colorDotByPackage,\n    [ColorSchemeDiff.DiffColorBlind]: styles.colorDotDiffColorBlind,\n    [ColorSchemeDiff.Default]: styles.colorDotDiffDefault\n  }[props.value] || styles.colorDotByValue;\n  let contents = /* @__PURE__ */ jsx(\"span\", { className: cx(styles.colorDot, colorDotStyle) });\n  if (props.isDiffMode) {\n    menu = /* @__PURE__ */ jsxs(Menu, { children: [\n      /* @__PURE__ */ jsx(Menu.Item, { label: \"Default (green to red)\", onClick: () => props.onChange(ColorSchemeDiff.Default) }),\n      /* @__PURE__ */ jsx(Menu.Item, { label: \"Color blind (blue to red)\", onClick: () => props.onChange(ColorSchemeDiff.DiffColorBlind) })\n    ] });\n    contents = /* @__PURE__ */ jsxs(\"div\", { className: cx(styles.colorDotDiff, colorDotStyle), children: [\n      /* @__PURE__ */ jsx(\"div\", { children: \"-100% (removed)\" }),\n      /* @__PURE__ */ jsx(\"div\", { children: \"0%\" }),\n      /* @__PURE__ */ jsx(\"div\", { children: \"+100% (added)\" })\n    ] });\n  }\n  return /* @__PURE__ */ jsx(Dropdown, { overlay: menu, children: /* @__PURE__ */ jsx(\n    Button,\n    {\n      variant: \"secondary\",\n      fill: \"outline\",\n      size: \"sm\",\n      tooltip: \"Change color scheme\",\n      onClick: () => {\n      },\n      className: styles.buttonSpacing,\n      \"aria-label\": \"Change color scheme\",\n      children: contents\n    }\n  ) });\n}\nconst alignOptions = [\n  { value: \"left\", description: \"Align text left\", icon: \"align-left\" },\n  { value: \"right\", description: \"Align text right\", icon: \"align-right\" }\n];\nfunction getViewOptions(width, vertical) {\n  let viewOptions = [\n    { value: SelectedView.TopTable, label: \"Top Table\", description: \"Only show top table\" },\n    { value: SelectedView.FlameGraph, label: \"Flame Graph\", description: \"Only show flame graph\" }\n  ];\n  if (width >= MIN_WIDTH_TO_SHOW_BOTH_TOPTABLE_AND_FLAMEGRAPH || vertical) {\n    viewOptions.push({\n      value: SelectedView.Both,\n      label: \"Both\",\n      description: \"Show both the top table and flame graph\"\n    });\n  }\n  return viewOptions;\n}\nfunction useSearchInput(search, setSearch) {\n  const [localSearchState, setLocalSearchState] = useState(search);\n  const prevSearch = usePrevious(search);\n  useDebounce(\n    () => {\n      setSearch(localSearchState);\n    },\n    250,\n    [localSearchState]\n  );\n  useEffect(() => {\n    if (prevSearch !== search && search !== localSearchState) {\n      setLocalSearchState(search);\n    }\n  }, [search, prevSearch, localSearchState]);\n  return [localSearchState, setLocalSearchState];\n}\nconst getStyles = (theme) => ({\n  header: css({\n    label: \"header\",\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\",\n    width: \"100%\",\n    top: 0,\n    gap: theme.spacing(1),\n    marginTop: theme.spacing(1)\n  }),\n  stickyHeader: css({\n    zIndex: theme.zIndex.navbarFixed,\n    position: \"sticky\",\n    background: theme.colors.background.primary\n  }),\n  inputContainer: css({\n    label: \"inputContainer\",\n    flexGrow: 1,\n    minWidth: \"150px\",\n    maxWidth: \"350px\"\n  }),\n  rightContainer: css({\n    label: \"rightContainer\",\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    flexWrap: \"wrap\"\n  }),\n  buttonSpacing: css({\n    label: \"buttonSpacing\",\n    marginRight: theme.spacing(1)\n  }),\n  resetButton: css({\n    label: \"resetButton\",\n    display: \"flex\",\n    marginRight: theme.spacing(2)\n  }),\n  resetButtonIconWrapper: css({\n    label: \"resetButtonIcon\",\n    padding: \"0 5px\",\n    color: theme.colors.text.disabled\n  }),\n  colorDot: css({\n    label: \"colorDot\",\n    display: \"inline-block\",\n    width: \"10px\",\n    height: \"10px\",\n    // eslint-disable-next-line @grafana/no-border-radius-literal\n    borderRadius: \"50%\"\n  }),\n  colorDotDiff: css({\n    label: \"colorDotDiff\",\n    display: \"flex\",\n    width: \"200px\",\n    height: \"12px\",\n    color: \"white\",\n    fontSize: 9,\n    lineHeight: 1.3,\n    fontWeight: 300,\n    justifyContent: \"space-between\",\n    padding: \"0 2px\",\n    // We have a specific sizing for this so probably makes sense to use hardcoded value here\n    // eslint-disable-next-line @grafana/no-border-radius-literal\n    borderRadius: \"2px\"\n  }),\n  colorDotByValue: css({\n    label: \"colorDotByValue\",\n    background: byValueGradient\n  }),\n  colorDotByPackage: css({\n    label: \"colorDotByPackage\",\n    background: byPackageGradient\n  }),\n  colorDotDiffDefault: css({\n    label: \"colorDotDiffDefault\",\n    background: diffDefaultGradient\n  }),\n  colorDotDiffColorBlind: css({\n    label: \"colorDotDiffColorBlind\",\n    background: diffColorBlindGradient\n  }),\n  extraElements: css({\n    label: \"extraElements\",\n    marginLeft: theme.spacing(1)\n  })\n});\n\nexport { FlameGraphHeader as default };\n//# sourceMappingURL=FlameGraphHeader.js.map\n","import { Component, createElement } from 'react';\n\n/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1) Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2) Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n * 5) Use 'export' statement over 'module.exports' assignment\n **/\n\n// Check `document` and `window` in case of server-side rendering\nlet windowObject;\nif (typeof window !== \"undefined\") {\n  windowObject = window;\n\n  // eslint-disable-next-line no-restricted-globals\n} else if (typeof self !== \"undefined\") {\n  // eslint-disable-next-line no-restricted-globals\n  windowObject = self;\n} else {\n  windowObject = global;\n}\nlet cancelFrame = null;\nlet requestFrame = null;\nconst TIMEOUT_DURATION = 20;\nconst clearTimeoutFn = windowObject.clearTimeout;\nconst setTimeoutFn = windowObject.setTimeout;\nconst cancelAnimationFrameFn = windowObject.cancelAnimationFrame || windowObject.mozCancelAnimationFrame || windowObject.webkitCancelAnimationFrame;\nconst requestAnimationFrameFn = windowObject.requestAnimationFrame || windowObject.mozRequestAnimationFrame || windowObject.webkitRequestAnimationFrame;\nif (cancelAnimationFrameFn == null || requestAnimationFrameFn == null) {\n  // For environments that don't support animation frame,\n  // fallback to a setTimeout based approach.\n  cancelFrame = clearTimeoutFn;\n  requestFrame = function requestAnimationFrameViaSetTimeout(callback) {\n    return setTimeoutFn(callback, TIMEOUT_DURATION);\n  };\n} else {\n  // Counter intuitively, environments that support animation frames can be trickier.\n  // Chrome's \"Throttle non-visible cross-origin iframes\" flag can prevent rAFs from being called.\n  // In this case, we should fallback to a setTimeout() implementation.\n  cancelFrame = function cancelFrame([animationFrameID, timeoutID]) {\n    cancelAnimationFrameFn(animationFrameID);\n    clearTimeoutFn(timeoutID);\n  };\n  requestFrame = function requestAnimationFrameWithSetTimeoutFallback(callback) {\n    const animationFrameID = requestAnimationFrameFn(function animationFrameCallback() {\n      clearTimeoutFn(timeoutID);\n      callback();\n    });\n    const timeoutID = setTimeoutFn(function timeoutCallback() {\n      cancelAnimationFrameFn(animationFrameID);\n      callback();\n    }, TIMEOUT_DURATION);\n    return [animationFrameID, timeoutID];\n  };\n}\nfunction createDetectElementResize(nonce) {\n  let animationKeyframes;\n  let animationName;\n  let animationStartEvent;\n  let animationStyle;\n  let checkTriggers;\n  let resetTriggers;\n  let scrollListener;\n  const attachEvent = typeof document !== \"undefined\" && document.attachEvent;\n  if (!attachEvent) {\n    resetTriggers = function (element) {\n      const triggers = element.__resizeTriggers__,\n        expand = triggers.firstElementChild,\n        contract = triggers.lastElementChild,\n        expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + \"px\";\n      expandChild.style.height = expand.offsetHeight + 1 + \"px\";\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n    checkTriggers = function (element) {\n      return element.offsetWidth !== element.__resizeLast__.width || element.offsetHeight !== element.__resizeLast__.height;\n    };\n    scrollListener = function (e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (e.target.className && typeof e.target.className.indexOf === \"function\" && e.target.className.indexOf(\"contract-trigger\") < 0 && e.target.className.indexOf(\"expand-trigger\") < 0) {\n        return;\n      }\n      const element = this;\n      resetTriggers(this);\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n      this.__resizeRAF__ = requestFrame(function animationFrame() {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n          element.__resizeListeners__.forEach(function forEachResizeListener(fn) {\n            fn.call(element, e);\n          });\n        }\n      });\n    };\n\n    /* Detect CSS Animations support to detect element display/re-attach */\n    let animation = false;\n    let keyframeprefix = \"\";\n    animationStartEvent = \"animationstart\";\n    const domPrefixes = \"Webkit Moz O ms\".split(\" \");\n    let startEvents = \"webkitAnimationStart animationstart oAnimationStart MSAnimationStart\".split(\" \");\n    let pfx = \"\";\n    {\n      const elm = document.createElement(\"fakeelement\");\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n      if (animation === false) {\n        for (let i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + \"AnimationName\"] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = \"-\" + pfx.toLowerCase() + \"-\";\n            animationStartEvent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n    animationName = \"resizeanim\";\n    animationKeyframes = \"@\" + keyframeprefix + \"keyframes \" + animationName + \" { from { opacity: 0; } to { opacity: 0; } } \";\n    animationStyle = keyframeprefix + \"animation: 1ms \" + animationName + \"; \";\n  }\n  const createStyles = function (doc) {\n    if (!doc.getElementById(\"detectElementResize\")) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      const css = (animationKeyframes ? animationKeyframes : \"\") + \".resize-triggers { \" + (animationStyle ? animationStyle : \"\") + \"visibility: hidden; opacity: 0; } \" + '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n        head = doc.head || doc.getElementsByTagName(\"head\")[0],\n        style = doc.createElement(\"style\");\n      style.id = \"detectElementResize\";\n      style.type = \"text/css\";\n      if (nonce != null) {\n        style.setAttribute(\"nonce\", nonce);\n      }\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(doc.createTextNode(css));\n      }\n      head.appendChild(style);\n    }\n  };\n  const addResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.attachEvent(\"onresize\", fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        const doc = element.ownerDocument;\n        const elementStyle = windowObject.getComputedStyle(element);\n        if (elementStyle && elementStyle.position === \"static\") {\n          element.style.position = \"relative\";\n        }\n        createStyles(doc);\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = doc.createElement(\"div\")).className = \"resize-triggers\";\n        const expandTrigger = doc.createElement(\"div\");\n        expandTrigger.className = \"expand-trigger\";\n        expandTrigger.appendChild(doc.createElement(\"div\"));\n        const contractTrigger = doc.createElement(\"div\");\n        contractTrigger.className = \"contract-trigger\";\n        element.__resizeTriggers__.appendChild(expandTrigger);\n        element.__resizeTriggers__.appendChild(contractTrigger);\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener(\"scroll\", scrollListener, true);\n\n        /* Listen for a css animation to detect element display/re-attach */\n        if (animationStartEvent) {\n          element.__resizeTriggers__.__animationListener__ = function animationListener(e) {\n            if (e.animationName === animationName) {\n              resetTriggers(element);\n            }\n          };\n          element.__resizeTriggers__.addEventListener(animationStartEvent, element.__resizeTriggers__.__animationListener__);\n        }\n      }\n      element.__resizeListeners__.push(fn);\n    }\n  };\n  const removeResizeListener = function (element, fn) {\n    if (attachEvent) {\n      element.detachEvent(\"onresize\", fn);\n    } else {\n      element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener(\"scroll\", scrollListener, true);\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(animationStartEvent, element.__resizeTriggers__.__animationListener__);\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n        try {\n          element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n        } catch (e) {\n          // Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n  return {\n    addResizeListener,\n    removeResizeListener\n  };\n}\n\nclass AutoSizer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      height: this.props.defaultHeight || 0,\n      scaledHeight: this.props.defaultHeight || 0,\n      scaledWidth: this.props.defaultWidth || 0,\n      width: this.props.defaultWidth || 0\n    };\n    this._autoSizer = null;\n    this._detectElementResize = null;\n    this._parentNode = null;\n    this._resizeObserver = null;\n    this._timeoutId = null;\n    this._onResize = () => {\n      this._timeoutId = null;\n      const {\n        disableHeight,\n        disableWidth,\n        onResize\n      } = this.props;\n      if (this._parentNode) {\n        // Guard against AutoSizer component being removed from the DOM immediately after being added.\n        // This can result in invalid style values which can result in NaN values if we don't handle them.\n        // See issue #150 for more context.\n\n        const style = window.getComputedStyle(this._parentNode) || {};\n        const paddingLeft = parseFloat(style.paddingLeft || \"0\");\n        const paddingRight = parseFloat(style.paddingRight || \"0\");\n        const paddingTop = parseFloat(style.paddingTop || \"0\");\n        const paddingBottom = parseFloat(style.paddingBottom || \"0\");\n        const rect = this._parentNode.getBoundingClientRect();\n        const scaledHeight = rect.height - paddingTop - paddingBottom;\n        const scaledWidth = rect.width - paddingLeft - paddingRight;\n        const height = this._parentNode.offsetHeight - paddingTop - paddingBottom;\n        const width = this._parentNode.offsetWidth - paddingLeft - paddingRight;\n        if (!disableHeight && (this.state.height !== height || this.state.scaledHeight !== scaledHeight) || !disableWidth && (this.state.width !== width || this.state.scaledWidth !== scaledWidth)) {\n          this.setState({\n            height,\n            width,\n            scaledHeight,\n            scaledWidth\n          });\n          if (typeof onResize === \"function\") {\n            onResize({\n              height,\n              scaledHeight,\n              scaledWidth,\n              width\n            });\n          }\n        }\n      }\n    };\n    this._setRef = autoSizer => {\n      this._autoSizer = autoSizer;\n    };\n  }\n  componentDidMount() {\n    const {\n      nonce\n    } = this.props;\n    const parentNode = this._autoSizer ? this._autoSizer.parentNode : null;\n    if (parentNode != null && parentNode.ownerDocument && parentNode.ownerDocument.defaultView && parentNode instanceof parentNode.ownerDocument.defaultView.HTMLElement) {\n      // Delay access of parentNode until mount.\n      // This handles edge-cases where the component has already been unmounted before its ref has been set,\n      // As well as libraries like react-lite which have a slightly different lifecycle.\n      this._parentNode = parentNode;\n\n      // Use ResizeObserver from the same context where parentNode (which we will observe) was defined\n      // Using just global can result into onResize events not being emitted in cases with multiple realms\n      const ResizeObserverInstance = parentNode.ownerDocument.defaultView.ResizeObserver;\n      if (ResizeObserverInstance != null) {\n        this._resizeObserver = new ResizeObserverInstance(() => {\n          // Guard against \"ResizeObserver loop limit exceeded\" error;\n          // could be triggered if the state update causes the ResizeObserver handler to run long.\n          // See https://github.com/bvaughn/react-virtualized-auto-sizer/issues/55\n          this._timeoutId = setTimeout(this._onResize, 0);\n        });\n        this._resizeObserver.observe(parentNode);\n      } else {\n        // Defer requiring resize handler in order to support server-side rendering.\n        // See issue #41\n        this._detectElementResize = createDetectElementResize(nonce);\n        this._detectElementResize.addResizeListener(parentNode, this._onResize);\n      }\n      this._onResize();\n    }\n  }\n  componentWillUnmount() {\n    if (this._parentNode) {\n      if (this._detectElementResize) {\n        this._detectElementResize.removeResizeListener(this._parentNode, this._onResize);\n      }\n      if (this._timeoutId !== null) {\n        clearTimeout(this._timeoutId);\n      }\n      if (this._resizeObserver) {\n        this._resizeObserver.disconnect();\n      }\n    }\n  }\n  render() {\n    const {\n      children,\n      defaultHeight,\n      defaultWidth,\n      disableHeight = false,\n      disableWidth = false,\n      doNotBailOutOnEmptyChildren = false,\n      nonce,\n      onResize,\n      style = {},\n      tagName = \"div\",\n      ...rest\n    } = this.props;\n    const {\n      height,\n      scaledHeight,\n      scaledWidth,\n      width\n    } = this.state;\n\n    // Outer div should not force width/height since that may prevent containers from shrinking.\n    // Inner component should overflow and use calculated width/height.\n    // See issue #68 for more information.\n    const outerStyle = {\n      overflow: \"visible\"\n    };\n    const childParams = {};\n\n    // Avoid rendering children before the initial measurements have been collected.\n    // At best this would just be wasting cycles.\n    let bailoutOnChildren = false;\n    if (!disableHeight) {\n      if (height === 0) {\n        bailoutOnChildren = true;\n      }\n      outerStyle.height = 0;\n      childParams.height = height;\n      childParams.scaledHeight = scaledHeight;\n    }\n    if (!disableWidth) {\n      if (width === 0) {\n        bailoutOnChildren = true;\n      }\n      outerStyle.width = 0;\n      childParams.width = width;\n      childParams.scaledWidth = scaledWidth;\n    }\n    if (doNotBailOutOnEmptyChildren) {\n      bailoutOnChildren = false;\n    }\n    return createElement(tagName, {\n      ref: this._setRef,\n      style: {\n        ...outerStyle,\n        ...style\n      },\n      ...rest\n    }, !bailoutOnChildren && children(childParams));\n  }\n}\n\nfunction isHeightAndWidthProps(props) {\n  return props && props.disableHeight !== true && props.disableWidth !== true;\n}\nfunction isHeightOnlyProps(props) {\n  return props && props.disableHeight !== true && props.disableWidth === true;\n}\nfunction isWidthOnlyProps(props) {\n  return props && props.disableHeight === true && props.disableWidth !== true;\n}\n\nexport { AutoSizer as default, isHeightAndWidthProps, isHeightOnlyProps, isWidthOnlyProps };\n","import { jsx, jsxs } from 'react/jsx-runtime';\nimport { css } from '@emotion/css';\nimport { memo, useMemo, useState } from 'react';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { FieldType, MappingType, applyFieldOverrides } from '@grafana/data';\nimport { useStyles2, useTheme2, Table, TableCellDisplayMode, IconButton } from '@grafana/ui';\nimport { diffColorBlindColors, diffDefaultColors } from '../FlameGraph/colors.js';\nimport { TOP_TABLE_COLUMN_WIDTH } from '../constants.js';\nimport { ColorSchemeDiff } from '../types.js';\n\nconst FlameGraphTopTableContainer = memo(\n  ({\n    data,\n    onSymbolClick,\n    search,\n    matchedLabels,\n    onSearch,\n    sandwichItem,\n    onSandwich,\n    onTableSort,\n    colorScheme\n  }) => {\n    const table = useMemo(() => {\n      let filteredTable = {};\n      for (let i = 0; i < data.data.length; i++) {\n        const value = data.getValue(i);\n        const valueRight = data.getValueRight(i);\n        const self = data.getSelf(i);\n        const label = data.getLabel(i);\n        if (!matchedLabels || matchedLabels.has(label)) {\n          filteredTable[label] = filteredTable[label] || {};\n          filteredTable[label].self = filteredTable[label].self ? filteredTable[label].self + self : self;\n          filteredTable[label].total = filteredTable[label].total ? filteredTable[label].total + value : value;\n          filteredTable[label].totalRight = filteredTable[label].totalRight ? filteredTable[label].totalRight + valueRight : valueRight;\n        }\n      }\n      return filteredTable;\n    }, [data, matchedLabels]);\n    const styles = useStyles2(getStyles);\n    const theme = useTheme2();\n    const [sort, setSort] = useState([{ displayName: \"Self\", desc: true }]);\n    return /* @__PURE__ */ jsx(\"div\", { className: styles.topTableContainer, \"data-testid\": \"topTable\", children: /* @__PURE__ */ jsx(AutoSizer, { style: { width: \"100%\" }, children: ({ width, height }) => {\n      if (width < 3 || height < 3) {\n        return null;\n      }\n      const frame = buildTableDataFrame(\n        data,\n        table,\n        width,\n        onSymbolClick,\n        onSearch,\n        onSandwich,\n        theme,\n        colorScheme,\n        search,\n        sandwichItem\n      );\n      return /* @__PURE__ */ jsx(\n        Table,\n        {\n          initialSortBy: sort,\n          onSortByChange: (s) => {\n            if (s && s.length) {\n              onTableSort == null ? void 0 : onTableSort(s[0].displayName + \"_\" + (s[0].desc ? \"desc\" : \"asc\"));\n            }\n            setSort(s);\n          },\n          data: frame,\n          width,\n          height\n        }\n      );\n    } }) });\n  }\n);\nFlameGraphTopTableContainer.displayName = \"FlameGraphTopTableContainer\";\nfunction buildTableDataFrame(data, table, width, onSymbolClick, onSearch, onSandwich, theme, colorScheme, search, sandwichItem) {\n  const actionField = createActionField(onSandwich, onSearch, search, sandwichItem);\n  const symbolField = {\n    type: FieldType.string,\n    name: \"Symbol\",\n    values: [],\n    config: {\n      custom: { width: width - actionColumnWidth - TOP_TABLE_COLUMN_WIDTH * 2 },\n      links: [\n        {\n          title: \"Highlight symbol\",\n          url: \"\",\n          onClick: (e) => {\n            const field = e.origin.field;\n            const value = field.values[e.origin.rowIndex];\n            onSymbolClick(value);\n          }\n        }\n      ]\n    }\n  };\n  let frame;\n  if (data.isDiffFlamegraph()) {\n    symbolField.config.custom.width = width - actionColumnWidth - TOP_TABLE_COLUMN_WIDTH * 3;\n    const baselineField = createNumberField(\"Baseline\", \"percent\");\n    const comparisonField = createNumberField(\"Comparison\", \"percent\");\n    const diffField = createNumberField(\"Diff\", \"percent\");\n    diffField.config.custom.cellOptions.type = TableCellDisplayMode.ColorText;\n    const [removeColor, addColor] = colorScheme === ColorSchemeDiff.DiffColorBlind ? [diffColorBlindColors[0], diffColorBlindColors[2]] : [diffDefaultColors[0], diffDefaultColors[2]];\n    diffField.config.mappings = [\n      { type: MappingType.ValueToText, options: { [Infinity]: { text: \"new\", color: addColor } } },\n      { type: MappingType.ValueToText, options: { [-100]: { text: \"removed\", color: removeColor } } },\n      { type: MappingType.RangeToText, options: { from: 0, to: Infinity, result: { color: addColor } } },\n      { type: MappingType.RangeToText, options: { from: -Infinity, to: 0, result: { color: removeColor } } }\n    ];\n    const levels = data.getLevels();\n    const totalTicks = levels.length ? levels[0][0].value : 0;\n    const totalTicksRight = levels.length ? levels[0][0].valueRight : void 0;\n    for (let key in table) {\n      actionField.values.push(null);\n      symbolField.values.push(key);\n      const ticksLeft = table[key].total;\n      const ticksRight = table[key].totalRight;\n      const totalTicksLeft = totalTicks - totalTicksRight;\n      const percentageLeft = Math.round(1e4 * ticksLeft / totalTicksLeft) / 100;\n      const percentageRight = Math.round(1e4 * ticksRight / totalTicksRight) / 100;\n      const diff = (percentageRight - percentageLeft) / percentageLeft * 100;\n      diffField.values.push(diff);\n      baselineField.values.push(percentageLeft);\n      comparisonField.values.push(percentageRight);\n    }\n    frame = {\n      fields: [actionField, symbolField, baselineField, comparisonField, diffField],\n      length: symbolField.values.length\n    };\n  } else {\n    const selfField = createNumberField(\"Self\", data.selfField.config.unit);\n    const totalField = createNumberField(\"Total\", data.valueField.config.unit);\n    for (let key in table) {\n      actionField.values.push(null);\n      symbolField.values.push(key);\n      selfField.values.push(table[key].self);\n      totalField.values.push(table[key].total);\n    }\n    frame = { fields: [actionField, symbolField, selfField, totalField], length: symbolField.values.length };\n  }\n  const dataFrames = applyFieldOverrides({\n    data: [frame],\n    fieldConfig: {\n      defaults: {},\n      overrides: []\n    },\n    replaceVariables: (value) => value,\n    theme\n  });\n  return dataFrames[0];\n}\nfunction createNumberField(name, unit) {\n  const tableFieldOptions = {\n    width: TOP_TABLE_COLUMN_WIDTH,\n    align: \"auto\",\n    inspect: false,\n    cellOptions: { type: TableCellDisplayMode.Auto }\n  };\n  return {\n    type: FieldType.number,\n    name,\n    values: [],\n    config: {\n      unit,\n      custom: tableFieldOptions\n    }\n  };\n}\nconst actionColumnWidth = 61;\nfunction createActionField(onSandwich, onSearch, search, sandwichItem) {\n  const options = {\n    type: TableCellDisplayMode.Custom,\n    cellComponent: (props) => {\n      return /* @__PURE__ */ jsx(\n        ActionCell,\n        {\n          frame: props.frame,\n          onSandwich,\n          onSearch,\n          search,\n          sandwichItem,\n          rowIndex: props.rowIndex\n        }\n      );\n    }\n  };\n  const actionFieldTableConfig = {\n    filterable: false,\n    width: actionColumnWidth,\n    hideHeader: true,\n    inspect: false,\n    align: \"auto\",\n    cellOptions: options\n  };\n  return {\n    type: FieldType.number,\n    name: \"actions\",\n    values: [],\n    config: {\n      custom: actionFieldTableConfig\n    }\n  };\n}\nfunction ActionCell(props) {\n  var _a;\n  const styles = getStylesActionCell();\n  const symbol = (_a = props.frame.fields.find((f) => f.name === \"Symbol\")) == null ? void 0 : _a.values[props.rowIndex];\n  const isSearched = props.search === symbol;\n  const isSandwiched = props.sandwichItem === symbol;\n  return /* @__PURE__ */ jsxs(\"div\", { className: styles.actionCellWrapper, children: [\n    /* @__PURE__ */ jsx(\n      IconButton,\n      {\n        className: styles.actionCellButton,\n        name: \"search\",\n        variant: isSearched ? \"primary\" : \"secondary\",\n        tooltip: isSearched ? \"Clear from search\" : \"Search for symbol\",\n        \"aria-label\": isSearched ? \"Clear from search\" : \"Search for symbol\",\n        onClick: () => {\n          props.onSearch(isSearched ? \"\" : symbol);\n        }\n      }\n    ),\n    /* @__PURE__ */ jsx(\n      IconButton,\n      {\n        className: styles.actionCellButton,\n        name: \"gf-show-context\",\n        tooltip: isSandwiched ? \"Remove from sandwich view\" : \"Show in sandwich view\",\n        variant: isSandwiched ? \"primary\" : \"secondary\",\n        \"aria-label\": isSandwiched ? \"Remove from sandwich view\" : \"Show in sandwich view\",\n        onClick: () => {\n          props.onSandwich(isSandwiched ? void 0 : symbol);\n        }\n      }\n    )\n  ] });\n}\nconst getStyles = (theme) => {\n  return {\n    topTableContainer: css({\n      label: \"topTableContainer\",\n      padding: theme.spacing(1),\n      backgroundColor: theme.colors.background.secondary,\n      height: \"100%\"\n    })\n  };\n};\nconst getStylesActionCell = () => {\n  return {\n    actionCellWrapper: css({\n      label: \"actionCellWrapper\",\n      display: \"flex\",\n      height: \"24px\"\n    }),\n    actionCellButton: css({\n      label: \"actionCellButton\",\n      marginRight: 0,\n      width: \"24px\"\n    })\n  };\n};\n\nexport { FlameGraphTopTableContainer as default };\n//# sourceMappingURL=FlameGraphTopTableContainer.js.map\n","import { jsx, jsxs } from 'react/jsx-runtime';\nimport { css } from '@emotion/css';\nimport uFuzzy from '@leeoniya/ufuzzy';\nimport { useState, useMemo, useEffect, useCallback } from 'react';\nimport { useMeasure } from 'react-use';\nimport { ThemeContext } from '@grafana/ui';\nimport FlameGraph from './FlameGraph/FlameGraph.js';\nimport { CollapsedMap, FlameGraphDataContainer } from './FlameGraph/dataTransform.js';\nimport FlameGraphHeader from './FlameGraphHeader.js';\nimport FlameGraphTopTableContainer from './TopTable/FlameGraphTopTableContainer.js';\nimport { MIN_WIDTH_TO_SHOW_BOTH_TOPTABLE_AND_FLAMEGRAPH } from './constants.js';\nimport { SelectedView, ColorSchemeDiff, ColorScheme } from './types.js';\n\nconst ufuzzy = new uFuzzy();\nconst FlameGraphContainer = ({\n  data,\n  onTableSymbolClick,\n  onViewSelected,\n  onTextAlignSelected,\n  onTableSort,\n  getTheme,\n  stickyHeader,\n  extraHeaderElements,\n  vertical,\n  showFlameGraphOnly,\n  disableCollapsing,\n  getExtraContextMenuButtons\n}) => {\n  const [focusedItemData, setFocusedItemData] = useState();\n  const [rangeMin, setRangeMin] = useState(0);\n  const [rangeMax, setRangeMax] = useState(1);\n  const [search, setSearch] = useState(\"\");\n  const [selectedView, setSelectedView] = useState(SelectedView.Both);\n  const [sizeRef, { width: containerWidth }] = useMeasure();\n  const [textAlign, setTextAlign] = useState(\"left\");\n  const [sandwichItem, setSandwichItem] = useState();\n  const [collapsedMap, setCollapsedMap] = useState(new CollapsedMap());\n  const theme = useMemo(() => getTheme(), [getTheme]);\n  const dataContainer = useMemo(() => {\n    if (!data) {\n      return;\n    }\n    const container = new FlameGraphDataContainer(data, { collapsing: !disableCollapsing }, theme);\n    setCollapsedMap(container.getCollapsedMap());\n    return container;\n  }, [data, theme, disableCollapsing]);\n  const [colorScheme, setColorScheme] = useColorScheme(dataContainer);\n  const styles = getStyles(theme);\n  const matchedLabels = useLabelSearch(search, dataContainer);\n  useEffect(() => {\n    if (containerWidth > 0 && containerWidth < MIN_WIDTH_TO_SHOW_BOTH_TOPTABLE_AND_FLAMEGRAPH && selectedView === SelectedView.Both && !vertical) {\n      setSelectedView(SelectedView.FlameGraph);\n    }\n  }, [selectedView, setSelectedView, containerWidth, vertical]);\n  const resetFocus = useCallback(() => {\n    setFocusedItemData(void 0);\n    setRangeMin(0);\n    setRangeMax(1);\n  }, [setFocusedItemData, setRangeMax, setRangeMin]);\n  function resetSandwich() {\n    setSandwichItem(void 0);\n  }\n  useEffect(() => {\n    resetFocus();\n    resetSandwich();\n  }, [data, resetFocus]);\n  const onSymbolClick = useCallback(\n    (symbol) => {\n      if (search === symbol) {\n        setSearch(\"\");\n      } else {\n        onTableSymbolClick == null ? void 0 : onTableSymbolClick(symbol);\n        setSearch(symbol);\n        resetFocus();\n      }\n    },\n    [setSearch, resetFocus, onTableSymbolClick, search]\n  );\n  if (!dataContainer) {\n    return null;\n  }\n  const flameGraph = /* @__PURE__ */ jsx(\n    FlameGraph,\n    {\n      data: dataContainer,\n      rangeMin,\n      rangeMax,\n      matchedLabels,\n      setRangeMin,\n      setRangeMax,\n      onItemFocused: (data2) => setFocusedItemData(data2),\n      focusedItemData,\n      textAlign,\n      sandwichItem,\n      onSandwich: (label) => {\n        resetFocus();\n        setSandwichItem(label);\n      },\n      onFocusPillClick: resetFocus,\n      onSandwichPillClick: resetSandwich,\n      colorScheme,\n      showFlameGraphOnly,\n      collapsing: !disableCollapsing,\n      getExtraContextMenuButtons,\n      selectedView,\n      search,\n      collapsedMap,\n      setCollapsedMap\n    }\n  );\n  const table = /* @__PURE__ */ jsx(\n    FlameGraphTopTableContainer,\n    {\n      data: dataContainer,\n      onSymbolClick,\n      search,\n      matchedLabels,\n      sandwichItem,\n      onSandwich: setSandwichItem,\n      onSearch: setSearch,\n      onTableSort,\n      colorScheme\n    }\n  );\n  let body;\n  if (showFlameGraphOnly || selectedView === SelectedView.FlameGraph) {\n    body = flameGraph;\n  } else if (selectedView === SelectedView.TopTable) {\n    body = /* @__PURE__ */ jsx(\"div\", { className: styles.tableContainer, children: table });\n  } else if (selectedView === SelectedView.Both) {\n    if (vertical) {\n      body = /* @__PURE__ */ jsxs(\"div\", { children: [\n        /* @__PURE__ */ jsx(\"div\", { className: styles.verticalGraphContainer, children: flameGraph }),\n        /* @__PURE__ */ jsx(\"div\", { className: styles.verticalTableContainer, children: table })\n      ] });\n    } else {\n      body = /* @__PURE__ */ jsxs(\"div\", { className: styles.horizontalContainer, children: [\n        /* @__PURE__ */ jsx(\"div\", { className: styles.horizontalTableContainer, children: table }),\n        /* @__PURE__ */ jsx(\"div\", { className: styles.horizontalGraphContainer, children: flameGraph })\n      ] });\n    }\n  }\n  return (\n    // We add the theme context to bridge the gap if this is rendered in non grafana environment where the context\n    // isn't already provided.\n    /* @__PURE__ */ jsx(ThemeContext.Provider, { value: theme, children: /* @__PURE__ */ jsxs(\"div\", { ref: sizeRef, className: styles.container, children: [\n      !showFlameGraphOnly && /* @__PURE__ */ jsx(\n        FlameGraphHeader,\n        {\n          search,\n          setSearch,\n          selectedView,\n          setSelectedView: (view) => {\n            setSelectedView(view);\n            onViewSelected == null ? void 0 : onViewSelected(view);\n          },\n          containerWidth,\n          onReset: () => {\n            resetFocus();\n            resetSandwich();\n          },\n          textAlign,\n          onTextAlignChange: (align) => {\n            setTextAlign(align);\n            onTextAlignSelected == null ? void 0 : onTextAlignSelected(align);\n          },\n          showResetButton: Boolean(focusedItemData || sandwichItem),\n          colorScheme,\n          onColorSchemeChange: setColorScheme,\n          stickyHeader: Boolean(stickyHeader),\n          extraHeaderElements,\n          vertical,\n          isDiffMode: dataContainer.isDiffFlamegraph(),\n          setCollapsedMap,\n          collapsedMap\n        }\n      ),\n      /* @__PURE__ */ jsx(\"div\", { className: styles.body, children: body })\n    ] }) })\n  );\n};\nfunction useColorScheme(dataContainer) {\n  const defaultColorScheme = (dataContainer == null ? void 0 : dataContainer.isDiffFlamegraph()) ? ColorSchemeDiff.Default : ColorScheme.PackageBased;\n  const [colorScheme, setColorScheme] = useState(defaultColorScheme);\n  useEffect(() => {\n    setColorScheme(defaultColorScheme);\n  }, [defaultColorScheme]);\n  return [colorScheme, setColorScheme];\n}\nfunction useLabelSearch(search, data) {\n  return useMemo(() => {\n    if (search && data) {\n      const foundLabels = /* @__PURE__ */ new Set();\n      let idxs = ufuzzy.filter(data.getUniqueLabels(), search);\n      if (idxs) {\n        for (let idx of idxs) {\n          foundLabels.add(data.getUniqueLabels()[idx]);\n        }\n      }\n      return foundLabels;\n    }\n    return void 0;\n  }, [search, data]);\n}\nfunction getStyles(theme) {\n  return {\n    container: css({\n      label: \"container\",\n      overflow: \"auto\",\n      height: \"100%\",\n      display: \"flex\",\n      flex: \"1 1 0\",\n      flexDirection: \"column\",\n      minHeight: 0,\n      gap: theme.spacing(1)\n    }),\n    body: css({\n      label: \"body\",\n      flexGrow: 1\n    }),\n    tableContainer: css({\n      // This is not ideal for dashboard panel where it creates a double scroll. In a panel it should be 100% but then\n      // in explore we need a specific height.\n      height: 800\n    }),\n    horizontalContainer: css({\n      label: \"horizontalContainer\",\n      display: \"flex\",\n      minHeight: 0,\n      flexDirection: \"row\",\n      columnGap: theme.spacing(1),\n      width: \"100%\"\n    }),\n    horizontalGraphContainer: css({\n      flexBasis: \"50%\"\n    }),\n    horizontalTableContainer: css({\n      flexBasis: \"50%\",\n      maxHeight: 800\n    }),\n    verticalGraphContainer: css({\n      marginBottom: theme.spacing(1)\n    }),\n    verticalTableContainer: css({\n      height: 800\n    })\n  };\n}\n\nexport { FlameGraphContainer as default };\n//# sourceMappingURL=FlameGraphContainer.js.map\n","import { config, reportInteraction as grafanaReportInteraction } from '@grafana/runtime';\n\nimport { PYROSCOPE_APP_ID, ROUTES } from '../../constants';\nimport { LayoutType } from '../../pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/SceneLayoutSwitcher';\nimport { PanelType } from '../../pages/ProfilesExplorerView/components/SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher';\nimport { GIT_COMMIT } from '../../version';\n\n// hey future dev: don't forget to add any new value to our features tracking dashboard!\nexport type InteractionName =\n  | 'g_pyroscope_app_compare_link_clicked'\n  | 'g_pyroscope_app_diff_auto_select_clicked'\n  | 'g_pyroscope_app_diff_choose_preset_clicked'\n  | 'g_pyroscope_app_diff_learn_how_clicked'\n  | 'g_pyroscope_app_diff_preset_save_clicked'\n  | 'g_pyroscope_app_diff_preset_selected'\n  | 'g_pyroscope_app_exclude_action_clicked'\n  | 'g_pyroscope_app_explain_flamegraph_clicked'\n  | 'g_pyroscope_app_exploration_type_clicked'\n  | 'g_pyroscope_app_export_profile'\n  | 'g_pyroscope_app_fav_action_clicked'\n  | 'g_pyroscope_app_filters_changed'\n  | 'g_pyroscope_app_function_details_clicked'\n  | 'g_pyroscope_app_group_by_label_clicked'\n  | 'g_pyroscope_app_hide_no_data_changed'\n  | 'g_pyroscope_app_include_action_clicked'\n  | 'g_pyroscope_app_layout_changed'\n  | 'g_pyroscope_app_optimize_code_clicked'\n  | 'g_pyroscope_app_panel_type_changed'\n  | 'g_pyroscope_app_profile_metric_selected'\n  | 'g_pyroscope_app_quick_filter_focused'\n  | 'g_pyroscope_app_select_action_clicked'\n  | 'g_pyroscope_app_service_name_selected'\n  | 'g_pyroscope_app_share_link_clicked'\n  | 'g_pyroscope_app_user_settings_clicked';\n\ntype InteractionProperties =\n  // g_pyroscope_app_diff_preset_changed\n  | { value: string }\n  // g_pyroscope_app_exploration_type_clicked\n  | { explorationType: string }\n  // g_pyroscope_app_export_profile\n  | { format: 'png' | 'json' | 'pprof' | 'flamegraph.com' }\n  // g_pyroscope_app_fav_action_clicked\n  | { favAfterClick: boolean }\n  // g_pyroscope_app_filters_changed\n  | { name: string; count: number; operators: string[] }\n  // g_pyroscope_app_hide_no_data_changed\n  | { hideNoData: 'on' | 'off' }\n  // g_pyroscope_app_layout_changed\n  | { layout: LayoutType }\n  // g_pyroscope_app_panel_type_changed\n  | { panelType: PanelType }\n  // g_pyroscope_app_select_action_clicked\n  | { type: string };\n\nconst PROFILES_EXPLORER_PAGE_NAME = ROUTES.PROFILES_EXPLORER_VIEW.slice(1);\n\nfunction getCurrentPage(): string {\n  const { pathname } = new URL(window.location.toString());\n  return pathname.split('/').pop() || '';\n}\n\nfunction getMetaProperties() {\n  const meta: Record<string, any> = {\n    // same naming as Faro (see src/shared/infrastructure/tracking/faro/faro.ts)\n    appRelease: config.apps[PYROSCOPE_APP_ID].version,\n    appVersion: GIT_COMMIT,\n    page: getCurrentPage(),\n  };\n\n  if (meta.page === PROFILES_EXPLORER_PAGE_NAME) {\n    // same naming as Faro (see src/shared/infrastructure/tracking/faro/faro.ts)\n    meta.view = new URLSearchParams(window.location.search).get('explorationType') || '';\n  }\n\n  return meta;\n}\n\nexport function reportInteraction(interactionName: InteractionName, props?: InteractionProperties) {\n  grafanaReportInteraction(interactionName, {\n    props,\n    meta: getMetaProperties(),\n  });\n}\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([\n        c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'\n    ], { type: 'text/javascript' }))));\n    w.onmessage = function (e) {\n        var d = e.data, ed = d.$e$;\n        if (ed) {\n            var err = new Error(ed[0]);\n            err['code'] = ed[1];\n            err.stack = ed[2];\n            cb(err, null);\n        }\n        else\n            cb(null, d);\n    };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, i32 = Int32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new i32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return { b: b, r: r };\n};\nvar _a = freb(fleb, 2), fl = _a.b, revfl = _a.r;\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b.b, revfd = _b.r;\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >> 8) | ((x & 0x00FF) << 8)) >> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i) {\n        if (cd[i])\n            ++l[cd[i] - 1];\n    }\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 1; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    return new u8(v.subarray(s, e));\n};\n/**\n * Codes for errors generated within this library\n */\nexport var FlateErrorCode = {\n    UnexpectedEOF: 0,\n    InvalidBlockType: 1,\n    InvalidLengthLiteral: 2,\n    InvalidDistance: 3,\n    StreamFinished: 4,\n    NoStreamHandler: 5,\n    InvalidHeader: 6,\n    NoCallback: 7,\n    InvalidUTF8: 8,\n    ExtraFieldTooLong: 9,\n    InvalidDate: 10,\n    FilenameTooLong: 11,\n    StreamFinishing: 12,\n    InvalidZipData: 13,\n    UnknownCompressionMethod: 14\n};\n// error codes\nvar ec = [\n    'unexpected EOF',\n    'invalid block type',\n    'invalid length/literal',\n    'invalid distance',\n    'stream finished',\n    'no stream handler',\n    ,\n    'no callback',\n    'invalid UTF-8 data',\n    'extra field too long',\n    'date not in range 1980-2099',\n    'filename too long',\n    'stream finishing',\n    'invalid zip data'\n    // determined by unknown compression method\n];\n;\nvar err = function (ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n        Error.captureStackTrace(e, err);\n    if (!nt)\n        throw e;\n    return e;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, st, buf, dict) {\n    // source length       dict length\n    var sl = dat.length, dl = dict ? dict.length : 0;\n    if (!sl || st.f && !st.l)\n        return buf || new u8(0);\n    var noBuf = !buf;\n    // have to estimate size\n    var resize = noBuf || st.i != 2;\n    // no state\n    var noSt = st.i;\n    // Assumes roughly 33% compression ratio average\n    if (noBuf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                // ensure size\n                if (resize)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                err(1);\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17\n        if (resize)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n            if (!c)\n                err(2);\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n                if (!d)\n                    err(3);\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                if (resize)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                if (bt < dt) {\n                    var shift = dl - dt, dend = Math.min(dt, end);\n                    if (shift + bt < 0)\n                        err(3);\n                    for (; bt < dend; ++bt)\n                        buf[bt] = dict[shift + bt];\n                }\n                for (; bt < end; ++bt)\n                    buf[bt] = buf[bt - dt];\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    // don't reallocate for streams or user buffers\n    return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n    d[o + 2] |= v >> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return { t: et, l: 0 };\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return { t: v, l: 1 };\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return { t: new u8(tr), l: mbt };\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return { c: cl.subarray(0, cli), n: s };\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a.t, mlb = _a.l;\n    var _b = hTree(df, 15), ddt = _b.t, mdb = _b.l;\n    var _c = lc(dlt), lclt = _c.c, nlc = _c.n;\n    var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        ++lcfreq[lclt[i] & 31];\n    for (var i = 0; i < lcdt.length; ++i)\n        ++lcfreq[lcdt[i] & 31];\n    var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];\n    if (bs >= 0 && flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >> 5) & 127), p += clct[i] >> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        var sym = syms[i];\n        if (sym > 255) {\n            var len = (sym >> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (sym >> 23) & 31), p += fleb[len];\n            var dst = sym & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (sym >> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[sym]), p += ll[sym];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, st) {\n    var s = st.z || dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var lst = st.l;\n    var pos = (st.r || 0) & 7;\n    if (lvl) {\n        if (pos)\n            w[0] = st.r >> 3;\n        var opt = deo[lvl - 1];\n        var n = opt >> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = st.p || new u16(32768), head = st.h || new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new i32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index          l/lind  waitdx          blkpos\n        var lc_1 = 0, eb = 0, i = st.i || 0, li = 0, wi = st.w || 0, bs = 0;\n        for (; i + 2 < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && (rem > 423 || !lst)) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = i - dif + j & 32767;\n                                    var pti = prev[ti];\n                                    var cd = ti - pti & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += imod - pimod & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one int32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        for (i = Math.max(i, wi); i < s; ++i) {\n            syms[li++] = dat[i];\n            ++lf[dat[i]];\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        if (!lst) {\n            st.r = (pos & 7) | w[(pos / 8) | 0] << 3;\n            // shft(pos) now 1 less if pos & 7 != 0\n            pos -= 7;\n            st.h = head, st.p = prev, st.i = i, st.w = wi;\n        }\n    }\n    else {\n        for (var i = st.w || 0; i < s + lst; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e >= s) {\n                // write final block\n                w[(pos / 8) | 0] = lst;\n                e = s;\n            }\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\n        }\n        st.i = s;\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Adler32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length | 0;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a & 0xFF00) << 8 | (b & 255) << 8 | (b >> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    if (!st) {\n        st = { l: 1 };\n        if (opt.dictionary) {\n            var dict = opt.dictionary.subarray(-32768);\n            var newDat = new u8(dict.length + dat.length);\n            newDat.set(dict);\n            newDat.set(dat, dict.length);\n            dat = newDat;\n            st.w = dict.length;\n        }\n    }\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? (st.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 20) : (12 + opt.mem), pre, post, st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return fnStr;\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k].buffer) {\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n        }\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            fnStr = wcln(fns[i], fnStr, td_1);\n        ch[id] = { c: wcln(fns[m], fnStr, td_1), e: td_1 };\n    }\n    var td = mrg({}, ch[id].e);\n    return wk(ch[id].c + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, i32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gopt]; };\nvar bDflt = function () { return [u8, u16, i32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zls]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get opts\nvar gopt = function (o) { return o && {\n    out: o.size && new u8(o.size),\n    dictionary: o.dictionary\n}; };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) {\n        if (ev.data.length) {\n            strm.push(ev.data[0], ev.data[1]);\n            postMessage([ev.data[0].length]);\n        }\n        else\n            strm.flush();\n    };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id, flush, ext) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else if (!Array.isArray(dat))\n            ext(dat);\n        else if (dat.length == 1) {\n            strm.queuedSize -= dat[0];\n            if (strm.ondrain)\n                strm.ondrain(dat[0]);\n        }\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.queuedSize = 0;\n    strm.push = function (d, f) {\n        if (!strm.ondata)\n            err(5);\n        if (t)\n            strm.ondata(err(4, 0, 1), null, !!f);\n        strm.queuedSize += d.length;\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n    if (flush) {\n        strm.flush = function () { w.postMessage([]); };\n    }\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        err(6, 'invalid gzip data');\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += (d[10] | d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + (o.filename ? o.filename.length + 1 : 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (o.dictionary && 32);\n    c[1] |= 31 - ((c[0] << 8) | c[1]) % 31;\n    if (o.dictionary) {\n        var h = adler();\n        h.p(o.dictionary);\n        wbytes(c, 2, h.d());\n    }\n};\n// zlib start\nvar zls = function (d, dict) {\n    if ((d[0] & 15) != 8 || (d[0] >> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        err(6, 'invalid zlib data');\n    if ((d[1] >> 5 & 1) == +!dict)\n        err(6, 'invalid zlib data: ' + (d[1] & 32 ? 'need' : 'unexpected') + ' dictionary');\n    return (d[1] >> 3 & 4) + 2;\n};\nfunction StrmOpt(opts, cb) {\n    if (typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n        this.s = { l: 0, i: 32768, w: 32768, z: 32768 };\n        // Buffer length must always be 0 mod 32768 for index calculations to be correct when modifying head and prev\n        // 98304 = 32768 (lookback) + 65536 (common chunk size)\n        this.b = new u8(98304);\n        if (this.o.dictionary) {\n            var dict = this.o.dictionary.subarray(-32768);\n            this.b.set(dict, 32768 - dict.length);\n            this.s.i = 32768 - dict.length;\n        }\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, this.s), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        var endLen = chunk.length + this.s.z;\n        if (endLen > this.b.length) {\n            if (endLen > 2 * this.b.length - 32768) {\n                var newBuf = new u8(endLen & -32768);\n                newBuf.set(this.b.subarray(0, this.s.z));\n                this.b = newBuf;\n            }\n            var split = this.b.length - this.s.z;\n            this.b.set(chunk.subarray(0, split), this.s.z);\n            this.s.z = this.b.length;\n            this.p(this.b, false);\n            this.b.set(this.b.subarray(-32768));\n            this.b.set(chunk.subarray(split), 32768);\n            this.s.z = chunk.length - split + 32768;\n            this.s.i = 32766, this.s.w = 32768;\n        }\n        else {\n            this.b.set(chunk, this.s.z);\n            this.s.z += chunk.length;\n        }\n        this.s.l = final & 1;\n        if (this.s.z > this.s.w + 8191 || final) {\n            this.p(this.b, final || false);\n            this.s.w = this.s.i, this.s.i -= 2;\n        }\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * deflated output for small inputs.\n     */\n    Deflate.prototype.flush = function () {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        this.p(this.b, false);\n        this.s.w = this.s.i, this.s.i -= 2;\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6, 1);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    function Inflate(opts, cb) {\n        // no StrmOpt here to avoid adding to workerizer\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        var dict = opts && opts.dictionary && opts.dictionary.subarray(-32768);\n        this.s = { i: 0, b: dict ? dict.length : 0 };\n        this.o = new u8(32768);\n        this.p = new u8(0);\n        if (dict)\n            this.o.set(dict);\n    }\n    Inflate.prototype.e = function (c) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        if (!this.p.length)\n            this.p = c;\n        else if (c.length) {\n            var n = new u8(this.p.length + c.length);\n            n.set(this.p), n.set(c, this.p.length), this.p = n;\n        }\n    };\n    Inflate.prototype.c = function (final) {\n        this.s.i = +(this.d = final || false);\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.s, this.o);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    function AsyncInflate(opts, cb) {\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Inflate(ev.data);\n            onmessage = astrm(strm);\n        }, 7, 0);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gopt(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, opts) {\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        this.l += chunk.length;\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, this.s);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * GZIPped output for small inputs.\n     */\n    Gzip.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8, 1);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming single or multi-member GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    function Gunzip(opts, cb) {\n        this.v = 1;\n        this.r = 0;\n        Inflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        this.r += chunk.length;\n        if (this.v) {\n            var p = this.p.subarray(this.v - 1);\n            var s = p.length > 3 ? gzs(p) : 4;\n            if (s > p.length) {\n                if (!final)\n                    return;\n            }\n            else if (this.v > 1 && this.onmember) {\n                this.onmember(this.r - p.length);\n            }\n            this.p = p.subarray(s), this.v = 0;\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n        // process concatenated GZIP\n        if (this.s.f && !this.s.l && !final) {\n            this.v = shft(this.s.p) + 9;\n            this.s = { i: 0 };\n            this.o = new u8(0);\n            this.push(new u8(0), final);\n        }\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming single or multi-member GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    function AsyncGunzip(opts, cb) {\n        var _this = this;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gunzip(ev.data);\n            strm.onmember = function (offset) { return postMessage(offset); };\n            onmessage = astrm(strm);\n        }, 9, 0, function (offset) { return _this.onmember && _this.onmember(offset); });\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0], ev.data[1])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, opts) {\n    var st = gzs(data);\n    if (st + 8 > data.length)\n        err(6, 'invalid gzip data');\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && (this.o.dictionary ? 6 : 2), f && 4, this.s);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * zlibbed output for small inputs.\n     */\n    Zlib.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10, 1);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, opts.dictionary ? 6 : 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    function Unzlib(opts, cb) {\n        Inflate.call(this, opts, cb);\n        this.v = opts && opts.dictionary ? 2 : 1;\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 6 && !final)\n                return;\n            this.p = this.p.subarray(zls(this.p, this.v - 1)), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                err(6, 'invalid zlib data');\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    function AsyncUnzlib(opts, cb) {\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Unzlib(ev.data);\n            onmessage = astrm(strm);\n        }, 11, 0);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gopt(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, opts) {\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    function Decompress(opts, cb) {\n        this.o = StrmOpt.call(this, opts, cb) || {};\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n    }\n    // init substream\n    // overriden by AsyncDecompress\n    Decompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (dat, final) {\n            _this.ondata(dat, final);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(this.o)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(this.o)\n                        : new this.Z(this.o);\n                this.i();\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    function AsyncDecompress(opts, cb) {\n        Decompress.call(this, opts, cb);\n        this.queuedSize = 0;\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n    }\n    AsyncDecompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        };\n        this.s.ondrain = function (size) {\n            _this.queuedSize -= size;\n            if (_this.ondrain)\n                _this.ondrain(size);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        this.queuedSize += chunk.length;\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, opts) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, opts)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, opts)\n            : unzlibSync(data, opts);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k, op = o;\n        if (Array.isArray(val))\n            op = mrg(o, val[1]), val = val[0];\n        if (val instanceof u8)\n            t[n] = [val, op];\n        else {\n            t[n += '/'] = [new u8(0), op];\n            fltn(val, n, t, o);\n        }\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return { s: r, r: slc(d, i - 1) };\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    err(8);\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            err(4);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (final) {\n            if (r.length)\n                err(8);\n            this.p = null;\n        }\n        else\n            this.p = r;\n        this.ondata(s, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td) {\n        return td.decode(dat);\n    }\n    else {\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (r.length)\n            err(8);\n        return s;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                err(9);\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c < 0 && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        err(10);\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >> 1)), b += 4;\n    if (c != -1) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c < 0 ? -c - 2 : c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this = this;\n        if (!this.ondata)\n            err(5);\n        // finishing or finished\n        if (this.d & 2)\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\n        else {\n            var f = strToU8(file.filename), fl_1 = f.length;\n            var com = file.comment, o = com && strToU8(com);\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\n            if (fl_1 > 65535)\n                this.ondata(err(11, 0, 1), null, false);\n            var header = new u8(hl_1);\n            wzh(header, 0, file, f, u, -1);\n            var chks_1 = [header];\n            var pAll_1 = function () {\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n                    var chk = chks_2[_i];\n                    _this.ondata(null, chk, false);\n                }\n                chks_1 = [];\n            };\n            var tr_1 = this.d;\n            this.d = 0;\n            var ind_1 = this.u.length;\n            var uf_1 = mrg(file, {\n                f: f,\n                u: u,\n                o: o,\n                t: function () {\n                    if (file.terminate)\n                        file.terminate();\n                },\n                r: function () {\n                    pAll_1();\n                    if (tr_1) {\n                        var nxt = _this.u[ind_1 + 1];\n                        if (nxt)\n                            nxt.r();\n                        else\n                            _this.d = 1;\n                    }\n                    tr_1 = 1;\n                }\n            });\n            var cl_1 = 0;\n            file.ondata = function (err, dat, final) {\n                if (err) {\n                    _this.ondata(err, dat, final);\n                    _this.terminate();\n                }\n                else {\n                    cl_1 += dat.length;\n                    chks_1.push(dat);\n                    if (final) {\n                        var dd = new u8(16);\n                        wbytes(dd, 0, 0x8074B50);\n                        wbytes(dd, 4, file.crc);\n                        wbytes(dd, 8, cl_1);\n                        wbytes(dd, 12, file.size);\n                        chks_1.push(dd);\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n                        if (tr_1)\n                            uf_1.r();\n                        tr_1 = 1;\n                    }\n                    else if (tr_1)\n                        pAll_1();\n                }\n            };\n            this.u.push(uf_1);\n        }\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this = this;\n        if (this.d & 2) {\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n            return;\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this.d & 1))\n                        return;\n                    _this.u.splice(-1, 1);\n                    _this.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, -f.c - 2, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cbd(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cbd(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cbd(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl(err(11, 0, 1), null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            err(11);\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this = this;\n        this.i = new Inflate(function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this = this;\n        if (!this.onfile)\n            err(5);\n        if (!this.p)\n            err(4);\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_3 = [];\n                        this_1.k.unshift(chks_3);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    err(5);\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this.o[cmp_1];\n                                    if (!ctr)\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                                        var dat = chks_4[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this.k[0] == chks_3 && _this.c)\n                                        _this.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                err(13);\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\nexport function unzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cbd(err(13, 0, 1), null);\n            return tAll;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (lft) {\n        var c = lft;\n        var o = b4(data, e + 16);\n        var z = o == 4294967295 || c == 65535;\n        if (z) {\n            var ze = b4(data, e - 12);\n            z = b4(data, ze) == 0x6064B50;\n            if (z) {\n                c = lft = b4(data, ze + 32);\n                o = b4(data, ze + 48);\n            }\n        }\n        var fltr = opts && opts.filter;\n        var _loop_3 = function (i) {\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n            o = no;\n            var cbl = function (e, d) {\n                if (e) {\n                    tAll();\n                    cbd(e, null);\n                }\n                else {\n                    if (d)\n                        files[fn] = d;\n                    if (!--lft)\n                        cbd(null, files);\n                }\n            };\n            if (!fltr || fltr({\n                name: fn,\n                size: sc,\n                originalSize: su,\n                compression: c_1\n            })) {\n                if (!c_1)\n                    cbl(null, slc(data, b, b + sc));\n                else if (c_1 == 8) {\n                    var infl = data.subarray(b, b + sc);\n                    // Synchronously decompress under 512KB, or barely-compressed data\n                    if (su < 524288 || sc > 0.8 * su) {\n                        try {\n                            cbl(null, inflateSync(infl, { out: new u8(su) }));\n                        }\n                        catch (e) {\n                            cbl(e, null);\n                        }\n                    }\n                    else\n                        term.push(inflate(infl, { size: su }, cbl));\n                }\n                else\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n            }\n            else\n                cbl(null, null);\n        };\n        for (var i = 0; i < c; ++i) {\n            _loop_3(i);\n        }\n    }\n    else\n        cbd(null, {});\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\nexport function unzipSync(data, opts) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            err(13);\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295 || c == 65535;\n    if (z) {\n        var ze = b4(data, e - 12);\n        z = b4(data, ze) == 0x6064B50;\n        if (z) {\n            c = b4(data, ze + 32);\n            o = b4(data, ze + 48);\n        }\n    }\n    var fltr = opts && opts.filter;\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!fltr || fltr({\n            name: fn,\n            size: sc,\n            originalSize: su,\n            compression: c_2\n        })) {\n            if (!c_2)\n                files[fn] = slc(data, b, b + sc);\n            else if (c_2 == 8)\n                files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });\n            else\n                err(14, 'unknown compression type ' + c_2);\n        }\n    }\n    return files;\n}\n","import { AsyncDeflate, Deflate, AsyncGzip, AsyncZlib, AsyncInflate, AsyncGunzip, AsyncUnzlib, Gzip, Zlib, Gunzip, Unzlib, Inflate } from 'fflate';\nconst wrapSync = (Stream) => {\n    class AsyncWrappedStream {\n        constructor() {\n            this.i = new Stream();\n            this.i.ondata = (data, final) => {\n                this.ondata(null, data, final);\n            };\n        }\n        push(data, final) {\n            try {\n                this.queuedSize += data.length;\n                this.i.push(data, final);\n                this.queuedSize -= data.length;\n                if (this.ondrain)\n                    this.ondrain(data.length);\n            }\n            catch (err) {\n                this.ondata(err, null, final || false);\n            }\n        }\n    }\n    return AsyncWrappedStream;\n};\n// Safari fix\nlet hasWorker = 1;\ntry {\n    const test = new AsyncDeflate();\n    test.terminate();\n}\ncatch (err) {\n    hasWorker = 0;\n}\nconst compressors = hasWorker ? {\n    'gzip': AsyncGzip,\n    'deflate': AsyncZlib,\n    'deflate-raw': AsyncDeflate\n} : {\n    'gzip': wrapSync(Gzip),\n    'deflate': wrapSync(Zlib),\n    'deflate-raw': wrapSync(Deflate)\n};\nconst decompressors = hasWorker ? {\n    'gzip': AsyncGunzip,\n    'deflate': AsyncUnzlib,\n    'deflate-raw': AsyncInflate\n} : {\n    'gzip': wrapSync(Gunzip),\n    'deflate': wrapSync(Unzlib),\n    'deflate-raw': wrapSync(Inflate)\n};\nconst makeMulti = (TransformStreamBase, processors, name) => {\n    class BaseCompressionStream extends TransformStreamBase {\n        constructor(format) {\n            if (!arguments.length) {\n                throw new TypeError(`Failed to construct '${name}': 1 argument required, but only 0 present.`);\n            }\n            const Processor = processors[format];\n            if (!Processor) {\n                throw new TypeError(`Failed to construct '${name}': Unsupported compression format: '${format}'`);\n            }\n            let compressor = new Processor();\n            let endCb;\n            super({\n                start: controller => {\n                    compressor.ondata = (err, dat, final) => {\n                        if (err)\n                            controller.error(err);\n                        else if (dat) {\n                            controller.enqueue(dat);\n                            if (final) {\n                                if (endCb)\n                                    endCb();\n                                else\n                                    controller.terminate();\n                            }\n                        }\n                    };\n                },\n                transform: chunk => {\n                    if (chunk instanceof ArrayBuffer)\n                        chunk = new Uint8Array(chunk);\n                    else if (ArrayBuffer.isView(chunk)) {\n                        chunk = new Uint8Array(chunk.buffer, chunk.byteOffset, chunk.byteLength);\n                    }\n                    else {\n                        throw new TypeError(\"The provided value is not of type '(ArrayBuffer or ArrayBufferView)'\");\n                    }\n                    compressor.push(chunk);\n                    // use fflate internal buffering to keep worker message channel fed\n                    if (compressor.queuedSize >= 32768) {\n                        return new Promise(resolve => {\n                            compressor.ondrain = () => {\n                                if (compressor.queuedSize < 32768)\n                                    resolve();\n                            };\n                        });\n                    }\n                },\n                flush: () => new Promise(resolve => {\n                    endCb = resolve;\n                    compressor.push(new Uint8Array(0), true);\n                })\n            }, {\n                size: chunk => chunk.byteLength | 0,\n                highWaterMark: 65536\n            }, {\n                size: chunk => chunk.byteLength | 0,\n                highWaterMark: 65536\n            });\n        }\n    }\n    return BaseCompressionStream;\n};\nexport function makeCompressionStream(TransformStreamBase) {\n    return makeMulti(TransformStreamBase, compressors, 'CompressionStream');\n}\nexport function makeDecompressionStream(TransformStreamBase) {\n    return makeMulti(TransformStreamBase, decompressors, 'DecompressionStream');\n}\n","import { makeCompressionStream, makeDecompressionStream } from './ponyfill.mjs';\nconst globals = typeof globalThis == 'undefined'\n    ? typeof self == 'undefined'\n        ? typeof global == 'undefined'\n            ? {}\n            : global\n        : self\n    : globalThis;\nif (typeof globals.CompressionStream == 'undefined') {\n    globals.CompressionStream = makeCompressionStream(TransformStream);\n}\nif (typeof globals.DecompressionStream == 'undefined') {\n    globals.DecompressionStream = makeDecompressionStream(TransformStream);\n}\n","import { HttpClient } from '@shared/infrastructure/http/HttpClient';\nimport { FlamebearerProfile } from '@shared/types/FlamebearerProfile';\n\ntype UploadResponse = {\n  key: string;\n  url: string;\n  subProfiles: any[]; // TODO: define them, what are they?\n};\n\nclass FlamegraphDotComApiClient extends HttpClient {\n  constructor() {\n    super('https://flamegraph.com/api', {\n      'content-type': 'application/json',\n    });\n  }\n\n  async upload(name: string, profile: FlamebearerProfile): Promise<UploadResponse> {\n    const response = await this.fetch('/upload/v1', {\n      method: 'POST',\n      body: JSON.stringify({\n        name,\n        profile: btoa(JSON.stringify(profile)),\n        fileTypeData: {\n          units: profile.metadata.units,\n          spyName: profile.metadata.spyName,\n        },\n        type: 'json',\n      }),\n    });\n\n    const json = await response.json();\n\n    return json;\n  }\n}\n\nexport const flamegraphDotComApiClient = new FlamegraphDotComApiClient();\n","export enum CompareTarget {\n  BASELINE = 'baseline',\n  COMPARISON = 'comparison',\n}\n","import { dateTimeParse, TimeRange } from '@grafana/data';\nimport { CompareTarget } from 'src/pages/ProfilesExplorerView/components/SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/domain/types';\n\ntype DateParts = {\n  year: string;\n  month: string;\n  day: string;\n  hour: string;\n  minute: string;\n  second: string;\n};\n\nconst DATETIME_FORMATTER = new Intl.DateTimeFormat('fr-CA', {\n  year: 'numeric',\n  month: '2-digit',\n  day: '2-digit',\n  hour12: false,\n  hour: '2-digit',\n  minute: '2-digit',\n  second: '2-digit',\n});\n\nfunction format(date: Date): string {\n  const parts = DATETIME_FORMATTER.formatToParts(date).reduce((acc, { type, value }) => {\n    acc[type as keyof DateParts] = value;\n    return acc;\n  }, {} as DateParts);\n\n  return `${parts.year}-${parts.month}-${parts.day}_${parts.hour}${parts.minute}`;\n}\n\nfunction dateForExportFilename(timeRange: TimeRange) {\n  const from = new Date(Math.round(timeRange.from.unix() * 1000));\n  const to = new Date(Math.round(timeRange.to.unix() * 1000));\n\n  return `${format(from)}-to-${format(to)}`;\n}\n\nfunction getTimeRange(target: CompareTarget) {\n  const [fromKey, toKey] = target === CompareTarget.BASELINE ? ['diffFrom', 'diffTo'] : ['diffFrom-2', 'diffTo-2'];\n\n  const searchParams = new URLSearchParams(window.location.search);\n  const from = searchParams.get(fromKey) as string;\n  const to = searchParams.get(toKey) as string;\n\n  return {\n    raw: { from, to },\n    from: dateTimeParse(from),\n    to: dateTimeParse(to),\n  };\n}\n\nexport function getExportFilename(appName?: string) {\n  const timeRanges = [\n    'baseline',\n    dateForExportFilename(getTimeRange(CompareTarget.BASELINE)),\n    'comparison',\n    dateForExportFilename(getTimeRange(CompareTarget.COMPARISON)),\n  ];\n\n  return appName ? [appName, ...timeRanges].join('_') : ['flamegraph', ...timeRanges].join('_');\n}\n","import { Menu } from '@grafana/ui';\nimport React from 'react';\n\nimport { useExportMenu } from './domain/useExportMenu';\nimport { ExportDataProps } from './ExportData';\n\nexport function ExportMenu(props: ExportDataProps) {\n  const { actions } = useExportMenu(props);\n\n  return (\n    <Menu>\n      <Menu.Item label=\"png\" onClick={actions.downloadPng} />\n      <Menu.Item label=\"json\" onClick={actions.downloadJson} />\n    </Menu>\n  );\n}\n","import { displayError } from '@shared/domain/displayStatus';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport 'compression-streams-polyfill';\nimport saveAs from 'file-saver';\n\nimport { ExportDataProps } from '../ExportData';\nimport { flamegraphDotComApiClient } from '../infrastructure/flamegraphDotComApiClient';\nimport { getExportFilename } from './getExportFilename';\n\n/* Note: no pprof export, as the underlying API only accepts a single query (see PprofApiClient) */\nexport function useExportMenu({ profile, enableFlameGraphDotComExport }: ExportDataProps) {\n  const downloadPng = () => {\n    reportInteraction('g_pyroscope_app_export_profile', { format: 'png' });\n\n    const customExportName = getExportFilename(profile.metadata.appName);\n    const filename = `${customExportName}.png`;\n\n    // TODO use ref, this won't work for comparison side by side (??!)\n    const canvasElement = document.querySelector('canvas[data-testid=\"flameGraph\"]') as HTMLCanvasElement;\n\n    canvasElement.toBlob((blob) => {\n      if (!blob) {\n        const error = new Error('No Blob, the image cannot be created.');\n        displayError(error, ['Failed to export to png!', error.message]);\n        return;\n      }\n\n      saveAs(blob, filename);\n    }, 'image/png');\n  };\n\n  const downloadJson = () => {\n    reportInteraction('g_pyroscope_app_export_profile', { format: 'json' });\n\n    const customExportName = getExportFilename(profile.metadata.appName);\n    const filename = `${customExportName}.json`;\n    const dataStr = `data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(profile))}`;\n\n    try {\n      saveAs(dataStr, filename);\n    } catch (error) {\n      displayError(error as Error, ['Failed to export to JSON!', (error as Error).message]);\n      return;\n    }\n  };\n\n  const uploadToFlamegraphDotCom = async () => {\n    reportInteraction('g_pyroscope_app_export_profile', { format: 'flamegraph.com' });\n\n    const customExportName = getExportFilename(profile.metadata.appName);\n\n    let response;\n\n    try {\n      response = await flamegraphDotComApiClient.upload(customExportName, profile);\n    } catch (error) {\n      displayError(error as Error, ['Failed to export to flamegraph.com!', (error as Error).message]);\n      return;\n    }\n\n    const dlLink = document.createElement('a');\n    dlLink.target = '_blank';\n    dlLink.href = response.url;\n    document.body.appendChild(dlLink);\n    dlLink.click();\n    document.body.removeChild(dlLink);\n  };\n\n  return {\n    data: {\n      shouldDisplayFlamegraphDotCom: Boolean(enableFlameGraphDotComExport),\n    },\n    actions: {\n      downloadPng,\n      downloadJson,\n      uploadToFlamegraphDotCom,\n    },\n  };\n}\n","import { Button, Dropdown } from '@grafana/ui';\nimport { FlamebearerProfile } from '@shared/types/FlamebearerProfile';\nimport React, { memo } from 'react';\n\nimport { ExportMenu } from './ExportMenu';\n\nexport type ExportDataProps = {\n  profile: FlamebearerProfile;\n  enableFlameGraphDotComExport?: boolean;\n};\n\nfunction ExportDataComponent(props: ExportDataProps) {\n  const { profile, enableFlameGraphDotComExport } = props;\n\n  return (\n    <Dropdown overlay={<ExportMenu profile={profile} enableFlameGraphDotComExport={enableFlameGraphDotComExport} />}>\n      <Button\n        icon=\"download-alt\"\n        size=\"sm\"\n        variant=\"secondary\"\n        fill=\"outline\"\n        aria-label=\"Export profile data\"\n        tooltip=\"Export profile data\"\n      />\n    </Dropdown>\n  );\n}\n\nexport const ExportData = memo(ExportDataComponent);\n","import { createDataFrame, DataFrameDTO, FieldType } from '@grafana/data';\n\n// eslint-disable-next-line sonarjs/cognitive-complexity\nfunction getNodes(level: number[], names: string[], diff: boolean) {\n  const nodes = [];\n  const itemOffset = diff ? 7 : 4;\n\n  for (let i = 0; i < level.length; i += itemOffset) {\n    nodes.push({\n      level: 0,\n      label: diff ? names[level[i + 6]] : names[level[i + 3]],\n      offset: level[i],\n      val: level[i + 1],\n      self: level[i + 2],\n      selfRight: diff ? level[i + 5] : 0,\n      valRight: diff ? level[i + 4] : 0,\n      valTotal: diff ? level[i + 1] + level[i + 4] : level[i + 1],\n      offsetRight: diff ? level[i + 3] : 0,\n      offsetTotal: diff ? level[i] + level[i + 3] : level[i],\n      children: [],\n    });\n  }\n\n  return nodes;\n}\n\n// eslint-disable-next-line sonarjs/cognitive-complexity\nexport function flamebearerToDataFrameDTO(levels: number[][], names: string[], unit: string, diff: boolean) {\n  if (!levels.length) {\n    return;\n  }\n\n  const nodeLevels: any[][] = [];\n\n  for (let i = 0; i < levels.length; i++) {\n    nodeLevels[i] = [];\n\n    for (const node of getNodes(levels[i], names, diff)) {\n      node.level = i;\n      nodeLevels[i].push(node);\n\n      if (i > 0) {\n        const prevNodesInLevel = nodeLevels[i].slice(0, -1);\n        const currentNodeStart =\n          prevNodesInLevel.reduce((acc, n) => n.offsetTotal + n.valTotal + acc, 0) + node.offsetTotal;\n\n        const prevLevel = nodeLevels[i - 1];\n        let prevLevelOffset = 0;\n\n        for (const prevLevelNode of prevLevel) {\n          const parentNodeStart = prevLevelOffset + prevLevelNode.offsetTotal;\n          const parentNodeEnd = parentNodeStart + prevLevelNode.valTotal;\n\n          if (parentNodeStart <= currentNodeStart && parentNodeEnd > currentNodeStart) {\n            prevLevelNode.children.push(node);\n            break;\n          } else {\n            prevLevelOffset += prevLevelNode.offsetTotal + prevLevelNode.valTotal;\n          }\n        }\n      }\n    }\n  }\n\n  const root = nodeLevels[0][0];\n  const stack = [root];\n\n  const labelValues = [];\n  const levelValues = [];\n  const selfValues = [];\n  const valueValues = [];\n  const selfRightValues = [];\n  const valueRightValues = [];\n\n  while (stack.length) {\n    const node = stack.shift();\n    labelValues.push(node.label);\n    levelValues.push(node.level);\n    selfValues.push(node.self);\n    valueValues.push(node.val);\n    selfRightValues.push(node.selfRight);\n    valueRightValues.push(node.valRight);\n    stack.unshift(...node.children);\n  }\n\n  let valueUnit = 'short';\n\n  // See format.ts#getFormatter. We have to use Grafana unit string here though.\n  switch (unit) {\n    case 'samples':\n    case 'trace_samples':\n    case 'lock_nanoseconds':\n    case 'nanoseconds':\n      valueUnit = 'ns';\n      break;\n    case 'bytes':\n      valueUnit = 'bytes';\n      break;\n  }\n\n  const fields = [\n    { name: 'level', values: levelValues },\n    { name: 'label', values: labelValues, type: FieldType.string },\n    { name: 'self', values: selfValues, config: { unit: valueUnit } },\n    { name: 'value', values: valueValues, config: { unit: valueUnit } },\n  ];\n\n  if (diff) {\n    fields.push(\n      ...[\n        {\n          name: 'selfRight',\n          values: selfRightValues,\n          config: { unit: valueUnit },\n        },\n        {\n          name: 'valueRight',\n          values: valueRightValues,\n          config: { unit: valueUnit },\n        },\n      ]\n    );\n  }\n\n  const frame: DataFrameDTO = {\n    name: 'response',\n    meta: { preferredVisualisationType: 'flamegraph' },\n    fields,\n  };\n\n  return createDataFrame(frame);\n}\n","import { createTheme } from '@grafana/data';\nimport { FlameGraph as GrafanaFlameGraph, Props } from '@grafana/flamegraph';\nimport { useTheme2 } from '@grafana/ui';\nimport React, { memo, useMemo } from 'react';\n\nimport type { FlamebearerProfile } from '../../types/FlamebearerProfile';\nimport { ExportData } from './components/ExportData';\nimport { flamebearerToDataFrameDTO } from './domain/flamebearerToDataFrameDTO';\n\ntype FlameGraphProps = {\n  profile: FlamebearerProfile;\n  diff?: boolean;\n  vertical?: boolean;\n  enableFlameGraphDotComExport?: boolean;\n  collapsedFlamegraphs?: boolean;\n  getExtraContextMenuButtons?: Props['getExtraContextMenuButtons'];\n};\n\nfunction FlameGraphComponent({\n  profile,\n  diff,\n  vertical,\n  enableFlameGraphDotComExport,\n  collapsedFlamegraphs,\n  getExtraContextMenuButtons,\n}: FlameGraphProps) {\n  const { isLight } = useTheme2();\n  const getTheme = () => createTheme({ colors: { mode: isLight ? 'light' : 'dark' } });\n\n  const dataFrame = useMemo(\n    () =>\n      flamebearerToDataFrameDTO(\n        profile.flamebearer.levels,\n        profile.flamebearer.names,\n        profile.metadata.units,\n        Boolean(diff)\n      ),\n    [profile, diff]\n  );\n\n  return (\n    <GrafanaFlameGraph\n      data={dataFrame as any}\n      disableCollapsing={!collapsedFlamegraphs}\n      extraHeaderElements={<ExportData profile={profile} enableFlameGraphDotComExport={enableFlameGraphDotComExport} />}\n      vertical={vertical}\n      getTheme={getTheme as any}\n      getExtraContextMenuButtons={getExtraContextMenuButtons}\n    />\n  );\n}\n\nexport const FlameGraph = memo(FlameGraphComponent);\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { FlameGraph } from '@shared/components/FlameGraph/FlameGraph';\nimport { FlamebearerProfile } from '@shared/types/FlamebearerProfile';\nimport React from 'react';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  flamegraph: css`\n    margin-top: ${theme.spacing(2)};\n  `,\n});\n\nexport function AdHocFlameGraph({ profile, diff }: { profile: FlamebearerProfile; diff?: boolean }) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.flamegraph} data-testid=\"flamegraph\">\n      <FlameGraph profile={profile} diff={diff} />\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { InlineField, InlineFieldRow, Select, useStyles2 } from '@grafana/ui';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\ntype ProfileSelectorProps = {\n  profileTypes: string[];\n  onChange: (options: SelectableValue<string>) => void;\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  selectorContainer: css`\n    display: flex;\n    justify-content: center;\n    margin-bottom: ${theme.spacing(2)};\n  `,\n});\n\nexport function AdHocProfileTypeSelector({ profileTypes, onChange }: ProfileSelectorProps) {\n  const styles = useStyles2(getStyles);\n\n  const options = useMemo(() => profileTypes.map((type) => ({ value: type, label: type })), [profileTypes]);\n  const [option, setOption] = useState<SelectableValue<string>>();\n\n  const _onChange = useCallback(\n    (o: SelectableValue<string>) => {\n      setOption(o);\n      onChange(o);\n    },\n    [onChange]\n  );\n\n  useEffect(() => {\n    // when the uploaded file contains multiple sample types, the 1st is always returned by the API\n    // so, we select it automatically\n    setOption(options[0]);\n  }, [options]);\n\n  return (\n    <div className={styles.selectorContainer}>\n      <InlineFieldRow>\n        <InlineField label=\"Profile\" disabled={!options.length} data-testid=\"profile-types-dropdown\">\n          {/* added a key to ensure the dropdown is properly reset */}\n          <Select key={option?.value} value={option} options={options} onChange={_onChange} width={16} />\n        </InlineField>\n      </InlineFieldRow>\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Spinner, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  spinner: css`\n    text-align: center;\n    margin-top: ${theme.spacing(2)};\n  `,\n});\n\nexport function AdHocSpinner() {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.spinner}>\n      <Spinner size={36} />\n    </div>\n  );\n}\n","import React, { memo } from 'react';\n\nimport { useUploadFile } from '../../domain/useUploadFile';\nimport { AdHocFileDropZone } from '../AdHocFileDropZone';\nimport { AdHocFlameGraph } from '../AdHocFlameGraph';\nimport { AdHocProfileTypeSelector } from '../AdHocProfileTypeSelector';\nimport { AdHocSpinner } from '../AdHocSpinner';\n\nfunction AdHocSingleComponent() {\n  const { processFile, profileTypes, selectProfileType, profile, removeFile, isLoading } = useUploadFile();\n\n  return (\n    <div>\n      <AdHocProfileTypeSelector profileTypes={profileTypes} onChange={selectProfileType} />\n      <AdHocFileDropZone onFileDropped={processFile} onFileRemove={removeFile} />\n      {isLoading && !profile ? <AdHocSpinner /> : null}\n      {profile && <AdHocFlameGraph profile={profile} />}\n    </div>\n  );\n}\n\nexport const AdHocSingle = memo(AdHocSingleComponent);\n","import React from 'react';\n\nimport { AdHocColumns } from '../AdHocColums';\nimport { AdHocSingle } from './AdHocSingle';\n\nexport function AdHocComparison() {\n  return <AdHocColumns left={<AdHocSingle />} right={<AdHocSingle />} />;\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Tab, TabContent, TabsBar, useStyles2 } from '@grafana/ui';\nimport React, { useState } from 'react';\n\nimport { AdHocComparison } from './tabs/AdHocComparison';\nimport { AdHocSingle } from './tabs/AdHocSingle';\n\n// import { AdHocDiff } from './tabs/AdHocDiff';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  tabContent: css`\n    padding: ${theme.spacing(2)};\n    margin: ${theme.spacing(2)};\n  `,\n});\n\nexport function AdHocTabs() {\n  const styles = useStyles2(getStyles);\n  const [activeTabIndex, setActiveTabIndex] = useState(0);\n\n  return (\n    <div>\n      <TabsBar>\n        <Tab label=\" Single view\" active={activeTabIndex === 0} onChangeTab={() => setActiveTabIndex(0)} />\n        <Tab label=\" Comparison view\" active={activeTabIndex === 1} onChangeTab={() => setActiveTabIndex(1)} />\n        {/* <Tab\n          label=\" Diff view\"\n          active={activeTabIndex === 2}\n          onChangeTab={onChangeTab(2)}\n        /> */}\n      </TabsBar>\n      <TabContent className={styles.tabContent}>\n        {activeTabIndex === 0 && <AdHocSingle />}\n        {activeTabIndex === 1 && <AdHocComparison />}\n        {/* {activeTabIndex === 2 && <AdHocDiff  />} */}\n      </TabContent>\n    </div>\n  );\n}\n","import { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nimport { AdHocTabs } from './ui/AdHocTabs';\n\nexport function AdHocView() {\n  return (\n    <>\n      <PageTitle title=\"Ad hoc view\" />\n      <AdHocTabs />\n    </>\n  );\n}\n","import React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { urlUtil, locationUtil } from '@grafana/data';\nimport { locationService, locationSearchToObject } from '@grafana/runtime';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nfunction useAppQueryParams() {\n  const location = useLocation();\n  return locationSearchToObject(location.search || \"\");\n}\nfunction getUrlWithAppState(path, preserveParams) {\n  const paramsCopy = __spreadValues({}, locationService.getSearchObject());\n  if (preserveParams) {\n    for (const key of Object.keys(paramsCopy)) {\n      if (!preserveParams.includes(key)) {\n        delete paramsCopy[key];\n      }\n    }\n  }\n  return urlUtil.renderUrl(locationUtil.assureBaseUrl(path), paramsCopy);\n}\nfunction renderSceneComponentWithRouteProps(sceneObject, routeProps) {\n  return React.createElement(sceneObject.Component, { model: sceneObject, routeProps });\n}\n\nexport { getUrlWithAppState, renderSceneComponentWithRouteProps, useAppQueryParams };\n//# sourceMappingURL=utils.js.map\n","import { getPluginImportUtils } from '@grafana/runtime';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst runtimePanelPlugins = /* @__PURE__ */ new Map();\nfunction registerRuntimePanelPlugin({ pluginId, plugin }) {\n  if (runtimePanelPlugins.has(pluginId)) {\n    throw new Error(`A runtime panel plugin with id ${pluginId} has already been registered`);\n  }\n  plugin.meta = __spreadProps(__spreadValues({}, plugin.meta), {\n    id: pluginId,\n    name: pluginId,\n    module: \"runtime plugin\",\n    baseUrl: \"runtime plugin\",\n    info: {\n      author: {\n        name: \"Runtime plugin \" + pluginId\n      },\n      description: \"\",\n      links: [],\n      logos: {\n        large: \"\",\n        small: \"\"\n      },\n      screenshots: [],\n      updated: \"\",\n      version: \"\"\n    }\n  });\n  runtimePanelPlugins.set(pluginId, plugin);\n}\nfunction loadPanelPluginSync(pluginId) {\n  var _a;\n  const { getPanelPluginFromCache } = getPluginImportUtils();\n  return (_a = getPanelPluginFromCache(pluginId)) != null ? _a : runtimePanelPlugins.get(pluginId);\n}\n\nexport { loadPanelPluginSync, registerRuntimePanelPlugin, runtimePanelPlugins };\n//# sourceMappingURL=registerRuntimePanelPlugin.js.map\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import React, { useState, useEffect } from 'react';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nfunction SceneComponentWrapperWithoutMemo(_a) {\n  var _b = _a, { model } = _b, otherProps = __objRest(_b, [\"model\"]);\n  var _a2;\n  const Component = (_a2 = model.constructor[\"Component\"]) != null ? _a2 : EmptyRenderer;\n  const [_, setValue] = useState(0);\n  useEffect(() => {\n    const unsub = model.activate();\n    setValue((prevState) => prevState + 1);\n    return unsub;\n  }, [model]);\n  if (!model.isActive) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(Component, __spreadProps(__spreadValues({}, otherProps), {\n    model\n  }));\n}\nconst SceneComponentWrapper = React.memo(SceneComponentWrapperWithoutMemo);\nfunction EmptyRenderer(_) {\n  return null;\n}\n\nexport { SceneComponentWrapper };\n//# sourceMappingURL=SceneComponentWrapper.js.map\n","import { BusEventWithPayload } from '@grafana/data';\n\nclass SceneObjectStateChangedEvent extends BusEventWithPayload {\n}\nSceneObjectStateChangedEvent.type = \"scene-object-state-change\";\nclass UserActionEvent extends BusEventWithPayload {\n}\nUserActionEvent.type = \"scene-object-user-action\";\n\nexport { SceneObjectStateChangedEvent, UserActionEvent };\n//# sourceMappingURL=events.js.map\n","var __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar _ref;\nclass SceneObjectRef {\n  constructor(ref) {\n    __privateAdd(this, _ref, void 0);\n    __privateSet(this, _ref, ref);\n  }\n  resolve() {\n    return __privateGet(this, _ref);\n  }\n}\n_ref = new WeakMap();\n\nexport { SceneObjectRef };\n//# sourceMappingURL=SceneObjectRef.js.map\n","import { useState, useEffect } from 'react';\nimport { Subscription } from 'rxjs';\nimport { v4 } from 'uuid';\nimport { EventBusSrv } from '@grafana/data';\nimport { SceneComponentWrapper } from './SceneComponentWrapper.js';\nimport { SceneObjectStateChangedEvent } from './events.js';\nimport { cloneSceneObject } from './sceneGraph/utils.js';\nimport { SceneObjectRef } from './SceneObjectRef.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass SceneObjectBase {\n  constructor(state) {\n    this._isActive = false;\n    this._activationHandlers = [];\n    this._deactivationHandlers = /* @__PURE__ */ new Map();\n    this._subs = new Subscription();\n    this._refCount = 0;\n    if (!state.key) {\n      state.key = v4();\n    }\n    this._events = new EventBusSrv();\n    this._state = Object.freeze(state);\n    this._setParent(this._state);\n  }\n  get state() {\n    return this._state;\n  }\n  get isActive() {\n    return this._isActive;\n  }\n  get parent() {\n    return this._parent;\n  }\n  get variableDependency() {\n    return this._variableDependency;\n  }\n  get urlSync() {\n    return this._urlSync;\n  }\n  get Component() {\n    return SceneComponentWrapper;\n  }\n  _setParent(state) {\n    forEachChild(state, (child) => {\n      if (child._parent && child._parent !== this) {\n        console.warn(\n          \"SceneObject already has a parent set that is different from the new parent. You cannot share the same SceneObject instance in multiple scenes or in multiple different places of the same scene graph. Use SceneObject.clone() to duplicate a SceneObject or store a state key reference and use sceneGraph.findObject to locate it.\",\n          child,\n          this\n        );\n      }\n      child._parent = this;\n    });\n  }\n  subscribeToState(handler) {\n    return this._events.subscribe(SceneObjectStateChangedEvent, (event) => {\n      if (event.payload.changedObject === this) {\n        handler(event.payload.newState, event.payload.prevState);\n      }\n    });\n  }\n  subscribeToEvent(eventType, handler) {\n    return this._events.subscribe(eventType, handler);\n  }\n  setState(update) {\n    const prevState = this._state;\n    const newState = __spreadValues(__spreadValues({}, this._state), update);\n    this._state = Object.freeze(newState);\n    this._setParent(update);\n    this._handleActivationOfChangedStateProps(prevState, newState);\n    this.publishEvent(\n      new SceneObjectStateChangedEvent({\n        prevState,\n        newState,\n        partialUpdate: update,\n        changedObject: this\n      }),\n      true\n    );\n  }\n  _handleActivationOfChangedStateProps(prevState, newState) {\n    if (!this.isActive) {\n      return;\n    }\n    if (prevState.$behaviors !== newState.$behaviors) {\n      this._handleChangedBehaviors(prevState.$behaviors, newState.$behaviors);\n    }\n    if (prevState.$data !== newState.$data) {\n      this._handleChangedStateActivation(prevState.$data, newState.$data);\n    }\n    if (prevState.$variables !== newState.$variables) {\n      this._handleChangedStateActivation(prevState.$variables, newState.$variables);\n    }\n    if (prevState.$timeRange !== newState.$timeRange) {\n      this._handleChangedStateActivation(prevState.$timeRange, newState.$timeRange);\n    }\n  }\n  _handleChangedStateActivation(oldValue, newValue) {\n    if (oldValue) {\n      const deactivationHandler = this._deactivationHandlers.get(oldValue);\n      if (deactivationHandler) {\n        deactivationHandler();\n        this._deactivationHandlers.delete(oldValue);\n      }\n    }\n    if (newValue) {\n      this._deactivationHandlers.set(newValue, newValue.activate());\n    }\n  }\n  _handleChangedBehaviors(oldValue, newValue) {\n    if (oldValue) {\n      for (const oldBehavior of oldValue) {\n        if (!newValue || !newValue.includes(oldBehavior)) {\n          const deactivationHandler = this._deactivationHandlers.get(oldBehavior);\n          if (deactivationHandler) {\n            deactivationHandler();\n            this._deactivationHandlers.delete(oldBehavior);\n          }\n        }\n      }\n    }\n    if (newValue) {\n      for (const newBehavior of newValue) {\n        if (!oldValue || !oldValue.includes(newBehavior)) {\n          this._activateBehavior(newBehavior);\n        }\n      }\n    }\n  }\n  publishEvent(event, bubble) {\n    this._events.publish(event);\n    if (bubble && this.parent) {\n      this.parent.publishEvent(event, bubble);\n    }\n  }\n  getRoot() {\n    return !this._parent ? this : this._parent.getRoot();\n  }\n  _internalActivate() {\n    this._isActive = true;\n    const { $data, $variables, $timeRange, $behaviors } = this.state;\n    this._activationHandlers.forEach((handler) => {\n      const result = handler();\n      if (result) {\n        this._deactivationHandlers.set(result, result);\n      }\n    });\n    if ($timeRange && !$timeRange.isActive) {\n      this._deactivationHandlers.set($timeRange, $timeRange.activate());\n    }\n    if ($variables && !$variables.isActive) {\n      this._deactivationHandlers.set($variables, $variables.activate());\n    }\n    if ($data && !$data.isActive) {\n      this._deactivationHandlers.set($data, $data.activate());\n    }\n    if ($behaviors) {\n      for (const behavior of $behaviors) {\n        this._activateBehavior(behavior);\n      }\n    }\n  }\n  _activateBehavior(behavior) {\n    if (behavior instanceof SceneObjectBase) {\n      this._deactivationHandlers.set(behavior, behavior.activate());\n    } else if (typeof behavior === \"function\") {\n      const deactivate = behavior(this);\n      if (deactivate) {\n        this._deactivationHandlers.set(behavior, deactivate);\n      }\n    }\n  }\n  activate() {\n    if (!this.isActive) {\n      this._internalActivate();\n    }\n    this._refCount++;\n    let called = false;\n    return () => {\n      this._refCount--;\n      if (called) {\n        const msg = `SceneObject cancelation handler returned by activate() called a second time`;\n        throw new Error(msg);\n      }\n      called = true;\n      if (this._refCount === 0) {\n        this._internalDeactivate();\n      }\n    };\n  }\n  _internalDeactivate() {\n    this._isActive = false;\n    for (let handler of this._deactivationHandlers.values()) {\n      handler();\n    }\n    this._deactivationHandlers.clear();\n    this._events.removeAllListeners();\n    this._subs.unsubscribe();\n    this._subs = new Subscription();\n  }\n  useState() {\n    return useSceneObjectState(this);\n  }\n  forceRender() {\n    this.setState({});\n  }\n  clone(withState) {\n    return cloneSceneObject(this, withState);\n  }\n  addActivationHandler(handler) {\n    this._activationHandlers.push(handler);\n  }\n  forEachChild(callback) {\n    forEachChild(this.state, callback);\n  }\n  getRef() {\n    if (!this._ref) {\n      this._ref = new SceneObjectRef(this);\n    }\n    return this._ref;\n  }\n}\nfunction useSceneObjectState(model, options) {\n  var _a;\n  const [_, setState] = useState(model.state);\n  const stateAtFirstRender = model.state;\n  const shouldActivateOrKeepAlive = (_a = options == null ? void 0 : options.shouldActivateOrKeepAlive) != null ? _a : false;\n  useEffect(() => {\n    let unactivate;\n    if (shouldActivateOrKeepAlive) {\n      unactivate = model.activate();\n    }\n    const s = model.subscribeToState((state) => {\n      setState(state);\n    });\n    if (model.state !== stateAtFirstRender) {\n      setState(model.state);\n    }\n    return () => {\n      s.unsubscribe();\n      if (unactivate) {\n        unactivate();\n      }\n    };\n  }, [model, shouldActivateOrKeepAlive]);\n  return model.state;\n}\nfunction forEachChild(state, callback) {\n  for (const propValue of Object.values(state)) {\n    if (propValue instanceof SceneObjectBase) {\n      callback(propValue);\n    }\n    if (Array.isArray(propValue)) {\n      for (const child of propValue) {\n        if (child instanceof SceneObjectBase) {\n          callback(child);\n        }\n      }\n    }\n  }\n}\n\nexport { SceneObjectBase, useSceneObjectState };\n//# sourceMappingURL=SceneObjectBase.js.map\n","import { SceneObjectBase } from '../SceneObjectBase.js';\nimport { SceneObjectRef } from '../SceneObjectRef.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nfunction cloneSceneObject(sceneObject, withState) {\n  const clonedState = cloneSceneObjectState(sceneObject.state, withState);\n  return new sceneObject.constructor(clonedState);\n}\nfunction cloneSceneObjectState(sceneState, withState) {\n  const clonedState = __spreadValues({}, sceneState);\n  for (const key in clonedState) {\n    const propValue = clonedState[key];\n    if (propValue instanceof SceneObjectBase) {\n      clonedState[key] = propValue.clone();\n    }\n    if (propValue instanceof SceneObjectRef) {\n      throw new Error(\"Cannot clone a SceneObject with a SceneObjectRef in state\");\n    }\n    if (Array.isArray(propValue)) {\n      const newArray = [];\n      for (const child of propValue) {\n        if (child instanceof SceneObjectBase) {\n          newArray.push(child.clone());\n        } else {\n          newArray.push(child);\n        }\n      }\n      clonedState[key] = newArray;\n    }\n  }\n  Object.assign(clonedState, withState);\n  return clonedState;\n}\nfunction getClosest(sceneObject, extract) {\n  let curSceneObject = sceneObject;\n  let extracted = void 0;\n  while (curSceneObject && !extracted) {\n    extracted = extract(curSceneObject);\n    curSceneObject = curSceneObject.parent;\n  }\n  return extracted;\n}\n\nexport { cloneSceneObject, cloneSceneObjectState, getClosest };\n//# sourceMappingURL=utils.js.map\n","import { DataSourceApi, PluginType } from '@grafana/data';\n\nclass RuntimeDataSource extends DataSourceApi {\n  constructor(pluginId, uid) {\n    super({\n      name: \"RuntimeDataSource-\" + pluginId,\n      uid,\n      type: pluginId,\n      id: 1,\n      readOnly: true,\n      jsonData: {},\n      access: \"direct\",\n      meta: {\n        id: pluginId,\n        name: \"RuntimeDataSource-\" + pluginId,\n        type: PluginType.datasource,\n        info: {\n          author: {\n            name: \"\"\n          },\n          description: \"\",\n          links: [],\n          logos: {\n            large: \"\",\n            small: \"\"\n          },\n          screenshots: [],\n          updated: \"\",\n          version: \"\"\n        },\n        module: \"\",\n        baseUrl: \"\"\n      }\n    });\n  }\n  testDatasource() {\n    return Promise.resolve({});\n  }\n}\nconst runtimeDataSources = /* @__PURE__ */ new Map();\nfunction registerRuntimeDataSource({ dataSource }) {\n  if (runtimeDataSources.has(dataSource.uid)) {\n    throw new Error(`A runtime data source with uid ${dataSource.uid} has already been registered`);\n  }\n  runtimeDataSources.set(dataSource.uid, dataSource);\n}\n\nexport { RuntimeDataSource, registerRuntimeDataSource, runtimeDataSources };\n//# sourceMappingURL=RuntimeDataSource.js.map\n","class UniqueUrlKeyMapper {\n  constructor() {\n    this.index = /* @__PURE__ */ new Map();\n  }\n  getUniqueKey(key, obj) {\n    const objectsWithKey = this.index.get(key);\n    if (!objectsWithKey) {\n      throw new Error(\"Cannot find any scene object that uses the key '\" + key + \"'\");\n    }\n    const address = objectsWithKey.findIndex((o) => o.sceneObject === obj);\n    if (address > 0) {\n      return `${key}-${address + 1}`;\n    }\n    return key;\n  }\n  rebuildIndex(root) {\n    this.index.clear();\n    this.buildIndex(root, 0);\n  }\n  buildIndex(sceneObject, depth) {\n    if (sceneObject.urlSync) {\n      for (const key of sceneObject.urlSync.getKeys()) {\n        const hit = this.index.get(key);\n        if (hit) {\n          hit.push({ sceneObject, depth });\n          hit.sort((a, b) => a.depth - b.depth);\n        } else {\n          this.index.set(key, [{ sceneObject, depth }]);\n        }\n      }\n    }\n    sceneObject.forEachChild((child) => this.buildIndex(child, depth + 1));\n  }\n}\n\nexport { UniqueUrlKeyMapper };\n//# sourceMappingURL=UniqueUrlKeyMapper.js.map\n","import { isEqual } from 'lodash';\nimport { UniqueUrlKeyMapper } from './UniqueUrlKeyMapper.js';\n\nfunction getUrlState(root) {\n  const urlKeyMapper = new UniqueUrlKeyMapper();\n  urlKeyMapper.rebuildIndex(root);\n  const result = {};\n  const visitNode = (obj) => {\n    if (obj.urlSync) {\n      const newUrlState = obj.urlSync.getUrlState();\n      for (const [key, value] of Object.entries(newUrlState)) {\n        if (value != null) {\n          const uniqueKey = urlKeyMapper.getUniqueKey(key, obj);\n          result[uniqueKey] = value;\n        }\n      }\n    }\n    obj.forEachChild(visitNode);\n  };\n  visitNode(root);\n  return result;\n}\nfunction syncStateFromSearchParams(root, urlParams) {\n  const urlKeyMapper = new UniqueUrlKeyMapper();\n  urlKeyMapper.rebuildIndex(root);\n  syncStateFromUrl(root, urlParams, urlKeyMapper);\n}\nfunction syncStateFromUrl(sceneObject, urlParams, urlKeyMapper) {\n  if (sceneObject.urlSync) {\n    const urlState = {};\n    const currentState = sceneObject.urlSync.getUrlState();\n    for (const key of sceneObject.urlSync.getKeys()) {\n      const uniqueKey = urlKeyMapper.getUniqueKey(key, sceneObject);\n      const newValue = urlParams.getAll(uniqueKey);\n      const currentValue = currentState[key];\n      if (isUrlValueEqual(newValue, currentValue)) {\n        continue;\n      }\n      if (newValue.length > 0) {\n        if (Array.isArray(currentValue)) {\n          urlState[key] = newValue;\n        } else {\n          urlState[key] = newValue[0];\n        }\n      } else {\n        urlState[key] = null;\n      }\n    }\n    if (Object.keys(urlState).length > 0) {\n      sceneObject.urlSync.updateFromUrl(urlState);\n    }\n  }\n  sceneObject.forEachChild((child) => syncStateFromUrl(child, urlParams, urlKeyMapper));\n}\nfunction isUrlValueEqual(currentUrlValue, newUrlValue) {\n  if (currentUrlValue.length === 0 && newUrlValue == null) {\n    return true;\n  }\n  if (!Array.isArray(newUrlValue) && (currentUrlValue == null ? void 0 : currentUrlValue.length) === 1) {\n    return newUrlValue === currentUrlValue[0];\n  }\n  if ((newUrlValue == null ? void 0 : newUrlValue.length) === 0 && currentUrlValue === null) {\n    return true;\n  }\n  return isEqual(currentUrlValue, newUrlValue);\n}\n\nexport { getUrlState, isUrlValueEqual, syncStateFromSearchParams, syncStateFromUrl };\n//# sourceMappingURL=utils.js.map\n","var DataTopic = /* @__PURE__ */ ((DataTopic2) => {\n  DataTopic2[\"AlertStates\"] = \"alertStates\";\n  DataTopic2[\"Annotations\"] = \"annotations\";\n  DataTopic2[\"Series\"] = \"series\";\n  return DataTopic2;\n})(DataTopic || {});\nvar ScaleDimensionMode = /* @__PURE__ */ ((ScaleDimensionMode2) => {\n  ScaleDimensionMode2[\"Linear\"] = \"linear\";\n  ScaleDimensionMode2[\"Quad\"] = \"quad\";\n  return ScaleDimensionMode2;\n})(ScaleDimensionMode || {});\nvar ScalarDimensionMode = /* @__PURE__ */ ((ScalarDimensionMode2) => {\n  ScalarDimensionMode2[\"Clamped\"] = \"clamped\";\n  ScalarDimensionMode2[\"Mod\"] = \"mod\";\n  return ScalarDimensionMode2;\n})(ScalarDimensionMode || {});\nvar TextDimensionMode = /* @__PURE__ */ ((TextDimensionMode2) => {\n  TextDimensionMode2[\"Field\"] = \"field\";\n  TextDimensionMode2[\"Fixed\"] = \"fixed\";\n  TextDimensionMode2[\"Template\"] = \"template\";\n  return TextDimensionMode2;\n})(TextDimensionMode || {});\nvar ResourceDimensionMode = /* @__PURE__ */ ((ResourceDimensionMode2) => {\n  ResourceDimensionMode2[\"Field\"] = \"field\";\n  ResourceDimensionMode2[\"Fixed\"] = \"fixed\";\n  ResourceDimensionMode2[\"Mapping\"] = \"mapping\";\n  return ResourceDimensionMode2;\n})(ResourceDimensionMode || {});\nvar FrameGeometrySourceMode = /* @__PURE__ */ ((FrameGeometrySourceMode2) => {\n  FrameGeometrySourceMode2[\"Auto\"] = \"auto\";\n  FrameGeometrySourceMode2[\"Coords\"] = \"coords\";\n  FrameGeometrySourceMode2[\"Geohash\"] = \"geohash\";\n  FrameGeometrySourceMode2[\"Lookup\"] = \"lookup\";\n  return FrameGeometrySourceMode2;\n})(FrameGeometrySourceMode || {});\nvar HeatmapCalculationMode = /* @__PURE__ */ ((HeatmapCalculationMode2) => {\n  HeatmapCalculationMode2[\"Count\"] = \"count\";\n  HeatmapCalculationMode2[\"Size\"] = \"size\";\n  return HeatmapCalculationMode2;\n})(HeatmapCalculationMode || {});\nvar HeatmapCellLayout = /* @__PURE__ */ ((HeatmapCellLayout2) => {\n  HeatmapCellLayout2[\"auto\"] = \"auto\";\n  HeatmapCellLayout2[\"ge\"] = \"ge\";\n  HeatmapCellLayout2[\"le\"] = \"le\";\n  HeatmapCellLayout2[\"unknown\"] = \"unknown\";\n  return HeatmapCellLayout2;\n})(HeatmapCellLayout || {});\nvar LogsSortOrder = /* @__PURE__ */ ((LogsSortOrder2) => {\n  LogsSortOrder2[\"Ascending\"] = \"Ascending\";\n  LogsSortOrder2[\"Descending\"] = \"Descending\";\n  return LogsSortOrder2;\n})(LogsSortOrder || {});\nvar AxisPlacement = /* @__PURE__ */ ((AxisPlacement2) => {\n  AxisPlacement2[\"Auto\"] = \"auto\";\n  AxisPlacement2[\"Bottom\"] = \"bottom\";\n  AxisPlacement2[\"Hidden\"] = \"hidden\";\n  AxisPlacement2[\"Left\"] = \"left\";\n  AxisPlacement2[\"Right\"] = \"right\";\n  AxisPlacement2[\"Top\"] = \"top\";\n  return AxisPlacement2;\n})(AxisPlacement || {});\nvar AxisColorMode = /* @__PURE__ */ ((AxisColorMode2) => {\n  AxisColorMode2[\"Series\"] = \"series\";\n  AxisColorMode2[\"Text\"] = \"text\";\n  return AxisColorMode2;\n})(AxisColorMode || {});\nvar VisibilityMode = /* @__PURE__ */ ((VisibilityMode2) => {\n  VisibilityMode2[\"Always\"] = \"always\";\n  VisibilityMode2[\"Auto\"] = \"auto\";\n  VisibilityMode2[\"Never\"] = \"never\";\n  return VisibilityMode2;\n})(VisibilityMode || {});\nvar GraphDrawStyle = /* @__PURE__ */ ((GraphDrawStyle2) => {\n  GraphDrawStyle2[\"Bars\"] = \"bars\";\n  GraphDrawStyle2[\"Line\"] = \"line\";\n  GraphDrawStyle2[\"Points\"] = \"points\";\n  return GraphDrawStyle2;\n})(GraphDrawStyle || {});\nvar GraphTransform = /* @__PURE__ */ ((GraphTransform2) => {\n  GraphTransform2[\"Constant\"] = \"constant\";\n  GraphTransform2[\"NegativeY\"] = \"negative-Y\";\n  return GraphTransform2;\n})(GraphTransform || {});\nvar LineInterpolation = /* @__PURE__ */ ((LineInterpolation2) => {\n  LineInterpolation2[\"Linear\"] = \"linear\";\n  LineInterpolation2[\"Smooth\"] = \"smooth\";\n  LineInterpolation2[\"StepAfter\"] = \"stepAfter\";\n  LineInterpolation2[\"StepBefore\"] = \"stepBefore\";\n  return LineInterpolation2;\n})(LineInterpolation || {});\nvar ScaleDistribution = /* @__PURE__ */ ((ScaleDistribution2) => {\n  ScaleDistribution2[\"Linear\"] = \"linear\";\n  ScaleDistribution2[\"Log\"] = \"log\";\n  ScaleDistribution2[\"Ordinal\"] = \"ordinal\";\n  ScaleDistribution2[\"Symlog\"] = \"symlog\";\n  return ScaleDistribution2;\n})(ScaleDistribution || {});\nvar GraphGradientMode = /* @__PURE__ */ ((GraphGradientMode2) => {\n  GraphGradientMode2[\"Hue\"] = \"hue\";\n  GraphGradientMode2[\"None\"] = \"none\";\n  GraphGradientMode2[\"Opacity\"] = \"opacity\";\n  GraphGradientMode2[\"Scheme\"] = \"scheme\";\n  return GraphGradientMode2;\n})(GraphGradientMode || {});\nvar StackingMode = /* @__PURE__ */ ((StackingMode2) => {\n  StackingMode2[\"None\"] = \"none\";\n  StackingMode2[\"Normal\"] = \"normal\";\n  StackingMode2[\"Percent\"] = \"percent\";\n  return StackingMode2;\n})(StackingMode || {});\nvar BarAlignment = /* @__PURE__ */ ((BarAlignment2) => {\n  BarAlignment2[BarAlignment2[\"After\"] = 1] = \"After\";\n  BarAlignment2[BarAlignment2[\"Before\"] = -1] = \"Before\";\n  BarAlignment2[BarAlignment2[\"Center\"] = 0] = \"Center\";\n  return BarAlignment2;\n})(BarAlignment || {});\nvar ScaleOrientation = /* @__PURE__ */ ((ScaleOrientation2) => {\n  ScaleOrientation2[ScaleOrientation2[\"Horizontal\"] = 0] = \"Horizontal\";\n  ScaleOrientation2[ScaleOrientation2[\"Vertical\"] = 1] = \"Vertical\";\n  return ScaleOrientation2;\n})(ScaleOrientation || {});\nvar ScaleDirection = /* @__PURE__ */ ((ScaleDirection2) => {\n  ScaleDirection2[ScaleDirection2[\"Down\"] = -1] = \"Down\";\n  ScaleDirection2[ScaleDirection2[\"Left\"] = -1] = \"Left\";\n  ScaleDirection2[ScaleDirection2[\"Right\"] = 1] = \"Right\";\n  ScaleDirection2[ScaleDirection2[\"Up\"] = 1] = \"Up\";\n  return ScaleDirection2;\n})(ScaleDirection || {});\nconst defaultLineStyle = {\n  dash: []\n};\nvar GraphThresholdsStyleMode = /* @__PURE__ */ ((GraphThresholdsStyleMode2) => {\n  GraphThresholdsStyleMode2[\"Area\"] = \"area\";\n  GraphThresholdsStyleMode2[\"Dashed\"] = \"dashed\";\n  GraphThresholdsStyleMode2[\"DashedAndArea\"] = \"dashed+area\";\n  GraphThresholdsStyleMode2[\"Line\"] = \"line\";\n  GraphThresholdsStyleMode2[\"LineAndArea\"] = \"line+area\";\n  GraphThresholdsStyleMode2[\"Off\"] = \"off\";\n  GraphThresholdsStyleMode2[\"Series\"] = \"series\";\n  return GraphThresholdsStyleMode2;\n})(GraphThresholdsStyleMode || {});\nvar LegendDisplayMode = /* @__PURE__ */ ((LegendDisplayMode2) => {\n  LegendDisplayMode2[\"Hidden\"] = \"hidden\";\n  LegendDisplayMode2[\"List\"] = \"list\";\n  LegendDisplayMode2[\"Table\"] = \"table\";\n  return LegendDisplayMode2;\n})(LegendDisplayMode || {});\nconst defaultReduceDataOptions = {\n  calcs: []\n};\nvar VizOrientation = /* @__PURE__ */ ((VizOrientation2) => {\n  VizOrientation2[\"Auto\"] = \"auto\";\n  VizOrientation2[\"Horizontal\"] = \"horizontal\";\n  VizOrientation2[\"Vertical\"] = \"vertical\";\n  return VizOrientation2;\n})(VizOrientation || {});\nconst defaultOptionsWithTimezones = {\n  timezone: []\n};\nvar BigValueColorMode = /* @__PURE__ */ ((BigValueColorMode2) => {\n  BigValueColorMode2[\"Background\"] = \"background\";\n  BigValueColorMode2[\"BackgroundSolid\"] = \"background_solid\";\n  BigValueColorMode2[\"None\"] = \"none\";\n  BigValueColorMode2[\"Value\"] = \"value\";\n  return BigValueColorMode2;\n})(BigValueColorMode || {});\nvar BigValueGraphMode = /* @__PURE__ */ ((BigValueGraphMode2) => {\n  BigValueGraphMode2[\"Area\"] = \"area\";\n  BigValueGraphMode2[\"Line\"] = \"line\";\n  BigValueGraphMode2[\"None\"] = \"none\";\n  return BigValueGraphMode2;\n})(BigValueGraphMode || {});\nvar BigValueJustifyMode = /* @__PURE__ */ ((BigValueJustifyMode2) => {\n  BigValueJustifyMode2[\"Auto\"] = \"auto\";\n  BigValueJustifyMode2[\"Center\"] = \"center\";\n  return BigValueJustifyMode2;\n})(BigValueJustifyMode || {});\nvar BigValueTextMode = /* @__PURE__ */ ((BigValueTextMode2) => {\n  BigValueTextMode2[\"Auto\"] = \"auto\";\n  BigValueTextMode2[\"Name\"] = \"name\";\n  BigValueTextMode2[\"None\"] = \"none\";\n  BigValueTextMode2[\"Value\"] = \"value\";\n  BigValueTextMode2[\"ValueAndName\"] = \"value_and_name\";\n  return BigValueTextMode2;\n})(BigValueTextMode || {});\nvar PercentChangeColorMode = /* @__PURE__ */ ((PercentChangeColorMode2) => {\n  PercentChangeColorMode2[\"Inverted\"] = \"inverted\";\n  PercentChangeColorMode2[\"SameAsValue\"] = \"same_as_value\";\n  PercentChangeColorMode2[\"Standard\"] = \"standard\";\n  return PercentChangeColorMode2;\n})(PercentChangeColorMode || {});\nvar TooltipDisplayMode = /* @__PURE__ */ ((TooltipDisplayMode2) => {\n  TooltipDisplayMode2[\"Multi\"] = \"multi\";\n  TooltipDisplayMode2[\"None\"] = \"none\";\n  TooltipDisplayMode2[\"Single\"] = \"single\";\n  return TooltipDisplayMode2;\n})(TooltipDisplayMode || {});\nvar SortOrder = /* @__PURE__ */ ((SortOrder2) => {\n  SortOrder2[\"Ascending\"] = \"asc\";\n  SortOrder2[\"Descending\"] = \"desc\";\n  SortOrder2[\"None\"] = \"none\";\n  return SortOrder2;\n})(SortOrder || {});\nconst defaultVizLegendOptions = {\n  calcs: []\n};\nvar BarGaugeDisplayMode = /* @__PURE__ */ ((BarGaugeDisplayMode2) => {\n  BarGaugeDisplayMode2[\"Basic\"] = \"basic\";\n  BarGaugeDisplayMode2[\"Gradient\"] = \"gradient\";\n  BarGaugeDisplayMode2[\"Lcd\"] = \"lcd\";\n  return BarGaugeDisplayMode2;\n})(BarGaugeDisplayMode || {});\nvar BarGaugeValueMode = /* @__PURE__ */ ((BarGaugeValueMode2) => {\n  BarGaugeValueMode2[\"Color\"] = \"color\";\n  BarGaugeValueMode2[\"Hidden\"] = \"hidden\";\n  BarGaugeValueMode2[\"Text\"] = \"text\";\n  return BarGaugeValueMode2;\n})(BarGaugeValueMode || {});\nvar BarGaugeNamePlacement = /* @__PURE__ */ ((BarGaugeNamePlacement2) => {\n  BarGaugeNamePlacement2[\"Auto\"] = \"auto\";\n  BarGaugeNamePlacement2[\"Left\"] = \"left\";\n  BarGaugeNamePlacement2[\"Top\"] = \"top\";\n  return BarGaugeNamePlacement2;\n})(BarGaugeNamePlacement || {});\nvar BarGaugeSizing = /* @__PURE__ */ ((BarGaugeSizing2) => {\n  BarGaugeSizing2[\"Auto\"] = \"auto\";\n  BarGaugeSizing2[\"Manual\"] = \"manual\";\n  return BarGaugeSizing2;\n})(BarGaugeSizing || {});\nvar TableCellDisplayMode = /* @__PURE__ */ ((TableCellDisplayMode2) => {\n  TableCellDisplayMode2[\"Auto\"] = \"auto\";\n  TableCellDisplayMode2[\"BasicGauge\"] = \"basic\";\n  TableCellDisplayMode2[\"ColorBackground\"] = \"color-background\";\n  TableCellDisplayMode2[\"ColorBackgroundSolid\"] = \"color-background-solid\";\n  TableCellDisplayMode2[\"ColorText\"] = \"color-text\";\n  TableCellDisplayMode2[\"Custom\"] = \"custom\";\n  TableCellDisplayMode2[\"DataLinks\"] = \"data-links\";\n  TableCellDisplayMode2[\"Gauge\"] = \"gauge\";\n  TableCellDisplayMode2[\"GradientGauge\"] = \"gradient-gauge\";\n  TableCellDisplayMode2[\"Image\"] = \"image\";\n  TableCellDisplayMode2[\"JSONView\"] = \"json-view\";\n  TableCellDisplayMode2[\"LcdGauge\"] = \"lcd-gauge\";\n  TableCellDisplayMode2[\"Sparkline\"] = \"sparkline\";\n  return TableCellDisplayMode2;\n})(TableCellDisplayMode || {});\nvar TableCellBackgroundDisplayMode = /* @__PURE__ */ ((TableCellBackgroundDisplayMode2) => {\n  TableCellBackgroundDisplayMode2[\"Basic\"] = \"basic\";\n  TableCellBackgroundDisplayMode2[\"Gradient\"] = \"gradient\";\n  return TableCellBackgroundDisplayMode2;\n})(TableCellBackgroundDisplayMode || {});\nconst defaultTableFooterOptions = {\n  fields: [],\n  reducer: []\n};\nvar TableCellHeight = /* @__PURE__ */ ((TableCellHeight2) => {\n  TableCellHeight2[\"Auto\"] = \"auto\";\n  TableCellHeight2[\"Lg\"] = \"lg\";\n  TableCellHeight2[\"Md\"] = \"md\";\n  TableCellHeight2[\"Sm\"] = \"sm\";\n  return TableCellHeight2;\n})(TableCellHeight || {});\nvar VariableFormatID = /* @__PURE__ */ ((VariableFormatID2) => {\n  VariableFormatID2[\"CSV\"] = \"csv\";\n  VariableFormatID2[\"Date\"] = \"date\";\n  VariableFormatID2[\"Distributed\"] = \"distributed\";\n  VariableFormatID2[\"DoubleQuote\"] = \"doublequote\";\n  VariableFormatID2[\"Glob\"] = \"glob\";\n  VariableFormatID2[\"HTML\"] = \"html\";\n  VariableFormatID2[\"JSON\"] = \"json\";\n  VariableFormatID2[\"Lucene\"] = \"lucene\";\n  VariableFormatID2[\"PercentEncode\"] = \"percentencode\";\n  VariableFormatID2[\"Pipe\"] = \"pipe\";\n  VariableFormatID2[\"QueryParam\"] = \"queryparam\";\n  VariableFormatID2[\"Raw\"] = \"raw\";\n  VariableFormatID2[\"Regex\"] = \"regex\";\n  VariableFormatID2[\"SQLString\"] = \"sqlstring\";\n  VariableFormatID2[\"SingleQuote\"] = \"singlequote\";\n  VariableFormatID2[\"Text\"] = \"text\";\n  VariableFormatID2[\"UriEncode\"] = \"uriencode\";\n  return VariableFormatID2;\n})(VariableFormatID || {});\nvar LogsDedupStrategy = /* @__PURE__ */ ((LogsDedupStrategy2) => {\n  LogsDedupStrategy2[\"exact\"] = \"exact\";\n  LogsDedupStrategy2[\"none\"] = \"none\";\n  LogsDedupStrategy2[\"numbers\"] = \"numbers\";\n  LogsDedupStrategy2[\"signature\"] = \"signature\";\n  return LogsDedupStrategy2;\n})(LogsDedupStrategy || {});\nvar ComparisonOperation = /* @__PURE__ */ ((ComparisonOperation2) => {\n  ComparisonOperation2[\"EQ\"] = \"eq\";\n  ComparisonOperation2[\"GT\"] = \"gt\";\n  ComparisonOperation2[\"GTE\"] = \"gte\";\n  ComparisonOperation2[\"LT\"] = \"lt\";\n  ComparisonOperation2[\"LTE\"] = \"lte\";\n  ComparisonOperation2[\"NEQ\"] = \"neq\";\n  return ComparisonOperation2;\n})(ComparisonOperation || {});\nconst defaultTimeZone = \"browser\";\n\nexport { AxisColorMode, AxisPlacement, BarAlignment, BarGaugeDisplayMode, BarGaugeNamePlacement, BarGaugeSizing, BarGaugeValueMode, BigValueColorMode, BigValueGraphMode, BigValueJustifyMode, BigValueTextMode, ComparisonOperation, DataTopic, FrameGeometrySourceMode, GraphDrawStyle, GraphGradientMode, GraphThresholdsStyleMode, GraphTransform, HeatmapCalculationMode, HeatmapCellLayout, LegendDisplayMode, LineInterpolation, LogsDedupStrategy, LogsSortOrder, PercentChangeColorMode, ResourceDimensionMode, ScalarDimensionMode, ScaleDimensionMode, ScaleDirection, ScaleDistribution, ScaleOrientation, SortOrder, StackingMode, TableCellBackgroundDisplayMode, TableCellDisplayMode, TableCellHeight, TextDimensionMode, TooltipDisplayMode, VariableFormatID, VisibilityMode, VizOrientation, defaultLineStyle, defaultOptionsWithTimezones, defaultReduceDataOptions, defaultTableFooterOptions, defaultTimeZone, defaultVizLegendOptions };\n//# sourceMappingURL=common.gen.js.map\n","import { TableCellDisplayMode } from '../common/common.gen.js';\nexport { AxisColorMode, AxisPlacement, BarAlignment, BarGaugeDisplayMode, BarGaugeNamePlacement, BarGaugeSizing, BarGaugeValueMode, BigValueColorMode, BigValueGraphMode, BigValueJustifyMode, BigValueTextMode, ComparisonOperation, DataTopic, FrameGeometrySourceMode, GraphDrawStyle, GraphGradientMode, GraphThresholdsStyleMode, GraphTransform, HeatmapCalculationMode, HeatmapCellLayout, LegendDisplayMode, LineInterpolation, LogsDedupStrategy, LogsSortOrder, PercentChangeColorMode, ResourceDimensionMode, ScalarDimensionMode, ScaleDimensionMode, ScaleDirection, ScaleDistribution, ScaleOrientation, SortOrder, StackingMode, TableCellBackgroundDisplayMode, TableCellDisplayMode, TableCellHeight, TextDimensionMode, TooltipDisplayMode, VariableFormatID, VisibilityMode, VizOrientation, defaultLineStyle, defaultOptionsWithTimezones, defaultReduceDataOptions, defaultTableFooterOptions, defaultTimeZone, defaultVizLegendOptions } from '../common/common.gen.js';\n\nconst defaultTableFieldOptions = {\n  align: \"auto\",\n  inspect: false,\n  cellOptions: {\n    type: TableCellDisplayMode.Auto\n  }\n};\nvar LoadingState = /* @__PURE__ */ ((LoadingState2) => {\n  LoadingState2[\"NotStarted\"] = \"NotStarted\";\n  LoadingState2[\"Loading\"] = \"Loading\";\n  LoadingState2[\"Streaming\"] = \"Streaming\";\n  LoadingState2[\"Done\"] = \"Done\";\n  LoadingState2[\"Error\"] = \"Error\";\n  return LoadingState2;\n})(LoadingState || {});\n\nexport { LoadingState, defaultTableFieldOptions };\n//# sourceMappingURL=common.types.js.map\n","import { getDefaultTimeRange } from '@grafana/data';\nimport { LoadingState } from '@grafana/schema';\nimport { of } from 'rxjs';\nimport { SceneObjectBase } from './SceneObjectBase.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass SceneDataNode extends SceneObjectBase {\n  constructor(state) {\n    super(__spreadValues({\n      data: emptyPanelData\n    }, state));\n  }\n  getResultsStream() {\n    const result = {\n      origin: this,\n      data: this.state.data\n    };\n    return of(result);\n  }\n}\nconst emptyPanelData = {\n  state: LoadingState.Done,\n  series: [],\n  timeRange: getDefaultTimeRange()\n};\n\nexport { SceneDataNode, emptyPanelData };\n//# sourceMappingURL=SceneDataNode.js.map\n","class SceneObjectUrlSyncConfig {\n  constructor(_sceneObject, _options) {\n    this._sceneObject = _sceneObject;\n    this._keys = _options.keys;\n  }\n  getKeys() {\n    if (typeof this._keys === \"function\") {\n      return this._keys();\n    }\n    return this._keys;\n  }\n  getUrlState() {\n    return this._sceneObject.getUrlState();\n  }\n  updateFromUrl(values) {\n    this._sceneObject.updateFromUrl(values);\n  }\n}\n\nexport { SceneObjectUrlSyncConfig };\n//# sourceMappingURL=SceneObjectUrlSyncConfig.js.map\n","import { toUtc } from '@grafana/data';\n\nconst INTERVAL_STRING_REGEX = /^\\d+[yYmMsSwWhHdD]$/;\nfunction parseUrlParam(value) {\n  if (typeof value !== \"string\") {\n    return null;\n  }\n  if (value.indexOf(\"now\") !== -1) {\n    return value;\n  }\n  if (INTERVAL_STRING_REGEX.test(value)) {\n    return value;\n  }\n  if (value.length === 8) {\n    const utcValue = toUtc(value, \"YYYYMMDD\");\n    if (utcValue.isValid()) {\n      return utcValue.toISOString();\n    }\n  } else if (value.length === 15) {\n    const utcValue = toUtc(value, \"YYYYMMDDTHHmmss\");\n    if (utcValue.isValid()) {\n      return utcValue.toISOString();\n    }\n  } else if (value.length === 24) {\n    const utcValue = toUtc(value);\n    return utcValue.toISOString();\n  }\n  const epoch = parseInt(value, 10);\n  if (!isNaN(epoch)) {\n    return toUtc(epoch).toISOString();\n  }\n  return null;\n}\n\nexport { parseUrlParam };\n//# sourceMappingURL=parseUrlParam.js.map\n","import { dateMath } from '@grafana/data';\n\nfunction evaluateTimeRange(from, to, timeZone, fiscalYearStartMonth, delay) {\n  const hasDelay = delay && to === \"now\";\n  return {\n    from: dateMath.parse(from, false, timeZone, fiscalYearStartMonth),\n    to: dateMath.parse(hasDelay ? \"now-\" + delay : to, true, timeZone, fiscalYearStartMonth),\n    raw: {\n      from,\n      to\n    }\n  };\n}\n\nexport { evaluateTimeRange };\n//# sourceMappingURL=evaluateTimeRange.js.map\n","import { getTimeZone, setWeekStart } from '@grafana/data';\nimport { SceneObjectUrlSyncConfig } from '../services/SceneObjectUrlSyncConfig.js';\nimport { SceneObjectBase } from './SceneObjectBase.js';\nimport { getClosest } from './sceneGraph/utils.js';\nimport { parseUrlParam } from '../utils/parseUrlParam.js';\nimport { evaluateTimeRange } from '../utils/evaluateTimeRange.js';\nimport { config } from '@grafana/runtime';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass SceneTimeRange extends SceneObjectBase {\n  constructor(state = {}) {\n    var _a, _b;\n    const from = (_a = state.from) != null ? _a : \"now-6h\";\n    const to = (_b = state.to) != null ? _b : \"now\";\n    const timeZone = state.timeZone;\n    const value = evaluateTimeRange(\n      from,\n      to,\n      timeZone || getTimeZone(),\n      state.fiscalYearStartMonth,\n      state.UNSAFE_nowDelay\n    );\n    super(__spreadValues({ from, to, timeZone, value }, state));\n    this._urlSync = new SceneObjectUrlSyncConfig(this, { keys: [\"from\", \"to\", \"timezone\"] });\n    this.onTimeRangeChange = (timeRange) => {\n      const update = {};\n      const updateToEval = {};\n      if (typeof timeRange.raw.from === \"string\") {\n        update.from = timeRange.raw.from;\n        updateToEval.from = timeRange.raw.from;\n      } else {\n        update.from = timeRange.raw.from.toISOString();\n        updateToEval.from = timeRange.raw.from.toISOString(true);\n      }\n      if (typeof timeRange.raw.to === \"string\") {\n        update.to = timeRange.raw.to;\n        updateToEval.to = timeRange.raw.to;\n      } else {\n        update.to = timeRange.raw.to.toISOString();\n        updateToEval.to = timeRange.raw.to.toISOString(true);\n      }\n      update.value = evaluateTimeRange(\n        updateToEval.from,\n        updateToEval.to,\n        this.getTimeZone(),\n        this.state.fiscalYearStartMonth,\n        this.state.UNSAFE_nowDelay\n      );\n      if (update.from !== this.state.from || update.to !== this.state.to) {\n        this.setState(update);\n      }\n    };\n    this.onTimeZoneChange = (timeZone) => {\n      this.setState({ timeZone });\n    };\n    this.onRefresh = () => {\n      this.setState({\n        value: evaluateTimeRange(\n          this.state.from,\n          this.state.to,\n          this.getTimeZone(),\n          this.state.fiscalYearStartMonth,\n          this.state.UNSAFE_nowDelay\n        )\n      });\n    };\n    this.addActivationHandler(this._onActivate.bind(this));\n  }\n  _onActivate() {\n    if (!this.state.timeZone) {\n      const timeZoneSource = this.getTimeZoneSource();\n      if (timeZoneSource !== this) {\n        this._subs.add(\n          timeZoneSource.subscribeToState((n, p) => {\n            if (n.timeZone !== void 0 && n.timeZone !== p.timeZone) {\n              this.setState({\n                value: evaluateTimeRange(\n                  this.state.from,\n                  this.state.to,\n                  timeZoneSource.getTimeZone(),\n                  this.state.fiscalYearStartMonth,\n                  this.state.UNSAFE_nowDelay\n                )\n              });\n            }\n          })\n        );\n      }\n    }\n    if (this.state.weekStart) {\n      setWeekStart(this.state.weekStart);\n    }\n    return () => {\n      if (this.state.weekStart) {\n        setWeekStart(config.bootData.user.weekStart);\n      }\n    };\n  }\n  getTimeZoneSource() {\n    if (!this.parent || !this.parent.parent) {\n      return this;\n    }\n    const source = getClosest(this.parent.parent, (o) => {\n      if (o.state.$timeRange && o.state.$timeRange.state.timeZone) {\n        return o.state.$timeRange;\n      }\n      return void 0;\n    });\n    if (!source) {\n      return this;\n    }\n    return source;\n  }\n  getTimeZone() {\n    if (this.state.timeZone) {\n      return this.state.timeZone;\n    }\n    const timeZoneSource = this.getTimeZoneSource();\n    if (timeZoneSource !== this) {\n      return timeZoneSource.state.timeZone;\n    }\n    return getTimeZone();\n  }\n  getUrlState() {\n    const urlValues = { from: this.state.from, to: this.state.to };\n    if (this.state.timeZone) {\n      urlValues.timezone = this.state.timeZone;\n    }\n    return urlValues;\n  }\n  updateFromUrl(values) {\n    var _a, _b, _c;\n    if (!values.to && !values.from) {\n      return;\n    }\n    const update = {};\n    const from = parseUrlParam(values.from);\n    if (from) {\n      update.from = from;\n    }\n    const to = parseUrlParam(values.to);\n    if (to) {\n      update.to = to;\n    }\n    if (typeof values.timezone === \"string\") {\n      update.timeZone = values.timezone !== \"\" ? values.timezone : void 0;\n    }\n    update.value = evaluateTimeRange(\n      (_a = update.from) != null ? _a : this.state.from,\n      (_b = update.to) != null ? _b : this.state.to,\n      (_c = update.timeZone) != null ? _c : this.getTimeZone(),\n      this.state.fiscalYearStartMonth,\n      this.state.UNSAFE_nowDelay\n    );\n    this.setState(update);\n  }\n}\n\nexport { SceneTimeRange };\n//# sourceMappingURL=SceneTimeRange.js.map\n","import { SceneDataNode } from '../../core/SceneDataNode.js';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { SceneTimeRange } from '../../core/SceneTimeRange.js';\n\nconst EmptyDataNode = new SceneDataNode();\nconst DefaultTimeRange = new SceneTimeRange();\nclass EmptyVariableSetImpl extends SceneObjectBase {\n  constructor() {\n    super({ variables: [] });\n  }\n  getByName(name) {\n    return void 0;\n  }\n  isVariableLoadingOrWaitingToUpdate(variable) {\n    return false;\n  }\n}\nconst EmptyVariableSet = new EmptyVariableSetImpl();\n\nexport { DefaultTimeRange, EmptyDataNode, EmptyVariableSet, EmptyVariableSetImpl };\n//# sourceMappingURL=defaults.js.map\n","import { DefaultTimeRange } from '../../variables/interpolation/defaults.js';\nimport { getClosest } from './utils.js';\n\nfunction getTimeRange(sceneObject) {\n  var _a;\n  return (_a = getClosest(sceneObject, (s) => s.state.$timeRange)) != null ? _a : DefaultTimeRange;\n}\n\nexport { getTimeRange };\n//# sourceMappingURL=getTimeRange.js.map\n","import { BusEventWithPayload } from '@grafana/data';\n\nclass SceneVariableValueChangedEvent extends BusEventWithPayload {\n}\nSceneVariableValueChangedEvent.type = \"scene-variable-changed-value\";\nfunction isCustomVariableValue(value) {\n  return typeof value === \"object\" && \"formatter\" in value;\n}\n\nexport { SceneVariableValueChangedEvent, isCustomVariableValue };\n//# sourceMappingURL=types.js.map\n","import { property } from 'lodash';\n\nlet fieldAccessorCache = {};\nfunction getFieldAccessor(fieldPath) {\n  const accessor = fieldAccessorCache[fieldPath];\n  if (accessor) {\n    return accessor;\n  }\n  return fieldAccessorCache[fieldPath] = property(fieldPath);\n}\n\nexport { getFieldAccessor };\n//# sourceMappingURL=fieldAccessorCache.js.map\n","import { getFieldAccessor } from './fieldAccessorCache.js';\n\nclass ScopedVarsVariable {\n  constructor(name, value) {\n    this.state = { name, value, type: \"scopedvar\" };\n  }\n  getValue(fieldPath) {\n    let { value } = this.state;\n    let realValue = value.value;\n    if (fieldPath) {\n      realValue = getFieldAccessor(fieldPath)(value.value);\n    } else {\n      realValue = value.value;\n    }\n    if (realValue === \"string\" || realValue === \"number\" || realValue === \"boolean\") {\n      return realValue;\n    }\n    return String(realValue);\n  }\n  getValueText() {\n    const { value } = this.state;\n    if (value.text != null) {\n      return String(value.text);\n    }\n    return String(value);\n  }\n}\nlet scopedVarsVariable;\nfunction getSceneVariableForScopedVar(name, value) {\n  if (!scopedVarsVariable) {\n    scopedVarsVariable = new ScopedVarsVariable(name, value);\n  } else {\n    scopedVarsVariable.state.name = name;\n    scopedVarsVariable.state.value = value;\n  }\n  return scopedVarsVariable;\n}\n\nexport { ScopedVarsVariable, getSceneVariableForScopedVar };\n//# sourceMappingURL=ScopedVarsVariable.js.map\n","import { map, isArray, replace } from 'lodash';\nimport { Registry, escapeRegex, textUtil, dateTime } from '@grafana/data';\nimport { VariableFormatID } from '@grafana/schema';\n\nconst formatRegistry = new Registry(() => {\n  const formats = [\n    {\n      id: VariableFormatID.Lucene,\n      name: \"Lucene\",\n      description: \"Values are lucene escaped and multi-valued variables generate an OR expression\",\n      formatter: (value) => {\n        if (typeof value === \"string\") {\n          return luceneEscape(value);\n        }\n        if (Array.isArray(value)) {\n          if (value.length === 0) {\n            return \"__empty__\";\n          }\n          const quotedValues = map(value, (val) => {\n            return '\"' + luceneEscape(val) + '\"';\n          });\n          return \"(\" + quotedValues.join(\" OR \") + \")\";\n        } else {\n          return luceneEscape(`${value}`);\n        }\n      }\n    },\n    {\n      id: VariableFormatID.Raw,\n      name: \"raw\",\n      description: \"Keep value as is\",\n      formatter: (value) => String(value)\n    },\n    {\n      id: VariableFormatID.Regex,\n      name: \"Regex\",\n      description: \"Values are regex escaped and multi-valued variables generate a (<value>|<value>) expression\",\n      formatter: (value) => {\n        if (typeof value === \"string\") {\n          return escapeRegex(value);\n        }\n        if (Array.isArray(value)) {\n          const escapedValues = value.map((item) => {\n            if (typeof item === \"string\") {\n              return escapeRegex(item);\n            } else {\n              return escapeRegex(String(item));\n            }\n          });\n          if (escapedValues.length === 1) {\n            return escapedValues[0];\n          }\n          return \"(\" + escapedValues.join(\"|\") + \")\";\n        }\n        return escapeRegex(`${value}`);\n      }\n    },\n    {\n      id: VariableFormatID.Pipe,\n      name: \"Pipe\",\n      description: \"Values are separated by | character\",\n      formatter: (value) => {\n        if (typeof value === \"string\") {\n          return value;\n        }\n        if (Array.isArray(value)) {\n          return value.join(\"|\");\n        }\n        return `${value}`;\n      }\n    },\n    {\n      id: VariableFormatID.Distributed,\n      name: \"Distributed\",\n      description: \"Multiple values are formatted like variable=value\",\n      formatter: (value, args, variable) => {\n        if (typeof value === \"string\") {\n          return value;\n        }\n        if (Array.isArray(value)) {\n          value = map(value, (val, index) => {\n            if (index !== 0) {\n              return variable.state.name + \"=\" + val;\n            } else {\n              return val;\n            }\n          });\n          return value.join(\",\");\n        }\n        return `${value}`;\n      }\n    },\n    {\n      id: VariableFormatID.CSV,\n      name: \"Csv\",\n      description: \"Comma-separated values\",\n      formatter: (value) => {\n        if (typeof value === \"string\") {\n          return value;\n        }\n        if (isArray(value)) {\n          return value.join(\",\");\n        }\n        return String(value);\n      }\n    },\n    {\n      id: VariableFormatID.HTML,\n      name: \"HTML\",\n      description: \"HTML escaping of values\",\n      formatter: (value) => {\n        if (typeof value === \"string\") {\n          return textUtil.escapeHtml(value);\n        }\n        if (isArray(value)) {\n          return textUtil.escapeHtml(value.join(\", \"));\n        }\n        return textUtil.escapeHtml(String(value));\n      }\n    },\n    {\n      id: VariableFormatID.JSON,\n      name: \"JSON\",\n      description: \"JSON stringify value\",\n      formatter: (value) => {\n        if (typeof value === \"string\") {\n          return value;\n        }\n        return JSON.stringify(value);\n      }\n    },\n    {\n      id: VariableFormatID.PercentEncode,\n      name: \"Percent encode\",\n      description: \"Useful for URL escaping values\",\n      formatter: (value) => {\n        if (isArray(value)) {\n          return encodeURIComponentStrict(\"{\" + value.join(\",\") + \"}\");\n        }\n        return encodeURIComponentStrict(value);\n      }\n    },\n    {\n      id: VariableFormatID.SingleQuote,\n      name: \"Single quote\",\n      description: \"Single quoted values\",\n      formatter: (value) => {\n        const regExp = new RegExp(`'`, \"g\");\n        if (isArray(value)) {\n          return map(value, (v) => `'${replace(v, regExp, `\\\\'`)}'`).join(\",\");\n        }\n        let strVal = typeof value === \"string\" ? value : String(value);\n        return `'${replace(strVal, regExp, `\\\\'`)}'`;\n      }\n    },\n    {\n      id: VariableFormatID.DoubleQuote,\n      name: \"Double quote\",\n      description: \"Double quoted values\",\n      formatter: (value) => {\n        const regExp = new RegExp('\"', \"g\");\n        if (isArray(value)) {\n          return map(value, (v) => `\"${replace(v, regExp, '\\\\\"')}\"`).join(\",\");\n        }\n        let strVal = typeof value === \"string\" ? value : String(value);\n        return `\"${replace(strVal, regExp, '\\\\\"')}\"`;\n      }\n    },\n    {\n      id: VariableFormatID.SQLString,\n      name: \"SQL string\",\n      description: \"SQL string quoting and commas for use in IN statements and other scenarios\",\n      formatter: sqlStringFormatter\n    },\n    {\n      id: VariableFormatID.Date,\n      name: \"Date\",\n      description: \"Format date in different ways\",\n      formatter: (value, args) => {\n        var _a;\n        let nrValue = NaN;\n        if (typeof value === \"number\") {\n          nrValue = value;\n        } else if (typeof value === \"string\") {\n          nrValue = parseInt(value, 10);\n        }\n        if (isNaN(nrValue)) {\n          return \"NaN\";\n        }\n        const arg = (_a = args[0]) != null ? _a : \"iso\";\n        switch (arg) {\n          case \"ms\":\n            return String(value);\n          case \"seconds\":\n            return `${Math.round(nrValue / 1e3)}`;\n          case \"iso\":\n            return dateTime(nrValue).toISOString();\n          default:\n            if ((args || []).length > 1) {\n              return dateTime(nrValue).format(args.join(\":\"));\n            }\n            return dateTime(nrValue).format(arg);\n        }\n      }\n    },\n    {\n      id: VariableFormatID.Glob,\n      name: \"Glob\",\n      description: \"Format multi-valued variables using glob syntax, example {value1,value2}\",\n      formatter: (value) => {\n        if (isArray(value) && value.length > 1) {\n          return \"{\" + value.join(\",\") + \"}\";\n        }\n        return String(value);\n      }\n    },\n    {\n      id: VariableFormatID.Text,\n      name: \"Text\",\n      description: \"Format variables in their text representation. Example in multi-variable scenario A + B + C.\",\n      formatter: (value, _args, variable) => {\n        if (variable.getValueText) {\n          return variable.getValueText();\n        }\n        return String(value);\n      }\n    },\n    {\n      id: VariableFormatID.QueryParam,\n      name: \"Query parameter\",\n      description: \"Format variables as URL parameters. Example in multi-variable scenario A + B + C => var-foo=A&var-foo=B&var-foo=C.\",\n      formatter: (value, _args, variable) => {\n        if (Array.isArray(value)) {\n          return value.map((v) => formatQueryParameter(variable.state.name, v)).join(\"&\");\n        }\n        return formatQueryParameter(variable.state.name, value);\n      }\n    },\n    {\n      id: VariableFormatID.UriEncode,\n      name: \"Percent encode as URI\",\n      description: \"Useful for URL escaping values, taking into URI syntax characters\",\n      formatter: (value) => {\n        if (isArray(value)) {\n          return encodeURIStrict(\"{\" + value.join(\",\") + \"}\");\n        }\n        return encodeURIStrict(value);\n      }\n    }\n  ];\n  return formats;\n});\nfunction luceneEscape(value) {\n  if (isNaN(+value) === false) {\n    return value;\n  }\n  return value.replace(/([\\!\\*\\+\\-\\=<>\\s\\&\\|\\(\\)\\[\\]\\{\\}\\^\\~\\?\\:\\\\/\"])/g, \"\\\\$1\");\n}\nfunction encodeURIComponentStrict(str) {\n  if (typeof str === \"object\") {\n    str = String(str);\n  }\n  return replaceSpecialCharactersToASCII(encodeURIComponent(str));\n}\nconst encodeURIStrict = (str) => replaceSpecialCharactersToASCII(encodeURI(String(str)));\nconst replaceSpecialCharactersToASCII = (value) => value.replace(/[!'()*]/g, (c) => {\n  return \"%\" + c.charCodeAt(0).toString(16).toUpperCase();\n});\nfunction formatQueryParameter(name, value) {\n  return `var-${name}=${encodeURIComponentStrict(value)}`;\n}\nconst SQL_ESCAPE_MAP = {\n  \"'\": \"''\",\n  '\"': '\\\\\"'\n};\nfunction sqlStringFormatter(value) {\n  const regExp = new RegExp(`'|\"`, \"g\");\n  if (isArray(value)) {\n    return map(value, (v) => `'${replace(v, regExp, (match) => {\n      var _a;\n      return (_a = SQL_ESCAPE_MAP[match]) != null ? _a : \"\";\n    })}'`).join(\",\");\n  }\n  let strVal = typeof value === \"string\" ? value : String(value);\n  return `'${replace(strVal, regExp, (match) => {\n    var _a;\n    return (_a = SQL_ESCAPE_MAP[match]) != null ? _a : \"\";\n  })}'`;\n}\n\nexport { formatRegistry };\n//# sourceMappingURL=formatRegistry.js.map\n","const ALL_VARIABLE_TEXT = \"All\";\nconst ALL_VARIABLE_VALUE = \"$__all\";\nconst AUTO_VARIABLE_TEXT = \"Auto\";\nconst AUTO_VARIABLE_VALUE = \"$__auto\";\nconst VARIABLE_REGEX = /\\$(\\w+)|\\[\\[(\\w+?)(?::(\\w+))?\\]\\]|\\${(\\w+)(?:\\.([^:^\\}]+))?(?::([^\\}]+))?}/g;\nconst SEARCH_FILTER_VARIABLE = \"__searchFilter\";\n\nexport { ALL_VARIABLE_TEXT, ALL_VARIABLE_VALUE, AUTO_VARIABLE_TEXT, AUTO_VARIABLE_VALUE, SEARCH_FILTER_VARIABLE, VARIABLE_REGEX };\n//# sourceMappingURL=constants.js.map\n","function lookupVariable(name, sceneObject) {\n  const variables = sceneObject.state.$variables;\n  if (!variables) {\n    if (sceneObject.parent) {\n      return lookupVariable(name, sceneObject.parent);\n    } else {\n      return null;\n    }\n  }\n  const found = variables.getByName(name);\n  if (found) {\n    return found;\n  } else if (sceneObject.parent) {\n    return lookupVariable(name, sceneObject.parent);\n  }\n  return null;\n}\n\nexport { lookupVariable };\n//# sourceMappingURL=lookupVariable.js.map\n","import { VariableFormatID } from '@grafana/schema';\nimport { isCustomVariableValue } from '../types.js';\nimport { getSceneVariableForScopedVar } from './ScopedVarsVariable.js';\nimport { formatRegistry } from './formatRegistry.js';\nimport { VARIABLE_REGEX } from '../constants.js';\nimport { lookupVariable } from '../lookupVariable.js';\nimport { macrosIndex } from '../macros/index.js';\n\nfunction sceneInterpolator(sceneObject, target, scopedVars, format, interpolations) {\n  if (!target) {\n    return target != null ? target : \"\";\n  }\n  VARIABLE_REGEX.lastIndex = 0;\n  return target.replace(VARIABLE_REGEX, (match, var1, var2, fmt2, var3, fieldPath, fmt3) => {\n    const variableName = var1 || var2 || var3;\n    const fmt = fmt2 || fmt3 || format;\n    const variable = lookupFormatVariable(variableName, match, scopedVars, sceneObject);\n    if (!variable) {\n      if (interpolations) {\n        interpolations.push({ match, variableName, fieldPath, format: fmt, value: match, found: false });\n      }\n      return match;\n    }\n    const value = formatValue(sceneObject, variable, variable.getValue(fieldPath), fmt);\n    if (interpolations) {\n      interpolations.push({ match, variableName, fieldPath, format: fmt, value, found: value !== match });\n    }\n    return value;\n  });\n}\nfunction lookupFormatVariable(name, match, scopedVars, sceneObject) {\n  if (scopedVars && scopedVars.hasOwnProperty(name)) {\n    const scopedVar = scopedVars[name];\n    if (scopedVar) {\n      return getSceneVariableForScopedVar(name, scopedVar);\n    }\n  }\n  const variable = lookupVariable(name, sceneObject);\n  if (variable) {\n    return variable;\n  }\n  const Macro = macrosIndex.get(name);\n  if (Macro) {\n    return new Macro(name, sceneObject, match, scopedVars);\n  }\n  return null;\n}\nfunction formatValue(context, variable, value, formatNameOrFn) {\n  if (value === null || value === void 0) {\n    return \"\";\n  }\n  if (isCustomVariableValue(value)) {\n    return sceneInterpolator(context, value.formatter(formatNameOrFn));\n  }\n  if (!Array.isArray(value) && typeof value === \"object\") {\n    value = `${value}`;\n  }\n  if (typeof formatNameOrFn === \"function\") {\n    return formatNameOrFn(value, {\n      name: variable.state.name,\n      type: variable.state.type,\n      multi: variable.state.isMulti,\n      includeAll: variable.state.includeAll\n    });\n  }\n  let args = [];\n  if (!formatNameOrFn) {\n    formatNameOrFn = VariableFormatID.Glob;\n  } else {\n    args = formatNameOrFn.split(\":\");\n    if (args.length > 1) {\n      formatNameOrFn = args[0];\n      args = args.slice(1);\n    } else {\n      args = [];\n    }\n  }\n  let formatter = formatRegistry.getIfExists(formatNameOrFn);\n  if (!formatter) {\n    console.error(`Variable format ${formatNameOrFn} not found. Using glob format as fallback.`);\n    formatter = formatRegistry.get(VariableFormatID.Glob);\n  }\n  return formatter.formatter(value, args, variable);\n}\n\nexport { sceneInterpolator };\n//# sourceMappingURL=sceneInterpolator.js.map\n","function isSceneObject(obj) {\n  return obj.useState !== void 0;\n}\nfunction isDataRequestEnricher(obj) {\n  return \"enrichDataRequest\" in obj;\n}\nfunction isFiltersRequestEnricher(obj) {\n  return \"enrichFiltersRequest\" in obj;\n}\nfunction isDataLayer(obj) {\n  return \"isDataLayer\" in obj;\n}\n\nexport { isDataLayer, isDataRequestEnricher, isFiltersRequestEnricher, isSceneObject };\n//# sourceMappingURL=types.js.map\n","import { SceneObjectBase } from '../core/SceneObjectBase.js';\n\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar _running;\nfunction isQueryController(s) {\n  return \"isQueryController\" in s;\n}\nclass SceneQueryController extends SceneObjectBase {\n  constructor() {\n    super({ isRunning: false });\n    this.isQueryController = true;\n    __privateAdd(this, _running, /* @__PURE__ */ new Set());\n    this.addActivationHandler(() => {\n      return () => __privateGet(this, _running).clear();\n    });\n  }\n  queryStarted(entry) {\n    __privateGet(this, _running).add(entry);\n    this.changeRunningQueryCount(1);\n    if (!this.state.isRunning) {\n      this.setState({ isRunning: true });\n    }\n  }\n  queryCompleted(entry) {\n    if (!__privateGet(this, _running).has(entry)) {\n      return;\n    }\n    __privateGet(this, _running).delete(entry);\n    this.changeRunningQueryCount(-1);\n    if (__privateGet(this, _running).size === 0) {\n      this.setState({ isRunning: false });\n    }\n  }\n  changeRunningQueryCount(dir) {\n    var _a;\n    window.__grafanaRunningQueryCount = ((_a = window.__grafanaRunningQueryCount) != null ? _a : 0) + dir;\n  }\n  cancelAll() {\n    var _a;\n    for (const entry of __privateGet(this, _running).values()) {\n      (_a = entry.cancel) == null ? void 0 : _a.call(entry);\n    }\n  }\n}\n_running = new WeakMap();\n\nexport { SceneQueryController, isQueryController };\n//# sourceMappingURL=SceneQueryController.js.map\n","import { EmptyVariableSet, EmptyDataNode } from '../../variables/interpolation/defaults.js';\nimport { sceneInterpolator } from '../../variables/interpolation/sceneInterpolator.js';\nimport { isDataLayer } from '../types.js';\nimport { lookupVariable } from '../../variables/lookupVariable.js';\nimport { getClosest } from './utils.js';\nimport { isQueryController } from '../../behaviors/SceneQueryController.js';\n\nfunction getVariables(sceneObject) {\n  var _a;\n  return (_a = getClosest(sceneObject, (s) => s.state.$variables)) != null ? _a : EmptyVariableSet;\n}\nfunction getData(sceneObject) {\n  var _a;\n  return (_a = getClosest(sceneObject, (s) => s.state.$data)) != null ? _a : EmptyDataNode;\n}\nfunction isSceneLayout(s) {\n  return \"isDraggable\" in s;\n}\nfunction getLayout(scene) {\n  const parent = getClosest(scene, (s) => isSceneLayout(s) ? s : void 0);\n  if (parent) {\n    return parent;\n  }\n  return null;\n}\nfunction interpolate(sceneObject, value, scopedVars, format, interpolations) {\n  if (value === \"\" || value == null) {\n    return \"\";\n  }\n  return sceneInterpolator(sceneObject, value, scopedVars, format, interpolations);\n}\nfunction hasVariableDependencyInLoadingState(sceneObject) {\n  if (!sceneObject.variableDependency) {\n    return false;\n  }\n  for (const name of sceneObject.variableDependency.getNames()) {\n    const variable = lookupVariable(name, sceneObject);\n    if (!variable) {\n      continue;\n    }\n    const set = variable.parent;\n    if (set.isVariableLoadingOrWaitingToUpdate(variable)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction findObjectInternal(scene, check, alreadySearchedChild, shouldSearchUp) {\n  if (check(scene)) {\n    return scene;\n  }\n  let found = null;\n  scene.forEachChild((child) => {\n    if (child === alreadySearchedChild) {\n      return;\n    }\n    let maybe = findObjectInternal(child, check);\n    if (maybe) {\n      found = maybe;\n    }\n  });\n  if (found) {\n    return found;\n  }\n  if (shouldSearchUp && scene.parent) {\n    return findObjectInternal(scene.parent, check, scene, true);\n  }\n  return null;\n}\nfunction findByKey(sceneObject, key) {\n  const found = findObject(sceneObject, (sceneToCheck) => {\n    return sceneToCheck.state.key === key;\n  });\n  if (!found) {\n    throw new Error(\"Unable to find scene with key \" + key);\n  }\n  return found;\n}\nfunction findByKeyAndType(sceneObject, key, targetType) {\n  const found = findObject(sceneObject, (sceneToCheck) => {\n    return sceneToCheck.state.key === key;\n  });\n  if (!found) {\n    throw new Error(\"Unable to find scene with key \" + key);\n  }\n  if (!(found instanceof targetType)) {\n    throw new Error(`Found scene object with key ${key} does not match type ${targetType.name}`);\n  }\n  return found;\n}\nfunction findObject(scene, check) {\n  return findObjectInternal(scene, check, void 0, true);\n}\nfunction findAllObjects(scene, check) {\n  const found = [];\n  scene.forEachChild((child) => {\n    if (check(child)) {\n      found.push(child);\n    }\n    found.push(...findAllObjects(child, check));\n  });\n  return found;\n}\nfunction getDataLayers(sceneObject, localOnly = false) {\n  let currentLevel = sceneObject;\n  let collected = [];\n  while (currentLevel) {\n    const dataProvider = currentLevel.state.$data;\n    if (!dataProvider) {\n      currentLevel = currentLevel.parent;\n      continue;\n    }\n    if (isDataLayer(dataProvider)) {\n      collected = collected.concat(dataProvider);\n    } else {\n      if (dataProvider.state.$data && isDataLayer(dataProvider.state.$data)) {\n        collected = collected.concat(dataProvider.state.$data);\n      }\n    }\n    if (localOnly && collected.length > 0) {\n      break;\n    }\n    currentLevel = currentLevel.parent;\n  }\n  return collected;\n}\nfunction getAncestor(sceneObject, ancestorType) {\n  let parent = sceneObject;\n  while (parent) {\n    if (parent instanceof ancestorType) {\n      return parent;\n    }\n    parent = parent.parent;\n  }\n  if (!parent) {\n    throw new Error(\"Unable to find parent of type \" + ancestorType.name);\n  }\n  return parent;\n}\nfunction getQueryController(sceneObject) {\n  let parent = sceneObject;\n  while (parent) {\n    if (parent.state.$behaviors) {\n      for (const behavior of parent.state.$behaviors) {\n        if (isQueryController(behavior)) {\n          return behavior;\n        }\n      }\n    }\n    parent = parent.parent;\n  }\n  return void 0;\n}\n\nexport { findAllObjects, findByKey, findByKeyAndType, findObject, getAncestor, getData, getDataLayers, getLayout, getQueryController, getVariables, hasVariableDependencyInLoadingState, interpolate };\n//# sourceMappingURL=sceneGraph.js.map\n","class SkipFormattingValue {\n  constructor(_value) {\n    this._value = _value;\n  }\n  formatter() {\n    return this._value;\n  }\n}\n\nexport { SkipFormattingValue };\n//# sourceMappingURL=types.js.map\n","import { urlUtil, dateTimeFormat } from '@grafana/data';\nimport { getTimeRange } from '../../core/sceneGraph/getTimeRange.js';\nimport { getData } from '../../core/sceneGraph/sceneGraph.js';\nimport { SkipFormattingValue } from './types.js';\n\nclass UrlTimeRangeMacro {\n  constructor(name, sceneObject) {\n    this.state = { name, type: \"url_variable\" };\n    this._sceneObject = sceneObject;\n  }\n  getValue() {\n    var _a;\n    const timeRange = getTimeRange(this._sceneObject);\n    const urlState = (_a = timeRange.urlSync) == null ? void 0 : _a.getUrlState();\n    return new SkipFormattingValue(urlUtil.toUrlParams(urlState));\n  }\n  getValueText() {\n    return \"\";\n  }\n}\nclass TimeFromAndToMacro {\n  constructor(name, sceneObject) {\n    this.state = { name, type: \"time_macro\" };\n    this._sceneObject = sceneObject;\n  }\n  getValue() {\n    const timeRange = getTimeRange(this._sceneObject);\n    if (this.state.name === \"__from\") {\n      return timeRange.state.value.from.valueOf();\n    } else {\n      return timeRange.state.value.to.valueOf();\n    }\n  }\n  getValueText() {\n    const timeRange = getTimeRange(this._sceneObject);\n    if (this.state.name === \"__from\") {\n      return dateTimeFormat(timeRange.state.value.from, { timeZone: timeRange.getTimeZone() });\n    } else {\n      return dateTimeFormat(timeRange.state.value.to, { timeZone: timeRange.getTimeZone() });\n    }\n  }\n}\nclass TimezoneMacro {\n  constructor(name, sceneObject) {\n    this.state = { name, type: \"time_macro\" };\n    this._sceneObject = sceneObject;\n  }\n  getValue() {\n    const timeRange = getTimeRange(this._sceneObject);\n    const timeZone = timeRange.getTimeZone();\n    if (timeZone === \"browser\") {\n      return Intl.DateTimeFormat().resolvedOptions().timeZone;\n    }\n    return timeZone;\n  }\n  getValueText() {\n    return this.getValue();\n  }\n}\nclass IntervalMacro {\n  constructor(name, sceneObject, match) {\n    this.state = { name, type: \"time_macro\", match };\n    this._sceneObject = sceneObject;\n  }\n  getValue() {\n    var _a;\n    const data = getData(this._sceneObject);\n    if (data) {\n      const request = (_a = data.state.data) == null ? void 0 : _a.request;\n      if (!request) {\n        return this.state.match;\n      }\n      if (this.state.name === \"__interval_ms\") {\n        return request.intervalMs;\n      }\n      return request.interval;\n    }\n    return this.state.match;\n  }\n}\n\nexport { IntervalMacro, TimeFromAndToMacro, TimezoneMacro, UrlTimeRangeMacro };\n//# sourceMappingURL=timeMacros.js.map\n","import { isCustomVariableValue } from '../types.js';\nimport { formatRegistry } from '../interpolation/formatRegistry.js';\nimport { SkipFormattingValue } from './types.js';\nimport { VariableFormatID } from '@grafana/schema';\n\nclass AllVariablesMacro {\n  constructor(name, sceneObject) {\n    this.state = { name, type: \"url_variable\" };\n    this._sceneObject = sceneObject;\n  }\n  getValue() {\n    const allVars = collectAllVariables(this._sceneObject);\n    const format = formatRegistry.get(VariableFormatID.QueryParam);\n    const params = [];\n    for (const name of Object.keys(allVars)) {\n      const variable = allVars[name];\n      const value = variable.getValue();\n      if (!value) {\n        continue;\n      }\n      if (isCustomVariableValue(value)) {\n        params.push(value.formatter(VariableFormatID.QueryParam));\n      } else {\n        params.push(format.formatter(value, [], variable));\n      }\n    }\n    return new SkipFormattingValue(params.join(\"&\"));\n  }\n  getValueText() {\n    return \"\";\n  }\n}\nfunction collectAllVariables(sceneObject, record = {}) {\n  if (sceneObject.state.$variables) {\n    for (const variable of sceneObject.state.$variables.state.variables) {\n      if (variable.state.skipUrlSync) {\n        continue;\n      }\n      if (!record[variable.state.name]) {\n        record[variable.state.name] = variable;\n      }\n    }\n  }\n  if (sceneObject.parent) {\n    collectAllVariables(sceneObject.parent, record);\n  }\n  return record;\n}\n\nexport { AllVariablesMacro };\n//# sourceMappingURL=AllVariablesMacro.js.map\n","import { getFieldDisplayName, formatLabels } from '@grafana/data';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction getTemplateProxyForField(field, frame, frames) {\n  return new Proxy(\n    {},\n    {\n      get: (obj, key) => {\n        if (key === \"name\") {\n          return field.name;\n        }\n        if (key === \"displayName\") {\n          return getFieldDisplayName(field, frame, frames);\n        }\n        if (key === \"labels\" || key === \"formattedLabels\") {\n          if (!field.labels) {\n            return \"\";\n          }\n          return __spreadProps(__spreadValues({}, field.labels), {\n            __values: Object.values(field.labels).sort().join(\", \"),\n            toString: () => {\n              return formatLabels(field.labels, \"\", true);\n            }\n          });\n        }\n        return void 0;\n      }\n    }\n  );\n}\n\nexport { getTemplateProxyForField };\n//# sourceMappingURL=templateProxies.js.map\n","import { getDisplayProcessor, formattedValueToString, FieldType, getFieldDisplayValuesProxy, getFrameDisplayName } from '@grafana/data';\nimport { getFieldAccessor } from '../interpolation/fieldAccessorCache.js';\nimport { getTemplateProxyForField } from './templateProxies.js';\n\nclass ValueMacro {\n  constructor(name, sceneObject, _match, _scopedVars) {\n    this._match = _match;\n    this._scopedVars = _scopedVars;\n    this.state = { name, type: \"__value\" };\n  }\n  getValue(fieldPath) {\n    var _a, _b;\n    const dataContext = (_a = this._scopedVars) == null ? void 0 : _a.__dataContext;\n    if (!dataContext) {\n      return this._match;\n    }\n    const { frame, rowIndex, field, calculatedValue } = dataContext.value;\n    if (calculatedValue) {\n      switch (fieldPath) {\n        case \"numeric\":\n          return calculatedValue.numeric;\n        case \"raw\":\n          return calculatedValue.numeric;\n        case \"time\":\n          return \"\";\n        case \"text\":\n        default:\n          return formattedValueToString(calculatedValue);\n      }\n    }\n    if (rowIndex == null) {\n      return this._match;\n    }\n    if (fieldPath === \"time\") {\n      const timeField = frame.fields.find((f) => f.type === FieldType.time);\n      return timeField ? timeField.values.get(rowIndex) : void 0;\n    }\n    if (!field) {\n      return this._match;\n    }\n    const value = field.values.get(rowIndex);\n    if (fieldPath === \"raw\") {\n      return value;\n    }\n    const displayProcessor = (_b = field.display) != null ? _b : fallbackDisplayProcessor;\n    const result = displayProcessor(value);\n    switch (fieldPath) {\n      case \"numeric\":\n        return result.numeric;\n      case \"text\":\n      default:\n        return formattedValueToString(result);\n    }\n  }\n  getValueText() {\n    return \"\";\n  }\n}\nconst fallbackDisplayProcessor = getDisplayProcessor();\nclass DataMacro {\n  constructor(name, sceneObject, _match, _scopedVars) {\n    this._match = _match;\n    this._scopedVars = _scopedVars;\n    this.state = { name, type: \"__data\" };\n  }\n  getValue(fieldPath) {\n    var _a, _b;\n    const dataContext = (_a = this._scopedVars) == null ? void 0 : _a.__dataContext;\n    if (!dataContext || !fieldPath) {\n      return this._match;\n    }\n    const { frame, rowIndex } = dataContext.value;\n    if (rowIndex === void 0 || fieldPath === void 0) {\n      return this._match;\n    }\n    const obj = {\n      name: frame.name,\n      refId: frame.refId,\n      fields: getFieldDisplayValuesProxy({ frame, rowIndex })\n    };\n    return (_b = getFieldAccessor(fieldPath)(obj)) != null ? _b : \"\";\n  }\n  getValueText() {\n    return \"\";\n  }\n}\nclass SeriesMacro {\n  constructor(name, sceneObject, _match, _scopedVars) {\n    this._match = _match;\n    this._scopedVars = _scopedVars;\n    this.state = { name, type: \"__series\" };\n  }\n  getValue(fieldPath) {\n    var _a;\n    const dataContext = (_a = this._scopedVars) == null ? void 0 : _a.__dataContext;\n    if (!dataContext || !fieldPath) {\n      return this._match;\n    }\n    if (fieldPath !== \"name\") {\n      return this._match;\n    }\n    const { frame, frameIndex } = dataContext.value;\n    return getFrameDisplayName(frame, frameIndex);\n  }\n  getValueText() {\n    return \"\";\n  }\n}\nclass FieldMacro {\n  constructor(name, sceneObject, _match, _scopedVars) {\n    this._match = _match;\n    this._scopedVars = _scopedVars;\n    this.state = { name, type: \"__field\" };\n  }\n  getValue(fieldPath) {\n    var _a, _b;\n    const dataContext = (_a = this._scopedVars) == null ? void 0 : _a.__dataContext;\n    if (!dataContext || !fieldPath) {\n      return this._match;\n    }\n    if (fieldPath === void 0 || fieldPath === \"\") {\n      return this._match;\n    }\n    const { frame, field, data } = dataContext.value;\n    const obj = getTemplateProxyForField(field, frame, data);\n    return (_b = getFieldAccessor(fieldPath)(obj)) != null ? _b : \"\";\n  }\n  getValueText() {\n    return \"\";\n  }\n}\n\nexport { DataMacro, FieldMacro, SeriesMacro, ValueMacro };\n//# sourceMappingURL=dataMacros.js.map\n","import { locationService, config } from '@grafana/runtime';\n\nclass UrlMacro {\n  constructor(name, _) {\n    this.state = { name, type: \"url_macro\" };\n  }\n  getValue(fieldPath) {\n    var _a;\n    const location = locationService.getLocation();\n    const subUrl = (_a = config.appSubUrl) != null ? _a : \"\";\n    switch (fieldPath != null ? fieldPath : \"\") {\n      case \"params\":\n        return new UrlStateFormatter(location.search);\n      case \"path\":\n        return subUrl + location.pathname;\n      case \"\":\n      default:\n        return subUrl + location.pathname + location.search;\n    }\n  }\n  getValueText() {\n    return \"\";\n  }\n}\nclass UrlStateFormatter {\n  constructor(_urlQueryParams) {\n    this._urlQueryParams = _urlQueryParams;\n  }\n  formatter(options) {\n    if (!options) {\n      return this._urlQueryParams;\n    }\n    const params = options.split(\":\");\n    if (params[0] === \"exclude\" && params.length > 1) {\n      const allParams = new URLSearchParams(this._urlQueryParams);\n      for (const param of params[1].split(\",\")) {\n        allParams.delete(param);\n      }\n      return `?${allParams}`;\n    }\n    if (params[0] === \"include\" && params.length > 1) {\n      const allParams = new URLSearchParams(this._urlQueryParams);\n      const includeOnly = params[1].split(\",\");\n      for (const param of allParams.keys()) {\n        if (!includeOnly.includes(param)) {\n          allParams.delete(param);\n        }\n      }\n      return `?${allParams}`;\n    }\n    return this._urlQueryParams;\n  }\n}\n\nexport { UrlMacro };\n//# sourceMappingURL=urlMacros.js.map\n","import { DataLinkBuiltInVars } from '@grafana/data';\nimport { UrlTimeRangeMacro, TimeFromAndToMacro, TimezoneMacro, IntervalMacro } from './timeMacros.js';\nimport { AllVariablesMacro } from './AllVariablesMacro.js';\nimport { ValueMacro, DataMacro, SeriesMacro, FieldMacro } from './dataMacros.js';\nimport { UrlMacro } from './urlMacros.js';\nimport { UserMacro, OrgMacro } from './contextMacros.js';\n\nconst macrosIndex = /* @__PURE__ */ new Map([\n  [DataLinkBuiltInVars.includeVars, AllVariablesMacro],\n  [DataLinkBuiltInVars.keepTime, UrlTimeRangeMacro],\n  [\"__value\", ValueMacro],\n  [\"__data\", DataMacro],\n  [\"__series\", SeriesMacro],\n  [\"__field\", FieldMacro],\n  [\"__url\", UrlMacro],\n  [\"__from\", TimeFromAndToMacro],\n  [\"__to\", TimeFromAndToMacro],\n  [\"__timezone\", TimezoneMacro],\n  [\"__user\", UserMacro],\n  [\"__org\", OrgMacro],\n  [\"__interval\", IntervalMacro],\n  [\"__interval_ms\", IntervalMacro]\n]);\nfunction registerVariableMacro(name, macro) {\n  if (macrosIndex.get(name)) {\n    throw new Error(`Macro already registered ${name}`);\n  }\n  macrosIndex.set(name, macro);\n  return () => {\n    macrosIndex.delete(name);\n  };\n}\n\nexport { macrosIndex, registerVariableMacro };\n//# sourceMappingURL=index.js.map\n","import { config } from '@grafana/runtime';\n\nclass UserMacro {\n  constructor(name, _) {\n    this.state = { name, type: \"user_macro\" };\n  }\n  getValue(fieldPath) {\n    const user = config.bootData.user;\n    switch (fieldPath) {\n      case \"login\":\n        return user.login;\n      case \"email\":\n        return user.email;\n      case \"id\":\n      default:\n        return String(user.id);\n    }\n  }\n  getValueText() {\n    return \"\";\n  }\n}\nclass OrgMacro {\n  constructor(name, _) {\n    this.state = { name, type: \"org_macro\" };\n  }\n  getValue(fieldPath) {\n    const user = config.bootData.user;\n    switch (fieldPath) {\n      case \"name\":\n        return user.orgName;\n      case \"id\":\n      default:\n        return String(user.orgId);\n    }\n  }\n  getValueText() {\n    return \"\";\n  }\n}\n\nexport { OrgMacro, UserMacro };\n//# sourceMappingURL=contextMacros.js.map\n","import { lookupVariable } from '../../variables/lookupVariable.js';\nimport { getTimeRange } from './getTimeRange.js';\nimport { getVariables, getData, getLayout, getDataLayers, interpolate, hasVariableDependencyInLoadingState, findByKey, findByKeyAndType, findObject, findAllObjects, getAncestor, getQueryController } from './sceneGraph.js';\n\nconst sceneGraph = {\n  getVariables,\n  getData,\n  getTimeRange,\n  getLayout,\n  getDataLayers,\n  interpolate,\n  lookupVariable,\n  hasVariableDependencyInLoadingState,\n  findByKey,\n  findByKeyAndType,\n  findObject,\n  findAllObjects,\n  getAncestor,\n  getQueryController\n};\n\nexport { sceneGraph };\n//# sourceMappingURL=index.js.map\n","import { getDataSourceSrv } from '@grafana/runtime';\nimport { runtimeDataSources } from '../querying/RuntimeDataSource.js';\n\nasync function getDataSource(datasource, scopedVars) {\n  if (datasource == null ? void 0 : datasource.uid) {\n    const runtimeDataSource = runtimeDataSources.get(datasource.uid);\n    if (runtimeDataSource) {\n      return runtimeDataSource;\n    }\n  }\n  if (datasource && datasource.query) {\n    return datasource;\n  }\n  return await getDataSourceSrv().get(datasource, scopedVars);\n}\n\nexport { getDataSource };\n//# sourceMappingURL=getDataSource.js.map\n","function writeSceneLog(logger, message, ...rest) {\n  let loggingEnabled = false;\n  if (typeof window !== \"undefined\") {\n    loggingEnabled = localStorage.getItem(\"grafana.debug.scenes\") === \"true\";\n  }\n  if (loggingEnabled) {\n    console.log(`${logger}: `, message, ...rest);\n  }\n}\n\nexport { writeSceneLog };\n//# sourceMappingURL=writeSceneLog.js.map\n","import { DataLinkBuiltInVars } from '@grafana/data';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\nimport { writeSceneLog } from '../utils/writeSceneLog.js';\nimport { VARIABLE_REGEX } from './constants.js';\nimport { safeStringifyValue } from './utils.js';\n\nclass VariableDependencyConfig {\n  constructor(_sceneObject, _options) {\n    this._sceneObject = _sceneObject;\n    this._options = _options;\n    this._dependencies = /* @__PURE__ */ new Set();\n    this._isWaitingForVariables = false;\n    this.scanCount = 0;\n    this._statePaths = _options.statePaths;\n  }\n  hasDependencyOn(name) {\n    return this.getNames().has(name);\n  }\n  variableUpdateCompleted(variable, hasChanged) {\n    const deps = this.getNames();\n    let dependencyChanged = false;\n    if ((deps.has(variable.state.name) || deps.has(DataLinkBuiltInVars.includeVars)) && hasChanged) {\n      dependencyChanged = true;\n    }\n    writeSceneLog(\n      \"VariableDependencyConfig\",\n      \"variableUpdateCompleted\",\n      variable.state.name,\n      dependencyChanged,\n      this._isWaitingForVariables\n    );\n    if (this._options.onAnyVariableChanged) {\n      this._options.onAnyVariableChanged(variable);\n    }\n    if (this._options.onVariableUpdateCompleted && (this._isWaitingForVariables || dependencyChanged)) {\n      this._options.onVariableUpdateCompleted();\n    }\n    if (dependencyChanged) {\n      if (this._options.onReferencedVariableValueChanged) {\n        this._options.onReferencedVariableValueChanged(variable);\n      }\n      if (!this._options.onReferencedVariableValueChanged && !this._options.onVariableUpdateCompleted) {\n        this._sceneObject.forceRender();\n      }\n    }\n  }\n  hasDependencyInLoadingState() {\n    if (sceneGraph.hasVariableDependencyInLoadingState(this._sceneObject)) {\n      this._isWaitingForVariables = true;\n      return true;\n    }\n    this._isWaitingForVariables = false;\n    return false;\n  }\n  getNames() {\n    const prevState = this._state;\n    const newState = this._state = this._sceneObject.state;\n    if (!prevState) {\n      this.scanStateForDependencies(this._state);\n      return this._dependencies;\n    }\n    if (newState !== prevState) {\n      if (this._statePaths) {\n        for (const path of this._statePaths) {\n          if (path === \"*\" || newState[path] !== prevState[path]) {\n            this.scanStateForDependencies(newState);\n            break;\n          }\n        }\n      } else {\n        this.scanStateForDependencies(newState);\n      }\n    }\n    return this._dependencies;\n  }\n  setVariableNames(varNames) {\n    this._options.variableNames = varNames;\n    this.scanStateForDependencies(this._state);\n  }\n  setPaths(paths) {\n    this._statePaths = paths;\n  }\n  scanStateForDependencies(state) {\n    this._dependencies.clear();\n    this.scanCount += 1;\n    if (this._options.variableNames) {\n      for (const name of this._options.variableNames) {\n        this._dependencies.add(name);\n      }\n    }\n    if (this._statePaths) {\n      for (const path of this._statePaths) {\n        if (path === \"*\") {\n          this.extractVariablesFrom(state);\n          break;\n        } else {\n          const value = state[path];\n          if (value) {\n            this.extractVariablesFrom(value);\n          }\n        }\n      }\n    }\n  }\n  extractVariablesFrom(value) {\n    VARIABLE_REGEX.lastIndex = 0;\n    const stringToCheck = typeof value !== \"string\" ? safeStringifyValue(value) : value;\n    const matches = stringToCheck.matchAll(VARIABLE_REGEX);\n    if (!matches) {\n      return;\n    }\n    for (const match of matches) {\n      const [, var1, var2, , var3] = match;\n      const variableName = var1 || var2 || var3;\n      this._dependencies.add(variableName);\n    }\n  }\n}\n\nexport { VariableDependencyConfig };\n//# sourceMappingURL=VariableDependencyConfig.js.map\n","import { sceneGraph } from '../core/sceneGraph/index.js';\nimport { isVariableValueEqual } from './utils.js';\n\nclass VariableValueRecorder {\n  constructor() {\n    this._values = /* @__PURE__ */ new Map();\n  }\n  recordCurrentDependencyValuesForSceneObject(sceneObject) {\n    this.clearValues();\n    if (!sceneObject.variableDependency) {\n      return;\n    }\n    for (const variableName of sceneObject.variableDependency.getNames()) {\n      const variable = sceneGraph.lookupVariable(variableName, sceneObject);\n      if (variable) {\n        this._values.set(variable.state.name, variable.getValue());\n      }\n    }\n  }\n  cloneAndRecordCurrentValuesForSceneObject(sceneObject) {\n    const clone = new VariableValueRecorder();\n    clone.recordCurrentDependencyValuesForSceneObject(sceneObject);\n    return clone;\n  }\n  clearValues() {\n    this._values.clear();\n  }\n  hasValues() {\n    return !!this._values;\n  }\n  recordCurrentValue(variable) {\n    this._values.set(variable.state.name, variable.getValue());\n  }\n  hasRecordedValue(variable) {\n    return this._values.has(variable.state.name);\n  }\n  hasValueChanged(variable) {\n    if (this._values.has(variable.state.name)) {\n      const value = this._values.get(variable.state.name);\n      if (!isVariableValueEqual(value, variable.getValue())) {\n        return true;\n      }\n    }\n    return false;\n  }\n  hasDependenciesChanged(sceneObject) {\n    if (!this._values) {\n      return false;\n    }\n    if (!sceneObject.variableDependency) {\n      return false;\n    }\n    for (const variableName of sceneObject.variableDependency.getNames()) {\n      const variable = sceneGraph.lookupVariable(variableName, sceneObject);\n      if (!variable) {\n        continue;\n      }\n      const name = variable.state.name;\n      if (variable && this._values.has(name)) {\n        const value = this._values.get(name);\n        if (!isVariableValueEqual(value, variable.getValue())) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n\nexport { VariableValueRecorder };\n//# sourceMappingURL=VariableValueRecorder.js.map\n","function isExtraQueryProvider(obj) {\n  return typeof obj === \"object\" && \"getExtraQueries\" in obj;\n}\n\nexport { isExtraQueryProvider };\n//# sourceMappingURL=ExtraQueryProvider.js.map\n","import { of, mergeMap, forkJoin, map } from 'rxjs';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst passthroughProcessor = (_, secondary) => of(secondary);\nconst extraQueryProcessingOperator = (processors) => (data) => {\n  return data.pipe(\n    mergeMap(([primary, ...secondaries]) => {\n      const processedSecondaries = secondaries.flatMap((s) => {\n        var _a, _b;\n        return (_b = (_a = processors.get(s.request.requestId)) == null ? void 0 : _a(primary, s)) != null ? _b : of(s);\n      });\n      return forkJoin([of(primary), ...processedSecondaries]);\n    }),\n    map(([primary, ...processedSecondaries]) => {\n      var _a;\n      return __spreadProps(__spreadValues({}, primary), {\n        series: [...primary.series, ...processedSecondaries.flatMap((s) => s.series)],\n        annotations: [...(_a = primary.annotations) != null ? _a : [], ...processedSecondaries.flatMap((s) => {\n          var _a2;\n          return (_a2 = s.annotations) != null ? _a2 : [];\n        })]\n      });\n    })\n  );\n};\n\nexport { extraQueryProcessingOperator, passthroughProcessor };\n//# sourceMappingURL=extraQueryProcessingOperator.js.map\n","var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction filterAnnotations(data, filters) {\n  var _a;\n  if (!Array.isArray(data) || data.length === 0) {\n    return data;\n  }\n  const rows = Array.from({ length: data.length }, () => /* @__PURE__ */ new Set());\n  let frameIdx = 0;\n  for (const frame of data) {\n    for (let index = 0; index < frame.length; index++) {\n      if (rows[frameIdx].has(index)) {\n        continue;\n      }\n      let matching = true;\n      const panelIdField = frame.fields.find((f) => f.name === \"panelId\");\n      const sourceField = frame.fields.find((f) => f.name === \"source\");\n      if (sourceField) {\n        if (panelIdField && sourceField.values[index].type === \"dashboard\") {\n          matching = panelIdField.values[index] === filters.panelId;\n        }\n        const sourceFilter = sourceField.values[index].filter;\n        if (sourceFilter) {\n          const includes = ((_a = sourceFilter.ids) != null ? _a : []).includes(filters.panelId);\n          if (sourceFilter.exclude) {\n            if (includes) {\n              matching = false;\n            }\n          } else if (!includes) {\n            matching = false;\n          }\n        }\n      }\n      if (matching) {\n        rows[frameIdx].add(index);\n      }\n    }\n    frameIdx++;\n  }\n  const processed = [];\n  frameIdx = 0;\n  for (const frame of data) {\n    const frameLength = rows[frameIdx].size;\n    const fields = [];\n    for (const field of frame.fields) {\n      const buffer = [];\n      for (let index = 0; index < frame.length; index++) {\n        if (rows[frameIdx].has(index)) {\n          buffer.push(field.values[index]);\n          continue;\n        }\n      }\n      fields.push(__spreadProps(__spreadValues({}, field), {\n        values: buffer\n      }));\n    }\n    processed.push(__spreadProps(__spreadValues({}, frame), {\n      fields,\n      length: frameLength\n    }));\n    frameIdx++;\n  }\n  return processed;\n}\n\nexport { filterAnnotations };\n//# sourceMappingURL=filterAnnotations.js.map\n","import { isDataRequestEnricher } from '../core/types.js';\n\nfunction getEnrichedDataRequest(sourceRunner) {\n  const root = sourceRunner.getRoot();\n  if (isDataRequestEnricher(root)) {\n    return root.enrichDataRequest(sourceRunner);\n  }\n  return null;\n}\n\nexport { getEnrichedDataRequest };\n//# sourceMappingURL=getEnrichedDataRequest.js.map\n","import { getTemplateSrv, getDataSourceSrv } from '@grafana/runtime';\n\nlet originalGetAdhocFilters = void 0;\nlet allActiveFilterSets = /* @__PURE__ */ new Set();\nfunction patchGetAdhocFilters(filterVar) {\n  filterVar.addActivationHandler(() => {\n    allActiveFilterSets.add(filterVar);\n    return () => allActiveFilterSets.delete(filterVar);\n  });\n  if (originalGetAdhocFilters) {\n    return;\n  }\n  const templateSrv = getTemplateSrv();\n  if (!(templateSrv == null ? void 0 : templateSrv.getAdhocFilters)) {\n    console.log(\"Failed to patch getAdhocFilters\");\n    return;\n  }\n  originalGetAdhocFilters = templateSrv.getAdhocFilters;\n  templateSrv.getAdhocFilters = function getAdhocFiltersScenePatch(dsName) {\n    var _a;\n    if (allActiveFilterSets.size === 0) {\n      return originalGetAdhocFilters.call(templateSrv);\n    }\n    const ds = getDataSourceSrv().getInstanceSettings(dsName);\n    if (!ds) {\n      return [];\n    }\n    for (const filter of allActiveFilterSets.values()) {\n      if (((_a = filter.state.datasource) == null ? void 0 : _a.uid) === ds.uid) {\n        return filter.state.filters;\n      }\n    }\n    return [];\n  }.bind(templateSrv);\n}\nfunction findActiveAdHocFilterVariableByUid(dsUid) {\n  var _a;\n  for (const filter of allActiveFilterSets.values()) {\n    if (((_a = filter.state.datasource) == null ? void 0 : _a.uid) === dsUid) {\n      return filter;\n    }\n  }\n  return void 0;\n}\n\nexport { findActiveAdHocFilterVariableByUid, patchGetAdhocFilters };\n//# sourceMappingURL=patchGetAdhocFilters.js.map\n","import { Observable } from 'rxjs';\nimport { LoadingState } from '@grafana/schema';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\n\nfunction registerQueryWithController(entry) {\n  return (queryStream) => {\n    const queryControler = sceneGraph.getQueryController(entry.origin);\n    if (!queryControler) {\n      return queryStream;\n    }\n    return new Observable((observer) => {\n      if (!entry.cancel) {\n        entry.cancel = () => observer.complete();\n      }\n      queryControler.queryStarted(entry);\n      let markedAsCompleted = false;\n      const sub = queryStream.subscribe({\n        next: (v) => {\n          if (!markedAsCompleted && v.state !== LoadingState.Loading) {\n            markedAsCompleted = true;\n            queryControler.queryCompleted(entry);\n          }\n          observer.next(v);\n        },\n        error: (e) => observer.error(e),\n        complete: () => {\n          observer.complete();\n        }\n      });\n      return () => {\n        sub.unsubscribe();\n        if (!markedAsCompleted) {\n          queryControler.queryCompleted(entry);\n        }\n      };\n    });\n  };\n}\n\nexport { registerQueryWithController };\n//# sourceMappingURL=registerQueryWithController.js.map\n","const allActiveGroupByVariables = /* @__PURE__ */ new Set();\nfunction findActiveGroupByVariablesByUid(dsUid) {\n  var _a;\n  for (const groupByVariable of allActiveGroupByVariables.values()) {\n    if (((_a = groupByVariable.state.datasource) == null ? void 0 : _a.uid) === dsUid) {\n      return groupByVariable;\n    }\n  }\n  return void 0;\n}\n\nexport { allActiveGroupByVariables, findActiveGroupByVariablesByUid };\n//# sourceMappingURL=findActiveGroupByVariablesByUid.js.map\n","function setBaseClassState(sceneObject, newState) {\n  sceneObject.setState(newState);\n}\n\nexport { setBaseClassState };\n//# sourceMappingURL=utils.js.map\n","import { isEqual, isArray } from 'lodash';\nimport { map } from 'rxjs';\nimport { ALL_VARIABLE_VALUE, ALL_VARIABLE_TEXT } from '../constants.js';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { SceneVariableValueChangedEvent } from '../types.js';\nimport { formatRegistry } from '../interpolation/formatRegistry.js';\nimport { VariableFormatID } from '@grafana/schema';\nimport { setBaseClassState } from '../../utils/utils.js';\n\nclass MultiValueVariable extends SceneObjectBase {\n  constructor() {\n    super(...arguments);\n    this._urlSync = new MultiValueUrlSyncHandler(this);\n  }\n  validateAndUpdate() {\n    return this.getValueOptions({}).pipe(\n      map((options) => {\n        this.updateValueGivenNewOptions(options);\n        return {};\n      })\n    );\n  }\n  onCancel() {\n    this.setStateHelper({ loading: false });\n    const sceneVarSet = this.parent;\n    sceneVarSet == null ? void 0 : sceneVarSet.cancel(this);\n  }\n  updateValueGivenNewOptions(options) {\n    const { value: currentValue, text: currentText } = this.state;\n    const stateUpdate = this.getStateUpdateGivenNewOptions(options, currentValue, currentText);\n    this.interceptStateUpdateAfterValidation(stateUpdate);\n    this.setStateHelper(stateUpdate);\n    if (stateUpdate.value !== currentValue || stateUpdate.text !== currentText || this.hasAllValue()) {\n      this.publishEvent(new SceneVariableValueChangedEvent(this), true);\n    }\n  }\n  getStateUpdateGivenNewOptions(options, currentValue, currentText) {\n    const stateUpdate = {\n      options,\n      loading: false,\n      value: currentValue,\n      text: currentText\n    };\n    if (options.length === 0) {\n      if (this.state.defaultToAll || this.state.includeAll) {\n        stateUpdate.value = ALL_VARIABLE_VALUE;\n        stateUpdate.text = ALL_VARIABLE_TEXT;\n      } else if (this.state.isMulti) {\n        stateUpdate.value = [];\n        stateUpdate.text = [];\n      } else {\n        stateUpdate.value = \"\";\n        stateUpdate.text = \"\";\n      }\n      return stateUpdate;\n    }\n    if (this.hasAllValue()) {\n      if (!this.state.includeAll) {\n        stateUpdate.value = options[0].value;\n        stateUpdate.text = options[0].label;\n        if (this.state.isMulti) {\n          stateUpdate.value = [stateUpdate.value];\n          stateUpdate.text = [stateUpdate.text];\n        }\n      }\n      return stateUpdate;\n    }\n    if (this.state.isMulti) {\n      const currentValues = Array.isArray(currentValue) ? currentValue : [currentValue];\n      const validValues = currentValues.filter((v) => options.find((o) => o.value === v));\n      const validTexts = validValues.map((v) => options.find((o) => o.value === v).label);\n      if (validValues.length === 0) {\n        const defaultState = this.getDefaultMultiState(options);\n        stateUpdate.value = defaultState.value;\n        stateUpdate.text = defaultState.text;\n      } else {\n        if (!isEqual(validValues, currentValue)) {\n          stateUpdate.value = validValues;\n        }\n        if (!isEqual(validTexts, currentText)) {\n          stateUpdate.text = validTexts;\n        }\n      }\n      return stateUpdate;\n    }\n    let matchingOption = findOptionMatchingCurrent(currentValue, currentText, options);\n    if (matchingOption) {\n      stateUpdate.text = matchingOption.label;\n      stateUpdate.value = matchingOption.value;\n    } else {\n      if (this.state.defaultToAll) {\n        stateUpdate.value = ALL_VARIABLE_VALUE;\n        stateUpdate.text = ALL_VARIABLE_TEXT;\n      } else {\n        stateUpdate.value = options[0].value;\n        stateUpdate.text = options[0].label;\n      }\n    }\n    return stateUpdate;\n  }\n  interceptStateUpdateAfterValidation(stateUpdate) {\n    const isAllValueFix = stateUpdate.value === ALL_VARIABLE_VALUE && this.state.text === ALL_VARIABLE_TEXT;\n    if (this.skipNextValidation && stateUpdate.value !== this.state.value && !isAllValueFix) {\n      stateUpdate.value = this.state.value;\n      stateUpdate.text = this.state.text;\n    }\n    this.skipNextValidation = false;\n  }\n  getValue() {\n    if (this.hasAllValue()) {\n      if (this.state.allValue) {\n        return new CustomAllValue(this.state.allValue, this);\n      }\n      return this.state.options.map((x) => x.value);\n    }\n    return this.state.value;\n  }\n  getValueText() {\n    if (this.hasAllValue()) {\n      return ALL_VARIABLE_TEXT;\n    }\n    if (Array.isArray(this.state.text)) {\n      return this.state.text.join(\" + \");\n    }\n    return String(this.state.text);\n  }\n  hasAllValue() {\n    const value = this.state.value;\n    return value === ALL_VARIABLE_VALUE || Array.isArray(value) && value[0] === ALL_VARIABLE_VALUE;\n  }\n  getDefaultMultiState(options) {\n    if (this.state.defaultToAll) {\n      return { value: [ALL_VARIABLE_VALUE], text: [ALL_VARIABLE_TEXT] };\n    } else if (options.length > 0) {\n      return { value: [options[0].value], text: [options[0].label] };\n    } else {\n      return { value: [], text: [] };\n    }\n  }\n  changeValueTo(value, text) {\n    if (value === this.state.value && text === this.state.text) {\n      return;\n    }\n    if (!text) {\n      if (Array.isArray(value)) {\n        text = value.map((v) => this.findLabelTextForValue(v));\n      } else {\n        text = this.findLabelTextForValue(value);\n      }\n    }\n    if (Array.isArray(value)) {\n      if (value.length === 0) {\n        const state = this.getDefaultMultiState(this.state.options);\n        value = state.value;\n        text = state.text;\n      }\n      if (value[value.length - 1] === ALL_VARIABLE_VALUE) {\n        value = [ALL_VARIABLE_VALUE];\n        text = [ALL_VARIABLE_TEXT];\n      } else if (value[0] === ALL_VARIABLE_VALUE && value.length > 1) {\n        value.shift();\n        if (Array.isArray(text)) {\n          text.shift();\n        }\n      }\n    }\n    if (isEqual(value, this.state.value) && isEqual(text, this.state.text)) {\n      return;\n    }\n    this.setStateHelper({ value, text, loading: false });\n    this.publishEvent(new SceneVariableValueChangedEvent(this), true);\n  }\n  findLabelTextForValue(value) {\n    if (value === ALL_VARIABLE_VALUE) {\n      return ALL_VARIABLE_TEXT;\n    }\n    const option = this.state.options.find((x) => x.value === value);\n    if (option) {\n      return option.label;\n    }\n    const optionByLabel = this.state.options.find((x) => x.label === value);\n    if (optionByLabel) {\n      return optionByLabel.label;\n    }\n    return value;\n  }\n  setStateHelper(state) {\n    setBaseClassState(this, state);\n  }\n  getOptionsForSelect() {\n    let options = this.state.options;\n    if (this.state.includeAll) {\n      options = [{ value: ALL_VARIABLE_VALUE, label: ALL_VARIABLE_TEXT }, ...options];\n    }\n    if (!Array.isArray(this.state.value)) {\n      const current = options.find((x) => x.value === this.state.value);\n      if (!current) {\n        options = [{ value: this.state.value, label: String(this.state.text) }, ...options];\n      }\n    }\n    return options;\n  }\n}\nfunction findOptionMatchingCurrent(currentValue, currentText, options) {\n  let textMatch;\n  for (const item of options) {\n    if (item.value === currentValue) {\n      return item;\n    }\n    if (item.label === currentText) {\n      textMatch = item;\n    }\n  }\n  return textMatch;\n}\nclass MultiValueUrlSyncHandler {\n  constructor(_sceneObject) {\n    this._sceneObject = _sceneObject;\n  }\n  getKey() {\n    return `var-${this._sceneObject.state.name}`;\n  }\n  getKeys() {\n    if (this._sceneObject.state.skipUrlSync) {\n      return [];\n    }\n    return [this.getKey()];\n  }\n  getUrlState() {\n    if (this._sceneObject.state.skipUrlSync) {\n      return {};\n    }\n    let urlValue = null;\n    let value = this._sceneObject.state.value;\n    if (Array.isArray(value)) {\n      urlValue = value.map(String);\n    } else if (this._sceneObject.state.isMulti) {\n      urlValue = [String(value)];\n    } else {\n      urlValue = String(value);\n    }\n    return { [this.getKey()]: urlValue };\n  }\n  updateFromUrl(values) {\n    let urlValue = values[this.getKey()];\n    if (urlValue != null) {\n      if (this._sceneObject.state.includeAll) {\n        urlValue = handleLegacyUrlAllValue(urlValue);\n      }\n      if (this._sceneObject.state.allValue && this._sceneObject.state.allValue === urlValue) {\n        urlValue = ALL_VARIABLE_VALUE;\n      }\n      if (!this._sceneObject.isActive) {\n        this._sceneObject.skipNextValidation = true;\n      }\n      this._sceneObject.changeValueTo(urlValue);\n    }\n  }\n}\nfunction handleLegacyUrlAllValue(value) {\n  if (isArray(value) && value[0] === ALL_VARIABLE_TEXT) {\n    return [ALL_VARIABLE_VALUE];\n  } else if (value === ALL_VARIABLE_TEXT) {\n    return ALL_VARIABLE_VALUE;\n  }\n  return value;\n}\nclass CustomAllValue {\n  constructor(_value, _variable) {\n    this._value = _value;\n    this._variable = _variable;\n  }\n  formatter(formatNameOrFn) {\n    if (formatNameOrFn === VariableFormatID.Text) {\n      return ALL_VARIABLE_TEXT;\n    }\n    if (formatNameOrFn === VariableFormatID.PercentEncode) {\n      return formatRegistry.get(VariableFormatID.PercentEncode).formatter(this._value, [], this._variable);\n    }\n    if (formatNameOrFn === VariableFormatID.QueryParam) {\n      return formatRegistry.get(VariableFormatID.QueryParam).formatter(ALL_VARIABLE_TEXT, [], this._variable);\n    }\n    return this._value;\n  }\n}\n\nexport { CustomAllValue, MultiValueUrlSyncHandler, MultiValueVariable };\n//# sourceMappingURL=MultiValueVariable.js.map\n","const Components = {\n  RadioButton: {\n    container: \"data-testid radio-button\"\n  },\n  Breadcrumbs: {\n    breadcrumb: (title) => `data-testid ${title} breadcrumb`\n  },\n  TimePicker: {\n    openButton: \"data-testid TimePicker Open Button\",\n    overlayContent: \"data-testid TimePicker Overlay Content\",\n    fromField: \"data-testid Time Range from field\",\n    toField: \"data-testid Time Range to field\",\n    applyTimeRange: \"data-testid TimePicker submit button\",\n    copyTimeRange: \"data-testid TimePicker copy button\",\n    pasteTimeRange: \"data-testid TimePicker paste button\",\n    calendar: {\n      label: \"data-testid Time Range calendar\",\n      openButton: \"data-testid Open time range calendar\",\n      closeButton: \"data-testid Close time range Calendar\"\n    },\n    absoluteTimeRangeTitle: \"data-testid-absolute-time-range-narrow\"\n  },\n  DataSourcePermissions: {\n    form: () => 'form[name=\"addPermission\"]',\n    roleType: \"Role to add new permission to\",\n    rolePicker: \"Built-in role picker\",\n    permissionLevel: \"Permission Level\"\n  },\n  DateTimePicker: {\n    input: \"data-testid date-time-input\"\n  },\n  DataSource: {\n    TestData: {\n      QueryTab: {\n        scenarioSelectContainer: \"Test Data Query scenario select container\",\n        scenarioSelect: \"Test Data Query scenario select\",\n        max: \"TestData max\",\n        min: \"TestData min\",\n        noise: \"TestData noise\",\n        seriesCount: \"TestData series count\",\n        spread: \"TestData spread\",\n        startValue: \"TestData start value\",\n        drop: \"TestData drop values\"\n      }\n    },\n    DataSourceHttpSettings: {\n      urlInput: \"data-testid Datasource HTTP settings url\"\n    },\n    Jaeger: {\n      traceIDInput: \"Trace ID\"\n    },\n    Prometheus: {\n      configPage: {\n        connectionSettings: \"Data source connection URL\",\n        // aria-label in grafana experimental\n        manageAlerts: \"prometheus-alerts-manager\",\n        // id for switch component\n        scrapeInterval: \"data-testid scrape interval\",\n        queryTimeout: \"data-testid query timeout\",\n        defaultEditor: \"data-testid default editor\",\n        disableMetricLookup: \"disable-metric-lookup\",\n        // id for switch component\n        prometheusType: \"data-testid prometheus type\",\n        prometheusVersion: \"data-testid prometheus version\",\n        cacheLevel: \"data-testid cache level\",\n        incrementalQuerying: \"prometheus-incremental-querying\",\n        // id for switch component\n        queryOverlapWindow: \"data-testid query overlap window\",\n        disableRecordingRules: \"disable-recording-rules\",\n        // id for switch component\n        customQueryParameters: \"data-testid custom query parameters\",\n        httpMethod: \"data-testid http method\",\n        exemplarsAddButton: \"data-testid Add exemplar config button\",\n        internalLinkSwitch: \"data-testid Internal link switch\",\n        codeModeMetricNamesSuggestionLimit: \"data-testid code mode metric names suggestion limit\"\n      },\n      queryEditor: {\n        // kickstart: '', see QueryBuilder queryPatterns below\n        explain: \"data-testid prometheus explain switch wrapper\",\n        editorToggle: \"data-testid QueryEditorModeToggle\",\n        // wrapper for toggle\n        options: \"data-testid prometheus options\",\n        // wrapper for options group\n        legend: \"data-testid prometheus legend wrapper\",\n        // wrapper for multiple compomnents\n        format: \"data-testid prometheus format\",\n        step: \"prometheus-step\",\n        // id for autosize component\n        type: \"data-testid prometheus type\",\n        //wrapper for radio button group\n        exemplars: \"prometheus-exemplars\",\n        // id for editor switch component\n        builder: {\n          // see QueryBuilder below for commented selectors\n          // labelSelect: 'data-testid Select label',\n          // valueSelect: 'data-testid Select value',\n          // matchOperatorSelect: 'data-testid Select match operator',\n          metricSelect: \"data-testid metric select\",\n          hints: \"data-testid prometheus hints\",\n          // wrapper for hints component\n          metricsExplorer: \"data-testid metrics explorer\",\n          queryAdvisor: \"data-testid query advisor\"\n        },\n        code: {\n          queryField: \"data-testid prometheus query field\",\n          metricsCountInfo: \"data-testid metrics count disclaimer\",\n          metricsBrowser: {\n            openButton: \"data-testid open metrics browser\",\n            selectMetric: \"data-testid select a metric\",\n            metricList: \"data-testid metric list\",\n            labelNamesFilter: \"data-testid label names filter\",\n            labelValuesFilter: \"data-testid label values filter\",\n            useQuery: \"data-testid use query\",\n            useAsRateQuery: \"data-testid use as rate query\",\n            validateSelector: \"data-testid validate selector\",\n            clear: \"data-testid clear\"\n          }\n        }\n      },\n      exemplarMarker: \"data-testid Exemplar marker\",\n      variableQueryEditor: {\n        queryType: \"data-testid query type\",\n        labelnames: {\n          metricRegex: \"data-testid label names metric regex\"\n        },\n        labelValues: {\n          labelSelect: \"data-testid label values label select\"\n          // metric select see queryEditor: builder for more context\n          // label select for metric filtering see queryEditor: builder for more context\n        },\n        metricNames: {\n          metricRegex: \"data-testid metric names metric regex\"\n        },\n        varQueryResult: \"data-testid variable query result\",\n        seriesQuery: \"data-testid prometheus series query\",\n        classicQuery: \"data-testid prometheus classic query\"\n      },\n      annotations: {\n        minStep: \"prometheus-annotation-min-step\",\n        // id for autosize input\n        title: \"data-testid prometheus annotation title\",\n        tags: \"data-testid prometheus annotation tags\",\n        text: \"data-testid prometheus annotation text\",\n        seriesValueAsTimestamp: \"data-testid prometheus annotation series value as timestamp\"\n      }\n    }\n  },\n  Menu: {\n    MenuComponent: (title) => `${title} menu`,\n    MenuGroup: (title) => `${title} menu group`,\n    MenuItem: (title) => `${title} menu item`,\n    SubMenu: {\n      container: \"data-testid SubMenu container\",\n      icon: \"data-testid SubMenu icon\"\n    }\n  },\n  Panels: {\n    Panel: {\n      title: (title) => `data-testid Panel header ${title}`,\n      content: \"data-testid panel content\",\n      headerItems: (item) => `data-testid Panel header item ${item}`,\n      menuItems: (item) => `data-testid Panel menu item ${item}`,\n      menu: (title) => `data-testid Panel menu ${title}`,\n      containerByTitle: (title) => `${title} panel`,\n      headerCornerInfo: (mode) => `Panel header ${mode}`,\n      status: (status) => `data-testid Panel status ${status}`,\n      loadingBar: () => `Panel loading bar`,\n      HoverWidget: {\n        container: \"data-testid hover-header-container\",\n        dragIcon: \"data-testid drag-icon\"\n      },\n      PanelDataErrorMessage: \"data-testid Panel data error message\"\n    },\n    Visualization: {\n      Graph: {\n        container: \"Graph container\",\n        VisualizationTab: {\n          legendSection: \"Legend section\"\n        },\n        Legend: {\n          legendItemAlias: (name) => `gpl alias ${name}`,\n          showLegendSwitch: \"gpl show legend\"\n        },\n        xAxis: {\n          labels: () => \"div.flot-x-axis > div.flot-tick-label\"\n        }\n      },\n      BarGauge: {\n        /**\n         * @deprecated use valueV2 from Grafana 8.3 instead\n         */\n        value: \"Bar gauge value\",\n        valueV2: \"data-testid Bar gauge value\"\n      },\n      PieChart: {\n        svgSlice: \"data testid Pie Chart Slice\"\n      },\n      Text: {\n        container: () => \".markdown-html\"\n      },\n      Table: {\n        header: \"table header\",\n        footer: \"table-footer\",\n        body: \"data-testid table body\"\n      }\n    }\n  },\n  VizLegend: {\n    seriesName: (name) => `data-testid VizLegend series ${name}`\n  },\n  Drawer: {\n    General: {\n      title: (title) => `Drawer title ${title}`,\n      expand: \"Drawer expand\",\n      contract: \"Drawer contract\",\n      close: \"data-testid Drawer close\",\n      rcContentWrapper: () => \".rc-drawer-content-wrapper\",\n      subtitle: \"data-testid drawer subtitle\"\n    },\n    DashboardSaveDrawer: {\n      saveButton: \"data-testid Save dashboard drawer button\",\n      saveAsButton: \"data-testid Save as dashboard drawer button\",\n      saveAsTitleInput: \"Save dashboard title field\"\n    }\n  },\n  PanelEditor: {\n    General: {\n      content: \"data-testid Panel editor content\"\n    },\n    OptionsPane: {\n      content: \"data-testid Panel editor option pane content\",\n      select: \"Panel editor option pane select\",\n      fieldLabel: (type) => `${type} field property editor`,\n      fieldInput: (title) => `data-testid Panel editor option pane field input ${title}`\n    },\n    // not sure about the naming *DataPane*\n    DataPane: {\n      content: \"data-testid Panel editor data pane content\"\n    },\n    applyButton: \"data-testid Apply changes and go back to dashboard\",\n    toggleVizPicker: \"data-testid toggle-viz-picker\",\n    toggleVizOptions: \"data-testid toggle-viz-options\",\n    toggleTableView: \"data-testid toggle-table-view\",\n    // [Geomap] Map controls\n    showZoomField: \"Map controls Show zoom control field property editor\",\n    showAttributionField: \"Map controls Show attribution field property editor\",\n    showScaleField: \"Map controls Show scale field property editor\",\n    showMeasureField: \"Map controls Show measure tools field property editor\",\n    showDebugField: \"Map controls Show debug field property editor\",\n    measureButton: \"show measure tools\"\n  },\n  PanelInspector: {\n    Data: {\n      content: \"Panel inspector Data content\"\n    },\n    Stats: {\n      content: \"Panel inspector Stats content\"\n    },\n    Json: {\n      content: \"data-testid Panel inspector Json content\"\n    },\n    Query: {\n      content: \"Panel inspector Query content\",\n      refreshButton: \"Panel inspector Query refresh button\",\n      jsonObjectKeys: () => \".json-formatter-key\"\n    }\n  },\n  Tab: {\n    title: (title) => `Tab ${title}`,\n    active: () => '[class*=\"-activeTabStyle\"]'\n  },\n  RefreshPicker: {\n    /**\n     * @deprecated use runButtonV2 from Grafana 8.3 instead\n     */\n    runButton: \"RefreshPicker run button\",\n    /**\n     * @deprecated use intervalButtonV2 from Grafana 8.3 instead\n     */\n    intervalButton: \"RefreshPicker interval button\",\n    runButtonV2: \"data-testid RefreshPicker run button\",\n    intervalButtonV2: \"data-testid RefreshPicker interval button\"\n  },\n  QueryTab: {\n    content: \"Query editor tab content\",\n    queryInspectorButton: \"Query inspector button\",\n    queryHistoryButton: \"data-testid query-history-button\",\n    addQuery: \"data-testid query-tab-add-query\",\n    queryGroupTopSection: \"data-testid query group top section\",\n    addExpression: \"data-testid query-tab-add-expression\"\n  },\n  QueryHistory: {\n    queryText: \"Query text\"\n  },\n  QueryEditorRows: {\n    rows: \"Query editor row\"\n  },\n  QueryEditorRow: {\n    actionButton: (title) => `data-testid ${title}`,\n    title: (refId) => `Query editor row title ${refId}`,\n    container: (refId) => `Query editor row ${refId}`\n  },\n  AlertTab: {\n    content: \"data-testid Alert editor tab content\"\n  },\n  AlertRules: {\n    groupToggle: \"data-testid group-collapse-toggle\",\n    toggle: \"data-testid collapse-toggle\",\n    expandedContent: \"data-testid expanded-content\",\n    previewButton: \"data-testid alert-rule preview-button\",\n    ruleNameField: \"data-testid alert-rule name-field\",\n    newFolderButton: \"data-testid alert-rule new-folder-button\",\n    newFolderNameField: \"data-testid alert-rule name-folder-name-field\",\n    newFolderNameCreateButton: \"data-testid alert-rule name-folder-name-create-button\",\n    newEvaluationGroupButton: \"data-testid alert-rule new-evaluation-group-button\",\n    newEvaluationGroupName: \"data-testid alert-rule new-evaluation-group-name\",\n    newEvaluationGroupInterval: \"data-testid alert-rule new-evaluation-group-interval\",\n    newEvaluationGroupCreate: \"data-testid alert-rule new-evaluation-group-create-button\"\n  },\n  Alert: {\n    /**\n     * @deprecated use alertV2 from Grafana 8.3 instead\n     */\n    alert: (severity) => `Alert ${severity}`,\n    alertV2: (severity) => `data-testid Alert ${severity}`\n  },\n  TransformTab: {\n    content: \"data-testid Transform editor tab content\",\n    newTransform: (name) => `data-testid New transform ${name}`,\n    transformationEditor: (name) => `data-testid Transformation editor ${name}`,\n    transformationEditorDebugger: (name) => `data-testid Transformation editor debugger ${name}`\n  },\n  Transforms: {\n    card: (name) => `data-testid New transform ${name}`,\n    disableTransformationButton: \"data-testid Disable transformation button\",\n    Reduce: {\n      modeLabel: \"data-testid Transform mode label\",\n      calculationsLabel: \"data-testid Transform calculations label\"\n    },\n    SpatialOperations: {\n      actionLabel: \"root Action field property editor\",\n      locationLabel: \"root Location Mode field property editor\",\n      location: {\n        autoOption: \"Auto location option\",\n        coords: {\n          option: \"Coords location option\",\n          latitudeFieldLabel: \"root Latitude field field property editor\",\n          longitudeFieldLabel: \"root Longitude field field property editor\"\n        },\n        geohash: {\n          option: \"Geohash location option\",\n          geohashFieldLabel: \"root Geohash field field property editor\"\n        },\n        lookup: {\n          option: \"Lookup location option\",\n          lookupFieldLabel: \"root Lookup field field property editor\",\n          gazetteerFieldLabel: \"root Gazetteer field property editor\"\n        }\n      }\n    },\n    searchInput: \"data-testid search transformations\",\n    noTransformationsMessage: \"data-testid no transformations message\",\n    addTransformationButton: \"data-testid add transformation button\",\n    removeAllTransformationsButton: \"data-testid remove all transformations button\"\n  },\n  NavBar: {\n    Configuration: {\n      button: \"Configuration\"\n    },\n    Toggle: {\n      button: \"data-testid Toggle menu\"\n    },\n    Reporting: {\n      button: \"Reporting\"\n    }\n  },\n  NavMenu: {\n    Menu: \"data-testid navigation mega-menu\",\n    item: \"data-testid Nav menu item\"\n  },\n  NavToolbar: {\n    container: \"data-testid Nav toolbar\",\n    shareDashboard: \"data-testid Share dashboard\",\n    markAsFavorite: \"data-testid Mark as favorite\",\n    editDashboard: {\n      editButton: \"data-testid Edit dashboard button\",\n      saveButton: \"data-testid Save dashboard button\",\n      exitButton: \"data-testid Exit edit mode button\",\n      settingsButton: \"data-testid Dashboard settings\",\n      addRowButton: \"data-testid Add row button\",\n      addLibraryPanelButton: \"data-testid Add a panel from the panel library button\",\n      addVisualizationButton: \"data-testid Add new visualization menu item\",\n      pastePanelButton: \"data-testid Paste panel button\",\n      discardChangesButton: \"data-testid Discard changes button\",\n      discardLibraryPanelButton: \"data-testid Discard library panel button\",\n      unlinkLibraryPanelButton: \"data-testid Unlink library panel button\",\n      saveLibraryPanelButton: \"data-testid Save library panel button\",\n      backToDashboardButton: \"data-testid Back to dashboard button\"\n    }\n  },\n  PageToolbar: {\n    container: () => \".page-toolbar\",\n    item: (tooltip) => `${tooltip}`,\n    itemButton: (title) => `data-testid ${title}`\n  },\n  QueryEditorToolbarItem: {\n    button: (title) => `QueryEditor toolbar item button ${title}`\n  },\n  BackButton: {\n    backArrow: \"data-testid Go Back\"\n  },\n  OptionsGroup: {\n    group: (title) => title ? `data-testid Options group ${title}` : \"data-testid Options group\",\n    toggle: (title) => title ? `data-testid Options group ${title} toggle` : \"data-testid Options group toggle\"\n  },\n  PluginVisualization: {\n    item: (title) => `Plugin visualization item ${title}`,\n    current: () => '[class*=\"-currentVisualizationItem\"]'\n  },\n  Select: {\n    option: \"data-testid Select option\",\n    input: () => 'input[id*=\"time-options-input\"]',\n    singleValue: () => 'div[class*=\"-singleValue\"]'\n  },\n  FieldConfigEditor: {\n    content: \"Field config editor content\"\n  },\n  OverridesConfigEditor: {\n    content: \"Field overrides editor content\"\n  },\n  FolderPicker: {\n    /**\n     * @deprecated use containerV2 from Grafana 8.3 instead\n     */\n    container: \"Folder picker select container\",\n    containerV2: \"data-testid Folder picker select container\",\n    input: \"data-testid folder-picker-input\"\n  },\n  ReadonlyFolderPicker: {\n    container: \"data-testid Readonly folder picker select container\"\n  },\n  DataSourcePicker: {\n    container: \"data-testid Data source picker select container\",\n    /**\n     * @deprecated use inputV2 instead\n     */\n    input: () => 'input[id=\"data-source-picker\"]',\n    inputV2: \"data-testid Select a data source\",\n    dataSourceList: \"data-testid Data source list dropdown\",\n    advancedModal: {\n      dataSourceList: \"data-testid Data source list\",\n      builtInDataSourceList: \"data-testid Built in data source list\"\n    }\n  },\n  TimeZonePicker: {\n    /**\n     * @deprecated use TimeZonePicker.containerV2 from Grafana 8.3 instead\n     */\n    container: \"Time zone picker select container\",\n    containerV2: \"data-testid Time zone picker select container\",\n    changeTimeSettingsButton: \"data-testid Time zone picker Change time settings button\"\n  },\n  WeekStartPicker: {\n    /**\n     * @deprecated use WeekStartPicker.containerV2 from Grafana 8.3 instead\n     */\n    container: \"Choose starting day of the week\",\n    containerV2: \"data-testid Choose starting day of the week\",\n    placeholder: \"Choose starting day of the week\"\n  },\n  TraceViewer: {\n    spanBar: \"data-testid SpanBar--wrapper\"\n  },\n  QueryField: { container: \"data-testid Query field\" },\n  QueryBuilder: {\n    queryPatterns: \"data-testid Query patterns\",\n    labelSelect: \"data-testid Select label\",\n    inputSelect: \"data-testid Select label-input\",\n    valueSelect: \"data-testid Select value\",\n    matchOperatorSelect: \"data-testid Select match operator\"\n  },\n  ValuePicker: {\n    button: (name) => `data-testid Value picker button ${name}`,\n    select: (name) => `data-testid Value picker select ${name}`\n  },\n  Search: {\n    /**\n     * @deprecated use sectionV2 from Grafana 8.3 instead\n     */\n    section: \"Search section\",\n    sectionV2: \"data-testid Search section\",\n    /**\n     * @deprecated use itemsV2 from Grafana 8.3 instead\n     */\n    items: \"Search items\",\n    itemsV2: \"data-testid Search items\",\n    cards: \"data-testid Search cards\",\n    collapseFolder: (sectionId) => `data-testid Collapse folder ${sectionId}`,\n    expandFolder: (sectionId) => `data-testid Expand folder ${sectionId}`,\n    dashboardItem: (item) => `${Components.Search.dashboardItems} ${item}`,\n    dashboardCard: (item) => `data-testid Search card ${item}`,\n    folderHeader: (folderName) => `data-testid Folder header ${folderName}`,\n    folderContent: (folderName) => `data-testid Folder content ${folderName}`,\n    dashboardItems: \"data-testid Dashboard search item\"\n  },\n  DashboardLinks: {\n    container: \"data-testid Dashboard link container\",\n    dropDown: \"data-testid Dashboard link dropdown\",\n    link: \"data-testid Dashboard link\"\n  },\n  LoadingIndicator: {\n    icon: \"data-testid Loading indicator\"\n  },\n  CallToActionCard: {\n    /**\n     * @deprecated use buttonV2 from Grafana 8.3 instead\n     */\n    button: (name) => `Call to action button ${name}`,\n    buttonV2: (name) => `data-testid Call to action button ${name}`\n  },\n  DataLinksContextMenu: {\n    singleLink: \"data-testid Data link\"\n  },\n  CodeEditor: {\n    container: \"data-testid Code editor container\"\n  },\n  ReactMonacoEditor: {\n    editorLazy: \"data-testid ReactMonacoEditor editorLazy\"\n  },\n  DashboardImportPage: {\n    textarea: \"data-testid-import-dashboard-textarea\",\n    submit: \"data-testid-load-dashboard\"\n  },\n  ImportDashboardForm: {\n    name: \"data-testid-import-dashboard-title\",\n    submit: \"data-testid-import-dashboard-submit\"\n  },\n  PanelAlertTabContent: {\n    content: \"data-testid Unified alert editor tab content\"\n  },\n  VisualizationPreview: {\n    card: (name) => `data-testid suggestion-${name}`\n  },\n  ColorSwatch: {\n    name: `data-testid-colorswatch`\n  },\n  DashboardRow: {\n    title: (title) => `data-testid dashboard-row-title-${title}`\n  },\n  UserProfile: {\n    profileSaveButton: \"data-testid-user-profile-save\",\n    preferencesSaveButton: \"data-testid-shared-prefs-save\",\n    orgsTable: \"data-testid-user-orgs-table\",\n    sessionsTable: \"data-testid-user-sessions-table\",\n    extensionPointTabs: \"data-testid-extension-point-tabs\",\n    extensionPointTab: (tabId) => `data-testid-extension-point-tab-${tabId}`\n  },\n  FileUpload: {\n    inputField: \"data-testid-file-upload-input-field\",\n    fileNameSpan: \"data-testid-file-upload-file-name\"\n  },\n  DebugOverlay: {\n    wrapper: \"debug-overlay\"\n  },\n  OrgRolePicker: {\n    input: \"Role\"\n  },\n  AnalyticsToolbarButton: {\n    button: \"Dashboard insights\"\n  },\n  Variables: {\n    variableOption: \"data-testid variable-option\"\n  },\n  Annotations: {\n    annotationsTypeInput: \"data-testid annotations-type-input\",\n    annotationsChoosePanelInput: \"data-testid choose-panels-input\",\n    editor: {\n      testButton: \"data-testid annotations-test-button\",\n      resultContainer: \"data-testid annotations-query-result-container\"\n    }\n  },\n  Tooltip: {\n    container: \"data-testid tooltip\"\n  },\n  ReturnToPrevious: {\n    buttonGroup: \"data-testid dismissable button group\",\n    backButton: \"data-testid back\",\n    dismissButton: \"data-testid dismiss\"\n  },\n  SQLQueryEditor: {\n    selectColumn: \"data-testid select-column\",\n    selectAggregation: \"data-testid select-aggregation\",\n    selectAlias: \"data-testid select-alias\",\n    filterConjunction: \"data-testid filter-conjunction\",\n    filterField: \"data-testid filter-field\",\n    filterOperator: \"data-testid filter-operator\",\n    headerTableSelector: \"data-testid header-table-selector\",\n    headerFilterSwitch: \"data-testid header-filter-switch\",\n    headerGroupSwitch: \"data-testid header-group-switch\",\n    headerOrderSwitch: \"data-testid header-order-switch\",\n    headerPreviewSwitch: \"data-testid header-preview-switch\"\n  }\n};\n\nexport { Components };\n//# sourceMappingURL=components.js.map\n","import { Components } from './components.js';\n\nconst Pages = {\n  Login: {\n    url: \"/login\",\n    username: \"data-testid Username input field\",\n    password: \"data-testid Password input field\",\n    submit: \"data-testid Login button\",\n    skip: \"data-testid Skip change password button\"\n  },\n  Home: {\n    url: \"/\"\n  },\n  DataSource: {\n    name: \"data-testid Data source settings page name input field\",\n    delete: \"Data source settings page Delete button\",\n    readOnly: \"data-testid Data source settings page read only message\",\n    saveAndTest: \"data-testid Data source settings page Save and Test button\",\n    alert: \"data-testid Data source settings page Alert\"\n  },\n  DataSources: {\n    url: \"/datasources\",\n    dataSources: (dataSourceName) => `Data source list item ${dataSourceName}`\n  },\n  EditDataSource: {\n    url: (dataSourceUid) => `/datasources/edit/${dataSourceUid}`,\n    settings: \"Datasource settings page basic settings\"\n  },\n  AddDataSource: {\n    url: \"/datasources/new\",\n    /** @deprecated Use dataSourcePluginsV2 */\n    dataSourcePlugins: (pluginName) => `Data source plugin item ${pluginName}`,\n    dataSourcePluginsV2: (pluginName) => `Add new data source ${pluginName}`\n  },\n  ConfirmModal: {\n    delete: \"data-testid Confirm Modal Danger Button\"\n  },\n  AddDashboard: {\n    url: \"/dashboard/new\",\n    itemButton: (title) => `data-testid ${title}`,\n    addNewPanel: \"data-testid Add new panel\",\n    addNewRow: \"data-testid Add new row\",\n    addNewPanelLibrary: \"data-testid Add new panel from panel library\"\n  },\n  Dashboard: {\n    url: (uid) => `/d/${uid}`,\n    DashNav: {\n      /**\n       * @deprecated use navV2 from Grafana 8.3 instead\n       */\n      nav: \"Dashboard navigation\",\n      navV2: \"data-testid Dashboard navigation\",\n      publicDashboardTag: \"data-testid public dashboard tag\",\n      shareButton: \"data-testid share-button\",\n      scrollContainer: \"data-testid Dashboard canvas scroll container\",\n      newShareButton: {\n        container: \"data-testid new share button\",\n        shareLink: \"data-testid new share link-button\",\n        arrowMenu: \"data-testid new share button arrow menu\",\n        menu: {\n          container: \"data-testid new share button menu\",\n          shareInternally: \"data-testid new share button share internally\"\n        }\n      },\n      playlistControls: {\n        prev: \"data-testid playlist previous dashboard button\",\n        stop: \"data-testid playlist stop dashboard button\",\n        next: \"data-testid playlist next dashboard button\"\n      }\n    },\n    Controls: \"data-testid dashboard controls\",\n    SubMenu: {\n      submenu: \"Dashboard submenu\",\n      submenuItem: \"data-testid template variable\",\n      submenuItemLabels: (item) => `data-testid Dashboard template variables submenu Label ${item}`,\n      submenuItemValueDropDownValueLinkTexts: (item) => `data-testid Dashboard template variables Variable Value DropDown value link text ${item}`,\n      submenuItemValueDropDownDropDown: \"Variable options\",\n      submenuItemValueDropDownOptionTexts: (item) => `data-testid Dashboard template variables Variable Value DropDown option text ${item}`,\n      Annotations: {\n        annotationsWrapper: \"data-testid annotation-wrapper\",\n        annotationLabel: (label) => `data-testid Dashboard annotations submenu Label ${label}`,\n        annotationToggle: (label) => `data-testid Dashboard annotations submenu Toggle ${label}`\n      }\n    },\n    Settings: {\n      Actions: {\n        close: \"data-testid dashboard-settings-close\"\n      },\n      General: {\n        deleteDashBoard: \"data-testid Dashboard settings page delete dashboard button\",\n        sectionItems: (item) => `Dashboard settings section item ${item}`,\n        saveDashBoard: \"Dashboard settings aside actions Save button\",\n        saveAsDashBoard: \"Dashboard settings aside actions Save As button\",\n        /**\n         * @deprecated use components.TimeZonePicker.containerV2 from Grafana 8.3 instead\n         */\n        timezone: \"Time zone picker select container\",\n        title: \"Tab General\"\n      },\n      Annotations: {\n        List: {\n          /**\n           * @deprecated use addAnnotationCTAV2 from Grafana 8.3 instead\n           */\n          addAnnotationCTA: Components.CallToActionCard.button(\"Add annotation query\"),\n          addAnnotationCTAV2: Components.CallToActionCard.buttonV2(\"Add annotation query\"),\n          annotations: \"data-testid list-annotations\"\n        },\n        Settings: {\n          name: \"data-testid Annotations settings name input\"\n        },\n        NewAnnotation: {\n          panelFilterSelect: \"data-testid annotations-panel-filter\",\n          showInLabel: \"data-testid show-in-label\",\n          previewInDashboard: \"data-testid annotations-preview\",\n          delete: \"data-testid annotations-delete\",\n          apply: \"data-testid annotations-apply\",\n          enable: \"data-testid annotation-enable\",\n          hide: \"data-testid annotation-hide\"\n        }\n      },\n      Variables: {\n        List: {\n          /**\n           * @deprecated use addVariableCTAV2 from Grafana 8.3 instead\n           */\n          addVariableCTA: Components.CallToActionCard.button(\"Add variable\"),\n          addVariableCTAV2: Components.CallToActionCard.buttonV2(\"Add variable\"),\n          newButton: \"Variable editor New variable button\",\n          table: \"Variable editor Table\",\n          tableRowNameFields: (variableName) => `Variable editor Table Name field ${variableName}`,\n          tableRowDefinitionFields: (variableName) => `Variable editor Table Definition field ${variableName}`,\n          tableRowArrowUpButtons: (variableName) => `Variable editor Table ArrowUp button ${variableName}`,\n          tableRowArrowDownButtons: (variableName) => `Variable editor Table ArrowDown button ${variableName}`,\n          tableRowDuplicateButtons: (variableName) => `Variable editor Table Duplicate button ${variableName}`,\n          tableRowRemoveButtons: (variableName) => `Variable editor Table Remove button ${variableName}`\n        },\n        Edit: {\n          General: {\n            headerLink: \"Variable editor Header link\",\n            modeLabelNew: \"Variable editor Header mode New\",\n            /**\n             * @deprecated\n             */\n            modeLabelEdit: \"Variable editor Header mode Edit\",\n            generalNameInput: \"Variable editor Form Name field\",\n            generalNameInputV2: \"data-testid Variable editor Form Name field\",\n            generalTypeSelect: \"Variable editor Form Type select\",\n            generalTypeSelectV2: \"data-testid Variable editor Form Type select\",\n            generalLabelInput: \"Variable editor Form Label field\",\n            generalLabelInputV2: \"data-testid Variable editor Form Label field\",\n            generalHideSelect: \"Variable editor Form Hide select\",\n            generalHideSelectV2: \"data-testid Variable editor Form Hide select\",\n            selectionOptionsMultiSwitch: \"data-testid Variable editor Form Multi switch\",\n            selectionOptionsIncludeAllSwitch: \"data-testid Variable editor Form IncludeAll switch\",\n            selectionOptionsCustomAllInput: \"data-testid Variable editor Form IncludeAll field\",\n            previewOfValuesOption: \"data-testid Variable editor Preview of Values option\",\n            submitButton: \"data-testid Variable editor Run Query button\",\n            applyButton: \"data-testid Variable editor Apply button\"\n          },\n          QueryVariable: {\n            queryOptionsDataSourceSelect: Components.DataSourcePicker.inputV2,\n            queryOptionsRefreshSelect: \"Variable editor Form Query Refresh select\",\n            queryOptionsRefreshSelectV2: \"data-testid Variable editor Form Query Refresh select\",\n            queryOptionsRegExInput: \"Variable editor Form Query RegEx field\",\n            queryOptionsRegExInputV2: \"data-testid Variable editor Form Query RegEx field\",\n            queryOptionsSortSelect: \"Variable editor Form Query Sort select\",\n            queryOptionsSortSelectV2: \"data-testid Variable editor Form Query Sort select\",\n            queryOptionsQueryInput: \"data-testid Variable editor Form Default Variable Query Editor textarea\",\n            valueGroupsTagsEnabledSwitch: \"Variable editor Form Query UseTags switch\",\n            valueGroupsTagsTagsQueryInput: \"Variable editor Form Query TagsQuery field\",\n            valueGroupsTagsTagsValuesQueryInput: \"Variable editor Form Query TagsValuesQuery field\"\n          },\n          ConstantVariable: {\n            constantOptionsQueryInput: \"Variable editor Form Constant Query field\",\n            constantOptionsQueryInputV2: \"data-testid Variable editor Form Constant Query field\"\n          },\n          DatasourceVariable: {\n            datasourceSelect: \"data-testid datasource variable datasource type\"\n          },\n          TextBoxVariable: {\n            textBoxOptionsQueryInput: \"Variable editor Form TextBox Query field\",\n            textBoxOptionsQueryInputV2: \"data-testid Variable editor Form TextBox Query field\"\n          },\n          CustomVariable: {\n            customValueInput: \"data-testid custom-variable-input\"\n          },\n          IntervalVariable: {\n            intervalsValueInput: \"data-testid interval variable intervals input\",\n            autoEnabledCheckbox: \"data-testid interval variable auto value checkbox\",\n            stepCountIntervalSelect: \"data-testid interval variable step count input\",\n            minIntervalInput: \"data-testid interval variable mininum interval input\"\n          },\n          GroupByVariable: {\n            dataSourceSelect: Components.DataSourcePicker.inputV2,\n            infoText: \"data-testid group by variable info text\",\n            modeToggle: \"data-testid group by variable mode toggle\"\n          },\n          AdHocFiltersVariable: {\n            datasourceSelect: Components.DataSourcePicker.inputV2,\n            infoText: \"data-testid ad-hoc filters variable info text\",\n            modeToggle: \"data-testid ad-hoc filters variable mode toggle\"\n          }\n        }\n      }\n    },\n    Annotations: {\n      marker: \"data-testid annotation-marker\"\n    },\n    Rows: {\n      Repeated: {\n        ConfigSection: {\n          warningMessage: \"data-testid Repeated rows warning message\"\n        }\n      }\n    }\n  },\n  Dashboards: {\n    url: \"/dashboards\",\n    /**\n     * @deprecated use components.Search.dashboardItem from Grafana 8.3 instead\n     */\n    dashboards: (title) => `Dashboard search item ${title}`\n  },\n  SaveDashboardAsModal: {\n    newName: \"Save dashboard title field\",\n    save: \"Save dashboard button\"\n  },\n  SaveDashboardModal: {\n    save: \"Dashboard settings Save Dashboard Modal Save button\",\n    saveVariables: \"Dashboard settings Save Dashboard Modal Save variables checkbox\",\n    saveTimerange: \"Dashboard settings Save Dashboard Modal Save timerange checkbox\",\n    saveRefresh: \"Dashboard settings Save Dashboard Modal Save refresh checkbox\"\n  },\n  SharePanelModal: {\n    linkToRenderedImage: \"Link to rendered image\"\n  },\n  ShareDashboardModal: {\n    PublicDashboard: {\n      Tab: \"Tab Public dashboard\",\n      WillBePublicCheckbox: \"data-testid public dashboard will be public checkbox\",\n      LimitedDSCheckbox: \"data-testid public dashboard limited datasources checkbox\",\n      CostIncreaseCheckbox: \"data-testid public dashboard cost may increase checkbox\",\n      PauseSwitch: \"data-testid public dashboard pause switch\",\n      EnableAnnotationsSwitch: \"data-testid public dashboard on off switch for annotations\",\n      CreateButton: \"data-testid public dashboard create button\",\n      DeleteButton: \"data-testid public dashboard delete button\",\n      CopyUrlInput: \"data-testid public dashboard copy url input\",\n      CopyUrlButton: \"data-testid public dashboard copy url button\",\n      SettingsDropdown: \"data-testid public dashboard settings dropdown\",\n      TemplateVariablesWarningAlert: \"data-testid public dashboard disabled template variables alert\",\n      UnsupportedDataSourcesWarningAlert: \"data-testid public dashboard unsupported data sources alert\",\n      NoUpsertPermissionsWarningAlert: \"data-testid public dashboard no upsert permissions alert\",\n      EnableTimeRangeSwitch: \"data-testid public dashboard on off switch for time range\",\n      EmailSharingConfiguration: {\n        Container: \"data-testid email sharing config container\",\n        ShareType: \"data-testid public dashboard share type\",\n        EmailSharingInput: \"data-testid public dashboard email sharing input\",\n        EmailSharingInviteButton: \"data-testid public dashboard email sharing invite button\",\n        EmailSharingList: \"data-testid public dashboard email sharing list\",\n        DeleteEmail: \"data-testid public dashboard delete email button\",\n        ReshareLink: \"data-testid public dashboard reshare link button\"\n      }\n    },\n    PublicDashboardScene: {\n      Tab: \"Tab Public Dashboard\"\n    },\n    SnapshotScene: {\n      url: (key) => `/dashboard/snapshot/${key}`,\n      Tab: \"Tab Snapshot\",\n      PublishSnapshot: \"data-testid publish snapshot button\",\n      CopyUrlButton: \"data-testid snapshot copy url button\",\n      CopyUrlInput: \"data-testid snapshot copy url input\"\n    }\n  },\n  PublicDashboard: {\n    page: \"public-dashboard-page\",\n    NotAvailable: {\n      container: \"public-dashboard-not-available\",\n      title: \"public-dashboard-title\",\n      pausedDescription: \"public-dashboard-paused-description\"\n    },\n    footer: \"public-dashboard-footer\"\n  },\n  PublicDashboardScene: {\n    loadingPage: \"public-dashboard-scene-loading-page\",\n    page: \"public-dashboard-scene-page\",\n    controls: \"public-dashboard-controls\"\n  },\n  RequestViewAccess: {\n    form: \"request-view-access-form\",\n    recipientInput: \"request-view-access-recipient-input\",\n    submitButton: \"request-view-access-submit-button\"\n  },\n  PublicDashboardConfirmAccess: {\n    submitButton: \"data-testid confirm-access-submit-button\"\n  },\n  Explore: {\n    url: \"/explore\",\n    General: {\n      container: \"data-testid Explore\",\n      graph: \"Explore Graph\",\n      table: \"Explore Table\",\n      scrollView: \"data-testid explorer scroll view\"\n    },\n    QueryHistory: {\n      container: \"data-testid QueryHistory\"\n    }\n  },\n  SoloPanel: {\n    url: (page) => `/d-solo/${page}`\n  },\n  PluginsList: {\n    page: \"Plugins list page\",\n    list: \"Plugins list\",\n    listItem: \"Plugins list item\",\n    signatureErrorNotice: \"data-testid Unsigned plugins notice\"\n  },\n  PluginPage: {\n    page: \"Plugin page\",\n    signatureInfo: \"data-testid Plugin signature info\",\n    disabledInfo: \"data-testid Plugin disabled info\"\n  },\n  PlaylistForm: {\n    name: \"Playlist name\",\n    interval: \"Playlist interval\",\n    itemDelete: \"data-testid playlist-form-delete-item\"\n  },\n  BrowseDashboards: {\n    table: {\n      body: \"data-testid browse-dashboards-table\",\n      row: (name) => `data-testid browse dashboards row ${name}`,\n      checkbox: (uid) => `data-testid ${uid} checkbox`\n    },\n    NewFolderForm: {\n      form: \"data-testid new folder form\",\n      nameInput: \"data-testid new-folder-name-input\",\n      createButton: \"data-testid new-folder-create-button\"\n    }\n  },\n  Search: {\n    url: \"/?search=openn\",\n    FolderView: {\n      url: \"/?search=open&layout=folders\"\n    }\n  },\n  PublicDashboards: {\n    ListItem: {\n      linkButton: \"public-dashboard-link-button\",\n      configButton: \"public-dashboard-configuration-button\",\n      trashcanButton: \"public-dashboard-remove-button\",\n      pauseSwitch: \"data-testid public dashboard pause switch\"\n    }\n  },\n  UserListPage: {\n    tabs: {\n      allUsers: \"data-testid all-users-tab\",\n      orgUsers: \"data-testid org-users-tab\",\n      anonUserDevices: \"data-testid anon-user-devices-tab\",\n      publicDashboardsUsers: \"data-testid public-dashboards-users-tab\",\n      users: \"data-testid users-tab\"\n    },\n    org: {\n      url: \"/org/users\"\n    },\n    admin: {\n      url: \"/admin/users\"\n    },\n    publicDashboards: {\n      container: \"data-testid public-dashboards-users-list\"\n    },\n    UserListAdminPage: {\n      container: \"data-testid user-list-admin-page\"\n    },\n    UsersListPage: {\n      container: \"data-testid users-list-page\"\n    },\n    UserAnonListPage: {\n      container: \"data-testid user-anon-list-page\"\n    },\n    UsersListPublicDashboardsPage: {\n      container: \"data-testid users-list-public-dashboards-page\",\n      DashboardsListModal: {\n        listItem: (uid) => `data-testid dashboards-list-item-${uid}`\n      }\n    }\n  },\n  ProfilePage: {\n    url: \"/profile\"\n  }\n};\n\nexport { Pages };\n//# sourceMappingURL=pages.js.map\n","import { Components } from './components.js';\nexport { Components } from './components.js';\nimport { Pages } from './pages.js';\nexport { Pages } from './pages.js';\n\nconst selectors = {\n  pages: Pages,\n  components: Components\n};\n\nexport { selectors };\n//# sourceMappingURL=index.js.map\n","import uFuzzy from '@leeoniya/ufuzzy';\nimport { ALL_VARIABLE_VALUE, ALL_VARIABLE_TEXT } from '../constants.js';\n\nfunction getOptionSearcher(options, includeAll) {\n  const ufuzzy = new uFuzzy();\n  let allOptions = options;\n  const haystack = [];\n  const limit = 1e4;\n  if (includeAll) {\n    allOptions = [{ value: ALL_VARIABLE_VALUE, label: ALL_VARIABLE_TEXT }, ...allOptions];\n  }\n  return (search) => {\n    if (search === \"\") {\n      if (allOptions.length > limit) {\n        return allOptions.slice(0, limit);\n      } else {\n        return allOptions;\n      }\n    }\n    if (haystack.length === 0) {\n      for (let i = 0; i < allOptions.length; i++) {\n        haystack.push(allOptions[i].label);\n      }\n    }\n    const idxs = ufuzzy.filter(haystack, search);\n    const filteredOptions = [];\n    if (idxs) {\n      for (let i = 0; i < idxs.length; i++) {\n        filteredOptions.push(allOptions[idxs[i]]);\n        if (filteredOptions.length > limit) {\n          return filteredOptions;\n        }\n      }\n      return filteredOptions;\n    }\n    if (allOptions.length > limit) {\n      return allOptions.slice(0, limit);\n    }\n    return allOptions;\n  };\n}\n\nexport { getOptionSearcher };\n//# sourceMappingURL=getOptionSearcher.js.map\n","import { isArray } from 'lodash';\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { Select, MultiSelect, useTheme2, getSelectStyles, useStyles2, Checkbox } from '@grafana/ui';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { cx, css } from '@emotion/css';\nimport { getOptionSearcher } from './getOptionSearcher.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nconst filterNoOp = () => true;\nfunction toSelectableValue(value, label) {\n  return {\n    value,\n    label: label != null ? label : String(value)\n  };\n}\nfunction VariableValueSelect({ model }) {\n  const { value, text, key, options, includeAll, isReadOnly } = model.useState();\n  const [inputValue, setInputValue] = useState(\"\");\n  const [hasCustomValue, setHasCustomValue] = useState(false);\n  const selectValue = toSelectableValue(value, String(text));\n  const optionSearcher = useMemo(() => getOptionSearcher(options, includeAll), [options, includeAll]);\n  const onInputChange = (value2, { action }) => {\n    if (action === \"input-change\") {\n      setInputValue(value2);\n      if (model.onSearchChange) {\n        model.onSearchChange(value2);\n      }\n      return value2;\n    }\n    return value2;\n  };\n  const filteredOptions = optionSearcher(inputValue);\n  const onOpenMenu = () => {\n    if (hasCustomValue) {\n      setInputValue(String(text));\n    }\n  };\n  const onCloseMenu = () => {\n    setInputValue(\"\");\n  };\n  return /* @__PURE__ */ React.createElement(Select, {\n    id: key,\n    isValidNewOption: (inputValue2) => inputValue2.trim().length > 0,\n    placeholder: \"Select value\",\n    width: \"auto\",\n    disabled: isReadOnly,\n    value: selectValue,\n    inputValue,\n    allowCustomValue: true,\n    virtualized: true,\n    filterOption: filterNoOp,\n    tabSelectsValue: false,\n    onInputChange,\n    onOpenMenu,\n    onCloseMenu,\n    options: filteredOptions,\n    \"data-testid\": selectors.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${value}`),\n    onChange: (newValue) => {\n      model.changeValueTo(newValue.value, newValue.label);\n      if (hasCustomValue !== newValue.__isNew__) {\n        setHasCustomValue(newValue.__isNew__);\n      }\n    }\n  });\n}\nfunction VariableValueSelectMulti({ model }) {\n  const { value, options, key, maxVisibleValues, noValueOnClear, includeAll, isReadOnly } = model.useState();\n  const arrayValue = useMemo(() => isArray(value) ? value : [value], [value]);\n  const [uncommittedValue, setUncommittedValue] = useState(arrayValue);\n  const [inputValue, setInputValue] = useState(\"\");\n  const optionSearcher = useMemo(() => getOptionSearcher(options, includeAll), [options, includeAll]);\n  useEffect(() => {\n    setUncommittedValue(arrayValue);\n  }, [arrayValue]);\n  const onInputChange = (value2, { action }) => {\n    if (action === \"input-change\") {\n      setInputValue(value2);\n      if (model.onSearchChange) {\n        model.onSearchChange(value2);\n      }\n      return value2;\n    }\n    if (action === \"input-blur\") {\n      setInputValue(\"\");\n      return \"\";\n    }\n    return inputValue;\n  };\n  const placeholder = options.length > 0 ? \"Select value\" : \"\";\n  const filteredOptions = optionSearcher(inputValue);\n  return /* @__PURE__ */ React.createElement(MultiSelect, {\n    id: key,\n    placeholder,\n    width: \"auto\",\n    inputValue,\n    disabled: isReadOnly,\n    value: uncommittedValue,\n    noMultiValueWrap: true,\n    maxVisibleValues: maxVisibleValues != null ? maxVisibleValues : 5,\n    tabSelectsValue: false,\n    virtualized: true,\n    allowCustomValue: true,\n    options: filteredOptions,\n    closeMenuOnSelect: false,\n    components: { Option: OptionWithCheckbox },\n    isClearable: true,\n    hideSelectedOptions: false,\n    onInputChange,\n    onBlur: () => {\n      model.changeValueTo(uncommittedValue);\n    },\n    filterOption: filterNoOp,\n    \"data-testid\": selectors.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${uncommittedValue}`),\n    onChange: (newValue, action) => {\n      if (action.action === \"clear\" && noValueOnClear) {\n        model.changeValueTo([]);\n      }\n      setUncommittedValue(newValue.map((x) => x.value));\n    }\n  });\n}\nconst OptionWithCheckbox = ({\n  children,\n  data,\n  innerProps,\n  innerRef,\n  isFocused,\n  isSelected,\n  renderOptionLabel\n}) => {\n  var _b;\n  const _a = innerProps, rest = __objRest(_a, [\"onMouseMove\", \"onMouseOver\"]);\n  const theme = useTheme2();\n  const selectStyles = getSelectStyles(theme);\n  const optionStyles = useStyles2(getOptionStyles);\n  return /* @__PURE__ */ React.createElement(\"div\", __spreadProps(__spreadValues({\n    ref: innerRef,\n    className: cx(selectStyles.option, isFocused && selectStyles.optionFocused)\n  }, rest), {\n    \"data-testid\": selectors.components.Select.option,\n    title: data.title\n  }), /* @__PURE__ */ React.createElement(\"div\", {\n    className: optionStyles.checkbox\n  }, /* @__PURE__ */ React.createElement(Checkbox, {\n    value: isSelected\n  })), /* @__PURE__ */ React.createElement(\"div\", {\n    className: selectStyles.optionBody,\n    \"data-testid\": selectors.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(\n      (_b = data.label) != null ? _b : String(data.value)\n    )\n  }, /* @__PURE__ */ React.createElement(\"span\", null, children)));\n};\nOptionWithCheckbox.displayName = \"SelectMenuOptions\";\nconst getOptionStyles = (theme) => ({\n  checkbox: css({\n    marginRight: theme.spacing(2)\n  })\n});\nfunction renderSelectForVariable(model) {\n  if (model.state.isMulti) {\n    return /* @__PURE__ */ React.createElement(VariableValueSelectMulti, {\n      model\n    });\n  } else {\n    return /* @__PURE__ */ React.createElement(VariableValueSelect, {\n      model\n    });\n  }\n}\n\nexport { OptionWithCheckbox, VariableValueSelect, VariableValueSelectMulti, renderSelectForVariable, toSelectableValue };\n//# sourceMappingURL=VariableValueSelect.js.map\n","import { toUrlCommaDelimitedString, unescapeUrlDelimiters } from '../utils.js';\n\nclass GroupByVariableUrlSyncHandler {\n  constructor(_sceneObject) {\n    this._sceneObject = _sceneObject;\n  }\n  getKey() {\n    return `var-${this._sceneObject.state.name}`;\n  }\n  getKeys() {\n    if (this._sceneObject.state.skipUrlSync) {\n      return [];\n    }\n    return [this.getKey()];\n  }\n  getUrlState() {\n    if (this._sceneObject.state.skipUrlSync) {\n      return {};\n    }\n    return { [this.getKey()]: toUrlValues(this._sceneObject.state.value, this._sceneObject.state.text) };\n  }\n  updateFromUrl(values) {\n    let urlValue = values[this.getKey()];\n    if (urlValue != null) {\n      if (!this._sceneObject.isActive) {\n        this._sceneObject.skipNextValidation = true;\n      }\n      const { values: values2, texts } = fromUrlValues(urlValue);\n      this._sceneObject.changeValueTo(values2, texts);\n    }\n  }\n}\nfunction toUrlValues(values, texts) {\n  values = Array.isArray(values) ? values : [values];\n  texts = Array.isArray(texts) ? texts : [texts];\n  return values.map((value, idx) => {\n    if (value === void 0 || value === null) {\n      return \"\";\n    }\n    value = String(value);\n    let text = texts[idx];\n    text = text === void 0 || text === null ? value : String(text);\n    return toUrlCommaDelimitedString(value, text);\n  });\n}\nfunction fromUrlValues(urlValues) {\n  urlValues = Array.isArray(urlValues) ? urlValues : [urlValues];\n  return urlValues.reduce(\n    (acc, urlValue) => {\n      const [value, label] = (urlValue != null ? urlValue : \"\").split(\",\");\n      acc.values.push(unescapeUrlDelimiters(value));\n      acc.texts.push(unescapeUrlDelimiters(label != null ? label : value));\n      return acc;\n    },\n    {\n      values: [],\n      texts: []\n    }\n  );\n}\n\nexport { GroupByVariableUrlSyncHandler };\n//# sourceMappingURL=GroupByVariableUrlSyncHandler.js.map\n","import { isFiltersRequestEnricher } from '../core/types.js';\n\nfunction getEnrichedFiltersRequest(sourceRunner) {\n  const root = sourceRunner.getRoot();\n  if (isFiltersRequestEnricher(root)) {\n    return root.enrichFiltersRequest(sourceRunner);\n  }\n  return null;\n}\n\nexport { getEnrichedFiltersRequest };\n//# sourceMappingURL=getEnrichedFiltersRequest.js.map\n","import React, { useMemo, useState, useEffect } from 'react';\nimport { allActiveGroupByVariables } from './findActiveGroupByVariablesByUid.js';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { MultiValueVariable } from '../variants/MultiValueVariable.js';\nimport { map, of, from, mergeMap, take, lastValueFrom } from 'rxjs';\nimport { getDataSource } from '../../utils/getDataSource.js';\nimport { MultiSelect } from '@grafana/ui';\nimport { isArray } from 'lodash';\nimport { getQueriesForVariables } from '../utils.js';\nimport { OptionWithCheckbox } from '../components/VariableValueSelect.js';\nimport { GroupByVariableUrlSyncHandler } from './GroupByVariableUrlSyncHandler.js';\nimport { getOptionSearcher } from '../components/getOptionSearcher.js';\nimport { getEnrichedFiltersRequest } from '../getEnrichedFiltersRequest.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass GroupByVariable extends MultiValueVariable {\n  constructor(initialState) {\n    super(__spreadProps(__spreadValues({\n      isMulti: true,\n      name: \"\",\n      value: [],\n      text: [],\n      options: [],\n      datasource: null,\n      baseFilters: [],\n      applyMode: \"auto\",\n      layout: \"horizontal\",\n      type: \"groupby\"\n    }, initialState), {\n      noValueOnClear: true\n    }));\n    this.isLazy = true;\n    this._urlSync = new GroupByVariableUrlSyncHandler(this);\n    this._getKeys = async (ds) => {\n      var _a, _b, _c;\n      const override = await ((_b = (_a = this.state).getTagKeysProvider) == null ? void 0 : _b.call(_a, this, null));\n      if (override && override.replace) {\n        return override.values;\n      }\n      if (this.state.defaultOptions) {\n        return this.state.defaultOptions.concat((_c = override == null ? void 0 : override.values) != null ? _c : []);\n      }\n      if (!ds.getTagKeys) {\n        return [];\n      }\n      const queries = getQueriesForVariables(this);\n      const otherFilters = this.state.baseFilters || [];\n      const timeRange = sceneGraph.getTimeRange(this).state.value;\n      let keys = await ds.getTagKeys(__spreadValues({ filters: otherFilters, queries, timeRange }, getEnrichedFiltersRequest(this)));\n      if (override) {\n        keys = keys.concat(override.values);\n      }\n      const tagKeyRegexFilter = this.state.tagKeyRegexFilter;\n      if (tagKeyRegexFilter) {\n        keys = keys.filter((f) => f.text.match(tagKeyRegexFilter));\n      }\n      return keys;\n    };\n    this.addActivationHandler(() => {\n      allActiveGroupByVariables.add(this);\n      return () => allActiveGroupByVariables.delete(this);\n    });\n  }\n  validateAndUpdate() {\n    return this.getValueOptions({}).pipe(\n      map((options) => {\n        this._updateValueGivenNewOptions(options);\n        return {};\n      })\n    );\n  }\n  _updateValueGivenNewOptions(options) {\n    const { value: currentValue, text: currentText } = this.state;\n    const stateUpdate = {\n      options,\n      loading: false,\n      value: currentValue != null ? currentValue : [],\n      text: currentText != null ? currentText : []\n    };\n    this.setState(stateUpdate);\n  }\n  getValueOptions(args) {\n    if (this.state.defaultOptions) {\n      return of(\n        this.state.defaultOptions.map((o) => ({\n          label: o.text,\n          value: String(o.value)\n        }))\n      );\n    }\n    this.setState({ loading: true, error: null });\n    return from(\n      getDataSource(this.state.datasource, {\n        __sceneObject: { text: \"__sceneObject\", value: this }\n      })\n    ).pipe(\n      mergeMap((ds) => {\n        return from(this._getKeys(ds)).pipe(\n          take(1),\n          mergeMap((data) => {\n            const a = data.map((i) => {\n              return {\n                label: i.text,\n                value: i.value ? String(i.value) : i.text\n              };\n            });\n            return of(a);\n          })\n        );\n      })\n    );\n  }\n  getDefaultMultiState(options) {\n    return { value: [], text: [] };\n  }\n}\nGroupByVariable.Component = GroupByVariableRenderer;\nfunction GroupByVariableRenderer({ model }) {\n  const { value, text, key, maxVisibleValues, noValueOnClear, options, includeAll } = model.useState();\n  const values = useMemo(() => {\n    const arrayValue = isArray(value) ? value : [value];\n    const arrayText = isArray(text) ? text : [text];\n    return arrayValue.map((value2, idx) => {\n      var _a;\n      return {\n        value: value2,\n        label: String((_a = arrayText[idx]) != null ? _a : value2)\n      };\n    });\n  }, [value, text]);\n  const [isFetchingOptions, setIsFetchingOptions] = useState(false);\n  const [isOptionsOpen, setIsOptionsOpen] = useState(false);\n  const [inputValue, setInputValue] = useState(\"\");\n  const [uncommittedValue, setUncommittedValue] = useState(values);\n  const optionSearcher = useMemo(() => getOptionSearcher(options, includeAll), [options, includeAll]);\n  useEffect(() => {\n    setUncommittedValue(values);\n  }, [values]);\n  const onInputChange = (value2, { action }) => {\n    if (action === \"input-change\") {\n      setInputValue(value2);\n      if (model.onSearchChange) {\n        model.onSearchChange(value2);\n      }\n      return value2;\n    }\n    if (action === \"input-blur\") {\n      setInputValue(\"\");\n      return \"\";\n    }\n    return inputValue;\n  };\n  const filteredOptions = optionSearcher(inputValue);\n  return /* @__PURE__ */ React.createElement(MultiSelect, {\n    \"data-testid\": `GroupBySelect-${key}`,\n    id: key,\n    placeholder: \"Select value\",\n    width: \"auto\",\n    inputValue,\n    value: uncommittedValue,\n    noMultiValueWrap: true,\n    maxVisibleValues: maxVisibleValues != null ? maxVisibleValues : 5,\n    tabSelectsValue: false,\n    virtualized: true,\n    options: filteredOptions,\n    filterOption: filterNoOp,\n    closeMenuOnSelect: false,\n    isOpen: isOptionsOpen,\n    isClearable: true,\n    hideSelectedOptions: false,\n    isLoading: isFetchingOptions,\n    components: { Option: OptionWithCheckbox },\n    onInputChange,\n    onBlur: () => {\n      model.changeValueTo(\n        uncommittedValue.map((x) => x.value),\n        uncommittedValue.map((x) => x.label)\n      );\n    },\n    onChange: (newValue, action) => {\n      if (action.action === \"clear\" && noValueOnClear) {\n        model.changeValueTo([]);\n      }\n      setUncommittedValue(newValue);\n    },\n    onOpenMenu: async () => {\n      setIsFetchingOptions(true);\n      await lastValueFrom(model.validateAndUpdate());\n      setIsFetchingOptions(false);\n      setIsOptionsOpen(true);\n    },\n    onCloseMenu: () => {\n      setIsOptionsOpen(false);\n    }\n  });\n}\nconst filterNoOp = () => true;\n\nexport { GroupByVariable, GroupByVariableRenderer };\n//# sourceMappingURL=GroupByVariable.js.map\n","import { Tooltip, Icon } from '@grafana/ui';\nimport React from 'react';\n\nfunction LoadingIndicator(props) {\n  return /* @__PURE__ */ React.createElement(Tooltip, {\n    content: \"Cancel query\"\n  }, /* @__PURE__ */ React.createElement(Icon, {\n    className: \"spin-clockwise\",\n    name: \"sync\",\n    size: \"xs\",\n    role: \"button\",\n    onMouseDown: (e) => {\n      props.onCancel(e);\n    }\n  }));\n}\n\nexport { LoadingIndicator };\n//# sourceMappingURL=LoadingIndicator.js.map\n","import React from 'react';\nimport { useStyles2, useTheme2, Tooltip, Icon, IconButton } from '@grafana/ui';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { css } from '@emotion/css';\nimport { LoadingIndicator } from './LoadingIndicator.js';\n\nfunction ControlsLabel(props) {\n  const styles = useStyles2(getStyles);\n  const theme = useTheme2();\n  const isVertical = props.layout === \"vertical\";\n  const loadingIndicator = Boolean(props.isLoading) ? /* @__PURE__ */ React.createElement(\"div\", {\n    style: { marginLeft: theme.spacing(1), marginTop: \"-1px\" },\n    \"aria-label\": selectors.components.LoadingIndicator.icon\n  }, /* @__PURE__ */ React.createElement(LoadingIndicator, {\n    onCancel: (e) => {\n      var _a;\n      e.preventDefault();\n      e.stopPropagation();\n      (_a = props.onCancel) == null ? void 0 : _a.call(props);\n    }\n  })) : null;\n  let errorIndicator = null;\n  if (props.error) {\n    errorIndicator = /* @__PURE__ */ React.createElement(Tooltip, {\n      content: props.error,\n      placement: \"bottom\"\n    }, /* @__PURE__ */ React.createElement(Icon, {\n      className: styles.errorIcon,\n      name: \"exclamation-triangle\"\n    }));\n  }\n  let descriptionIndicator = null;\n  if (props.description) {\n    descriptionIndicator = /* @__PURE__ */ React.createElement(Tooltip, {\n      content: props.description,\n      placement: isVertical ? \"top\" : \"bottom\"\n    }, /* @__PURE__ */ React.createElement(Icon, {\n      className: styles.normalIcon,\n      name: \"info-circle\"\n    }));\n  }\n  const testId = typeof props.label === \"string\" ? selectors.pages.Dashboard.SubMenu.submenuItemLabels(props.label) : \"\";\n  let labelElement;\n  if (isVertical) {\n    labelElement = /* @__PURE__ */ React.createElement(\"label\", {\n      className: styles.verticalLabel,\n      \"data-testid\": testId,\n      htmlFor: props.htmlFor\n    }, props.label, descriptionIndicator, errorIndicator, props.icon && /* @__PURE__ */ React.createElement(Icon, {\n      name: props.icon,\n      className: styles.normalIcon\n    }), loadingIndicator, props.onRemove && /* @__PURE__ */ React.createElement(IconButton, {\n      variant: \"secondary\",\n      size: \"xs\",\n      name: \"times\",\n      onClick: props.onRemove,\n      tooltip: \"Remove\"\n    }));\n  } else {\n    labelElement = /* @__PURE__ */ React.createElement(\"label\", {\n      className: styles.horizontalLabel,\n      \"data-testid\": testId,\n      htmlFor: props.htmlFor\n    }, errorIndicator, props.icon && /* @__PURE__ */ React.createElement(Icon, {\n      name: props.icon,\n      className: styles.normalIcon\n    }), props.label, descriptionIndicator, loadingIndicator);\n  }\n  return labelElement;\n}\nconst getStyles = (theme) => ({\n  horizontalLabel: css({\n    background: theme.isDark ? theme.colors.background.primary : theme.colors.background.secondary,\n    display: `flex`,\n    alignItems: \"center\",\n    padding: theme.spacing(0, 1),\n    fontWeight: theme.typography.fontWeightMedium,\n    fontSize: theme.typography.bodySmall.fontSize,\n    height: theme.spacing(theme.components.height.md),\n    lineHeight: theme.spacing(theme.components.height.md),\n    borderRadius: theme.shape.borderRadius(1),\n    border: `1px solid ${theme.components.input.borderColor}`,\n    position: \"relative\",\n    right: -1,\n    whiteSpace: \"nowrap\",\n    gap: theme.spacing(0.5)\n  }),\n  verticalLabel: css({\n    display: `flex`,\n    alignItems: \"center\",\n    fontWeight: theme.typography.fontWeightMedium,\n    fontSize: theme.typography.bodySmall.fontSize,\n    lineHeight: theme.typography.bodySmall.lineHeight,\n    whiteSpace: \"nowrap\",\n    marginBottom: theme.spacing(0.5),\n    gap: theme.spacing(1)\n  }),\n  errorIcon: css({\n    color: theme.colors.error.text\n  }),\n  normalIcon: css({\n    color: theme.colors.text.secondary\n  })\n});\n\nexport { ControlsLabel };\n//# sourceMappingURL=ControlsLabel.js.map\n","import React, { useState, useMemo } from 'react';\nimport { useStyles2, Select, Field, Button } from '@grafana/ui';\nimport { cx, css } from '@emotion/css';\nimport { ControlsLabel } from '../../utils/ControlsLabel.js';\nimport { getOptionSearcher } from '../components/getOptionSearcher.js';\n\nfunction selectableValueToVariableValueOption(value) {\n  var _a;\n  return {\n    label: (_a = value.label) != null ? _a : String(value.value),\n    value: value.value\n  };\n}\nfunction keyLabelToOption(key, label) {\n  return key !== \"\" ? {\n    value: key,\n    label: label || key\n  } : null;\n}\nconst filterNoOp = () => true;\nfunction AdHocFilterRenderer({ filter, model }) {\n  var _a, _b;\n  const styles = useStyles2(getStyles);\n  const [keys, setKeys] = useState([]);\n  const [values, setValues] = useState([]);\n  const [isKeysLoading, setIsKeysLoading] = useState(false);\n  const [isValuesLoading, setIsValuesLoading] = useState(false);\n  const [isKeysOpen, setIsKeysOpen] = useState(false);\n  const [isValuesOpen, setIsValuesOpen] = useState(false);\n  const [valueInputValue, setValueInputValue] = useState(\"\");\n  const [valueHasCustomValue, setValueHasCustomValue] = useState(false);\n  const keyValue = keyLabelToOption(filter.key, filter.keyLabel);\n  const valueValue = keyLabelToOption(filter.value, filter.valueLabel);\n  const optionSearcher = useMemo(\n    () => getOptionSearcher(values.map(selectableValueToVariableValueOption), void 0),\n    [values]\n  );\n  const onValueInputChange = (value, { action }) => {\n    if (action === \"input-change\") {\n      setValueInputValue(value);\n    }\n    return value;\n  };\n  const filteredValueOptions = optionSearcher(valueInputValue);\n  const valueSelect = /* @__PURE__ */ React.createElement(Select, {\n    virtualized: true,\n    allowCustomValue: true,\n    isValidNewOption: (inputValue) => inputValue.trim().length > 0,\n    allowCreateWhileLoading: true,\n    formatCreateLabel: (inputValue) => `Use custom value: ${inputValue}`,\n    disabled: model.state.readOnly,\n    className: cx(styles.value, isKeysOpen ? styles.widthWhenOpen : void 0),\n    width: \"auto\",\n    value: valueValue,\n    filterOption: filterNoOp,\n    placeholder: \"Select value\",\n    options: filteredValueOptions,\n    inputValue: valueInputValue,\n    onInputChange: onValueInputChange,\n    onChange: (v) => {\n      model._updateFilter(filter, \"value\", v);\n      if (valueHasCustomValue !== v.__isNew__) {\n        setValueHasCustomValue(v.__isNew__);\n      }\n    },\n    isOpen: isValuesOpen && !isValuesLoading,\n    isLoading: isValuesLoading,\n    autoFocus: filter.key !== \"\" && filter.value === \"\",\n    openMenuOnFocus: true,\n    onOpenMenu: async () => {\n      var _a2;\n      setIsValuesLoading(true);\n      setIsValuesOpen(true);\n      const values2 = await model._getValuesFor(filter);\n      setIsValuesLoading(false);\n      setValues(values2);\n      if (valueHasCustomValue) {\n        setValueInputValue((_a2 = valueValue == null ? void 0 : valueValue.label) != null ? _a2 : \"\");\n      }\n    },\n    onCloseMenu: () => {\n      setIsValuesOpen(false);\n      setValueInputValue(\"\");\n    }\n  });\n  const keySelect = /* @__PURE__ */ React.createElement(Select, {\n    key: `${isValuesLoading ? \"loading\" : \"loaded\"}`,\n    disabled: model.state.readOnly,\n    className: cx(styles.key, isKeysOpen ? styles.widthWhenOpen : void 0),\n    width: \"auto\",\n    value: keyValue,\n    placeholder: \"Select label\",\n    options: keys,\n    onChange: (v) => model._updateFilter(filter, \"key\", v),\n    autoFocus: filter.key === \"\",\n    isOpen: isKeysOpen && !isKeysLoading,\n    isLoading: isKeysLoading,\n    onOpenMenu: async () => {\n      setIsKeysOpen(true);\n      setIsKeysLoading(true);\n      const keys2 = await model._getKeys(filter.key);\n      setIsKeysLoading(false);\n      setKeys(keys2);\n    },\n    onCloseMenu: () => {\n      setIsKeysOpen(false);\n    },\n    onBlur: () => {\n      if (filter.key === \"\") {\n        model._removeFilter(filter);\n      }\n    },\n    openMenuOnFocus: true\n  });\n  if (model.state.layout === \"vertical\") {\n    if (filter.key) {\n      const label = /* @__PURE__ */ React.createElement(ControlsLabel, {\n        layout: \"vertical\",\n        label: (_a = filter.key) != null ? _a : \"\",\n        onRemove: () => model._removeFilter(filter)\n      });\n      return /* @__PURE__ */ React.createElement(Field, {\n        label,\n        \"data-testid\": `AdHocFilter-${filter.key}`,\n        className: styles.field\n      }, /* @__PURE__ */ React.createElement(\"div\", {\n        className: styles.wrapper\n      }, /* @__PURE__ */ React.createElement(Select, {\n        className: styles.operator,\n        value: filter.operator,\n        disabled: model.state.readOnly,\n        options: model._getOperators(),\n        width: \"auto\",\n        onChange: (v) => model._updateFilter(filter, \"operator\", v)\n      }), valueSelect));\n    } else {\n      return /* @__PURE__ */ React.createElement(Field, {\n        label: \"Select label\",\n        \"data-testid\": `AdHocFilter-${filter.key}`,\n        className: styles.field\n      }, keySelect);\n    }\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.wrapper,\n    \"data-testid\": `AdHocFilter-${filter.key}`\n  }, keySelect, /* @__PURE__ */ React.createElement(Select, {\n    className: styles.operator,\n    value: filter.operator,\n    disabled: model.state.readOnly,\n    options: model._getOperators(),\n    width: \"auto\",\n    onChange: (v) => model._updateFilter(filter, \"operator\", v)\n  }), valueSelect, /* @__PURE__ */ React.createElement(Button, {\n    variant: \"secondary\",\n    \"aria-label\": \"Remove filter\",\n    title: \"Remove filter\",\n    className: styles.removeButton,\n    icon: \"times\",\n    \"data-testid\": `AdHocFilter-remove-${(_b = filter.key) != null ? _b : \"\"}`,\n    onClick: () => model._removeFilter(filter)\n  }));\n}\nconst getStyles = (theme) => ({\n  field: css({\n    marginBottom: 0\n  }),\n  wrapper: css({\n    display: \"flex\",\n    \"> *\": {\n      \"&:not(:first-child)\": {\n        marginLeft: -1\n      },\n      \"&:first-child\": {\n        borderTopRightRadius: 0,\n        borderBottomRightRadius: 0\n      },\n      \"&:last-child\": {\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0\n      },\n      \"&:not(:first-child):not(:last-child)\": {\n        borderRadius: 0\n      },\n      position: \"relative\",\n      zIndex: 0,\n      \"&:hover\": {\n        zIndex: 1\n      },\n      \"&:focus-within\": {\n        zIndex: 2\n      }\n    }\n  }),\n  widthWhenOpen: css({\n    minWidth: theme.spacing(16)\n  }),\n  value: css({\n    flexShrink: 1\n  }),\n  key: css({\n    minWidth: \"90px\",\n    flexShrink: 1\n  }),\n  operator: css({\n    flexShrink: 0\n  }),\n  removeButton: css({\n    paddingLeft: theme.spacing(3 / 2),\n    paddingRight: theme.spacing(3 / 2),\n    borderLeft: \"none\",\n    width: theme.spacing(3),\n    marginRight: theme.spacing(1),\n    boxSizing: \"border-box\",\n    position: \"relative\",\n    left: \"1px\"\n  })\n});\n\nexport { AdHocFilterRenderer };\n//# sourceMappingURL=AdHocFilterRenderer.js.map\n","import React from 'react';\nimport { AdHocFilterRenderer } from './AdHocFilterRenderer.js';\nimport { Button } from '@grafana/ui';\n\nfunction AdHocFilterBuilder({ model, addFilterButtonText }) {\n  const { _wip } = model.useState();\n  if (!_wip) {\n    return /* @__PURE__ */ React.createElement(Button, {\n      variant: \"secondary\",\n      icon: \"plus\",\n      title: \"Add filter\",\n      \"aria-label\": \"Add filter\",\n      \"data-testid\": `AdHocFilter-add`,\n      onClick: () => model._addWip()\n    }, addFilterButtonText);\n  }\n  return /* @__PURE__ */ React.createElement(AdHocFilterRenderer, {\n    filter: _wip,\n    model\n  });\n}\n\nexport { AdHocFilterBuilder };\n//# sourceMappingURL=AdHocFilterBuilder.js.map\n","import { isFilterComplete } from './AdHocFiltersVariable.js';\nimport { escapeUrlPipeDelimiters, toUrlCommaDelimitedString, unescapeUrlDelimiters } from '../utils.js';\n\nclass AdHocFiltersVariableUrlSyncHandler {\n  constructor(_variable) {\n    this._variable = _variable;\n  }\n  getKey() {\n    return `var-${this._variable.state.name}`;\n  }\n  getKeys() {\n    return [this.getKey()];\n  }\n  getUrlState() {\n    const filters = this._variable.state.filters;\n    if (filters.length === 0) {\n      return { [this.getKey()]: [\"\"] };\n    }\n    const value = filters.filter(isFilterComplete).map((filter) => toArray(filter).map(escapeUrlPipeDelimiters).join(\"|\"));\n    return { [this.getKey()]: value };\n  }\n  updateFromUrl(values) {\n    const urlValue = values[this.getKey()];\n    if (urlValue == null) {\n      return;\n    }\n    const filters = deserializeUrlToFilters(urlValue);\n    this._variable.setState({ filters });\n  }\n}\nfunction deserializeUrlToFilters(value) {\n  if (Array.isArray(value)) {\n    const values = value;\n    return values.map(toFilter).filter(isFilter);\n  }\n  const filter = toFilter(value);\n  return filter === null ? [] : [filter];\n}\nfunction toArray(filter) {\n  return [\n    toUrlCommaDelimitedString(filter.key, filter.keyLabel),\n    filter.operator,\n    toUrlCommaDelimitedString(filter.value, filter.valueLabel)\n  ];\n}\nfunction toFilter(urlValue) {\n  if (typeof urlValue !== \"string\" || urlValue.length === 0) {\n    return null;\n  }\n  const [key, keyLabel, operator, _operatorLabel, value, valueLabel] = urlValue.split(\"|\").reduce((acc, v) => {\n    const [key2, label] = v.split(\",\");\n    acc.push(key2, label != null ? label : key2);\n    return acc;\n  }, []).map(unescapeUrlDelimiters);\n  return {\n    key,\n    keyLabel,\n    operator,\n    value,\n    valueLabel,\n    condition: \"\"\n  };\n}\nfunction isFilter(filter) {\n  return filter !== null && typeof filter.key === \"string\" && typeof filter.value === \"string\";\n}\n\nexport { AdHocFiltersVariableUrlSyncHandler };\n//# sourceMappingURL=AdHocFiltersVariableUrlSyncHandler.js.map\n","import React from 'react';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { SceneVariableValueChangedEvent } from '../types.js';\nimport { getQueriesForVariables, renderPrometheusLabelFilters } from '../utils.js';\nimport { patchGetAdhocFilters } from './patchGetAdhocFilters.js';\nimport { useStyles2 } from '@grafana/ui';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { AdHocFilterBuilder } from './AdHocFilterBuilder.js';\nimport { AdHocFilterRenderer } from './AdHocFilterRenderer.js';\nimport { getDataSourceSrv } from '@grafana/runtime';\nimport { AdHocFiltersVariableUrlSyncHandler } from './AdHocFiltersVariableUrlSyncHandler.js';\nimport { css } from '@emotion/css';\nimport { getEnrichedFiltersRequest } from '../getEnrichedFiltersRequest.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass AdHocFiltersVariable extends SceneObjectBase {\n  constructor(state) {\n    var _a, _b;\n    super(__spreadValues({\n      type: \"adhoc\",\n      name: (_a = state.name) != null ? _a : \"Filters\",\n      filters: [],\n      datasource: null,\n      applyMode: \"auto\",\n      filterExpression: (_b = state.filterExpression) != null ? _b : renderExpression(state.expressionBuilder, state.filters)\n    }, state));\n    this._scopedVars = { __sceneObject: { value: this } };\n    this._dataSourceSrv = getDataSourceSrv();\n    this._urlSync = new AdHocFiltersVariableUrlSyncHandler(this);\n    if (this.state.applyMode === \"auto\") {\n      patchGetAdhocFilters(this);\n    }\n  }\n  setState(update) {\n    let filterExpressionChanged = false;\n    if (update.filters && update.filters !== this.state.filters && !update.filterExpression) {\n      update.filterExpression = renderExpression(this.state.expressionBuilder, update.filters);\n      filterExpressionChanged = update.filterExpression !== this.state.filterExpression;\n    }\n    super.setState(update);\n    if (filterExpressionChanged) {\n      this.publishEvent(new SceneVariableValueChangedEvent(this), true);\n    }\n  }\n  getValue() {\n    return this.state.filterExpression;\n  }\n  _updateFilter(filter, prop, { value, label }) {\n    if (value == null) {\n      return;\n    }\n    const { filters, _wip } = this.state;\n    const propLabelKey = `${prop}Label`;\n    if (filter === _wip) {\n      if (prop === \"value\") {\n        this.setState({ filters: [...filters, __spreadProps(__spreadValues({}, _wip), { [prop]: value, [propLabelKey]: label })], _wip: void 0 });\n      } else {\n        this.setState({ _wip: __spreadProps(__spreadValues({}, filter), { [prop]: value, [propLabelKey]: label }) });\n      }\n      return;\n    }\n    const updatedFilters = this.state.filters.map((f) => {\n      if (f === filter) {\n        const updatedFilter = __spreadProps(__spreadValues({}, f), { [prop]: value, [propLabelKey]: label });\n        if (prop === \"key\" && filter[prop] !== value) {\n          updatedFilter.value = \"\";\n          updatedFilter.valueLabel = \"\";\n        }\n        return updatedFilter;\n      }\n      return f;\n    });\n    this.setState({ filters: updatedFilters });\n  }\n  _removeFilter(filter) {\n    if (filter === this.state._wip) {\n      this.setState({ _wip: void 0 });\n      return;\n    }\n    this.setState({ filters: this.state.filters.filter((f) => f !== filter) });\n  }\n  async _getKeys(currentKey) {\n    var _a, _b, _c;\n    const override = await ((_b = (_a = this.state).getTagKeysProvider) == null ? void 0 : _b.call(_a, this, currentKey));\n    if (override && override.replace) {\n      return override.values.map(toSelectableValue);\n    }\n    if (this.state.defaultKeys) {\n      return this.state.defaultKeys.map(toSelectableValue);\n    }\n    const ds = await this._dataSourceSrv.get(this.state.datasource, this._scopedVars);\n    if (!ds || !ds.getTagKeys) {\n      return [];\n    }\n    const otherFilters = this.state.filters.filter((f) => f.key !== currentKey).concat((_c = this.state.baseFilters) != null ? _c : []);\n    const timeRange = sceneGraph.getTimeRange(this).state.value;\n    const queries = this.state.useQueriesAsFilterForOptions ? getQueriesForVariables(this) : void 0;\n    let keys = await ds.getTagKeys(__spreadValues({ filters: otherFilters, queries, timeRange }, getEnrichedFiltersRequest(this)));\n    if (override) {\n      keys = keys.concat(override.values);\n    }\n    const tagKeyRegexFilter = this.state.tagKeyRegexFilter;\n    if (tagKeyRegexFilter) {\n      keys = keys.filter((f) => f.text.match(tagKeyRegexFilter));\n    }\n    return keys.map(toSelectableValue);\n  }\n  async _getValuesFor(filter) {\n    var _a, _b, _c;\n    const override = await ((_b = (_a = this.state).getTagValuesProvider) == null ? void 0 : _b.call(_a, this, filter));\n    if (override && override.replace) {\n      return handleOptionGroups(override.values);\n    }\n    const ds = await this._dataSourceSrv.get(this.state.datasource, this._scopedVars);\n    if (!ds || !ds.getTagValues) {\n      return [];\n    }\n    const otherFilters = this.state.filters.filter((f) => f.key !== filter.key).concat((_c = this.state.baseFilters) != null ? _c : []);\n    const timeRange = sceneGraph.getTimeRange(this).state.value;\n    const queries = this.state.useQueriesAsFilterForOptions ? getQueriesForVariables(this) : void 0;\n    let values = await ds.getTagValues(__spreadValues({\n      key: filter.key,\n      filters: otherFilters,\n      timeRange,\n      queries\n    }, getEnrichedFiltersRequest(this)));\n    if (override) {\n      values = values.concat(override.values);\n    }\n    return handleOptionGroups(values);\n  }\n  _addWip() {\n    this.setState({\n      _wip: { key: \"\", keyLabel: \"\", value: \"\", valueLabel: \"\", operator: \"=\", condition: \"\" }\n    });\n  }\n  _getOperators() {\n    return [\"=\", \"!=\", \"<\", \">\", \"=~\", \"!~\"].map((value) => ({\n      label: value,\n      value\n    }));\n  }\n}\nAdHocFiltersVariable.Component = AdHocFiltersVariableRenderer;\nfunction renderExpression(builder, filters) {\n  return (builder != null ? builder : renderPrometheusLabelFilters)(filters != null ? filters : []);\n}\nfunction AdHocFiltersVariableRenderer({ model }) {\n  const { filters, readOnly, addFilterButtonText } = model.useState();\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.wrapper\n  }, filters.map((filter, index) => /* @__PURE__ */ React.createElement(React.Fragment, {\n    key: index\n  }, /* @__PURE__ */ React.createElement(AdHocFilterRenderer, {\n    filter,\n    model\n  }))), !readOnly && /* @__PURE__ */ React.createElement(AdHocFilterBuilder, {\n    model,\n    key: \"'builder\",\n    addFilterButtonText\n  }));\n}\nconst getStyles = (theme) => ({\n  wrapper: css({\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    alignItems: \"flex-end\",\n    columnGap: theme.spacing(2),\n    rowGap: theme.spacing(1)\n  }),\n  filterIcon: css({\n    color: theme.colors.text.secondary,\n    paddingRight: theme.spacing(0.5)\n  })\n});\nfunction toSelectableValue({ text, value }) {\n  return {\n    label: text,\n    value: String(value != null ? value : text)\n  };\n}\nfunction isFilterComplete(filter) {\n  return filter.key !== \"\" && filter.operator !== \"\" && filter.value !== \"\";\n}\nfunction handleOptionGroups(values) {\n  const result = [];\n  const groupedResults = /* @__PURE__ */ new Map();\n  for (const value of values) {\n    const groupLabel = value.group;\n    if (groupLabel) {\n      let group = groupedResults.get(groupLabel);\n      if (!group) {\n        group = [];\n        groupedResults.set(groupLabel, group);\n        result.push({ label: groupLabel, options: group });\n      }\n      group.push(toSelectableValue(value));\n    } else {\n      result.push(toSelectableValue(value));\n    }\n  }\n  return result;\n}\n\nexport { AdHocFiltersVariable, AdHocFiltersVariableRenderer, isFilterComplete, toSelectableValue };\n//# sourceMappingURL=AdHocFiltersVariable.js.map\n","import { merge, mergeAll, filter, map, finalize } from 'rxjs';\n\nclass DataLayersMerger {\n  constructor() {\n    this._resultsMap = /* @__PURE__ */ new Map();\n    this._prevLayers = [];\n  }\n  getMergedStream(layers) {\n    if (areDifferentLayers(layers, this._prevLayers)) {\n      this._resultsMap = /* @__PURE__ */ new Map();\n      this._prevLayers = layers;\n    }\n    const resultStreams = layers.map((l) => l.getResultsStream());\n    const deactivationHandlers = [];\n    for (const layer of layers) {\n      deactivationHandlers.push(layer.activate());\n    }\n    return merge(resultStreams).pipe(\n      mergeAll(),\n      filter((v) => {\n        return this._resultsMap.get(v.origin.state.key) !== v;\n      }),\n      map((v) => {\n        this._resultsMap.set(v.origin.state.key, v);\n        return this._resultsMap.values();\n      }),\n      finalize(() => {\n        deactivationHandlers.forEach((handler) => handler());\n      })\n    );\n  }\n}\nfunction areDifferentLayers(a, b) {\n  if (a.length !== b.length) {\n    return true;\n  }\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport { DataLayersMerger };\n//# sourceMappingURL=DataLayersMerger.js.map\n","import { isEqual, cloneDeep } from 'lodash';\nimport { ReplaySubject, forkJoin } from 'rxjs';\nimport { LoadingState } from '@grafana/schema';\nimport { preProcessPanelData, DataTopic, DataFrameView, rangeUtil } from '@grafana/data';\nimport { getRunRequest, toDataQueryError, isExpressionReference } from '@grafana/runtime';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\nimport { getDataSource } from '../utils/getDataSource.js';\nimport { VariableDependencyConfig } from '../variables/VariableDependencyConfig.js';\nimport { writeSceneLog } from '../utils/writeSceneLog.js';\nimport { VariableValueRecorder } from '../variables/VariableValueRecorder.js';\nimport { emptyPanelData } from '../core/SceneDataNode.js';\nimport { getClosest } from '../core/sceneGraph/utils.js';\nimport { isExtraQueryProvider } from './ExtraQueryProvider.js';\nimport { extraQueryProcessingOperator, passthroughProcessor } from './extraQueryProcessingOperator.js';\nimport { filterAnnotations } from './layers/annotations/filterAnnotations.js';\nimport { getEnrichedDataRequest } from './getEnrichedDataRequest.js';\nimport { findActiveAdHocFilterVariableByUid } from '../variables/adhoc/patchGetAdhocFilters.js';\nimport { registerQueryWithController } from './registerQueryWithController.js';\nimport { findActiveGroupByVariablesByUid } from '../variables/groupby/findActiveGroupByVariablesByUid.js';\nimport { GroupByVariable } from '../variables/groupby/GroupByVariable.js';\nimport { AdHocFiltersVariable, isFilterComplete } from '../variables/adhoc/AdHocFiltersVariable.js';\nimport { DataLayersMerger } from './DataLayersMerger.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nlet counter = 100;\nfunction getNextRequestId() {\n  return \"SQR\" + counter++;\n}\nclass SceneQueryRunner extends SceneObjectBase {\n  constructor(initialState) {\n    super(initialState);\n    this._dataLayersMerger = new DataLayersMerger();\n    this._variableValueRecorder = new VariableValueRecorder();\n    this._results = new ReplaySubject(1);\n    this._scopedVars = { __sceneObject: { value: this, text: \"__sceneObject\" } };\n    this._variableDependency = new VariableDependencyConfig(this, {\n      statePaths: [\"queries\", \"datasource\"],\n      onVariableUpdateCompleted: this.onVariableUpdatesCompleted.bind(this),\n      onAnyVariableChanged: this.onAnyVariableChanged.bind(this)\n    });\n    this.onDataReceived = (data) => {\n      const preProcessedData = preProcessPanelData(data, this.state.data);\n      this._resultAnnotations = data.annotations;\n      const dataWithLayersApplied = this._combineDataLayers(preProcessedData);\n      let hasFetchedData = this.state._hasFetchedData;\n      if (!hasFetchedData && preProcessedData.state !== LoadingState.Loading) {\n        hasFetchedData = true;\n      }\n      this.setState({ data: dataWithLayersApplied, _hasFetchedData: hasFetchedData });\n      this._results.next({ origin: this, data: dataWithLayersApplied });\n    };\n    this.addActivationHandler(() => this._onActivate());\n  }\n  getResultsStream() {\n    return this._results;\n  }\n  _onActivate() {\n    const timeRange = sceneGraph.getTimeRange(this);\n    const providers = this.getClosestExtraQueryProviders();\n    for (const provider of providers) {\n      this._subs.add(\n        provider.subscribeToState((n, p) => {\n          if (provider.shouldRerun(p, n)) {\n            this.runQueries();\n          }\n        })\n      );\n    }\n    this.subscribeToTimeRangeChanges(timeRange);\n    if (this.shouldRunQueriesOnActivate()) {\n      this.runQueries();\n    }\n    if (!this._dataLayersSub) {\n      this._handleDataLayers();\n    }\n    return () => this._onDeactivate();\n  }\n  _handleDataLayers() {\n    const dataLayers = sceneGraph.getDataLayers(this);\n    if (dataLayers.length === 0) {\n      return;\n    }\n    this._dataLayersSub = this._dataLayersMerger.getMergedStream(dataLayers).subscribe(this._onLayersReceived.bind(this));\n  }\n  _onLayersReceived(results) {\n    var _a, _b, _c, _d, _e;\n    const timeRange = sceneGraph.getTimeRange(this);\n    const { dataLayerFilter } = this.state;\n    let annotations = [];\n    let alertStates = [];\n    let alertState;\n    for (const result of results) {\n      for (let frame of result.data.series) {\n        if (((_a = frame.meta) == null ? void 0 : _a.dataTopic) === DataTopic.Annotations) {\n          annotations = annotations.concat(frame);\n        }\n        if (((_b = frame.meta) == null ? void 0 : _b.dataTopic) === DataTopic.AlertStates) {\n          alertStates = alertStates.concat(frame);\n        }\n      }\n    }\n    if (dataLayerFilter == null ? void 0 : dataLayerFilter.panelId) {\n      if (annotations.length > 0) {\n        annotations = filterAnnotations(annotations, dataLayerFilter);\n      }\n      if (alertStates.length > 0) {\n        for (const frame of alertStates) {\n          const frameView = new DataFrameView(frame);\n          for (const row of frameView) {\n            if (row.panelId === dataLayerFilter.panelId) {\n              alertState = row;\n              break;\n            }\n          }\n        }\n      }\n    }\n    if (allFramesEmpty(annotations) && allFramesEmpty(this._layerAnnotations) && isEqual(alertState, (_c = this.state.data) == null ? void 0 : _c.alertState)) {\n      return;\n    }\n    this._layerAnnotations = annotations;\n    const baseStateUpdate = this.state.data ? this.state.data : __spreadProps(__spreadValues({}, emptyPanelData), { timeRange: timeRange.state.value });\n    this.setState({\n      data: __spreadProps(__spreadValues({}, baseStateUpdate), {\n        annotations: [...(_d = this._resultAnnotations) != null ? _d : [], ...annotations],\n        alertState: alertState != null ? alertState : (_e = this.state.data) == null ? void 0 : _e.alertState\n      })\n    });\n  }\n  onVariableUpdatesCompleted() {\n    this.runQueries();\n  }\n  onAnyVariableChanged(variable) {\n    if (this._adhocFiltersVar === variable || this._groupByVar === variable) {\n      return;\n    }\n    if (variable instanceof AdHocFiltersVariable && this._isRelevantAutoVariable(variable)) {\n      this.runQueries();\n    }\n    if (variable instanceof GroupByVariable && this._isRelevantAutoVariable(variable)) {\n      this.runQueries();\n    }\n  }\n  _isRelevantAutoVariable(variable) {\n    var _a, _b;\n    const datasource = (_a = this.state.datasource) != null ? _a : findFirstDatasource(this.state.queries);\n    return variable.state.applyMode === \"auto\" && (datasource == null ? void 0 : datasource.uid) === ((_b = variable.state.datasource) == null ? void 0 : _b.uid);\n  }\n  shouldRunQueriesOnActivate() {\n    if (this._variableValueRecorder.hasDependenciesChanged(this)) {\n      writeSceneLog(\n        \"SceneQueryRunner\",\n        \"Variable dependency changed while inactive, shouldRunQueriesOnActivate returns true\"\n      );\n      return true;\n    }\n    if (!this.state.data) {\n      return true;\n    }\n    if (this._isDataTimeRangeStale(this.state.data)) {\n      return true;\n    }\n    return false;\n  }\n  _isDataTimeRangeStale(data) {\n    const timeRange = sceneGraph.getTimeRange(this);\n    const stateTimeRange = timeRange.state.value;\n    const dataTimeRange = data.timeRange;\n    if (stateTimeRange.from.unix() === dataTimeRange.from.unix() && stateTimeRange.to.unix() === dataTimeRange.to.unix()) {\n      return false;\n    }\n    writeSceneLog(\"SceneQueryRunner\", \"Data time range is stale\");\n    return true;\n  }\n  _onDeactivate() {\n    var _a;\n    if (this._querySub) {\n      this._querySub.unsubscribe();\n      this._querySub = void 0;\n    }\n    if (this._dataLayersSub) {\n      this._dataLayersSub.unsubscribe();\n      this._dataLayersSub = void 0;\n    }\n    (_a = this._timeSub) == null ? void 0 : _a.unsubscribe();\n    this._timeSub = void 0;\n    this._timeSubRange = void 0;\n    this._adhocFiltersVar = void 0;\n    this._groupByVar = void 0;\n    this._variableValueRecorder.recordCurrentDependencyValuesForSceneObject(this);\n  }\n  setContainerWidth(width) {\n    if (!this._containerWidth && width > 0) {\n      this._containerWidth = width;\n      if (this.state.maxDataPointsFromWidth && !this.state.maxDataPoints) {\n        setTimeout(() => {\n          if (this.isActive && !this.state._hasFetchedData) {\n            this.runQueries();\n          }\n        }, 0);\n      }\n    } else {\n      if (width > 0) {\n        this._containerWidth = width;\n      }\n    }\n  }\n  isDataReadyToDisplay() {\n    return Boolean(this.state._hasFetchedData);\n  }\n  subscribeToTimeRangeChanges(timeRange) {\n    if (this._timeSubRange === timeRange) {\n      return;\n    }\n    if (this._timeSub) {\n      this._timeSub.unsubscribe();\n    }\n    this._timeSubRange = timeRange;\n    this._timeSub = timeRange.subscribeToState(() => {\n      this.runWithTimeRange(timeRange);\n    });\n  }\n  runQueries() {\n    const timeRange = sceneGraph.getTimeRange(this);\n    this.subscribeToTimeRangeChanges(timeRange);\n    this.runWithTimeRange(timeRange);\n  }\n  getMaxDataPoints() {\n    var _a;\n    if (this.state.maxDataPoints) {\n      return this.state.maxDataPoints;\n    }\n    return this.state.maxDataPointsFromWidth ? (_a = this._containerWidth) != null ? _a : 500 : 500;\n  }\n  cancelQuery() {\n    var _a;\n    (_a = this._querySub) == null ? void 0 : _a.unsubscribe();\n    if (this._dataLayersSub) {\n      this._dataLayersSub.unsubscribe();\n      this._dataLayersSub = void 0;\n    }\n    this.setState({\n      data: __spreadProps(__spreadValues({}, this.state.data), { state: LoadingState.Done })\n    });\n  }\n  async runWithTimeRange(timeRange) {\n    var _a, _b;\n    if (!this.state.maxDataPoints && this.state.maxDataPointsFromWidth && !this._containerWidth) {\n      return;\n    }\n    if (!this._dataLayersSub) {\n      this._handleDataLayers();\n    }\n    (_a = this._querySub) == null ? void 0 : _a.unsubscribe();\n    if (this._variableDependency.hasDependencyInLoadingState()) {\n      writeSceneLog(\"SceneQueryRunner\", \"Variable dependency is in loading state, skipping query execution\");\n      this.setState({ data: __spreadProps(__spreadValues({}, this.state.data), { state: LoadingState.Loading }) });\n      return;\n    }\n    const { queries } = this.state;\n    if (!(queries == null ? void 0 : queries.length)) {\n      this._setNoDataState();\n      return;\n    }\n    try {\n      const datasource = (_b = this.state.datasource) != null ? _b : findFirstDatasource(queries);\n      const ds = await getDataSource(datasource, this._scopedVars);\n      this.findAndSubscribeToAdHocFilters(datasource == null ? void 0 : datasource.uid);\n      const runRequest = getRunRequest();\n      const { primary, secondaries, processors } = this.prepareRequests(timeRange, ds);\n      writeSceneLog(\"SceneQueryRunner\", \"Starting runRequest\", this.state.key);\n      let stream = runRequest(ds, primary);\n      if (secondaries.length > 0) {\n        const secondaryStreams = secondaries.map((r) => runRequest(ds, r));\n        const op = extraQueryProcessingOperator(processors);\n        stream = forkJoin([stream, ...secondaryStreams]).pipe(op);\n      }\n      stream = stream.pipe(\n        registerQueryWithController({\n          type: \"data\",\n          request: primary,\n          origin: this,\n          cancel: () => this.cancelQuery()\n        })\n      );\n      this._querySub = stream.subscribe(this.onDataReceived);\n    } catch (err) {\n      console.error(\"PanelQueryRunner Error\", err);\n      this.onDataReceived(__spreadProps(__spreadValues(__spreadValues({}, emptyPanelData), this.state.data), {\n        state: LoadingState.Error,\n        errors: [toDataQueryError(err)]\n      }));\n    }\n  }\n  clone(withState) {\n    var _a;\n    const clone = super.clone(withState);\n    if (this._resultAnnotations) {\n      clone[\"_resultAnnotations\"] = this._resultAnnotations.map((frame) => __spreadValues({}, frame));\n    }\n    if (this._layerAnnotations) {\n      clone[\"_layerAnnotations\"] = this._layerAnnotations.map((frame) => __spreadValues({}, frame));\n    }\n    clone[\"_variableValueRecorder\"] = this._variableValueRecorder.cloneAndRecordCurrentValuesForSceneObject(this);\n    clone[\"_containerWidth\"] = this._containerWidth;\n    clone[\"_results\"].next({ origin: this, data: (_a = this.state.data) != null ? _a : emptyPanelData });\n    return clone;\n  }\n  prepareRequests(timeRange, ds) {\n    var _a;\n    const { minInterval, queries } = this.state;\n    let request = __spreadValues({\n      app: \"scenes\",\n      requestId: getNextRequestId(),\n      timezone: timeRange.getTimeZone(),\n      range: timeRange.state.value,\n      interval: \"1s\",\n      intervalMs: 1e3,\n      targets: cloneDeep(queries),\n      maxDataPoints: this.getMaxDataPoints(),\n      scopedVars: this._scopedVars,\n      startTime: Date.now(),\n      liveStreaming: this.state.liveStreaming,\n      rangeRaw: {\n        from: timeRange.state.from,\n        to: timeRange.state.to\n      },\n      cacheTimeout: this.state.cacheTimeout,\n      queryCachingTTL: this.state.queryCachingTTL\n    }, getEnrichedDataRequest(this));\n    if (this._adhocFiltersVar) {\n      request.filters = this._adhocFiltersVar.state.filters.filter(isFilterComplete);\n    }\n    if (this._groupByVar) {\n      request.groupByKeys = this._groupByVar.state.value;\n    }\n    request.targets = request.targets.map((query) => {\n      var _a2;\n      if (!query.datasource || query.datasource.uid !== ds.uid && !((_a2 = ds.meta) == null ? void 0 : _a2.mixed) && isExpressionReference && !isExpressionReference(query.datasource)) {\n        query.datasource = ds.getRef();\n      }\n      return query;\n    });\n    const lowerIntervalLimit = minInterval ? minInterval : ds.interval;\n    const norm = rangeUtil.calculateInterval(timeRange.state.value, request.maxDataPoints, lowerIntervalLimit);\n    request.scopedVars = Object.assign({}, request.scopedVars, {\n      __interval: { text: norm.interval, value: norm.interval },\n      __interval_ms: { text: norm.intervalMs.toString(), value: norm.intervalMs }\n    });\n    request.interval = norm.interval;\n    request.intervalMs = norm.intervalMs;\n    const primaryTimeRange = timeRange.state.value;\n    let secondaryRequests = [];\n    let secondaryProcessors = /* @__PURE__ */ new Map();\n    for (const provider of (_a = this.getClosestExtraQueryProviders()) != null ? _a : []) {\n      for (const { req, processor } of provider.getExtraQueries(request)) {\n        const requestId = getNextRequestId();\n        secondaryRequests.push(__spreadProps(__spreadValues({}, req), { requestId }));\n        secondaryProcessors.set(requestId, processor != null ? processor : passthroughProcessor);\n      }\n    }\n    request.range = primaryTimeRange;\n    return { primary: request, secondaries: secondaryRequests, processors: secondaryProcessors };\n  }\n  _combineDataLayers(data) {\n    if (this._layerAnnotations && this._layerAnnotations.length > 0) {\n      data.annotations = (data.annotations || []).concat(this._layerAnnotations);\n    }\n    if (this.state.data && this.state.data.alertState) {\n      data.alertState = this.state.data.alertState;\n    }\n    return data;\n  }\n  _setNoDataState() {\n    if (this.state.data !== emptyPanelData) {\n      this.setState({ data: emptyPanelData });\n    }\n  }\n  getClosestExtraQueryProviders() {\n    const found = /* @__PURE__ */ new Map();\n    if (!this.parent) {\n      return [];\n    }\n    getClosest(this.parent, (s) => {\n      if (isExtraQueryProvider(s) && !found.has(s.constructor)) {\n        found.set(s.constructor, s);\n      }\n      s.forEachChild((child) => {\n        if (isExtraQueryProvider(child) && !found.has(child.constructor)) {\n          found.set(child.constructor, child);\n        }\n      });\n      return null;\n    });\n    return Array.from(found.values());\n  }\n  findAndSubscribeToAdHocFilters(uid) {\n    const filtersVar = findActiveAdHocFilterVariableByUid(uid);\n    if (this._adhocFiltersVar !== filtersVar) {\n      this._adhocFiltersVar = filtersVar;\n      this._updateExplicitVariableDependencies();\n    }\n    const groupByVar = findActiveGroupByVariablesByUid(uid);\n    if (this._groupByVar !== groupByVar) {\n      this._groupByVar = groupByVar;\n      this._updateExplicitVariableDependencies();\n    }\n  }\n  _updateExplicitVariableDependencies() {\n    const explicitDependencies = [];\n    if (this._adhocFiltersVar) {\n      explicitDependencies.push(this._adhocFiltersVar.state.name);\n    }\n    if (this._groupByVar) {\n      explicitDependencies.push(this._groupByVar.state.name);\n    }\n    this._variableDependency.setVariableNames(explicitDependencies);\n  }\n}\nfunction findFirstDatasource(targets) {\n  var _a, _b;\n  return (_b = (_a = targets.find((t) => t.datasource !== null)) == null ? void 0 : _a.datasource) != null ? _b : void 0;\n}\nfunction allFramesEmpty(frames) {\n  if (!frames) {\n    return true;\n  }\n  for (let i = 0; i < frames.length; i++) {\n    if (frames[i].length > 0) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport { SceneQueryRunner, findFirstDatasource, getNextRequestId };\n//# sourceMappingURL=SceneQueryRunner.js.map\n","import { isEqual } from 'lodash';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\nimport { SceneQueryRunner } from '../querying/SceneQueryRunner.js';\n\nfunction isVariableValueEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n  return isEqual(a, b);\n}\nfunction safeStringifyValue(value) {\n  const getCircularReplacer = () => {\n    const seen = /* @__PURE__ */ new WeakSet();\n    return (_, value2) => {\n      if (typeof value2 === \"object\" && value2 !== null) {\n        if (seen.has(value2)) {\n          return;\n        }\n        seen.add(value2);\n      }\n      return value2;\n    };\n  };\n  try {\n    return JSON.stringify(value, getCircularReplacer());\n  } catch (error) {\n    console.error(error);\n  }\n  return \"\";\n}\nfunction renderPrometheusLabelFilters(filters) {\n  return filters.map((filter) => renderFilter(filter)).join(\",\");\n}\nfunction renderFilter(filter) {\n  let value = \"\";\n  if (filter.operator === \"=~\" || filter.operator === \"!~\\xA8\") {\n    value = escapeLabelValueInRegexSelector(filter.value);\n  } else {\n    value = escapeLabelValueInExactSelector(filter.value);\n  }\n  return `${filter.key}${filter.operator}\"${value}\"`;\n}\nfunction escapeLabelValueInExactSelector(labelValue) {\n  return labelValue.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\n/g, \"\\\\n\").replace(/\"/g, '\\\\\"');\n}\nfunction escapeLabelValueInRegexSelector(labelValue) {\n  return escapeLabelValueInExactSelector(escapeLokiRegexp(labelValue));\n}\nconst RE2_METACHARACTERS = /[*+?()|\\\\.\\[\\]{}^$]/g;\nfunction escapeLokiRegexp(value) {\n  return value.replace(RE2_METACHARACTERS, \"\\\\$&\");\n}\nfunction getQueriesForVariables(sourceObject) {\n  const runners = sceneGraph.findAllObjects(\n    sourceObject.getRoot(),\n    (o) => o instanceof SceneQueryRunner\n  );\n  const applicableRunners = filterOutInactiveRunnerDuplicates(runners).filter((r) => {\n    var _a, _b;\n    return ((_a = r.state.datasource) == null ? void 0 : _a.uid) === ((_b = sourceObject.state.datasource) == null ? void 0 : _b.uid);\n  });\n  if (applicableRunners.length === 0) {\n    return [];\n  }\n  const result = [];\n  applicableRunners.forEach((r) => {\n    result.push(...r.state.queries);\n  });\n  return result;\n}\nfunction filterOutInactiveRunnerDuplicates(runners) {\n  const groupedItems = {};\n  for (const item of runners) {\n    if (item.state.key) {\n      if (!(item.state.key in groupedItems)) {\n        groupedItems[item.state.key] = [];\n      }\n      groupedItems[item.state.key].push(item);\n    }\n  }\n  return Object.values(groupedItems).flatMap((group) => {\n    const activeItems = group.filter((item) => item.isActive);\n    if (activeItems.length === 0 && group.length === 1) {\n      return group;\n    }\n    return activeItems;\n  });\n}\nfunction escapeUrlPipeDelimiters(value) {\n  if (value === null || value === void 0) {\n    return \"\";\n  }\n  return value = /\\|/g[Symbol.replace](value, \"__gfp__\");\n}\nfunction escapeUrlCommaDelimiters(value) {\n  if (value === null || value === void 0) {\n    return \"\";\n  }\n  return /,/g[Symbol.replace](value, \"__gfc__\");\n}\nfunction unescapeUrlDelimiters(value) {\n  if (value === null || value === void 0) {\n    return \"\";\n  }\n  value = /__gfp__/g[Symbol.replace](value, \"|\");\n  value = /__gfc__/g[Symbol.replace](value, \",\");\n  return value;\n}\nfunction toUrlCommaDelimitedString(key, label) {\n  if (!label || key === label) {\n    return escapeUrlCommaDelimiters(key);\n  }\n  return [key, label].map(escapeUrlCommaDelimiters).join(\",\");\n}\n\nexport { escapeLabelValueInExactSelector, escapeLabelValueInRegexSelector, escapeUrlCommaDelimiters, escapeUrlPipeDelimiters, getQueriesForVariables, isVariableValueEqual, renderPrometheusLabelFilters, safeStringifyValue, toUrlCommaDelimitedString, unescapeUrlDelimiters };\n//# sourceMappingURL=utils.js.map\n","const defaultAnnotationTarget = {\n  tags: []\n};\nconst defaultAnnotationPanelFilter = {\n  exclude: false,\n  ids: []\n};\nconst defaultAnnotationContainer = {\n  list: []\n};\nconst defaultAnnotationQuery = {\n  builtIn: 0,\n  enable: true,\n  hide: false\n};\nconst defaultVariableModel = {\n  includeAll: false,\n  multi: false,\n  options: [],\n  skipUrlSync: false\n};\nvar VariableRefresh = /* @__PURE__ */ ((VariableRefresh2) => {\n  VariableRefresh2[VariableRefresh2[\"never\"] = 0] = \"never\";\n  VariableRefresh2[VariableRefresh2[\"onDashboardLoad\"] = 1] = \"onDashboardLoad\";\n  VariableRefresh2[VariableRefresh2[\"onTimeRangeChanged\"] = 2] = \"onTimeRangeChanged\";\n  return VariableRefresh2;\n})(VariableRefresh || {});\nvar VariableSort = /* @__PURE__ */ ((VariableSort2) => {\n  VariableSort2[VariableSort2[\"alphabeticalAsc\"] = 1] = \"alphabeticalAsc\";\n  VariableSort2[VariableSort2[\"alphabeticalCaseInsensitiveAsc\"] = 5] = \"alphabeticalCaseInsensitiveAsc\";\n  VariableSort2[VariableSort2[\"alphabeticalCaseInsensitiveDesc\"] = 6] = \"alphabeticalCaseInsensitiveDesc\";\n  VariableSort2[VariableSort2[\"alphabeticalDesc\"] = 2] = \"alphabeticalDesc\";\n  VariableSort2[VariableSort2[\"disabled\"] = 0] = \"disabled\";\n  VariableSort2[VariableSort2[\"naturalAsc\"] = 7] = \"naturalAsc\";\n  VariableSort2[VariableSort2[\"naturalDesc\"] = 8] = \"naturalDesc\";\n  VariableSort2[VariableSort2[\"numericalAsc\"] = 3] = \"numericalAsc\";\n  VariableSort2[VariableSort2[\"numericalDesc\"] = 4] = \"numericalDesc\";\n  return VariableSort2;\n})(VariableSort || {});\nconst defaultDashboardLink = {\n  asDropdown: false,\n  includeVars: false,\n  keepTime: false,\n  tags: [],\n  targetBlank: false\n};\nvar FieldColorModeId = /* @__PURE__ */ ((FieldColorModeId2) => {\n  FieldColorModeId2[\"ContinuousBlPu\"] = \"continuous-BlPu\";\n  FieldColorModeId2[\"ContinuousBlYlRd\"] = \"continuous-BlYlRd\";\n  FieldColorModeId2[\"ContinuousBlues\"] = \"continuous-blues\";\n  FieldColorModeId2[\"ContinuousGrYlRd\"] = \"continuous-GrYlRd\";\n  FieldColorModeId2[\"ContinuousGreens\"] = \"continuous-greens\";\n  FieldColorModeId2[\"ContinuousPurples\"] = \"continuous-purples\";\n  FieldColorModeId2[\"ContinuousRdYlGr\"] = \"continuous-RdYlGr\";\n  FieldColorModeId2[\"ContinuousReds\"] = \"continuous-reds\";\n  FieldColorModeId2[\"ContinuousYlBl\"] = \"continuous-YlBl\";\n  FieldColorModeId2[\"ContinuousYlRd\"] = \"continuous-YlRd\";\n  FieldColorModeId2[\"Fixed\"] = \"fixed\";\n  FieldColorModeId2[\"PaletteClassic\"] = \"palette-classic\";\n  FieldColorModeId2[\"PaletteClassicByName\"] = \"palette-classic-by-name\";\n  FieldColorModeId2[\"Shades\"] = \"shades\";\n  FieldColorModeId2[\"Thresholds\"] = \"thresholds\";\n  return FieldColorModeId2;\n})(FieldColorModeId || {});\nconst defaultGridPos = {\n  h: 9,\n  w: 12,\n  x: 0,\n  y: 0\n};\nvar ThresholdsMode = /* @__PURE__ */ ((ThresholdsMode2) => {\n  ThresholdsMode2[\"Absolute\"] = \"absolute\";\n  ThresholdsMode2[\"Percentage\"] = \"percentage\";\n  return ThresholdsMode2;\n})(ThresholdsMode || {});\nconst defaultThresholdsConfig = {\n  steps: []\n};\nvar MappingType = /* @__PURE__ */ ((MappingType2) => {\n  MappingType2[\"RangeToText\"] = \"range\";\n  MappingType2[\"RegexToText\"] = \"regex\";\n  MappingType2[\"SpecialValue\"] = \"special\";\n  MappingType2[\"ValueToText\"] = \"value\";\n  return MappingType2;\n})(MappingType || {});\nvar SpecialValueMatch = /* @__PURE__ */ ((SpecialValueMatch2) => {\n  SpecialValueMatch2[\"Empty\"] = \"empty\";\n  SpecialValueMatch2[\"False\"] = \"false\";\n  SpecialValueMatch2[\"NaN\"] = \"nan\";\n  SpecialValueMatch2[\"Null\"] = \"null\";\n  SpecialValueMatch2[\"NullAndNan\"] = \"null+nan\";\n  SpecialValueMatch2[\"True\"] = \"true\";\n  return SpecialValueMatch2;\n})(SpecialValueMatch || {});\nconst defaultTimePickerConfig = {\n  hidden: false,\n  refresh_intervals: [\"5s\", \"10s\", \"30s\", \"1m\", \"5m\", \"15m\", \"30m\", \"1h\", \"2h\", \"1d\"],\n  time_options: [\"5m\", \"15m\", \"1h\", \"6h\", \"12h\", \"24h\", \"2d\", \"7d\", \"30d\"]\n};\nvar DashboardCursorSync = /* @__PURE__ */ ((DashboardCursorSync2) => {\n  DashboardCursorSync2[DashboardCursorSync2[\"Crosshair\"] = 1] = \"Crosshair\";\n  DashboardCursorSync2[DashboardCursorSync2[\"Off\"] = 0] = \"Off\";\n  DashboardCursorSync2[DashboardCursorSync2[\"Tooltip\"] = 2] = \"Tooltip\";\n  return DashboardCursorSync2;\n})(DashboardCursorSync || {});\nconst defaultDashboardCursorSync = 0 /* Off */;\nconst defaultPanel = {\n  links: [],\n  repeatDirection: \"h\",\n  targets: [],\n  transformations: [],\n  transparent: false\n};\nconst defaultFieldConfigSource = {\n  overrides: []\n};\nconst defaultMatcherConfig = {\n  id: \"\"\n};\nconst defaultFieldConfig = {\n  links: [],\n  mappings: []\n};\nconst defaultRowPanel = {\n  collapsed: false,\n  panels: []\n};\nconst defaultDashboard = {\n  editable: true,\n  fiscalYearStartMonth: 0,\n  graphTooltip: 0 /* Off */,\n  links: [],\n  panels: [],\n  schemaVersion: 39,\n  tags: [],\n  timezone: \"browser\"\n};\n\nexport { DashboardCursorSync, FieldColorModeId, MappingType, SpecialValueMatch, ThresholdsMode, VariableRefresh, VariableSort, defaultAnnotationContainer, defaultAnnotationPanelFilter, defaultAnnotationQuery, defaultAnnotationTarget, defaultDashboard, defaultDashboardCursorSync, defaultDashboardLink, defaultFieldConfig, defaultFieldConfigSource, defaultGridPos, defaultMatcherConfig, defaultPanel, defaultRowPanel, defaultThresholdsConfig, defaultTimePickerConfig, defaultVariableModel };\n//# sourceMappingURL=dashboard_types.gen.js.map\n","import { DashboardCursorSync } from '@grafana/schema';\nimport { Observable } from 'rxjs';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass CursorSync extends SceneObjectBase {\n  constructor(state) {\n    super(__spreadProps(__spreadValues({}, state), {\n      sync: state.sync || DashboardCursorSync.Off\n    }));\n    this.getEventsBus = (panel) => {\n      if (!this.parent) {\n        throw new Error(\"EnableCursorSync cannot be used as a standalone scene object\");\n      }\n      return new PanelContextEventBus(this.parent, panel);\n    };\n  }\n  getEventsScope() {\n    if (!this.parent) {\n      throw new Error(\"EnableCursorSync cannot be used as a standalone scene object\");\n    }\n    return this.state.key;\n  }\n}\nclass PanelContextEventBus {\n  constructor(_source, _eventsOrigin) {\n    this._source = _source;\n    this._eventsOrigin = _eventsOrigin;\n  }\n  publish(event) {\n    event.origin = this;\n    this._eventsOrigin.publishEvent(event, true);\n  }\n  getStream(eventType) {\n    return new Observable((observer) => {\n      const handler = (event) => {\n        observer.next(event);\n      };\n      const sub = this._source.subscribeToEvent(eventType, handler);\n      return () => sub.unsubscribe();\n    });\n  }\n  subscribe(eventType, handler) {\n    return this.getStream(eventType).pipe().subscribe(handler);\n  }\n  removeAllListeners() {\n  }\n  newScopedBus(key, filter) {\n    throw new Error(\"For internal use only\");\n  }\n}\nfunction getCursorSyncScope(sceneObject) {\n  return sceneGraph.findObject(sceneObject, (o) => o instanceof CursorSync);\n}\n\nexport { CursorSync, getCursorSyncScope };\n//# sourceMappingURL=CursorSync.js.map\n","export var noop = function () { };\nexport function on(obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (obj && obj.addEventListener) {\n        obj.addEventListener.apply(obj, args);\n    }\n}\nexport function off(obj) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    if (obj && obj.removeEventListener) {\n        obj.removeEventListener.apply(obj, args);\n    }\n}\nexport var isBrowser = typeof window !== 'undefined';\nexport var isNavigator = typeof navigator !== 'undefined';\n","import { useEffect, useLayoutEffect } from 'react';\nimport { isBrowser } from './misc/util';\nvar useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\nexport default useIsomorphicLayoutEffect;\n","import { useMemo, useState } from 'react';\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect';\nimport { isBrowser, noop } from './misc/util';\nvar defaultState = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n};\nfunction useMeasure() {\n    var _a = useState(null), element = _a[0], ref = _a[1];\n    var _b = useState(defaultState), rect = _b[0], setRect = _b[1];\n    var observer = useMemo(function () {\n        return new window.ResizeObserver(function (entries) {\n            if (entries[0]) {\n                var _a = entries[0].contentRect, x = _a.x, y = _a.y, width = _a.width, height = _a.height, top_1 = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n                setRect({ x: x, y: y, width: width, height: height, top: top_1, left: left, bottom: bottom, right: right });\n            }\n        });\n    }, []);\n    useIsomorphicLayoutEffect(function () {\n        if (!element)\n            return;\n        observer.observe(element);\n        return function () {\n            observer.disconnect();\n        };\n    }, [element]);\n    return [ref, rect];\n}\nexport default isBrowser && typeof window.ResizeObserver !== 'undefined'\n    ? useMeasure\n    : (function () { return [noop, defaultState]; });\n","import React, { useMemo, useCallback } from 'react';\nimport { useMeasure } from 'react-use';\nimport { SetPanelAttentionEvent, AlertState, PluginContextProvider } from '@grafana/data';\nimport { getAppEvents } from '@grafana/runtime';\nimport { useStyles2, Tooltip, PanelChrome, Icon, ErrorBoundaryAlert, PanelContextProvider } from '@grafana/ui';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { isSceneObject } from '../../core/types.js';\nimport { css, cx } from '@emotion/css';\nimport { debounce } from 'lodash';\n\nfunction VizPanelRenderer({ model }) {\n  var _a;\n  const {\n    title,\n    options,\n    fieldConfig,\n    _pluginLoadError,\n    displayMode,\n    hoverHeader,\n    hoverHeaderOffset,\n    menu,\n    headerActions,\n    titleItems,\n    description\n  } = model.useState();\n  const [ref, { width, height }] = useMeasure();\n  const appEvents = useMemo(() => getAppEvents(), []);\n  const setPanelAttention = useCallback(\n    () => appEvents.publish(new SetPanelAttentionEvent({ panelId: model.state.key })),\n    [model.state.key, appEvents]\n  );\n  const debouncedMouseMove = useMemo(() => debounce(setPanelAttention, 100), [setPanelAttention]);\n  const plugin = model.getPlugin();\n  const { dragClass, dragClassCancel } = getDragClasses(model);\n  const dataObject = sceneGraph.getData(model);\n  const rawData = dataObject.useState();\n  const dataWithFieldConfig = model.applyFieldConfig(rawData.data);\n  const sceneTimeRange = sceneGraph.getTimeRange(model);\n  const timeZone = sceneTimeRange.getTimeZone();\n  const timeRange = model.getTimeRange(dataWithFieldConfig);\n  const titleInterpolated = model.interpolate(title, void 0, \"text\");\n  const alertStateStyles = useStyles2(getAlertStateStyles);\n  if (!plugin) {\n    return /* @__PURE__ */ React.createElement(\"div\", null, \"Loading plugin panel...\");\n  }\n  if (!plugin.panel) {\n    return /* @__PURE__ */ React.createElement(\"div\", null, \"Panel plugin has no panel component\");\n  }\n  const PanelComponent = plugin.panel;\n  if (dataObject && dataObject.setContainerWidth) {\n    dataObject.setContainerWidth(Math.round(width));\n  }\n  let titleItemsElement = [];\n  if (titleItems) {\n    if (Array.isArray(titleItems)) {\n      titleItemsElement = titleItemsElement.concat(\n        titleItems.map((titleItem) => {\n          return /* @__PURE__ */ React.createElement(titleItem.Component, {\n            model: titleItem,\n            key: `${titleItem.state.key}`\n          });\n        })\n      );\n    } else if (isSceneObject(titleItems)) {\n      titleItemsElement.push(/* @__PURE__ */ React.createElement(titleItems.Component, {\n        model: titleItems\n      }));\n    } else {\n      titleItemsElement.push(titleItems);\n    }\n  }\n  if (model.state.$timeRange) {\n    titleItemsElement.push(/* @__PURE__ */ React.createElement(model.state.$timeRange.Component, {\n      model: model.state.$timeRange,\n      key: model.state.key\n    }));\n  }\n  if (dataWithFieldConfig.alertState) {\n    titleItemsElement.push(\n      /* @__PURE__ */ React.createElement(Tooltip, {\n        content: (_a = dataWithFieldConfig.alertState.state) != null ? _a : \"unknown\",\n        key: `alert-states-icon-${model.state.key}`\n      }, /* @__PURE__ */ React.createElement(PanelChrome.TitleItem, {\n        className: cx({\n          [alertStateStyles.ok]: dataWithFieldConfig.alertState.state === AlertState.OK,\n          [alertStateStyles.pending]: dataWithFieldConfig.alertState.state === AlertState.Pending,\n          [alertStateStyles.alerting]: dataWithFieldConfig.alertState.state === AlertState.Alerting\n        })\n      }, /* @__PURE__ */ React.createElement(Icon, {\n        name: dataWithFieldConfig.alertState.state === \"alerting\" ? \"heart-break\" : \"heart\",\n        className: \"panel-alert-icon\",\n        size: \"md\"\n      })))\n    );\n  }\n  let panelMenu;\n  if (menu) {\n    panelMenu = /* @__PURE__ */ React.createElement(menu.Component, {\n      model: menu\n    });\n  }\n  let actionsElement;\n  if (headerActions) {\n    if (Array.isArray(headerActions)) {\n      actionsElement = /* @__PURE__ */ React.createElement(React.Fragment, null, headerActions.map((action) => {\n        return /* @__PURE__ */ React.createElement(action.Component, {\n          model: action,\n          key: `${action.state.key}`\n        });\n      }));\n    } else if (isSceneObject(headerActions)) {\n      actionsElement = /* @__PURE__ */ React.createElement(headerActions.Component, {\n        model: headerActions\n      });\n    } else {\n      actionsElement = headerActions;\n    }\n  }\n  const data = dataWithFieldConfig;\n  const isReadyToRender = dataObject.isDataReadyToDisplay ? dataObject.isDataReadyToDisplay() : true;\n  const context = model.getPanelContext();\n  const panelId = model.getLegacyPanelId();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: relativeWrapper\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    ref,\n    className: absoluteWrapper,\n    \"data-viz-panel-key\": model.state.key\n  }, width > 0 && height > 0 && /* @__PURE__ */ React.createElement(PanelChrome, {\n    title: titleInterpolated,\n    description: (description == null ? void 0 : description.trim()) ? model.getDescription : void 0,\n    loadingState: data.state,\n    statusMessage: getChromeStatusMessage(data, _pluginLoadError),\n    statusMessageOnClick: model.onStatusMessageClick,\n    width,\n    height,\n    displayMode,\n    hoverHeader,\n    hoverHeaderOffset,\n    titleItems: titleItemsElement,\n    dragClass,\n    actions: actionsElement,\n    dragClassCancel,\n    padding: plugin.noPadding ? \"none\" : \"md\",\n    menu: panelMenu,\n    onCancelQuery: model.onCancelQuery,\n    onFocus: setPanelAttention,\n    onMouseMove: debouncedMouseMove\n  }, (innerWidth, innerHeight) => /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ErrorBoundaryAlert, {\n    dependencies: [plugin, data]\n  }, /* @__PURE__ */ React.createElement(PluginContextProvider, {\n    meta: plugin.meta\n  }, /* @__PURE__ */ React.createElement(PanelContextProvider, {\n    value: context\n  }, isReadyToRender && /* @__PURE__ */ React.createElement(PanelComponent, {\n    id: panelId,\n    data,\n    title,\n    timeRange,\n    timeZone,\n    options,\n    fieldConfig,\n    transparent: false,\n    width: innerWidth,\n    height: innerHeight,\n    renderCounter: 0,\n    replaceVariables: model.interpolate,\n    onOptionsChange: model.onOptionsChange,\n    onFieldConfigChange: model.onFieldConfigChange,\n    onChangeTimeRange: model.onTimeRangeChange,\n    eventBus: appEvents\n  }))))))));\n}\nfunction getDragClasses(panel) {\n  var _a, _b;\n  const parentLayout = sceneGraph.getLayout(panel);\n  const isDraggable = parentLayout == null ? void 0 : parentLayout.isDraggable();\n  if (!parentLayout || !isDraggable || itemDraggingDisabled(panel, parentLayout)) {\n    return { dragClass: \"\", dragClassCancel: \"\" };\n  }\n  return { dragClass: (_a = parentLayout.getDragClass) == null ? void 0 : _a.call(parentLayout), dragClassCancel: (_b = parentLayout == null ? void 0 : parentLayout.getDragClassCancel) == null ? void 0 : _b.call(parentLayout) };\n}\nfunction itemDraggingDisabled(item, layout) {\n  let ancestor = item.parent;\n  while (ancestor && ancestor !== layout) {\n    if (\"isDraggable\" in ancestor.state && ancestor.state.isDraggable === false) {\n      return true;\n    }\n    ancestor = ancestor.parent;\n  }\n  return false;\n}\nfunction getChromeStatusMessage(data, pluginLoadingError) {\n  if (pluginLoadingError) {\n    return pluginLoadingError;\n  }\n  let message = data.error ? data.error.message : void 0;\n  if (data.errors) {\n    message = data.errors.map((e) => e.message).join(\", \");\n  }\n  return message;\n}\nconst relativeWrapper = css({\n  position: \"relative\",\n  width: \"100%\",\n  height: \"100%\"\n});\nconst absoluteWrapper = css({\n  position: \"absolute\",\n  width: \"100%\",\n  height: \"100%\"\n});\nconst getAlertStateStyles = (theme) => {\n  return {\n    ok: css({\n      color: theme.colors.success.text\n    }),\n    pending: css({\n      color: theme.colors.warning.text\n    }),\n    alerting: css({\n      color: theme.colors.error.text\n    })\n  };\n};\n\nexport { VizPanelRenderer };\n//# sourceMappingURL=VizPanelRenderer.js.map\n","import { isSystemOverrideWithRef, FieldMatcherID, ByNamesMatcherMode, FieldType, getFieldDisplayName, fieldMatchers } from '@grafana/data';\nimport { SeriesVisibilityChangeMode } from '@grafana/ui';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst displayOverrideRef = \"hideSeriesFrom\";\nconst isHideSeriesOverride = isSystemOverrideWithRef(displayOverrideRef);\nfunction seriesVisibilityConfigFactory(label, mode, fieldConfig, data) {\n  const { overrides } = fieldConfig;\n  const displayName = label;\n  const currentIndex = overrides.findIndex(isHideSeriesOverride);\n  if (currentIndex < 0) {\n    if (mode === SeriesVisibilityChangeMode.ToggleSelection) {\n      const override3 = createOverride([displayName, ...getNamesOfHiddenFields(overrides, data)]);\n      return __spreadProps(__spreadValues({}, fieldConfig), {\n        overrides: [...fieldConfig.overrides, override3]\n      });\n    }\n    const displayNames = getDisplayNames(data, displayName);\n    const override2 = createOverride(displayNames);\n    return __spreadProps(__spreadValues({}, fieldConfig), {\n      overrides: [...fieldConfig.overrides, override2]\n    });\n  }\n  const overridesCopy = Array.from(overrides);\n  const [current] = overridesCopy.splice(currentIndex, 1);\n  if (mode === SeriesVisibilityChangeMode.ToggleSelection) {\n    let existing = getExistingDisplayNames(current);\n    const nameOfHiddenFields = getNamesOfHiddenFields(overridesCopy, data);\n    if (nameOfHiddenFields.length > 0) {\n      existing = existing.filter((el) => nameOfHiddenFields.indexOf(el) < 0);\n    }\n    if (existing[0] === displayName && existing.length === 1) {\n      return __spreadProps(__spreadValues({}, fieldConfig), {\n        overrides: overridesCopy\n      });\n    }\n    const override2 = createOverride([displayName, ...nameOfHiddenFields]);\n    return __spreadProps(__spreadValues({}, fieldConfig), {\n      overrides: [...overridesCopy, override2]\n    });\n  }\n  const override = createExtendedOverride(current, displayName);\n  if (allFieldsAreExcluded(override, data)) {\n    return __spreadProps(__spreadValues({}, fieldConfig), {\n      overrides: overridesCopy\n    });\n  }\n  return __spreadProps(__spreadValues({}, fieldConfig), {\n    overrides: [...overridesCopy, override]\n  });\n}\nfunction createOverride(names, mode = ByNamesMatcherMode.exclude, property) {\n  property = property != null ? property : {\n    id: \"custom.hideFrom\",\n    value: {\n      viz: true,\n      legend: false,\n      tooltip: false\n    }\n  };\n  return {\n    __systemRef: displayOverrideRef,\n    matcher: {\n      id: FieldMatcherID.byNames,\n      options: {\n        mode,\n        names,\n        prefix: mode === ByNamesMatcherMode.exclude ? \"All except:\" : void 0,\n        readOnly: true\n      }\n    },\n    properties: [\n      __spreadProps(__spreadValues({}, property), {\n        value: {\n          viz: true,\n          legend: false,\n          tooltip: false\n        }\n      })\n    ]\n  };\n}\nconst createExtendedOverride = (current, displayName, mode = ByNamesMatcherMode.exclude) => {\n  const property = current.properties.find((p) => p.id === \"custom.hideFrom\");\n  const existing = getExistingDisplayNames(current);\n  const index = existing.findIndex((name) => name === displayName);\n  if (index < 0) {\n    existing.push(displayName);\n  } else {\n    existing.splice(index, 1);\n  }\n  return createOverride(existing, mode, property);\n};\nconst getExistingDisplayNames = (rule) => {\n  var _a;\n  const names = (_a = rule.matcher.options) == null ? void 0 : _a.names;\n  if (!Array.isArray(names)) {\n    return [];\n  }\n  return [...names];\n};\nconst allFieldsAreExcluded = (override, data) => {\n  return getExistingDisplayNames(override).length === getDisplayNames(data).length;\n};\nconst getDisplayNames = (data, excludeName) => {\n  const unique = /* @__PURE__ */ new Set();\n  for (const frame of data) {\n    for (const field of frame.fields) {\n      if (field.type !== FieldType.number) {\n        continue;\n      }\n      const name = getFieldDisplayName(field, frame, data);\n      if (name === excludeName) {\n        continue;\n      }\n      unique.add(name);\n    }\n  }\n  return Array.from(unique);\n};\nconst getNamesOfHiddenFields = (overrides, data) => {\n  var _a;\n  let names = [];\n  for (const override of overrides) {\n    const property = override.properties.find((p) => p.id === \"custom.hideFrom\");\n    if (property !== void 0 && ((_a = property.value) == null ? void 0 : _a.legend) === true) {\n      const info = fieldMatchers.get(override.matcher.id);\n      const matcher = info.get(override.matcher.options);\n      for (const frame of data) {\n        for (const field of frame.fields) {\n          if (field.type !== FieldType.number) {\n            continue;\n          }\n          const name = getFieldDisplayName(field, frame, data);\n          if (matcher(field, frame, data)) {\n            names.push(name);\n          }\n        }\n      }\n    }\n  }\n  return names;\n};\n\nexport { seriesVisibilityConfigFactory };\n//# sourceMappingURL=seriesVisibilityConfigFactory.js.map\n","import { FieldMatcherID, FieldColorModeId } from '@grafana/data';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst changeSeriesColorConfigFactory = (label, color, fieldConfig) => {\n  const { overrides } = fieldConfig;\n  const currentIndex = fieldConfig.overrides.findIndex((override) => {\n    return override.matcher.id === FieldMatcherID.byName && override.matcher.options === label;\n  });\n  if (currentIndex < 0) {\n    return __spreadProps(__spreadValues({}, fieldConfig), {\n      overrides: [...fieldConfig.overrides, createOverride(label, color)]\n    });\n  }\n  const overridesCopy = Array.from(overrides);\n  const existing = overridesCopy[currentIndex];\n  const propertyIndex = existing.properties.findIndex((p) => p.id === \"color\");\n  if (propertyIndex < 0) {\n    overridesCopy[currentIndex] = __spreadProps(__spreadValues({}, existing), {\n      properties: [...existing.properties, createProperty(color)]\n    });\n    return __spreadProps(__spreadValues({}, fieldConfig), {\n      overrides: overridesCopy\n    });\n  }\n  const propertiesCopy = Array.from(existing.properties);\n  propertiesCopy[propertyIndex] = createProperty(color);\n  overridesCopy[currentIndex] = __spreadProps(__spreadValues({}, existing), {\n    properties: propertiesCopy\n  });\n  return __spreadProps(__spreadValues({}, fieldConfig), {\n    overrides: overridesCopy\n  });\n};\nconst createOverride = (label, color) => {\n  return {\n    matcher: {\n      id: FieldMatcherID.byName,\n      options: label\n    },\n    properties: [createProperty(color)]\n  };\n};\nconst createProperty = (color) => {\n  return {\n    id: \"color\",\n    value: {\n      mode: FieldColorModeId.Fixed,\n      fixedColor: color\n    }\n  };\n};\n\nexport { changeSeriesColorConfigFactory };\n//# sourceMappingURL=colorSeriesConfigFactory.js.map\n","import { toUtc, getPanelOptionsWithDefaults, renderMarkdown, applyFieldOverrides, compareArrayValues, compareDataFrameStructures, CoreApp, DashboardCursorSync, PanelPlugin, PluginType } from '@grafana/data';\nimport { getPluginImportUtils, config, getAppEvents } from '@grafana/runtime';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { VizPanelRenderer } from './VizPanelRenderer.js';\nimport { VariableDependencyConfig } from '../../variables/VariableDependencyConfig.js';\nimport { seriesVisibilityConfigFactory } from './seriesVisibilityConfigFactory.js';\nimport { emptyPanelData } from '../../core/SceneDataNode.js';\nimport { changeSeriesColorConfigFactory } from './colorSeriesConfigFactory.js';\nimport { loadPanelPluginSync } from './registerRuntimePanelPlugin.js';\nimport { getCursorSyncScope } from '../../behaviors/CursorSync.js';\nimport { mergeWith, cloneDeep, isArray, merge } from 'lodash';\nimport { UserActionEvent } from '../../core/events.js';\nimport { evaluateTimeRange } from '../../utils/evaluateTimeRange.js';\nimport { LiveNowTimer } from '../../behaviors/LiveNowTimer.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass VizPanel extends SceneObjectBase {\n  constructor(state) {\n    var _a;\n    super(__spreadValues({\n      options: {},\n      fieldConfig: { defaults: {}, overrides: [] },\n      title: \"Title\",\n      pluginId: \"timeseries\"\n    }, state));\n    this._variableDependency = new VariableDependencyConfig(this, {\n      statePaths: [\"title\", \"options\", \"fieldConfig\"]\n    });\n    this._structureRev = 0;\n    this.onTimeRangeChange = (timeRange) => {\n      const sceneTimeRange = sceneGraph.getTimeRange(this);\n      sceneTimeRange.onTimeRangeChange({\n        raw: {\n          from: toUtc(timeRange.from),\n          to: toUtc(timeRange.to)\n        },\n        from: toUtc(timeRange.from),\n        to: toUtc(timeRange.to)\n      });\n    };\n    this.getTimeRange = (data) => {\n      const liveNowTimer = sceneGraph.findObject(this, (o) => o instanceof LiveNowTimer);\n      const sceneTimeRange = sceneGraph.getTimeRange(this);\n      if (liveNowTimer instanceof LiveNowTimer && liveNowTimer.isEnabled) {\n        return evaluateTimeRange(\n          sceneTimeRange.state.from,\n          sceneTimeRange.state.to,\n          sceneTimeRange.getTimeZone(),\n          sceneTimeRange.state.fiscalYearStartMonth,\n          sceneTimeRange.state.UNSAFE_nowDelay\n        );\n      }\n      const plugin = this.getPlugin();\n      if (plugin && !plugin.meta.skipDataQuery && data && data.timeRange) {\n        return data.timeRange;\n      }\n      return sceneTimeRange.state.value;\n    };\n    this.onTitleChange = (title) => {\n      this.setState({ title });\n    };\n    this.onDescriptionChange = (description) => {\n      this.setState({ description });\n    };\n    this.onDisplayModeChange = (displayMode) => {\n      this.setState({ displayMode });\n    };\n    this.onOptionsChange = (optionsUpdate, replace = false) => {\n      const { fieldConfig, options } = this.state;\n      const nextOptions = replace ? optionsUpdate : mergeWith(cloneDeep(options), optionsUpdate, (_, srcValue) => {\n        if (isArray(srcValue)) {\n          return srcValue;\n        }\n        return;\n      });\n      const withDefaults = getPanelOptionsWithDefaults({\n        plugin: this._plugin,\n        currentOptions: nextOptions,\n        currentFieldConfig: fieldConfig,\n        isAfterPluginChange: false\n      });\n      this.setState({\n        options: withDefaults.options\n      });\n    };\n    this.onFieldConfigChange = (fieldConfigUpdate, replace) => {\n      const { fieldConfig, options } = this.state;\n      const nextFieldConfig = replace ? fieldConfigUpdate : merge(cloneDeep(fieldConfig), fieldConfigUpdate);\n      const withDefaults = getPanelOptionsWithDefaults({\n        plugin: this._plugin,\n        currentOptions: options,\n        currentFieldConfig: nextFieldConfig,\n        isAfterPluginChange: false\n      });\n      this._dataWithFieldConfig = void 0;\n      this.setState({ fieldConfig: withDefaults.fieldConfig });\n    };\n    this.interpolate = (value, scoped, format) => {\n      return sceneGraph.interpolate(this, value, scoped, format);\n    };\n    this.getDescription = () => {\n      this.publishEvent(new UserActionEvent({ origin: this, interaction: \"panel-description-shown\" }), true);\n      const { description } = this.state;\n      if (description) {\n        const markdown = this.interpolate(description);\n        return renderMarkdown(markdown);\n      }\n      return \"\";\n    };\n    this.onCancelQuery = () => {\n      var _a;\n      this.publishEvent(new UserActionEvent({ origin: this, interaction: \"panel-cancel-query-clicked\" }), true);\n      const data = sceneGraph.getData(this);\n      (_a = data.cancelQuery) == null ? void 0 : _a.call(data);\n    };\n    this.onStatusMessageClick = () => {\n      this.publishEvent(new UserActionEvent({ origin: this, interaction: \"panel-status-message-clicked\" }), true);\n    };\n    this._onSeriesColorChange = (label, color) => {\n      this.onFieldConfigChange(changeSeriesColorConfigFactory(label, color, this.state.fieldConfig));\n    };\n    this._onSeriesVisibilityChange = (label, mode) => {\n      if (!this._dataWithFieldConfig) {\n        return;\n      }\n      this.onFieldConfigChange(\n        seriesVisibilityConfigFactory(label, mode, this.state.fieldConfig, this._dataWithFieldConfig.series),\n        true\n      );\n    };\n    this._onInstanceStateChange = (state) => {\n      if (this._panelContext) {\n        this._panelContext = __spreadProps(__spreadValues({}, this._panelContext), {\n          instanceState: state\n        });\n      }\n      this.setState({ _pluginInstanceState: state });\n    };\n    this._onToggleLegendSort = (sortKey) => {\n      const legendOptions = this.state.options.legend;\n      if (!legendOptions) {\n        return;\n      }\n      let sortDesc = legendOptions.sortDesc;\n      let sortBy = legendOptions.sortBy;\n      if (sortKey !== sortBy) {\n        sortDesc = void 0;\n      }\n      if (sortDesc === false) {\n        sortBy = void 0;\n        sortDesc = void 0;\n      } else {\n        sortDesc = !sortDesc;\n        sortBy = sortKey;\n      }\n      this.onOptionsChange(\n        __spreadProps(__spreadValues({}, this.state.options), {\n          legend: __spreadProps(__spreadValues({}, legendOptions), { sortBy, sortDesc })\n        }),\n        true\n      );\n    };\n    this.addActivationHandler(() => {\n      this._onActivate();\n    });\n    (_a = state.menu) == null ? void 0 : _a.addActivationHandler(() => {\n      this.publishEvent(new UserActionEvent({ origin: this, interaction: \"panel-menu-shown\" }), true);\n    });\n  }\n  _onActivate() {\n    if (!this._plugin) {\n      this._loadPlugin(this.state.pluginId);\n    }\n  }\n  async _loadPlugin(pluginId) {\n    const plugin = loadPanelPluginSync(pluginId);\n    if (plugin) {\n      this._pluginLoaded(plugin);\n    } else {\n      const { importPanelPlugin } = getPluginImportUtils();\n      try {\n        const result = await importPanelPlugin(pluginId);\n        this._pluginLoaded(result);\n      } catch (err) {\n        this._pluginLoaded(getPanelPluginNotFound(pluginId));\n        if (err instanceof Error) {\n          this.setState({ _pluginLoadError: err.message });\n        }\n      }\n    }\n  }\n  getLegacyPanelId() {\n    const panelId = parseInt(this.state.key.replace(\"panel-\", \"\"), 10);\n    if (isNaN(panelId)) {\n      return 0;\n    }\n    return panelId;\n  }\n  async _pluginLoaded(plugin) {\n    const { options, fieldConfig, title, pluginVersion, _UNSAFE_customMigrationHandler } = this.state;\n    const panel = {\n      title,\n      options,\n      fieldConfig,\n      id: this.getLegacyPanelId(),\n      type: plugin.meta.id,\n      pluginVersion\n    };\n    const currentVersion = this._getPluginVersion(plugin);\n    _UNSAFE_customMigrationHandler == null ? void 0 : _UNSAFE_customMigrationHandler(panel, plugin);\n    if (plugin.onPanelMigration && currentVersion !== this.state.pluginVersion) {\n      panel.options = await plugin.onPanelMigration(panel);\n    }\n    const withDefaults = getPanelOptionsWithDefaults({\n      plugin,\n      currentOptions: panel.options,\n      currentFieldConfig: panel.fieldConfig,\n      isAfterPluginChange: false\n    });\n    this._plugin = plugin;\n    this.setState({\n      options: withDefaults.options,\n      fieldConfig: withDefaults.fieldConfig,\n      pluginVersion: currentVersion\n    });\n    if (plugin.meta.skipDataQuery) {\n      const sceneTimeRange = sceneGraph.getTimeRange(this);\n      this._subs.add(sceneTimeRange.subscribeToState(() => this.forceRender()));\n    }\n  }\n  _getPluginVersion(plugin) {\n    return plugin && plugin.meta.info.version ? plugin.meta.info.version : config.buildInfo.version;\n  }\n  getPlugin() {\n    return this._plugin;\n  }\n  getPanelContext() {\n    var _a;\n    (_a = this._panelContext) != null ? _a : this._panelContext = this.buildPanelContext();\n    return this._panelContext;\n  }\n  clearFieldConfigCache() {\n    this._dataWithFieldConfig = void 0;\n  }\n  applyFieldConfig(rawData) {\n    var _a, _b, _c, _d;\n    const plugin = this._plugin;\n    if (!plugin || plugin.meta.skipDataQuery || !rawData) {\n      return emptyPanelData;\n    }\n    if (this._prevData === rawData && this._dataWithFieldConfig) {\n      return this._dataWithFieldConfig;\n    }\n    const pluginDataSupport = plugin.dataSupport || { alertStates: false, annotations: false };\n    const fieldConfigRegistry = plugin.fieldConfigRegistry;\n    const prevFrames = (_b = (_a = this._dataWithFieldConfig) == null ? void 0 : _a.series) != null ? _b : [];\n    const newFrames = applyFieldOverrides({\n      data: rawData.series,\n      fieldConfig: this.state.fieldConfig,\n      fieldConfigRegistry,\n      replaceVariables: this.interpolate,\n      theme: config.theme2,\n      timeZone: (_c = rawData.request) == null ? void 0 : _c.timezone\n    });\n    if (!compareArrayValues(newFrames, prevFrames, compareDataFrameStructures)) {\n      this._structureRev++;\n    }\n    this._dataWithFieldConfig = __spreadProps(__spreadValues({}, rawData), {\n      structureRev: this._structureRev,\n      series: newFrames\n    });\n    if (this._dataWithFieldConfig.annotations) {\n      this._dataWithFieldConfig.annotations = applyFieldOverrides({\n        data: this._dataWithFieldConfig.annotations,\n        fieldConfig: {\n          defaults: {},\n          overrides: []\n        },\n        fieldConfigRegistry,\n        replaceVariables: this.interpolate,\n        theme: config.theme2,\n        timeZone: (_d = rawData.request) == null ? void 0 : _d.timezone\n      });\n    }\n    if (!pluginDataSupport.alertStates) {\n      this._dataWithFieldConfig.alertState = void 0;\n    }\n    if (!pluginDataSupport.annotations) {\n      this._dataWithFieldConfig.annotations = void 0;\n    }\n    this._prevData = rawData;\n    return this._dataWithFieldConfig;\n  }\n  buildPanelContext() {\n    const sync = getCursorSyncScope(this);\n    const context = {\n      eventsScope: sync ? sync.getEventsScope() : \"__global_\",\n      eventBus: sync ? sync.getEventsBus(this) : getAppEvents(),\n      app: CoreApp.Unknown,\n      sync: () => {\n        if (sync) {\n          return sync.state.sync;\n        }\n        return DashboardCursorSync.Off;\n      },\n      onSeriesColorChange: this._onSeriesColorChange,\n      onToggleSeriesVisibility: this._onSeriesVisibilityChange,\n      onToggleLegendSort: this._onToggleLegendSort,\n      onInstanceStateChange: this._onInstanceStateChange\n    };\n    if (this.state.extendPanelContext) {\n      this.state.extendPanelContext(this, context);\n    }\n    return context;\n  }\n}\nVizPanel.Component = VizPanelRenderer;\nfunction getPanelPluginNotFound(id) {\n  const plugin = new PanelPlugin(() => null);\n  plugin.meta = {\n    id,\n    name: id,\n    sort: 100,\n    type: PluginType.panel,\n    module: \"\",\n    baseUrl: \"\",\n    info: {\n      author: {\n        name: \"\"\n      },\n      description: \"\",\n      links: [],\n      logos: {\n        large: \"\",\n        small: \"public/img/grafana_icon.svg\"\n      },\n      screenshots: [],\n      updated: \"\",\n      version: \"\"\n    }\n  };\n  return plugin;\n}\n\nexport { VizPanel };\n//# sourceMappingURL=VizPanel.js.map\n","import { VizPanel } from '../components/VizPanel/VizPanel.js';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\n\nconst _LiveNowTimer = class extends SceneObjectBase {\n  constructor({ enabled = false }) {\n    super({ enabled });\n    this.timerId = void 0;\n    this._activationHandler = () => {\n      if (this.state.enabled) {\n        this.enable();\n      }\n      return () => {\n        window.clearInterval(this.timerId);\n        this.timerId = void 0;\n      };\n    };\n    this.addActivationHandler(this._activationHandler);\n  }\n  enable() {\n    window.clearInterval(this.timerId);\n    this.timerId = void 0;\n    this.timerId = window.setInterval(() => {\n      const panels = sceneGraph.findAllObjects(this.getRoot(), (obj) => obj instanceof VizPanel);\n      for (const panel of panels) {\n        panel.forceRender();\n      }\n    }, _LiveNowTimer.REFRESH_RATE);\n    this.setState({ enabled: true });\n  }\n  disable() {\n    window.clearInterval(this.timerId);\n    this.timerId = void 0;\n    this.setState({ enabled: false });\n  }\n  get isEnabled() {\n    return this.state.enabled;\n  }\n};\nlet LiveNowTimer = _LiveNowTimer;\nLiveNowTimer.REFRESH_RATE = 100;\n\nexport { LiveNowTimer };\n//# sourceMappingURL=LiveNowTimer.js.map\n","import { isFetchError } from '@grafana/runtime';\n\nfunction getMessageFromError(err) {\n  if (typeof err === \"string\") {\n    return err;\n  }\n  if (err) {\n    if (err instanceof Error) {\n      return err.message;\n    } else if (isFetchError(err)) {\n      if (err.data && err.data.message) {\n        return err.data.message;\n      } else if (err.statusText) {\n        return err.statusText;\n      }\n    } else if (err.hasOwnProperty(\"message\")) {\n      return err.message;\n    }\n  }\n  return JSON.stringify(err);\n}\n\nexport { getMessageFromError };\n//# sourceMappingURL=getMessageFromError.js.map\n","import { ReplaySubject } from 'rxjs';\nimport { emptyPanelData } from '../../core/SceneDataNode.js';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { setBaseClassState } from '../../utils/utils.js';\nimport { writeSceneLog } from '../../utils/writeSceneLog.js';\nimport { VariableDependencyConfig } from '../../variables/VariableDependencyConfig.js';\nimport { VariableValueRecorder } from '../../variables/VariableValueRecorder.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass SceneDataLayerBase extends SceneObjectBase {\n  constructor(initialState, variableDependencyStatePaths = []) {\n    super(__spreadValues({\n      isEnabled: true\n    }, initialState));\n    this._results = new ReplaySubject(1);\n    this.isDataLayer = true;\n    this._variableValueRecorder = new VariableValueRecorder();\n    this._variableDependency = new VariableDependencyConfig(this, {\n      onVariableUpdateCompleted: this.onVariableUpdateCompleted.bind(this)\n    });\n    this._variableDependency.setPaths(variableDependencyStatePaths);\n    this.addActivationHandler(() => this.onActivate());\n  }\n  onActivate() {\n    if (this.state.isEnabled) {\n      this.onEnable();\n    }\n    if (this.shouldRunLayerOnActivate()) {\n      this.runLayer();\n    }\n    this.subscribeToState((n, p) => {\n      if (!n.isEnabled && this.querySub) {\n        this.querySub.unsubscribe();\n        this.querySub = void 0;\n        this.onDisable();\n        this._results.next({ origin: this, data: emptyPanelData });\n        this.setStateHelper({ data: emptyPanelData });\n      }\n      if (n.isEnabled && !p.isEnabled) {\n        this.onEnable();\n        this.runLayer();\n      }\n    });\n    return () => {\n      this.onDeactivate();\n    };\n  }\n  onDeactivate() {\n    if (this.querySub) {\n      this.querySub.unsubscribe();\n      this.querySub = void 0;\n    }\n    this.onDisable();\n    this._variableValueRecorder.recordCurrentDependencyValuesForSceneObject(this);\n  }\n  onVariableUpdateCompleted() {\n    this.runLayer();\n  }\n  cancelQuery() {\n    if (this.querySub) {\n      this.querySub.unsubscribe();\n      this.querySub = void 0;\n      this.publishResults(emptyPanelData);\n    }\n  }\n  publishResults(data) {\n    if (this.state.isEnabled) {\n      this._results.next({ origin: this, data });\n      this.setStateHelper({ data });\n    }\n  }\n  getResultsStream() {\n    return this._results;\n  }\n  shouldRunLayerOnActivate() {\n    if (this._variableValueRecorder.hasDependenciesChanged(this)) {\n      writeSceneLog(\n        \"SceneDataLayerBase\",\n        \"Variable dependency changed while inactive, shouldRunLayerOnActivate returns true\"\n      );\n      return true;\n    }\n    if (!this.state.data) {\n      return true;\n    }\n    return false;\n  }\n  setStateHelper(state) {\n    setBaseClassState(this, state);\n  }\n}\n\nexport { SceneDataLayerBase };\n//# sourceMappingURL=SceneDataLayerBase.js.map\n","import { css } from '@emotion/css';\nimport { LoadingState } from '@grafana/schema';\nimport { InlineSwitch } from '@grafana/ui';\nimport React from 'react';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { ControlsLabel } from '../../utils/ControlsLabel.js';\n\nclass SceneDataLayerControls extends SceneObjectBase {\n  constructor() {\n    super({});\n  }\n}\nSceneDataLayerControls.Component = SceneDataLayerControlsRenderer;\nfunction SceneDataLayerControlsRenderer({ model }) {\n  const layers = sceneGraph.getDataLayers(model, true);\n  if (layers.length === 0) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, layers.map((layer) => /* @__PURE__ */ React.createElement(layer.Component, {\n    model: layer,\n    key: layer.state.key\n  })));\n}\nfunction DataLayerControlSwitch({ layer }) {\n  var _a, _b;\n  const elementId = `data-layer-${layer.state.key}`;\n  const { data, isEnabled } = layer.useState();\n  const showLoading = Boolean(data && data.state === LoadingState.Loading);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: containerStyle\n  }, /* @__PURE__ */ React.createElement(ControlsLabel, {\n    htmlFor: elementId,\n    isLoading: showLoading,\n    onCancel: () => {\n      var _a2;\n      return (_a2 = layer.cancelQuery) == null ? void 0 : _a2.call(layer);\n    },\n    label: layer.state.name,\n    description: layer.state.description,\n    error: (_b = (_a = layer.state.data) == null ? void 0 : _a.errors) == null ? void 0 : _b[0].message\n  }), /* @__PURE__ */ React.createElement(InlineSwitch, {\n    id: elementId,\n    value: isEnabled,\n    onChange: () => layer.setState({ isEnabled: !isEnabled })\n  }));\n}\nconst containerStyle = css({ display: \"flex\" });\n\nexport { DataLayerControlSwitch, SceneDataLayerControls };\n//# sourceMappingURL=SceneDataLayerControls.js.map\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","export var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map","export var observable = (function () { return (typeof Symbol === 'function' && Symbol.observable) || '@@observable'; })();\n//# sourceMappingURL=observable.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = (function () {\n    function Observable(subscribe) {\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var _this = this;\n        var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n        errorContext(function () {\n            var _a = _this, operator = _a.operator, source = _a.source;\n            subscriber.add(operator\n                ?\n                    operator.call(subscriber, source)\n                : source\n                    ?\n                        _this._subscribe(subscriber)\n                    :\n                        _this._trySubscribe(subscriber));\n        });\n        return subscriber;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.error(err);\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscriber = new SafeSubscriber({\n                next: function (value) {\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscriber.unsubscribe();\n                    }\n                },\n                error: reject,\n                complete: resolve,\n            });\n            _this.subscribe(subscriber);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var _a;\n        return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return (value = x); }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    var _a;\n    return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n    return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n    return (value && value instanceof Subscriber) || (isObserver(value) && isSubscription(value));\n}\n//# sourceMappingURL=Observable.js.map","import { identity } from './identity';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map","export function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = getSymbolIterator();\n//# sourceMappingURL=iterator.js.map","import { __asyncValues, __awaiter, __generator, __values } from \"tslib\";\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isPromise } from '../util/isPromise';\nimport { Observable } from '../Observable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isAsyncIterable } from '../util/isAsyncIterable';\nimport { createInvalidObservableTypeError } from '../util/throwUnobservableError';\nimport { isIterable } from '../util/isIterable';\nimport { isReadableStreamLike, readableStreamLikeToAsyncGenerator } from '../util/isReadableStreamLike';\nimport { isFunction } from '../util/isFunction';\nimport { reportUnhandledError } from '../util/reportUnhandledError';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function innerFrom(input) {\n    if (input instanceof Observable) {\n        return input;\n    }\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return fromInteropObservable(input);\n        }\n        if (isArrayLike(input)) {\n            return fromArrayLike(input);\n        }\n        if (isPromise(input)) {\n            return fromPromise(input);\n        }\n        if (isAsyncIterable(input)) {\n            return fromAsyncIterable(input);\n        }\n        if (isIterable(input)) {\n            return fromIterable(input);\n        }\n        if (isReadableStreamLike(input)) {\n            return fromReadableStreamLike(input);\n        }\n    }\n    throw createInvalidObservableTypeError(input);\n}\nexport function fromInteropObservable(obj) {\n    return new Observable(function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (isFunction(obs.subscribe)) {\n            return obs.subscribe(subscriber);\n        }\n        throw new TypeError('Provided object does not correctly implement Symbol.observable');\n    });\n}\nexport function fromArrayLike(array) {\n    return new Observable(function (subscriber) {\n        for (var i = 0; i < array.length && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    });\n}\nexport function fromPromise(promise) {\n    return new Observable(function (subscriber) {\n        promise\n            .then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, reportUnhandledError);\n    });\n}\nexport function fromIterable(iterable) {\n    return new Observable(function (subscriber) {\n        var e_1, _a;\n        try {\n            for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n                var value = iterable_1_1.value;\n                subscriber.next(value);\n                if (subscriber.closed) {\n                    return;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        subscriber.complete();\n    });\n}\nexport function fromAsyncIterable(asyncIterable) {\n    return new Observable(function (subscriber) {\n        process(asyncIterable, subscriber).catch(function (err) { return subscriber.error(err); });\n    });\n}\nexport function fromReadableStreamLike(readableStream) {\n    return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n    var asyncIterable_1, asyncIterable_1_1;\n    var e_2, _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var value, e_2_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    _b.trys.push([0, 5, 6, 11]);\n                    asyncIterable_1 = __asyncValues(asyncIterable);\n                    _b.label = 1;\n                case 1: return [4, asyncIterable_1.next()];\n                case 2:\n                    if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n                    value = asyncIterable_1_1.value;\n                    subscriber.next(value);\n                    if (subscriber.closed) {\n                        return [2];\n                    }\n                    _b.label = 3;\n                case 3: return [3, 1];\n                case 4: return [3, 11];\n                case 5:\n                    e_2_1 = _b.sent();\n                    e_2 = { error: e_2_1 };\n                    return [3, 11];\n                case 6:\n                    _b.trys.push([6, , 9, 10]);\n                    if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n                    return [4, _a.call(asyncIterable_1)];\n                case 7:\n                    _b.sent();\n                    _b.label = 8;\n                case 8: return [3, 10];\n                case 9:\n                    if (e_2) throw e_2.error;\n                    return [7];\n                case 10: return [7];\n                case 11:\n                    subscriber.complete();\n                    return [2];\n            }\n        });\n    });\n}\n//# sourceMappingURL=innerFrom.js.map","import { observable as Symbol_observable } from '../symbol/observable';\nimport { isFunction } from './isFunction';\nexport function isInteropObservable(input) {\n    return isFunction(input[Symbol_observable]);\n}\n//# sourceMappingURL=isInteropObservable.js.map","import { isFunction } from \"./isFunction\";\nexport function isPromise(value) {\n    return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n//# sourceMappingURL=isPromise.js.map","import { isFunction } from './isFunction';\nexport function isAsyncIterable(obj) {\n    return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n//# sourceMappingURL=isAsyncIterable.js.map","import { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { isFunction } from './isFunction';\nexport function isIterable(input) {\n    return isFunction(input === null || input === void 0 ? void 0 : input[Symbol_iterator]);\n}\n//# sourceMappingURL=isIterable.js.map","import { __asyncGenerator, __await, __generator } from \"tslib\";\nimport { isFunction } from './isFunction';\nexport function readableStreamLikeToAsyncGenerator(readableStream) {\n    return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n        var reader, _a, value, done;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    reader = readableStream.getReader();\n                    _b.label = 1;\n                case 1:\n                    _b.trys.push([1, , 9, 10]);\n                    _b.label = 2;\n                case 2:\n                    if (!true) return [3, 8];\n                    return [4, __await(reader.read())];\n                case 3:\n                    _a = _b.sent(), value = _a.value, done = _a.done;\n                    if (!done) return [3, 5];\n                    return [4, __await(void 0)];\n                case 4: return [2, _b.sent()];\n                case 5: return [4, __await(value)];\n                case 6: return [4, _b.sent()];\n                case 7:\n                    _b.sent();\n                    return [3, 2];\n                case 8: return [3, 10];\n                case 9:\n                    reader.releaseLock();\n                    return [7];\n                case 10: return [2];\n            }\n        });\n    });\n}\nexport function isReadableStreamLike(obj) {\n    return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n//# sourceMappingURL=isReadableStreamLike.js.map","export function createInvalidObservableTypeError(input) {\n    return new TypeError(\"You provided \" + (input !== null && typeof input === 'object' ? 'an invalid object' : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n//# sourceMappingURL=throwUnobservableError.js.map","import { map } from './map';\nimport { innerFrom } from '../observable/innerFrom';\nimport { operate } from '../util/lift';\nimport { mergeInternals } from './mergeInternals';\nimport { isFunction } from '../util/isFunction';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) { concurrent = Infinity; }\n    if (isFunction(resultSelector)) {\n        return mergeMap(function (a, i) { return map(function (b, ii) { return resultSelector(a, b, i, ii); })(innerFrom(project(a, i))); }, concurrent);\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return operate(function (source, subscriber) { return mergeInternals(source, subscriber, project, concurrent); });\n}\n//# sourceMappingURL=mergeMap.js.map","import { innerFrom } from '../observable/innerFrom';\nimport { executeSchedule } from '../util/executeSchedule';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function mergeInternals(source, subscriber, project, concurrent, onBeforeNext, expand, innerSubScheduler, additionalFinalizer) {\n    var buffer = [];\n    var active = 0;\n    var index = 0;\n    var isComplete = false;\n    var checkComplete = function () {\n        if (isComplete && !buffer.length && !active) {\n            subscriber.complete();\n        }\n    };\n    var outerNext = function (value) { return (active < concurrent ? doInnerSub(value) : buffer.push(value)); };\n    var doInnerSub = function (value) {\n        expand && subscriber.next(value);\n        active++;\n        var innerComplete = false;\n        innerFrom(project(value, index++)).subscribe(createOperatorSubscriber(subscriber, function (innerValue) {\n            onBeforeNext === null || onBeforeNext === void 0 ? void 0 : onBeforeNext(innerValue);\n            if (expand) {\n                outerNext(innerValue);\n            }\n            else {\n                subscriber.next(innerValue);\n            }\n        }, function () {\n            innerComplete = true;\n        }, undefined, function () {\n            if (innerComplete) {\n                try {\n                    active--;\n                    var _loop_1 = function () {\n                        var bufferedValue = buffer.shift();\n                        if (innerSubScheduler) {\n                            executeSchedule(subscriber, innerSubScheduler, function () { return doInnerSub(bufferedValue); });\n                        }\n                        else {\n                            doInnerSub(bufferedValue);\n                        }\n                    };\n                    while (buffer.length && active < concurrent) {\n                        _loop_1();\n                    }\n                    checkComplete();\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }\n        }));\n    };\n    source.subscribe(createOperatorSubscriber(subscriber, outerNext, function () {\n        isComplete = true;\n        checkComplete();\n    }));\n    return function () {\n        additionalFinalizer === null || additionalFinalizer === void 0 ? void 0 : additionalFinalizer();\n    };\n}\n//# sourceMappingURL=mergeInternals.js.map","import { isString } from 'lodash';\nimport { of } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\nimport { FieldType, getFieldDisplayName, AnnotationEventFieldSource, standardTransformers } from '@grafana/data';\nimport { config } from '@grafana/runtime';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nconst standardAnnotationSupport = {\n  prepareAnnotation: (json) => {\n    if (isString(json == null ? void 0 : json.query)) {\n      const _a = json, { query } = _a, rest = __objRest(_a, [\"query\"]);\n      return __spreadProps(__spreadValues({}, rest), {\n        target: {\n          refId: \"annotation_query\",\n          query\n        },\n        mappings: {}\n      });\n    }\n    return json;\n  },\n  prepareQuery: (anno) => anno.target,\n  processEvents: (anno, data) => {\n    return getAnnotationsFromData(data, anno.mappings);\n  }\n};\nfunction singleFrameFromPanelData() {\n  return (source) => source.pipe(\n    mergeMap((data) => {\n      if (!(data == null ? void 0 : data.length)) {\n        return of(void 0);\n      }\n      if (data.length === 1) {\n        return of(data[0]);\n      }\n      const ctx = {\n        interpolate: (v) => v\n      };\n      return of(data).pipe(\n        standardTransformers.mergeTransformer.operator({}, ctx),\n        map((d) => d[0])\n      );\n    })\n  );\n}\nconst annotationEventNames = [\n  {\n    key: \"time\",\n    field: (frame) => frame.fields.find((f) => f.type === FieldType.time),\n    placeholder: \"time, or the first time field\"\n  },\n  { key: \"timeEnd\", help: \"When this field is defined, the annotation will be treated as a range\" },\n  {\n    key: \"title\"\n  },\n  {\n    key: \"text\",\n    field: (frame) => frame.fields.find((f) => f.type === FieldType.string),\n    placeholder: \"text, or the first text field\"\n  },\n  { key: \"tags\", split: \",\", help: \"The results will be split on comma (,)\" },\n  {\n    key: \"id\"\n  }\n];\nconst publicDashboardEventNames = [\n  {\n    key: \"color\"\n  },\n  {\n    key: \"isRegion\"\n  },\n  {\n    key: \"source\"\n  }\n];\nconst alertEventAndAnnotationFields = [\n  ...config.publicDashboardAccessToken ? publicDashboardEventNames : [],\n  ...annotationEventNames,\n  { key: \"userId\" },\n  { key: \"login\" },\n  { key: \"email\" },\n  { key: \"prevState\" },\n  { key: \"newState\" },\n  { key: \"data\" },\n  { key: \"panelId\" },\n  { key: \"alertId\" },\n  { key: \"dashboardId\" },\n  { key: \"dashboardUID\" }\n];\nfunction getAnnotationsFromData(data, options) {\n  return of(data).pipe(\n    singleFrameFromPanelData(),\n    map((frame) => {\n      if (!(frame == null ? void 0 : frame.length)) {\n        return [];\n      }\n      let hasTime = false;\n      let hasText = false;\n      const byName = {};\n      for (const f of frame.fields) {\n        const name = getFieldDisplayName(f, frame);\n        byName[name.toLowerCase()] = f;\n      }\n      if (!options) {\n        options = {};\n      }\n      const fields = [];\n      for (const evts of alertEventAndAnnotationFields) {\n        const opt = options[evts.key] || {};\n        if (opt.source === AnnotationEventFieldSource.Skip) {\n          continue;\n        }\n        const setter = { key: evts.key, split: evts.split };\n        if (opt.source === AnnotationEventFieldSource.Text) {\n          setter.text = opt.value;\n        } else {\n          const lower = (opt.value || evts.key).toLowerCase();\n          setter.field = byName[lower];\n          if (!setter.field && evts.field) {\n            setter.field = evts.field(frame);\n          }\n        }\n        if (setter.field || setter.text) {\n          fields.push(setter);\n          if (setter.key === \"time\") {\n            hasTime = true;\n          } else if (setter.key === \"text\") {\n            hasText = true;\n          }\n        }\n      }\n      if (!hasTime || !hasText) {\n        console.error(\"Cannot process annotation fields. No time or text present.\");\n        return [];\n      }\n      const events = [];\n      for (let i = 0; i < frame.length; i++) {\n        const anno = {\n          type: \"default\",\n          color: \"red\"\n        };\n        for (const f of fields) {\n          let v = void 0;\n          if (f.text) {\n            v = f.text;\n          } else if (f.field) {\n            v = f.field.values.get(i);\n            if (v !== void 0 && f.regex) {\n              const match = f.regex.exec(v);\n              if (match) {\n                v = match[1] ? match[1] : match[0];\n              }\n            }\n          }\n          if (v !== null && v !== void 0) {\n            if (f.split && typeof v === \"string\") {\n              v = v.split(\",\");\n            }\n            anno[f.key] = v;\n          }\n        }\n        events.push(anno);\n      }\n      return events;\n    })\n  );\n}\nconst legacyRunner = [\n  \"prometheus\",\n  \"loki\",\n  \"elasticsearch\",\n  \"grafana-opensearch-datasource\"\n];\nfunction shouldUseLegacyRunner(datasource) {\n  const { type } = datasource;\n  return !datasource.annotations || legacyRunner.includes(type);\n}\n\nexport { annotationEventNames, getAnnotationsFromData, publicDashboardEventNames, shouldUseLegacyRunner, singleFrameFromPanelData, standardAnnotationSupport };\n//# sourceMappingURL=standardAnnotationsSupport.js.map\n","import { from, of } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\nimport { rangeUtil, CoreApp, DataTopic } from '@grafana/data';\nimport { getRunRequest } from '@grafana/runtime';\nimport { shouldUseLegacyRunner, standardAnnotationSupport } from './standardAnnotationsSupport.js';\nimport { LoadingState } from '@grafana/schema';\nimport { getEnrichedDataRequest } from '../../getEnrichedDataRequest.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nlet counter = 100;\nfunction getNextRequestId() {\n  return \"AQ\" + counter++;\n}\nfunction executeAnnotationQuery(datasource, timeRange, query, layer) {\n  var _a;\n  if (datasource.annotationQuery && shouldUseLegacyRunner(datasource)) {\n    console.warn(\"Using deprecated annotationQuery method, please upgrade your datasource\");\n    return from(\n      datasource.annotationQuery({\n        range: timeRange.state.value,\n        rangeRaw: timeRange.state.value.raw,\n        annotation: query,\n        dashboard: {}\n      })\n    ).pipe(\n      map((events) => ({\n        state: LoadingState.Done,\n        events\n      }))\n    );\n  }\n  const processor = __spreadValues(__spreadValues({}, standardAnnotationSupport), datasource.annotations);\n  const annotationWithDefaults = __spreadValues(__spreadValues({}, (_a = processor.getDefaultQuery) == null ? void 0 : _a.call(processor)), query);\n  const annotation = processor.prepareAnnotation(annotationWithDefaults);\n  if (!annotation) {\n    return of({\n      state: LoadingState.Done,\n      events: []\n    });\n  }\n  const processedQuery = processor.prepareQuery(annotation);\n  if (!processedQuery) {\n    return of({\n      state: LoadingState.Done,\n      events: []\n    });\n  }\n  const maxDataPoints = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n  const interval = rangeUtil.calculateInterval(timeRange.state.value, maxDataPoints, datasource.interval);\n  const scopedVars = {\n    __interval: { text: interval.interval, value: interval.interval },\n    __interval_ms: { text: interval.intervalMs.toString(), value: interval.intervalMs },\n    __annotation: { text: annotation.name, value: annotation },\n    __sceneObject: { text: \"__sceneObject\", value: layer }\n  };\n  const queryRequest = __spreadValues(__spreadProps(__spreadValues({\n    startTime: Date.now(),\n    requestId: getNextRequestId(),\n    range: timeRange.state.value,\n    maxDataPoints,\n    scopedVars\n  }, interval), {\n    app: CoreApp.Dashboard,\n    timezone: timeRange.getTimeZone(),\n    targets: [\n      __spreadProps(__spreadValues({}, processedQuery), {\n        refId: \"Anno\"\n      })\n    ]\n  }), getEnrichedDataRequest(layer));\n  const runRequest = getRunRequest();\n  return runRequest(datasource, queryRequest).pipe(\n    mergeMap((panelData) => {\n      const data = (panelData == null ? void 0 : panelData.series.length) ? panelData.series : panelData.annotations;\n      if (!(data == null ? void 0 : data.length)) {\n        return of({\n          state: panelData.state,\n          events: []\n        });\n      }\n      data.forEach((frame) => {\n        var _a2;\n        if (!((_a2 = frame.meta) == null ? void 0 : _a2.dataTopic)) {\n          frame.meta = __spreadProps(__spreadValues({}, frame.meta || {}), { dataTopic: DataTopic.Annotations });\n        }\n      });\n      return processor.processEvents(annotation, data).pipe(\n        map((events) => {\n          return {\n            state: panelData.state,\n            events: events || []\n          };\n        })\n      );\n    })\n  );\n}\n\nexport { executeAnnotationQuery };\n//# sourceMappingURL=standardAnnotationQuery.js.map\n","import { config } from '@grafana/runtime';\nimport { cloneDeep, partition, groupBy, map, every, find, head, concat } from 'lodash';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nfunction postProcessQueryResult(annotation, results) {\n  if (annotation.snapshotData) {\n    annotation = cloneDeep(annotation);\n    delete annotation.snapshotData;\n  }\n  const processed = results.map((item) => {\n    var _a;\n    const processedItem = __spreadValues({}, item);\n    processedItem.source = annotation;\n    processedItem.color = config.theme2.visualization.getColorByName(annotation.iconColor);\n    processedItem.type = annotation.name;\n    processedItem.isRegion = Boolean(processedItem.timeEnd && processedItem.time !== processedItem.timeEnd);\n    switch ((_a = processedItem.newState) == null ? void 0 : _a.toLowerCase()) {\n      case \"pending\":\n        processedItem.color = \"yellow\";\n        break;\n      case \"alerting\":\n        processedItem.color = \"red\";\n        break;\n      case \"ok\":\n        processedItem.color = \"green\";\n        break;\n      case \"normal\":\n        processedItem.color = \"green\";\n        break;\n      case \"no_data\":\n        processedItem.color = \"gray\";\n        break;\n      case \"nodata\":\n        processedItem.color = \"gray\";\n        break;\n    }\n    return processedItem;\n  });\n  return processed;\n}\nfunction dedupAnnotations(annotations) {\n  let dedup = [];\n  const events = partition(annotations, \"id\");\n  const eventsById = groupBy(events[0], \"id\");\n  dedup = map(eventsById, (eventGroup) => {\n    if (eventGroup.length > 1 && !every(eventGroup, isPanelAlert)) {\n      return find(eventGroup, (event) => {\n        return event.eventType !== \"panel-alert\";\n      });\n    } else {\n      return head(eventGroup);\n    }\n  });\n  dedup = concat(dedup, events[1]);\n  return dedup;\n}\nfunction isPanelAlert(event) {\n  return event.eventType === \"panel-alert\";\n}\n\nexport { dedupAnnotations, postProcessQueryResult };\n//# sourceMappingURL=utils.js.map\n","import { arrayToDataFrame, DataTopic } from '@grafana/data';\nimport { LoadingState } from '@grafana/schema';\nimport React from 'react';\nimport { map } from 'rxjs';\nimport { emptyPanelData } from '../../../core/SceneDataNode.js';\nimport { sceneGraph } from '../../../core/sceneGraph/index.js';\nimport { getDataSource } from '../../../utils/getDataSource.js';\nimport { getMessageFromError } from '../../../utils/getMessageFromError.js';\nimport { writeSceneLog } from '../../../utils/writeSceneLog.js';\nimport { registerQueryWithController } from '../../registerQueryWithController.js';\nimport { SceneDataLayerBase } from '../SceneDataLayerBase.js';\nimport { DataLayerControlSwitch } from '../SceneDataLayerControls.js';\nimport { executeAnnotationQuery } from './standardAnnotationQuery.js';\nimport { postProcessQueryResult, dedupAnnotations } from './utils.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass AnnotationsDataLayer extends SceneDataLayerBase {\n  constructor(initialState) {\n    super(\n      __spreadValues({\n        isEnabled: true\n      }, initialState),\n      [\"query\"]\n    );\n    this._scopedVars = { __sceneObject: { value: this, text: \"__sceneObject\" } };\n  }\n  onEnable() {\n    const timeRange = sceneGraph.getTimeRange(this);\n    this._timeRangeSub = timeRange.subscribeToState(() => {\n      this.runWithTimeRange(timeRange);\n    });\n  }\n  onDisable() {\n    var _a;\n    (_a = this._timeRangeSub) == null ? void 0 : _a.unsubscribe();\n  }\n  runLayer() {\n    writeSceneLog(\"AnnotationsDataLayer\", \"run layer\");\n    const timeRange = sceneGraph.getTimeRange(this);\n    this.runWithTimeRange(timeRange);\n  }\n  async runWithTimeRange(timeRange) {\n    const { query } = this.state;\n    if (this.querySub) {\n      this.querySub.unsubscribe();\n    }\n    if (this._variableDependency.hasDependencyInLoadingState()) {\n      writeSceneLog(\"AnnotationsDataLayer\", \"Variable dependency is in loading state, skipping query execution\");\n      return;\n    }\n    try {\n      const ds = await this.resolveDataSource(query);\n      let stream = executeAnnotationQuery(ds, timeRange, query, this).pipe(\n        registerQueryWithController({\n          type: \"annotations\",\n          origin: this,\n          cancel: () => this.cancelQuery()\n        }),\n        map((events) => {\n          const stateUpdate = this.processEvents(query, events);\n          return stateUpdate;\n        })\n      );\n      this.querySub = stream.subscribe((stateUpdate) => {\n        this.publishResults(stateUpdate);\n      });\n    } catch (e) {\n      this.publishResults(__spreadProps(__spreadValues({}, emptyPanelData), {\n        state: LoadingState.Error,\n        errors: [\n          {\n            message: getMessageFromError(e)\n          }\n        ]\n      }));\n      console.error(\"AnnotationsDataLayer error\", e);\n    }\n  }\n  async resolveDataSource(query) {\n    return await getDataSource(query.datasource || void 0, this._scopedVars);\n  }\n  processEvents(query, events) {\n    let processedEvents = postProcessQueryResult(query, events.events || []);\n    processedEvents = dedupAnnotations(processedEvents);\n    const stateUpdate = __spreadProps(__spreadValues({}, emptyPanelData), { state: events.state });\n    const df = arrayToDataFrame(processedEvents);\n    df.meta = __spreadProps(__spreadValues({}, df.meta), {\n      dataTopic: DataTopic.Annotations\n    });\n    stateUpdate.series = [df];\n    return stateUpdate;\n  }\n}\nAnnotationsDataLayer.Component = AnnotationsDataLayerRenderer;\nfunction AnnotationsDataLayerRenderer({ model }) {\n  const { isHidden } = model.useState();\n  if (isHidden) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(DataLayerControlSwitch, {\n    layer: model\n  });\n}\n\nexport { AnnotationsDataLayer };\n//# sourceMappingURL=AnnotationsDataLayer.js.map\n","import { SceneTimeRangeTransformerBase } from './SceneTimeRangeTransformerBase.js';\nimport { getDefaultTimeRange } from '@grafana/data';\nimport { evaluateTimeRange } from '../utils/evaluateTimeRange.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass SceneTimeZoneOverride extends SceneTimeRangeTransformerBase {\n  constructor(state) {\n    super(__spreadProps(__spreadValues({}, state), {\n      timeZone: state.timeZone,\n      from: \"now-6h\",\n      to: \"now\",\n      value: getDefaultTimeRange()\n    }));\n  }\n  ancestorTimeRangeChanged(timeRange) {\n    this.setState(__spreadProps(__spreadValues({}, timeRange), {\n      timeZone: this.state.timeZone,\n      value: evaluateTimeRange(\n        timeRange.from,\n        timeRange.to,\n        this.state.timeZone,\n        timeRange.fiscalYearStartMonth,\n        timeRange.UNSAFE_nowDelay\n      )\n    }));\n  }\n  getTimeZone() {\n    return this.state.timeZone;\n  }\n  onTimeZoneChange(timeZone) {\n    this.setState({\n      timeZone,\n      value: evaluateTimeRange(\n        this.state.from,\n        this.state.to,\n        this.state.timeZone,\n        this.getAncestorTimeRange().state.fiscalYearStartMonth,\n        this.state.UNSAFE_nowDelay\n      )\n    });\n  }\n}\n\nexport { SceneTimeZoneOverride };\n//# sourceMappingURL=SceneTimeZoneOverride.js.map\n","import React from 'react';\nimport { ReplaySubject } from 'rxjs';\nimport { emptyPanelData } from '../core/SceneDataNode.js';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { DataLayersMerger } from './DataLayersMerger.js';\nimport { setBaseClassState } from '../utils/utils.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass SceneDataLayerSetBase extends SceneObjectBase {\n  constructor() {\n    super(...arguments);\n    this.isDataLayer = true;\n    this._results = new ReplaySubject(1);\n    this._dataLayersMerger = new DataLayersMerger();\n  }\n  subscribeToAllLayers(layers) {\n    if (layers.length > 0) {\n      this.querySub = this._dataLayersMerger.getMergedStream(layers).subscribe(this._onLayerUpdateReceived.bind(this));\n    } else {\n      this._results.next({ origin: this, data: emptyPanelData });\n      this.setStateHelper({ data: emptyPanelData });\n    }\n  }\n  _onLayerUpdateReceived(results) {\n    var _a;\n    let series = [];\n    for (const result of results) {\n      if ((_a = result.data) == null ? void 0 : _a.series) {\n        series = series.concat(result.data.series);\n      }\n    }\n    const combinedData = __spreadProps(__spreadValues({}, emptyPanelData), { series });\n    this._results.next({ origin: this, data: combinedData });\n    this.setStateHelper({ data: combinedData });\n  }\n  getResultsStream() {\n    return this._results;\n  }\n  cancelQuery() {\n    var _a;\n    (_a = this.querySub) == null ? void 0 : _a.unsubscribe();\n  }\n  setStateHelper(state) {\n    setBaseClassState(this, state);\n  }\n}\nclass SceneDataLayerSet extends SceneDataLayerSetBase {\n  constructor(state) {\n    var _a, _b;\n    super({\n      name: (_a = state.name) != null ? _a : \"Data layers\",\n      layers: (_b = state.layers) != null ? _b : []\n    });\n    this.addActivationHandler(() => this._onActivate());\n  }\n  _onActivate() {\n    this._subs.add(\n      this.subscribeToState((newState, oldState) => {\n        var _a;\n        if (newState.layers !== oldState.layers) {\n          (_a = this.querySub) == null ? void 0 : _a.unsubscribe();\n          this.subscribeToAllLayers(newState.layers);\n        }\n      })\n    );\n    this.subscribeToAllLayers(this.state.layers);\n    return () => {\n      var _a;\n      (_a = this.querySub) == null ? void 0 : _a.unsubscribe();\n    };\n  }\n}\nSceneDataLayerSet.Component = ({ model }) => {\n  const { layers } = model.useState();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, layers.map((layer) => /* @__PURE__ */ React.createElement(layer.Component, {\n    model: layer,\n    key: layer.state.key\n  })));\n};\n\nexport { SceneDataLayerSet, SceneDataLayerSetBase };\n//# sourceMappingURL=SceneDataLayerSet.js.map\n","import { DataTopic, transformDataFrame, LoadingState } from '@grafana/data';\nimport { toDataQueryError } from '@grafana/runtime';\nimport { ReplaySubject, forkJoin, map, catchError, of } from 'rxjs';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { VariableDependencyConfig } from '../variables/VariableDependencyConfig.js';\nimport { SceneDataLayerSet } from './SceneDataLayerSet.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass SceneDataTransformer extends SceneObjectBase {\n  constructor(state) {\n    super(state);\n    this._results = new ReplaySubject(1);\n    this._variableDependency = new VariableDependencyConfig(\n      this,\n      {\n        statePaths: [\"transformations\"],\n        onReferencedVariableValueChanged: () => this.reprocessTransformations()\n      }\n    );\n    this.addActivationHandler(() => this.activationHandler());\n  }\n  activationHandler() {\n    const sourceData = this.getSourceData();\n    this._subs.add(sourceData.subscribeToState((state) => this.transform(state.data)));\n    if (sourceData.state.data) {\n      this.transform(sourceData.state.data);\n    }\n    return () => {\n      if (this._transformSub) {\n        this._transformSub.unsubscribe();\n      }\n    };\n  }\n  getSourceData() {\n    if (this.state.$data) {\n      if (this.state.$data instanceof SceneDataLayerSet) {\n        throw new Error(\"SceneDataLayerSet can not be used as data provider for SceneDataTransformer.\");\n      }\n      return this.state.$data;\n    }\n    if (!this.parent || !this.parent.parent) {\n      throw new Error(\"SceneDataTransformer must either have $data set on it or have a parent.parent with $data\");\n    }\n    return sceneGraph.getData(this.parent.parent);\n  }\n  setContainerWidth(width) {\n    if (this.state.$data && this.state.$data.setContainerWidth) {\n      this.state.$data.setContainerWidth(width);\n    }\n  }\n  isDataReadyToDisplay() {\n    const dataObject = this.getSourceData();\n    if (dataObject.isDataReadyToDisplay) {\n      return dataObject.isDataReadyToDisplay();\n    }\n    return true;\n  }\n  reprocessTransformations() {\n    this.transform(this.getSourceData().state.data, true);\n  }\n  cancelQuery() {\n    var _a, _b;\n    (_b = (_a = this.getSourceData()).cancelQuery) == null ? void 0 : _b.call(_a);\n  }\n  getResultsStream() {\n    return this._results;\n  }\n  clone(withState) {\n    const clone = super.clone(withState);\n    if (this._prevDataFromSource) {\n      clone[\"_prevDataFromSource\"] = this._prevDataFromSource;\n    }\n    return clone;\n  }\n  haveAlreadyTransformedData(data) {\n    if (!this._prevDataFromSource) {\n      return false;\n    }\n    if (data === this._prevDataFromSource) {\n      return true;\n    }\n    const { series, annotations } = this._prevDataFromSource;\n    if (data.series === series && data.annotations === annotations) {\n      if (this.state.data && data.state !== this.state.data.state) {\n        this.setState({ data: __spreadProps(__spreadValues({}, this.state.data), { state: data.state }) });\n      }\n      return true;\n    }\n    return false;\n  }\n  transform(data, force = false) {\n    var _a;\n    if (this.state.transformations.length === 0 || !data) {\n      this._prevDataFromSource = data;\n      this.setState({ data });\n      if (data) {\n        this._results.next({ origin: this, data });\n      }\n      return;\n    }\n    if (!force && this.haveAlreadyTransformedData(data)) {\n      return;\n    }\n    const seriesTransformations = this.state.transformations.filter((transformation) => {\n      if (\"options\" in transformation || \"topic\" in transformation) {\n        return transformation.topic == null || transformation.topic === DataTopic.Series;\n      }\n      return true;\n    }).map((transformation) => \"operator\" in transformation ? transformation.operator : transformation);\n    const annotationsTransformations = this.state.transformations.filter((transformation) => {\n      if (\"options\" in transformation || \"topic\" in transformation) {\n        return transformation.topic === DataTopic.Annotations;\n      }\n      return false;\n    }).map((transformation) => \"operator\" in transformation ? transformation.operator : transformation);\n    if (this._transformSub) {\n      this._transformSub.unsubscribe();\n    }\n    const ctx = {\n      interpolate: (value) => {\n        var _a2;\n        return sceneGraph.interpolate(this, value, (_a2 = data.request) == null ? void 0 : _a2.scopedVars);\n      }\n    };\n    let streams = [transformDataFrame(seriesTransformations, data.series, ctx)];\n    if (data.annotations && data.annotations.length > 0 && annotationsTransformations.length > 0) {\n      streams.push(transformDataFrame(annotationsTransformations, (_a = data.annotations) != null ? _a : []));\n    }\n    this._transformSub = forkJoin(streams).pipe(\n      map((values) => {\n        const transformedSeries = values[0];\n        const transformedAnnotations = values[1];\n        return __spreadProps(__spreadValues({}, data), {\n          series: transformedSeries,\n          annotations: transformedAnnotations != null ? transformedAnnotations : data.annotations\n        });\n      }),\n      catchError((err) => {\n        var _a2;\n        console.error(\"Error transforming data: \", err);\n        const sourceErr = ((_a2 = this.getSourceData().state.data) == null ? void 0 : _a2.errors) || [];\n        const transformationError = toDataQueryError(err);\n        transformationError.message = `Error transforming data: ${transformationError.message}`;\n        const result = __spreadProps(__spreadValues({}, data), {\n          state: LoadingState.Error,\n          errors: [...sourceErr, transformationError]\n        });\n        return of(result);\n      })\n    ).subscribe((transformedData) => {\n      this.setState({ data: transformedData });\n      this._results.next({ origin: this, data: transformedData });\n      this._prevDataFromSource = data;\n    });\n  }\n}\n\nexport { SceneDataTransformer };\n//# sourceMappingURL=SceneDataTransformer.js.map\n","import React from 'react';\nimport { VariableHide } from '@grafana/data';\nimport { SceneObjectBase, useSceneObjectState } from '../../core/SceneObjectBase.js';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { ControlsLabel } from '../../utils/ControlsLabel.js';\nimport { css } from '@emotion/css';\nimport { selectors } from '@grafana/e2e-selectors';\n\nclass VariableValueSelectors extends SceneObjectBase {\n}\nVariableValueSelectors.Component = VariableValueSelectorsRenderer;\nfunction VariableValueSelectorsRenderer({ model }) {\n  const variables = sceneGraph.getVariables(model).useState();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, variables.variables.map((variable) => /* @__PURE__ */ React.createElement(VariableValueSelectWrapper, {\n    key: variable.state.key,\n    variable,\n    layout: model.state.layout\n  })));\n}\nfunction VariableValueSelectWrapper({ variable, layout, showAlways, hideLabel }) {\n  const state = useSceneObjectState(variable, { shouldActivateOrKeepAlive: true });\n  if (state.hide === VariableHide.hideVariable && !showAlways) {\n    return null;\n  }\n  if (layout === \"vertical\") {\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      className: verticalContainer,\n      \"data-testid\": selectors.pages.Dashboard.SubMenu.submenuItem\n    }, /* @__PURE__ */ React.createElement(VariableLabel, {\n      variable,\n      layout,\n      hideLabel\n    }), /* @__PURE__ */ React.createElement(variable.Component, {\n      model: variable\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: containerStyle,\n    \"data-testid\": selectors.pages.Dashboard.SubMenu.submenuItem\n  }, /* @__PURE__ */ React.createElement(VariableLabel, {\n    variable,\n    hideLabel\n  }), /* @__PURE__ */ React.createElement(variable.Component, {\n    model: variable\n  }));\n}\nfunction VariableLabel({ variable, layout, hideLabel }) {\n  var _a, _b;\n  const { state } = variable;\n  if (variable.state.hide === VariableHide.hideLabel || hideLabel) {\n    return null;\n  }\n  const elementId = `var-${state.key}`;\n  const labelOrName = (_a = state.label) != null ? _a : state.name;\n  return /* @__PURE__ */ React.createElement(ControlsLabel, {\n    htmlFor: elementId,\n    isLoading: state.loading,\n    onCancel: () => {\n      var _a2;\n      return (_a2 = variable.onCancel) == null ? void 0 : _a2.call(variable);\n    },\n    label: labelOrName,\n    error: state.error,\n    layout,\n    description: (_b = state.description) != null ? _b : void 0\n  });\n}\nconst containerStyle = css({ display: \"flex\" });\nconst verticalContainer = css({ display: \"flex\", flexDirection: \"column\" });\n\nexport { VariableValueSelectWrapper, VariableValueSelectors };\n//# sourceMappingURL=VariableValueSelectors.js.map\n","import React from 'react';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { VariableValueSelectWrapper } from './VariableValueSelectors.js';\n\nclass VariableValueControl extends SceneObjectBase {\n}\nVariableValueControl.Component = VariableValueControlRenderer;\nfunction VariableValueControlRenderer({ model }) {\n  const variable = sceneGraph.lookupVariable(model.state.variableName, model);\n  if (!variable) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(VariableValueSelectWrapper, {\n    key: variable.state.key,\n    variable,\n    layout: model.state.layout,\n    showAlways: true\n  });\n}\n\nexport { VariableValueControl };\n//# sourceMappingURL=VariableValueControl.js.map\n","import { VariableRefresh } from '@grafana/data';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { writeSceneLog } from '../../utils/writeSceneLog.js';\nimport { SceneVariableValueChangedEvent } from '../types.js';\nimport { VariableValueRecorder } from '../VariableValueRecorder.js';\n\nclass SceneVariableSet extends SceneObjectBase {\n  constructor(state) {\n    super(state);\n    this._variablesThatHaveChanged = /* @__PURE__ */ new Set();\n    this._variablesToUpdate = /* @__PURE__ */ new Set();\n    this._updating = /* @__PURE__ */ new Map();\n    this._variableValueRecorder = new VariableValueRecorder();\n    this._variableDependency = new SceneVariableSetVariableDependencyHandler(\n      this._handleParentVariableUpdatesCompleted.bind(this)\n    );\n    this._onActivate = () => {\n      const timeRange = sceneGraph.getTimeRange(this);\n      this._subs.add(\n        this.subscribeToEvent(SceneVariableValueChangedEvent, (event) => this._handleVariableValueChanged(event.payload))\n      );\n      this._subs.add(\n        timeRange.subscribeToState(() => {\n          this._refreshTimeRangeBasedVariables();\n        })\n      );\n      this._subs.add(this.subscribeToState(this._onStateChanged));\n      this._checkForVariablesThatChangedWhileInactive();\n      for (const variable of this.state.variables) {\n        if (this._variableNeedsUpdate(variable)) {\n          this._variablesToUpdate.add(variable);\n        }\n      }\n      this._updateNextBatch();\n      return this._onDeactivate;\n    };\n    this._onDeactivate = () => {\n      var _a;\n      for (const update of this._updating.values()) {\n        (_a = update.subscription) == null ? void 0 : _a.unsubscribe();\n      }\n      for (const variable of this.state.variables) {\n        if (!this._variablesToUpdate.has(variable) && !this._updating.has(variable)) {\n          this._variableValueRecorder.recordCurrentValue(variable);\n        }\n      }\n      this._variablesToUpdate.clear();\n      this._updating.clear();\n    };\n    this._onStateChanged = (newState, oldState) => {\n      const variablesToUpdateCountStart = this._variablesToUpdate.size;\n      for (const variable of oldState.variables) {\n        if (!newState.variables.includes(variable)) {\n          const updating = this._updating.get(variable);\n          if (updating == null ? void 0 : updating.subscription) {\n            updating.subscription.unsubscribe();\n          }\n          this._updating.delete(variable);\n          this._variablesToUpdate.delete(variable);\n        }\n      }\n      for (const variable of newState.variables) {\n        if (!oldState.variables.includes(variable)) {\n          if (this._variableNeedsUpdate(variable)) {\n            this._variablesToUpdate.add(variable);\n          }\n        }\n      }\n      if (variablesToUpdateCountStart === 0 && this._variablesToUpdate.size > 0) {\n        this._updateNextBatch();\n      }\n    };\n    this.addActivationHandler(this._onActivate);\n  }\n  getByName(name) {\n    return this.state.variables.find((x) => x.state.name === name);\n  }\n  _refreshTimeRangeBasedVariables() {\n    for (const variable of this.state.variables) {\n      if (\"refresh\" in variable.state && variable.state.refresh === VariableRefresh.onTimeRangeChanged) {\n        this._variablesToUpdate.add(variable);\n      }\n    }\n    this._updateNextBatch();\n  }\n  _checkForVariablesThatChangedWhileInactive() {\n    if (!this._variableValueRecorder.hasValues()) {\n      return;\n    }\n    for (const variable of this.state.variables) {\n      if (this._variableValueRecorder.hasValueChanged(variable)) {\n        writeVariableTraceLog(variable, \"Changed while in-active\");\n        this._addDependentVariablesToUpdateQueue(variable);\n      }\n    }\n  }\n  _variableNeedsUpdate(variable) {\n    if (variable.isLazy) {\n      return false;\n    }\n    if (!variable.validateAndUpdate) {\n      return false;\n    }\n    if (this._variableValueRecorder.hasRecordedValue(variable)) {\n      writeVariableTraceLog(variable, \"Skipping updateAndValidate current value valid\");\n      return false;\n    }\n    return true;\n  }\n  _updateNextBatch() {\n    for (const variable of this._variablesToUpdate) {\n      if (!variable.validateAndUpdate) {\n        throw new Error(\"Variable added to variablesToUpdate but does not have validateAndUpdate\");\n      }\n      if (this._updating.has(variable)) {\n        continue;\n      }\n      if (sceneGraph.hasVariableDependencyInLoadingState(variable)) {\n        continue;\n      }\n      const variableToUpdate = {\n        variable\n      };\n      this._updating.set(variable, variableToUpdate);\n      writeVariableTraceLog(variable, \"updateAndValidate started\");\n      variableToUpdate.subscription = variable.validateAndUpdate().subscribe({\n        next: () => this._validateAndUpdateCompleted(variable),\n        complete: () => this._validateAndUpdateCompleted(variable),\n        error: (err) => this._handleVariableError(variable, err)\n      });\n    }\n  }\n  _validateAndUpdateCompleted(variable) {\n    var _a;\n    if (!this._updating.has(variable)) {\n      return;\n    }\n    const update = this._updating.get(variable);\n    (_a = update == null ? void 0 : update.subscription) == null ? void 0 : _a.unsubscribe();\n    this._updating.delete(variable);\n    this._variablesToUpdate.delete(variable);\n    writeVariableTraceLog(variable, \"updateAndValidate completed\");\n    this._notifyDependentSceneObjects(variable);\n    this._updateNextBatch();\n  }\n  cancel(variable) {\n    var _a;\n    const update = this._updating.get(variable);\n    (_a = update == null ? void 0 : update.subscription) == null ? void 0 : _a.unsubscribe();\n    this._updating.delete(variable);\n    this._variablesToUpdate.delete(variable);\n  }\n  _handleVariableError(variable, err) {\n    var _a;\n    const update = this._updating.get(variable);\n    (_a = update == null ? void 0 : update.subscription) == null ? void 0 : _a.unsubscribe();\n    this._updating.delete(variable);\n    this._variablesToUpdate.delete(variable);\n    variable.setState({ loading: false, error: err.message });\n    console.error(\"SceneVariableSet updateAndValidate error\", err);\n    writeVariableTraceLog(variable, \"updateAndValidate error\", err);\n  }\n  _handleVariableValueChanged(variableThatChanged) {\n    this._variablesThatHaveChanged.add(variableThatChanged);\n    this._addDependentVariablesToUpdateQueue(variableThatChanged);\n    if (!this._updating.has(variableThatChanged)) {\n      this._updateNextBatch();\n      this._notifyDependentSceneObjects(variableThatChanged);\n    }\n  }\n  _handleParentVariableUpdatesCompleted(variable, hasChanged) {\n    if (hasChanged) {\n      this._addDependentVariablesToUpdateQueue(variable);\n    }\n    if (this._variablesToUpdate.size > 0 && this._updating.size === 0) {\n      this._updateNextBatch();\n    }\n  }\n  _addDependentVariablesToUpdateQueue(variableThatChanged) {\n    for (const otherVariable of this.state.variables) {\n      if (otherVariable.variableDependency) {\n        if (otherVariable.variableDependency.hasDependencyOn(variableThatChanged.state.name)) {\n          writeVariableTraceLog(otherVariable, \"Added to update queue, dependant variable value changed\");\n          if (this._updating.has(otherVariable) && otherVariable.onCancel) {\n            otherVariable.onCancel();\n          }\n          this._variablesToUpdate.add(otherVariable);\n        }\n      }\n    }\n  }\n  _notifyDependentSceneObjects(variable) {\n    if (!this.parent) {\n      return;\n    }\n    this._traverseSceneAndNotify(this.parent, variable, this._variablesThatHaveChanged.has(variable));\n    this._variablesThatHaveChanged.delete(variable);\n  }\n  _traverseSceneAndNotify(sceneObject, variable, hasChanged) {\n    if (this === sceneObject) {\n      return;\n    }\n    if (!sceneObject.isActive) {\n      return;\n    }\n    if (sceneObject.state.$variables && sceneObject.state.$variables !== this) {\n      const localVar = sceneObject.state.$variables.getByName(variable.state.name);\n      if (localVar) {\n        return;\n      }\n    }\n    if (sceneObject.variableDependency) {\n      sceneObject.variableDependency.variableUpdateCompleted(variable, hasChanged);\n    }\n    sceneObject.forEachChild((child) => this._traverseSceneAndNotify(child, variable, hasChanged));\n  }\n  isVariableLoadingOrWaitingToUpdate(variable) {\n    if (variable.isAncestorLoading && variable.isAncestorLoading()) {\n      return true;\n    }\n    if (this._variablesToUpdate.has(variable) || this._updating.has(variable)) {\n      return true;\n    }\n    return sceneGraph.hasVariableDependencyInLoadingState(variable);\n  }\n}\nfunction writeVariableTraceLog(variable, message, err) {\n  if (err) {\n    writeSceneLog(\"SceneVariableSet\", `Variable[${variable.state.name}]: ${message}`, err);\n  } else {\n    writeSceneLog(\"SceneVariableSet\", `Variable[${variable.state.name}]: ${message}`);\n  }\n}\nclass SceneVariableSetVariableDependencyHandler {\n  constructor(_variableUpdatesCompleted) {\n    this._variableUpdatesCompleted = _variableUpdatesCompleted;\n    this._emptySet = /* @__PURE__ */ new Set();\n  }\n  getNames() {\n    return this._emptySet;\n  }\n  hasDependencyOn(name) {\n    return false;\n  }\n  variableUpdateCompleted(variable, hasChanged) {\n    this._variableUpdatesCompleted(variable, hasChanged);\n  }\n}\n\nexport { SceneVariableSet };\n//# sourceMappingURL=SceneVariableSet.js.map\n","import { SceneObjectBase } from '../../core/SceneObjectBase.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass ConstantVariable extends SceneObjectBase {\n  constructor(initialState) {\n    super(__spreadProps(__spreadValues({\n      type: \"constant\",\n      value: \"\",\n      name: \"\"\n    }, initialState), {\n      skipUrlSync: true\n    }));\n  }\n  getValue() {\n    return this.state.value;\n  }\n}\n\nexport { ConstantVariable };\n//# sourceMappingURL=ConstantVariable.js.map\n","import { of } from 'rxjs';\nimport { VariableDependencyConfig } from '../VariableDependencyConfig.js';\nimport { renderSelectForVariable } from '../components/VariableValueSelect.js';\nimport { MultiValueVariable } from './MultiValueVariable.js';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass CustomVariable extends MultiValueVariable {\n  constructor(initialState) {\n    super(__spreadValues({\n      type: \"custom\",\n      query: \"\",\n      value: \"\",\n      text: \"\",\n      options: [],\n      name: \"\"\n    }, initialState));\n    this._variableDependency = new VariableDependencyConfig(this, {\n      statePaths: [\"query\"]\n    });\n  }\n  getValueOptions(args) {\n    var _a;\n    const interpolated = sceneGraph.interpolate(this, this.state.query);\n    const match = (_a = interpolated.match(/(?:\\\\,|[^,])+/g)) != null ? _a : [];\n    const options = match.map((text) => {\n      var _a2;\n      text = text.replace(/\\\\,/g, \",\");\n      const textMatch = (_a2 = /^(.+)\\s:\\s(.+)$/g.exec(text)) != null ? _a2 : [];\n      if (textMatch.length === 3) {\n        const [, key, value] = textMatch;\n        return { label: key.trim(), value: value.trim() };\n      } else {\n        return { label: text.trim(), value: text.trim() };\n      }\n    });\n    return of(options);\n  }\n}\nCustomVariable.Component = ({ model }) => {\n  return renderSelectForVariable(model);\n};\n\nexport { CustomVariable };\n//# sourceMappingURL=CustomVariable.js.map\n","import { of } from 'rxjs';\nimport { stringToJsRegex } from '@grafana/data';\nimport { getDataSourceSrv } from '@grafana/runtime';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { VariableDependencyConfig } from '../VariableDependencyConfig.js';\nimport { renderSelectForVariable } from '../components/VariableValueSelect.js';\nimport { MultiValueVariable } from './MultiValueVariable.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass DataSourceVariable extends MultiValueVariable {\n  constructor(initialState) {\n    super(__spreadValues({\n      type: \"datasource\",\n      value: \"\",\n      text: \"\",\n      options: [],\n      name: \"\",\n      regex: \"\",\n      pluginId: \"\"\n    }, initialState));\n    this._variableDependency = new VariableDependencyConfig(this, {\n      statePaths: [\"regex\"]\n    });\n  }\n  getValueOptions(args) {\n    if (!this.state.pluginId) {\n      return of([]);\n    }\n    const dataSources = getDataSourceSrv().getList({ metrics: true, variables: false, pluginId: this.state.pluginId });\n    let regex;\n    if (this.state.regex) {\n      const interpolated = sceneGraph.interpolate(this, this.state.regex, void 0, \"regex\");\n      regex = stringToJsRegex(interpolated);\n    }\n    const options = [];\n    for (let i = 0; i < dataSources.length; i++) {\n      const source = dataSources[i];\n      if (isValid(source, regex)) {\n        options.push({ label: source.name, value: source.uid });\n      }\n      if (this.state.defaultOptionEnabled && isDefault(source, regex)) {\n        options.push({ label: \"default\", value: \"default\" });\n      }\n    }\n    if (options.length === 0) {\n      this.setState({ error: \"No data sources found\" });\n    } else if (this.state.error) {\n      this.setState({ error: null });\n    }\n    return of(options);\n  }\n}\nDataSourceVariable.Component = ({ model }) => {\n  return renderSelectForVariable(model);\n};\nfunction isValid(source, regex) {\n  if (!regex) {\n    return true;\n  }\n  return regex.exec(source.name);\n}\nfunction isDefault(source, regex) {\n  if (!source.isDefault) {\n    return false;\n  }\n  if (!regex) {\n    return true;\n  }\n  return regex.exec(\"default\");\n}\n\nexport { DataSourceVariable };\n//# sourceMappingURL=DataSourceVariable.js.map\n","import { VariableSupportType } from '@grafana/data';\n\nconst hasLegacyVariableSupport = (datasource) => {\n  return Boolean(datasource.metricFindQuery) && !Boolean(datasource.variables);\n};\nconst hasStandardVariableSupport = (datasource) => {\n  if (!datasource.variables) {\n    return false;\n  }\n  if (datasource.variables.getType() !== VariableSupportType.Standard) {\n    return false;\n  }\n  const variableSupport = datasource.variables;\n  return \"toDataQuery\" in variableSupport && Boolean(variableSupport.toDataQuery);\n};\nconst hasCustomVariableSupport = (datasource) => {\n  if (!datasource.variables) {\n    return false;\n  }\n  if (datasource.variables.getType() !== VariableSupportType.Custom) {\n    return false;\n  }\n  const variableSupport = datasource.variables;\n  return \"query\" in variableSupport && \"editor\" in variableSupport && Boolean(variableSupport.query) && Boolean(variableSupport.editor);\n};\n\nexport { hasCustomVariableSupport, hasLegacyVariableSupport, hasStandardVariableSupport };\n//# sourceMappingURL=guards.js.map\n","import { from, mergeMap, of } from 'rxjs';\nimport { LoadingState, getDefaultTimeRange } from '@grafana/data';\nimport { getRunRequest } from '@grafana/runtime';\nimport { hasStandardVariableSupport, hasLegacyVariableSupport, hasCustomVariableSupport } from './guards.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass StandardQueryRunner {\n  constructor(datasource, _runRequest = getRunRequest()) {\n    this.datasource = datasource;\n    this._runRequest = _runRequest;\n  }\n  getTarget(variable) {\n    if (hasStandardVariableSupport(this.datasource)) {\n      return this.datasource.variables.toDataQuery(ensureVariableQueryModelIsADataQuery(variable));\n    }\n    throw new Error(\"Couldn't create a target with supplied arguments.\");\n  }\n  runRequest(_, request) {\n    if (!hasStandardVariableSupport(this.datasource)) {\n      return getEmptyMetricFindValueObservable();\n    }\n    if (!this.datasource.variables.query) {\n      return this._runRequest(this.datasource, request);\n    }\n    return this._runRequest(this.datasource, request, this.datasource.variables.query.bind(this.datasource.variables));\n  }\n}\nclass LegacyQueryRunner {\n  constructor(datasource) {\n    this.datasource = datasource;\n  }\n  getTarget(variable) {\n    if (hasLegacyVariableSupport(this.datasource)) {\n      return variable.state.query;\n    }\n    throw new Error(\"Couldn't create a target with supplied arguments.\");\n  }\n  runRequest({ variable, searchFilter }, request) {\n    if (!hasLegacyVariableSupport(this.datasource)) {\n      return getEmptyMetricFindValueObservable();\n    }\n    return from(\n      this.datasource.metricFindQuery(variable.state.query, __spreadProps(__spreadValues({}, request), {\n        variable: {\n          name: variable.state.name,\n          type: variable.state.type\n        },\n        searchFilter\n      }))\n    ).pipe(\n      mergeMap((values) => {\n        if (!values || !values.length) {\n          return getEmptyMetricFindValueObservable();\n        }\n        const series = values;\n        return of({ series, state: LoadingState.Done, timeRange: request.range });\n      })\n    );\n  }\n}\nclass CustomQueryRunner {\n  constructor(datasource, _runRequest = getRunRequest()) {\n    this.datasource = datasource;\n    this._runRequest = _runRequest;\n  }\n  getTarget(variable) {\n    if (hasCustomVariableSupport(this.datasource)) {\n      return variable.state.query;\n    }\n    throw new Error(\"Couldn't create a target with supplied arguments.\");\n  }\n  runRequest(_, request) {\n    if (!hasCustomVariableSupport(this.datasource)) {\n      return getEmptyMetricFindValueObservable();\n    }\n    if (!this.datasource.variables.query) {\n      return this._runRequest(this.datasource, request);\n    }\n    return this._runRequest(this.datasource, request, this.datasource.variables.query.bind(this.datasource.variables));\n  }\n}\nfunction getEmptyMetricFindValueObservable() {\n  return of({ state: LoadingState.Done, series: [], timeRange: getDefaultTimeRange() });\n}\nfunction createQueryVariableRunnerFactory(datasource) {\n  if (hasStandardVariableSupport(datasource)) {\n    return new StandardQueryRunner(datasource, getRunRequest());\n  }\n  if (hasLegacyVariableSupport(datasource)) {\n    return new LegacyQueryRunner(datasource);\n  }\n  if (hasCustomVariableSupport(datasource)) {\n    return new CustomQueryRunner(datasource);\n  }\n  throw new Error(`Couldn't create a query runner for datasource ${datasource.type}`);\n}\nlet createQueryVariableRunner = createQueryVariableRunnerFactory;\nfunction ensureVariableQueryModelIsADataQuery(variable) {\n  var _a;\n  const query = (_a = variable.state.query) != null ? _a : \"\";\n  if (typeof query === \"string\") {\n    return { query, refId: `variable-${variable.state.name}` };\n  }\n  if (query.refId == null) {\n    return __spreadProps(__spreadValues({}, query), { refId: `variable-${variable.state.name}` });\n  }\n  return variable.state.query;\n}\n\nexport { createQueryVariableRunner };\n//# sourceMappingURL=createQueryVariableRunner.js.map\n","import { isNumber, uniqBy, sortBy, toLower } from 'lodash';\nimport { stringToJsRegex, VariableSort } from '@grafana/data';\n\nconst metricNamesToVariableValues = (variableRegEx, sort, metricNames) => {\n  var _a, _b, _c, _d, _e, _f;\n  let regex;\n  let options = [];\n  if (variableRegEx) {\n    regex = stringToJsRegex(variableRegEx);\n  }\n  for (let i = 0; i < metricNames.length; i++) {\n    const item = metricNames[i];\n    let text = item.text === void 0 || item.text === null ? item.value : item.text;\n    let value = item.value === void 0 || item.value === null ? item.text : item.value;\n    if (isNumber(value)) {\n      value = value.toString();\n    }\n    if (isNumber(text)) {\n      text = text.toString();\n    }\n    if (regex) {\n      const matches = getAllMatches(value, regex);\n      if (!matches.length) {\n        continue;\n      }\n      const valueGroup = matches.find((m) => m.groups && m.groups.value);\n      const textGroup = matches.find((m) => m.groups && m.groups.text);\n      const firstMatch = matches.find((m) => m.length > 1);\n      const manyMatches = matches.length > 1 && firstMatch;\n      if (valueGroup || textGroup) {\n        value = (_c = (_a = valueGroup == null ? void 0 : valueGroup.groups) == null ? void 0 : _a.value) != null ? _c : (_b = textGroup == null ? void 0 : textGroup.groups) == null ? void 0 : _b.text;\n        text = (_f = (_d = textGroup == null ? void 0 : textGroup.groups) == null ? void 0 : _d.text) != null ? _f : (_e = valueGroup == null ? void 0 : valueGroup.groups) == null ? void 0 : _e.value;\n      } else if (manyMatches) {\n        for (let j = 0; j < matches.length; j++) {\n          const match = matches[j];\n          options.push({ label: match[1], value: match[1] });\n        }\n        continue;\n      } else if (firstMatch) {\n        text = firstMatch[1];\n        value = firstMatch[1];\n      }\n    }\n    options.push({ label: text, value });\n  }\n  options = uniqBy(options, \"value\");\n  return sortVariableValues(options, sort);\n};\nconst getAllMatches = (str, regex) => {\n  const results = [];\n  let matches = null;\n  regex.lastIndex = 0;\n  do {\n    matches = regex.exec(str);\n    if (matches) {\n      results.push(matches);\n    }\n  } while (regex.global && matches && matches[0] !== \"\" && matches[0] !== void 0);\n  return results;\n};\nconst sortVariableValues = (options, sortOrder) => {\n  if (sortOrder === VariableSort.disabled) {\n    return options;\n  }\n  const sortByNumeric = (opt) => {\n    if (!opt.text) {\n      return -1;\n    }\n    const matches = opt.text.match(/.*?(\\d+).*/);\n    if (!matches || matches.length < 2) {\n      return -1;\n    } else {\n      return parseInt(matches[1], 10);\n    }\n  };\n  const sortByNaturalSort = (options2) => {\n    return options2.sort((a, b) => {\n      if (!a.text) {\n        return -1;\n      }\n      if (!b.text) {\n        return 1;\n      }\n      return a.text.localeCompare(b.text, void 0, { numeric: true });\n    });\n  };\n  switch (sortOrder) {\n    case VariableSort.alphabeticalAsc:\n      options = sortBy(options, \"label\");\n      break;\n    case VariableSort.alphabeticalDesc:\n      options = sortBy(options, \"label\").reverse();\n      break;\n    case VariableSort.numericalAsc:\n      options = sortBy(options, sortByNumeric);\n      break;\n    case VariableSort.numericalDesc:\n      options = sortBy(options, sortByNumeric);\n      options = options.reverse();\n      break;\n    case VariableSort.alphabeticalCaseInsensitiveAsc:\n      options = sortBy(options, (opt) => {\n        return toLower(opt.label);\n      });\n      break;\n    case VariableSort.alphabeticalCaseInsensitiveDesc:\n      options = sortBy(options, (opt) => {\n        return toLower(opt.label);\n      });\n      options = options.reverse();\n      break;\n    case (VariableSort.naturalAsc || 7):\n      options = sortByNaturalSort(options);\n      break;\n    case (VariableSort.naturalDesc || 8):\n      options = sortByNaturalSort(options);\n      options = options.reverse();\n      break;\n  }\n  return options;\n};\n\nexport { metricNamesToVariableValues, sortVariableValues };\n//# sourceMappingURL=utils.js.map\n","import { lastValueFrom, of, from, mergeMap, filter, take, throwError, catchError } from 'rxjs';\nimport { v4 } from 'uuid';\nimport { VariableRefresh, VariableSort, LoadingState, CoreApp } from '@grafana/data';\nimport { sceneGraph } from '../../../core/sceneGraph/index.js';\nimport { VariableDependencyConfig } from '../../VariableDependencyConfig.js';\nimport { renderSelectForVariable } from '../../components/VariableValueSelect.js';\nimport { MultiValueVariable } from '../MultiValueVariable.js';\nimport { createQueryVariableRunner } from './createQueryVariableRunner.js';\nimport { metricNamesToVariableValues } from './utils.js';\nimport { toMetricFindValues } from './toMetricFindValues.js';\nimport { getDataSource } from '../../../utils/getDataSource.js';\nimport { safeStringifyValue } from '../../utils.js';\nimport { SEARCH_FILTER_VARIABLE } from '../../constants.js';\nimport { debounce } from 'lodash';\nimport { registerQueryWithController } from '../../../querying/registerQueryWithController.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass QueryVariable extends MultiValueVariable {\n  constructor(initialState) {\n    super(__spreadValues({\n      type: \"query\",\n      name: \"\",\n      value: \"\",\n      text: \"\",\n      options: [],\n      datasource: null,\n      regex: \"\",\n      query: { refId: \"A\" },\n      refresh: VariableRefresh.onDashboardLoad,\n      sort: VariableSort.disabled\n    }, initialState));\n    this._variableDependency = new VariableDependencyConfig(this, {\n      statePaths: [\"regex\", \"query\", \"datasource\"]\n    });\n    this.onSearchChange = (searchFilter) => {\n      if (!containsSearchFilter(this.state.query)) {\n        return;\n      }\n      this._updateOptionsBasedOnSearchFilter(searchFilter);\n    };\n    this._updateOptionsBasedOnSearchFilter = debounce(async (searchFilter) => {\n      const result = await lastValueFrom(this.getValueOptions({ searchFilter }));\n      this.setState({ options: result, loading: false });\n    }, 400);\n  }\n  getValueOptions(args) {\n    if (!this.state.query) {\n      return of([]);\n    }\n    this.setState({ loading: true, error: null });\n    return from(\n      getDataSource(this.state.datasource, {\n        __sceneObject: { text: \"__sceneObject\", value: this }\n      })\n    ).pipe(\n      mergeMap((ds) => {\n        const runner = createQueryVariableRunner(ds);\n        const target = runner.getTarget(this);\n        const request = this.getRequest(target, args.searchFilter);\n        return runner.runRequest({ variable: this, searchFilter: args.searchFilter }, request).pipe(\n          registerQueryWithController({\n            type: \"variable\",\n            request,\n            origin: this\n          }),\n          filter((data) => data.state === LoadingState.Done || data.state === LoadingState.Error),\n          take(1),\n          mergeMap((data) => {\n            if (data.state === LoadingState.Error) {\n              return throwError(() => data.error);\n            }\n            return of(data);\n          }),\n          toMetricFindValues(),\n          mergeMap((values) => {\n            let regex = \"\";\n            if (this.state.regex) {\n              regex = sceneGraph.interpolate(this, this.state.regex, void 0, \"regex\");\n            }\n            return of(metricNamesToVariableValues(regex, this.state.sort, values));\n          }),\n          catchError((error) => {\n            if (error.cancelled) {\n              return of([]);\n            }\n            return throwError(() => error);\n          })\n        );\n      })\n    );\n  }\n  getRequest(target, searchFilter) {\n    const scopedVars = {\n      __sceneObject: { text: \"__sceneObject\", value: this }\n    };\n    if (searchFilter) {\n      scopedVars.__searchFilter = { value: searchFilter, text: searchFilter };\n    }\n    const range = sceneGraph.getTimeRange(this).state.value;\n    const request = {\n      app: CoreApp.Dashboard,\n      requestId: v4(),\n      timezone: \"\",\n      range,\n      interval: \"\",\n      intervalMs: 0,\n      targets: [target],\n      scopedVars,\n      startTime: Date.now()\n    };\n    return request;\n  }\n}\nQueryVariable.Component = ({ model }) => {\n  return renderSelectForVariable(model);\n};\nfunction containsSearchFilter(query) {\n  const str = safeStringifyValue(query);\n  return str.indexOf(SEARCH_FILTER_VARIABLE) > -1;\n}\n\nexport { QueryVariable };\n//# sourceMappingURL=QueryVariable.js.map\n","import { getProcessedDataFrames, getFieldDisplayName, FieldType, isDataFrame } from '@grafana/data';\nimport { map } from 'rxjs';\n\nfunction toMetricFindValues() {\n  return (source) => source.pipe(\n    map((panelData) => {\n      const frames = panelData.series;\n      if (!frames || !frames.length) {\n        return [];\n      }\n      if (areMetricFindValues(frames)) {\n        return frames;\n      }\n      if (frames[0].fields.length === 0) {\n        return [];\n      }\n      const processedDataFrames = getProcessedDataFrames(frames);\n      const metrics = [];\n      let valueIndex = -1;\n      let textIndex = -1;\n      let stringIndex = -1;\n      let expandableIndex = -1;\n      for (const frame of processedDataFrames) {\n        for (let index = 0; index < frame.fields.length; index++) {\n          const field = frame.fields[index];\n          const fieldName = getFieldDisplayName(field, frame, frames).toLowerCase();\n          if (field.type === FieldType.string && stringIndex === -1) {\n            stringIndex = index;\n          }\n          if (fieldName === \"text\" && field.type === FieldType.string && textIndex === -1) {\n            textIndex = index;\n          }\n          if (fieldName === \"value\" && field.type === FieldType.string && valueIndex === -1) {\n            valueIndex = index;\n          }\n          if (fieldName === \"expandable\" && (field.type === FieldType.boolean || field.type === FieldType.number) && expandableIndex === -1) {\n            expandableIndex = index;\n          }\n        }\n      }\n      if (stringIndex === -1) {\n        throw new Error(\"Couldn't find any field of type string in the results.\");\n      }\n      for (const frame of frames) {\n        for (let index = 0; index < frame.length; index++) {\n          const expandable = expandableIndex !== -1 ? frame.fields[expandableIndex].values.get(index) : void 0;\n          const string = frame.fields[stringIndex].values.get(index);\n          const text = textIndex !== -1 ? frame.fields[textIndex].values.get(index) : null;\n          const value = valueIndex !== -1 ? frame.fields[valueIndex].values.get(index) : null;\n          if (valueIndex === -1 && textIndex === -1) {\n            metrics.push({ text: string, value: string, expandable });\n            continue;\n          }\n          if (valueIndex === -1 && textIndex !== -1) {\n            metrics.push({ text, value: text, expandable });\n            continue;\n          }\n          if (valueIndex !== -1 && textIndex === -1) {\n            metrics.push({ text: value, value, expandable });\n            continue;\n          }\n          metrics.push({ text, value, expandable });\n        }\n      }\n      return metrics;\n    })\n  );\n}\nfunction areMetricFindValues(data) {\n  if (!data) {\n    return false;\n  }\n  if (!data.length) {\n    return true;\n  }\n  const firstValue = data[0];\n  if (isDataFrame(firstValue)) {\n    return false;\n  }\n  for (const firstValueKey in firstValue) {\n    if (!firstValue.hasOwnProperty(firstValueKey)) {\n      continue;\n    }\n    if (firstValue[firstValueKey] !== null && typeof firstValue[firstValueKey] !== \"string\" && typeof firstValue[firstValueKey] !== \"number\") {\n      continue;\n    }\n    const key = firstValueKey.toLowerCase();\n    if (key === \"text\" || key === \"value\") {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport { toMetricFindValues };\n//# sourceMappingURL=toMetricFindValues.js.map\n","function buildMetricTree(parent, depth) {\n  const chars = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\"];\n  const children = [];\n  if (depth > 5) {\n    return [];\n  }\n  for (const letter of chars) {\n    const nodeName = `${parent}${letter}`;\n    children.push({\n      name: nodeName,\n      children: buildMetricTree(nodeName, depth + 1)\n    });\n  }\n  return children;\n}\nfunction queryTree(children, query, queryIndex) {\n  if (queryIndex >= query.length) {\n    return children;\n  }\n  if (query[queryIndex] === \"*\") {\n    return children;\n  }\n  const nodeQuery = query[queryIndex];\n  let result = [];\n  let namesToMatch = [nodeQuery];\n  if (nodeQuery.startsWith(\"{\")) {\n    namesToMatch = nodeQuery.replace(/\\{|\\}/g, \"\").split(\",\");\n  }\n  for (const node of children) {\n    for (const nameToMatch of namesToMatch) {\n      if (nameToMatch.indexOf(\"*\") !== -1) {\n        const pattern = nameToMatch.replace(\"*\", \"\");\n        const regex = new RegExp(`^${pattern}.*`, \"gi\");\n        if (regex.test(node.name)) {\n          result = result.concat(queryTree([node], query, queryIndex + 1));\n        }\n      } else if (node.name === nameToMatch) {\n        result = result.concat(queryTree(node.children, query, queryIndex + 1));\n      }\n    }\n  }\n  return result;\n}\nfunction queryMetricTree(query) {\n  if (query.indexOf(\"value\") === 0) {\n    return [{ name: query, children: [] }];\n  }\n  const children = buildMetricTree(\"\", 0);\n  return queryTree(children, query.split(\".\"), 0);\n}\n\nexport { queryMetricTree };\n//# sourceMappingURL=metricTree.js.map\n","import { Subject, Observable } from 'rxjs';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { queryMetricTree } from '../../utils/metricTree.js';\nimport { VariableDependencyConfig } from '../VariableDependencyConfig.js';\nimport { renderSelectForVariable } from '../components/VariableValueSelect.js';\nimport { MultiValueVariable } from './MultiValueVariable.js';\nimport { VariableRefresh } from '@grafana/data';\nimport { getClosest } from '../../core/sceneGraph/utils.js';\nimport { SceneVariableSet } from '../sets/SceneVariableSet.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass TestVariable extends MultiValueVariable {\n  constructor(initialState, isLazy = false) {\n    super(__spreadValues({\n      type: \"custom\",\n      name: \"Test\",\n      value: \"Value\",\n      text: \"Text\",\n      query: \"Query\",\n      options: [],\n      refresh: VariableRefresh.onDashboardLoad\n    }, initialState));\n    this.completeUpdate = new Subject();\n    this.isGettingValues = true;\n    this.getValueOptionsCount = 0;\n    this.isLazy = false;\n    this._variableDependency = new VariableDependencyConfig(this, {\n      statePaths: [\"query\"]\n    });\n    this.isLazy = isLazy;\n  }\n  getValueOptions(args) {\n    const { delayMs } = this.state;\n    this.getValueOptionsCount += 1;\n    const queryController = sceneGraph.getQueryController(this);\n    return new Observable((observer) => {\n      const queryEntry = {\n        type: \"variable\",\n        origin: this,\n        cancel: () => observer.complete()\n      };\n      if (queryController) {\n        queryController.queryStarted(queryEntry);\n      }\n      this.setState({ loading: true });\n      if (this.state.throwError) {\n        throw new Error(this.state.throwError);\n      }\n      const interpolatedQuery = sceneGraph.interpolate(this, this.state.query);\n      const options = this.getOptions(interpolatedQuery);\n      const sub = this.completeUpdate.subscribe({\n        next: () => {\n          this.setState({ issuedQuery: interpolatedQuery, options, loading: false });\n          observer.next(options);\n          observer.complete();\n        }\n      });\n      let timeout;\n      if (delayMs) {\n        timeout = window.setTimeout(() => this.signalUpdateCompleted(), delayMs);\n      } else if (delayMs === 0) {\n        this.signalUpdateCompleted();\n      }\n      this.isGettingValues = true;\n      return () => {\n        sub.unsubscribe();\n        window.clearTimeout(timeout);\n        this.isGettingValues = false;\n        if (this.state.loading) {\n          this.setState({ loading: false });\n        }\n        if (queryController) {\n          queryController.queryCompleted(queryEntry);\n        }\n      };\n    });\n  }\n  cancel() {\n    const sceneVarSet = getClosest(this, (s) => s instanceof SceneVariableSet ? s : void 0);\n    sceneVarSet == null ? void 0 : sceneVarSet.cancel(this);\n  }\n  getOptions(interpolatedQuery) {\n    if (this.state.optionsToReturn) {\n      return this.state.optionsToReturn;\n    }\n    return queryMetricTree(interpolatedQuery).map((x) => ({ label: x.name, value: x.name }));\n  }\n  signalUpdateCompleted() {\n    this.completeUpdate.next(1);\n  }\n}\nTestVariable.Component = ({ model }) => {\n  return renderSelectForVariable(model);\n};\n\nexport { TestVariable };\n//# sourceMappingURL=TestVariable.js.map\n","import React, { useCallback } from 'react';\nimport { AutoSizeInput } from '@grafana/ui';\n\nfunction VariableValueInput({ model }) {\n  const { value, key, loading } = model.useState();\n  const onBlur = useCallback(\n    (e) => {\n      model.setValue(e.currentTarget.value);\n    },\n    [model]\n  );\n  const onKeyDown = useCallback(\n    (e) => {\n      if (e.key === \"Enter\") {\n        model.setValue(e.currentTarget.value);\n      }\n    },\n    [model]\n  );\n  return /* @__PURE__ */ React.createElement(AutoSizeInput, {\n    id: key,\n    placeholder: \"Enter value\",\n    minWidth: 15,\n    defaultValue: value,\n    loading,\n    onBlur,\n    onKeyDown\n  });\n}\n\nexport { VariableValueInput };\n//# sourceMappingURL=VariableValueInput.js.map\n","import React from 'react';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { SceneObjectUrlSyncConfig } from '../../services/SceneObjectUrlSyncConfig.js';\nimport { VariableValueInput } from '../components/VariableValueInput.js';\nimport { SceneVariableValueChangedEvent } from '../types.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass TextBoxVariable extends SceneObjectBase {\n  constructor(initialState) {\n    super(__spreadValues({\n      type: \"textbox\",\n      value: \"\",\n      name: \"\"\n    }, initialState));\n    this._urlSync = new SceneObjectUrlSyncConfig(this, { keys: () => [this.getKey()] });\n  }\n  getValue() {\n    return this.state.value;\n  }\n  setValue(newValue) {\n    if (newValue !== this.state.value) {\n      this.setState({ value: newValue });\n      this.publishEvent(new SceneVariableValueChangedEvent(this), true);\n    }\n  }\n  getKey() {\n    return `var-${this.state.name}`;\n  }\n  getUrlState() {\n    return { [this.getKey()]: this.state.value };\n  }\n  updateFromUrl(values) {\n    const update = {};\n    const val = values[this.getKey()];\n    if (typeof val === \"string\") {\n      update.value = val;\n    }\n    this.setState(update);\n  }\n}\nTextBoxVariable.Component = ({ model }) => {\n  return /* @__PURE__ */ React.createElement(VariableValueInput, {\n    model\n  });\n};\n\nexport { TextBoxVariable };\n//# sourceMappingURL=TextBoxVariable.js.map\n","import { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass LocalValueVariable extends SceneObjectBase {\n  constructor(initialState) {\n    super(__spreadProps(__spreadValues({\n      type: \"system\",\n      value: \"\",\n      text: \"\",\n      name: \"\",\n      isMulti: true,\n      includeAll: true\n    }, initialState), {\n      skipUrlSync: true\n    }));\n  }\n  getValue() {\n    return this.state.value;\n  }\n  getValueText() {\n    return this.state.text.toString();\n  }\n  isAncestorLoading() {\n    var _a, _b;\n    const ancestorScope = (_b = (_a = this.parent) == null ? void 0 : _a.parent) == null ? void 0 : _b.parent;\n    if (!ancestorScope) {\n      throw new Error(\"LocalValueVariable requires a parent SceneVariableSet that has an ancestor SceneVariableSet\");\n    }\n    const set = sceneGraph.getVariables(ancestorScope);\n    const parentVar = sceneGraph.lookupVariable(this.state.name, ancestorScope);\n    if (set && parentVar) {\n      return set.isVariableLoadingOrWaitingToUpdate(parentVar);\n    }\n    return false;\n  }\n}\n\nexport { LocalValueVariable };\n//# sourceMappingURL=LocalValueVariable.js.map\n","import { rangeUtil } from '@grafana/data';\nimport { VariableRefresh } from '@grafana/schema';\nimport { Select } from '@grafana/ui';\nimport React from 'react';\nimport { of } from 'rxjs';\nimport { sceneGraph } from '../../core/sceneGraph/index.js';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { SceneObjectUrlSyncConfig } from '../../services/SceneObjectUrlSyncConfig.js';\nimport { AUTO_VARIABLE_VALUE, AUTO_VARIABLE_TEXT } from '../constants.js';\nimport { SceneVariableValueChangedEvent } from '../types.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass IntervalVariable extends SceneObjectBase {\n  constructor(initialState) {\n    super(__spreadValues({\n      type: \"interval\",\n      value: \"\",\n      intervals: [\"1m\", \"10m\", \"30m\", \"1h\", \"6h\", \"12h\", \"1d\", \"7d\", \"14d\", \"30d\"],\n      name: \"\",\n      autoStepCount: 30,\n      autoMinInterval: \"10s\",\n      autoEnabled: false,\n      refresh: VariableRefresh.onTimeRangeChanged\n    }, initialState));\n    this._onChange = (value) => {\n      this.setState({ value: value.value });\n      this.publishEvent(new SceneVariableValueChangedEvent(this), true);\n    };\n    this._urlSync = new SceneObjectUrlSyncConfig(this, { keys: () => [this.getKey()] });\n  }\n  getKey() {\n    return `var-${this.state.name}`;\n  }\n  getUrlState() {\n    return { [this.getKey()]: this.state.value };\n  }\n  updateFromUrl(values) {\n    const update = {};\n    const val = values[this.getKey()];\n    if (typeof val === \"string\") {\n      if (val.startsWith(\"$__auto_interval_\")) {\n        update.value = AUTO_VARIABLE_VALUE;\n      } else {\n        update.value = val;\n      }\n    }\n    this.setState(update);\n  }\n  getOptionsForSelect() {\n    const { value: currentValue, intervals, autoEnabled } = this.state;\n    let options = intervals.map((interval) => ({ value: interval, label: interval }));\n    if (autoEnabled) {\n      options = [{ value: AUTO_VARIABLE_VALUE, label: AUTO_VARIABLE_TEXT }, ...options];\n    }\n    if (currentValue && !options.some((option) => option.value === currentValue)) {\n      options.push({ value: currentValue, label: currentValue });\n    }\n    return options;\n  }\n  getValue() {\n    const { value, autoStepCount, autoMinInterval } = this.state;\n    if (value === AUTO_VARIABLE_VALUE) {\n      return this.getAutoRefreshInteval(autoStepCount, autoMinInterval);\n    }\n    return value;\n  }\n  getAutoRefreshInteval(autoStepCount, minRefreshInterval) {\n    const timeRange = sceneGraph.getTimeRange(this).state.value;\n    const intervalObject = rangeUtil.calculateInterval(timeRange, autoStepCount, minRefreshInterval);\n    return intervalObject.interval;\n  }\n  validateAndUpdate() {\n    const { value, intervals } = this.state;\n    let shouldPublish = false;\n    if (value === AUTO_VARIABLE_VALUE) {\n      shouldPublish = true;\n    } else if (!value && intervals.length > 0) {\n      const firstOption = intervals[0];\n      this.setState({ value: firstOption });\n      shouldPublish = true;\n    }\n    if (shouldPublish) {\n      this.publishEvent(new SceneVariableValueChangedEvent(this), true);\n    }\n    return of({});\n  }\n}\nIntervalVariable.Component = ({ model }) => {\n  const { key, value } = model.useState();\n  return /* @__PURE__ */ React.createElement(Select, {\n    id: key,\n    placeholder: \"Select value\",\n    width: \"auto\",\n    value,\n    tabSelectsValue: false,\n    options: model.getOptionsForSelect(),\n    onChange: model._onChange\n  });\n};\n\nexport { IntervalVariable };\n//# sourceMappingURL=IntervalVariable.js.map\n","import { locationService } from '@grafana/runtime';\nimport { SceneObjectStateChangedEvent } from '../core/events.js';\nimport { writeSceneLog } from '../utils/writeSceneLog.js';\nimport { UniqueUrlKeyMapper } from './UniqueUrlKeyMapper.js';\nimport { syncStateFromUrl, isUrlValueEqual, getUrlState } from './utils.js';\n\nclass UrlSyncManager {\n  constructor() {\n    this._urlKeyMapper = new UniqueUrlKeyMapper();\n    this._stateSub = null;\n    this._locationSub = null;\n    this._ignoreNextLocationUpdate = false;\n    this._onLocationUpdate = (location) => {\n      if (this._ignoreNextLocationUpdate) {\n        this._ignoreNextLocationUpdate = false;\n        return;\n      }\n      if (this._lastPath !== location.pathname) {\n        return;\n      }\n      const urlParams = new URLSearchParams(location.search);\n      this._urlKeyMapper.rebuildIndex(this._sceneRoot);\n      syncStateFromUrl(this._sceneRoot, urlParams, this._urlKeyMapper);\n      this._lastPath = location.pathname;\n    };\n    this._onStateChanged = ({ payload }) => {\n      const changedObject = payload.changedObject;\n      if (changedObject.urlSync) {\n        const newUrlState = changedObject.urlSync.getUrlState();\n        const searchParams = locationService.getSearch();\n        const mappedUpdated = {};\n        this._urlKeyMapper.rebuildIndex(this._sceneRoot);\n        for (const [key, newUrlValue] of Object.entries(newUrlState)) {\n          const uniqueKey = this._urlKeyMapper.getUniqueKey(key, changedObject);\n          const currentUrlValue = searchParams.getAll(uniqueKey);\n          if (!isUrlValueEqual(currentUrlValue, newUrlValue)) {\n            mappedUpdated[uniqueKey] = newUrlValue;\n          }\n        }\n        if (Object.keys(mappedUpdated).length > 0) {\n          this._ignoreNextLocationUpdate = true;\n          locationService.partial(mappedUpdated, true);\n        }\n      }\n    };\n  }\n  initSync(root) {\n    if (!this._locationSub) {\n      writeSceneLog(\"UrlSyncManager\", \"New location listen\");\n      this._locationSub = locationService.getHistory().listen(this._onLocationUpdate);\n    }\n    if (this._stateSub) {\n      writeSceneLog(\"UrlSyncManager\", \"Unregister previous scene state subscription\", this._sceneRoot.state.key);\n      this._stateSub.unsubscribe();\n    }\n    this._sceneRoot = root;\n    this._lastPath = locationService.getLocation().pathname;\n    this._stateSub = root.subscribeToEvent(SceneObjectStateChangedEvent, this._onStateChanged);\n    this.syncFrom(this._sceneRoot);\n  }\n  cleanUp(root) {\n    if (this._sceneRoot !== root) {\n      return;\n    }\n    writeSceneLog(\"UrlSyncManager\", \"Clean up\");\n    if (this._locationSub) {\n      this._locationSub();\n      writeSceneLog(\"UrlSyncManager\", \"Unregister history listen\");\n      this._locationSub = null;\n    }\n    if (this._stateSub) {\n      this._stateSub.unsubscribe();\n      this._stateSub = null;\n      writeSceneLog(\n        \"UrlSyncManager\",\n        \"Root deactived, unsub to state\",\n        \"same key\",\n        this._sceneRoot.state.key === root.state.key\n      );\n    }\n  }\n  syncFrom(sceneObj) {\n    const urlParams = locationService.getSearch();\n    this._urlKeyMapper.rebuildIndex(this._sceneRoot);\n    syncStateFromUrl(sceneObj, urlParams, this._urlKeyMapper);\n  }\n  getUrlState(root) {\n    return getUrlState(root);\n  }\n}\nlet urlSyncManager;\nfunction getUrlSyncManager() {\n  if (!urlSyncManager) {\n    urlSyncManager = new UrlSyncManager();\n  }\n  return urlSyncManager;\n}\n\nexport { UrlSyncManager, getUrlSyncManager };\n//# sourceMappingURL=UrlSyncManager.js.map\n","import { css } from '@emotion/css';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { getUrlSyncManager } from '../services/UrlSyncManager.js';\nimport { setWindowGrafanaSceneContext } from '../utils/compatibility/setWindowGrafanaSceneContext.js';\n\nclass EmbeddedScene extends SceneObjectBase {\n  constructor(state) {\n    super(state);\n    this.addActivationHandler(() => {\n      const unsetGlobalScene = setWindowGrafanaSceneContext(this);\n      return () => {\n        unsetGlobalScene();\n        getUrlSyncManager().cleanUp(this);\n      };\n    });\n  }\n  initUrlSync() {\n    getUrlSyncManager().initSync(this);\n  }\n}\nEmbeddedScene.Component = EmbeddedSceneRenderer;\nfunction EmbeddedSceneRenderer({ model }) {\n  const { body, controls } = model.useState();\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.container\n  }, controls && /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.controls\n  }, controls.map((control) => /* @__PURE__ */ React.createElement(control.Component, {\n    key: control.state.key,\n    model: control\n  }))), /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.body\n  }, /* @__PURE__ */ React.createElement(body.Component, {\n    model: body\n  })));\n}\nconst getStyles = (theme) => {\n  return {\n    container: css({\n      flexGrow: 1,\n      display: \"flex\",\n      gap: theme.spacing(2),\n      minHeight: \"100%\",\n      flexDirection: \"column\"\n    }),\n    body: css({\n      flexGrow: 1,\n      display: \"flex\",\n      gap: theme.spacing(1)\n    }),\n    controls: css({\n      display: \"flex\",\n      gap: theme.spacing(2),\n      alignItems: \"flex-end\",\n      flexWrap: \"wrap\"\n    })\n  };\n};\n\nexport { EmbeddedScene };\n//# sourceMappingURL=EmbeddedScene.js.map\n","import { writeSceneLog } from '../writeSceneLog.js';\n\nfunction setWindowGrafanaSceneContext(activeScene) {\n  const prevScene = window.__grafanaSceneContext;\n  writeSceneLog(\"setWindowGrafanaScene\", \"set window.__grafanaSceneContext\", activeScene);\n  window.__grafanaSceneContext = activeScene;\n  return () => {\n    if (window.__grafanaSceneContext === activeScene) {\n      writeSceneLog(\"setWindowGrafanaScene\", \"restore window.__grafanaSceneContext\", prevScene);\n      window.__grafanaSceneContext = prevScene;\n    }\n  };\n}\n\nexport { setWindowGrafanaSceneContext };\n//# sourceMappingURL=setWindowGrafanaSceneContext.js.map\n","import React, { useEffect } from 'react';\nimport { Menu } from '@grafana/ui';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { selectors } from '@grafana/e2e-selectors';\n\nclass VizPanelMenu extends SceneObjectBase {\n  addItem(item) {\n    this.setState({\n      items: this.state.items ? [...this.state.items, item] : [item]\n    });\n  }\n  setItems(items) {\n    this.setState({\n      items\n    });\n  }\n}\nVizPanelMenu.Component = VizPanelMenuRenderer;\nfunction VizPanelMenuRenderer({ model }) {\n  const { items = [] } = model.useState();\n  const ref = React.useRef(null);\n  useEffect(() => {\n    if (ref.current) {\n      ref.current.focus();\n    }\n  }, []);\n  const renderItems = (items2) => {\n    return items2.map((item) => {\n      switch (item.type) {\n        case \"divider\":\n          return /* @__PURE__ */ React.createElement(Menu.Divider, {\n            key: item.text\n          });\n        case \"group\":\n          return /* @__PURE__ */ React.createElement(Menu.Group, {\n            key: item.text,\n            label: item.text\n          }, item.subMenu ? renderItems(item.subMenu) : void 0);\n        default:\n          return /* @__PURE__ */ React.createElement(Menu.Item, {\n            key: item.text,\n            label: item.text,\n            icon: item.iconClassName,\n            childItems: item.subMenu ? renderItems(item.subMenu) : void 0,\n            url: item.href,\n            onClick: item.onClick,\n            shortcut: item.shortcut,\n            testId: selectors.components.Panels.Panel.menuItems(item.text)\n          });\n      }\n    });\n  };\n  return /* @__PURE__ */ React.createElement(Menu, {\n    ref\n  }, renderItems(items));\n}\n\nexport { VizPanelMenu };\n//# sourceMappingURL=VizPanelMenu.js.map\n","import React from 'react';\nimport { SceneObjectBase } from '../../../core/SceneObjectBase.js';\nimport { SceneGridLayout } from './SceneGridLayout.js';\nimport { SceneGridRow } from './SceneGridRow.js';\n\nclass SceneGridItem extends SceneObjectBase {\n}\nSceneGridItem.Component = SceneGridItemRenderer;\nfunction SceneGridItemRenderer({ model }) {\n  const { body } = model.useState();\n  const parent = model.parent;\n  if (parent && !isSceneGridLayout(parent) && !isSceneGridRow(parent)) {\n    throw new Error(\"SceneGridItem must be a child of SceneGridLayout or SceneGridRow\");\n  }\n  if (!body) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(body.Component, {\n    model: body\n  });\n}\nfunction isSceneGridRow(child) {\n  return child instanceof SceneGridRow;\n}\nfunction isSceneGridLayout(child) {\n  return child instanceof SceneGridLayout;\n}\n\nexport { SceneGridItem, isSceneGridRow };\n//# sourceMappingURL=SceneGridItem.js.map\n","import { createElement, PureComponent } from 'react';\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n/**\n * Detect Element Resize.\n * https://github.com/sdecima/javascript-detect-element-resize\n * Sebastian Decima\n *\n * Forked from version 0.5.3; includes the following modifications:\n * 1)Guard against unsafe 'window' and 'document' references (to support SSR).\n * 2)Defer initialization code via a top-level function wrapper (to support SSR).\n * 3) Avoid unnecessary reflows by not measuring size for scroll events bubbling from children.\n * 4) Add nonce for style element.\n **/\n\n// Check `document` and `window` in case of server-side rendering\nvar windowObject = void 0;\nif (typeof window !== 'undefined') {\n  windowObject = window;\n\n  // eslint-disable-next-line no-restricted-globals\n} else if (typeof self !== 'undefined') {\n  // eslint-disable-next-line no-restricted-globals\n  windowObject = self;\n} else {\n  windowObject = global;\n}\n\nvar cancelFrame = null;\nvar requestFrame = null;\n\nvar TIMEOUT_DURATION = 20;\n\nvar clearTimeoutFn = windowObject.clearTimeout;\nvar setTimeoutFn = windowObject.setTimeout;\n\nvar cancelAnimationFrameFn = windowObject.cancelAnimationFrame || windowObject.mozCancelAnimationFrame || windowObject.webkitCancelAnimationFrame;\n\nvar requestAnimationFrameFn = windowObject.requestAnimationFrame || windowObject.mozRequestAnimationFrame || windowObject.webkitRequestAnimationFrame;\n\nif (cancelAnimationFrameFn == null || requestAnimationFrameFn == null) {\n  // For environments that don't support animation frame,\n  // fallback to a setTimeout based approach.\n  cancelFrame = clearTimeoutFn;\n  requestFrame = function requestAnimationFrameViaSetTimeout(callback) {\n    return setTimeoutFn(callback, TIMEOUT_DURATION);\n  };\n} else {\n  // Counter intuitively, environments that support animation frames can be trickier.\n  // Chrome's \"Throttle non-visible cross-origin iframes\" flag can prevent rAFs from being called.\n  // In this case, we should fallback to a setTimeout() implementation.\n  cancelFrame = function cancelFrame(_ref) {\n    var _ref2 = slicedToArray(_ref, 2),\n        animationFrameID = _ref2[0],\n        timeoutID = _ref2[1];\n\n    cancelAnimationFrameFn(animationFrameID);\n    clearTimeoutFn(timeoutID);\n  };\n  requestFrame = function requestAnimationFrameWithSetTimeoutFallback(callback) {\n    var animationFrameID = requestAnimationFrameFn(function animationFrameCallback() {\n      clearTimeoutFn(timeoutID);\n      callback();\n    });\n\n    var timeoutID = setTimeoutFn(function timeoutCallback() {\n      cancelAnimationFrameFn(animationFrameID);\n      callback();\n    }, TIMEOUT_DURATION);\n\n    return [animationFrameID, timeoutID];\n  };\n}\n\nfunction createDetectElementResize(nonce) {\n  var animationKeyframes = void 0;\n  var animationName = void 0;\n  var animationStartEvent = void 0;\n  var animationStyle = void 0;\n  var checkTriggers = void 0;\n  var resetTriggers = void 0;\n  var scrollListener = void 0;\n\n  var attachEvent = typeof document !== 'undefined' && document.attachEvent;\n  if (!attachEvent) {\n    resetTriggers = function resetTriggers(element) {\n      var triggers = element.__resizeTriggers__,\n          expand = triggers.firstElementChild,\n          contract = triggers.lastElementChild,\n          expandChild = expand.firstElementChild;\n      contract.scrollLeft = contract.scrollWidth;\n      contract.scrollTop = contract.scrollHeight;\n      expandChild.style.width = expand.offsetWidth + 1 + 'px';\n      expandChild.style.height = expand.offsetHeight + 1 + 'px';\n      expand.scrollLeft = expand.scrollWidth;\n      expand.scrollTop = expand.scrollHeight;\n    };\n\n    checkTriggers = function checkTriggers(element) {\n      return element.offsetWidth !== element.__resizeLast__.width || element.offsetHeight !== element.__resizeLast__.height;\n    };\n\n    scrollListener = function scrollListener(e) {\n      // Don't measure (which forces) reflow for scrolls that happen inside of children!\n      if (e.target.className && typeof e.target.className.indexOf === 'function' && e.target.className.indexOf('contract-trigger') < 0 && e.target.className.indexOf('expand-trigger') < 0) {\n        return;\n      }\n\n      var element = this;\n      resetTriggers(this);\n      if (this.__resizeRAF__) {\n        cancelFrame(this.__resizeRAF__);\n      }\n      this.__resizeRAF__ = requestFrame(function animationFrame() {\n        if (checkTriggers(element)) {\n          element.__resizeLast__.width = element.offsetWidth;\n          element.__resizeLast__.height = element.offsetHeight;\n          element.__resizeListeners__.forEach(function forEachResizeListener(fn) {\n            fn.call(element, e);\n          });\n        }\n      });\n    };\n\n    /* Detect CSS Animations support to detect element display/re-attach */\n    var animation = false;\n    var keyframeprefix = '';\n    animationStartEvent = 'animationstart';\n    var domPrefixes = 'Webkit Moz O ms'.split(' ');\n    var startEvents = 'webkitAnimationStart animationstart oAnimationStart MSAnimationStart'.split(' ');\n    var pfx = '';\n    {\n      var elm = document.createElement('fakeelement');\n      if (elm.style.animationName !== undefined) {\n        animation = true;\n      }\n\n      if (animation === false) {\n        for (var i = 0; i < domPrefixes.length; i++) {\n          if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n            pfx = domPrefixes[i];\n            keyframeprefix = '-' + pfx.toLowerCase() + '-';\n            animationStartEvent = startEvents[i];\n            animation = true;\n            break;\n          }\n        }\n      }\n    }\n\n    animationName = 'resizeanim';\n    animationKeyframes = '@' + keyframeprefix + 'keyframes ' + animationName + ' { from { opacity: 0; } to { opacity: 0; } } ';\n    animationStyle = keyframeprefix + 'animation: 1ms ' + animationName + '; ';\n  }\n\n  var createStyles = function createStyles(doc) {\n    if (!doc.getElementById('detectElementResize')) {\n      //opacity:0 works around a chrome bug https://code.google.com/p/chromium/issues/detail?id=286360\n      var css = (animationKeyframes ? animationKeyframes : '') + '.resize-triggers { ' + (animationStyle ? animationStyle : '') + 'visibility: hidden; opacity: 0; } ' + '.resize-triggers, .resize-triggers > div, .contract-trigger:before { content: \" \"; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',\n          head = doc.head || doc.getElementsByTagName('head')[0],\n          style = doc.createElement('style');\n\n      style.id = 'detectElementResize';\n      style.type = 'text/css';\n\n      if (nonce != null) {\n        style.setAttribute('nonce', nonce);\n      }\n\n      if (style.styleSheet) {\n        style.styleSheet.cssText = css;\n      } else {\n        style.appendChild(doc.createTextNode(css));\n      }\n\n      head.appendChild(style);\n    }\n  };\n\n  var addResizeListener = function addResizeListener(element, fn) {\n    if (attachEvent) {\n      element.attachEvent('onresize', fn);\n    } else {\n      if (!element.__resizeTriggers__) {\n        var doc = element.ownerDocument;\n        var elementStyle = windowObject.getComputedStyle(element);\n        if (elementStyle && elementStyle.position === 'static') {\n          element.style.position = 'relative';\n        }\n        createStyles(doc);\n        element.__resizeLast__ = {};\n        element.__resizeListeners__ = [];\n        (element.__resizeTriggers__ = doc.createElement('div')).className = 'resize-triggers';\n        var expandTrigger = doc.createElement('div');\n        expandTrigger.className = 'expand-trigger';\n        expandTrigger.appendChild(doc.createElement('div'));\n        var contractTrigger = doc.createElement('div');\n        contractTrigger.className = 'contract-trigger';\n        element.__resizeTriggers__.appendChild(expandTrigger);\n        element.__resizeTriggers__.appendChild(contractTrigger);\n        element.appendChild(element.__resizeTriggers__);\n        resetTriggers(element);\n        element.addEventListener('scroll', scrollListener, true);\n\n        /* Listen for a css animation to detect element display/re-attach */\n        if (animationStartEvent) {\n          element.__resizeTriggers__.__animationListener__ = function animationListener(e) {\n            if (e.animationName === animationName) {\n              resetTriggers(element);\n            }\n          };\n          element.__resizeTriggers__.addEventListener(animationStartEvent, element.__resizeTriggers__.__animationListener__);\n        }\n      }\n      element.__resizeListeners__.push(fn);\n    }\n  };\n\n  var removeResizeListener = function removeResizeListener(element, fn) {\n    if (attachEvent) {\n      element.detachEvent('onresize', fn);\n    } else {\n      element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\n      if (!element.__resizeListeners__.length) {\n        element.removeEventListener('scroll', scrollListener, true);\n        if (element.__resizeTriggers__.__animationListener__) {\n          element.__resizeTriggers__.removeEventListener(animationStartEvent, element.__resizeTriggers__.__animationListener__);\n          element.__resizeTriggers__.__animationListener__ = null;\n        }\n        try {\n          element.__resizeTriggers__ = !element.removeChild(element.__resizeTriggers__);\n        } catch (e) {\n          // Preact compat; see developit/preact-compat/issues/228\n        }\n      }\n    }\n  };\n\n  return {\n    addResizeListener: addResizeListener,\n    removeResizeListener: removeResizeListener\n  };\n}\n\nvar AutoSizer = function (_React$PureComponent) {\n  inherits(AutoSizer, _React$PureComponent);\n\n  function AutoSizer() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, AutoSizer);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = AutoSizer.__proto__ || Object.getPrototypeOf(AutoSizer)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      height: _this.props.defaultHeight || 0,\n      width: _this.props.defaultWidth || 0\n    }, _this._onResize = function () {\n      var _this$props = _this.props,\n          disableHeight = _this$props.disableHeight,\n          disableWidth = _this$props.disableWidth,\n          onResize = _this$props.onResize;\n\n\n      if (_this._parentNode) {\n        // Guard against AutoSizer component being removed from the DOM immediately after being added.\n        // This can result in invalid style values which can result in NaN values if we don't handle them.\n        // See issue #150 for more context.\n\n        var _height = _this._parentNode.offsetHeight || 0;\n        var _width = _this._parentNode.offsetWidth || 0;\n\n        var _style = window.getComputedStyle(_this._parentNode) || {};\n        var paddingLeft = parseInt(_style.paddingLeft, 10) || 0;\n        var paddingRight = parseInt(_style.paddingRight, 10) || 0;\n        var paddingTop = parseInt(_style.paddingTop, 10) || 0;\n        var paddingBottom = parseInt(_style.paddingBottom, 10) || 0;\n\n        var newHeight = _height - paddingTop - paddingBottom;\n        var newWidth = _width - paddingLeft - paddingRight;\n\n        if (!disableHeight && _this.state.height !== newHeight || !disableWidth && _this.state.width !== newWidth) {\n          _this.setState({\n            height: _height - paddingTop - paddingBottom,\n            width: _width - paddingLeft - paddingRight\n          });\n\n          onResize({ height: _height, width: _width });\n        }\n      }\n    }, _this._setRef = function (autoSizer) {\n      _this._autoSizer = autoSizer;\n    }, _temp), possibleConstructorReturn(_this, _ret);\n  }\n\n  createClass(AutoSizer, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var nonce = this.props.nonce;\n\n      if (this._autoSizer && this._autoSizer.parentNode && this._autoSizer.parentNode.ownerDocument && this._autoSizer.parentNode.ownerDocument.defaultView && this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement) {\n        // Delay access of parentNode until mount.\n        // This handles edge-cases where the component has already been unmounted before its ref has been set,\n        // As well as libraries like react-lite which have a slightly different lifecycle.\n        this._parentNode = this._autoSizer.parentNode;\n\n        // Defer requiring resize handler in order to support server-side rendering.\n        // See issue #41\n        this._detectElementResize = createDetectElementResize(nonce);\n        this._detectElementResize.addResizeListener(this._parentNode, this._onResize);\n\n        this._onResize();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this._detectElementResize && this._parentNode) {\n        this._detectElementResize.removeResizeListener(this._parentNode, this._onResize);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props,\n          children = _props.children,\n          className = _props.className,\n          disableHeight = _props.disableHeight,\n          disableWidth = _props.disableWidth,\n          style = _props.style;\n      var _state = this.state,\n          height = _state.height,\n          width = _state.width;\n\n      // Outer div should not force width/height since that may prevent containers from shrinking.\n      // Inner component should overflow and use calculated width/height.\n      // See issue #68 for more information.\n\n      var outerStyle = { overflow: 'visible' };\n      var childParams = {};\n\n      // Avoid rendering children before the initial measurements have been collected.\n      // At best this would just be wasting cycles.\n      var bailoutOnChildren = false;\n\n      if (!disableHeight) {\n        if (height === 0) {\n          bailoutOnChildren = true;\n        }\n        outerStyle.height = 0;\n        childParams.height = height;\n      }\n\n      if (!disableWidth) {\n        if (width === 0) {\n          bailoutOnChildren = true;\n        }\n        outerStyle.width = 0;\n        childParams.width = width;\n      }\n\n      return createElement(\n        'div',\n        {\n          className: className,\n          ref: this._setRef,\n          style: _extends({}, outerStyle, style)\n        },\n        !bailoutOnChildren && children(childParams)\n      );\n    }\n  }]);\n  return AutoSizer;\n}(PureComponent);\n\nAutoSizer.defaultProps = {\n  onResize: function onResize() {},\n  disableHeight: false,\n  disableWidth: false,\n  style: {}\n};\n\nexport default AutoSizer;\n","import React, { useState, useRef, useImperativeHandle } from 'react';\nimport { useEffectOnce } from 'react-use';\nimport { uniqueId } from 'lodash';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nfunction useUniqueId() {\n  var _a;\n  const idRefLazy = useRef(void 0);\n  (_a = idRefLazy.current) != null ? _a : idRefLazy.current = uniqueId();\n  return idRefLazy.current;\n}\nconst LazyLoader = React.forwardRef(\n  (_a, ref) => {\n    var _b = _a, { children, onLoad, onChange } = _b, rest = __objRest(_b, [\"children\", \"onLoad\", \"onChange\"]);\n    const id = useUniqueId();\n    const [loaded, setLoaded] = useState(false);\n    const [isInView, setIsInView] = useState(false);\n    const innerRef = useRef(null);\n    useImperativeHandle(ref, () => innerRef.current);\n    useEffectOnce(() => {\n      LazyLoader.addCallback(id, (entry) => {\n        if (!loaded && entry.isIntersecting) {\n          setLoaded(true);\n          onLoad == null ? void 0 : onLoad();\n        }\n        setIsInView(entry.isIntersecting);\n        onChange == null ? void 0 : onChange(entry.isIntersecting);\n      });\n      const wrapperEl = innerRef.current;\n      if (wrapperEl) {\n        LazyLoader.observer.observe(wrapperEl);\n      }\n      return () => {\n        delete LazyLoader.callbacks[id];\n        wrapperEl && LazyLoader.observer.unobserve(wrapperEl);\n        if (Object.keys(LazyLoader.callbacks).length === 0) {\n          LazyLoader.observer.disconnect();\n        }\n      };\n    });\n    return /* @__PURE__ */ React.createElement(\"div\", __spreadValues({\n      id,\n      ref: innerRef\n    }, rest), loaded && (typeof children === \"function\" ? children({ isInView }) : children));\n  }\n);\nLazyLoader.displayName = \"LazyLoader\";\nLazyLoader.callbacks = {};\nLazyLoader.addCallback = (id, c) => LazyLoader.callbacks[id] = c;\nLazyLoader.observer = new IntersectionObserver(\n  (entries) => {\n    for (const entry of entries) {\n      LazyLoader.callbacks[entry.target.id](entry);\n    }\n  },\n  { rootMargin: \"100px\" }\n);\n\nexport { LazyLoader, useUniqueId };\n//# sourceMappingURL=LazyLoader.js.map\n","import { useEffect } from 'react';\nvar useEffectOnce = function (effect) {\n    useEffect(effect, []);\n};\nexport default useEffectOnce;\n","import React, { useRef, useEffect } from 'react';\nimport ReactGridLayout from 'react-grid-layout';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport { GRID_CELL_VMARGIN, GRID_COLUMN_COUNT, GRID_CELL_HEIGHT } from './constants.js';\nimport { LazyLoader } from '../LazyLoader.js';\nimport { useStyles2 } from '@grafana/ui';\nimport { cx, css } from '@emotion/css';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nfunction SceneGridLayoutRenderer({ model }) {\n  const { children, isLazy, isDraggable, isResizable } = model.useState();\n  const ref = useRef(null);\n  useEffect(() => {\n    updateAnimationClass(ref, !!isDraggable);\n  }, [isDraggable]);\n  validateChildrenSize(children);\n  return /* @__PURE__ */ React.createElement(AutoSizer, null, ({ width, height }) => {\n    if (width === 0) {\n      return null;\n    }\n    const layout = model.buildGridLayout(width, height);\n    return /* @__PURE__ */ React.createElement(\"div\", {\n      ref,\n      style: { width: `${width}px`, height: \"100%\", position: \"relative\", zIndex: 1 },\n      className: \"react-grid-layout\"\n    }, /* @__PURE__ */ React.createElement(ReactGridLayout, {\n      width,\n      isDraggable: isDraggable && width > 768,\n      isResizable: isResizable != null ? isResizable : false,\n      containerPadding: [0, 0],\n      useCSSTransforms: true,\n      margin: [GRID_CELL_VMARGIN, GRID_CELL_VMARGIN],\n      cols: GRID_COLUMN_COUNT,\n      rowHeight: GRID_CELL_HEIGHT,\n      draggableHandle: `.grid-drag-handle-${model.state.key}`,\n      draggableCancel: \".grid-drag-cancel\",\n      layout,\n      onDragStart: model.onDragStart,\n      onDragStop: model.onDragStop,\n      onResizeStop: model.onResizeStop,\n      onLayoutChange: model.onLayoutChange,\n      isBounded: false,\n      resizeHandle: /* @__PURE__ */ React.createElement(ResizeHandle, null)\n    }, layout.map((gridItem, index) => /* @__PURE__ */ React.createElement(GridItemWrapper, {\n      key: gridItem.i,\n      grid: model,\n      layoutItem: gridItem,\n      index,\n      isLazy,\n      totalCount: layout.length\n    }))));\n  });\n}\nconst GridItemWrapper = React.forwardRef((props, ref) => {\n  var _b;\n  const _a = props, { grid, layoutItem, index, totalCount, isLazy, style, onLoad, onChange, children } = _a, divProps = __objRest(_a, [\"grid\", \"layoutItem\", \"index\", \"totalCount\", \"isLazy\", \"style\", \"onLoad\", \"onChange\", \"children\"]);\n  const sceneChild = grid.getSceneLayoutChild(layoutItem.i);\n  const className = (_b = sceneChild.getClassName) == null ? void 0 : _b.call(sceneChild);\n  const innerContent = /* @__PURE__ */ React.createElement(sceneChild.Component, {\n    model: sceneChild,\n    key: sceneChild.state.key\n  });\n  if (isLazy) {\n    return /* @__PURE__ */ React.createElement(LazyLoader, __spreadProps(__spreadValues({}, divProps), {\n      key: sceneChild.state.key,\n      \"data-griditem-key\": sceneChild.state.key,\n      className: cx(className, props.className),\n      style,\n      ref\n    }), innerContent, children);\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", __spreadProps(__spreadValues({}, divProps), {\n    ref,\n    key: sceneChild.state.key,\n    \"data-griditem-key\": sceneChild.state.key,\n    className: cx(className, props.className),\n    style\n  }), innerContent, children);\n});\nGridItemWrapper.displayName = \"GridItemWrapper\";\nfunction validateChildrenSize(children) {\n  if (children.some(\n    (c) => c.state.height === void 0 || c.state.width === void 0 || c.state.x === void 0 || c.state.y === void 0\n  )) {\n    throw new Error(\"All children must have a size specified\");\n  }\n}\nfunction updateAnimationClass(ref, isDraggable, retry) {\n  if (ref.current) {\n    if (isDraggable) {\n      ref.current.classList.add(\"react-grid-layout--enable-move-animations\");\n    } else {\n      ref.current.classList.remove(\"react-grid-layout--enable-move-animations\");\n    }\n  } else if (!retry) {\n    setTimeout(() => updateAnimationClass(ref, isDraggable, true), 50);\n  }\n}\nconst ResizeHandle = React.forwardRef((_a, ref) => {\n  var _b = _a, divProps = __objRest(_b, [\"handleAxis\"]);\n  const customCssClass = useStyles2(getResizeHandleStyles);\n  return /* @__PURE__ */ React.createElement(\"div\", __spreadProps(__spreadValues({\n    ref\n  }, divProps), {\n    className: `${customCssClass} scene-resize-handle`\n  }), /* @__PURE__ */ React.createElement(\"svg\", {\n    width: \"16px\",\n    height: \"16px\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /* @__PURE__ */ React.createElement(\"path\", {\n    d: \"M21 15L15 21M21 8L8 21\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  })));\n});\nResizeHandle.displayName = \"ResizeHandle\";\nfunction getResizeHandleStyles(theme) {\n  return css({\n    position: \"absolute\",\n    bottom: 0,\n    right: 0,\n    zIndex: 999,\n    padding: theme.spacing(1.5, 0, 0, 1.5),\n    color: theme.colors.border.strong,\n    cursor: \"se-resize\",\n    \"&:hover\": {\n      color: theme.colors.text.link\n    },\n    svg: {\n      display: \"block\"\n    },\n    \".react-resizable-hide &\": {\n      display: \"none\"\n    }\n  });\n}\n\nexport { SceneGridLayoutRenderer };\n//# sourceMappingURL=SceneGridLayoutRenderer.js.map\n","import { GRID_CELL_HEIGHT, GRID_CELL_VMARGIN } from './constants.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nfunction fitPanelsInHeight(cells, height) {\n  const visibleHeight = height - GRID_CELL_VMARGIN * 4;\n  const currentGridHeight = Math.max(...cells.map((cell) => cell.h + cell.y));\n  const visibleGridHeight = Math.floor(visibleHeight / (GRID_CELL_HEIGHT + GRID_CELL_VMARGIN));\n  const scaleFactor = currentGridHeight / visibleGridHeight;\n  return cells.map((cell) => {\n    return __spreadProps(__spreadValues({}, cell), {\n      y: Math.round(cell.y / scaleFactor) || 0,\n      h: Math.round(cell.h / scaleFactor) || 1\n    });\n  });\n}\n\nexport { fitPanelsInHeight };\n//# sourceMappingURL=utils.js.map\n","import { SceneObjectBase } from '../../../core/SceneObjectBase.js';\nimport { DEFAULT_PANEL_SPAN } from './constants.js';\nimport { isSceneGridRow } from './SceneGridItem.js';\nimport { SceneGridLayoutRenderer } from './SceneGridLayoutRenderer.js';\nimport { SceneGridRow } from './SceneGridRow.js';\nimport { fitPanelsInHeight } from './utils.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst _SceneGridLayout = class extends SceneObjectBase {\n  constructor(state) {\n    super(__spreadProps(__spreadValues({}, state), {\n      children: sortChildrenByPosition(state.children)\n    }));\n    this._skipOnLayoutChange = false;\n    this._oldLayout = [];\n    this._loadOldLayout = false;\n    this.onLayoutChange = (layout) => {\n      if (this._skipOnLayoutChange) {\n        this._skipOnLayoutChange = false;\n        return;\n      }\n      if (this._loadOldLayout) {\n        layout = [...this._oldLayout];\n        this._loadOldLayout = false;\n      }\n      for (const item of layout) {\n        const child = this.getSceneLayoutChild(item.i);\n        const nextSize = {\n          x: item.x,\n          y: item.y,\n          width: item.w,\n          height: item.h\n        };\n        if (!isItemSizeEqual(child.state, nextSize)) {\n          child.setState(__spreadValues({}, nextSize));\n        }\n      }\n      this.setState({ children: sortChildrenByPosition(this.state.children) });\n    };\n    this.onResizeStop = (_, o, n) => {\n      const child = this.getSceneLayoutChild(n.i);\n      child.setState({\n        width: n.w,\n        height: n.h\n      });\n    };\n    this.onDragStart = (gridLayout) => {\n      this._oldLayout = [...gridLayout];\n    };\n    this.onDragStop = (gridLayout, o, updatedItem) => {\n      const sceneChild = this.getSceneLayoutChild(updatedItem.i);\n      gridLayout = sortGridLayout(gridLayout);\n      for (let i = 0; i < gridLayout.length; i++) {\n        const gridItem = gridLayout[i];\n        const child = this.getSceneLayoutChild(gridItem.i);\n        const childSize = child.state;\n        if ((childSize == null ? void 0 : childSize.x) !== gridItem.x || (childSize == null ? void 0 : childSize.y) !== gridItem.y) {\n          child.setState({\n            x: gridItem.x,\n            y: gridItem.y\n          });\n        }\n      }\n      const indexOfUpdatedItem = gridLayout.findIndex((item) => item.i === updatedItem.i);\n      let newParent = this.findGridItemSceneParent(gridLayout, indexOfUpdatedItem - 1);\n      let newChildren = this.state.children;\n      if (sceneChild instanceof SceneGridRow && newParent instanceof SceneGridRow) {\n        if (!this.isRowDropValid(gridLayout, updatedItem, indexOfUpdatedItem)) {\n          this._loadOldLayout = true;\n        }\n        newParent = this;\n      }\n      if (newParent !== sceneChild.parent) {\n        newChildren = this.moveChildTo(sceneChild, newParent);\n      }\n      this.setState({ children: sortChildrenByPosition(newChildren) });\n      this._skipOnLayoutChange = true;\n    };\n  }\n  isDraggable() {\n    var _a;\n    return (_a = this.state.isDraggable) != null ? _a : false;\n  }\n  getDragClass() {\n    return `grid-drag-handle-${this.state.key}`;\n  }\n  getDragClassCancel() {\n    return `grid-drag-cancel`;\n  }\n  toggleRow(row) {\n    var _a, _b;\n    const isCollapsed = row.state.isCollapsed;\n    if (!isCollapsed) {\n      row.setState({ isCollapsed: true });\n      this.setState({});\n      return;\n    }\n    const rowChildren = row.state.children;\n    if (rowChildren.length === 0) {\n      row.setState({ isCollapsed: false });\n      this.setState({});\n      return;\n    }\n    const rowY = row.state.y;\n    const firstPanelYPos = (_a = rowChildren[0].state.y) != null ? _a : rowY;\n    const yDiff = firstPanelYPos - (rowY + 1);\n    let yMax = rowY;\n    for (const panel of rowChildren) {\n      const newSize = __spreadValues({}, panel.state);\n      newSize.y = (_b = newSize.y) != null ? _b : rowY;\n      newSize.y -= yDiff;\n      if (newSize.y !== panel.state.y) {\n        panel.setState(newSize);\n      }\n      yMax = Math.max(yMax, Number(newSize.y) + Number(newSize.height));\n    }\n    const pushDownAmount = yMax - rowY - 1;\n    for (const child of this.state.children) {\n      if (child.state.y > rowY) {\n        this.pushChildDown(child, pushDownAmount);\n      }\n      if (isSceneGridRow(child) && child !== row) {\n        for (const rowChild of child.state.children) {\n          if (rowChild.state.y > rowY) {\n            this.pushChildDown(rowChild, pushDownAmount);\n          }\n        }\n      }\n    }\n    row.setState({ isCollapsed: false });\n    this.setState({});\n  }\n  getSceneLayoutChild(key) {\n    for (const child of this.state.children) {\n      if (child.state.key === key) {\n        return child;\n      }\n      if (child instanceof SceneGridRow) {\n        for (const rowChild of child.state.children) {\n          if (rowChild.state.key === key) {\n            return rowChild;\n          }\n        }\n      }\n    }\n    throw new Error(\"Scene layout child not found for GridItem\");\n  }\n  pushChildDown(child, amount) {\n    child.setState({\n      y: child.state.y + amount\n    });\n  }\n  findGridItemSceneParent(layout, startAt) {\n    for (let i = startAt; i >= 0; i--) {\n      const gridItem = layout[i];\n      const sceneChild = this.getSceneLayoutChild(gridItem.i);\n      if (sceneChild instanceof SceneGridRow) {\n        if (sceneChild.state.isCollapsed) {\n          return this;\n        }\n        return sceneChild;\n      }\n    }\n    return this;\n  }\n  isRowDropValid(gridLayout, updatedItem, indexOfUpdatedItem) {\n    if (gridLayout[gridLayout.length - 1].i === updatedItem.i) {\n      return true;\n    }\n    const nextSceneChild = this.getSceneLayoutChild(gridLayout[indexOfUpdatedItem + 1].i);\n    if (nextSceneChild instanceof SceneGridRow) {\n      return true;\n    } else if (nextSceneChild.parent instanceof _SceneGridLayout) {\n      return true;\n    }\n    return false;\n  }\n  moveChildTo(child, target) {\n    const currentParent = child.parent;\n    let rootChildren = this.state.children;\n    const newChild = child.clone({ key: child.state.key });\n    if (currentParent instanceof SceneGridRow) {\n      const newRow = currentParent.clone();\n      newRow.setState({\n        children: newRow.state.children.filter((c) => c.state.key !== child.state.key)\n      });\n      rootChildren = rootChildren.map((c) => c === currentParent ? newRow : c);\n      if (target instanceof SceneGridRow) {\n        const targetRow = target.clone();\n        targetRow.setState({ children: [...targetRow.state.children, newChild] });\n        rootChildren = rootChildren.map((c) => c === target ? targetRow : c);\n      } else {\n        rootChildren = [...rootChildren, newChild];\n      }\n    } else {\n      if (!(target instanceof _SceneGridLayout)) {\n        rootChildren = rootChildren.filter((c) => c.state.key !== child.state.key);\n        const targetRow = target.clone();\n        targetRow.setState({ children: [...targetRow.state.children, newChild] });\n        rootChildren = rootChildren.map((c) => c === target ? targetRow : c);\n      }\n    }\n    return rootChildren;\n  }\n  toGridCell(child) {\n    var _a, _b;\n    const size = child.state;\n    let x = (_a = size.x) != null ? _a : 0;\n    let y = (_b = size.y) != null ? _b : 0;\n    const w = Number.isInteger(Number(size.width)) ? Number(size.width) : DEFAULT_PANEL_SPAN;\n    const h = Number.isInteger(Number(size.height)) ? Number(size.height) : DEFAULT_PANEL_SPAN;\n    let isDraggable = child.state.isDraggable;\n    let isResizable = child.state.isResizable;\n    if (child instanceof SceneGridRow) {\n      isDraggable = child.state.isCollapsed ? true : false;\n      isResizable = false;\n    }\n    return { i: child.state.key, x, y, h, w, isResizable, isDraggable };\n  }\n  buildGridLayout(width, height) {\n    let cells = [];\n    for (const child of this.state.children) {\n      cells.push(this.toGridCell(child));\n      if (child instanceof SceneGridRow && !child.state.isCollapsed) {\n        for (const rowChild of child.state.children) {\n          cells.push(this.toGridCell(rowChild));\n        }\n      }\n    }\n    cells = sortGridLayout(cells);\n    if (this.state.UNSAFE_fitPanels) {\n      cells = fitPanelsInHeight(cells, height);\n    }\n    if (width < 768) {\n      this._skipOnLayoutChange = true;\n      return cells.map((cell) => __spreadProps(__spreadValues({}, cell), { w: 24 }));\n    }\n    this._skipOnLayoutChange = false;\n    return cells;\n  }\n};\nlet SceneGridLayout = _SceneGridLayout;\nSceneGridLayout.Component = SceneGridLayoutRenderer;\nfunction isItemSizeEqual(a, b) {\n  return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\nfunction sortChildrenByPosition(children) {\n  children.forEach((child) => {\n    if (child instanceof SceneGridRow) {\n      child.setState({ children: sortChildrenByPosition(child.state.children) });\n    }\n  });\n  return [...children].sort((a, b) => {\n    return a.state.y - b.state.y || a.state.x - b.state.x;\n  });\n}\nfunction sortGridLayout(layout) {\n  return [...layout].sort((a, b) => a.y - b.y || a.x - b.x);\n}\n\nexport { SceneGridLayout };\n//# sourceMappingURL=SceneGridLayout.js.map\n","const DEFAULT_PANEL_SPAN = 4;\nconst GRID_CELL_HEIGHT = 30;\nconst GRID_CELL_VMARGIN = 8;\nconst GRID_COLUMN_COUNT = 24;\n\nexport { DEFAULT_PANEL_SPAN, GRID_CELL_HEIGHT, GRID_CELL_VMARGIN, GRID_COLUMN_COUNT };\n//# sourceMappingURL=constants.js.map\n","import { cx, css } from '@emotion/css';\nimport React from 'react';\nimport { useStyles2, Icon } from '@grafana/ui';\nimport { SceneObjectBase } from '../../../core/SceneObjectBase.js';\nimport { SceneGridLayout } from './SceneGridLayout.js';\nimport { GRID_COLUMN_COUNT } from './constants.js';\nimport { sceneGraph } from '../../../core/sceneGraph/index.js';\nimport { selectors } from '@grafana/e2e-selectors';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass SceneGridRow extends SceneObjectBase {\n  constructor(state) {\n    super(__spreadProps(__spreadValues({\n      children: state.children || [],\n      isCollapsible: state.isCollapsible || true,\n      title: state.title || \"\"\n    }, state), {\n      x: 0,\n      height: 1,\n      width: GRID_COLUMN_COUNT\n    }));\n    this.onCollapseToggle = () => {\n      if (!this.state.isCollapsible) {\n        return;\n      }\n      this.getGridLayout().toggleRow(this);\n    };\n  }\n  getGridLayout() {\n    const layout = this.parent;\n    if (!layout || !(layout instanceof SceneGridLayout)) {\n      throw new Error(\"SceneGridRow must be a child of SceneGridLayout\");\n    }\n    return layout;\n  }\n  getUrlState() {\n    return { rowc: this.state.isCollapsed ? \"1\" : \"0\" };\n  }\n  updateFromUrl(values) {\n    if (values.rowc == null) {\n      return;\n    }\n    if (values.rowc !== this.getUrlState().rowc) {\n      this.onCollapseToggle();\n    }\n  }\n}\nSceneGridRow.Component = SceneGridRowRenderer;\nfunction SceneGridRowRenderer({ model }) {\n  const styles = useStyles2(getSceneGridRowStyles);\n  const { isCollapsible, isCollapsed, title, actions, children } = model.useState();\n  const layout = model.getGridLayout();\n  const layoutDragClass = layout.getDragClass();\n  const isDraggable = layout.isDraggable();\n  const count = children ? children.length : 0;\n  const panels = count === 1 ? \"panel\" : \"panels\";\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: cx(styles.row, isCollapsed && styles.rowCollapsed)\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.rowTitleAndActionsGroup\n  }, /* @__PURE__ */ React.createElement(\"button\", {\n    onClick: model.onCollapseToggle,\n    className: styles.rowTitleButton,\n    \"aria-label\": isCollapsed ? \"Expand row\" : \"Collapse row\",\n    \"data-testid\": selectors.components.DashboardRow.title(sceneGraph.interpolate(model, title, void 0, \"text\"))\n  }, isCollapsible && /* @__PURE__ */ React.createElement(Icon, {\n    name: isCollapsed ? \"angle-right\" : \"angle-down\"\n  }), /* @__PURE__ */ React.createElement(\"span\", {\n    className: styles.rowTitle,\n    role: \"heading\"\n  }, sceneGraph.interpolate(model, title, void 0, \"text\"))), /* @__PURE__ */ React.createElement(\"span\", {\n    className: cx(styles.panelCount, isCollapsed && styles.panelCountCollapsed)\n  }, \"(\", count, \" \", panels, \")\"), actions && /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.rowActions\n  }, /* @__PURE__ */ React.createElement(actions.Component, {\n    model: actions\n  }))), isDraggable && isCollapsed && /* @__PURE__ */ React.createElement(\"div\", {\n    className: cx(styles.dragHandle, layoutDragClass)\n  }, /* @__PURE__ */ React.createElement(Icon, {\n    name: \"draggabledots\"\n  })));\n}\nconst getSceneGridRowStyles = (theme) => {\n  return {\n    row: css({\n      width: \"100%\",\n      height: \"30px\",\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      gap: theme.spacing(1)\n    }),\n    rowTitleButton: css({\n      display: \"flex\",\n      alignItems: \"center\",\n      cursor: \"pointer\",\n      background: \"transparent\",\n      border: \"none\",\n      gap: theme.spacing(1)\n    }),\n    rowCollapsed: css({\n      borderBottom: `1px solid ${theme.colors.border.weak}`\n    }),\n    rowTitle: css({\n      fontSize: theme.typography.h5.fontSize,\n      fontWeight: theme.typography.fontWeightMedium\n    }),\n    collapsedInfo: css({\n      fontSize: theme.typography.bodySmall.fontSize,\n      color: theme.colors.text.secondary,\n      display: \"flex\",\n      alignItems: \"center\",\n      flexGrow: 1\n    }),\n    rowTitleAndActionsGroup: css({\n      display: \"flex\",\n      \"&:hover, &:focus-within\": {\n        \"& > div\": {\n          opacity: 1\n        }\n      }\n    }),\n    rowActions: css({\n      display: \"flex\",\n      opacity: 0,\n      transition: \"200ms opacity ease-in 200ms\",\n      \"&:hover, &:focus-within\": {\n        opacity: 1\n      }\n    }),\n    dragHandle: css({\n      display: \"flex\",\n      padding: theme.spacing(0, 1),\n      alignItems: \"center\",\n      justifyContent: \"flex-end\",\n      cursor: \"move\",\n      color: theme.colors.text.secondary,\n      \"&:hover\": {\n        color: theme.colors.text.primary\n      }\n    }),\n    panelCount: css({\n      paddingLeft: theme.spacing(2),\n      color: theme.colors.text.secondary,\n      fontStyle: \"italic\",\n      fontSize: theme.typography.size.sm,\n      fontWeight: \"normal\",\n      display: \"none\",\n      lineHeight: \"30px\"\n    }),\n    panelCountCollapsed: css({\n      display: \"inline-block\"\n    })\n  };\n};\n\nexport { SceneGridRow, SceneGridRowRenderer, getSceneGridRowStyles };\n//# sourceMappingURL=SceneGridRow.js.map\n","import { cx, css } from '@emotion/css';\nimport React from 'react';\nimport { useStyles2, ToolbarButton, Icon } from '@grafana/ui';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { getSceneGridRowStyles } from './layout/grid/SceneGridRow.js';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\n\nclass NestedScene extends SceneObjectBase {\n  constructor() {\n    super(...arguments);\n    this.onToggle = () => {\n      this.setState({\n        isCollapsed: !this.state.isCollapsed\n      });\n    };\n    this.onRemove = () => {\n      const parent = this.parent;\n      if (isSceneLayoutItem(parent)) {\n        parent.setState({\n          body: void 0\n        });\n      }\n    };\n  }\n}\nNestedScene.Component = NestedSceneRenderer;\nfunction NestedSceneRenderer({ model }) {\n  const { title, isCollapsed, canCollapse, canRemove, body, controls } = model.useState();\n  const gridRow = useStyles2(getSceneGridRowStyles);\n  const styles = useStyles2(getStyles);\n  const toolbarControls = (controls != null ? controls : []).map((action) => /* @__PURE__ */ React.createElement(action.Component, {\n    key: action.state.key,\n    model: action\n  }));\n  if (canRemove) {\n    toolbarControls.push(\n      /* @__PURE__ */ React.createElement(ToolbarButton, {\n        icon: \"times\",\n        variant: \"default\",\n        onClick: model.onRemove,\n        key: \"remove-button\",\n        \"aria-label\": \"Remove scene\"\n      })\n    );\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.wrapper\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: cx(styles.row, isCollapsed && styles.rowCollapsed)\n  }, /* @__PURE__ */ React.createElement(\"button\", {\n    onClick: model.onToggle,\n    className: gridRow.rowTitleButton,\n    \"aria-label\": isCollapsed ? \"Expand scene\" : \"Collapse scene\"\n  }, canCollapse && /* @__PURE__ */ React.createElement(Icon, {\n    name: isCollapsed ? \"angle-right\" : \"angle-down\"\n  }), /* @__PURE__ */ React.createElement(\"span\", {\n    className: gridRow.rowTitle,\n    role: \"heading\"\n  }, sceneGraph.interpolate(model, title, void 0, \"text\"))), /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.actions\n  }, toolbarControls)), !isCollapsed && /* @__PURE__ */ React.createElement(body.Component, {\n    model: body\n  }));\n}\nconst getStyles = (theme) => ({\n  wrapper: css({\n    display: \"flex\",\n    flexDirection: \"column\",\n    flexGrow: 1,\n    gap: theme.spacing(1)\n  }),\n  row: css({\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    gap: theme.spacing(1)\n  }),\n  rowCollapsed: css({\n    borderBottom: `1px solid ${theme.colors.border.weak}`,\n    paddingBottom: theme.spacing(1)\n  }),\n  actions: css({\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: theme.spacing(1),\n    justifyContent: \"flex-end\",\n    flexGrow: 1\n  })\n});\nfunction isSceneLayoutItem(x) {\n  return \"body\" in x.state;\n}\n\nexport { NestedScene, NestedSceneRenderer };\n//# sourceMappingURL=NestedScene.js.map\n","import React from 'react';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\nimport { VariableDependencyConfig } from '../variables/VariableDependencyConfig.js';\nimport { useTheme2 } from '@grafana/ui';\nimport { css } from '@emotion/css';\n\nclass SceneCanvasText extends SceneObjectBase {\n  constructor() {\n    super(...arguments);\n    this._variableDependency = new VariableDependencyConfig(this, { statePaths: [\"text\"] });\n  }\n}\nSceneCanvasText.Component = ({ model }) => {\n  const { text, fontSize = 20, align = \"left\", key, spacing } = model.useState();\n  const theme = useTheme2();\n  const style = css({\n    fontSize,\n    display: \"flex\",\n    flexGrow: 1,\n    alignItems: \"center\",\n    padding: spacing ? theme.spacing(spacing, 0) : void 0,\n    justifyContent: align\n  });\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: style,\n    \"data-testid\": key\n  }, sceneGraph.interpolate(model, text));\n};\n\nexport { SceneCanvasText };\n//# sourceMappingURL=SceneCanvasText.js.map\n","import React from 'react';\nimport { ToolbarButton, Input } from '@grafana/ui';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { ControlsLabel } from '../utils/ControlsLabel.js';\n\nclass SceneToolbarButton extends SceneObjectBase {\n}\nSceneToolbarButton.Component = ({ model }) => {\n  const state = model.useState();\n  return /* @__PURE__ */ React.createElement(ToolbarButton, {\n    onClick: state.onClick,\n    icon: state.icon\n  });\n};\nclass SceneToolbarInput extends SceneObjectBase {\n}\nSceneToolbarInput.Component = ({ model }) => {\n  const state = model.useState();\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    style: { display: \"flex\" }\n  }, state.label && /* @__PURE__ */ React.createElement(ControlsLabel, {\n    label: state.label\n  }), /* @__PURE__ */ React.createElement(Input, {\n    defaultValue: state.value,\n    width: 8,\n    onBlur: (evt) => {\n      model.state.onChange(parseInt(evt.currentTarget.value, 10));\n    }\n  }));\n};\n\nexport { SceneToolbarButton, SceneToolbarInput };\n//# sourceMappingURL=SceneToolbarButton.js.map\n","import React from 'react';\nimport { TimeRangePicker } from '@grafana/ui';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\nimport { toUtc } from '@grafana/data';\n\nclass SceneTimePicker extends SceneObjectBase {\n  constructor() {\n    super(...arguments);\n    this.onZoom = () => {\n      const timeRange = sceneGraph.getTimeRange(this);\n      const zoomedTimeRange = getZoomedTimeRange(timeRange.state.value, 2);\n      timeRange.onTimeRangeChange(zoomedTimeRange);\n    };\n    this.onChangeFiscalYearStartMonth = (month) => {\n      const timeRange = sceneGraph.getTimeRange(this);\n      timeRange.setState({ fiscalYearStartMonth: month });\n    };\n    this.onMoveBackward = () => {\n      const timeRange = sceneGraph.getTimeRange(this);\n      const {\n        state: { value: range }\n      } = timeRange;\n      timeRange.onTimeRangeChange(getShiftedTimeRange(TimeRangeDirection.Backward, range, Date.now()));\n    };\n    this.onMoveForward = () => {\n      const timeRange = sceneGraph.getTimeRange(this);\n      const {\n        state: { value: range }\n      } = timeRange;\n      timeRange.onTimeRangeChange(getShiftedTimeRange(TimeRangeDirection.Forward, range, Date.now()));\n    };\n  }\n}\nSceneTimePicker.Component = SceneTimePickerRenderer;\nfunction SceneTimePickerRenderer({ model }) {\n  const { hidePicker, isOnCanvas } = model.useState();\n  const timeRange = sceneGraph.getTimeRange(model);\n  const timeZone = timeRange.getTimeZone();\n  const timeRangeState = timeRange.useState();\n  if (hidePicker) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(TimeRangePicker, {\n    isOnCanvas: isOnCanvas != null ? isOnCanvas : true,\n    value: timeRangeState.value,\n    onChange: timeRange.onTimeRangeChange,\n    timeZone,\n    fiscalYearStartMonth: timeRangeState.fiscalYearStartMonth,\n    onMoveBackward: model.onMoveBackward,\n    onMoveForward: model.onMoveForward,\n    onZoom: model.onZoom,\n    onChangeTimeZone: timeRange.onTimeZoneChange,\n    onChangeFiscalYearStartMonth: model.onChangeFiscalYearStartMonth\n  });\n}\nfunction getZoomedTimeRange(timeRange, factor) {\n  const timespan = timeRange.to.valueOf() - timeRange.from.valueOf();\n  const center = timeRange.to.valueOf() - timespan / 2;\n  const newTimespan = timespan === 0 ? 3e4 : timespan * factor;\n  const to = center + newTimespan / 2;\n  const from = center - newTimespan / 2;\n  return { from: toUtc(from), to: toUtc(to), raw: { from: toUtc(from), to: toUtc(to) } };\n}\nvar TimeRangeDirection = /* @__PURE__ */ ((TimeRangeDirection2) => {\n  TimeRangeDirection2[TimeRangeDirection2[\"Backward\"] = 0] = \"Backward\";\n  TimeRangeDirection2[TimeRangeDirection2[\"Forward\"] = 1] = \"Forward\";\n  return TimeRangeDirection2;\n})(TimeRangeDirection || {});\nfunction getShiftedTimeRange(dir, timeRange, upperLimit) {\n  const oldTo = timeRange.to.valueOf();\n  const oldFrom = timeRange.from.valueOf();\n  const halfSpan = (oldTo - oldFrom) / 2;\n  let fromRaw;\n  let toRaw;\n  if (dir === 0 /* Backward */) {\n    fromRaw = oldFrom - halfSpan;\n    toRaw = oldTo - halfSpan;\n  } else {\n    fromRaw = oldFrom + halfSpan;\n    toRaw = oldTo + halfSpan;\n    if (toRaw > upperLimit && oldTo < upperLimit) {\n      toRaw = upperLimit;\n      fromRaw = oldFrom;\n    }\n  }\n  const from = toUtc(fromRaw);\n  const to = toUtc(toRaw);\n  return {\n    from,\n    to,\n    raw: { from, to }\n  };\n}\n\nexport { SceneTimePicker, TimeRangeDirection, getShiftedTimeRange, getZoomedTimeRange };\n//# sourceMappingURL=SceneTimePicker.js.map\n","import React from 'react';\nimport { rangeUtil } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { RefreshPicker } from '@grafana/ui';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\nimport { SceneObjectUrlSyncConfig } from '../services/SceneObjectUrlSyncConfig.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst DEFAULT_INTERVALS = [\"5s\", \"10s\", \"30s\", \"1m\", \"5m\", \"15m\", \"30m\", \"1h\", \"2h\", \"1d\"];\nclass SceneRefreshPicker extends SceneObjectBase {\n  constructor(state) {\n    var _a, _b, _c;\n    super(__spreadProps(__spreadValues({\n      refresh: \"\"\n    }, state), {\n      autoValue: void 0,\n      autoEnabled: (_a = state.autoEnabled) != null ? _a : true,\n      autoMinInterval: (_b = state.autoMinInterval) != null ? _b : config.minRefreshInterval,\n      intervals: (_c = state.intervals) != null ? _c : DEFAULT_INTERVALS\n    }));\n    this._urlSync = new SceneObjectUrlSyncConfig(this, { keys: [\"refresh\"] });\n    this.onRefresh = () => {\n      const queryController = sceneGraph.getQueryController(this);\n      if (queryController == null ? void 0 : queryController.state.isRunning) {\n        queryController.cancelAll();\n        return;\n      }\n      const timeRange = sceneGraph.getTimeRange(this);\n      if (this._intervalTimer) {\n        clearInterval(this._intervalTimer);\n      }\n      timeRange.onRefresh();\n      this.setupIntervalTimer();\n    };\n    this.onIntervalChanged = (interval) => {\n      this.setState({ refresh: interval });\n      this.setupIntervalTimer();\n    };\n    this.setupAutoTimeRangeListener = () => {\n      return sceneGraph.getTimeRange(this).subscribeToState((newState, prevState) => {\n        if (newState.from !== prevState.from || newState.to !== prevState.to) {\n          this.setupIntervalTimer();\n        }\n      });\n    };\n    this.calculateAutoRefreshInterval = () => {\n      var _a;\n      const timeRange = sceneGraph.getTimeRange(this);\n      const resolution = (_a = window == null ? void 0 : window.innerWidth) != null ? _a : 2e3;\n      return rangeUtil.calculateInterval(timeRange.state.value, resolution, this.state.autoMinInterval);\n    };\n    this.setupIntervalTimer = () => {\n      var _a;\n      const timeRange = sceneGraph.getTimeRange(this);\n      const { refresh, intervals } = this.state;\n      if (this._intervalTimer || refresh === \"\") {\n        clearInterval(this._intervalTimer);\n      }\n      if (refresh === \"\") {\n        return;\n      }\n      if (refresh !== RefreshPicker.autoOption.value && intervals && !intervals.includes(refresh)) {\n        return;\n      }\n      let intervalMs;\n      (_a = this._autoTimeRangeListener) == null ? void 0 : _a.unsubscribe();\n      if (refresh === RefreshPicker.autoOption.value) {\n        const autoRefreshInterval = this.calculateAutoRefreshInterval();\n        intervalMs = autoRefreshInterval.intervalMs;\n        this._autoTimeRangeListener = this.setupAutoTimeRangeListener();\n        if (autoRefreshInterval.interval !== this.state.autoValue) {\n          this.setState({ autoValue: autoRefreshInterval.interval });\n        }\n      } else {\n        intervalMs = rangeUtil.intervalToMs(refresh);\n      }\n      this._intervalTimer = setInterval(() => {\n        timeRange.onRefresh();\n      }, intervalMs);\n    };\n    this.addActivationHandler(() => {\n      this.setupIntervalTimer();\n      return () => {\n        var _a2;\n        if (this._intervalTimer) {\n          clearInterval(this._intervalTimer);\n        }\n        (_a2 = this._autoTimeRangeListener) == null ? void 0 : _a2.unsubscribe();\n      };\n    });\n  }\n  getUrlState() {\n    return {\n      refresh: this.state.refresh !== \"\" ? this.state.refresh : void 0\n    };\n  }\n  updateFromUrl(values) {\n    const refresh = values.refresh;\n    if (typeof refresh === \"string\") {\n      this.setState({ refresh });\n    } else if (refresh == null) {\n      this.setState({ refresh: \"\" });\n    }\n  }\n}\nSceneRefreshPicker.Component = SceneRefreshPickerRenderer;\nfunction SceneRefreshPickerRenderer({ model }) {\n  var _a;\n  const { refresh, intervals, autoEnabled, autoValue, isOnCanvas, primary, withText } = model.useState();\n  const isRunning = useQueryControllerState(model);\n  let text = refresh === ((_a = RefreshPicker.autoOption) == null ? void 0 : _a.value) ? autoValue : withText ? \"Refresh\" : void 0;\n  let tooltip;\n  let width;\n  if (isRunning) {\n    tooltip = \"Cancel all queries\";\n    if (withText) {\n      text = \"Cancel\";\n    }\n  }\n  if (withText) {\n    width = \"96px\";\n  }\n  return /* @__PURE__ */ React.createElement(RefreshPicker, {\n    showAutoInterval: autoEnabled,\n    value: refresh,\n    intervals,\n    tooltip,\n    width,\n    text,\n    onRefresh: model.onRefresh,\n    primary,\n    onIntervalChanged: model.onIntervalChanged,\n    isLoading: isRunning,\n    isOnCanvas: isOnCanvas != null ? isOnCanvas : true\n  });\n}\nfunction useQueryControllerState(model) {\n  const queryController = sceneGraph.getQueryController(model);\n  if (!queryController) {\n    return false;\n  }\n  return queryController.useState().isRunning;\n}\n\nexport { DEFAULT_INTERVALS, SceneRefreshPicker, SceneRefreshPickerRenderer };\n//# sourceMappingURL=SceneRefreshPicker.js.map\n","const getCompareSeriesRefId = (refId) => `${refId}-compare`;\n\nexport { getCompareSeriesRefId };\n//# sourceMappingURL=getCompareSeriesRefId.js.map\n","import { rangeUtil, dateTime, FieldType } from '@grafana/data';\nimport { config } from '@grafana/runtime';\nimport { useStyles2, ButtonGroup, ToolbarButton, Checkbox, ButtonSelect } from '@grafana/ui';\nimport React from 'react';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { SceneObjectUrlSyncConfig } from '../services/SceneObjectUrlSyncConfig.js';\nimport { getCompareSeriesRefId } from '../utils/getCompareSeriesRefId.js';\nimport { parseUrlParam } from '../utils/parseUrlParam.js';\nimport { css } from '@emotion/css';\nimport { of } from 'rxjs';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nconst PREVIOUS_PERIOD_VALUE = \"__previousPeriod\";\nconst NO_PERIOD_VALUE = \"__noPeriod\";\nconst PREVIOUS_PERIOD_COMPARE_OPTION = {\n  label: \"Previous period\",\n  value: PREVIOUS_PERIOD_VALUE\n};\nconst NO_COMPARE_OPTION = {\n  label: \"No comparison\",\n  value: NO_PERIOD_VALUE\n};\nconst DEFAULT_COMPARE_OPTIONS = [\n  { label: \"Day before\", value: \"24h\" },\n  { label: \"Week before\", value: \"1w\" },\n  { label: \"Month before\", value: \"1M\" }\n];\nclass SceneTimeRangeCompare extends SceneObjectBase {\n  constructor(state) {\n    super(__spreadValues({ compareOptions: DEFAULT_COMPARE_OPTIONS }, state));\n    this._urlSync = new SceneObjectUrlSyncConfig(this, { keys: [\"compareWith\"] });\n    this._onActivate = () => {\n      const sceneTimeRange = sceneGraph.getTimeRange(this);\n      this.setState({ compareOptions: this.getCompareOptions(sceneTimeRange.state.value) });\n      this._subs.add(\n        sceneTimeRange.subscribeToState((timeRange) => {\n          const compareOptions = this.getCompareOptions(timeRange.value);\n          const stateUpdate = { compareOptions };\n          if (Boolean(this.state.compareWith) && !compareOptions.find(({ value }) => value === this.state.compareWith)) {\n            stateUpdate.compareWith = PREVIOUS_PERIOD_VALUE;\n          }\n          this.setState(stateUpdate);\n        })\n      );\n    };\n    this.getCompareOptions = (timeRange) => {\n      const diffDays = Math.ceil(timeRange.to.diff(timeRange.from));\n      const matchIndex = DEFAULT_COMPARE_OPTIONS.findIndex(({ value }) => {\n        const intervalInMs = rangeUtil.intervalToMs(value);\n        return intervalInMs >= diffDays;\n      });\n      return [\n        NO_COMPARE_OPTION,\n        PREVIOUS_PERIOD_COMPARE_OPTION,\n        ...DEFAULT_COMPARE_OPTIONS.slice(matchIndex).map(({ label, value }) => ({ label, value }))\n      ];\n    };\n    this.onCompareWithChanged = (compareWith) => {\n      if (compareWith === NO_PERIOD_VALUE) {\n        this.onClearCompare();\n      } else {\n        this.setState({ compareWith });\n      }\n    };\n    this.onClearCompare = () => {\n      this.setState({ compareWith: void 0 });\n    };\n    this.addActivationHandler(this._onActivate);\n  }\n  getExtraQueries(request) {\n    const extraQueries = [];\n    const compareRange = this.getCompareTimeRange(request.range);\n    if (!compareRange) {\n      return extraQueries;\n    }\n    const targets = request.targets.filter((query) => query.timeRangeCompare !== false);\n    if (targets.length) {\n      extraQueries.push({\n        req: __spreadProps(__spreadValues({}, request), {\n          targets,\n          range: compareRange\n        }),\n        processor: timeShiftAlignmentProcessor\n      });\n    }\n    return extraQueries;\n  }\n  shouldRerun(prev, next) {\n    return prev.compareWith !== next.compareWith;\n  }\n  getCompareTimeRange(timeRange) {\n    let compareFrom;\n    let compareTo;\n    if (this.state.compareWith) {\n      if (this.state.compareWith === PREVIOUS_PERIOD_VALUE) {\n        const diffMs = timeRange.to.diff(timeRange.from);\n        compareFrom = dateTime(timeRange.from).subtract(diffMs);\n        compareTo = dateTime(timeRange.to).subtract(diffMs);\n      } else {\n        compareFrom = dateTime(timeRange.from).subtract(rangeUtil.intervalToMs(this.state.compareWith));\n        compareTo = dateTime(timeRange.to).subtract(rangeUtil.intervalToMs(this.state.compareWith));\n      }\n      return {\n        from: compareFrom,\n        to: compareTo,\n        raw: {\n          from: compareFrom,\n          to: compareTo\n        }\n      };\n    }\n    return void 0;\n  }\n  getUrlState() {\n    return {\n      compareWith: this.state.compareWith\n    };\n  }\n  updateFromUrl(values) {\n    if (!values.compareWith) {\n      return;\n    }\n    const compareWith = parseUrlParam(values.compareWith);\n    if (compareWith) {\n      const compareOptions = this.getCompareOptions(sceneGraph.getTimeRange(this).state.value);\n      if (compareOptions.find(({ value }) => value === compareWith)) {\n        this.setState({\n          compareWith\n        });\n      } else {\n        this.setState({\n          compareWith: \"__previousPeriod\"\n        });\n      }\n    }\n  }\n}\nSceneTimeRangeCompare.Component = SceneTimeRangeCompareRenderer;\nconst timeShiftAlignmentProcessor = (primary, secondary) => {\n  const diff = secondary.timeRange.from.diff(primary.timeRange.from);\n  secondary.series.forEach((series) => {\n    series.refId = getCompareSeriesRefId(series.refId || \"\");\n    series.meta = __spreadProps(__spreadValues({}, series.meta), {\n      timeCompare: {\n        diffMs: diff,\n        isTimeShiftQuery: true\n      }\n    });\n    series.fields.forEach((field) => {\n      if (field.type === FieldType.time) {\n        field.values = field.values.map((v) => {\n          return diff < 0 ? v - diff : v + diff;\n        });\n      }\n      field.config = __spreadProps(__spreadValues({}, field.config), {\n        color: {\n          mode: \"fixed\",\n          fixedColor: config.theme.palette.gray60\n        }\n      });\n      return field;\n    });\n  });\n  return of(secondary);\n};\nfunction SceneTimeRangeCompareRenderer({ model }) {\n  var _a;\n  const styles = useStyles2(getStyles);\n  const { compareWith, compareOptions } = model.useState();\n  const [previousCompare, setPreviousCompare] = React.useState(compareWith);\n  const previousValue = (_a = compareOptions.find(({ value: value2 }) => value2 === previousCompare)) != null ? _a : PREVIOUS_PERIOD_COMPARE_OPTION;\n  const value = compareOptions.find(({ value: value2 }) => value2 === compareWith);\n  const enabled = Boolean(value);\n  const onClick = () => {\n    if (enabled) {\n      setPreviousCompare(compareWith);\n      model.onClearCompare();\n    } else if (!enabled) {\n      model.onCompareWithChanged(previousValue.value);\n    }\n  };\n  return /* @__PURE__ */ React.createElement(ButtonGroup, null, /* @__PURE__ */ React.createElement(ToolbarButton, {\n    variant: \"canvas\",\n    tooltip: \"Enable time frame comparison\",\n    onClick: (e) => {\n      e.stopPropagation();\n      e.preventDefault();\n      onClick();\n    }\n  }, /* @__PURE__ */ React.createElement(Checkbox, {\n    label: \" \",\n    value: enabled,\n    onClick\n  }), \"Comparison\"), enabled ? /* @__PURE__ */ React.createElement(ButtonSelect, {\n    variant: \"canvas\",\n    value,\n    options: compareOptions,\n    onChange: (v) => {\n      model.onCompareWithChanged(v.value);\n    }\n  }) : /* @__PURE__ */ React.createElement(ToolbarButton, {\n    className: styles.previewButton,\n    disabled: true,\n    variant: \"canvas\",\n    isOpen: false\n  }, previousValue.label));\n}\nfunction getStyles(theme) {\n  return {\n    previewButton: css({\n      \"&:disabled\": {\n        border: `1px solid ${theme.colors.secondary.border}`,\n        color: theme.colors.text.disabled,\n        opacity: 1\n      }\n    })\n  };\n}\n\nexport { DEFAULT_COMPARE_OPTIONS, NO_COMPARE_OPTION, PREVIOUS_PERIOD_COMPARE_OPTION, SceneTimeRangeCompare };\n//# sourceMappingURL=SceneTimeRangeCompare.js.map\n","import React from 'react';\nimport { LoadingState } from '@grafana/data';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\n\nclass SceneByFrameRepeater extends SceneObjectBase {\n  constructor(state) {\n    super(state);\n    this.addActivationHandler(() => {\n      const dataProvider = sceneGraph.getData(this);\n      this._subs.add(\n        dataProvider.subscribeToState((data) => {\n          var _a;\n          if (((_a = data.data) == null ? void 0 : _a.state) === LoadingState.Done) {\n            this.performRepeat(data.data);\n          }\n        })\n      );\n      if (dataProvider.state.data) {\n        this.performRepeat(dataProvider.state.data);\n      }\n    });\n  }\n  performRepeat(data) {\n    const newChildren = [];\n    for (let seriesIndex = 0; seriesIndex < data.series.length; seriesIndex++) {\n      const layoutChild = this.state.getLayoutChild(data, data.series[seriesIndex], seriesIndex);\n      newChildren.push(layoutChild);\n    }\n    this.state.body.setState({ children: newChildren });\n  }\n}\nSceneByFrameRepeater.Component = ({ model }) => {\n  const { body } = model.useState();\n  return /* @__PURE__ */ React.createElement(body.Component, {\n    model: body\n  });\n};\n\nexport { SceneByFrameRepeater };\n//# sourceMappingURL=SceneByFrameRepeater.js.map\n","import React from 'react';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\nimport { sceneGraph } from '../core/sceneGraph/index.js';\nimport { VariableDependencyConfig } from '../variables/VariableDependencyConfig.js';\nimport { MultiValueVariable } from '../variables/variants/MultiValueVariable.js';\n\nclass SceneByVariableRepeater extends SceneObjectBase {\n  constructor(state) {\n    super(state);\n    this._variableDependency = new VariableDependencyConfig(\n      this,\n      {\n        variableNames: [this.state.variableName],\n        onVariableUpdateCompleted: () => this.performRepeat()\n      }\n    );\n    this.addActivationHandler(() => this.performRepeat());\n  }\n  performRepeat() {\n    if (this._variableDependency.hasDependencyInLoadingState()) {\n      return;\n    }\n    const variable = sceneGraph.lookupVariable(this.state.variableName, this);\n    if (!(variable instanceof MultiValueVariable)) {\n      console.error(\"SceneByVariableRepeater: variable is not a MultiValueVariable\");\n      return;\n    }\n    const values = getMultiVariableValues(variable);\n    const newChildren = [];\n    for (const option of values) {\n      const layoutChild = this.state.getLayoutChild(option);\n      newChildren.push(layoutChild);\n    }\n    this.state.body.setState({ children: newChildren });\n  }\n}\nSceneByVariableRepeater.Component = ({ model }) => {\n  const { body } = model.useState();\n  return /* @__PURE__ */ React.createElement(body.Component, {\n    model: body\n  });\n};\nfunction getMultiVariableValues(variable) {\n  const { value, text, options } = variable.state;\n  if (variable.hasAllValue()) {\n    return options;\n  }\n  if (Array.isArray(value) && Array.isArray(text)) {\n    return value.map((v, i) => ({ value: v, label: text[i] }));\n  }\n  return [{ value, label: text }];\n}\n\nexport { SceneByVariableRepeater, getMultiVariableValues };\n//# sourceMappingURL=SceneByVariableRepeater.js.map\n","import React from 'react';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\n\nconst _SceneControlsSpacer = class extends SceneObjectBase {\n  constructor() {\n    super({});\n  }\n  get Component() {\n    return _SceneControlsSpacer.Component;\n  }\n};\nlet SceneControlsSpacer = _SceneControlsSpacer;\nSceneControlsSpacer.Component = (_props) => {\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    style: { flexGrow: 1 }\n  });\n};\n\nexport { SceneControlsSpacer };\n//# sourceMappingURL=SceneControlsSpacer.js.map\n","import { css } from '@emotion/css';\nimport { config } from '@grafana/runtime';\nimport React, { useMemo } from 'react';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\n\nclass SceneFlexLayout extends SceneObjectBase {\n  toggleDirection() {\n    this.setState({\n      direction: this.state.direction === \"row\" ? \"column\" : \"row\"\n    });\n  }\n  isDraggable() {\n    return false;\n  }\n}\nSceneFlexLayout.Component = SceneFlexLayoutRenderer;\nfunction SceneFlexLayoutRenderer({ model, parentState }) {\n  const { children, isHidden } = model.useState();\n  const style = useLayoutStyle(model.state, parentState);\n  if (isHidden) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: style\n  }, children.map((item) => {\n    const Component = item.Component;\n    return /* @__PURE__ */ React.createElement(Component, {\n      key: item.state.key,\n      model: item,\n      parentState: model.state\n    });\n  }));\n}\nclass SceneFlexItem extends SceneObjectBase {\n}\nSceneFlexItem.Component = SceneFlexItemRenderer;\nfunction SceneFlexItemRenderer({ model, parentState }) {\n  if (!parentState) {\n    throw new Error(\"SceneFlexItem must be a child of SceneFlexLayout\");\n  }\n  const { body, isHidden } = model.useState();\n  const style = useLayoutItemStyle(model.state, parentState);\n  if (!body || isHidden) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: style\n  }, /* @__PURE__ */ React.createElement(body.Component, {\n    model: body\n  }));\n}\nfunction applyItemStyles(style, state, parentState) {\n  var _a, _b, _c;\n  const parentDirection = (_a = parentState.direction) != null ? _a : \"row\";\n  const { xSizing = \"fill\", ySizing = \"fill\" } = state;\n  style.display = \"flex\";\n  style.position = \"relative\";\n  style.flexDirection = parentDirection;\n  if (parentDirection === \"column\") {\n    if (state.height) {\n      style.height = state.height;\n    } else {\n      style.flexGrow = ySizing === \"fill\" ? 1 : 0;\n    }\n    if (state.width) {\n      style.width = state.width;\n    } else {\n      style.alignSelf = xSizing === \"fill\" ? \"stretch\" : \"flex-start\";\n    }\n  } else {\n    if (state.height) {\n      style.height = state.height;\n    } else {\n      style.alignSelf = ySizing === \"fill\" ? \"stretch\" : \"flex-start\";\n    }\n    if (state.width) {\n      style.width = state.width;\n    } else {\n      style.flexGrow = xSizing === \"fill\" ? 1 : 0;\n    }\n  }\n  style.minWidth = state.minWidth;\n  style.maxWidth = state.maxWidth;\n  style.maxHeight = state.maxHeight;\n  style.minHeight = (_b = state.minHeight) != null ? _b : parentState.minHeight;\n  style.height = (_c = state.height) != null ? _c : parentState.height;\n  return style;\n}\nfunction useLayoutItemStyle(state, parentState) {\n  return useMemo(() => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;\n    const theme = config.theme2;\n    const style = applyItemStyles({}, state, parentState);\n    style[theme.breakpoints.down(\"md\")] = {\n      maxWidth: (_b = (_a = state.md) == null ? void 0 : _a.maxWidth) != null ? _b : \"unset\",\n      maxHeight: (_d = (_c = state.md) == null ? void 0 : _c.maxHeight) != null ? _d : \"unset\",\n      height: (_g = (_e = state.md) == null ? void 0 : _e.height) != null ? _g : (_f = parentState.md) == null ? void 0 : _f.height,\n      width: (_j = (_h = state.md) == null ? void 0 : _h.width) != null ? _j : (_i = parentState.md) == null ? void 0 : _i.width\n    };\n    return css(style);\n  }, [state, parentState]);\n}\nfunction useLayoutStyle(state, parentState) {\n  return useMemo(() => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j;\n    const { direction = \"row\", wrap } = state;\n    const theme = config.theme2;\n    const style = {};\n    if (parentState) {\n      applyItemStyles(style, state, parentState);\n    } else {\n      style.display = \"flex\";\n      style.flexGrow = 1;\n      style.minWidth = state.minWidth;\n      style.minHeight = state.minHeight;\n    }\n    style.flexDirection = direction;\n    style.gap = \"8px\";\n    style.flexWrap = wrap || \"nowrap\";\n    style.alignContent = \"baseline\";\n    style.minWidth = style.minWidth || 0;\n    style.minHeight = style.minHeight || 0;\n    style[theme.breakpoints.down(\"md\")] = {\n      flexDirection: (_b = (_a = state.md) == null ? void 0 : _a.direction) != null ? _b : \"column\",\n      maxWidth: (_d = (_c = state.md) == null ? void 0 : _c.maxWidth) != null ? _d : \"unset\",\n      maxHeight: (_f = (_e = state.md) == null ? void 0 : _e.maxHeight) != null ? _f : \"unset\",\n      height: (_h = (_g = state.md) == null ? void 0 : _g.height) != null ? _h : \"unset\",\n      width: (_j = (_i = state.md) == null ? void 0 : _i.width) != null ? _j : \"unset\"\n    };\n    return css(style);\n  }, [parentState, state]);\n}\n\nexport { SceneFlexItem, SceneFlexLayout };\n//# sourceMappingURL=SceneFlexLayout.js.map\n","import { css } from '@emotion/css';\nimport React, { useMemo } from 'react';\nimport { SceneObjectBase } from '../../../core/SceneObjectBase.js';\nimport { config } from '@grafana/runtime';\nimport { LazyLoader } from '../LazyLoader.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass SceneCSSGridLayout extends SceneObjectBase {\n  constructor(state) {\n    var _a, _b;\n    super(__spreadValues({\n      rowGap: 1,\n      columnGap: 1,\n      templateColumns: \"repeat(auto-fit, minmax(400px, 1fr))\",\n      autoRows: (_a = state.autoRows) != null ? _a : `320px`,\n      children: (_b = state.children) != null ? _b : []\n    }, state));\n  }\n  isDraggable() {\n    return false;\n  }\n}\nSceneCSSGridLayout.Component = SceneCSSGridLayoutRenderer;\nfunction SceneCSSGridLayoutRenderer({ model }) {\n  const { children, isHidden, isLazy } = model.useState();\n  const style = useLayoutStyle(model.state);\n  if (isHidden) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: style\n  }, children.map((item) => {\n    const Component = item.Component;\n    if (isLazy) {\n      return /* @__PURE__ */ React.createElement(LazyLoader, {\n        key: item.state.key,\n        className: style\n      }, /* @__PURE__ */ React.createElement(Component, {\n        key: item.state.key,\n        model: item,\n        parentState: model.state\n      }));\n    }\n    return /* @__PURE__ */ React.createElement(Component, {\n      key: item.state.key,\n      model: item,\n      parentState: model.state\n    });\n  }));\n}\nclass SceneCSSGridItem extends SceneObjectBase {\n}\nSceneCSSGridItem.Component = SceneCSSGridItemRenderer;\nfunction SceneCSSGridItemRenderer({ model, parentState }) {\n  if (!parentState) {\n    throw new Error(\"SceneCSSGridItem must be a child of SceneCSSGridLayout\");\n  }\n  const { body, isHidden } = model.useState();\n  const style = useItemStyle(model.state);\n  if (!body || isHidden) {\n    return null;\n  }\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: style\n  }, /* @__PURE__ */ React.createElement(body.Component, {\n    model: body\n  }));\n}\nfunction useLayoutStyle(state) {\n  return useMemo(() => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;\n    const style = {};\n    const theme = config.theme2;\n    style.display = \"grid\";\n    style.gridTemplateColumns = state.templateColumns;\n    style.gridTemplateRows = state.templateRows || \"unset\";\n    style.gridAutoRows = state.autoRows || \"unset\";\n    style.rowGap = theme.spacing((_a = state.rowGap) != null ? _a : 1);\n    style.columnGap = theme.spacing((_b = state.columnGap) != null ? _b : 1);\n    style.justifyItems = state.justifyItems || \"unset\";\n    style.alignItems = state.alignItems || \"unset\";\n    style.justifyContent = state.justifyContent || \"unset\";\n    style.flexGrow = 1;\n    if (state.md) {\n      style[theme.breakpoints.down(\"md\")] = {\n        gridTemplateRows: (_c = state.md) == null ? void 0 : _c.templateRows,\n        gridTemplateColumns: (_d = state.md) == null ? void 0 : _d.templateColumns,\n        rowGap: state.md.rowGap ? theme.spacing((_f = (_e = state.md) == null ? void 0 : _e.rowGap) != null ? _f : 1) : void 0,\n        columnGap: state.md.columnGap ? theme.spacing((_h = (_g = state.md) == null ? void 0 : _g.rowGap) != null ? _h : 1) : void 0,\n        justifyItems: (_i = state.md) == null ? void 0 : _i.justifyItems,\n        alignItems: (_j = state.md) == null ? void 0 : _j.alignItems,\n        justifyContent: (_k = state.md) == null ? void 0 : _k.justifyContent\n      };\n    }\n    return css(style);\n  }, [state]);\n}\nfunction useItemStyle(state) {\n  return useMemo(() => {\n    const style = {};\n    style.gridColumn = state.gridColumn || \"unset\";\n    style.gridRow = state.gridRow || \"unset\";\n    style.position = \"relative\";\n    return css(style);\n  }, [state]);\n}\n\nexport { SceneCSSGridItem, SceneCSSGridLayout };\n//# sourceMappingURL=SceneCSSGridLayout.js.map\n","import { cx, css } from '@emotion/css';\nimport { useStyles2 } from '@grafana/ui';\nimport { clamp, throttle } from 'lodash';\nimport React, { useRef, useCallback, useLayoutEffect } from 'react';\nimport { useUniqueId } from '../LazyLoader.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nconst PIXELS_PER_MS = 0.3;\nconst VERTICAL_KEYS = /* @__PURE__ */ new Set([\"ArrowUp\", \"ArrowDown\"]);\nconst HORIZONTAL_KEYS = /* @__PURE__ */ new Set([\"ArrowLeft\", \"ArrowRight\"]);\nconst propsForDirection = {\n  row: {\n    dim: \"width\",\n    axis: \"clientX\",\n    min: \"minWidth\",\n    max: \"maxWidth\"\n  },\n  column: {\n    dim: \"height\",\n    axis: \"clientY\",\n    min: \"minHeight\",\n    max: \"maxHeight\"\n  }\n};\nfunction Splitter({\n  direction = \"row\",\n  handleSize = 32,\n  initialSize = \"auto\",\n  primaryPaneStyles,\n  secondaryPaneStyles,\n  onDragFinished,\n  children\n}) {\n  const kids = React.Children.toArray(children);\n  const splitterRef = useRef(null);\n  const firstPaneRef = useRef(null);\n  const secondPaneRef = useRef(null);\n  const containerRef = useRef(null);\n  const containerSize = useRef(null);\n  const primarySizeRef = useRef(\"1fr\");\n  const firstPaneMeasurements = useRef(void 0);\n  const savedPos = useRef(void 0);\n  const measurementProp = propsForDirection[direction].dim;\n  const clientAxis = propsForDirection[direction].axis;\n  const minDimProp = propsForDirection[direction].min;\n  const maxDimProp = propsForDirection[direction].max;\n  useResizeObserver(\n    containerRef.current,\n    (entries) => {\n      for (const entry of entries) {\n        if (!entry.target.isSameNode(containerRef.current)) {\n          return;\n        }\n        const curSize = firstPaneRef.current.getBoundingClientRect()[measurementProp];\n        const newDims = measureElement(firstPaneRef.current);\n        splitterRef.current.ariaValueNow = `${clamp(\n          (curSize - newDims[minDimProp]) / (newDims[maxDimProp] - newDims[minDimProp]) * 100,\n          0,\n          100\n        )}`;\n      }\n    },\n    500,\n    [maxDimProp, minDimProp, direction, measurementProp]\n  );\n  const dragStart = useRef(null);\n  const onPointerDown = useCallback(\n    (e) => {\n      primarySizeRef.current = firstPaneRef.current.getBoundingClientRect()[measurementProp];\n      containerSize.current = containerRef.current.getBoundingClientRect()[measurementProp];\n      dragStart.current = e[clientAxis];\n      splitterRef.current.setPointerCapture(e.pointerId);\n      firstPaneMeasurements.current = measureElement(firstPaneRef.current);\n      savedPos.current = void 0;\n    },\n    [measurementProp, clientAxis]\n  );\n  const onPointerMove = useCallback(\n    (e) => {\n      if (dragStart.current !== null && primarySizeRef.current !== \"1fr\") {\n        const diff = e[clientAxis] - dragStart.current;\n        const dims = firstPaneMeasurements.current;\n        const newSize = clamp(primarySizeRef.current + diff, dims[minDimProp], dims[maxDimProp]);\n        const newFlex = newSize / (containerSize.current - handleSize);\n        firstPaneRef.current.style.flexGrow = `${newFlex}`;\n        secondPaneRef.current.style.flexGrow = `${1 - newFlex}`;\n        const ariaValueNow = clamp(\n          (newSize - dims[minDimProp]) / (dims[maxDimProp] - dims[minDimProp]) * 100,\n          0,\n          100\n        );\n        splitterRef.current.ariaValueNow = `${ariaValueNow}`;\n      }\n    },\n    [handleSize, clientAxis, minDimProp, maxDimProp]\n  );\n  const onPointerUp = useCallback(\n    (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      splitterRef.current.releasePointerCapture(e.pointerId);\n      dragStart.current = null;\n      onDragFinished == null ? void 0 : onDragFinished(parseFloat(firstPaneRef.current.style.flexGrow));\n    },\n    [onDragFinished]\n  );\n  const pressedKeys = useRef(/* @__PURE__ */ new Set());\n  const keysLastHandledAt = useRef(null);\n  const handlePressedKeys = useCallback(\n    (time) => {\n      var _a;\n      const nothingPressed = pressedKeys.current.size === 0;\n      if (nothingPressed) {\n        keysLastHandledAt.current = null;\n        return;\n      } else if (primarySizeRef.current === \"1fr\") {\n        return;\n      }\n      const dt = time - ((_a = keysLastHandledAt.current) != null ? _a : time);\n      const dx = dt * PIXELS_PER_MS;\n      let sizeChange = 0;\n      if (direction === \"row\") {\n        if (pressedKeys.current.has(\"ArrowLeft\")) {\n          sizeChange -= dx;\n        }\n        if (pressedKeys.current.has(\"ArrowRight\")) {\n          sizeChange += dx;\n        }\n      } else {\n        if (pressedKeys.current.has(\"ArrowUp\")) {\n          sizeChange -= dx;\n        }\n        if (pressedKeys.current.has(\"ArrowDown\")) {\n          sizeChange += dx;\n        }\n      }\n      const firstPaneDims = firstPaneMeasurements.current;\n      const curSize = firstPaneRef.current.getBoundingClientRect()[measurementProp];\n      const newSize = clamp(curSize + sizeChange, firstPaneDims[minDimProp], firstPaneDims[maxDimProp]);\n      const newFlex = newSize / (containerSize.current - handleSize);\n      firstPaneRef.current.style.flexGrow = `${newFlex}`;\n      secondPaneRef.current.style.flexGrow = `${1 - newFlex}`;\n      const ariaValueNow = (newSize - firstPaneDims[minDimProp]) / (firstPaneDims[maxDimProp] - firstPaneDims[minDimProp]) * 100;\n      splitterRef.current.ariaValueNow = `${clamp(ariaValueNow, 0, 100)}`;\n      keysLastHandledAt.current = time;\n      window.requestAnimationFrame(handlePressedKeys);\n    },\n    [direction, handleSize, minDimProp, maxDimProp, measurementProp]\n  );\n  const onKeyDown = useCallback(\n    (e) => {\n      if (e.key === \"Enter\") {\n        if (savedPos.current === void 0) {\n          savedPos.current = firstPaneRef.current.style.flexGrow;\n          firstPaneRef.current.style.flexGrow = \"0\";\n          secondPaneRef.current.style.flexGrow = \"1\";\n        } else {\n          firstPaneRef.current.style.flexGrow = savedPos.current;\n          secondPaneRef.current.style.flexGrow = `${1 - parseFloat(savedPos.current)}`;\n          savedPos.current = void 0;\n        }\n        return;\n      } else if (e.key === \"Home\") {\n        firstPaneMeasurements.current = measureElement(firstPaneRef.current);\n        containerSize.current = containerRef.current.getBoundingClientRect()[measurementProp];\n        const newFlex = firstPaneMeasurements.current[minDimProp] / (containerSize.current - handleSize);\n        firstPaneRef.current.style.flexGrow = `${newFlex}`;\n        secondPaneRef.current.style.flexGrow = `${1 - newFlex}`;\n        splitterRef.current.ariaValueNow = \"0\";\n        return;\n      } else if (e.key === \"End\") {\n        firstPaneMeasurements.current = measureElement(firstPaneRef.current);\n        containerSize.current = containerRef.current.getBoundingClientRect()[measurementProp];\n        const newFlex = firstPaneMeasurements.current[maxDimProp] / (containerSize.current - handleSize);\n        firstPaneRef.current.style.flexGrow = `${newFlex}`;\n        secondPaneRef.current.style.flexGrow = `${1 - newFlex}`;\n        splitterRef.current.ariaValueNow = \"100\";\n        return;\n      }\n      if (!(direction === \"column\" && VERTICAL_KEYS.has(e.key) || direction === \"row\" && HORIZONTAL_KEYS.has(e.key)) || pressedKeys.current.has(e.key)) {\n        return;\n      }\n      savedPos.current = void 0;\n      e.preventDefault();\n      e.stopPropagation();\n      primarySizeRef.current = firstPaneRef.current.getBoundingClientRect()[measurementProp];\n      containerSize.current = containerRef.current.getBoundingClientRect()[measurementProp];\n      firstPaneMeasurements.current = measureElement(firstPaneRef.current);\n      const newKey = !pressedKeys.current.has(e.key);\n      if (newKey) {\n        const initiateAnimationLoop = pressedKeys.current.size === 0;\n        pressedKeys.current.add(e.key);\n        if (initiateAnimationLoop) {\n          window.requestAnimationFrame(handlePressedKeys);\n        }\n      }\n    },\n    [direction, handlePressedKeys, handleSize, maxDimProp, measurementProp, minDimProp]\n  );\n  const onKeyUp = useCallback(\n    (e) => {\n      if (direction === \"row\" && !HORIZONTAL_KEYS.has(e.key) || direction === \"column\" && !VERTICAL_KEYS.has(e.key)) {\n        return;\n      }\n      pressedKeys.current.delete(e.key);\n      onDragFinished == null ? void 0 : onDragFinished(parseFloat(firstPaneRef.current.style.flexGrow));\n    },\n    [direction, onDragFinished]\n  );\n  const onDoubleClick = useCallback(() => {\n    firstPaneRef.current.style.flexGrow = \"0.5\";\n    secondPaneRef.current.style.flexGrow = \"0.5\";\n    const dim = measureElement(firstPaneRef.current);\n    firstPaneMeasurements.current = dim;\n    primarySizeRef.current = firstPaneRef.current.getBoundingClientRect()[measurementProp];\n    splitterRef.current.ariaValueNow = `${(primarySizeRef.current - dim[minDimProp]) / (dim[maxDimProp] - dim[minDimProp]) * 100}`;\n  }, [maxDimProp, measurementProp, minDimProp]);\n  const onBlur = useCallback(() => {\n    if (pressedKeys.current.size > 0) {\n      pressedKeys.current.clear();\n      dragStart.current = null;\n      onDragFinished == null ? void 0 : onDragFinished(parseFloat(firstPaneRef.current.style.flexGrow));\n    }\n  }, [onDragFinished]);\n  const styles = useStyles2(getStyles);\n  const id = useUniqueId();\n  const secondAvailable = kids.length === 2;\n  const visibilitySecond = secondAvailable ? \"visible\" : \"hidden\";\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    ref: containerRef,\n    className: styles.container,\n    style: {\n      flexDirection: direction\n    }\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    ref: firstPaneRef,\n    className: styles.panel,\n    style: __spreadValues({\n      flexGrow: initialSize === \"auto\" ? 0.5 : clamp(initialSize, 0, 1),\n      [minDimProp]: \"min-content\"\n    }, primaryPaneStyles),\n    id: `start-panel-${id}`\n  }, kids[0]), kids[1] && /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(\"div\", {\n    ref: splitterRef,\n    style: { [measurementProp]: `${handleSize}px` },\n    className: cx(styles.handle, { [styles.handleHorizontal]: direction === \"column\" }),\n    onPointerUp,\n    onPointerDown,\n    onPointerMove,\n    onKeyDown,\n    onKeyUp,\n    onDoubleClick,\n    onBlur,\n    role: \"separator\",\n    \"aria-valuemin\": 0,\n    \"aria-valuemax\": 100,\n    \"aria-valuenow\": 50,\n    \"aria-controls\": `start-panel-${id}`,\n    \"aria-label\": \"Pane resize widget\",\n    tabIndex: 0\n  }), /* @__PURE__ */ React.createElement(\"div\", {\n    ref: secondPaneRef,\n    className: styles.panel,\n    style: __spreadValues({\n      flexGrow: initialSize === \"auto\" ? 0.5 : clamp(1 - initialSize, 0, 1),\n      [minDimProp]: \"min-content\",\n      visibility: `${visibilitySecond}`\n    }, secondaryPaneStyles),\n    id: `end-panel-${id}`\n  }, kids[1])));\n}\nfunction getStyles(theme) {\n  return {\n    handle: css({\n      cursor: \"col-resize\",\n      position: \"relative\",\n      flexShrink: 0,\n      userSelect: \"none\",\n      \"&::before\": {\n        content: '\"\"',\n        position: \"absolute\",\n        backgroundColor: theme.colors.primary.main,\n        left: \"50%\",\n        transform: \"translate(-50%)\",\n        top: 0,\n        height: \"100%\",\n        width: \"1px\",\n        opacity: 0,\n        transition: \"opacity ease-in-out 0.2s\"\n      },\n      \"&::after\": {\n        content: '\"\"',\n        width: \"4px\",\n        borderRadius: \"4px\",\n        backgroundColor: theme.colors.border.weak,\n        transition: \"background-color ease-in-out 0.2s\",\n        height: \"50%\",\n        top: \"calc(50% - (50%) / 2)\",\n        transform: \"translateX(-50%)\",\n        position: \"absolute\",\n        left: \"50%\"\n      },\n      \"&:hover, &:focus-visible\": {\n        outline: \"none\",\n        \"&::before\": {\n          opacity: 1\n        },\n        \"&::after\": {\n          backgroundColor: theme.colors.primary.main\n        }\n      }\n    }),\n    handleHorizontal: css({\n      cursor: \"row-resize\",\n      \"&::before\": {\n        left: \"inherit\",\n        transform: \"translateY(-50%)\",\n        top: \"50%\",\n        height: \"1px\",\n        width: \"100%\"\n      },\n      \"&::after\": {\n        width: \"50%\",\n        height: \"4px\",\n        top: \"50%\",\n        transform: \"translateY(-50%)\",\n        left: \"calc(50% - (50%) / 2)\"\n      }\n    }),\n    container: css({\n      display: \"flex\",\n      width: \"100%\",\n      flexGrow: 1,\n      overflow: \"hidden\"\n    }),\n    panel: css({ display: \"flex\", position: \"relative\", flexBasis: 0 })\n  };\n}\nfunction measureElement(ref) {\n  if (ref === null) {\n    return void 0;\n  }\n  const savedBodyOverflow = document.body.style.overflow;\n  const savedWidth = ref.style.width;\n  const savedHeight = ref.style.height;\n  const savedFlex = ref.style.flexGrow;\n  document.body.style.overflow = \"hidden\";\n  ref.style.flexGrow = \"0\";\n  const { width: minWidth, height: minHeight } = ref.getBoundingClientRect();\n  ref.style.flexGrow = \"100\";\n  const { width: maxWidth, height: maxHeight } = ref.getBoundingClientRect();\n  document.body.style.overflow = savedBodyOverflow;\n  ref.style.width = savedWidth;\n  ref.style.height = savedHeight;\n  ref.style.flexGrow = savedFlex;\n  return { minWidth, maxWidth, minHeight, maxHeight };\n}\nfunction useResizeObserver(target, cb, throttleWait = 0, deps) {\n  const throttledCallback = throttle(cb, throttleWait);\n  useLayoutEffect(() => {\n    if (!target) {\n      return;\n    }\n    const resizeObserver = new ResizeObserver(throttledCallback);\n    resizeObserver.observe(target, { box: \"device-pixel-content-box\" });\n    return () => resizeObserver.disconnect();\n  }, deps);\n}\n\nexport { Splitter };\n//# sourceMappingURL=Splitter.js.map\n","import { SceneObjectBase } from '../../../core/SceneObjectBase.js';\nimport { SplitLayoutRenderer } from './SplitLayoutRenderer.js';\n\nclass SplitLayout extends SceneObjectBase {\n  toggleDirection() {\n    this.setState({\n      direction: this.state.direction === \"row\" ? \"column\" : \"row\"\n    });\n  }\n  isDraggable() {\n    return false;\n  }\n}\nSplitLayout.Component = SplitLayoutRenderer;\n\nexport { SplitLayout };\n//# sourceMappingURL=SplitLayout.js.map\n","import React from 'react';\nimport { Splitter } from './Splitter.js';\n\nfunction SplitLayoutRenderer({ model }) {\n  const { primary, secondary, direction, isHidden, initialSize, primaryPaneStyles, secondaryPaneStyles } = model.useState();\n  if (isHidden) {\n    return null;\n  }\n  const Prim = primary.Component;\n  const Sec = secondary == null ? void 0 : secondary.Component;\n  let startSize = secondary ? initialSize : 1;\n  return /* @__PURE__ */ React.createElement(Splitter, {\n    direction,\n    initialSize: startSize != null ? startSize : 0.5,\n    primaryPaneStyles,\n    secondaryPaneStyles\n  }, /* @__PURE__ */ React.createElement(Prim, {\n    key: primary.state.key,\n    model: primary,\n    parentState: model.state\n  }), Sec && secondary && /* @__PURE__ */ React.createElement(Sec, {\n    key: secondary.state.key,\n    model: secondary,\n    parentState: model.state\n  }));\n}\n\nexport { SplitLayoutRenderer };\n//# sourceMappingURL=SplitLayoutRenderer.js.map\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { renderSceneComponentWithRouteProps } from './utils.js';\n\nclass SceneApp extends SceneObjectBase {\n  enrichDataRequest() {\n    return {\n      app: this.state.name || \"app\"\n    };\n  }\n}\nSceneApp.Component = ({ model }) => {\n  const { pages } = model.useState();\n  return /* @__PURE__ */ React.createElement(Switch, null, pages.map((page) => /* @__PURE__ */ React.createElement(Route, {\n    key: page.state.url,\n    exact: false,\n    path: page.state.url,\n    render: (props) => renderSceneComponentWithRouteProps(page, props)\n  })));\n};\nconst sceneAppCache = /* @__PURE__ */ new Map();\nfunction useSceneApp(factory) {\n  const cachedApp = sceneAppCache.get(factory);\n  if (cachedApp) {\n    return cachedApp;\n  }\n  const newApp = factory();\n  sceneAppCache.set(factory, newApp);\n  return newApp;\n}\n\nexport { SceneApp, useSceneApp };\n//# sourceMappingURL=SceneApp.js.map\n","import React from 'react';\nimport { SceneObjectBase } from '../core/SceneObjectBase.js';\n\nvar __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nclass SceneReactObject extends SceneObjectBase {\n}\nSceneReactObject.Component = ({ model }) => {\n  const { component: Component, props, reactNode } = model.useState();\n  if (Component) {\n    return /* @__PURE__ */ React.createElement(Component, __spreadValues({}, props));\n  }\n  if (reactNode) {\n    return reactNode;\n  }\n  return null;\n};\n\nexport { SceneReactObject };\n//# sourceMappingURL=SceneReactObject.js.map\n","import { css } from '@emotion/css';\nimport { useStyles2, JSONFormatter, Input } from '@grafana/ui';\nimport { isPlainObject, isArray } from 'lodash';\nimport React from 'react';\nimport { isSceneObject } from '../../core/types.js';\n\nfunction DebugDetails({ node }) {\n  const state = node.useState();\n  const styles = useStyles2(getStyles);\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.container\n  }, Object.keys(state).map((key) => /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.row,\n    key\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.keyName\n  }, key), /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.value\n  }, renderValue(key, state[key], node)))));\n}\nfunction renderValue(key, value, node) {\n  if (value === null) {\n    return \"null\";\n  }\n  switch (typeof value) {\n    case \"number\":\n      return /* @__PURE__ */ React.createElement(Input, {\n        type: \"number\",\n        defaultValue: value,\n        onBlur: (evt) => node.setState({ [key]: evt.currentTarget.valueAsNumber })\n      });\n    case \"string\":\n      return /* @__PURE__ */ React.createElement(Input, {\n        type: \"text\",\n        defaultValue: value,\n        onBlur: (evt) => node.setState({ [key]: evt.currentTarget.value })\n      });\n    case \"object\":\n      if (isSceneObject(value)) {\n        return value.constructor.name;\n      }\n      if (isPlainObject(value) || isArray(value)) {\n        return /* @__PURE__ */ React.createElement(JSONFormatter, {\n          json: value,\n          open: 0\n        });\n      }\n      return String(value);\n    default:\n      return typeof value;\n  }\n}\nfunction getStyles(theme) {\n  return {\n    container: css({\n      flexGrow: 1,\n      display: \"flex\",\n      gap: theme.spacing(0.5),\n      flexDirection: \"column\"\n    }),\n    row: css({\n      display: \"flex\",\n      gap: theme.spacing(2)\n    }),\n    keyName: css({\n      display: \"flex\",\n      flexGrow: \"0\",\n      width: 120,\n      alignItems: \"center\",\n      height: theme.spacing(theme.components.height.md)\n    }),\n    value: css({\n      flexGrow: 1,\n      minHeight: theme.spacing(theme.components.height.md),\n      display: \"flex\",\n      alignItems: \"center\"\n    })\n  };\n}\n\nexport { DebugDetails };\n//# sourceMappingURL=DebugDetails.js.map\n","import { cx, css } from '@emotion/css';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nfunction DebugTreeNode({ node, selectedObject, onSelect }) {\n  const styles = useStyles2(getStyles);\n  const children = [];\n  const isSelected = node === selectedObject;\n  node.forEachChild((child) => {\n    children.push(\n      /* @__PURE__ */ React.createElement(DebugTreeNode, {\n        node: child,\n        key: child.state.key,\n        selectedObject,\n        onSelect\n      })\n    );\n  });\n  return /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.container\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: cx(styles.name, isSelected && styles.selected),\n    onClick: () => onSelect(node)\n  }, node.constructor.name), /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.children\n  }, children));\n}\nfunction getStyles(theme) {\n  return {\n    container: css({\n      flexGrow: 1,\n      display: \"flex\",\n      gap: theme.spacing(0.5),\n      flexDirection: \"column\"\n    }),\n    name: css({\n      flexGrow: 1,\n      display: \"flex\",\n      gap: theme.spacing(1),\n      fontSize: theme.typography.bodySmall.fontSize,\n      cursor: \"pointer\",\n      padding: theme.spacing(0, 1),\n      borderRadius: theme.shape.borderRadius(2),\n      position: \"relative\",\n      \"&:hover\": {\n        background: theme.colors.background.secondary\n      }\n    }),\n    selected: css({\n      \"&::before\": {\n        display: \"block\",\n        content: \"' '\",\n        position: \"absolute\",\n        left: 0,\n        width: 4,\n        bottom: 2,\n        top: 2,\n        borderRadius: theme.shape.radius.default,\n        backgroundImage: theme.colors.gradients.brandVertical\n      }\n    }),\n    children: css({\n      flexGrow: 1,\n      display: \"flex\",\n      flexDirection: \"column\",\n      paddingLeft: theme.spacing(1)\n    })\n  };\n}\n\nexport { DebugTreeNode };\n//# sourceMappingURL=DebugTreeNode.js.map\n","import { css } from '@emotion/css';\nimport { useStyles2, ToolbarButton, Drawer, CustomScrollbar } from '@grafana/ui';\nimport React, { useState } from 'react';\nimport { DebugDetails } from './DebugDetails.js';\nimport { DebugTreeNode } from './DebugTreeNode.js';\n\nfunction SceneDebugger({ scene }) {\n  const styles = useStyles2(getStyles);\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedObject, setSelectedObject] = useState();\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ToolbarButton, {\n    variant: \"canvas\",\n    icon: \"bug\",\n    onClick: () => setIsOpen(true)\n  }), isOpen && /* @__PURE__ */ React.createElement(Drawer, {\n    title: \"Scene debugger\",\n    onClose: () => setIsOpen(false),\n    size: \"lg\"\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.panes\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.pane1\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.paneHeading\n  }, \"Scene graph\"), /* @__PURE__ */ React.createElement(CustomScrollbar, {\n    autoHeightMin: \"100%\"\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.treeWrapper\n  }, /* @__PURE__ */ React.createElement(DebugTreeNode, {\n    node: scene,\n    selectedObject,\n    onSelect: setSelectedObject\n  })))), /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.pane2\n  }, /* @__PURE__ */ React.createElement(\"div\", {\n    className: styles.paneHeading\n  }, \"Object details\"), selectedObject && /* @__PURE__ */ React.createElement(DebugDetails, {\n    node: selectedObject\n  })))));\n}\nfunction getStyles(theme) {\n  return {\n    panes: css({\n      flexGrow: 1,\n      display: \"flex\",\n      height: \"100%\",\n      flexDirection: \"row\",\n      marginTop: theme.spacing(-2)\n    }),\n    pane1: css({\n      flexGrow: 0,\n      display: \"flex\",\n      height: \"100%\",\n      flexDirection: \"column\",\n      borderRight: `1px solid ${theme.colors.border.weak}`\n    }),\n    pane2: css({\n      flexGrow: 1,\n      display: \"flex\",\n      minHeight: \"100%\",\n      flexDirection: \"column\",\n      paddingLeft: theme.spacing(2)\n    }),\n    treeWrapper: css({\n      paddingRight: theme.spacing(2),\n      height: \"100%\",\n      marginLeft: theme.spacing(-1)\n    }),\n    paneHeading: css({\n      padding: theme.spacing(1, 0),\n      fontWeight: theme.typography.fontWeightMedium\n    })\n  };\n}\n\nexport { SceneDebugger };\n//# sourceMappingURL=SceneDebugger.js.map\n","import { PluginPage } from '@grafana/runtime';\nimport React, { useLayoutEffect, useEffect } from 'react';\nimport { SceneDebugger } from '../SceneDebugger/SceneDebugger.js';\nimport { SceneAppPage } from './SceneAppPage.js';\nimport { useAppQueryParams, getUrlWithAppState, renderSceneComponentWithRouteProps } from './utils.js';\n\nfunction SceneAppPageView({ page, routeProps }) {\n  const containerPage = getParentPageIfTab(page);\n  const containerState = containerPage.useState();\n  const params = useAppQueryParams();\n  const scene = page.getScene(routeProps.match);\n  const isInitialized = containerState.initializedScene === scene;\n  useLayoutEffect(() => {\n    if (!isInitialized) {\n      containerPage.initializeScene(scene);\n    }\n  }, [scene, containerPage, isInitialized]);\n  useEffect(() => {\n    return () => containerPage.setState({ initializedScene: void 0 });\n  }, [containerPage]);\n  if (!isInitialized) {\n    return null;\n  }\n  const pageNav = {\n    text: containerState.title,\n    img: containerState.titleImg,\n    icon: containerState.titleIcon,\n    url: getUrlWithAppState(containerState.url, containerState.preserveUrlKeys),\n    hideFromBreadcrumbs: containerState.hideFromBreadcrumbs,\n    parentItem: getParentBreadcrumbs(\n      containerState.getParentPage ? containerState.getParentPage() : containerPage.parent)\n  };\n  if (containerState.tabs) {\n    pageNav.children = containerState.tabs.map((tab) => {\n      return {\n        text: tab.state.title,\n        icon: tab.state.titleIcon,\n        tabSuffix: tab.state.tabSuffix,\n        active: page === tab,\n        url: getUrlWithAppState(tab.state.url, tab.state.preserveUrlKeys),\n        parentItem: pageNav\n      };\n    });\n  }\n  let pageActions = [];\n  if (containerState.controls) {\n    pageActions = containerState.controls.map((control) => /* @__PURE__ */ React.createElement(control.Component, {\n      model: control,\n      key: control.state.key\n    }));\n  }\n  if (params[\"scene-debugger\"]) {\n    pageActions.push(/* @__PURE__ */ React.createElement(SceneDebugger, {\n      scene: containerPage,\n      key: \"scene-debugger\"\n    }));\n  }\n  return /* @__PURE__ */ React.createElement(PluginPage, {\n    pageNav,\n    actions: pageActions,\n    renderTitle: containerState.renderTitle,\n    subTitle: containerState.subTitle\n  }, /* @__PURE__ */ React.createElement(scene.Component, {\n    model: scene\n  }));\n}\nfunction getParentPageIfTab(page) {\n  if (page.parent instanceof SceneAppPage) {\n    return page.parent;\n  }\n  return page;\n}\nfunction getParentBreadcrumbs(parent, params) {\n  if (parent instanceof SceneAppPage) {\n    return {\n      text: parent.state.title,\n      url: getUrlWithAppState(parent.state.url, parent.state.preserveUrlKeys),\n      hideFromBreadcrumbs: parent.state.hideFromBreadcrumbs,\n      parentItem: getParentBreadcrumbs(\n        parent.state.getParentPage ? parent.state.getParentPage() : parent.parent)\n    };\n  }\n  return void 0;\n}\nfunction SceneAppDrilldownViewRender({ drilldown, parent, routeProps }) {\n  return renderSceneComponentWithRouteProps(parent.getDrilldownPage(drilldown, routeProps.match), routeProps);\n}\n\nexport { SceneAppDrilldownViewRender, SceneAppPageView };\n//# sourceMappingURL=SceneAppPageView.js.map\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { SceneObjectBase } from '../../core/SceneObjectBase.js';\nimport { isDataRequestEnricher } from '../../core/types.js';\nimport { getUrlSyncManager } from '../../services/UrlSyncManager.js';\nimport { EmbeddedScene } from '../EmbeddedScene.js';\nimport { SceneFlexLayout, SceneFlexItem } from '../layout/SceneFlexLayout.js';\nimport { SceneReactObject } from '../SceneReactObject.js';\nimport { SceneAppDrilldownViewRender, SceneAppPageView } from './SceneAppPageView.js';\nimport { renderSceneComponentWithRouteProps } from './utils.js';\n\nclass SceneAppPage extends SceneObjectBase {\n  constructor(state) {\n    super(state);\n    this._sceneCache = /* @__PURE__ */ new Map();\n    this._drilldownCache = /* @__PURE__ */ new Map();\n    this.addActivationHandler(() => {\n      return () => getUrlSyncManager().cleanUp(this);\n    });\n  }\n  initializeScene(scene) {\n    this.setState({ initializedScene: scene });\n    getUrlSyncManager().initSync(this);\n  }\n  getScene(routeMatch) {\n    let scene = this._sceneCache.get(routeMatch.url);\n    if (scene) {\n      return scene;\n    }\n    if (!this.state.getScene) {\n      throw new Error(\"Missing getScene on SceneAppPage \" + this.state.title);\n    }\n    scene = this.state.getScene(routeMatch);\n    this._sceneCache.set(routeMatch.url, scene);\n    return scene;\n  }\n  getDrilldownPage(drilldown, routeMatch) {\n    let page = this._drilldownCache.get(routeMatch.url);\n    if (page) {\n      return page;\n    }\n    page = drilldown.getPage(routeMatch, this);\n    this._drilldownCache.set(routeMatch.url, page);\n    return page;\n  }\n  enrichDataRequest(source) {\n    if (this.state.getParentPage) {\n      return this.state.getParentPage().enrichDataRequest(source);\n    }\n    if (!this.parent) {\n      return null;\n    }\n    const root = this.getRoot();\n    if (isDataRequestEnricher(root)) {\n      return root.enrichDataRequest(source);\n    }\n    return null;\n  }\n}\nSceneAppPage.Component = SceneAppPageRenderer;\nfunction SceneAppPageRenderer({ model, routeProps }) {\n  var _a, _b;\n  const { tabs, drilldowns } = model.useState();\n  const routes = [];\n  if (tabs && tabs.length > 0) {\n    for (let tabIndex = 0; tabIndex < tabs.length; tabIndex++) {\n      const tab = tabs[tabIndex];\n      if (tabIndex === 0) {\n        routes.push(\n          /* @__PURE__ */ React.createElement(Route, {\n            exact: true,\n            key: model.state.url,\n            path: (_a = model.state.routePath) != null ? _a : model.state.url,\n            render: (props) => renderSceneComponentWithRouteProps(tab, props)\n          })\n        );\n      }\n      routes.push(\n        /* @__PURE__ */ React.createElement(Route, {\n          exact: true,\n          key: tab.state.url,\n          path: (_b = tab.state.routePath) != null ? _b : tab.state.url,\n          render: (props) => renderSceneComponentWithRouteProps(tab, props)\n        })\n      );\n      if (tab.state.drilldowns) {\n        for (const drilldown of tab.state.drilldowns) {\n          routes.push(\n            /* @__PURE__ */ React.createElement(Route, {\n              exact: false,\n              key: drilldown.routePath,\n              path: drilldown.routePath,\n              render: (props) => /* @__PURE__ */ React.createElement(SceneAppDrilldownViewRender, {\n                drilldown,\n                parent: tab,\n                routeProps: props\n              })\n            })\n          );\n        }\n      }\n    }\n  }\n  if (drilldowns) {\n    for (const drilldown of drilldowns) {\n      routes.push(\n        /* @__PURE__ */ React.createElement(Route, {\n          key: drilldown.routePath,\n          exact: false,\n          path: drilldown.routePath,\n          render: (props) => /* @__PURE__ */ React.createElement(SceneAppDrilldownViewRender, {\n            drilldown,\n            parent: model,\n            routeProps: props\n          })\n        })\n      );\n    }\n  }\n  if (!tabs && isCurrentPageRouteMatch(model, routeProps.match)) {\n    return /* @__PURE__ */ React.createElement(SceneAppPageView, {\n      page: model,\n      routeProps\n    });\n  }\n  routes.push(getFallbackRoute(model, routeProps));\n  return /* @__PURE__ */ React.createElement(Switch, null, routes);\n}\nfunction getFallbackRoute(page, routeProps) {\n  return /* @__PURE__ */ React.createElement(Route, {\n    key: \"fallback route\",\n    render: (props) => {\n      var _a, _b, _c;\n      const fallbackPage = (_c = (_b = (_a = page.state).getFallbackPage) == null ? void 0 : _b.call(_a)) != null ? _c : getDefaultFallbackPage();\n      return /* @__PURE__ */ React.createElement(SceneAppPageView, {\n        page: fallbackPage,\n        routeProps\n      });\n    }\n  });\n}\nfunction isCurrentPageRouteMatch(page, match) {\n  if (!match.isExact) {\n    return false;\n  }\n  if (match.url === page.state.url) {\n    return true;\n  }\n  if (page.parent instanceof SceneAppPage && page.parent.state.tabs[0] === page && page.parent.state.url === match.url) {\n    return true;\n  }\n  return false;\n}\nfunction getDefaultFallbackPage() {\n  return new SceneAppPage({\n    url: \"\",\n    title: \"Not found\",\n    subTitle: \"The url did not match any page\",\n    getScene: () => {\n      return new EmbeddedScene({\n        body: new SceneFlexLayout({\n          direction: \"column\",\n          children: [\n            new SceneFlexItem({\n              body: new SceneReactObject({\n                component: () => {\n                  return /* @__PURE__ */ React.createElement(\"div\", {\n                    \"data-testid\": \"default-fallback-content\"\n                  }, \"If you found your way here using a link then there might be a bug in this application.\");\n                }\n              })\n            })\n          ]\n        })\n      });\n    }\n  });\n}\n\nexport { SceneAppPage };\n//# sourceMappingURL=SceneAppPage.js.map\n","var VisibilityMode = /* @__PURE__ */ ((VisibilityMode2) => {\n  VisibilityMode2[\"Always\"] = \"always\";\n  VisibilityMode2[\"Auto\"] = \"auto\";\n  VisibilityMode2[\"Never\"] = \"never\";\n  return VisibilityMode2;\n})(VisibilityMode || {});\nvar GraphGradientMode = /* @__PURE__ */ ((GraphGradientMode2) => {\n  GraphGradientMode2[\"Hue\"] = \"hue\";\n  GraphGradientMode2[\"None\"] = \"none\";\n  GraphGradientMode2[\"Opacity\"] = \"opacity\";\n  GraphGradientMode2[\"Scheme\"] = \"scheme\";\n  return GraphGradientMode2;\n})(GraphGradientMode || {});\nvar StackingMode = /* @__PURE__ */ ((StackingMode2) => {\n  StackingMode2[\"None\"] = \"none\";\n  StackingMode2[\"Normal\"] = \"normal\";\n  StackingMode2[\"Percent\"] = \"percent\";\n  return StackingMode2;\n})(StackingMode || {});\nvar VizOrientation = /* @__PURE__ */ ((VizOrientation2) => {\n  VizOrientation2[\"Auto\"] = \"auto\";\n  VizOrientation2[\"Horizontal\"] = \"horizontal\";\n  VizOrientation2[\"Vertical\"] = \"vertical\";\n  return VizOrientation2;\n})(VizOrientation || {});\nvar BigValueColorMode = /* @__PURE__ */ ((BigValueColorMode2) => {\n  BigValueColorMode2[\"Background\"] = \"background\";\n  BigValueColorMode2[\"BackgroundSolid\"] = \"background_solid\";\n  BigValueColorMode2[\"None\"] = \"none\";\n  BigValueColorMode2[\"Value\"] = \"value\";\n  return BigValueColorMode2;\n})(BigValueColorMode || {});\nvar BigValueGraphMode = /* @__PURE__ */ ((BigValueGraphMode2) => {\n  BigValueGraphMode2[\"Area\"] = \"area\";\n  BigValueGraphMode2[\"Line\"] = \"line\";\n  BigValueGraphMode2[\"None\"] = \"none\";\n  return BigValueGraphMode2;\n})(BigValueGraphMode || {});\nvar BigValueJustifyMode = /* @__PURE__ */ ((BigValueJustifyMode2) => {\n  BigValueJustifyMode2[\"Auto\"] = \"auto\";\n  BigValueJustifyMode2[\"Center\"] = \"center\";\n  return BigValueJustifyMode2;\n})(BigValueJustifyMode || {});\nvar BigValueTextMode = /* @__PURE__ */ ((BigValueTextMode2) => {\n  BigValueTextMode2[\"Auto\"] = \"auto\";\n  BigValueTextMode2[\"Name\"] = \"name\";\n  BigValueTextMode2[\"None\"] = \"none\";\n  BigValueTextMode2[\"Value\"] = \"value\";\n  BigValueTextMode2[\"ValueAndName\"] = \"value_and_name\";\n  return BigValueTextMode2;\n})(BigValueTextMode || {});\nvar PercentChangeColorMode = /* @__PURE__ */ ((PercentChangeColorMode2) => {\n  PercentChangeColorMode2[\"Inverted\"] = \"inverted\";\n  PercentChangeColorMode2[\"SameAsValue\"] = \"same_as_value\";\n  PercentChangeColorMode2[\"Standard\"] = \"standard\";\n  return PercentChangeColorMode2;\n})(PercentChangeColorMode || {});\nvar TooltipDisplayMode = /* @__PURE__ */ ((TooltipDisplayMode2) => {\n  TooltipDisplayMode2[\"Multi\"] = \"multi\";\n  TooltipDisplayMode2[\"None\"] = \"none\";\n  TooltipDisplayMode2[\"Single\"] = \"single\";\n  return TooltipDisplayMode2;\n})(TooltipDisplayMode || {});\nvar BarGaugeDisplayMode = /* @__PURE__ */ ((BarGaugeDisplayMode2) => {\n  BarGaugeDisplayMode2[\"Basic\"] = \"basic\";\n  BarGaugeDisplayMode2[\"Gradient\"] = \"gradient\";\n  BarGaugeDisplayMode2[\"Lcd\"] = \"lcd\";\n  return BarGaugeDisplayMode2;\n})(BarGaugeDisplayMode || {});\nvar BarGaugeValueMode = /* @__PURE__ */ ((BarGaugeValueMode2) => {\n  BarGaugeValueMode2[\"Color\"] = \"color\";\n  BarGaugeValueMode2[\"Hidden\"] = \"hidden\";\n  BarGaugeValueMode2[\"Text\"] = \"text\";\n  return BarGaugeValueMode2;\n})(BarGaugeValueMode || {});\nvar BarGaugeNamePlacement = /* @__PURE__ */ ((BarGaugeNamePlacement2) => {\n  BarGaugeNamePlacement2[\"Auto\"] = \"auto\";\n  BarGaugeNamePlacement2[\"Left\"] = \"left\";\n  BarGaugeNamePlacement2[\"Top\"] = \"top\";\n  return BarGaugeNamePlacement2;\n})(BarGaugeNamePlacement || {});\nvar BarGaugeSizing = /* @__PURE__ */ ((BarGaugeSizing2) => {\n  BarGaugeSizing2[\"Auto\"] = \"auto\";\n  BarGaugeSizing2[\"Manual\"] = \"manual\";\n  return BarGaugeSizing2;\n})(BarGaugeSizing || {});\nvar TableCellHeight = /* @__PURE__ */ ((TableCellHeight2) => {\n  TableCellHeight2[\"Auto\"] = \"auto\";\n  TableCellHeight2[\"Lg\"] = \"lg\";\n  TableCellHeight2[\"Md\"] = \"md\";\n  TableCellHeight2[\"Sm\"] = \"sm\";\n  return TableCellHeight2;\n})(TableCellHeight || {});\n\nexport { BigValueColorMode as B, GraphGradientMode as G, PercentChangeColorMode as P, StackingMode as S, TableCellHeight as T, VisibilityMode as V, BigValueGraphMode as a, BigValueJustifyMode as b, BigValueTextMode as c, TooltipDisplayMode as d, BarGaugeSizing as e, BarGaugeDisplayMode as f, BarGaugeNamePlacement as g, BarGaugeValueMode as h, VizOrientation as i };\n","import { i as VizOrientation, V as VisibilityMode, S as StackingMode, G as GraphGradientMode } from '../../../../../common.gen-8ea2300f.js';\n\nconst pluginVersion = \"11.2.0\";\nconst defaultOptions = {\n  barRadius: 0,\n  barWidth: 0.97,\n  fullHighlight: false,\n  groupWidth: 0.7,\n  orientation: VizOrientation.Auto,\n  showValue: VisibilityMode.Auto,\n  stacking: StackingMode.None,\n  xTickLabelRotation: 0,\n  xTickLabelSpacing: 0\n};\nconst defaultFieldConfig = {\n  fillOpacity: 80,\n  gradientMode: GraphGradientMode.None,\n  lineWidth: 1\n};\n\nexport { defaultFieldConfig, defaultOptions, pluginVersion };\n","import { f as BarGaugeDisplayMode, g as BarGaugeNamePlacement, e as BarGaugeSizing, h as BarGaugeValueMode } from '../../../../../common.gen-8ea2300f.js';\n\nconst pluginVersion = \"11.2.0\";\nconst defaultOptions = {\n  displayMode: BarGaugeDisplayMode.Gradient,\n  maxVizHeight: 300,\n  minVizHeight: 16,\n  minVizWidth: 8,\n  namePlacement: BarGaugeNamePlacement.Auto,\n  showUnfilled: true,\n  sizing: BarGaugeSizing.Auto,\n  valueMode: BarGaugeValueMode.Color\n};\n\nexport { defaultOptions, pluginVersion };\n","import { G as GraphGradientMode } from '../../../../../common.gen-8ea2300f.js';\n\nconst pluginVersion = \"11.2.0\";\nconst defaultOptions = {\n  bucketCount: 30,\n  bucketOffset: 0\n};\nconst defaultFieldConfig = {\n  fillOpacity: 80,\n  gradientMode: GraphGradientMode.None,\n  lineWidth: 1\n};\n\nexport { defaultFieldConfig, defaultOptions, pluginVersion };\n","import { e as BarGaugeSizing } from '../../../../../common.gen-8ea2300f.js';\n\nconst pluginVersion = \"11.2.0\";\nconst defaultOptions = {\n  minVizHeight: 75,\n  minVizWidth: 75,\n  showThresholdLabels: false,\n  showThresholdMarkers: true,\n  sizing: BarGaugeSizing.Auto\n};\n\nexport { defaultOptions, pluginVersion };\n","import { V as VisibilityMode, d as TooltipDisplayMode } from '../../../../../common.gen-8ea2300f.js';\n\nconst pluginVersion = \"11.2.0\";\nvar HeatmapColorMode = /* @__PURE__ */ ((HeatmapColorMode2) => {\n  HeatmapColorMode2[\"Opacity\"] = \"opacity\";\n  HeatmapColorMode2[\"Scheme\"] = \"scheme\";\n  return HeatmapColorMode2;\n})(HeatmapColorMode || {});\nvar HeatmapColorScale = /* @__PURE__ */ ((HeatmapColorScale2) => {\n  HeatmapColorScale2[\"Exponential\"] = \"exponential\";\n  HeatmapColorScale2[\"Linear\"] = \"linear\";\n  return HeatmapColorScale2;\n})(HeatmapColorScale || {});\nvar HeatmapSelectionMode = /* @__PURE__ */ ((HeatmapSelectionMode2) => {\n  HeatmapSelectionMode2[\"X\"] = \"x\";\n  HeatmapSelectionMode2[\"Xy\"] = \"xy\";\n  HeatmapSelectionMode2[\"Y\"] = \"y\";\n  return HeatmapSelectionMode2;\n})(HeatmapSelectionMode || {});\nconst defaultOptions = {\n  calculate: false,\n  cellGap: 1,\n  cellValues: {},\n  color: {\n    /**\n     * mode:     HeatmapColorMode // TODO: fix after remove when https://github.com/grafana/cuetsy/issues/74 is fixed\n     */\n    scheme: \"Oranges\",\n    fill: \"dark-orange\",\n    /**\n     * scale:    HeatmapColorScale // TODO: fix after remove when https://github.com/grafana/cuetsy/issues/74 is fixed\n     */\n    reverse: false,\n    exponent: 0.5,\n    steps: 64\n  },\n  exemplars: {\n    color: \"rgba(255,0,255,0.7)\"\n  },\n  filterValues: {\n    le: 1e-9\n  },\n  legend: {\n    show: true\n  },\n  selectionMode: \"x\" /* X */,\n  showValue: VisibilityMode.Auto,\n  tooltip: {\n    mode: TooltipDisplayMode.Single,\n    yHistogram: false,\n    showColorScale: false\n  }\n};\n\nexport { HeatmapColorMode, HeatmapColorScale, HeatmapSelectionMode, defaultOptions, pluginVersion };\n","import { B as BigValueColorMode, a as BigValueGraphMode, b as BigValueJustifyMode, P as PercentChangeColorMode, c as BigValueTextMode } from '../../../../../common.gen-8ea2300f.js';\n\nconst pluginVersion = \"11.2.0\";\nconst defaultOptions = {\n  colorMode: BigValueColorMode.Value,\n  graphMode: BigValueGraphMode.Area,\n  justifyMode: BigValueJustifyMode.Auto,\n  percentChangeColorMode: PercentChangeColorMode.Standard,\n  showPercentChange: false,\n  textMode: BigValueTextMode.Auto,\n  wideLayout: true\n};\n\nexport { defaultOptions, pluginVersion };\n","import { V as VisibilityMode } from '../../../../../common.gen-8ea2300f.js';\n\nconst pluginVersion = \"11.2.0\";\nconst defaultOptions = {\n  alignValue: \"left\",\n  mergeValues: true,\n  perPage: 20,\n  rowHeight: 0.9,\n  showValue: VisibilityMode.Auto\n};\nconst defaultFieldConfig = {\n  fillOpacity: 70,\n  lineWidth: 0\n};\n\nexport { defaultFieldConfig, defaultOptions, pluginVersion };\n","import { V as VisibilityMode } from '../../../../../common.gen-8ea2300f.js';\n\nconst pluginVersion = \"11.2.0\";\nconst defaultOptions = {\n  colWidth: 0.9,\n  rowHeight: 0.9,\n  showValue: VisibilityMode.Auto\n};\nconst defaultFieldConfig = {\n  fillOpacity: 70,\n  lineWidth: 1\n};\n\nexport { defaultFieldConfig, defaultOptions, pluginVersion };\n","import { T as TableCellHeight } from '../../../../../common.gen-8ea2300f.js';\n\nconst pluginVersion = \"11.2.0\";\nconst defaultOptions = {\n  cellHeight: TableCellHeight.Sm,\n  footer: {\n    /**\n     * Controls whether the footer should be shown\n     */\n    show: false,\n    /**\n     * Controls whether the footer should show the total number of rows on Count calculation\n     */\n    countRows: false,\n    /**\n     * Represents the selected calculations\n     */\n    reducer: []\n  },\n  frameIndex: 0,\n  showHeader: true,\n  showTypeIcons: false,\n  sortBy: []\n};\n\nexport { defaultOptions, pluginVersion };\n","import { V as VisibilityMode } from '../../../../../common.gen-8ea2300f.js';\n\nconst pluginVersion = \"11.2.0\";\nvar SeriesMapping = /* @__PURE__ */ ((SeriesMapping2) => {\n  SeriesMapping2[\"Auto\"] = \"auto\";\n  SeriesMapping2[\"Manual\"] = \"manual\";\n  return SeriesMapping2;\n})(SeriesMapping || {});\nvar ScatterShow = /* @__PURE__ */ ((ScatterShow2) => {\n  ScatterShow2[\"Lines\"] = \"lines\";\n  ScatterShow2[\"Points\"] = \"points\";\n  ScatterShow2[\"PointsAndLines\"] = \"points+lines\";\n  return ScatterShow2;\n})(ScatterShow || {});\nconst defaultXYDimensionConfig = {\n  exclude: []\n};\nconst defaultFieldConfig = {\n  label: VisibilityMode.Auto,\n  show: \"points\" /* Points */\n};\nconst defaultOptions = {\n  series: []\n};\n\nexport { ScatterShow, SeriesMapping, defaultFieldConfig, defaultOptions, defaultXYDimensionConfig, pluginVersion };\n","class StandardFieldConfigOverridesBuilder {\n  constructor() {\n    this._overrides = [];\n  }\n  overrideColor(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"color\", value });\n    return this;\n  }\n  overrideDecimals(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"decimals\", value });\n    return this;\n  }\n  overrideDisplayName(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"displayName\", value });\n    return this;\n  }\n  overrideFilterable(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"filterable\", value });\n    return this;\n  }\n  overrideLinks(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"links\", value });\n    return this;\n  }\n  overrideMappings(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"mappings\", value });\n    return this;\n  }\n  overrideMax(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"max\", value });\n    return this;\n  }\n  overrideMin(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"min\", value });\n    return this;\n  }\n  overrideNoValue(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"noValue\", value });\n    return this;\n  }\n  overrideThresholds(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"thresholds\", value });\n    return this;\n  }\n  overrideUnit(value) {\n    this._overrides[this._overrides.length - 1].properties.push({ id: \"unit\", value });\n    return this;\n  }\n}\n\nexport { StandardFieldConfigOverridesBuilder };\n//# sourceMappingURL=StandardFieldConfigBuilders.js.map\n","import { FieldMatcherID } from '@grafana/data';\nimport { getCompareSeriesRefId } from '../../utils/getCompareSeriesRefId.js';\nimport { StandardFieldConfigOverridesBuilder } from './StandardFieldConfigBuilders.js';\n\nclass FieldConfigOverridesBuilder extends StandardFieldConfigOverridesBuilder {\n  match(matcher) {\n    this._overrides.push({ matcher, properties: [] });\n    return this;\n  }\n  matchFieldsWithName(name) {\n    this._overrides.push({\n      matcher: {\n        id: FieldMatcherID.byName,\n        options: name\n      },\n      properties: []\n    });\n    return this;\n  }\n  matchFieldsWithNameByRegex(regex) {\n    this._overrides.push({\n      matcher: {\n        id: FieldMatcherID.byRegexp,\n        options: regex\n      },\n      properties: []\n    });\n    return this;\n  }\n  matchFieldsByType(fieldType) {\n    this._overrides.push({\n      matcher: {\n        id: FieldMatcherID.byType,\n        options: fieldType\n      },\n      properties: []\n    });\n    return this;\n  }\n  matchFieldsByQuery(refId) {\n    this._overrides.push({\n      matcher: {\n        id: FieldMatcherID.byFrameRefID,\n        options: refId\n      },\n      properties: []\n    });\n    return this;\n  }\n  matchFieldsByValue(options) {\n    this._overrides.push({\n      matcher: {\n        id: FieldMatcherID.byValue,\n        options\n      },\n      properties: []\n    });\n    return this;\n  }\n  matchComparisonQuery(refId) {\n    return this.matchFieldsByQuery(getCompareSeriesRefId(refId));\n  }\n  overrideCustomFieldConfig(id, value) {\n    const _id = `custom.${String(id)}`;\n    const last = this._overrides[this._overrides.length - 1];\n    last.properties.push({ id: _id, value });\n    return this;\n  }\n  build() {\n    return this._overrides;\n  }\n}\n\nexport { FieldConfigOverridesBuilder };\n//# sourceMappingURL=FieldConfigOverridesBuilder.js.map\n","import { cloneDeep, merge } from 'lodash';\nimport { FieldConfigOverridesBuilder } from './FieldConfigOverridesBuilder.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass FieldConfigBuilder {\n  constructor(defaultFieldConfig) {\n    this.defaultFieldConfig = defaultFieldConfig;\n    this._fieldConfig = {\n      defaults: {},\n      overrides: []\n    };\n    this._overridesBuilder = new FieldConfigOverridesBuilder();\n    this.setDefaults();\n  }\n  setDefaults() {\n    const fieldConfig = {\n      defaults: {\n        custom: this.defaultFieldConfig ? cloneDeep(this.defaultFieldConfig()) : {}\n      },\n      overrides: []\n    };\n    this._fieldConfig = fieldConfig;\n  }\n  setColor(color) {\n    return this.setFieldConfigDefaults(\"color\", color);\n  }\n  setDecimals(decimals) {\n    return this.setFieldConfigDefaults(\"decimals\", decimals);\n  }\n  setDisplayName(displayName) {\n    return this.setFieldConfigDefaults(\"displayName\", displayName);\n  }\n  setFilterable(filterable) {\n    return this.setFieldConfigDefaults(\"filterable\", filterable);\n  }\n  setLinks(links) {\n    return this.setFieldConfigDefaults(\"links\", links);\n  }\n  setMappings(mappings) {\n    return this.setFieldConfigDefaults(\"mappings\", mappings);\n  }\n  setMax(max) {\n    return this.setFieldConfigDefaults(\"max\", max);\n  }\n  setMin(min) {\n    return this.setFieldConfigDefaults(\"min\", min);\n  }\n  setNoValue(noValue) {\n    return this.setFieldConfigDefaults(\"noValue\", noValue);\n  }\n  setThresholds(thresholds) {\n    return this.setFieldConfigDefaults(\"thresholds\", thresholds);\n  }\n  setUnit(unit) {\n    return this.setFieldConfigDefaults(\"unit\", unit);\n  }\n  setCustomFieldConfig(id, value) {\n    this._fieldConfig.defaults = __spreadProps(__spreadValues({}, this._fieldConfig.defaults), {\n      custom: merge(this._fieldConfig.defaults.custom, { [id]: value })\n    });\n    return this;\n  }\n  setOverrides(builder) {\n    builder(this._overridesBuilder);\n    return this;\n  }\n  setFieldConfigDefaults(key, value) {\n    this._fieldConfig.defaults = __spreadProps(__spreadValues({}, this._fieldConfig.defaults), {\n      [key]: value\n    });\n    return this;\n  }\n  build() {\n    return {\n      defaults: this._fieldConfig.defaults,\n      overrides: this._overridesBuilder.build()\n    };\n  }\n}\n\nexport { FieldConfigBuilder };\n//# sourceMappingURL=FieldConfigBuilder.js.map\n","import { cloneDeep, merge } from 'lodash';\n\nclass PanelOptionsBuilder {\n  constructor(defaultOptions) {\n    this.defaultOptions = defaultOptions;\n    this._options = {};\n    this.setDefaults();\n  }\n  setDefaults() {\n    this._options = this.defaultOptions ? cloneDeep(this.defaultOptions()) : {};\n  }\n  setOption(id, value) {\n    this._options = merge(this._options, { [id]: value });\n    return this;\n  }\n  build() {\n    return this._options;\n  }\n}\n\nexport { PanelOptionsBuilder };\n//# sourceMappingURL=PanelOptionsBuilder.js.map\n","import { VizPanel } from '../../components/VizPanel/VizPanel.js';\nimport { FieldConfigBuilder } from './FieldConfigBuilder.js';\nimport { PanelOptionsBuilder } from './PanelOptionsBuilder.js';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nclass VizPanelBuilder {\n  constructor(pluginId, pluginVersion, defaultOptions, defaultFieldConfig) {\n    this._state = {};\n    this._state.title = \"\";\n    this._state.description = \"\";\n    this._state.displayMode = \"default\";\n    this._state.hoverHeader = false;\n    this._state.pluginId = pluginId;\n    this._state.pluginVersion = pluginVersion;\n    this._fieldConfigBuilder = new FieldConfigBuilder(defaultFieldConfig);\n    this._panelOptionsBuilder = new PanelOptionsBuilder(defaultOptions);\n  }\n  setTitle(title) {\n    this._state.title = title;\n    return this;\n  }\n  setDescription(description) {\n    this._state.description = description;\n    return this;\n  }\n  setDisplayMode(displayMode) {\n    this._state.displayMode = displayMode;\n    return this;\n  }\n  setHoverHeader(hoverHeader) {\n    this._state.hoverHeader = hoverHeader;\n    return this;\n  }\n  setMenu(menu) {\n    this._state.menu = menu;\n    return this;\n  }\n  setHeaderActions(headerActions) {\n    this._state.headerActions = headerActions;\n    return this;\n  }\n  setColor(color) {\n    this._fieldConfigBuilder.setColor(color);\n    return this;\n  }\n  setDecimals(decimals) {\n    this._fieldConfigBuilder.setDecimals(decimals);\n    return this;\n  }\n  setDisplayName(displayName) {\n    this._fieldConfigBuilder.setDisplayName(displayName);\n    return this;\n  }\n  setFilterable(filterable) {\n    this._fieldConfigBuilder.setFilterable(filterable);\n    return this;\n  }\n  setLinks(links) {\n    this._fieldConfigBuilder.setLinks(links);\n    return this;\n  }\n  setMappings(mappings) {\n    this._fieldConfigBuilder.setMappings(mappings);\n    return this;\n  }\n  setMax(max) {\n    this._fieldConfigBuilder.setMax(max);\n    return this;\n  }\n  setMin(min) {\n    this._fieldConfigBuilder.setMin(min);\n    return this;\n  }\n  setNoValue(noValue) {\n    this._fieldConfigBuilder.setNoValue(noValue);\n    return this;\n  }\n  setThresholds(thresholds) {\n    this._fieldConfigBuilder.setThresholds(thresholds);\n    return this;\n  }\n  setUnit(unit) {\n    this._fieldConfigBuilder.setUnit(unit);\n    return this;\n  }\n  setCustomFieldConfig(id, value) {\n    this._fieldConfigBuilder.setCustomFieldConfig(id, value);\n    return this;\n  }\n  setOverrides(builder) {\n    this._fieldConfigBuilder.setOverrides(builder);\n    return this;\n  }\n  setOption(id, value) {\n    this._panelOptionsBuilder.setOption(id, value);\n    return this;\n  }\n  setData(data) {\n    this._state.$data = data;\n    return this;\n  }\n  setTimeRange(timeRange) {\n    this._state.$timeRange = timeRange;\n    return this;\n  }\n  setVariables(variables) {\n    this._state.$variables = variables;\n    return this;\n  }\n  setBehaviors(behaviors) {\n    this._state.$behaviors = behaviors;\n    return this;\n  }\n  build() {\n    const panel = new VizPanel(__spreadProps(__spreadValues({}, this._state), {\n      options: this._panelOptionsBuilder.build(),\n      fieldConfig: this._fieldConfigBuilder.build()\n    }));\n    return panel;\n  }\n}\n\nexport { VizPanelBuilder };\n//# sourceMappingURL=VizPanelBuilder.js.map\n","import { defaultOptions, defaultFieldConfig } from '@grafana/schema/dist/esm/raw/composable/barchart/panelcfg/x/BarChartPanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$1 } from '@grafana/schema/dist/esm/raw/composable/bargauge/panelcfg/x/BarGaugePanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$2 } from '@grafana/schema/dist/esm/raw/composable/datagrid/panelcfg/x/DatagridPanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$3 } from '@grafana/schema/dist/esm/raw/composable/gauge/panelcfg/x/GaugePanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$4 } from '@grafana/schema/dist/esm/raw/composable/geomap/panelcfg/x/GeomapPanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$5 } from '@grafana/schema/dist/esm/raw/composable/heatmap/panelcfg/x/HeatmapPanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$6, defaultFieldConfig as defaultFieldConfig$1 } from '@grafana/schema/dist/esm/raw/composable/histogram/panelcfg/x/HistogramPanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$7 } from '@grafana/schema/dist/esm/raw/composable/news/panelcfg/x/NewsPanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$8 } from '@grafana/schema/dist/esm/raw/composable/piechart/panelcfg/x/PieChartPanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$9 } from '@grafana/schema/dist/esm/raw/composable/stat/panelcfg/x/StatPanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$a, defaultFieldConfig as defaultFieldConfig$2 } from '@grafana/schema/dist/esm/raw/composable/statetimeline/panelcfg/x/StateTimelinePanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$b, defaultFieldConfig as defaultFieldConfig$3 } from '@grafana/schema/dist/esm/raw/composable/statushistory/panelcfg/x/StatusHistoryPanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$c } from '@grafana/schema/dist/esm/raw/composable/table/panelcfg/x/TablePanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$d } from '@grafana/schema/dist/esm/raw/composable/text/panelcfg/x/TextPanelCfg_types.gen';\nimport { defaultOptions as defaultOptions$e, defaultFieldConfig as defaultFieldConfig$4 } from '@grafana/schema/dist/esm/raw/composable/xychart/panelcfg/x/XYChartPanelCfg_types.gen';\nimport { VizPanelBuilder } from './VizPanelBuilder.js';\nimport 'lodash';\nimport '@grafana/data';\n\nconst PanelBuilders = {\n  barchart() {\n    return new VizPanelBuilder(\n      \"barchart\",\n      \"10.0.0\",\n      () => defaultOptions,\n      () => defaultFieldConfig\n    );\n  },\n  bargauge() {\n    return new VizPanelBuilder(\"bargauge\", \"10.0.0\", () => defaultOptions$1);\n  },\n  datagrid() {\n    return new VizPanelBuilder(\"datagrid\", \"10.0.0\", () => defaultOptions$2);\n  },\n  flamegraph() {\n    return new VizPanelBuilder(\"flamegraph\", \"10.0.0\");\n  },\n  gauge() {\n    return new VizPanelBuilder(\"gauge\", \"10.0.0\", () => defaultOptions$3);\n  },\n  geomap() {\n    return new VizPanelBuilder(\"geomap\", \"10.0.0\", () => defaultOptions$4);\n  },\n  heatmap() {\n    return new VizPanelBuilder(\"heatmap\", \"10.0.0\", () => defaultOptions$5);\n  },\n  histogram() {\n    return new VizPanelBuilder(\n      \"histogram\",\n      \"10.0.0\",\n      () => defaultOptions$6,\n      () => defaultFieldConfig$1\n    );\n  },\n  logs() {\n    return new VizPanelBuilder(\"logs\", \"10.0.0\");\n  },\n  news() {\n    return new VizPanelBuilder(\"news\", \"10.0.0\", () => defaultOptions$7);\n  },\n  nodegraph() {\n    return new VizPanelBuilder(\"nodeGraph\", \"10.0.0\");\n  },\n  piechart() {\n    return new VizPanelBuilder(\n      \"piechart\",\n      \"10.0.0\",\n      () => defaultOptions$8\n    );\n  },\n  stat() {\n    return new VizPanelBuilder(\"stat\", \"10.0.0\", () => defaultOptions$9);\n  },\n  statetimeline() {\n    return new VizPanelBuilder(\n      \"state-timeline\",\n      \"10.0.0\",\n      () => defaultOptions$a,\n      () => defaultFieldConfig$2\n    );\n  },\n  statushistory() {\n    return new VizPanelBuilder(\n      \"status-history\",\n      \"10.0.0\",\n      () => defaultOptions$b,\n      () => defaultFieldConfig$3\n    );\n  },\n  table() {\n    return new VizPanelBuilder(\"table\", \"10.0.0\", () => defaultOptions$c);\n  },\n  text() {\n    return new VizPanelBuilder(\"text\", \"10.0.0\", () => defaultOptions$d);\n  },\n  timeseries() {\n    return new VizPanelBuilder(\"timeseries\", \"10.0.0\");\n  },\n  trend() {\n    return new VizPanelBuilder(\"trend\", \"10.0.0\");\n  },\n  traces() {\n    return new VizPanelBuilder(\"traces\", \"10.0.0\");\n  },\n  xychart() {\n    return new VizPanelBuilder(\n      \"xychart\",\n      \"10.0.0\",\n      () => defaultOptions$e,\n      () => defaultFieldConfig$4\n    );\n  }\n};\n\nexport { PanelBuilders };\n//# sourceMappingURL=index.js.map\n","import { getUrlWithAppState } from './components/SceneApp/utils.js';\nimport { registerRuntimePanelPlugin } from './components/VizPanel/registerRuntimePanelPlugin.js';\nimport { cloneSceneObjectState } from './core/sceneGraph/utils.js';\nimport { registerRuntimeDataSource } from './querying/RuntimeDataSource.js';\nexport { RuntimeDataSource, registerRuntimeDataSource } from './querying/RuntimeDataSource.js';\nimport { syncStateFromSearchParams, getUrlState } from './services/utils.js';\nimport { registerVariableMacro } from './variables/macros/index.js';\nimport { renderPrometheusLabelFilters } from './variables/utils.js';\nimport { isAdHocVariable, isConstantVariable, isCustomVariable, isDataSourceVariable, isIntervalVariable, isQueryVariable, isTextBoxVariable, isGroupByVariable } from './variables/variants/guards.js';\nexport { isDataLayer, isDataRequestEnricher, isFiltersRequestEnricher, isSceneObject } from './core/types.js';\nexport { SceneObjectStateChangedEvent, UserActionEvent } from './core/events.js';\nexport { sceneGraph } from './core/sceneGraph/index.js';\nimport * as index from './behaviors/index.js';\nexport { index as behaviors };\nimport * as index$1 from './querying/layers/index.js';\nexport { index$1 as dataLayers };\nexport { SceneObjectBase, useSceneObjectState } from './core/SceneObjectBase.js';\nexport { SceneDataNode } from './core/SceneDataNode.js';\nexport { SceneTimeRange } from './core/SceneTimeRange.js';\nexport { SceneTimeZoneOverride } from './core/SceneTimeZoneOverride.js';\nexport { SceneQueryRunner } from './querying/SceneQueryRunner.js';\nexport { SceneDataLayerSet, SceneDataLayerSetBase } from './querying/SceneDataLayerSet.js';\nexport { SceneDataLayerBase } from './querying/layers/SceneDataLayerBase.js';\nexport { SceneDataLayerControls } from './querying/layers/SceneDataLayerControls.js';\nexport { SceneDataTransformer } from './querying/SceneDataTransformer.js';\nexport { registerQueryWithController } from './querying/registerQueryWithController.js';\nexport { SceneVariableValueChangedEvent, isCustomVariableValue } from './variables/types.js';\nexport { VariableDependencyConfig } from './variables/VariableDependencyConfig.js';\nexport { formatRegistry } from './variables/interpolation/formatRegistry.js';\nexport { VariableValueSelectWrapper, VariableValueSelectors } from './variables/components/VariableValueSelectors.js';\nexport { VariableValueControl } from './variables/components/VariableValueControl.js';\nexport { SceneVariableSet } from './variables/sets/SceneVariableSet.js';\nexport { ConstantVariable } from './variables/variants/ConstantVariable.js';\nexport { CustomVariable } from './variables/variants/CustomVariable.js';\nexport { DataSourceVariable } from './variables/variants/DataSourceVariable.js';\nexport { QueryVariable } from './variables/variants/query/QueryVariable.js';\nexport { TestVariable } from './variables/variants/TestVariable.js';\nexport { TextBoxVariable } from './variables/variants/TextBoxVariable.js';\nexport { MultiValueVariable } from './variables/variants/MultiValueVariable.js';\nexport { LocalValueVariable } from './variables/variants/LocalValueVariable.js';\nexport { IntervalVariable } from './variables/variants/IntervalVariable.js';\nexport { AdHocFiltersVariable } from './variables/adhoc/AdHocFiltersVariable.js';\nexport { GroupByVariable } from './variables/groupby/GroupByVariable.js';\nexport { UrlSyncManager, getUrlSyncManager } from './services/UrlSyncManager.js';\nexport { SceneObjectUrlSyncConfig } from './services/SceneObjectUrlSyncConfig.js';\nexport { EmbeddedScene } from './components/EmbeddedScene.js';\nexport { VizPanel } from './components/VizPanel/VizPanel.js';\nexport { VizPanelMenu } from './components/VizPanel/VizPanelMenu.js';\nexport { NestedScene } from './components/NestedScene.js';\nexport { SceneCanvasText } from './components/SceneCanvasText.js';\nexport { SceneToolbarButton, SceneToolbarInput } from './components/SceneToolbarButton.js';\nexport { SceneTimePicker } from './components/SceneTimePicker.js';\nexport { SceneRefreshPicker } from './components/SceneRefreshPicker.js';\nexport { SceneTimeRangeTransformerBase } from './core/SceneTimeRangeTransformerBase.js';\nexport { SceneTimeRangeCompare } from './components/SceneTimeRangeCompare.js';\nexport { SceneByFrameRepeater } from './components/SceneByFrameRepeater.js';\nexport { SceneByVariableRepeater } from './components/SceneByVariableRepeater.js';\nexport { SceneControlsSpacer } from './components/SceneControlsSpacer.js';\nexport { SceneFlexItem, SceneFlexLayout } from './components/layout/SceneFlexLayout.js';\nexport { SceneCSSGridItem, SceneCSSGridLayout } from './components/layout/CSSGrid/SceneCSSGridLayout.js';\nexport { SceneGridLayout } from './components/layout/grid/SceneGridLayout.js';\nexport { SceneGridItem } from './components/layout/grid/SceneGridItem.js';\nexport { SceneGridRow } from './components/layout/grid/SceneGridRow.js';\nexport { SplitLayout } from './components/layout/split/SplitLayout.js';\nexport { SceneApp, useSceneApp } from './components/SceneApp/SceneApp.js';\nexport { SceneAppPage } from './components/SceneApp/SceneAppPage.js';\nexport { SceneReactObject } from './components/SceneReactObject.js';\nexport { SceneObjectRef } from './core/SceneObjectRef.js';\nexport { PanelBuilders } from './core/PanelBuilders/index.js';\nexport { FieldConfigBuilder } from './core/PanelBuilders/FieldConfigBuilder.js';\nexport { VizPanelBuilder } from './core/PanelBuilders/VizPanelBuilder.js';\nexport { SceneDebugger } from './components/SceneDebugger/SceneDebugger.js';\nexport { renderSelectForVariable } from './variables/components/VariableValueSelect.js';\nexport { VizConfigBuilder } from './core/PanelBuilders/VizConfigBuilder.js';\nexport { VizConfigBuilders } from './core/PanelBuilders/VizConfigBuilders.js';\nexport { PanelOptionsBuilders } from './core/PanelBuilders/PanelOptionsBuilders.js';\nexport { FieldConfigBuilders } from './core/PanelBuilders/FieldConfigBuilders.js';\nexport { FieldConfigOverridesBuilder } from './core/PanelBuilders/FieldConfigOverridesBuilder.js';\n\nconst sceneUtils = {\n  getUrlWithAppState,\n  registerRuntimePanelPlugin,\n  registerRuntimeDataSource,\n  registerVariableMacro,\n  cloneSceneObjectState,\n  syncStateFromSearchParams,\n  getUrlState,\n  renderPrometheusLabelFilters,\n  isAdHocVariable,\n  isConstantVariable,\n  isCustomVariable,\n  isDataSourceVariable,\n  isIntervalVariable,\n  isQueryVariable,\n  isTextBoxVariable,\n  isGroupByVariable\n};\n\nexport { sceneUtils };\n//# sourceMappingURL=index.js.map\n","/**\n * Prepares browser history before a user action is called\n *\n * This can be called BEFORE a user action is triggered. It is expected that the app is using UrlSyncManager\n * and the user action will change at least one variable or state synced with the URL. Once any variable or\n * state synced with the URL is triggered, UrlSyncManager will take care of replacing the prepared history entry.\n */\nexport function prepareHistoryEntry() {\n  history.pushState(null, '');\n}\n","import { BusEventWithPayload, DataFrame } from '@grafana/data';\n\ninterface EventTimeseriesDataReceivedPayload {\n  series?: DataFrame[];\n}\n\nexport class EventTimeseriesDataReceived extends BusEventWithPayload<EventTimeseriesDataReceivedPayload> {\n  public static type = 'timeseries-data-received';\n}\n","import { State } from 'xstate';\n\nexport enum FilterKind {\n  'partial' = 'partial',\n  'attribute-operator-value' = 'attribute-operator-value',\n  'attribute-operator' = 'attribute-operator',\n}\n\nexport enum OperatorKind {\n  '=' = '=',\n  '!=' = '!=',\n  'in' = 'in',\n  'not-in' = 'not-in',\n  'is-empty' = 'is-empty',\n  '=~' = '=~',\n  '!~' = '!~',\n}\n\nexport type PartialFilter = {\n  id: string;\n  type: FilterKind;\n  attribute: Suggestion;\n  operator?: Suggestion;\n  value?: Suggestion;\n  active: boolean;\n};\n\nexport type CompleteFilter = {\n  id: string;\n  type: FilterKind;\n  attribute: Suggestion;\n  operator: Suggestion;\n  value: Suggestion;\n  active: boolean;\n};\n\nexport type Filter = PartialFilter | CompleteFilter;\n\nexport type CompleteFilters = CompleteFilter[];\n\nexport type Filters = [PartialFilter] | CompleteFilter[] | [...CompleteFilter[], PartialFilter];\n\nexport enum FilterPartKind {\n  attribute = 'attribute',\n  operator = 'operator',\n  value = 'value',\n}\n\nexport type Suggestion = {\n  value: string;\n  label: string;\n  description?: string;\n};\n\nexport type Suggestions = Suggestion[];\n\nexport enum SuggestionKind {\n  'attribute' = 'attribute',\n  'operator' = 'operator',\n  'value' = 'value',\n}\n\nexport type InputParams = {\n  query: string;\n  from: number;\n  to: number;\n  // TODO: after migrate the legacy comparison pages to Scenes, dataSourceUid will be mandatory\n  dataSourceUid?: string;\n};\n\nexport type Edition = {\n  filterId: string;\n  part: FilterPartKind;\n};\n\nexport type QueryBuilderContext = {\n  inputParams: InputParams;\n  query: string;\n  filters: Filters;\n  isQueryUpToDate: boolean;\n  edition: Edition | null;\n  suggestions: {\n    type: SuggestionKind | null;\n    items: Suggestions;\n    isVisible: boolean;\n    isLoading: boolean;\n    error: Error | null;\n    placeholder: string;\n    noOptionsMessage: string;\n    allowCustomValue: boolean;\n    multiple: boolean;\n    disabled: boolean;\n  };\n};\n\nexport type QueryBuilderSchema = {\n  states: {\n    idle: State<QueryBuilderContext, QueryBuilderEvent>;\n    loadLabels: State<QueryBuilderContext, QueryBuilderEvent>;\n    displayLabels: State<QueryBuilderContext, QueryBuilderEvent>;\n    loadLabelValues: State<QueryBuilderContext, QueryBuilderEvent>;\n    loadOperators: State<QueryBuilderContext, QueryBuilderEvent>;\n    displayOperators: State<QueryBuilderContext, QueryBuilderEvent>;\n    displayLabelValues: State<QueryBuilderContext, QueryBuilderEvent>;\n    autoSuggestProxy: State<QueryBuilderContext, QueryBuilderEvent>;\n  };\n};\n\ntype StartEvent = { type: 'START_INPUT' };\nexport type SelectEvent = { type: 'SELECT_SUGGESTION'; data: Suggestion };\ntype DiscardEvent = { type: 'DISCARD_SUGGESTIONS' };\nexport type EditEvent = { type: 'EDIT_FILTER'; data: Edition };\nexport type RemoveFilterEvent = { type: 'REMOVE_FILTER'; data: string }; // data = filterId\ntype RemoveLastFilterEvent = { type: 'REMOVE_LAST_FILTER' };\nexport type ChangeInputParamsEvent = { type: 'CHANGE_INPUT_PARAMS'; data: InputParams };\ntype ExecuteQueryEvent = { type: 'EXECUTE_QUERY' };\n\nexport type QueryBuilderEvent =\n  | StartEvent\n  | SelectEvent\n  | DiscardEvent\n  | EditEvent\n  | RemoveFilterEvent\n  | RemoveLastFilterEvent\n  | ChangeInputParamsEvent\n  | ExecuteQueryEvent;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nexport { __assign, __read, __rest, __spreadArray, __values };\n","var ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[\"Start\"] = \"xstate.start\";\n  ActionTypes[\"Stop\"] = \"xstate.stop\";\n  ActionTypes[\"Raise\"] = \"xstate.raise\";\n  ActionTypes[\"Send\"] = \"xstate.send\";\n  ActionTypes[\"Cancel\"] = \"xstate.cancel\";\n  ActionTypes[\"NullEvent\"] = \"\";\n  ActionTypes[\"Assign\"] = \"xstate.assign\";\n  ActionTypes[\"After\"] = \"xstate.after\";\n  ActionTypes[\"DoneState\"] = \"done.state\";\n  ActionTypes[\"DoneInvoke\"] = \"done.invoke\";\n  ActionTypes[\"Log\"] = \"xstate.log\";\n  ActionTypes[\"Init\"] = \"xstate.init\";\n  ActionTypes[\"Invoke\"] = \"xstate.invoke\";\n  ActionTypes[\"ErrorExecution\"] = \"error.execution\";\n  ActionTypes[\"ErrorCommunication\"] = \"error.communication\";\n  ActionTypes[\"ErrorPlatform\"] = \"error.platform\";\n  ActionTypes[\"ErrorCustom\"] = \"xstate.error\";\n  ActionTypes[\"Update\"] = \"xstate.update\";\n  ActionTypes[\"Pure\"] = \"xstate.pure\";\n  ActionTypes[\"Choose\"] = \"xstate.choose\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar SpecialTargets;\n\n(function (SpecialTargets) {\n  SpecialTargets[\"Parent\"] = \"#_parent\";\n  SpecialTargets[\"Internal\"] = \"#_internal\";\n})(SpecialTargets || (SpecialTargets = {}));\n\nexport { ActionTypes, SpecialTargets };\n","import { ActionTypes } from './types.js';\n\nvar start = ActionTypes.Start;\nvar stop = ActionTypes.Stop;\nvar raise = ActionTypes.Raise;\nvar send = ActionTypes.Send;\nvar cancel = ActionTypes.Cancel;\nvar nullEvent = ActionTypes.NullEvent;\nvar assign = ActionTypes.Assign;\nvar after = ActionTypes.After;\nvar doneState = ActionTypes.DoneState;\nvar log = ActionTypes.Log;\nvar init = ActionTypes.Init;\nvar invoke = ActionTypes.Invoke;\nvar errorExecution = ActionTypes.ErrorExecution;\nvar errorPlatform = ActionTypes.ErrorPlatform;\nvar error = ActionTypes.ErrorCustom;\nvar update = ActionTypes.Update;\nvar choose = ActionTypes.Choose;\nvar pure = ActionTypes.Pure;\n\nexport { after, assign, cancel, choose, doneState, error, errorExecution, errorPlatform, init, invoke, log, nullEvent, pure, raise, send, start, stop, update };\n","import { __values, __spreadArray, __read, __assign } from './_virtual/_tslib.js';\nimport { SpecialTargets } from './types.js';\nimport { raise, send } from './actionTypes.js';\nimport { DEFAULT_GUARD_TYPE, TARGETLESS_KEY, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar _a;\nfunction keys(value) {\n  return Object.keys(value);\n}\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return Object.keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\".concat(event) : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\nfunction getActionType(action) {\n  try {\n    return isString(action) || typeof action === 'number' ? \"\".concat(action) : isFunction(action) ? action.name : action.type;\n  } catch (e) {\n    throw new Error('Actions must be strings or objects with a string action.type property.');\n  }\n}\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\".concat(stateId, \"' is not a valid state path.\"));\n  }\n}\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = Object.keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nvar path = function (props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(Object.keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\nfunction pathsToStateValue(paths) {\n  var e_4, _a;\n\n  var result = {};\n\n  if (paths && paths.length === 1 && paths[0].length === 1) {\n    return paths[0][0];\n  }\n\n  try {\n    for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n      var currentPath = paths_1_1.value;\n      var marker = result; // tslint:disable-next-line:prefer-for-of\n\n      for (var i = 0; i < currentPath.length; i++) {\n        var subPath = currentPath[i];\n\n        if (i === currentPath.length - 2) {\n          marker[subPath] = currentPath[i + 1];\n          break;\n        }\n\n        marker[subPath] = marker[subPath] || {};\n        marker = marker[subPath];\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return result;\n}\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, __spreadArray([], __read(array), false));\n}\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\nfunction isBehavior(value) {\n  return value !== null && typeof value === 'object' && 'transition' in value && typeof value.transition === 'function';\n}\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = __read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\nfunction updateContext(context, _event, assignActions, state) {\n  if (!IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(Object.keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\nvar warn = function () {};\n\nif (!IS_PRODUCTION) {\n  warn = function (condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \".concat(message)];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction isString(value) {\n  return typeof value === 'string';\n}\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\nvar symbolObservable = /*#__PURE__*/function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}(); // TODO: to be removed in v5, left it out just to minimize the scope of the change and maintain compatibility with older versions of integration paackages\n\nvar interopSymbols = (_a = {}, _a[symbolObservable] = function () {\n  return this;\n}, _a[Symbol.observable] = function () {\n  return this;\n}, _a);\nfunction isMachine(value) {\n  return !!value && '__xstatenode' in value;\n}\nfunction isActor(value) {\n  return !!value && typeof value.send === 'function';\n}\nvar uniqueId = /*#__PURE__*/function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\nfunction normalizeTarget(target) {\n  if (target === undefined || target === TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\".concat(originalError.stack, \"'\") : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\".concat(id, \"', error was '\").concat(originalError, \"'.\").concat(originalStackTrace));\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\".concat(currentError.stack, \"'\") : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\".concat(id, \"'. \") + \"Original error: '\".concat(originalError, \"'. \").concat(originalStackTrace, \" Current error is '\").concat(currentError, \"'.\").concat(stackTrace));\n    }\n  }\n}\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === DEFAULT_GUARD_TYPE) {\n    return ((guards === null || guards === void 0 ? void 0 : guards[guard.name]) || guard.predicate)(context, _event.data, guardMeta);\n  }\n\n  var condFn = guards === null || guards === void 0 ? void 0 : guards[guard.type];\n\n  if (!condFn) {\n    throw new Error(\"Guard '\".concat(guard.type, \"' is not implemented on machine '\").concat(machine.id, \"'.\"));\n  }\n\n  return condFn(context, _event.data, guardMeta);\n}\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n\n  return src;\n}\nfunction toObserver(nextHandler, errorHandler, completionHandler) {\n  var noop = function () {};\n\n  var isObserver = typeof nextHandler === 'object';\n  var self = isObserver ? nextHandler : null;\n  return {\n    next: ((isObserver ? nextHandler.next : nextHandler) || noop).bind(self),\n    error: ((isObserver ? nextHandler.error : errorHandler) || noop).bind(self),\n    complete: ((isObserver ? nextHandler.complete : completionHandler) || noop).bind(self)\n  };\n}\nfunction createInvokeId(stateNodeId, index) {\n  return \"\".concat(stateNodeId, \":invocation[\").concat(index, \"]\");\n}\nfunction isRaisableAction(action) {\n  return (action.type === raise || action.type === send && action.to === SpecialTargets.Internal) && typeof action.delay !== 'number';\n}\n\nexport { createInvokeId, evaluateGuard, flatten, getActionType, getEventType, interopSymbols, isActor, isArray, isBehavior, isBuiltInEvent, isFunction, isMachine, isObservable, isPromiseLike, isRaisableAction, isStateLike, isString, keys, mapContext, mapFilterValues, mapValues, matchesState, nestedPath, normalizeTarget, partition, path, pathToStateValue, pathsToStateValue, reportUnhandledExceptionOnInvocation, symbolObservable, toArray, toArrayStrict, toEventObject, toGuard, toInvokeSource, toObserver, toSCXMLEvent, toStatePath, toStatePaths, toStateValue, toTransitionConfigArray, uniqueId, updateContext, updateHistoryStates, updateHistoryValue, warn };\n","var STATE_DELIMITER = '.';\nvar EMPTY_ACTIVITY_MAP = {};\nvar DEFAULT_GUARD_TYPE = 'xstate.guard';\nvar TARGETLESS_KEY = '';\n\nexport { DEFAULT_GUARD_TYPE, EMPTY_ACTIVITY_MAP, STATE_DELIMITER, TARGETLESS_KEY };\n","var IS_PRODUCTION = process.env.NODE_ENV === 'production';\n\nexport { IS_PRODUCTION };\n","import { __values, __spreadArray, __read } from './_virtual/_tslib.js';\nimport { flatten } from './utils.js';\n\nvar isLeafNode = function (stateNode) {\n  return stateNode.type === 'atomic' || stateNode.type === 'final';\n};\nfunction getAllChildren(stateNode) {\n  return Object.keys(stateNode.states).map(function (key) {\n    return stateNode.states[key];\n  });\n}\nfunction getChildren(stateNode) {\n  return getAllChildren(stateNode).filter(function (sn) {\n    return sn.type !== 'history';\n  });\n}\nfunction getAllStateNodes(stateNode) {\n  var stateNodes = [stateNode];\n\n  if (isLeafNode(stateNode)) {\n    return stateNodes;\n  }\n\n  return stateNodes.concat(flatten(getChildren(stateNode).map(getAllStateNodes)));\n}\nfunction getConfiguration(prevStateNodes, stateNodes) {\n  var e_1, _a, e_2, _b, e_3, _c, e_4, _d;\n\n  var prevConfiguration = new Set(prevStateNodes);\n  var prevAdjList = getAdjList(prevConfiguration);\n  var configuration = new Set(stateNodes);\n\n  try {\n    // add all ancestors\n    for (var configuration_1 = __values(configuration), configuration_1_1 = configuration_1.next(); !configuration_1_1.done; configuration_1_1 = configuration_1.next()) {\n      var s = configuration_1_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (configuration_1_1 && !configuration_1_1.done && (_a = configuration_1.return)) _a.call(configuration_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  var adjList = getAdjList(configuration);\n\n  try {\n    // add descendants\n    for (var configuration_2 = __values(configuration), configuration_2_1 = configuration_2.next(); !configuration_2_1.done; configuration_2_1 = configuration_2.next()) {\n      var s = configuration_2_1.value; // if previously active, add existing child nodes\n\n      if (s.type === 'compound' && (!adjList.get(s) || !adjList.get(s).length)) {\n        if (prevAdjList.get(s)) {\n          prevAdjList.get(s).forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        } else {\n          s.initialStateNodes.forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        }\n      } else {\n        if (s.type === 'parallel') {\n          try {\n            for (var _e = (e_3 = void 0, __values(getChildren(s))), _f = _e.next(); !_f.done; _f = _e.next()) {\n              var child = _f.value;\n\n              if (!configuration.has(child)) {\n                configuration.add(child);\n\n                if (prevAdjList.get(child)) {\n                  prevAdjList.get(child).forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                } else {\n                  child.initialStateNodes.forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                }\n              }\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_f && !_f.done && (_c = _e.return)) _c.call(_e);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (configuration_2_1 && !configuration_2_1.done && (_b = configuration_2.return)) _b.call(configuration_2);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n\n  try {\n    // add all ancestors\n    for (var configuration_3 = __values(configuration), configuration_3_1 = configuration_3.next(); !configuration_3_1.done; configuration_3_1 = configuration_3.next()) {\n      var s = configuration_3_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (configuration_3_1 && !configuration_3_1.done && (_d = configuration_3.return)) _d.call(configuration_3);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return configuration;\n}\n\nfunction getValueFromAdj(baseNode, adjList) {\n  var childStateNodes = adjList.get(baseNode);\n\n  if (!childStateNodes) {\n    return {}; // todo: fix?\n  }\n\n  if (baseNode.type === 'compound') {\n    var childStateNode = childStateNodes[0];\n\n    if (childStateNode) {\n      if (isLeafNode(childStateNode)) {\n        return childStateNode.key;\n      }\n    } else {\n      return {};\n    }\n  }\n\n  var stateValue = {};\n  childStateNodes.forEach(function (csn) {\n    stateValue[csn.key] = getValueFromAdj(csn, adjList);\n  });\n  return stateValue;\n}\n\nfunction getAdjList(configuration) {\n  var e_5, _a;\n\n  var adjList = new Map();\n\n  try {\n    for (var configuration_4 = __values(configuration), configuration_4_1 = configuration_4.next(); !configuration_4_1.done; configuration_4_1 = configuration_4.next()) {\n      var s = configuration_4_1.value;\n\n      if (!adjList.has(s)) {\n        adjList.set(s, []);\n      }\n\n      if (s.parent) {\n        if (!adjList.has(s.parent)) {\n          adjList.set(s.parent, []);\n        }\n\n        adjList.get(s.parent).push(s);\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (configuration_4_1 && !configuration_4_1.done && (_a = configuration_4.return)) _a.call(configuration_4);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return adjList;\n}\nfunction getValue(rootNode, configuration) {\n  var config = getConfiguration([rootNode], configuration);\n  return getValueFromAdj(rootNode, getAdjList(config));\n}\nfunction has(iterable, item) {\n  if (Array.isArray(iterable)) {\n    return iterable.some(function (member) {\n      return member === item;\n    });\n  }\n\n  if (iterable instanceof Set) {\n    return iterable.has(item);\n  }\n\n  return false; // TODO: fix\n}\nfunction nextEvents(configuration) {\n  return __spreadArray([], __read(new Set(flatten(__spreadArray([], __read(configuration.map(function (sn) {\n    return sn.ownEvents;\n  })), false)))), false);\n}\nfunction isInFinalState(configuration, stateNode) {\n  if (stateNode.type === 'compound') {\n    return getChildren(stateNode).some(function (s) {\n      return s.type === 'final' && has(configuration, s);\n    });\n  }\n\n  if (stateNode.type === 'parallel') {\n    return getChildren(stateNode).every(function (sn) {\n      return isInFinalState(configuration, sn);\n    });\n  }\n\n  return false;\n}\nfunction getMeta(configuration) {\n  if (configuration === void 0) {\n    configuration = [];\n  }\n\n  return configuration.reduce(function (acc, stateNode) {\n    if (stateNode.meta !== undefined) {\n      acc[stateNode.id] = stateNode.meta;\n    }\n\n    return acc;\n  }, {});\n}\nfunction getTagsFromConfiguration(configuration) {\n  return new Set(flatten(configuration.map(function (sn) {\n    return sn.tags;\n  })));\n}\n\nexport { getAdjList, getAllChildren, getAllStateNodes, getChildren, getConfiguration, getMeta, getTagsFromConfiguration, getValue, has, isInFinalState, isLeafNode, nextEvents };\n","import { __assign, __spreadArray, __read, __values } from './_virtual/_tslib.js';\nimport { SpecialTargets, ActionTypes } from './types.js';\nimport { init, raise as raise$1, send as send$1, update, log as log$1, cancel as cancel$1, assign as assign$1, error as error$1, stop as stop$1, pure as pure$1, choose as choose$1 } from './actionTypes.js';\nimport * as actionTypes from './actionTypes.js';\nexport { actionTypes };\nimport { toSCXMLEvent, isString, isFunction, toEventObject, getEventType, updateContext, flatten, isArray, toArray, toGuard, evaluateGuard, warn } from './utils.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar initEvent = /*#__PURE__*/toSCXMLEvent({\n  type: init\n});\nfunction getActionFunction(actionType, actionFunctionMap) {\n  return actionFunctionMap ? actionFunctionMap[actionType] || undefined : undefined;\n}\nfunction toActionObject(action, actionFunctionMap) {\n  var actionObject;\n\n  if (isString(action) || typeof action === 'number') {\n    var exec = getActionFunction(action, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = {\n        type: action,\n        exec: exec\n      };\n    } else if (exec) {\n      actionObject = exec;\n    } else {\n      actionObject = {\n        type: action,\n        exec: undefined\n      };\n    }\n  } else if (isFunction(action)) {\n    actionObject = {\n      // Convert action to string if unnamed\n      type: action.name || action.toString(),\n      exec: action\n    };\n  } else {\n    var exec = getActionFunction(action.type, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = __assign(__assign({}, action), {\n        exec: exec\n      });\n    } else if (exec) {\n      var actionType = exec.type || action.type;\n      actionObject = __assign(__assign(__assign({}, exec), action), {\n        type: actionType\n      });\n    } else {\n      actionObject = action;\n    }\n  }\n\n  return actionObject;\n}\nvar toActionObjects = function (action, actionFunctionMap) {\n  if (!action) {\n    return [];\n  }\n\n  var actions = isArray(action) ? action : [action];\n  return actions.map(function (subAction) {\n    return toActionObject(subAction, actionFunctionMap);\n  });\n};\nfunction toActivityDefinition(action) {\n  var actionObject = toActionObject(action);\n  return __assign(__assign({\n    id: isString(action) ? action : actionObject.id\n  }, actionObject), {\n    type: actionObject.type\n  });\n}\n/**\r\n * Raises an event. This places the event in the internal event queue, so that\r\n * the event is immediately consumed by the machine in the current step.\r\n *\r\n * @param eventType The event to raise.\r\n */\n\nfunction raise(event, options) {\n  return {\n    type: raise$1,\n    event: typeof event === 'function' ? event : toEventObject(event),\n    delay: options ? options.delay : undefined,\n    id: options === null || options === void 0 ? void 0 : options.id\n  };\n}\nfunction resolveRaise(action, ctx, _event, delaysMap) {\n  var meta = {\n    _event: _event\n  };\n  var resolvedEvent = toSCXMLEvent(isFunction(action.event) ? action.event(ctx, _event.data, meta) : action.event);\n  var resolvedDelay;\n\n  if (isString(action.delay)) {\n    var configDelay = delaysMap && delaysMap[action.delay];\n    resolvedDelay = isFunction(configDelay) ? configDelay(ctx, _event.data, meta) : configDelay;\n  } else {\n    resolvedDelay = isFunction(action.delay) ? action.delay(ctx, _event.data, meta) : action.delay;\n  }\n\n  return __assign(__assign({}, action), {\n    type: raise$1,\n    _event: resolvedEvent,\n    delay: resolvedDelay\n  });\n}\n/**\r\n * Sends an event. This returns an action that will be read by an interpreter to\r\n * send the event in the next step, after the current step is finished executing.\r\n *\r\n * @deprecated Use the `sendTo(...)` action creator instead.\r\n *\r\n * @param event The event to send.\r\n * @param options Options to pass into the send event:\r\n *  - `id` - The unique send event identifier (used with `cancel()`).\r\n *  - `delay` - The number of milliseconds to delay the sending of the event.\r\n *  - `to` - The target of this event (by default, the machine the event was sent from).\r\n */\n\nfunction send(event, options) {\n  return {\n    to: options ? options.to : undefined,\n    type: send$1,\n    event: isFunction(event) ? event : toEventObject(event),\n    delay: options ? options.delay : undefined,\n    // TODO: don't auto-generate IDs here like that\n    // there is too big chance of the ID collision\n    id: options && options.id !== undefined ? options.id : isFunction(event) ? event.name : getEventType(event)\n  };\n}\nfunction resolveSend(action, ctx, _event, delaysMap) {\n  var meta = {\n    _event: _event\n  }; // TODO: helper function for resolving Expr\n\n  var resolvedEvent = toSCXMLEvent(isFunction(action.event) ? action.event(ctx, _event.data, meta) : action.event);\n  var resolvedDelay;\n\n  if (isString(action.delay)) {\n    var configDelay = delaysMap && delaysMap[action.delay];\n    resolvedDelay = isFunction(configDelay) ? configDelay(ctx, _event.data, meta) : configDelay;\n  } else {\n    resolvedDelay = isFunction(action.delay) ? action.delay(ctx, _event.data, meta) : action.delay;\n  }\n\n  var resolvedTarget = isFunction(action.to) ? action.to(ctx, _event.data, meta) : action.to;\n  return __assign(__assign({}, action), {\n    to: resolvedTarget,\n    _event: resolvedEvent,\n    event: resolvedEvent.data,\n    delay: resolvedDelay\n  });\n}\n/**\r\n * Sends an event to this machine's parent.\r\n *\r\n * @param event The event to send to the parent machine.\r\n * @param options Options to pass into the send event.\r\n */\n\nfunction sendParent(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\n/**\r\n * Sends an event to an actor.\r\n *\r\n * @param actor The `ActorRef` to send the event to.\r\n * @param event The event to send, or an expression that evaluates to the event to send\r\n * @param options Send action options\r\n * @returns An XState send action object\r\n */\n\nfunction sendTo(actor, event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: actor\n  }));\n}\n/**\r\n * Sends an update event to this machine's parent.\r\n */\n\nfunction sendUpdate() {\n  return sendParent(update);\n}\n/**\r\n * Sends an event back to the sender of the original event.\r\n *\r\n * @param event The event to send back to the sender\r\n * @param options Options to pass into the send event\r\n */\n\nfunction respond(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: function (_, __, _a) {\n      var _event = _a._event;\n      return _event.origin; // TODO: handle when _event.origin is undefined\n    }\n  }));\n}\n\nvar defaultLogExpr = function (context, event) {\n  return {\n    context: context,\n    event: event\n  };\n};\n/**\r\n *\r\n * @param expr The expression function to evaluate which will be logged.\r\n *  Takes in 2 arguments:\r\n *  - `ctx` - the current state context\r\n *  - `event` - the event that caused this action to be executed.\r\n * @param label The label to give to the logged expression.\r\n */\n\n\nfunction log(expr, label) {\n  if (expr === void 0) {\n    expr = defaultLogExpr;\n  }\n\n  return {\n    type: log$1,\n    label: label,\n    expr: expr\n  };\n}\nvar resolveLog = function (action, ctx, _event) {\n  return __assign(__assign({}, action), {\n    value: isString(action.expr) ? action.expr : action.expr(ctx, _event.data, {\n      _event: _event\n    })\n  });\n};\n/**\r\n * Cancels an in-flight `send(...)` action. A canceled sent action will not\r\n * be executed, nor will its event be sent, unless it has already been sent\r\n * (e.g., if `cancel(...)` is called after the `send(...)` action's `delay`).\r\n *\r\n * @param sendId The `id` of the `send(...)` action to cancel.\r\n */\n\nvar cancel = function (sendId) {\n  return {\n    type: cancel$1,\n    sendId: sendId\n  };\n};\n/**\r\n * Starts an activity.\r\n *\r\n * @param activity The activity to start.\r\n */\n\nfunction start(activity) {\n  var activityDef = toActivityDefinition(activity);\n  return {\n    type: ActionTypes.Start,\n    activity: activityDef,\n    exec: undefined\n  };\n}\n/**\r\n * Stops an activity.\r\n *\r\n * @param actorRef The activity to stop.\r\n */\n\nfunction stop(actorRef) {\n  var activity = isFunction(actorRef) ? actorRef : toActivityDefinition(actorRef);\n  return {\n    type: ActionTypes.Stop,\n    activity: activity,\n    exec: undefined\n  };\n}\nfunction resolveStop(action, context, _event) {\n  var actorRefOrString = isFunction(action.activity) ? action.activity(context, _event.data) : action.activity;\n  var resolvedActorRef = typeof actorRefOrString === 'string' ? {\n    id: actorRefOrString\n  } : actorRefOrString;\n  var actionObject = {\n    type: ActionTypes.Stop,\n    activity: resolvedActorRef\n  };\n  return actionObject;\n}\n/**\r\n * Updates the current context of the machine.\r\n *\r\n * @param assignment An object that represents the partial context to update.\r\n */\n\nvar assign = function (assignment) {\n  return {\n    type: assign$1,\n    assignment: assignment\n  };\n};\nfunction isActionObject(action) {\n  return typeof action === 'object' && 'type' in action;\n}\n/**\r\n * Returns an event type that represents an implicit event that\r\n * is sent after the specified `delay`.\r\n *\r\n * @param delayRef The delay in milliseconds\r\n * @param id The state node ID where this event is handled\r\n */\n\nfunction after(delayRef, id) {\n  var idSuffix = id ? \"#\".concat(id) : '';\n  return \"\".concat(ActionTypes.After, \"(\").concat(delayRef, \")\").concat(idSuffix);\n}\n/**\r\n * Returns an event that represents that a final state node\r\n * has been reached in the parent state node.\r\n *\r\n * @param id The final state node's parent state node `id`\r\n * @param data The data to pass into the event\r\n */\n\nfunction done(id, data) {\n  var type = \"\".concat(ActionTypes.DoneState, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\n/**\r\n * Returns an event that represents that an invoked service has terminated.\r\n *\r\n * An invoked service is terminated when it has reached a top-level final state node,\r\n * but not when it is canceled.\r\n *\r\n * @param id The final state node ID\r\n * @param data The data to pass into the event\r\n */\n\nfunction doneInvoke(id, data) {\n  var type = \"\".concat(ActionTypes.DoneInvoke, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\nfunction error(id, data) {\n  var type = \"\".concat(ActionTypes.ErrorPlatform, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\nfunction pure(getActions) {\n  return {\n    type: ActionTypes.Pure,\n    get: getActions\n  };\n}\n/**\r\n * Forwards (sends) an event to a specified service.\r\n *\r\n * @param target The target service to forward the event to.\r\n * @param options Options to pass into the send action creator.\r\n */\n\nfunction forwardTo(target, options) {\n  if (!IS_PRODUCTION && (!target || typeof target === 'function')) {\n    var originalTarget_1 = target;\n\n    target = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var resolvedTarget = typeof originalTarget_1 === 'function' ? originalTarget_1.apply(void 0, __spreadArray([], __read(args), false)) : originalTarget_1;\n\n      if (!resolvedTarget) {\n        throw new Error(\"Attempted to forward event to undefined actor. This risks an infinite loop in the sender.\");\n      }\n\n      return resolvedTarget;\n    };\n  }\n\n  return send(function (_, event) {\n    return event;\n  }, __assign(__assign({}, options), {\n    to: target\n  }));\n}\n/**\r\n * Escalates an error by sending it as an event to this machine's parent.\r\n *\r\n * @param errorData The error data to send, or the expression function that\r\n * takes in the `context`, `event`, and `meta`, and returns the error data to send.\r\n * @param options Options to pass into the send action creator.\r\n */\n\nfunction escalate(errorData, options) {\n  return sendParent(function (context, event, meta) {\n    return {\n      type: error$1,\n      data: isFunction(errorData) ? errorData(context, event, meta) : errorData\n    };\n  }, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\nfunction choose(conds) {\n  return {\n    type: ActionTypes.Choose,\n    conds: conds\n  };\n}\n\nvar pluckAssigns = function (actionBlocks) {\n  var e_1, _a;\n\n  var assignActions = [];\n\n  try {\n    for (var actionBlocks_1 = __values(actionBlocks), actionBlocks_1_1 = actionBlocks_1.next(); !actionBlocks_1_1.done; actionBlocks_1_1 = actionBlocks_1.next()) {\n      var block = actionBlocks_1_1.value;\n      var i = 0;\n\n      while (i < block.actions.length) {\n        if (block.actions[i].type === assign$1) {\n          assignActions.push(block.actions[i]);\n          block.actions.splice(i, 1);\n          continue;\n        }\n\n        i++;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (actionBlocks_1_1 && !actionBlocks_1_1.done && (_a = actionBlocks_1.return)) _a.call(actionBlocks_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return assignActions;\n};\n\nfunction resolveActions(machine, currentState, currentContext, _event, actionBlocks, predictableExec, preserveActionOrder) {\n  if (preserveActionOrder === void 0) {\n    preserveActionOrder = false;\n  }\n\n  var assignActions = preserveActionOrder ? [] : pluckAssigns(actionBlocks);\n  var updatedContext = assignActions.length ? updateContext(currentContext, _event, assignActions, currentState) : currentContext;\n  var preservedContexts = preserveActionOrder ? [currentContext] : undefined;\n  var deferredToBlockEnd = [];\n\n  function handleAction(blockType, actionObject) {\n    var _a;\n\n    switch (actionObject.type) {\n      case raise$1:\n        {\n          var raisedAction = resolveRaise(actionObject, updatedContext, _event, machine.options.delays);\n\n          if (predictableExec && typeof raisedAction.delay === 'number') {\n            predictableExec(raisedAction, updatedContext, _event);\n          }\n\n          return raisedAction;\n        }\n\n      case send$1:\n        var sendAction = resolveSend(actionObject, updatedContext, _event, machine.options.delays); // TODO: fix ActionTypes.Init\n\n        if (!IS_PRODUCTION) {\n          var configuredDelay = actionObject.delay; // warn after resolving as we can create better contextual message here\n\n          warn(!isString(configuredDelay) || typeof sendAction.delay === 'number', // tslint:disable-next-line:max-line-length\n          \"No delay reference for delay expression '\".concat(configuredDelay, \"' was found on machine '\").concat(machine.id, \"'\"));\n        }\n\n        if (predictableExec && sendAction.to !== SpecialTargets.Internal) {\n          if (blockType === 'entry') {\n            deferredToBlockEnd.push(sendAction);\n          } else {\n            predictableExec(sendAction, updatedContext, _event);\n          }\n        }\n\n        return sendAction;\n\n      case log$1:\n        {\n          var resolved = resolveLog(actionObject, updatedContext, _event);\n          predictableExec === null || predictableExec === void 0 ? void 0 : predictableExec(resolved, updatedContext, _event);\n          return resolved;\n        }\n\n      case choose$1:\n        {\n          var chooseAction = actionObject;\n          var matchedActions = (_a = chooseAction.conds.find(function (condition) {\n            var guard = toGuard(condition.cond, machine.options.guards);\n            return !guard || evaluateGuard(machine, guard, updatedContext, _event, !predictableExec ? currentState : undefined);\n          })) === null || _a === void 0 ? void 0 : _a.actions;\n\n          if (!matchedActions) {\n            return [];\n          }\n\n          var _b = __read(resolveActions(machine, currentState, updatedContext, _event, [{\n            type: blockType,\n            actions: toActionObjects(toArray(matchedActions), machine.options.actions)\n          }], predictableExec, preserveActionOrder), 2),\n              resolvedActionsFromChoose = _b[0],\n              resolvedContextFromChoose = _b[1];\n\n          updatedContext = resolvedContextFromChoose;\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          return resolvedActionsFromChoose;\n        }\n\n      case pure$1:\n        {\n          var matchedActions = actionObject.get(updatedContext, _event.data);\n\n          if (!matchedActions) {\n            return [];\n          }\n\n          var _c = __read(resolveActions(machine, currentState, updatedContext, _event, [{\n            type: blockType,\n            actions: toActionObjects(toArray(matchedActions), machine.options.actions)\n          }], predictableExec, preserveActionOrder), 2),\n              resolvedActionsFromPure = _c[0],\n              resolvedContext = _c[1];\n\n          updatedContext = resolvedContext;\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          return resolvedActionsFromPure;\n        }\n\n      case stop$1:\n        {\n          var resolved = resolveStop(actionObject, updatedContext, _event);\n          predictableExec === null || predictableExec === void 0 ? void 0 : predictableExec(resolved, currentContext, _event);\n          return resolved;\n        }\n\n      case assign$1:\n        {\n          updatedContext = updateContext(updatedContext, _event, [actionObject], !predictableExec ? currentState : undefined);\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          break;\n        }\n\n      default:\n        var resolvedActionObject = toActionObject(actionObject, machine.options.actions);\n        var exec_1 = resolvedActionObject.exec;\n\n        if (predictableExec) {\n          predictableExec(resolvedActionObject, updatedContext, _event);\n        } else if (exec_1 && preservedContexts) {\n          var contextIndex_1 = preservedContexts.length - 1;\n\n          var wrapped = __assign(__assign({}, resolvedActionObject), {\n            exec: function (_ctx) {\n              var args = [];\n\n              for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n              }\n\n              exec_1.apply(void 0, __spreadArray([preservedContexts[contextIndex_1]], __read(args), false));\n            }\n          });\n\n          resolvedActionObject = wrapped;\n        }\n\n        return resolvedActionObject;\n    }\n  }\n\n  function processBlock(block) {\n    var e_2, _a;\n\n    var resolvedActions = [];\n\n    try {\n      for (var _b = __values(block.actions), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var action = _c.value;\n        var resolved = handleAction(block.type, action);\n\n        if (resolved) {\n          resolvedActions = resolvedActions.concat(resolved);\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    deferredToBlockEnd.forEach(function (action) {\n      predictableExec(action, updatedContext, _event);\n    });\n    deferredToBlockEnd.length = 0;\n    return resolvedActions;\n  }\n\n  var resolvedActions = flatten(actionBlocks.map(processBlock));\n  return [resolvedActions, updatedContext];\n}\n\nexport { after, assign, cancel, choose, done, doneInvoke, error, escalate, forwardTo, getActionFunction, initEvent, isActionObject, log, pure, raise, resolveActions, resolveLog, resolveRaise, resolveSend, resolveStop, respond, send, sendParent, sendTo, sendUpdate, start, stop, toActionObject, toActionObjects, toActivityDefinition };\n","import { __assign, __spreadArray, __read, __rest } from './_virtual/_tslib.js';\nimport { EMPTY_ACTIVITY_MAP } from './constants.js';\nimport { isString, matchesState, warn } from './utils.js';\nimport { getMeta, nextEvents } from './stateUtils.js';\nimport { initEvent } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nfunction stateValuesEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  if (isString(a) || isString(b)) {\n    return a === b;\n  }\n\n  var aKeys = Object.keys(a);\n  var bKeys = Object.keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(function (key) {\n    return stateValuesEqual(a[key], b[key]);\n  });\n}\nfunction isStateConfig(state) {\n  if (typeof state !== 'object' || state === null) {\n    return false;\n  }\n\n  return 'value' in state && '_event' in state;\n}\n/**\r\n * @deprecated Use `isStateConfig(object)` or `state instanceof State` instead.\r\n */\n\nvar isState = isStateConfig;\nfunction bindActionToState(action, state) {\n  var exec = action.exec;\n\n  var boundAction = __assign(__assign({}, action), {\n    exec: exec !== undefined ? function () {\n      return exec(state.context, state.event, {\n        action: action,\n        state: state,\n        _event: state._event\n      });\n    } : undefined\n  });\n\n  return boundAction;\n}\n\nvar State =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new State instance.\r\n   * @param value The state value\r\n   * @param context The extended state\r\n   * @param historyValue The tree representing historical values of the state nodes\r\n   * @param history The previous state\r\n   * @param actions An array of action objects to execute as side-effects\r\n   * @param activities A mapping of activities and whether they are started (`true`) or stopped (`false`).\r\n   * @param meta\r\n   * @param events Internal event queue. Should be empty with run-to-completion semantics.\r\n   * @param configuration\r\n   */\n  function State(config) {\n    var _this = this;\n\n    var _a;\n\n    this.actions = [];\n    this.activities = EMPTY_ACTIVITY_MAP;\n    this.meta = {};\n    this.events = [];\n    this.value = config.value;\n    this.context = config.context;\n    this._event = config._event;\n    this._sessionid = config._sessionid;\n    this.event = this._event.data;\n    this.historyValue = config.historyValue;\n    this.history = config.history;\n    this.actions = config.actions || [];\n    this.activities = config.activities || EMPTY_ACTIVITY_MAP;\n    this.meta = getMeta(config.configuration);\n    this.events = config.events || [];\n    this.matches = this.matches.bind(this);\n    this.toStrings = this.toStrings.bind(this);\n    this.configuration = config.configuration;\n    this.transitions = config.transitions;\n    this.children = config.children;\n    this.done = !!config.done;\n    this.tags = (_a = Array.isArray(config.tags) ? new Set(config.tags) : config.tags) !== null && _a !== void 0 ? _a : new Set();\n    this.machine = config.machine;\n    Object.defineProperty(this, 'nextEvents', {\n      get: function () {\n        return nextEvents(_this.configuration);\n      }\n    });\n  }\n  /**\r\n   * Creates a new State instance for the given `stateValue` and `context`.\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.from = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (stateValue.context !== context) {\n        return new State({\n          value: stateValue.value,\n          context: context,\n          _event: stateValue._event,\n          _sessionid: null,\n          historyValue: stateValue.historyValue,\n          history: stateValue.history,\n          actions: [],\n          activities: stateValue.activities,\n          meta: {},\n          events: [],\n          configuration: [],\n          transitions: [],\n          children: {}\n        });\n      }\n\n      return stateValue;\n    }\n\n    var _event = initEvent;\n    return new State({\n      value: stateValue,\n      context: context,\n      _event: _event,\n      _sessionid: null,\n      historyValue: undefined,\n      history: undefined,\n      actions: [],\n      activities: undefined,\n      meta: undefined,\n      events: [],\n      configuration: [],\n      transitions: [],\n      children: {}\n    });\n  };\n  /**\r\n   * Creates a new State instance for the given `config`.\r\n   * @param config The state config\r\n   */\n\n\n  State.create = function (config) {\n    return new State(config);\n  };\n  /**\r\n   * Creates a new `State` instance for the given `stateValue` and `context` with no actions (side-effects).\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.inert = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (!stateValue.actions.length) {\n        return stateValue;\n      }\n\n      var _event = initEvent;\n      return new State({\n        value: stateValue.value,\n        context: context,\n        _event: _event,\n        _sessionid: null,\n        historyValue: stateValue.historyValue,\n        history: stateValue.history,\n        activities: stateValue.activities,\n        configuration: stateValue.configuration,\n        transitions: [],\n        children: {}\n      });\n    }\n\n    return State.from(stateValue, context);\n  };\n  /**\r\n   * Returns an array of all the string leaf state node paths.\r\n   * @param stateValue\r\n   * @param delimiter The character(s) that separate each subpath in the string state node path.\r\n   */\n\n\n  State.prototype.toStrings = function (stateValue, delimiter) {\n    var _this = this;\n\n    if (stateValue === void 0) {\n      stateValue = this.value;\n    }\n\n    if (delimiter === void 0) {\n      delimiter = '.';\n    }\n\n    if (isString(stateValue)) {\n      return [stateValue];\n    }\n\n    var valueKeys = Object.keys(stateValue);\n    return valueKeys.concat.apply(valueKeys, __spreadArray([], __read(valueKeys.map(function (key) {\n      return _this.toStrings(stateValue[key], delimiter).map(function (s) {\n        return key + delimiter + s;\n      });\n    })), false));\n  };\n\n  State.prototype.toJSON = function () {\n    var _a = this;\n        _a.configuration;\n        _a.transitions;\n        var tags = _a.tags;\n        _a.machine;\n        var jsonValues = __rest(_a, [\"configuration\", \"transitions\", \"tags\", \"machine\"]);\n\n    return __assign(__assign({}, jsonValues), {\n      tags: Array.from(tags)\n    });\n  };\n\n  State.prototype.matches = function (parentStateValue) {\n    return matchesState(parentStateValue, this.value);\n  };\n  /**\r\n   * Whether the current state configuration has a state node with the specified `tag`.\r\n   * @param tag\r\n   */\n\n\n  State.prototype.hasTag = function (tag) {\n    return this.tags.has(tag);\n  };\n  /**\r\n   * Determines whether sending the `event` will cause a non-forbidden transition\r\n   * to be selected, even if the transitions have no actions nor\r\n   * change the state value.\r\n   *\r\n   * @param event The event to test\r\n   * @returns Whether the event will cause a transition\r\n   */\n\n\n  State.prototype.can = function (event) {\n    var _a;\n\n    if (IS_PRODUCTION) {\n      warn(!!this.machine, \"state.can(...) used outside of a machine-created State object; this will always return false.\");\n    }\n\n    var transitionData = (_a = this.machine) === null || _a === void 0 ? void 0 : _a.getTransitionData(this, event);\n    return !!(transitionData === null || transitionData === void 0 ? void 0 : transitionData.transitions.length) && // Check that at least one transition is not forbidden\n    transitionData.transitions.some(function (t) {\n      return t.target !== undefined || t.actions.length;\n    });\n  };\n\n  return State;\n}();\n\nexport { State, bindActionToState, isState, isStateConfig, stateValuesEqual };\n","/**\r\n * Maintains a stack of the current service in scope.\r\n * This is used to provide the correct service to spawn().\r\n */\nvar serviceStack = [];\nvar provide = function (service, fn) {\n  serviceStack.push(service);\n  var result = fn(service);\n  serviceStack.pop();\n  return result;\n};\nvar consume = function (fn) {\n  return fn(serviceStack[serviceStack.length - 1]);\n};\n\nexport { consume, provide };\n","import { __assign } from './_virtual/_tslib.js';\nimport { symbolObservable, toInvokeSource, mapContext, isMachine } from './utils.js';\nimport { provide } from './serviceScope.js';\n\nfunction createNullActor(id) {\n  var _a;\n\n  return _a = {\n    id: id,\n    send: function () {\n      return void 0;\n    },\n    subscribe: function () {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    },\n    getSnapshot: function () {\n      return undefined;\n    },\n    toJSON: function () {\n      return {\n        id: id\n      };\n    }\n  }, _a[symbolObservable] = function () {\n    return this;\n  }, _a;\n}\n/**\r\n * Creates a deferred actor that is able to be invoked given the provided\r\n * invocation information in its `.meta` value.\r\n *\r\n * @param invokeDefinition The meta information needed to invoke the actor.\r\n */\n\nfunction createInvocableActor(invokeDefinition, machine, context, _event) {\n  var _a;\n\n  var invokeSrc = toInvokeSource(invokeDefinition.src);\n  var serviceCreator = (_a = machine === null || machine === void 0 ? void 0 : machine.options.services) === null || _a === void 0 ? void 0 : _a[invokeSrc.type];\n  var resolvedData = invokeDefinition.data ? mapContext(invokeDefinition.data, context, _event) : undefined;\n  var tempActor = serviceCreator ? createDeferredActor(serviceCreator, invokeDefinition.id, resolvedData) : createNullActor(invokeDefinition.id); // @ts-ignore\n\n  tempActor.meta = invokeDefinition;\n  return tempActor;\n}\nfunction createDeferredActor(entity, id, data) {\n  var tempActor = createNullActor(id); // @ts-ignore\n\n  tempActor.deferred = true;\n\n  if (isMachine(entity)) {\n    // \"mute\" the existing service scope so potential spawned actors within the `.initialState` stay deferred here\n    var initialState_1 = tempActor.state = provide(undefined, function () {\n      return (data ? entity.withContext(data) : entity).initialState;\n    });\n\n    tempActor.getSnapshot = function () {\n      return initialState_1;\n    };\n  }\n\n  return tempActor;\n}\nfunction isActor(item) {\n  try {\n    return typeof item.send === 'function';\n  } catch (e) {\n    return false;\n  }\n}\nfunction isSpawnedActor(item) {\n  return isActor(item) && 'id' in item;\n} // TODO: refactor the return type, this could be written in a better way but it's best to avoid unneccessary breaking changes now\n\nfunction toActorRef(actorRefLike) {\n  var _a;\n\n  return __assign((_a = {\n    subscribe: function () {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    },\n    id: 'anonymous',\n    getSnapshot: function () {\n      return undefined;\n    }\n  }, _a[symbolObservable] = function () {\n    return this;\n  }, _a), actorRefLike);\n}\n\nexport { createDeferredActor, createInvocableActor, createNullActor, isActor, isSpawnedActor, toActorRef };\n","import { __assign, __rest } from './_virtual/_tslib.js';\nimport './types.js';\nimport { invoke } from './actionTypes.js';\nimport './utils.js';\nimport './environment.js';\n\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    var simpleSrc = {\n      type: src\n    };\n\n    simpleSrc.toString = function () {\n      return src;\n    }; // v4 compat - TODO: remove in v5\n\n\n    return simpleSrc;\n  }\n\n  return src;\n}\nfunction toInvokeDefinition(invokeConfig) {\n  return __assign(__assign({\n    type: invoke\n  }, invokeConfig), {\n    toJSON: function () {\n      invokeConfig.onDone;\n          invokeConfig.onError;\n          var invokeDef = __rest(invokeConfig, [\"onDone\", \"onError\"]);\n\n      return __assign(__assign({}, invokeDef), {\n        type: invoke,\n        src: toInvokeSource(invokeConfig.src)\n      });\n    }\n  });\n}\n\nexport { toInvokeDefinition, toInvokeSource };\n","import { __assign, __spreadArray, __read, __values, __rest } from './_virtual/_tslib.js';\nimport { isFunction, mapValues, isArray, flatten, toArray, toStateValue, isString, getEventType, toSCXMLEvent, matchesState, path, evaluateGuard, mapContext, isRaisableAction, pathToStateValue, isBuiltInEvent, partition, updateHistoryValue, toStatePath, mapFilterValues, warn, toStatePaths, nestedPath, normalizeTarget, toGuard, toTransitionConfigArray, isMachine, createInvokeId } from './utils.js';\nimport { State, stateValuesEqual } from './State.js';\nimport { start as start$1, stop as stop$1, invoke, update, nullEvent } from './actionTypes.js';\nimport { done, start, toActionObjects, raise, stop, resolveActions, doneInvoke, error, toActionObject, toActivityDefinition, after, send, cancel, initEvent } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { STATE_DELIMITER } from './constants.js';\nimport { getAllStateNodes, getConfiguration, isInFinalState, getTagsFromConfiguration, has, getChildren, getValue, isLeafNode, getAllChildren } from './stateUtils.js';\nimport { createInvocableActor } from './Actor.js';\nimport { toInvokeDefinition } from './invokeUtils.js';\n\nvar NULL_EVENT = '';\nvar STATE_IDENTIFIER = '#';\nvar WILDCARD = '*';\nvar EMPTY_OBJECT = {};\n\nvar isStateId = function (str) {\n  return str[0] === STATE_IDENTIFIER;\n};\n\nvar createDefaultOptions = function () {\n  return {\n    actions: {},\n    guards: {},\n    services: {},\n    activities: {},\n    delays: {}\n  };\n};\n\nvar validateArrayifiedTransitions = function (stateNode, event, transitions) {\n  var hasNonLastUnguardedTarget = transitions.slice(0, -1).some(function (transition) {\n    return !('cond' in transition) && !('in' in transition) && (isString(transition.target) || isMachine(transition.target));\n  });\n  var eventText = event === NULL_EVENT ? 'the transient event' : \"event '\".concat(event, \"'\");\n  warn(!hasNonLastUnguardedTarget, \"One or more transitions for \".concat(eventText, \" on state '\").concat(stateNode.id, \"' are unreachable. \") + \"Make sure that the default transition is the last one defined.\");\n};\n\nvar StateNode =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function StateNode(\n  /**\r\n   * The raw config used to create the machine.\r\n   */\n  config, options,\n  /**\r\n   * The initial extended state\r\n   */\n  _context, // TODO: this is unsafe, but we're removing it in v5 anyway\n  _stateInfo) {\n    if (_context === void 0) {\n      _context = 'context' in config ? config.context : undefined;\n    }\n\n    var _this = this;\n\n    var _a;\n\n    this.config = config;\n    this._context = _context;\n    /**\r\n     * The order this state node appears. Corresponds to the implicit SCXML document order.\r\n     */\n\n    this.order = -1;\n    this.__xstatenode = true;\n    this.__cache = {\n      events: undefined,\n      relativeValue: new Map(),\n      initialStateValue: undefined,\n      initialState: undefined,\n      on: undefined,\n      transitions: undefined,\n      candidates: {},\n      delayedTransitions: undefined\n    };\n    this.idMap = {};\n    this.tags = [];\n    this.options = Object.assign(createDefaultOptions(), options);\n    this.parent = _stateInfo === null || _stateInfo === void 0 ? void 0 : _stateInfo.parent;\n    this.key = this.config.key || (_stateInfo === null || _stateInfo === void 0 ? void 0 : _stateInfo.key) || this.config.id || '(machine)';\n    this.machine = this.parent ? this.parent.machine : this;\n    this.path = this.parent ? this.parent.path.concat(this.key) : [];\n    this.delimiter = this.config.delimiter || (this.parent ? this.parent.delimiter : STATE_DELIMITER);\n    this.id = this.config.id || __spreadArray([this.machine.key], __read(this.path), false).join(this.delimiter);\n    this.version = this.parent ? this.parent.version : this.config.version;\n    this.type = this.config.type || (this.config.parallel ? 'parallel' : this.config.states && Object.keys(this.config.states).length ? 'compound' : this.config.history ? 'history' : 'atomic');\n    this.schema = this.parent ? this.machine.schema : (_a = this.config.schema) !== null && _a !== void 0 ? _a : {};\n    this.description = this.config.description;\n\n    if (!IS_PRODUCTION) {\n      warn(!('parallel' in this.config), \"The \\\"parallel\\\" property is deprecated and will be removed in version 4.1. \".concat(this.config.parallel ? \"Replace with `type: 'parallel'`\" : \"Use `type: '\".concat(this.type, \"'`\"), \" in the config for state node '\").concat(this.id, \"' instead.\"));\n    }\n\n    this.initial = this.config.initial;\n    this.states = this.config.states ? mapValues(this.config.states, function (stateConfig, key) {\n      var _a;\n\n      var stateNode = new StateNode(stateConfig, {}, undefined, {\n        parent: _this,\n        key: key\n      });\n      Object.assign(_this.idMap, __assign((_a = {}, _a[stateNode.id] = stateNode, _a), stateNode.idMap));\n      return stateNode;\n    }) : EMPTY_OBJECT; // Document order\n\n    var order = 0;\n\n    function dfs(stateNode) {\n      var e_1, _a;\n\n      stateNode.order = order++;\n\n      try {\n        for (var _b = __values(getAllChildren(stateNode)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var child = _c.value;\n          dfs(child);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n\n    dfs(this); // History config\n\n    this.history = this.config.history === true ? 'shallow' : this.config.history || false;\n    this._transient = !!this.config.always || (!this.config.on ? false : Array.isArray(this.config.on) ? this.config.on.some(function (_a) {\n      var event = _a.event;\n      return event === NULL_EVENT;\n    }) : NULL_EVENT in this.config.on);\n    this.strict = !!this.config.strict; // TODO: deprecate (entry)\n\n    this.onEntry = toArray(this.config.entry || this.config.onEntry).map(function (action) {\n      return toActionObject(action);\n    }); // TODO: deprecate (exit)\n\n    this.onExit = toArray(this.config.exit || this.config.onExit).map(function (action) {\n      return toActionObject(action);\n    });\n    this.meta = this.config.meta;\n    this.doneData = this.type === 'final' ? this.config.data : undefined;\n    this.invoke = toArray(this.config.invoke).map(function (invokeConfig, i) {\n      var _a, _b;\n\n      if (isMachine(invokeConfig)) {\n        var invokeId = createInvokeId(_this.id, i);\n        _this.machine.options.services = __assign((_a = {}, _a[invokeId] = invokeConfig, _a), _this.machine.options.services);\n        return toInvokeDefinition({\n          src: invokeId,\n          id: invokeId\n        });\n      } else if (isString(invokeConfig.src)) {\n        var invokeId = invokeConfig.id || createInvokeId(_this.id, i);\n        return toInvokeDefinition(__assign(__assign({}, invokeConfig), {\n          id: invokeId,\n          src: invokeConfig.src\n        }));\n      } else if (isMachine(invokeConfig.src) || isFunction(invokeConfig.src)) {\n        var invokeId = invokeConfig.id || createInvokeId(_this.id, i);\n        _this.machine.options.services = __assign((_b = {}, _b[invokeId] = invokeConfig.src, _b), _this.machine.options.services);\n        return toInvokeDefinition(__assign(__assign({\n          id: invokeId\n        }, invokeConfig), {\n          src: invokeId\n        }));\n      } else {\n        var invokeSource = invokeConfig.src;\n        return toInvokeDefinition(__assign(__assign({\n          id: createInvokeId(_this.id, i)\n        }, invokeConfig), {\n          src: invokeSource\n        }));\n      }\n    });\n    this.activities = toArray(this.config.activities).concat(this.invoke).map(function (activity) {\n      return toActivityDefinition(activity);\n    });\n    this.transition = this.transition.bind(this);\n    this.tags = toArray(this.config.tags); // TODO: this is the real fix for initialization once\n    // state node getters are deprecated\n    // if (!this.parent) {\n    //   this._init();\n    // }\n  }\n\n  StateNode.prototype._init = function () {\n    if (this.__cache.transitions) {\n      return;\n    }\n\n    getAllStateNodes(this).forEach(function (stateNode) {\n      return stateNode.on;\n    });\n  };\n  /**\r\n   * Clones this state machine with custom options and context.\r\n   *\r\n   * @param options Options (actions, guards, activities, services) to recursively merge with the existing options.\r\n   * @param context Custom context (will override predefined context)\r\n   */\n\n\n  StateNode.prototype.withConfig = function (options, context) {\n    var _a = this.options,\n        actions = _a.actions,\n        activities = _a.activities,\n        guards = _a.guards,\n        services = _a.services,\n        delays = _a.delays;\n    return new StateNode(this.config, {\n      actions: __assign(__assign({}, actions), options.actions),\n      activities: __assign(__assign({}, activities), options.activities),\n      guards: __assign(__assign({}, guards), options.guards),\n      services: __assign(__assign({}, services), options.services),\n      delays: __assign(__assign({}, delays), options.delays)\n    }, context !== null && context !== void 0 ? context : this.context);\n  };\n  /**\r\n   * Clones this state machine with custom context.\r\n   *\r\n   * @param context Custom context (will override predefined context, not recursive)\r\n   */\n\n\n  StateNode.prototype.withContext = function (context) {\n    return new StateNode(this.config, this.options, context);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"context\", {\n    get: function () {\n      return isFunction(this._context) ? this._context() : this._context;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"definition\", {\n    /**\r\n     * The well-structured state node definition.\r\n     */\n    get: function () {\n      return {\n        id: this.id,\n        key: this.key,\n        version: this.version,\n        context: this.context,\n        type: this.type,\n        initial: this.initial,\n        history: this.history,\n        states: mapValues(this.states, function (state) {\n          return state.definition;\n        }),\n        on: this.on,\n        transitions: this.transitions,\n        entry: this.onEntry,\n        exit: this.onExit,\n        activities: this.activities || [],\n        meta: this.meta,\n        order: this.order || -1,\n        data: this.doneData,\n        invoke: this.invoke,\n        description: this.description,\n        tags: this.tags\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.toJSON = function () {\n    return this.definition;\n  };\n\n  Object.defineProperty(StateNode.prototype, \"on\", {\n    /**\r\n     * The mapping of events to transitions.\r\n     */\n    get: function () {\n      if (this.__cache.on) {\n        return this.__cache.on;\n      }\n\n      var transitions = this.transitions;\n      return this.__cache.on = transitions.reduce(function (map, transition) {\n        map[transition.eventType] = map[transition.eventType] || [];\n        map[transition.eventType].push(transition);\n        return map;\n      }, {});\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"after\", {\n    get: function () {\n      return this.__cache.delayedTransitions || (this.__cache.delayedTransitions = this.getDelayedTransitions(), this.__cache.delayedTransitions);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"transitions\", {\n    /**\r\n     * All the transitions that can be taken from this state node.\r\n     */\n    get: function () {\n      return this.__cache.transitions || (this.__cache.transitions = this.formatTransitions(), this.__cache.transitions);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.getCandidates = function (eventName) {\n    if (this.__cache.candidates[eventName]) {\n      return this.__cache.candidates[eventName];\n    }\n\n    var transient = eventName === NULL_EVENT;\n    var candidates = this.transitions.filter(function (transition) {\n      var sameEventType = transition.eventType === eventName; // null events should only match against eventless transitions\n\n      return transient ? sameEventType : sameEventType || transition.eventType === WILDCARD;\n    });\n    this.__cache.candidates[eventName] = candidates;\n    return candidates;\n  };\n  /**\r\n   * All delayed transitions from the config.\r\n   */\n\n\n  StateNode.prototype.getDelayedTransitions = function () {\n    var _this = this;\n\n    var afterConfig = this.config.after;\n\n    if (!afterConfig) {\n      return [];\n    }\n\n    var mutateEntryExit = function (delay, i) {\n      var delayRef = isFunction(delay) ? \"\".concat(_this.id, \":delay[\").concat(i, \"]\") : delay;\n      var eventType = after(delayRef, _this.id);\n\n      _this.onEntry.push(send(eventType, {\n        delay: delay\n      }));\n\n      _this.onExit.push(cancel(eventType));\n\n      return eventType;\n    };\n\n    var delayedTransitions = isArray(afterConfig) ? afterConfig.map(function (transition, i) {\n      var eventType = mutateEntryExit(transition.delay, i);\n      return __assign(__assign({}, transition), {\n        event: eventType\n      });\n    }) : flatten(Object.keys(afterConfig).map(function (delay, i) {\n      var configTransition = afterConfig[delay];\n      var resolvedTransition = isString(configTransition) ? {\n        target: configTransition\n      } : configTransition;\n      var resolvedDelay = !isNaN(+delay) ? +delay : delay;\n      var eventType = mutateEntryExit(resolvedDelay, i);\n      return toArray(resolvedTransition).map(function (transition) {\n        return __assign(__assign({}, transition), {\n          event: eventType,\n          delay: resolvedDelay\n        });\n      });\n    }));\n    return delayedTransitions.map(function (delayedTransition) {\n      var delay = delayedTransition.delay;\n      return __assign(__assign({}, _this.formatTransition(delayedTransition)), {\n        delay: delay\n      });\n    });\n  };\n  /**\r\n   * Returns the state nodes represented by the current state value.\r\n   *\r\n   * @param state The state value or State instance\r\n   */\n\n\n  StateNode.prototype.getStateNodes = function (state) {\n    var _a;\n\n    var _this = this;\n\n    if (!state) {\n      return [];\n    }\n\n    var stateValue = state instanceof State ? state.value : toStateValue(state, this.delimiter);\n\n    if (isString(stateValue)) {\n      var initialStateValue = this.getStateNode(stateValue).initial;\n      return initialStateValue !== undefined ? this.getStateNodes((_a = {}, _a[stateValue] = initialStateValue, _a)) : [this, this.states[stateValue]];\n    }\n\n    var subStateKeys = Object.keys(stateValue);\n    var subStateNodes = [this];\n    subStateNodes.push.apply(subStateNodes, __spreadArray([], __read(flatten(subStateKeys.map(function (subStateKey) {\n      return _this.getStateNode(subStateKey).getStateNodes(stateValue[subStateKey]);\n    }))), false));\n    return subStateNodes;\n  };\n  /**\r\n   * Returns `true` if this state node explicitly handles the given event.\r\n   *\r\n   * @param event The event in question\r\n   */\n\n\n  StateNode.prototype.handles = function (event) {\n    var eventType = getEventType(event);\n    return this.events.includes(eventType);\n  };\n  /**\r\n   * Resolves the given `state` to a new `State` instance relative to this machine.\r\n   *\r\n   * This ensures that `.events` and `.nextEvents` represent the correct values.\r\n   *\r\n   * @param state The state to resolve\r\n   */\n\n\n  StateNode.prototype.resolveState = function (state) {\n    var stateFromConfig = state instanceof State ? state : State.create(state);\n    var configuration = Array.from(getConfiguration([], this.getStateNodes(stateFromConfig.value)));\n    return new State(__assign(__assign({}, stateFromConfig), {\n      value: this.resolve(stateFromConfig.value),\n      configuration: configuration,\n      done: isInFinalState(configuration, this),\n      tags: getTagsFromConfiguration(configuration),\n      machine: this.machine\n    }));\n  };\n\n  StateNode.prototype.transitionLeafNode = function (stateValue, state, _event) {\n    var stateNode = this.getStateNode(stateValue);\n    var next = stateNode.next(state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionCompoundNode = function (stateValue, state, _event) {\n    var subStateKeys = Object.keys(stateValue);\n    var stateNode = this.getStateNode(subStateKeys[0]);\n\n    var next = stateNode._transition(stateValue[subStateKeys[0]], state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionParallelNode = function (stateValue, state, _event) {\n    var e_2, _a;\n\n    var transitionMap = {};\n\n    try {\n      for (var _b = __values(Object.keys(stateValue)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var subStateKey = _c.value;\n        var subStateValue = stateValue[subStateKey];\n\n        if (!subStateValue) {\n          continue;\n        }\n\n        var subStateNode = this.getStateNode(subStateKey);\n\n        var next = subStateNode._transition(subStateValue, state, _event);\n\n        if (next) {\n          transitionMap[subStateKey] = next;\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    var stateTransitions = Object.keys(transitionMap).map(function (key) {\n      return transitionMap[key];\n    });\n    var enabledTransitions = flatten(stateTransitions.map(function (st) {\n      return st.transitions;\n    }));\n    var willTransition = stateTransitions.some(function (st) {\n      return st.transitions.length > 0;\n    });\n\n    if (!willTransition) {\n      return this.next(state, _event);\n    }\n\n    var configuration = flatten(Object.keys(transitionMap).map(function (key) {\n      return transitionMap[key].configuration;\n    }));\n    return {\n      transitions: enabledTransitions,\n      exitSet: flatten(stateTransitions.map(function (t) {\n        return t.exitSet;\n      })),\n      configuration: configuration,\n      source: state,\n      actions: flatten(Object.keys(transitionMap).map(function (key) {\n        return transitionMap[key].actions;\n      }))\n    };\n  };\n\n  StateNode.prototype._transition = function (stateValue, state, _event) {\n    // leaf node\n    if (isString(stateValue)) {\n      return this.transitionLeafNode(stateValue, state, _event);\n    } // hierarchical node\n\n\n    if (Object.keys(stateValue).length === 1) {\n      return this.transitionCompoundNode(stateValue, state, _event);\n    } // orthogonal node\n\n\n    return this.transitionParallelNode(stateValue, state, _event);\n  };\n\n  StateNode.prototype.getTransitionData = function (state, event) {\n    return this._transition(state.value, state, toSCXMLEvent(event));\n  };\n\n  StateNode.prototype.next = function (state, _event) {\n    var e_3, _a;\n\n    var _this = this;\n\n    var eventName = _event.name;\n    var actions = [];\n    var nextStateNodes = [];\n    var selectedTransition;\n\n    try {\n      for (var _b = __values(this.getCandidates(eventName)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var candidate = _c.value;\n        var cond = candidate.cond,\n            stateIn = candidate.in;\n        var resolvedContext = state.context;\n        var isInState = stateIn ? isString(stateIn) && isStateId(stateIn) ? // Check if in state by ID\n        state.matches(toStateValue(this.getStateNodeById(stateIn).path, this.delimiter)) : // Check if in state by relative grandparent\n        matchesState(toStateValue(stateIn, this.delimiter), path(this.path.slice(0, -2))(state.value)) : true;\n        var guardPassed = false;\n\n        try {\n          guardPassed = !cond || evaluateGuard(this.machine, cond, resolvedContext, _event, state);\n        } catch (err) {\n          throw new Error(\"Unable to evaluate guard '\".concat(cond.name || cond.type, \"' in transition for event '\").concat(eventName, \"' in state node '\").concat(this.id, \"':\\n\").concat(err.message));\n        }\n\n        if (guardPassed && isInState) {\n          if (candidate.target !== undefined) {\n            nextStateNodes = candidate.target;\n          }\n\n          actions.push.apply(actions, __spreadArray([], __read(candidate.actions), false));\n          selectedTransition = candidate;\n          break;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    if (!selectedTransition) {\n      return undefined;\n    }\n\n    if (!nextStateNodes.length) {\n      return {\n        transitions: [selectedTransition],\n        exitSet: [],\n        configuration: state.value ? [this] : [],\n        source: state,\n        actions: actions\n      };\n    }\n\n    var allNextStateNodes = flatten(nextStateNodes.map(function (stateNode) {\n      return _this.getRelativeStateNodes(stateNode, state.historyValue);\n    }));\n    var isInternal = !!selectedTransition.internal;\n    return {\n      transitions: [selectedTransition],\n      exitSet: isInternal ? [] : flatten(nextStateNodes.map(function (targetNode) {\n        return _this.getPotentiallyReenteringNodes(targetNode);\n      })),\n      configuration: allNextStateNodes,\n      source: state,\n      actions: actions\n    };\n  }; // even though the name of this function mentions reentry nodes\n  // we are pushing its result into `exitSet`\n  // that's because what we exit might be reentered (it's an invariant of reentrancy)\n\n\n  StateNode.prototype.getPotentiallyReenteringNodes = function (targetNode) {\n    if (this.order < targetNode.order) {\n      return [this];\n    }\n\n    var nodes = [];\n    var marker = this;\n    var possibleAncestor = targetNode;\n\n    while (marker && marker !== possibleAncestor) {\n      nodes.push(marker);\n      marker = marker.parent;\n    }\n\n    if (marker !== possibleAncestor) {\n      // we never got to `possibleAncestor`, therefore the initial `marker` \"escapes\" it\n      // it's in a different part of the tree so no states will be reentered for such an external transition\n      return [];\n    }\n\n    nodes.push(possibleAncestor);\n    return nodes;\n  };\n\n  StateNode.prototype.getActions = function (resolvedConfig, isDone, transition, currentContext, _event, prevState, predictableExec) {\n    var e_4, _a, e_5, _b;\n\n    var _this = this;\n\n    var prevConfig = prevState ? getConfiguration([], this.getStateNodes(prevState.value)) : [];\n    var entrySet = new Set();\n\n    try {\n      for (var _c = __values(Array.from(resolvedConfig).sort(function (a, b) {\n        return a.order - b.order;\n      })), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var sn = _d.value;\n\n        if (!has(prevConfig, sn) || has(transition.exitSet, sn) || sn.parent && entrySet.has(sn.parent)) {\n          entrySet.add(sn);\n        }\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    try {\n      for (var prevConfig_1 = __values(prevConfig), prevConfig_1_1 = prevConfig_1.next(); !prevConfig_1_1.done; prevConfig_1_1 = prevConfig_1.next()) {\n        var sn = prevConfig_1_1.value;\n\n        if (!has(resolvedConfig, sn) || has(transition.exitSet, sn.parent)) {\n          transition.exitSet.push(sn);\n        }\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (prevConfig_1_1 && !prevConfig_1_1.done && (_b = prevConfig_1.return)) _b.call(prevConfig_1);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n\n    transition.exitSet.sort(function (a, b) {\n      return b.order - a.order;\n    });\n    var entryStates = Array.from(entrySet).sort(function (a, b) {\n      return a.order - b.order;\n    });\n    var exitStates = new Set(transition.exitSet);\n    var doneEvents = flatten(entryStates.map(function (sn) {\n      var events = [];\n\n      if (sn.type !== 'final') {\n        return events;\n      }\n\n      var parent = sn.parent;\n\n      if (!parent.parent) {\n        return events;\n      }\n\n      events.push(done(sn.id, sn.doneData), // TODO: deprecate - final states should not emit done events for their own state.\n      done(parent.id, sn.doneData ? mapContext(sn.doneData, currentContext, _event) : undefined));\n      var grandparent = parent.parent;\n\n      if (grandparent.type === 'parallel') {\n        if (getChildren(grandparent).every(function (parentNode) {\n          return isInFinalState(transition.configuration, parentNode);\n        })) {\n          events.push(done(grandparent.id));\n        }\n      }\n\n      return events;\n    }));\n    var entryActions = entryStates.map(function (stateNode) {\n      var entryActions = stateNode.onEntry;\n      var invokeActions = stateNode.activities.map(function (activity) {\n        return start(activity);\n      });\n      return {\n        type: 'entry',\n        actions: toActionObjects(predictableExec ? __spreadArray(__spreadArray([], __read(entryActions), false), __read(invokeActions), false) : __spreadArray(__spreadArray([], __read(invokeActions), false), __read(entryActions), false), _this.machine.options.actions)\n      };\n    }).concat({\n      type: 'state_done',\n      actions: doneEvents.map(function (event) {\n        return raise(event);\n      })\n    });\n    var exitActions = Array.from(exitStates).map(function (stateNode) {\n      return {\n        type: 'exit',\n        actions: toActionObjects(__spreadArray(__spreadArray([], __read(stateNode.onExit), false), __read(stateNode.activities.map(function (activity) {\n          return stop(activity);\n        })), false), _this.machine.options.actions)\n      };\n    });\n    var actions = exitActions.concat({\n      type: 'transition',\n      actions: toActionObjects(transition.actions, this.machine.options.actions)\n    }).concat(entryActions);\n\n    if (isDone) {\n      var stopActions = toActionObjects(flatten(__spreadArray([], __read(resolvedConfig), false).sort(function (a, b) {\n        return b.order - a.order;\n      }).map(function (stateNode) {\n        return stateNode.onExit;\n      })), this.machine.options.actions).filter(function (action) {\n        return !isRaisableAction(action);\n      });\n      return actions.concat({\n        type: 'stop',\n        actions: stopActions\n      });\n    }\n\n    return actions;\n  };\n  /**\r\n   * Determines the next state given the current `state` and sent `event`.\r\n   *\r\n   * @param state The current State instance or state value\r\n   * @param event The event that was sent at the current state\r\n   * @param context The current context (extended state) of the current state\r\n   */\n\n\n  StateNode.prototype.transition = function (state, event, context, exec) {\n    if (state === void 0) {\n      state = this.initialState;\n    }\n\n    var _event = toSCXMLEvent(event);\n\n    var currentState;\n\n    if (state instanceof State) {\n      currentState = context === undefined ? state : this.resolveState(State.from(state, context));\n    } else {\n      var resolvedStateValue = isString(state) ? this.resolve(pathToStateValue(this.getResolvedPath(state))) : this.resolve(state);\n      var resolvedContext = context !== null && context !== void 0 ? context : this.machine.context;\n      currentState = this.resolveState(State.from(resolvedStateValue, resolvedContext));\n    }\n\n    if (!IS_PRODUCTION && _event.name === WILDCARD) {\n      throw new Error(\"An event cannot have the wildcard type ('\".concat(WILDCARD, \"')\"));\n    }\n\n    if (this.strict) {\n      if (!this.events.includes(_event.name) && !isBuiltInEvent(_event.name)) {\n        throw new Error(\"Machine '\".concat(this.id, \"' does not accept event '\").concat(_event.name, \"'\"));\n      }\n    }\n\n    var stateTransition = this._transition(currentState.value, currentState, _event) || {\n      transitions: [],\n      configuration: [],\n      exitSet: [],\n      source: currentState,\n      actions: []\n    };\n    var prevConfig = getConfiguration([], this.getStateNodes(currentState.value));\n    var resolvedConfig = stateTransition.configuration.length ? getConfiguration(prevConfig, stateTransition.configuration) : prevConfig;\n    stateTransition.configuration = __spreadArray([], __read(resolvedConfig), false);\n    return this.resolveTransition(stateTransition, currentState, currentState.context, exec, _event);\n  };\n\n  StateNode.prototype.resolveRaisedTransition = function (state, _event, originalEvent, predictableExec) {\n    var _a;\n\n    var currentActions = state.actions;\n    state = this.transition(state, _event, undefined, predictableExec); // Save original event to state\n    // TODO: this should be the raised event! Delete in V5 (breaking)\n\n    state._event = originalEvent;\n    state.event = originalEvent.data;\n\n    (_a = state.actions).unshift.apply(_a, __spreadArray([], __read(currentActions), false));\n\n    return state;\n  };\n\n  StateNode.prototype.resolveTransition = function (stateTransition, currentState, context, predictableExec, _event) {\n    var e_6, _a, e_7, _b;\n\n    var _this = this;\n\n    if (_event === void 0) {\n      _event = initEvent;\n    }\n\n    var configuration = stateTransition.configuration; // Transition will \"apply\" if:\n    // - this is the initial state (there is no current state)\n    // - OR there are transitions\n\n    var willTransition = !currentState || stateTransition.transitions.length > 0;\n    var resolvedConfiguration = willTransition ? stateTransition.configuration : currentState ? currentState.configuration : [];\n    var isDone = isInFinalState(resolvedConfiguration, this);\n    var resolvedStateValue = willTransition ? getValue(this.machine, configuration) : undefined;\n    var historyValue = currentState ? currentState.historyValue ? currentState.historyValue : stateTransition.source ? this.machine.historyValue(currentState.value) : undefined : undefined;\n    var actionBlocks = this.getActions(new Set(resolvedConfiguration), isDone, stateTransition, context, _event, currentState, predictableExec);\n    var activities = currentState ? __assign({}, currentState.activities) : {};\n\n    try {\n      for (var actionBlocks_1 = __values(actionBlocks), actionBlocks_1_1 = actionBlocks_1.next(); !actionBlocks_1_1.done; actionBlocks_1_1 = actionBlocks_1.next()) {\n        var block = actionBlocks_1_1.value;\n\n        try {\n          for (var _c = (e_7 = void 0, __values(block.actions)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var action = _d.value;\n\n            if (action.type === start$1) {\n              activities[action.activity.id || action.activity.type] = action;\n            } else if (action.type === stop$1) {\n              activities[action.activity.id || action.activity.type] = false;\n            }\n          }\n        } catch (e_7_1) {\n          e_7 = {\n            error: e_7_1\n          };\n        } finally {\n          try {\n            if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n          } finally {\n            if (e_7) throw e_7.error;\n          }\n        }\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (actionBlocks_1_1 && !actionBlocks_1_1.done && (_a = actionBlocks_1.return)) _a.call(actionBlocks_1);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    var _e = __read(resolveActions(this, currentState, context, _event, actionBlocks, predictableExec, this.machine.config.predictableActionArguments || this.machine.config.preserveActionOrder), 2),\n        resolvedActions = _e[0],\n        updatedContext = _e[1];\n\n    var _f = __read(partition(resolvedActions, isRaisableAction), 2),\n        raisedEvents = _f[0],\n        nonRaisedActions = _f[1];\n\n    var invokeActions = resolvedActions.filter(function (action) {\n      var _a;\n\n      return action.type === start$1 && ((_a = action.activity) === null || _a === void 0 ? void 0 : _a.type) === invoke;\n    });\n    var children = invokeActions.reduce(function (acc, action) {\n      acc[action.activity.id] = createInvocableActor(action.activity, _this.machine, updatedContext, _event);\n      return acc;\n    }, currentState ? __assign({}, currentState.children) : {});\n    var nextState = new State({\n      value: resolvedStateValue || currentState.value,\n      context: updatedContext,\n      _event: _event,\n      // Persist _sessionid between states\n      _sessionid: currentState ? currentState._sessionid : null,\n      historyValue: resolvedStateValue ? historyValue ? updateHistoryValue(historyValue, resolvedStateValue) : undefined : currentState ? currentState.historyValue : undefined,\n      history: !resolvedStateValue || stateTransition.source ? currentState : undefined,\n      actions: resolvedStateValue ? nonRaisedActions : [],\n      activities: resolvedStateValue ? activities : currentState ? currentState.activities : {},\n      events: [],\n      configuration: resolvedConfiguration,\n      transitions: stateTransition.transitions,\n      children: children,\n      done: isDone,\n      tags: getTagsFromConfiguration(resolvedConfiguration),\n      machine: this\n    });\n    var didUpdateContext = context !== updatedContext;\n    nextState.changed = _event.name === update || didUpdateContext; // Dispose of penultimate histories to prevent memory leaks\n\n    var history = nextState.history;\n\n    if (history) {\n      delete history.history;\n    } // There are transient transitions if the machine is not in a final state\n    // and if some of the state nodes have transient (\"always\") transitions.\n\n\n    var hasAlwaysTransitions = !isDone && (this._transient || configuration.some(function (stateNode) {\n      return stateNode._transient;\n    })); // If there are no enabled transitions, check if there are transient transitions.\n    // If there are transient transitions, continue checking for more transitions\n    // because an transient transition should be triggered even if there are no\n    // enabled transitions.\n    //\n    // If we're already working on an transient transition then stop to prevent an infinite loop.\n    //\n    // Otherwise, if there are no enabled nor transient transitions, we are done.\n\n    if (!willTransition && (!hasAlwaysTransitions || _event.name === NULL_EVENT)) {\n      return nextState;\n    }\n\n    var maybeNextState = nextState;\n\n    if (!isDone) {\n      if (hasAlwaysTransitions) {\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, {\n          type: nullEvent\n        }, _event, predictableExec);\n      }\n\n      while (raisedEvents.length) {\n        var raisedEvent = raisedEvents.shift();\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, raisedEvent._event, _event, predictableExec);\n      }\n    } // Detect if state changed\n\n\n    var changed = maybeNextState.changed || (history ? !!maybeNextState.actions.length || didUpdateContext || typeof history.value !== typeof maybeNextState.value || !stateValuesEqual(maybeNextState.value, history.value) : undefined);\n    maybeNextState.changed = changed; // Preserve original history after raised events\n\n    maybeNextState.history = history;\n    return maybeNextState;\n  };\n  /**\r\n   * Returns the child state node from its relative `stateKey`, or throws.\r\n   */\n\n\n  StateNode.prototype.getStateNode = function (stateKey) {\n    if (isStateId(stateKey)) {\n      return this.machine.getStateNodeById(stateKey);\n    }\n\n    if (!this.states) {\n      throw new Error(\"Unable to retrieve child state '\".concat(stateKey, \"' from '\").concat(this.id, \"'; no child states exist.\"));\n    }\n\n    var result = this.states[stateKey];\n\n    if (!result) {\n      throw new Error(\"Child state '\".concat(stateKey, \"' does not exist on '\").concat(this.id, \"'\"));\n    }\n\n    return result;\n  };\n  /**\r\n   * Returns the state node with the given `stateId`, or throws.\r\n   *\r\n   * @param stateId The state ID. The prefix \"#\" is removed.\r\n   */\n\n\n  StateNode.prototype.getStateNodeById = function (stateId) {\n    var resolvedStateId = isStateId(stateId) ? stateId.slice(STATE_IDENTIFIER.length) : stateId;\n\n    if (resolvedStateId === this.id) {\n      return this;\n    }\n\n    var stateNode = this.machine.idMap[resolvedStateId];\n\n    if (!stateNode) {\n      throw new Error(\"Child state node '#\".concat(resolvedStateId, \"' does not exist on machine '\").concat(this.id, \"'\"));\n    }\n\n    return stateNode;\n  };\n  /**\r\n   * Returns the relative state node from the given `statePath`, or throws.\r\n   *\r\n   * @param statePath The string or string array relative path to the state node.\r\n   */\n\n\n  StateNode.prototype.getStateNodeByPath = function (statePath) {\n    if (typeof statePath === 'string' && isStateId(statePath)) {\n      try {\n        return this.getStateNodeById(statePath.slice(1));\n      } catch (e) {// try individual paths\n        // throw e;\n      }\n    }\n\n    var arrayStatePath = toStatePath(statePath, this.delimiter).slice();\n    var currentStateNode = this;\n\n    while (arrayStatePath.length) {\n      var key = arrayStatePath.shift();\n\n      if (!key.length) {\n        break;\n      }\n\n      currentStateNode = currentStateNode.getStateNode(key);\n    }\n\n    return currentStateNode;\n  };\n  /**\r\n   * Resolves a partial state value with its full representation in this machine.\r\n   *\r\n   * @param stateValue The partial state value to resolve.\r\n   */\n\n\n  StateNode.prototype.resolve = function (stateValue) {\n    var _a;\n\n    var _this = this;\n\n    if (!stateValue) {\n      return this.initialStateValue || EMPTY_OBJECT; // TODO: type-specific properties\n    }\n\n    switch (this.type) {\n      case 'parallel':\n        return mapValues(this.initialStateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(stateValue[subStateKey] || subStateValue) : EMPTY_OBJECT;\n        });\n\n      case 'compound':\n        if (isString(stateValue)) {\n          var subStateNode = this.getStateNode(stateValue);\n\n          if (subStateNode.type === 'parallel' || subStateNode.type === 'compound') {\n            return _a = {}, _a[stateValue] = subStateNode.initialStateValue, _a;\n          }\n\n          return stateValue;\n        }\n\n        if (!Object.keys(stateValue).length) {\n          return this.initialStateValue || {};\n        }\n\n        return mapValues(stateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(subStateValue) : EMPTY_OBJECT;\n        });\n\n      default:\n        return stateValue || EMPTY_OBJECT;\n    }\n  };\n\n  StateNode.prototype.getResolvedPath = function (stateIdentifier) {\n    if (isStateId(stateIdentifier)) {\n      var stateNode = this.machine.idMap[stateIdentifier.slice(STATE_IDENTIFIER.length)];\n\n      if (!stateNode) {\n        throw new Error(\"Unable to find state node '\".concat(stateIdentifier, \"'\"));\n      }\n\n      return stateNode.path;\n    }\n\n    return toStatePath(stateIdentifier, this.delimiter);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateValue\", {\n    get: function () {\n      var _a;\n\n      if (this.__cache.initialStateValue) {\n        return this.__cache.initialStateValue;\n      }\n\n      var initialStateValue;\n\n      if (this.type === 'parallel') {\n        initialStateValue = mapFilterValues(this.states, function (state) {\n          return state.initialStateValue || EMPTY_OBJECT;\n        }, function (stateNode) {\n          return !(stateNode.type === 'history');\n        });\n      } else if (this.initial !== undefined) {\n        if (!this.states[this.initial]) {\n          throw new Error(\"Initial state '\".concat(this.initial, \"' not found on '\").concat(this.key, \"'\"));\n        }\n\n        initialStateValue = isLeafNode(this.states[this.initial]) ? this.initial : (_a = {}, _a[this.initial] = this.states[this.initial].initialStateValue, _a);\n      } else {\n        // The finite state value of a machine without child states is just an empty object\n        initialStateValue = {};\n      }\n\n      this.__cache.initialStateValue = initialStateValue;\n      return this.__cache.initialStateValue;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.getInitialState = function (stateValue, context) {\n    this._init(); // TODO: this should be in the constructor (see note in constructor)\n\n\n    var configuration = this.getStateNodes(stateValue);\n    return this.resolveTransition({\n      configuration: configuration,\n      exitSet: [],\n      transitions: [],\n      source: undefined,\n      actions: []\n    }, undefined, context !== null && context !== void 0 ? context : this.machine.context, undefined);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialState\", {\n    /**\r\n     * The initial State instance, which includes all actions to be executed from\r\n     * entering the initial state.\r\n     */\n    get: function () {\n      var initialStateValue = this.initialStateValue;\n\n      if (!initialStateValue) {\n        throw new Error(\"Cannot retrieve initial state from simple state '\".concat(this.id, \"'.\"));\n      }\n\n      return this.getInitialState(initialStateValue);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"target\", {\n    /**\r\n     * The target state value of the history state node, if it exists. This represents the\r\n     * default state value to transition to if no history value exists yet.\r\n     */\n    get: function () {\n      var target;\n\n      if (this.type === 'history') {\n        var historyConfig = this.config;\n\n        if (isString(historyConfig.target)) {\n          target = isStateId(historyConfig.target) ? pathToStateValue(this.machine.getStateNodeById(historyConfig.target).path.slice(this.path.length - 1)) : historyConfig.target;\n        } else {\n          target = historyConfig.target;\n        }\n      }\n\n      return target;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Returns the leaf nodes from a state path relative to this state node.\r\n   *\r\n   * @param relativeStateId The relative state path to retrieve the state nodes\r\n   * @param history The previous state to retrieve history\r\n   * @param resolve Whether state nodes should resolve to initial child state nodes\r\n   */\n\n  StateNode.prototype.getRelativeStateNodes = function (relativeStateId, historyValue, resolve) {\n    if (resolve === void 0) {\n      resolve = true;\n    }\n\n    return resolve ? relativeStateId.type === 'history' ? relativeStateId.resolveHistory(historyValue) : relativeStateId.initialStateNodes : [relativeStateId];\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateNodes\", {\n    get: function () {\n      var _this = this;\n\n      if (isLeafNode(this)) {\n        return [this];\n      } // Case when state node is compound but no initial state is defined\n\n\n      if (this.type === 'compound' && !this.initial) {\n        if (!IS_PRODUCTION) {\n          warn(false, \"Compound state node '\".concat(this.id, \"' has no initial state.\"));\n        }\n\n        return [this];\n      }\n\n      var initialStateNodePaths = toStatePaths(this.initialStateValue);\n      return flatten(initialStateNodePaths.map(function (initialPath) {\n        return _this.getFromRelativePath(initialPath);\n      }));\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Retrieves state nodes from a relative path to this state node.\r\n   *\r\n   * @param relativePath The relative path from this state node\r\n   * @param historyValue\r\n   */\n\n  StateNode.prototype.getFromRelativePath = function (relativePath) {\n    if (!relativePath.length) {\n      return [this];\n    }\n\n    var _a = __read(relativePath),\n        stateKey = _a[0],\n        childStatePath = _a.slice(1);\n\n    if (!this.states) {\n      throw new Error(\"Cannot retrieve subPath '\".concat(stateKey, \"' from node with no states\"));\n    }\n\n    var childStateNode = this.getStateNode(stateKey);\n\n    if (childStateNode.type === 'history') {\n      return childStateNode.resolveHistory();\n    }\n\n    if (!this.states[stateKey]) {\n      throw new Error(\"Child state '\".concat(stateKey, \"' does not exist on '\").concat(this.id, \"'\"));\n    }\n\n    return this.states[stateKey].getFromRelativePath(childStatePath);\n  };\n\n  StateNode.prototype.historyValue = function (relativeStateValue) {\n    if (!Object.keys(this.states).length) {\n      return undefined;\n    }\n\n    return {\n      current: relativeStateValue || this.initialStateValue,\n      states: mapFilterValues(this.states, function (stateNode, key) {\n        if (!relativeStateValue) {\n          return stateNode.historyValue();\n        }\n\n        var subStateValue = isString(relativeStateValue) ? undefined : relativeStateValue[key];\n        return stateNode.historyValue(subStateValue || stateNode.initialStateValue);\n      }, function (stateNode) {\n        return !stateNode.history;\n      })\n    };\n  };\n  /**\r\n   * Resolves to the historical value(s) of the parent state node,\r\n   * represented by state nodes.\r\n   *\r\n   * @param historyValue\r\n   */\n\n\n  StateNode.prototype.resolveHistory = function (historyValue) {\n    var _this = this;\n\n    if (this.type !== 'history') {\n      return [this];\n    }\n\n    var parent = this.parent;\n\n    if (!historyValue) {\n      var historyTarget = this.target;\n      return historyTarget ? flatten(toStatePaths(historyTarget).map(function (relativeChildPath) {\n        return parent.getFromRelativePath(relativeChildPath);\n      })) : parent.initialStateNodes;\n    }\n\n    var subHistoryValue = nestedPath(parent.path, 'states')(historyValue).current;\n\n    if (isString(subHistoryValue)) {\n      return [parent.getStateNode(subHistoryValue)];\n    }\n\n    return flatten(toStatePaths(subHistoryValue).map(function (subStatePath) {\n      return _this.history === 'deep' ? parent.getFromRelativePath(subStatePath) : [parent.states[subStatePath[0]]];\n    }));\n  };\n\n  Object.defineProperty(StateNode.prototype, \"stateIds\", {\n    /**\r\n     * All the state node IDs of this state node and its descendant state nodes.\r\n     */\n    get: function () {\n      var _this = this;\n\n      var childStateIds = flatten(Object.keys(this.states).map(function (stateKey) {\n        return _this.states[stateKey].stateIds;\n      }));\n      return [this.id].concat(childStateIds);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"events\", {\n    /**\r\n     * All the event types accepted by this state node and its descendants.\r\n     */\n    get: function () {\n      var e_8, _a, e_9, _b;\n\n      if (this.__cache.events) {\n        return this.__cache.events;\n      }\n\n      var states = this.states;\n      var events = new Set(this.ownEvents);\n\n      if (states) {\n        try {\n          for (var _c = __values(Object.keys(states)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var stateId = _d.value;\n            var state = states[stateId];\n\n            if (state.states) {\n              try {\n                for (var _e = (e_9 = void 0, __values(state.events)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                  var event_1 = _f.value;\n                  events.add(\"\".concat(event_1));\n                }\n              } catch (e_9_1) {\n                e_9 = {\n                  error: e_9_1\n                };\n              } finally {\n                try {\n                  if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                } finally {\n                  if (e_9) throw e_9.error;\n                }\n              }\n            }\n          }\n        } catch (e_8_1) {\n          e_8 = {\n            error: e_8_1\n          };\n        } finally {\n          try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n          } finally {\n            if (e_8) throw e_8.error;\n          }\n        }\n      }\n\n      return this.__cache.events = Array.from(events);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"ownEvents\", {\n    /**\r\n     * All the events that have transitions directly from this state node.\r\n     *\r\n     * Excludes any inert events.\r\n     */\n    get: function () {\n      var events = new Set(this.transitions.filter(function (transition) {\n        return !(!transition.target && !transition.actions.length && transition.internal);\n      }).map(function (transition) {\n        return transition.eventType;\n      }));\n      return Array.from(events);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.resolveTarget = function (_target) {\n    var _this = this;\n\n    if (_target === undefined) {\n      // an undefined target signals that the state node should not transition from that state when receiving that event\n      return undefined;\n    }\n\n    return _target.map(function (target) {\n      if (!isString(target)) {\n        return target;\n      }\n\n      var isInternalTarget = target[0] === _this.delimiter; // If internal target is defined on machine,\n      // do not include machine key on target\n\n      if (isInternalTarget && !_this.parent) {\n        return _this.getStateNodeByPath(target.slice(1));\n      }\n\n      var resolvedTarget = isInternalTarget ? _this.key + target : target;\n\n      if (_this.parent) {\n        try {\n          var targetStateNode = _this.parent.getStateNodeByPath(resolvedTarget);\n\n          return targetStateNode;\n        } catch (err) {\n          throw new Error(\"Invalid transition definition for state node '\".concat(_this.id, \"':\\n\").concat(err.message));\n        }\n      } else {\n        return _this.getStateNodeByPath(resolvedTarget);\n      }\n    });\n  };\n\n  StateNode.prototype.formatTransition = function (transitionConfig) {\n    var _this = this;\n\n    var normalizedTarget = normalizeTarget(transitionConfig.target);\n    var internal = 'internal' in transitionConfig ? transitionConfig.internal : normalizedTarget ? normalizedTarget.some(function (_target) {\n      return isString(_target) && _target[0] === _this.delimiter;\n    }) : true;\n    var guards = this.machine.options.guards;\n    var target = this.resolveTarget(normalizedTarget);\n\n    var transition = __assign(__assign({}, transitionConfig), {\n      actions: toActionObjects(toArray(transitionConfig.actions)),\n      cond: toGuard(transitionConfig.cond, guards),\n      target: target,\n      source: this,\n      internal: internal,\n      eventType: transitionConfig.event,\n      toJSON: function () {\n        return __assign(__assign({}, transition), {\n          target: transition.target ? transition.target.map(function (t) {\n            return \"#\".concat(t.id);\n          }) : undefined,\n          source: \"#\".concat(_this.id)\n        });\n      }\n    });\n\n    return transition;\n  };\n\n  StateNode.prototype.formatTransitions = function () {\n    var e_10, _a;\n\n    var _this = this;\n\n    var onConfig;\n\n    if (!this.config.on) {\n      onConfig = [];\n    } else if (Array.isArray(this.config.on)) {\n      onConfig = this.config.on;\n    } else {\n      var _b = this.config.on,\n          _c = WILDCARD,\n          _d = _b[_c],\n          wildcardConfigs = _d === void 0 ? [] : _d,\n          strictTransitionConfigs_1 = __rest(_b, [typeof _c === \"symbol\" ? _c : _c + \"\"]);\n\n      onConfig = flatten(Object.keys(strictTransitionConfigs_1).map(function (key) {\n        if (!IS_PRODUCTION && key === NULL_EVENT) {\n          warn(false, \"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. \" + \"Please check the `on` configuration for \\\"#\".concat(_this.id, \"\\\".\"));\n        }\n\n        var transitionConfigArray = toTransitionConfigArray(key, strictTransitionConfigs_1[key]);\n\n        if (!IS_PRODUCTION) {\n          validateArrayifiedTransitions(_this, key, transitionConfigArray);\n        }\n\n        return transitionConfigArray;\n      }).concat(toTransitionConfigArray(WILDCARD, wildcardConfigs)));\n    }\n\n    var eventlessConfig = this.config.always ? toTransitionConfigArray('', this.config.always) : [];\n    var doneConfig = this.config.onDone ? toTransitionConfigArray(String(done(this.id)), this.config.onDone) : [];\n\n    if (!IS_PRODUCTION) {\n      warn(!(this.config.onDone && !this.parent), \"Root nodes cannot have an \\\".onDone\\\" transition. Please check the config of \\\"\".concat(this.id, \"\\\".\"));\n    }\n\n    var invokeConfig = flatten(this.invoke.map(function (invokeDef) {\n      var settleTransitions = [];\n\n      if (invokeDef.onDone) {\n        settleTransitions.push.apply(settleTransitions, __spreadArray([], __read(toTransitionConfigArray(String(doneInvoke(invokeDef.id)), invokeDef.onDone)), false));\n      }\n\n      if (invokeDef.onError) {\n        settleTransitions.push.apply(settleTransitions, __spreadArray([], __read(toTransitionConfigArray(String(error(invokeDef.id)), invokeDef.onError)), false));\n      }\n\n      return settleTransitions;\n    }));\n    var delayedTransitions = this.after;\n    var formattedTransitions = flatten(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(doneConfig), false), __read(invokeConfig), false), __read(onConfig), false), __read(eventlessConfig), false).map(function (transitionConfig) {\n      return toArray(transitionConfig).map(function (transition) {\n        return _this.formatTransition(transition);\n      });\n    }));\n\n    try {\n      for (var delayedTransitions_1 = __values(delayedTransitions), delayedTransitions_1_1 = delayedTransitions_1.next(); !delayedTransitions_1_1.done; delayedTransitions_1_1 = delayedTransitions_1.next()) {\n        var delayedTransition = delayedTransitions_1_1.value;\n        formattedTransitions.push(delayedTransition);\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (delayedTransitions_1_1 && !delayedTransitions_1_1.done && (_a = delayedTransitions_1.return)) _a.call(delayedTransitions_1);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    }\n\n    return formattedTransitions;\n  };\n\n  return StateNode;\n}();\n\nexport { StateNode };\n","import { StateNode } from './StateNode.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar warned = false;\nfunction Machine(config, options, initialContext) {\n  if (initialContext === void 0) {\n    initialContext = config.context;\n  }\n\n  return new StateNode(config, options, initialContext);\n}\nfunction createMachine(config, options) {\n  if (!IS_PRODUCTION && !('predictableActionArguments' in config) && !warned) {\n    warned = true;\n    console.warn('It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html');\n  }\n\n  return new StateNode(config, options);\n}\n\nexport { Machine, createMachine };\n","import { __assign } from './_virtual/_tslib.js';\n\nvar defaultOptions = {\n  deferEvents: false\n};\n\nvar Scheduler =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function Scheduler(options) {\n    this.processingEvent = false;\n    this.queue = [];\n    this.initialized = false;\n    this.options = __assign(__assign({}, defaultOptions), options);\n  }\n\n  Scheduler.prototype.initialize = function (callback) {\n    this.initialized = true;\n\n    if (callback) {\n      if (!this.options.deferEvents) {\n        this.schedule(callback);\n        return;\n      }\n\n      this.process(callback);\n    }\n\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.schedule = function (task) {\n    if (!this.initialized || this.processingEvent) {\n      this.queue.push(task);\n      return;\n    }\n\n    if (this.queue.length !== 0) {\n      throw new Error('Event queue should be empty when it is not processing events');\n    }\n\n    this.process(task);\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.clear = function () {\n    this.queue = [];\n  };\n\n  Scheduler.prototype.flushEvents = function () {\n    var nextCallback = this.queue.shift();\n\n    while (nextCallback) {\n      this.process(nextCallback);\n      nextCallback = this.queue.shift();\n    }\n  };\n\n  Scheduler.prototype.process = function (callback) {\n    this.processingEvent = true;\n\n    try {\n      callback();\n    } catch (e) {\n      // there is no use to keep the future events\n      // as the situation is not anymore the same\n      this.clear();\n      throw e;\n    } finally {\n      this.processingEvent = false;\n    }\n  };\n\n  return Scheduler;\n}();\n\nexport { Scheduler };\n","var children = /*#__PURE__*/new Map();\nvar sessionIdIndex = 0;\nvar registry = {\n  bookId: function () {\n    return \"x:\".concat(sessionIdIndex++);\n  },\n  register: function (id, actor) {\n    children.set(id, actor);\n    return id;\n  },\n  get: function (id) {\n    return children.get(id);\n  },\n  free: function (id) {\n    children.delete(id);\n  }\n};\n\nexport { registry };\n","import { IS_PRODUCTION } from './environment.js';\n\nfunction getGlobal() {\n  if (typeof globalThis !== 'undefined') {\n    return globalThis;\n  }\n\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n\n  if (!IS_PRODUCTION) {\n    console.warn('XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues');\n  }\n}\n\nfunction getDevTools() {\n  var global = getGlobal();\n\n  if (global && '__xstate__' in global) {\n    return global.__xstate__;\n  }\n\n  return undefined;\n}\n\nfunction registerService(service) {\n  if (!getGlobal()) {\n    return;\n  }\n\n  var devTools = getDevTools();\n\n  if (devTools) {\n    devTools.register(service);\n  }\n}\n\nexport { getGlobal, registerService };\n","import { __values, __spreadArray, __read, __assign } from './_virtual/_tslib.js';\nimport { SpecialTargets, ActionTypes } from './types.js';\nimport { isStateConfig, State, bindActionToState } from './State.js';\nimport { errorPlatform, update, error as error$1, log, stop, start, cancel, send, raise } from './actionTypes.js';\nimport { initEvent, doneInvoke, toActionObjects, resolveActions, error, getActionFunction } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { warn, mapContext, toObserver, isFunction, toSCXMLEvent, flatten, isRaisableAction, isPromiseLike, isObservable, isMachine, isBehavior, reportUnhandledExceptionOnInvocation, symbolObservable, isArray, toEventObject, isString, isActor, toInvokeSource, uniqueId } from './utils.js';\nimport { Scheduler } from './scheduler.js';\nimport { createDeferredActor, isSpawnedActor } from './Actor.js';\nimport { registry } from './registry.js';\nimport { getGlobal, registerService } from './devTools.js';\nimport { provide, consume } from './serviceScope.js';\nimport { spawnBehavior } from './behaviors.js';\n\nvar DEFAULT_SPAWN_OPTIONS = {\n  sync: false,\n  autoForward: false\n};\nvar InterpreterStatus;\n\n(function (InterpreterStatus) {\n  InterpreterStatus[InterpreterStatus[\"NotStarted\"] = 0] = \"NotStarted\";\n  InterpreterStatus[InterpreterStatus[\"Running\"] = 1] = \"Running\";\n  InterpreterStatus[InterpreterStatus[\"Stopped\"] = 2] = \"Stopped\";\n})(InterpreterStatus || (InterpreterStatus = {}));\n\nvar Interpreter =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new Interpreter instance (i.e., service) for the given machine with the provided options, if any.\r\n   *\r\n   * @param machine The machine to be interpreted\r\n   * @param options Interpreter options\r\n   */\n  function Interpreter(machine, options) {\n    if (options === void 0) {\n      options = Interpreter.defaultOptions;\n    }\n\n    var _this = this;\n\n    this.machine = machine;\n    this.delayedEventsMap = {};\n    this.listeners = new Set();\n    this.contextListeners = new Set();\n    this.stopListeners = new Set();\n    this.doneListeners = new Set();\n    this.eventListeners = new Set();\n    this.sendListeners = new Set();\n    /**\r\n     * Whether the service is started.\r\n     */\n\n    this.initialized = false;\n    this.status = InterpreterStatus.NotStarted;\n    this.children = new Map();\n    this.forwardTo = new Set();\n    this._outgoingQueue = [];\n    /**\r\n     * Alias for Interpreter.prototype.start\r\n     */\n\n    this.init = this.start;\n    /**\r\n     * Sends an event to the running interpreter to trigger a transition.\r\n     *\r\n     * An array of events (batched) can be sent as well, which will send all\r\n     * batched events to the running interpreter. The listeners will be\r\n     * notified only **once** when all events are processed.\r\n     *\r\n     * @param event The event(s) to send\r\n     */\n\n    this.send = function (event, payload) {\n      if (isArray(event)) {\n        _this.batch(event);\n\n        return _this.state;\n      }\n\n      var _event = toSCXMLEvent(toEventObject(event, payload));\n\n      if (_this.status === InterpreterStatus.Stopped) {\n        // do nothing\n        if (!IS_PRODUCTION) {\n          warn(false, \"Event \\\"\".concat(_event.name, \"\\\" was sent to stopped service \\\"\").concat(_this.machine.id, \"\\\". This service has already reached its final state, and will not transition.\\nEvent: \").concat(JSON.stringify(_event.data)));\n        }\n\n        return _this.state;\n      }\n\n      if (_this.status !== InterpreterStatus.Running && !_this.options.deferEvents) {\n        throw new Error(\"Event \\\"\".concat(_event.name, \"\\\" was sent to uninitialized service \\\"\").concat(_this.machine.id // tslint:disable-next-line:max-line-length\n        , \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\\nEvent: \").concat(JSON.stringify(_event.data)));\n      }\n\n      _this.scheduler.schedule(function () {\n        // Forward copy of event to child actors\n        _this.forward(_event);\n\n        var nextState = _this._nextState(_event);\n\n        _this.update(nextState, _event);\n      });\n\n      return _this._state; // TODO: deprecate (should return void)\n      // tslint:disable-next-line:semicolon\n    };\n\n    this.sendTo = function (event, to, immediate) {\n      var isParent = _this.parent && (to === SpecialTargets.Parent || _this.parent.id === to);\n      var target = isParent ? _this.parent : isString(to) ? to === SpecialTargets.Internal ? _this : _this.children.get(to) || registry.get(to) : isActor(to) ? to : undefined;\n\n      if (!target) {\n        if (!isParent) {\n          throw new Error(\"Unable to send event to child '\".concat(to, \"' from service '\").concat(_this.id, \"'.\"));\n        } // tslint:disable-next-line:no-console\n\n\n        if (!IS_PRODUCTION) {\n          warn(false, \"Service '\".concat(_this.id, \"' has no parent: unable to send event \").concat(event.type));\n        }\n\n        return;\n      }\n\n      if ('machine' in target) {\n        // perhaps those events should be rejected in the parent\n        // but atm it doesn't have easy access to all of the information that is required to do it reliably\n        if (_this.status !== InterpreterStatus.Stopped || _this.parent !== target || // we need to send events to the parent from exit handlers of a machine that reached its final state\n        _this.state.done) {\n          // Send SCXML events to machines\n          var scxmlEvent = __assign(__assign({}, event), {\n            name: event.name === error$1 ? \"\".concat(error(_this.id)) : event.name,\n            origin: _this.sessionId\n          });\n\n          if (!immediate && _this.machine.config.predictableActionArguments) {\n            _this._outgoingQueue.push([target, scxmlEvent]);\n          } else {\n            target.send(scxmlEvent);\n          }\n        }\n      } else {\n        // Send normal events to other targets\n        if (!immediate && _this.machine.config.predictableActionArguments) {\n          _this._outgoingQueue.push([target, event.data]);\n        } else {\n          target.send(event.data);\n        }\n      }\n    };\n\n    this._exec = function (action, context, _event, actionFunctionMap) {\n      if (actionFunctionMap === void 0) {\n        actionFunctionMap = _this.machine.options.actions;\n      }\n\n      var actionOrExec = action.exec || getActionFunction(action.type, actionFunctionMap);\n      var exec = isFunction(actionOrExec) ? actionOrExec : actionOrExec ? actionOrExec.exec : action.exec;\n\n      if (exec) {\n        try {\n          return exec(context, _event.data, !_this.machine.config.predictableActionArguments ? {\n            action: action,\n            state: _this.state,\n            _event: _event\n          } : {\n            action: action,\n            _event: _event\n          });\n        } catch (err) {\n          if (_this.parent) {\n            _this.parent.send({\n              type: 'xstate.error',\n              data: err\n            });\n          }\n\n          throw err;\n        }\n      }\n\n      switch (action.type) {\n        case raise:\n          {\n            // if raise action reached the interpreter then it's a delayed one\n            var sendAction_1 = action;\n\n            _this.defer(sendAction_1);\n\n            break;\n          }\n\n        case send:\n          var sendAction = action;\n\n          if (typeof sendAction.delay === 'number') {\n            _this.defer(sendAction);\n\n            return;\n          } else {\n            if (sendAction.to) {\n              _this.sendTo(sendAction._event, sendAction.to, _event === initEvent);\n            } else {\n              _this.send(sendAction._event);\n            }\n          }\n\n          break;\n\n        case cancel:\n          _this.cancel(action.sendId);\n\n          break;\n\n        case start:\n          {\n            if (_this.status !== InterpreterStatus.Running) {\n              return;\n            }\n\n            var activity = action.activity; // If the activity will be stopped right after it's started\n            // (such as in transient states)\n            // don't bother starting the activity.\n\n            if ( // in v4 with `predictableActionArguments` invokes are called eagerly when the `this.state` still points to the previous state\n            !_this.machine.config.predictableActionArguments && !_this.state.activities[activity.id || activity.type]) {\n              break;\n            } // Invoked services\n\n\n            if (activity.type === ActionTypes.Invoke) {\n              var invokeSource = toInvokeSource(activity.src);\n              var serviceCreator = _this.machine.options.services ? _this.machine.options.services[invokeSource.type] : undefined;\n              var id = activity.id,\n                  data = activity.data;\n\n              if (!IS_PRODUCTION) {\n                warn(!('forward' in activity), // tslint:disable-next-line:max-line-length\n                \"`forward` property is deprecated (found in invocation of '\".concat(activity.src, \"' in in machine '\").concat(_this.machine.id, \"'). \") + \"Please use `autoForward` instead.\");\n              }\n\n              var autoForward = 'autoForward' in activity ? activity.autoForward : !!activity.forward;\n\n              if (!serviceCreator) {\n                // tslint:disable-next-line:no-console\n                if (!IS_PRODUCTION) {\n                  warn(false, \"No service found for invocation '\".concat(activity.src, \"' in machine '\").concat(_this.machine.id, \"'.\"));\n                }\n\n                return;\n              }\n\n              var resolvedData = data ? mapContext(data, context, _event) : undefined;\n\n              if (typeof serviceCreator === 'string') {\n                // TODO: warn\n                return;\n              }\n\n              var source = isFunction(serviceCreator) ? serviceCreator(context, _event.data, {\n                data: resolvedData,\n                src: invokeSource,\n                meta: activity.meta\n              }) : serviceCreator;\n\n              if (!source) {\n                // TODO: warn?\n                return;\n              }\n\n              var options = void 0;\n\n              if (isMachine(source)) {\n                source = resolvedData ? source.withContext(resolvedData) : source;\n                options = {\n                  autoForward: autoForward\n                };\n              }\n\n              _this.spawn(source, id, options);\n            } else {\n              _this.spawnActivity(activity);\n            }\n\n            break;\n          }\n\n        case stop:\n          {\n            _this.stopChild(action.activity.id);\n\n            break;\n          }\n\n        case log:\n          var _a = action,\n              label = _a.label,\n              value = _a.value;\n\n          if (label) {\n            _this.logger(label, value);\n          } else {\n            _this.logger(value);\n          }\n\n          break;\n\n        default:\n          if (!IS_PRODUCTION) {\n            warn(false, \"No implementation found for action type '\".concat(action.type, \"'\"));\n          }\n\n          break;\n      }\n    };\n\n    var resolvedOptions = __assign(__assign({}, Interpreter.defaultOptions), options);\n\n    var clock = resolvedOptions.clock,\n        logger = resolvedOptions.logger,\n        parent = resolvedOptions.parent,\n        id = resolvedOptions.id;\n    var resolvedId = id !== undefined ? id : machine.id;\n    this.id = resolvedId;\n    this.logger = logger;\n    this.clock = clock;\n    this.parent = parent;\n    this.options = resolvedOptions;\n    this.scheduler = new Scheduler({\n      deferEvents: this.options.deferEvents\n    });\n    this.sessionId = registry.bookId();\n  }\n\n  Object.defineProperty(Interpreter.prototype, \"initialState\", {\n    get: function () {\n      var _this = this;\n\n      if (this._initialState) {\n        return this._initialState;\n      }\n\n      return provide(this, function () {\n        _this._initialState = _this.machine.initialState;\n        return _this._initialState;\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Interpreter.prototype, \"state\", {\n    /**\r\n     * @deprecated Use `.getSnapshot()` instead.\r\n     */\n    get: function () {\n      if (!IS_PRODUCTION) {\n        warn(this.status !== InterpreterStatus.NotStarted, \"Attempted to read state from uninitialized service '\".concat(this.id, \"'. Make sure the service is started first.\"));\n      }\n\n      return this._state;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Executes the actions of the given state, with that state's `context` and `event`.\r\n   *\r\n   * @param state The state whose actions will be executed\r\n   * @param actionsConfig The action implementations to use\r\n   */\n\n  Interpreter.prototype.execute = function (state, actionsConfig) {\n    var e_1, _a;\n\n    try {\n      for (var _b = __values(state.actions), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var action = _c.value;\n        this.exec(action, state, actionsConfig);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.update = function (state, _event) {\n    var e_2, _a, e_3, _b, e_4, _c, e_5, _d;\n\n    var _this = this; // Attach session ID to state\n\n\n    state._sessionid = this.sessionId; // Update state\n\n    this._state = state; // Execute actions\n\n    if ((!this.machine.config.predictableActionArguments || // this is currently required to execute initial actions as the `initialState` gets cached\n    // we can't just recompute it (and execute actions while doing so) because we try to preserve identity of actors created within initial assigns\n    _event === initEvent) && this.options.execute) {\n      this.execute(this.state);\n    } else {\n      var item = void 0;\n\n      while (item = this._outgoingQueue.shift()) {\n        item[0].send(item[1]);\n      }\n    } // Update children\n\n\n    this.children.forEach(function (child) {\n      _this.state.children[child.id] = child;\n    }); // Dev tools\n\n    if (this.devTools) {\n      this.devTools.send(_event.data, state);\n    } // Execute listeners\n\n\n    if (state.event) {\n      try {\n        for (var _e = __values(this.eventListeners), _f = _e.next(); !_f.done; _f = _e.next()) {\n          var listener = _f.value;\n          listener(state.event);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    }\n\n    try {\n      for (var _g = __values(this.listeners), _h = _g.next(); !_h.done; _h = _g.next()) {\n        var listener = _h.value;\n        listener(state, state.event);\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    try {\n      for (var _j = __values(this.contextListeners), _k = _j.next(); !_k.done; _k = _j.next()) {\n        var contextListener = _k.value;\n        contextListener(this.state.context, this.state.history ? this.state.history.context : undefined);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    if (this.state.done) {\n      // get final child state node\n      var finalChildStateNode = state.configuration.find(function (sn) {\n        return sn.type === 'final' && sn.parent === _this.machine;\n      });\n      var doneData = finalChildStateNode && finalChildStateNode.doneData ? mapContext(finalChildStateNode.doneData, state.context, _event) : undefined;\n      this._doneEvent = doneInvoke(this.id, doneData);\n\n      try {\n        for (var _l = __values(this.doneListeners), _m = _l.next(); !_m.done; _m = _l.next()) {\n          var listener = _m.value;\n          listener(this._doneEvent);\n        }\n      } catch (e_5_1) {\n        e_5 = {\n          error: e_5_1\n        };\n      } finally {\n        try {\n          if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n        } finally {\n          if (e_5) throw e_5.error;\n        }\n      }\n\n      this._stop();\n\n      this._stopChildren();\n\n      registry.free(this.sessionId);\n    }\n  };\n  /*\r\n   * Adds a listener that is notified whenever a state transition happens. The listener is called with\r\n   * the next state and the event object that caused the state transition.\r\n   *\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onTransition = function (listener) {\n    this.listeners.add(listener); // Send current state to listener\n\n    if (this.status === InterpreterStatus.Running) {\n      listener(this.state, this.state.event);\n    }\n\n    return this;\n  };\n\n  Interpreter.prototype.subscribe = function (nextListenerOrObserver, _, // TODO: error listener\n  completeListener) {\n    var _this = this;\n\n    var observer = toObserver(nextListenerOrObserver, _, completeListener);\n    this.listeners.add(observer.next); // Send current state to listener\n\n    if (this.status !== InterpreterStatus.NotStarted) {\n      observer.next(this.state);\n    }\n\n    var completeOnce = function () {\n      _this.doneListeners.delete(completeOnce);\n\n      _this.stopListeners.delete(completeOnce);\n\n      observer.complete();\n    };\n\n    if (this.status === InterpreterStatus.Stopped) {\n      observer.complete();\n    } else {\n      this.onDone(completeOnce);\n      this.onStop(completeOnce);\n    }\n\n    return {\n      unsubscribe: function () {\n        _this.listeners.delete(observer.next);\n\n        _this.doneListeners.delete(completeOnce);\n\n        _this.stopListeners.delete(completeOnce);\n      }\n    };\n  };\n  /**\r\n   * Adds an event listener that is notified whenever an event is sent to the running interpreter.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onEvent = function (listener) {\n    this.eventListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds an event listener that is notified whenever a `send` event occurs.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onSend = function (listener) {\n    this.sendListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a context listener that is notified whenever the state context changes.\r\n   * @param listener The context listener\r\n   */\n\n\n  Interpreter.prototype.onChange = function (listener) {\n    this.contextListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a listener that is notified when the machine is stopped.\r\n   * @param listener The listener\r\n   */\n\n\n  Interpreter.prototype.onStop = function (listener) {\n    this.stopListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a state listener that is notified when the statechart has reached its final state.\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onDone = function (listener) {\n    if (this.status === InterpreterStatus.Stopped && this._doneEvent) {\n      listener(this._doneEvent);\n    } else {\n      this.doneListeners.add(listener);\n    }\n\n    return this;\n  };\n  /**\r\n   * Removes a listener.\r\n   * @param listener The listener to remove\r\n   */\n\n\n  Interpreter.prototype.off = function (listener) {\n    this.listeners.delete(listener);\n    this.eventListeners.delete(listener);\n    this.sendListeners.delete(listener);\n    this.stopListeners.delete(listener);\n    this.doneListeners.delete(listener);\n    this.contextListeners.delete(listener);\n    return this;\n  };\n  /**\r\n   * Starts the interpreter from the given state, or the initial state.\r\n   * @param initialState The state to start the statechart from\r\n   */\n\n\n  Interpreter.prototype.start = function (initialState) {\n    var _this = this;\n\n    if (this.status === InterpreterStatus.Running) {\n      // Do not restart the service if it is already started\n      return this;\n    } // yes, it's a hack but we need the related cache to be populated for some things to work (like delayed transitions)\n    // this is usually called by `machine.getInitialState` but if we rehydrate from a state we might bypass this call\n    // we also don't want to call this method here as it resolves the full initial state which might involve calling assign actions\n    // and that could potentially lead to some unwanted side-effects (even such as creating some rogue actors)\n\n\n    this.machine._init();\n\n    registry.register(this.sessionId, this);\n    this.initialized = true;\n    this.status = InterpreterStatus.Running;\n    var resolvedState = initialState === undefined ? this.initialState : provide(this, function () {\n      return isStateConfig(initialState) ? _this.machine.resolveState(initialState) : _this.machine.resolveState(State.from(initialState, _this.machine.context));\n    });\n\n    if (this.options.devTools) {\n      this.attachDev();\n    }\n\n    this.scheduler.initialize(function () {\n      _this.update(resolvedState, initEvent);\n    });\n    return this;\n  };\n\n  Interpreter.prototype._stopChildren = function () {\n    // TODO: think about converting those to actions\n    this.children.forEach(function (child) {\n      if (isFunction(child.stop)) {\n        child.stop();\n      }\n    });\n    this.children.clear();\n  };\n\n  Interpreter.prototype._stop = function () {\n    var e_6, _a, e_7, _b, e_8, _c, e_9, _d, e_10, _e;\n\n    try {\n      for (var _f = __values(this.listeners), _g = _f.next(); !_g.done; _g = _f.next()) {\n        var listener = _g.value;\n        this.listeners.delete(listener);\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (_g && !_g.done && (_a = _f.return)) _a.call(_f);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    try {\n      for (var _h = __values(this.stopListeners), _j = _h.next(); !_j.done; _j = _h.next()) {\n        var listener = _j.value; // call listener, then remove\n\n        listener();\n        this.stopListeners.delete(listener);\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n\n    try {\n      for (var _k = __values(this.contextListeners), _l = _k.next(); !_l.done; _l = _k.next()) {\n        var listener = _l.value;\n        this.contextListeners.delete(listener);\n      }\n    } catch (e_8_1) {\n      e_8 = {\n        error: e_8_1\n      };\n    } finally {\n      try {\n        if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n      } finally {\n        if (e_8) throw e_8.error;\n      }\n    }\n\n    try {\n      for (var _m = __values(this.doneListeners), _o = _m.next(); !_o.done; _o = _m.next()) {\n        var listener = _o.value;\n        this.doneListeners.delete(listener);\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (_o && !_o.done && (_d = _m.return)) _d.call(_m);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    }\n\n    if (!this.initialized) {\n      // Interpreter already stopped; do nothing\n      return this;\n    }\n\n    this.initialized = false;\n    this.status = InterpreterStatus.Stopped;\n    this._initialState = undefined;\n\n    try {\n      // we are going to stop within the current sync frame\n      // so we can safely just cancel this here as nothing async should be fired anyway\n      for (var _p = __values(Object.keys(this.delayedEventsMap)), _q = _p.next(); !_q.done; _q = _p.next()) {\n        var key = _q.value;\n        this.clock.clearTimeout(this.delayedEventsMap[key]);\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (_q && !_q.done && (_e = _p.return)) _e.call(_p);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    } // clear everything that might be enqueued\n\n\n    this.scheduler.clear();\n    this.scheduler = new Scheduler({\n      deferEvents: this.options.deferEvents\n    });\n  };\n  /**\r\n   * Stops the interpreter and unsubscribe all listeners.\r\n   *\r\n   * This will also notify the `onStop` listeners.\r\n   */\n\n\n  Interpreter.prototype.stop = function () {\n    // TODO: add warning for stopping non-root interpreters\n    var _this = this; // grab the current scheduler as it will be replaced in _stop\n\n\n    var scheduler = this.scheduler;\n\n    this._stop(); // let what is currently processed to be finished\n\n\n    scheduler.schedule(function () {\n      var _a;\n\n      if ((_a = _this._state) === null || _a === void 0 ? void 0 : _a.done) {\n        return;\n      } // it feels weird to handle this here but we need to handle this even slightly \"out of band\"\n\n\n      var _event = toSCXMLEvent({\n        type: 'xstate.stop'\n      });\n\n      var nextState = provide(_this, function () {\n        var exitActions = flatten(__spreadArray([], __read(_this.state.configuration), false).sort(function (a, b) {\n          return b.order - a.order;\n        }).map(function (stateNode) {\n          return toActionObjects(stateNode.onExit, _this.machine.options.actions);\n        }));\n\n        var _a = __read(resolveActions(_this.machine, _this.state, _this.state.context, _event, [{\n          type: 'exit',\n          actions: exitActions\n        }], _this.machine.config.predictableActionArguments ? _this._exec : undefined, _this.machine.config.predictableActionArguments || _this.machine.config.preserveActionOrder), 2),\n            resolvedActions = _a[0],\n            updatedContext = _a[1];\n\n        var newState = new State({\n          value: _this.state.value,\n          context: updatedContext,\n          _event: _event,\n          _sessionid: _this.sessionId,\n          historyValue: undefined,\n          history: _this.state,\n          actions: resolvedActions.filter(function (action) {\n            return !isRaisableAction(action);\n          }),\n          activities: {},\n          events: [],\n          configuration: [],\n          transitions: [],\n          children: {},\n          done: _this.state.done,\n          tags: _this.state.tags,\n          machine: _this.machine\n        });\n        newState.changed = true;\n        return newState;\n      });\n\n      _this.update(nextState, _event);\n\n      _this._stopChildren();\n\n      registry.free(_this.sessionId);\n    });\n    return this;\n  };\n\n  Interpreter.prototype.batch = function (events) {\n    var _this = this;\n\n    if (this.status === InterpreterStatus.NotStarted && this.options.deferEvents) {\n      // tslint:disable-next-line:no-console\n      if (!IS_PRODUCTION) {\n        warn(false, \"\".concat(events.length, \" event(s) were sent to uninitialized service \\\"\").concat(this.machine.id, \"\\\" and are deferred. Make sure .start() is called for this service.\\nEvent: \").concat(JSON.stringify(event)));\n      }\n    } else if (this.status !== InterpreterStatus.Running) {\n      throw new Error( // tslint:disable-next-line:max-line-length\n      \"\".concat(events.length, \" event(s) were sent to uninitialized service \\\"\").concat(this.machine.id, \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\"));\n    }\n\n    if (!events.length) {\n      return;\n    }\n\n    var exec = !!this.machine.config.predictableActionArguments && this._exec;\n    this.scheduler.schedule(function () {\n      var e_11, _a;\n\n      var nextState = _this.state;\n      var batchChanged = false;\n      var batchedActions = [];\n\n      var _loop_1 = function (event_1) {\n        var _event = toSCXMLEvent(event_1);\n\n        _this.forward(_event);\n\n        nextState = provide(_this, function () {\n          return _this.machine.transition(nextState, _event, undefined, exec || undefined);\n        });\n        batchedActions.push.apply(batchedActions, __spreadArray([], __read(_this.machine.config.predictableActionArguments ? nextState.actions : nextState.actions.map(function (a) {\n          return bindActionToState(a, nextState);\n        })), false));\n        batchChanged = batchChanged || !!nextState.changed;\n      };\n\n      try {\n        for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n          var event_1 = events_1_1.value;\n\n          _loop_1(event_1);\n        }\n      } catch (e_11_1) {\n        e_11 = {\n          error: e_11_1\n        };\n      } finally {\n        try {\n          if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n        } finally {\n          if (e_11) throw e_11.error;\n        }\n      }\n\n      nextState.changed = batchChanged;\n      nextState.actions = batchedActions;\n\n      _this.update(nextState, toSCXMLEvent(events[events.length - 1]));\n    });\n  };\n  /**\r\n   * Returns a send function bound to this interpreter instance.\r\n   *\r\n   * @param event The event to be sent by the sender.\r\n   */\n\n\n  Interpreter.prototype.sender = function (event) {\n    return this.send.bind(this, event);\n  };\n\n  Interpreter.prototype._nextState = function (event, exec) {\n    var _this = this;\n\n    if (exec === void 0) {\n      exec = !!this.machine.config.predictableActionArguments && this._exec;\n    }\n\n    var _event = toSCXMLEvent(event);\n\n    if (_event.name.indexOf(errorPlatform) === 0 && !this.state.nextEvents.some(function (nextEvent) {\n      return nextEvent.indexOf(errorPlatform) === 0;\n    })) {\n      throw _event.data.data;\n    }\n\n    var nextState = provide(this, function () {\n      return _this.machine.transition(_this.state, _event, undefined, exec || undefined);\n    });\n    return nextState;\n  };\n  /**\r\n   * Returns the next state given the interpreter's current state and the event.\r\n   *\r\n   * This is a pure method that does _not_ update the interpreter's state.\r\n   *\r\n   * @param event The event to determine the next state\r\n   */\n\n\n  Interpreter.prototype.nextState = function (event) {\n    return this._nextState(event, false);\n  };\n\n  Interpreter.prototype.forward = function (event) {\n    var e_12, _a;\n\n    try {\n      for (var _b = __values(this.forwardTo), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var id = _c.value;\n        var child = this.children.get(id);\n\n        if (!child) {\n          throw new Error(\"Unable to forward event '\".concat(event, \"' from interpreter '\").concat(this.id, \"' to nonexistant child '\").concat(id, \"'.\"));\n        }\n\n        child.send(event);\n      }\n    } catch (e_12_1) {\n      e_12 = {\n        error: e_12_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_12) throw e_12.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.defer = function (sendAction) {\n    var _this = this;\n\n    var timerId = this.clock.setTimeout(function () {\n      if ('to' in sendAction && sendAction.to) {\n        _this.sendTo(sendAction._event, sendAction.to, true);\n      } else {\n        _this.send(sendAction._event);\n      }\n    }, sendAction.delay);\n\n    if (sendAction.id) {\n      this.delayedEventsMap[sendAction.id] = timerId;\n    }\n  };\n\n  Interpreter.prototype.cancel = function (sendId) {\n    this.clock.clearTimeout(this.delayedEventsMap[sendId]);\n    delete this.delayedEventsMap[sendId];\n  };\n\n  Interpreter.prototype.exec = function (action, state, actionFunctionMap) {\n    if (actionFunctionMap === void 0) {\n      actionFunctionMap = this.machine.options.actions;\n    }\n\n    this._exec(action, state.context, state._event, actionFunctionMap);\n  };\n\n  Interpreter.prototype.removeChild = function (childId) {\n    var _a;\n\n    this.children.delete(childId);\n    this.forwardTo.delete(childId); // this.state might not exist at the time this is called,\n    // such as when a child is added then removed while initializing the state\n\n    (_a = this.state) === null || _a === void 0 ? true : delete _a.children[childId];\n  };\n\n  Interpreter.prototype.stopChild = function (childId) {\n    var child = this.children.get(childId);\n\n    if (!child) {\n      return;\n    }\n\n    this.removeChild(childId);\n\n    if (isFunction(child.stop)) {\n      child.stop();\n    }\n  };\n\n  Interpreter.prototype.spawn = function (entity, name, options) {\n    if (this.status !== InterpreterStatus.Running) {\n      return createDeferredActor(entity, name);\n    }\n\n    if (isPromiseLike(entity)) {\n      return this.spawnPromise(Promise.resolve(entity), name);\n    } else if (isFunction(entity)) {\n      return this.spawnCallback(entity, name);\n    } else if (isSpawnedActor(entity)) {\n      return this.spawnActor(entity, name);\n    } else if (isObservable(entity)) {\n      return this.spawnObservable(entity, name);\n    } else if (isMachine(entity)) {\n      return this.spawnMachine(entity, __assign(__assign({}, options), {\n        id: name\n      }));\n    } else if (isBehavior(entity)) {\n      return this.spawnBehavior(entity, name);\n    } else {\n      throw new Error(\"Unable to spawn entity \\\"\".concat(name, \"\\\" of type \\\"\").concat(typeof entity, \"\\\".\"));\n    }\n  };\n\n  Interpreter.prototype.spawnMachine = function (machine, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var childService = new Interpreter(machine, __assign(__assign({}, this.options), {\n      parent: this,\n      id: options.id || machine.id\n    }));\n\n    var resolvedOptions = __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), options);\n\n    if (resolvedOptions.sync) {\n      childService.onTransition(function (state) {\n        _this.send(update, {\n          state: state,\n          id: childService.id\n        });\n      });\n    }\n\n    var actor = childService;\n    this.children.set(childService.id, actor);\n\n    if (resolvedOptions.autoForward) {\n      this.forwardTo.add(childService.id);\n    }\n\n    childService.onDone(function (doneEvent) {\n      _this.removeChild(childService.id);\n\n      _this.send(toSCXMLEvent(doneEvent, {\n        origin: childService.id\n      }));\n    }).start();\n    return actor;\n  };\n\n  Interpreter.prototype.spawnBehavior = function (behavior, id) {\n    var actorRef = spawnBehavior(behavior, {\n      id: id,\n      parent: this\n    });\n    this.children.set(id, actorRef);\n    return actorRef;\n  };\n\n  Interpreter.prototype.spawnPromise = function (promise, id) {\n    var _a;\n\n    var _this = this;\n\n    var canceled = false;\n    var resolvedData;\n    promise.then(function (response) {\n      if (!canceled) {\n        resolvedData = response;\n\n        _this.removeChild(id);\n\n        _this.send(toSCXMLEvent(doneInvoke(id, response), {\n          origin: id\n        }));\n      }\n    }, function (errorData) {\n      if (!canceled) {\n        _this.removeChild(id);\n\n        var errorEvent = error(id, errorData);\n\n        try {\n          // Send \"error.platform.id\" to this (parent).\n          _this.send(toSCXMLEvent(errorEvent, {\n            origin: id\n          }));\n        } catch (error) {\n          reportUnhandledExceptionOnInvocation(errorData, error, id);\n\n          if (_this.devTools) {\n            _this.devTools.send(errorEvent, _this.state);\n          }\n\n          if (_this.machine.strict) {\n            // it would be better to always stop the state machine if unhandled\n            // exception/promise rejection happens but because we don't want to\n            // break existing code so enforce it on strict mode only especially so\n            // because documentation says that onError is optional\n            _this.stop();\n          }\n        }\n      }\n    });\n    var actor = (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        var observer = toObserver(next, handleError, complete);\n        var unsubscribed = false;\n        promise.then(function (response) {\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.next(response);\n\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.complete();\n        }, function (err) {\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.error(err);\n        });\n        return {\n          unsubscribe: function () {\n            return unsubscribed = true;\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      },\n      getSnapshot: function () {\n        return resolvedData;\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnCallback = function (callback, id) {\n    var _a;\n\n    var _this = this;\n\n    var canceled = false;\n    var receivers = new Set();\n    var listeners = new Set();\n    var emitted;\n\n    var receive = function (e) {\n      emitted = e;\n      listeners.forEach(function (listener) {\n        return listener(e);\n      });\n\n      if (canceled) {\n        return;\n      }\n\n      _this.send(toSCXMLEvent(e, {\n        origin: id\n      }));\n    };\n\n    var callbackStop;\n\n    try {\n      callbackStop = callback(receive, function (newListener) {\n        receivers.add(newListener);\n      });\n    } catch (err) {\n      this.send(error(id, err));\n    }\n\n    if (isPromiseLike(callbackStop)) {\n      // it turned out to be an async function, can't reliably check this before calling `callback`\n      // because transpiled async functions are not recognizable\n      return this.spawnPromise(callbackStop, id);\n    }\n\n    var actor = (_a = {\n      id: id,\n      send: function (event) {\n        return receivers.forEach(function (receiver) {\n          return receiver(event);\n        });\n      },\n      subscribe: function (next) {\n        var observer = toObserver(next);\n        listeners.add(observer.next);\n        return {\n          unsubscribe: function () {\n            listeners.delete(observer.next);\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n\n        if (isFunction(callbackStop)) {\n          callbackStop();\n        }\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      },\n      getSnapshot: function () {\n        return emitted;\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnObservable = function (source, id) {\n    var _a;\n\n    var _this = this;\n\n    var emitted;\n    var subscription = source.subscribe(function (value) {\n      emitted = value;\n\n      _this.send(toSCXMLEvent(value, {\n        origin: id\n      }));\n    }, function (err) {\n      _this.removeChild(id);\n\n      _this.send(toSCXMLEvent(error(id, err), {\n        origin: id\n      }));\n    }, function () {\n      _this.removeChild(id);\n\n      _this.send(toSCXMLEvent(doneInvoke(id), {\n        origin: id\n      }));\n    });\n    var actor = (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        return source.subscribe(next, handleError, complete);\n      },\n      stop: function () {\n        return subscription.unsubscribe();\n      },\n      getSnapshot: function () {\n        return emitted;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActor = function (actor, name) {\n    this.children.set(name, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActivity = function (activity) {\n    var implementation = this.machine.options && this.machine.options.activities ? this.machine.options.activities[activity.type] : undefined;\n\n    if (!implementation) {\n      if (!IS_PRODUCTION) {\n        warn(false, \"No implementation found for activity '\".concat(activity.type, \"'\"));\n      } // tslint:disable-next-line:no-console\n\n\n      return;\n    } // Start implementation\n\n\n    var dispose = implementation(this.state.context, activity);\n    this.spawnEffect(activity.id, dispose);\n  };\n\n  Interpreter.prototype.spawnEffect = function (id, dispose) {\n    var _a;\n\n    this.children.set(id, (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function () {\n        return {\n          unsubscribe: function () {\n            return void 0;\n          }\n        };\n      },\n      stop: dispose || undefined,\n      getSnapshot: function () {\n        return undefined;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a));\n  };\n\n  Interpreter.prototype.attachDev = function () {\n    var global = getGlobal();\n\n    if (this.options.devTools && global) {\n      if (global.__REDUX_DEVTOOLS_EXTENSION__) {\n        var devToolsOptions = typeof this.options.devTools === 'object' ? this.options.devTools : undefined;\n        this.devTools = global.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign(__assign({\n          name: this.id,\n          autoPause: true,\n          stateSanitizer: function (state) {\n            return {\n              value: state.value,\n              context: state.context,\n              actions: state.actions\n            };\n          }\n        }, devToolsOptions), {\n          features: __assign({\n            jump: false,\n            skip: false\n          }, devToolsOptions ? devToolsOptions.features : undefined)\n        }), this.machine);\n        this.devTools.init(this.state);\n      } // add XState-specific dev tooling hook\n\n\n      registerService(this);\n    }\n  };\n\n  Interpreter.prototype.toJSON = function () {\n    return {\n      id: this.id\n    };\n  };\n\n  Interpreter.prototype[symbolObservable] = function () {\n    return this;\n  };\n\n  Interpreter.prototype.getSnapshot = function () {\n    if (this.status === InterpreterStatus.NotStarted) {\n      return this.initialState;\n    }\n\n    return this._state;\n  };\n  /**\r\n   * The default interpreter options:\r\n   *\r\n   * - `clock` uses the global `setTimeout` and `clearTimeout` functions\r\n   * - `logger` uses the global `console.log()` method\r\n   */\n\n\n  Interpreter.defaultOptions = {\n    execute: true,\n    deferEvents: true,\n    clock: {\n      setTimeout: function (fn, ms) {\n        return setTimeout(fn, ms);\n      },\n      clearTimeout: function (id) {\n        return clearTimeout(id);\n      }\n    },\n    logger: /*#__PURE__*/console.log.bind(console),\n    devTools: false\n  };\n  Interpreter.interpret = interpret;\n  return Interpreter;\n}();\n\nvar resolveSpawnOptions = function (nameOrOptions) {\n  if (isString(nameOrOptions)) {\n    return __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n      name: nameOrOptions\n    });\n  }\n\n  return __assign(__assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n    name: uniqueId()\n  }), nameOrOptions);\n};\n\nfunction spawn(entity, nameOrOptions) {\n  var resolvedOptions = resolveSpawnOptions(nameOrOptions);\n  return consume(function (service) {\n    if (!IS_PRODUCTION) {\n      var isLazyEntity = isMachine(entity) || isFunction(entity);\n      warn(!!service || isLazyEntity, \"Attempted to spawn an Actor (ID: \\\"\".concat(isMachine(entity) ? entity.id : 'undefined', \"\\\") outside of a service. This will have no effect.\"));\n    }\n\n    if (service) {\n      return service.spawn(entity, resolvedOptions.name, resolvedOptions);\n    } else {\n      return createDeferredActor(entity, resolvedOptions.name);\n    }\n  });\n}\n/**\r\n * Creates a new Interpreter instance for the given machine with the provided options, if any.\r\n *\r\n * @param machine The machine to interpret\r\n * @param options Interpreter options\r\n */\n\nfunction interpret(machine, options) {\n  var interpreter = new Interpreter(machine, options);\n  return interpreter;\n}\n\nexport { Interpreter, InterpreterStatus, interpret, spawn };\n","import { error, doneInvoke } from './actions.js';\nimport { toActorRef } from './Actor.js';\nimport { toObserver } from './utils.js';\n\n/**\r\n * Returns an actor behavior from a reducer and its initial state.\r\n *\r\n * @param transition The pure reducer that returns the next state given the current state and event.\r\n * @param initialState The initial state of the reducer.\r\n * @returns An actor behavior\r\n */\n\nfunction fromReducer(transition, initialState) {\n  return {\n    transition: transition,\n    initialState: initialState\n  };\n}\nfunction fromPromise(promiseFn) {\n  var initialState = {\n    error: undefined,\n    data: undefined,\n    status: 'pending'\n  };\n  return {\n    transition: function (state, event, _a) {\n      var parent = _a.parent,\n          id = _a.id,\n          observers = _a.observers;\n\n      switch (event.type) {\n        case 'fulfill':\n          parent === null || parent === void 0 ? void 0 : parent.send(doneInvoke(id, event.data));\n          return {\n            error: undefined,\n            data: event.data,\n            status: 'fulfilled'\n          };\n\n        case 'reject':\n          parent === null || parent === void 0 ? void 0 : parent.send(error(id, event.error));\n          observers.forEach(function (observer) {\n            observer.error(event.error);\n          });\n          return {\n            error: event.error,\n            data: undefined,\n            status: 'rejected'\n          };\n\n        default:\n          return state;\n      }\n    },\n    initialState: initialState,\n    start: function (_a) {\n      var self = _a.self;\n      promiseFn().then(function (data) {\n        self.send({\n          type: 'fulfill',\n          data: data\n        });\n      }, function (reason) {\n        self.send({\n          type: 'reject',\n          error: reason\n        });\n      });\n      return initialState;\n    }\n  };\n}\nfunction spawnBehavior(behavior, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var state = behavior.initialState;\n  var observers = new Set();\n  var mailbox = [];\n  var flushing = false;\n\n  var flush = function () {\n    if (flushing) {\n      return;\n    }\n\n    flushing = true;\n\n    while (mailbox.length > 0) {\n      var event_1 = mailbox.shift();\n      state = behavior.transition(state, event_1, actorCtx);\n      observers.forEach(function (observer) {\n        return observer.next(state);\n      });\n    }\n\n    flushing = false;\n  };\n\n  var actor = toActorRef({\n    id: options.id,\n    send: function (event) {\n      mailbox.push(event);\n      flush();\n    },\n    getSnapshot: function () {\n      return state;\n    },\n    subscribe: function (next, handleError, complete) {\n      var observer = toObserver(next, handleError, complete);\n      observers.add(observer);\n      observer.next(state);\n      return {\n        unsubscribe: function () {\n          observers.delete(observer);\n        }\n      };\n    }\n  });\n  var actorCtx = {\n    parent: options.parent,\n    self: actor,\n    id: options.id || 'anonymous',\n    observers: observers\n  };\n  state = behavior.start ? behavior.start(actorCtx) : state;\n  return actor;\n}\n\nexport { fromPromise, fromReducer, spawnBehavior };\n","export { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\n","import { assign as assign$1, cancel as cancel$1, send as send$1, sendTo as sendTo$1, sendParent as sendParent$1, sendUpdate as sendUpdate$1, forwardTo as forwardTo$1, doneInvoke as doneInvoke$1, raise as raise$1, log as log$1, pure as pure$1, choose as choose$1, stop as stop$1 } from './actions.js';\nimport * as actions from './actions.js';\nexport { actions };\nexport { toActorRef } from './Actor.js';\nexport { Interpreter, InterpreterStatus, interpret, spawn } from './interpreter.js';\nexport { Machine, createMachine } from './Machine.js';\nexport { mapState } from './mapState.js';\nexport { matchState } from './match.js';\nexport { createSchema, t } from './schema.js';\nexport { State } from './State.js';\nexport { StateNode } from './StateNode.js';\nexport { spawnBehavior } from './behaviors.js';\nexport { ActionTypes, SpecialTargets } from './types.js';\nexport { matchesState, toEventObject, toObserver, toSCXMLEvent } from './utils.js';\n\nvar assign = assign$1,\n    cancel = cancel$1,\n    send = send$1,\n    sendTo = sendTo$1,\n    sendParent = sendParent$1,\n    sendUpdate = sendUpdate$1,\n    forwardTo = forwardTo$1,\n    doneInvoke = doneInvoke$1,\n    raise = raise$1,\n    log = log$1,\n    pure = pure$1,\n    choose = choose$1,\n    stop = stop$1;\n\nexport { assign, cancel, choose, doneInvoke, forwardTo, log, pure, raise, send, sendParent, sendTo, sendUpdate, stop };\n","import { config } from '@grafana/runtime';\nimport { HttpClient } from '@shared/infrastructure/http/HttpClient';\n\nexport class DataSourceProxyClient extends HttpClient {\n  dataSourceUid: string;\n\n  constructor(options: { dataSourceUid: string }) {\n    const { dataSourceUid } = options;\n\n    let { appSubUrl = '', bootData } = config;\n    if (appSubUrl?.at(-1) !== '/') {\n      // ensures that the API pathname is appended correctly (appUrl seems to always have it but better to be extra careful)\n      appSubUrl += '/';\n    }\n\n    super(`${appSubUrl}api/datasources/proxy/uid/${dataSourceUid}`, {\n      'content-type': 'application/json',\n      'X-Grafana-Org-Id': String(bootData?.user?.orgId || ''),\n    });\n\n    this.dataSourceUid = options.dataSourceUid;\n  }\n}\n","import { DataSourceProxyClient } from '../../series/http/DataSourceProxyClient';\n\nexport class LabelsApiClient extends DataSourceProxyClient {\n  static queryToMatchers(query: string) {\n    const labelsIndex = query.indexOf('{');\n\n    if (labelsIndex > 0) {\n      const profileTypeID = query.substring(0, labelsIndex);\n      return [`{__profile_type__=\\\"${profileTypeID}\\\", ${query.substring(labelsIndex + 1, query.length)}`];\n    }\n\n    if (labelsIndex === 0) {\n      return [query];\n    }\n\n    return [`{__profile_type__=\\\"${query}\\\"}`];\n  }\n\n  constructor(options: { dataSourceUid: string }) {\n    super(options);\n  }\n\n  async fetchLabels(query: string, from: number, to: number) {\n    return this._post('/querier.v1.QuerierService/LabelNames', {\n      matchers: LabelsApiClient.queryToMatchers(query),\n      start: from,\n      end: to,\n    }).then((response) => response.json());\n  }\n\n  async fetchLabelValues(labelId: string, query: string, from: number, to: number) {\n    return this._post('/querier.v1.QuerierService/LabelValues', {\n      name: labelId,\n      matchers: LabelsApiClient.queryToMatchers(query),\n      start: from,\n      end: to,\n    }).then((response) => response.json());\n  }\n\n  _post(pathname: string, body: Record<string, any>) {\n    return super.fetch(pathname, {\n      method: 'POST',\n      body: JSON.stringify(body),\n    });\n  }\n}\n","type CacheKeyable = { toString(): string };\n\nexport class MemoryCacheClient {\n  store = new Map<string, any>();\n\n  static buildCacheKey(args: CacheKeyable[]) {\n    let key = '';\n    for (const arg of args) {\n      key += String(arg);\n    }\n    return key;\n  }\n\n  get(args: CacheKeyable[]): any {\n    return this.store.get(MemoryCacheClient.buildCacheKey(args));\n  }\n\n  // TODO: TTL?\n  set(args: CacheKeyable[], data: any) {\n    this.store.set(MemoryCacheClient.buildCacheKey(args), data);\n  }\n\n  delete(args: CacheKeyable[]) {\n    this.store.delete(MemoryCacheClient.buildCacheKey(args));\n  }\n}\n","export function invariant(check: boolean, message: string): asserts check {\n  if (!check) {\n    throw new Error(message);\n  }\n}\n","import { ApiClient } from './http/ApiClient';\n\nexport abstract class AbstractRepository<T extends ApiClient, U> {\n  apiClient?: T;\n  cacheClient: U | undefined;\n\n  constructor(options: { apiClient?: T; cacheClient?: U }) {\n    this.apiClient = options.apiClient;\n    this.cacheClient = options?.cacheClient;\n  }\n\n  setApiClient(apiClient: T) {\n    this.apiClient = apiClient;\n  }\n\n  setCacheClient(cacheClient: U) {\n    this.cacheClient = cacheClient;\n  }\n\n  cancel(reason: any) {\n    this.apiClient!.abort(reason);\n  }\n}\n","import { ApiClient } from '@shared/infrastructure/http/ApiClient';\n\nexport class LabelsApiClient extends ApiClient {\n  static queryToMatchers(query: string) {\n    const labelsIndex = query.indexOf('{');\n\n    if (labelsIndex > 0) {\n      const profileTypeID = query.substring(0, labelsIndex);\n      return [`{__profile_type__=\\\"${profileTypeID}\\\", ${query.substring(labelsIndex + 1, query.length)}`];\n    }\n\n    if (labelsIndex === 0) {\n      return [query];\n    }\n\n    return [`{__profile_type__=\\\"${query}\\\"}`];\n  }\n\n  async fetchLabels(query: string, from: number, to: number) {\n    // all /querier requests: timerange in Unix time ms (unix * 1000)\n    return this._post('/querier.v1.QuerierService/LabelNames', {\n      matchers: LabelsApiClient.queryToMatchers(query),\n      start: from,\n      end: to,\n    }).then((response) => response.json());\n  }\n\n  async fetchLabelValues(labelId: string, query: string, from: number, to: number) {\n    // all /querier requests: timerange in Unix time ms (unix * 1000)\n    return this._post('/querier.v1.QuerierService/LabelValues', {\n      name: labelId,\n      matchers: LabelsApiClient.queryToMatchers(query),\n      start: from,\n      end: to,\n    }).then((response) => response.json());\n  }\n\n  _post(pathname: string, body: Record<string, any>) {\n    return super.fetch(pathname, {\n      method: 'POST',\n      body: JSON.stringify(body),\n    });\n  }\n}\n","import { MemoryCacheClient } from '@shared/infrastructure/MemoryCacheClient';\n\nimport { Suggestions } from '../../components/QueryBuilder/domain/types';\nimport { invariant } from '../../types/helpers/invariant';\nimport { AbstractRepository } from '../AbstractRepository';\nimport { LabelsApiClient } from './LabelsApiClient';\n\ntype ListLabelsOptions = {\n  query: string;\n  from: number;\n  to: number;\n};\n\ntype ListLabelValuesOptions = ListLabelsOptions & {\n  label: string;\n};\n\nclass LabelsRepository extends AbstractRepository<LabelsApiClient, MemoryCacheClient> {\n  cacheClient: MemoryCacheClient;\n\n  static isNotMetaLabelOrServiceName = (label: string) => !/^(__.+__|service_name)$/.test(label);\n\n  static parseLabelsResponse(json: Record<string, any>): Suggestions {\n    if (!Array.isArray(json.names)) {\n      return [];\n    }\n\n    const uniqueLabels: string[] = Array.from(new Set(json.names.filter(LabelsRepository.isNotMetaLabelOrServiceName)));\n\n    return uniqueLabels.map((label) => ({ value: label, label }));\n  }\n\n  static parseLabelValuesResponse(json: Record<string, any>): Suggestions {\n    if (!Array.isArray(json.names)) {\n      return [];\n    }\n\n    const labelValues: string[] = json.names;\n\n    return labelValues.map((label) => ({ value: label, label }));\n  }\n\n  constructor(options: { apiClient: LabelsApiClient; cacheClient: MemoryCacheClient }) {\n    super({ apiClient: options.apiClient });\n\n    this.cacheClient = options.cacheClient;\n  }\n\n  static assertParams(query: string, from: number, to: number) {\n    invariant(Boolean(query), 'Missing \"query\" parameter!');\n    invariant(from > 0 && to > 0 && to > from, 'Invalid timerange!');\n  }\n\n  async listLabels({ query, from, to }: ListLabelsOptions): Promise<Suggestions> {\n    LabelsRepository.assertParams(query, from, to);\n\n    const cacheParams = [this.apiClient!.baseUrl, query, from, to];\n\n    const labelsFromCacheP = this.cacheClient.get(cacheParams);\n    if (labelsFromCacheP) {\n      const json = await labelsFromCacheP;\n      const labels = LabelsRepository.parseLabelsResponse(json);\n\n      if (!labels.length) {\n        this.cacheClient.delete(cacheParams);\n      }\n\n      return labels;\n    }\n\n    const fetchP = this.apiClient!.fetchLabels(query, from, to);\n    this.cacheClient.set(cacheParams, fetchP);\n\n    try {\n      const json = await fetchP;\n      return LabelsRepository.parseLabelsResponse(json);\n    } catch (error) {\n      this.cacheClient.delete(cacheParams);\n      throw error;\n    }\n  }\n\n  async listLabelValues({ label, query, from, to }: ListLabelValuesOptions): Promise<Suggestions> {\n    LabelsRepository.assertParams(query, from, to);\n    invariant(Boolean(label), 'Missing label value!');\n\n    const cacheParams = [this.apiClient!.baseUrl, label, query, from, to];\n\n    const labelValuesFromCacheP = this.cacheClient.get(cacheParams);\n    if (labelValuesFromCacheP) {\n      const json = await labelValuesFromCacheP;\n      const labelValues = LabelsRepository.parseLabelsResponse(json);\n\n      if (!labelValues.length) {\n        this.cacheClient.delete(cacheParams);\n      }\n\n      return labelValues;\n    }\n\n    const fetchP = this.apiClient!.fetchLabelValues(label, query, from, to);\n    this.cacheClient.set(cacheParams, fetchP);\n\n    try {\n      const json = await fetchP;\n      return LabelsRepository.parseLabelValuesResponse(json);\n    } catch (error) {\n      this.cacheClient.delete(cacheParams);\n      throw error;\n    }\n  }\n}\n\nexport const labelsRepository = new LabelsRepository({\n  apiClient: new LabelsApiClient(),\n  cacheClient: new MemoryCacheClient(),\n});\n","import { FilterKind, Filters } from '../types';\n\nexport function areFiltersEqual(newFilters: Filters, previousFilters: Filters): boolean {\n  const newFiltersWithoutPartial = newFilters.filter(({ type }) => type !== FilterKind.partial);\n  const previousFiltersWithoutPartial = previousFilters.filter(({ type }) => type !== FilterKind.partial);\n\n  return (\n    newFiltersWithoutPartial.length === previousFiltersWithoutPartial.length &&\n    newFiltersWithoutPartial.every((filter) =>\n      previousFiltersWithoutPartial.find(\n        ({ type, attribute, operator, value }) =>\n          type === filter.type &&\n          attribute.value === filter.attribute.value &&\n          operator?.value === filter.operator?.value &&\n          value?.value === filter.value?.value\n      )\n    )\n  );\n}\n","import { Filter, FilterKind, OperatorKind } from '../types';\n\nconst IsEmptyFilter = {\n  type: FilterKind['attribute-operator'],\n  operator: {\n    value: OperatorKind['is-empty'],\n    label: 'is empty',\n  },\n  value: {\n    value: OperatorKind['is-empty'],\n    label: '',\n  },\n};\n\nexport const buildIsEmptyFilter = (filter: Filter) => ({ ...filter, ...IsEmptyFilter });\n","import { CompleteFilter, FilterKind, Filters, OperatorKind } from '../types';\n\nexport function filtersToQuery(query: string, filters: Filters) {\n  const labelsList = filters\n    .filter(({ type }) => type !== FilterKind.partial)\n    .map((filter) => {\n      const { attribute, operator, value } = filter as CompleteFilter;\n\n      switch (operator.value) {\n        case OperatorKind.in:\n          return `${attribute.value}=~\"${value.value}\"`;\n\n        case OperatorKind['not-in']:\n          return `${attribute.value}!~\"${value.value}\"`;\n\n        case OperatorKind['is-empty']:\n          return `${attribute.value}=\"\"`;\n\n        default:\n          return `${attribute.value}${operator.value}\"${value.value}\"`;\n      }\n    });\n\n  const [, serviceNameLabel] = query.match(/{.*(service_name=\"[^\"]*\").*}/) ?? [];\n\n  if (serviceNameLabel) {\n    labelsList.unshift(serviceNameLabel);\n  }\n\n  return query.replace(/{(.*)}$/, `{${labelsList.join(',')}}`);\n}\n","import { Filter, Filters } from '../types';\n\nexport const getLastFilter = (filters: Filters): Filter | null => filters.at(-1) || null;\n","import { OperatorKind } from '../types';\n\nexport const isMultipleValuesOperator = (operator: string | OperatorKind) =>\n  operator === OperatorKind['in'] || operator === OperatorKind['not-in'];\n","import { invariant } from '../../../../types/helpers/invariant';\nimport { Filter, FilterKind } from '../types';\n\nexport const isPartialFilter = (filter: Filter): boolean => {\n  invariant(Boolean(filter), 'The filter is falsy!');\n\n  return filter.type === FilterKind.partial;\n};\n","import { invariant } from '../../../../types/helpers/invariant';\nimport { Filter, OperatorKind } from '../types';\n\n/**\n * Determines if we switch from strict operators (=, !=) to loose ones (=~)\n *\n * This is used when/after editing a filter:\n * - to determine to which state to transition to (see states/loadOperators.ts and domain/guards.ts)\n * - to set the correct edition data after the switch (see domain/actions.ts - editFilterOperator)\n *\n * Returns true when the value should be edited after the switch\n */\nexport function isEditingOperatorMode(currentOperator: string, newOperator: string) {\n  if (currentOperator === newOperator) {\n    return false;\n  }\n\n  if (newOperator === OperatorKind['is-empty']) {\n    return false;\n  }\n\n  return (\n    [\n      OperatorKind['=~'],\n      OperatorKind['!~'],\n      OperatorKind['in'],\n      OperatorKind['not-in'],\n      OperatorKind['is-empty'],\n    ].includes(currentOperator as OperatorKind) ||\n    [OperatorKind['=~'], OperatorKind['!~'], OperatorKind['in'], OperatorKind['not-in']].includes(\n      newOperator as OperatorKind\n    )\n  );\n}\n\nexport function isSwitchingOperatorMode(filterUnderEdition: Filter, newOperator: string) {\n  invariant(typeof filterUnderEdition.operator !== 'undefined', 'No operator for the filter under edition!');\n\n  const currentOperator = filterUnderEdition.operator.value;\n\n  return isEditingOperatorMode(currentOperator, newOperator);\n}\n","import { nanoid } from 'nanoid';\n\nimport { FilterKind, Filters, OperatorKind } from '../types';\nimport { buildIsEmptyFilter } from './buildIsEmptyFilter';\n\nconst parseRawFilters = (rawFilters: string): string[][] => {\n  const matches = rawFilters.matchAll(/(\\w+)(=|!=|=~|!~)\"([^\"]*)\"/g);\n  return Array.from(matches).map(([, attribute, operator, value]) => [attribute, operator, value]);\n};\n\nconst LABELS_REGEX = /.+:[^{]+\\{(.+)\\}$/;\nconst REGEX_CHARS_REGEX = /.*(\\^|\\$|\\*|\\+|\\{|\\}|\\?).*/;\n\n// eslint-disable-next-line sonarjs/cognitive-complexity\nexport function queryToFilters(query: string): Filters {\n  // 'process_cpu:cpu:nanoseconds:cpu:nanoseconds{service_name=\"ebpf/gcp-logs-ops/grafana-agent\", namespace=\"gcp-logs-ops\"}'\n  if (!query) {\n    return [];\n  }\n\n  const rawLabels = query.match(LABELS_REGEX);\n  // [_, 'service_name=\"ebpf/gcp-logs-ops/grafana-agent\", namespace=\"gcp-logs-ops\"']\n  if (!rawLabels) {\n    return [];\n  }\n\n  const rawFilters = parseRawFilters(rawLabels[1]);\n\n  // [[service_name, =, ebpf/gcp-logs-ops/grafana-agent], [namespace, =, gcp-logs-ops]]\n\n  return (rawFilters as string[][])\n    .filter(([attribute]) => attribute !== 'service_name')\n    .map(([attribute, operator, value]) => {\n      const filter = {\n        id: nanoid(10),\n        type: FilterKind['attribute-operator-value'],\n        active: true,\n        attribute: { value: attribute, label: attribute },\n        operator: { value: operator, label: operator },\n        value: { value: value, label: value },\n      };\n\n      const shouldConvertToIsEmptyOperator = operator === OperatorKind['='] && value === '';\n      if (shouldConvertToIsEmptyOperator) {\n        return buildIsEmptyFilter(filter);\n      }\n\n      const shouldConvertToInNotInOperator =\n        [OperatorKind['=~'], OperatorKind['!~']].includes(operator as OperatorKind) && !REGEX_CHARS_REGEX.test(value);\n\n      if (shouldConvertToInNotInOperator) {\n        return {\n          ...filter,\n          operator:\n            operator === OperatorKind['=~']\n              ? { value: OperatorKind.in, label: 'in' }\n              : { value: OperatorKind['not-in'], label: 'not in' },\n          value: {\n            value: value,\n            label: value\n              .split('|')\n              .map((v) => v.trim())\n              .join(', '),\n          },\n        };\n      }\n\n      return filter;\n    });\n}\n","import { FilterKind, Filters } from '../types';\n\nexport const toggleCompleteFilters = (filters: Filters, active: boolean): Filters =>\n  filters.map((filter) => (filter.type !== FilterKind.partial ? { ...filter, active } : filter)) as Filters;\n","import { nanoid } from 'nanoid';\nimport { assign } from 'xstate';\n\nimport { LabelsApiClient } from '../../../../pages/ProfilesExplorerView/infrastructure/labels/http/LabelsApiClient';\nimport { labelsRepository } from '../../../infrastructure/labels/labelsRepository';\nimport { areFiltersEqual } from './helpers/areFiltersEqual';\nimport { buildIsEmptyFilter } from './helpers/buildIsEmptyFilter';\nimport { filtersToQuery } from './helpers/filtersToQuery';\nimport { getLastFilter } from './helpers/getLastFilter';\nimport { isMultipleValuesOperator } from './helpers/isMultipleValuesOperator';\nimport { isPartialFilter } from './helpers/isPartialFilter';\nimport { isEditingOperatorMode } from './helpers/isSwitchingOperatorMode';\nimport { queryToFilters } from './helpers/queryToFilters';\nimport { toggleCompleteFilters } from './helpers/toggleCompleteFilters';\nimport {\n  ChangeInputParamsEvent,\n  EditEvent,\n  FilterKind,\n  FilterPartKind,\n  Filters,\n  OperatorKind,\n  QueryBuilderContext,\n  RemoveFilterEvent,\n  SelectEvent,\n} from './types';\n\nfunction updateFiltersAndQuery(newFilters: Filters, context: QueryBuilderContext) {\n  const isQueryUpToDate = areFiltersEqual(newFilters, queryToFilters(context.inputParams.query));\n\n  return {\n    filters: isQueryUpToDate ? toggleCompleteFilters(newFilters, true) : newFilters,\n    query: filtersToQuery(context.query, newFilters),\n    isQueryUpToDate,\n  };\n}\n\nexport const actions: any = {\n  cancelAllLoad: () => {\n    labelsRepository.cancel('Discarded by user');\n  },\n  // FILTER ATTRIBUTES\n  setFilterAttribute: assign((context: QueryBuilderContext, event: SelectEvent) => {\n    const newFilters = [\n      ...context.filters,\n      { id: nanoid(10), type: FilterKind.partial, active: false, attribute: event.data },\n    ] as Filters;\n\n    return {\n      ...context,\n      filters: newFilters,\n      isQueryUpToDate: areFiltersEqual(newFilters, queryToFilters(context.inputParams.query)),\n    };\n  }),\n  editFilterAttribute: assign((context: QueryBuilderContext, event: SelectEvent) => {\n    if (context.edition === null) {\n      throw new Error('Cannot edit filter attribute without edition data!');\n    }\n\n    const { filterId } = context.edition;\n\n    const newFilters = context.filters.map((filter) =>\n      filter.id === filterId\n        ? {\n            ...filter,\n            attribute: event.data,\n            operator: undefined,\n            value: undefined,\n          }\n        : filter\n    ) as Filters;\n\n    return {\n      ...context,\n      filters: newFilters,\n      // note: we can only edit the attribute of partial filters, so no need to rebuild the query here\n      isQueryUpToDate: areFiltersEqual(newFilters, queryToFilters(context.inputParams.query)),\n      edition: null,\n    };\n  }),\n  // FILTER OPERATORS\n  setFilterOperator: assign((context: QueryBuilderContext, event: SelectEvent) => {\n    const newFilters = context.filters.map((filter) => {\n      if (!isPartialFilter(filter)) {\n        return filter;\n      }\n\n      const newOperator = event.data;\n\n      if (newOperator.value === OperatorKind['is-empty']) {\n        return buildIsEmptyFilter(filter);\n      }\n\n      return {\n        ...filter,\n        operator: newOperator,\n        value: undefined,\n      };\n    }) as Filters;\n\n    return {\n      ...context,\n      ...updateFiltersAndQuery(newFilters, context),\n    };\n  }),\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n  editFilterOperator: assign((context: QueryBuilderContext, event: SelectEvent) => {\n    if (context.edition === null) {\n      throw new Error('Cannot edit filter operator without edition data!');\n    }\n\n    const { filterId } = context.edition;\n    const newOperator = event.data;\n    let newEdition = null;\n\n    const newFilters = context.filters.map((filter) => {\n      const previousOperator = filter.operator!.value;\n\n      if (filter.id !== filterId || previousOperator === newOperator.value) {\n        return filter;\n      }\n\n      if (newOperator.value === OperatorKind['is-empty']) {\n        return buildIsEmptyFilter({\n          ...filter,\n          active: false,\n        });\n      }\n\n      if (previousOperator === OperatorKind['is-empty']) {\n        filter.value = { value: '(no value)', label: '(no value)' };\n      }\n\n      if (!isPartialFilter(filter) && isEditingOperatorMode(previousOperator, newOperator.value)) {\n        newEdition = { ...context.edition, part: FilterPartKind.value };\n      }\n\n      return {\n        ...filter,\n        operator: newOperator,\n        value:\n          isMultipleValuesOperator(previousOperator) && !isMultipleValuesOperator(newOperator.value) && filter.value\n            ? {\n                value: filter.value.value.split('|').shift(),\n                label: filter.value.label.split(', ').shift(),\n              }\n            : filter.value,\n        active: false,\n      };\n    }) as Filters;\n\n    return {\n      ...context,\n      ...updateFiltersAndQuery(newFilters, context),\n      edition: newEdition,\n    };\n  }),\n  // FILTER VALUES\n  setFilterValue: assign((context: QueryBuilderContext, event: SelectEvent) => {\n    const newFilters = context.filters.map((filter) =>\n      isPartialFilter(filter)\n        ? {\n            ...filter,\n            type: FilterKind['attribute-operator-value'],\n            active: false,\n            value: event.data,\n          }\n        : filter\n    ) as Filters;\n\n    return {\n      ...context,\n      ...updateFiltersAndQuery(newFilters, context),\n    };\n  }),\n  editFilterValue: assign((context: QueryBuilderContext, event: SelectEvent) => {\n    if (context.edition === null) {\n      throw new Error('Cannot edit filter value without edition data!');\n    }\n\n    const { filterId } = context.edition;\n\n    const newFilters = context.filters.map((filter) =>\n      filter.id === filterId\n        ? {\n            ...filter,\n            type: FilterKind['attribute-operator-value'],\n            active: false,\n            value: event.data,\n          }\n        : filter\n    ) as Filters;\n\n    return {\n      ...context,\n      ...updateFiltersAndQuery(newFilters, context),\n      edition: null,\n    };\n  }),\n  // FILTER REMOVAL\n  removeFilter: assign((context: QueryBuilderContext, event: RemoveFilterEvent) => {\n    const filterId = event.data;\n    const newFilters = toggleCompleteFilters(context.filters.filter(({ id }) => id !== filterId) as Filters, false);\n\n    return {\n      ...context,\n      ...updateFiltersAndQuery(newFilters, context),\n    };\n  }),\n  removeLastFilter: assign((context: QueryBuilderContext) => {\n    const { filters } = context;\n\n    const lastFilter = getLastFilter(filters);\n    if (!lastFilter) {\n      return context;\n    }\n\n    if (isPartialFilter(lastFilter) && lastFilter.operator) {\n      const newFilters = filters.slice(0, filters.length - 1).concat({ ...lastFilter, operator: undefined }) as Filters;\n\n      return {\n        ...context,\n        filters: newFilters,\n        // query doesn't have to change\n        isQueryUpToDate: true,\n      };\n    }\n\n    const newFilters = filters.slice(0, filters.length - 1).map((filter) => ({ ...filter, active: false })) as Filters;\n\n    return {\n      ...context,\n      ...updateFiltersAndQuery(newFilters, context),\n    };\n  }),\n  // MISC\n  setEdition: assign({ edition: (context, event: EditEvent) => event.data }),\n  changeInputParams: assign((context: QueryBuilderContext, event: ChangeInputParamsEvent) => {\n    // TODO: remove this condition after migrating the legacy comparison pages to Scenes\n    // because dataSourceUid will always be provided\n    if (event.data.dataSourceUid) {\n      labelsRepository.setApiClient(new LabelsApiClient({ dataSourceUid: event.data.dataSourceUid }));\n    }\n\n    return {\n      inputParams: event.data,\n      query: event.data.query,\n      // See also buildStateMachine() in domain/stateMachine.ts\n      filters: queryToFilters(event.data.query),\n      isQueryUpToDate: true,\n    };\n  }),\n  activateFilters: assign((context: QueryBuilderContext) => ({\n    ...context,\n    ...updateFiltersAndQuery(context.filters, context),\n  })),\n};\n","import { invariant } from '../../../../types/helpers/invariant';\nimport { Filter, QueryBuilderContext } from '../types';\n\nexport function getFilterUnderEdition(context: QueryBuilderContext): Filter {\n  const { edition, filters } = context;\n\n  invariant(edition !== null, '\"edition\" is null!');\n\n  const filter = filters.find(({ id }) => id === edition.filterId);\n\n  invariant(filter !== undefined, 'Cannot find the filter under edition!');\n\n  return filter;\n}\n","import { getFilterUnderEdition } from './helpers/getFilterUnderEdition';\nimport { getLastFilter } from './helpers/getLastFilter';\nimport { isPartialFilter } from './helpers/isPartialFilter';\nimport { isSwitchingOperatorMode } from './helpers/isSwitchingOperatorMode';\nimport { EditEvent, FilterPartKind, QueryBuilderContext, QueryBuilderEvent, SelectEvent } from './types';\n\ntype CondFn<TContext, TEvent> = (context: TContext, event: TEvent) => boolean;\ntype Guards<TContext, TEvent> = Record<string, CondFn<TContext, TEvent>>;\n\nexport const guards: Guards<QueryBuilderContext, QueryBuilderEvent> = {\n  shouldSuggestAttributes: (context) => {\n    const lastFilter = getLastFilter(context.filters);\n    return !lastFilter || !isPartialFilter(lastFilter);\n  },\n  shouldSuggestOperators: (context) => {\n    return !getLastFilter(context.filters)?.operator;\n  },\n  shouldSuggestValues: (context) => {\n    const lastFilter = getLastFilter(context.filters);\n    return Boolean(lastFilter?.operator && !lastFilter?.value);\n  },\n  // edition only\n  isEditing: (context) => context.edition !== null,\n  shouldSuggestValuesAfterOperatorEdition: (context, event) => {\n    if (!context.edition) {\n      return false;\n    }\n\n    return isSwitchingOperatorMode(getFilterUnderEdition(context), (event as SelectEvent).data.value);\n  },\n  shouldNotSuggestValuesAfterOperatorEdition: (context, event) => {\n    if (!context.edition) {\n      return false;\n    }\n\n    return !isSwitchingOperatorMode(getFilterUnderEdition(context), (event as SelectEvent).data.value);\n  },\n  // after completion\n  hasPartialFilter: (context) => {\n    const lastFilter = getLastFilter(context.filters);\n    return Boolean(lastFilter && isPartialFilter(lastFilter));\n  },\n  shouldEditAttribute: (context, event) => (event as EditEvent).data.part === FilterPartKind.attribute,\n  shouldEditOperator: (context, event) => (event as EditEvent).data.part === FilterPartKind.operator,\n  shouldEditValue: (context, event) => (event as EditEvent).data.part === FilterPartKind.value,\n};\n","import { Suggestions } from '../domain/types';\n\nclass OperatorsRepository {\n  async list(): Promise<Suggestions> {\n    return [\n      { value: '=', label: '=' },\n      { value: '!=', label: '!=' },\n      { value: 'is-empty', label: 'is empty' },\n      { value: 'in', label: 'in', description: 'Is one of' },\n      { value: 'not-in', label: 'not in', description: 'Is not one of' },\n      { value: '=~', label: '=~', description: 'Matches regex' },\n      { value: '!~', label: '!~', description: 'Does not match regex' },\n    ];\n  }\n}\n\nexport const operatorsRepository = new OperatorsRepository();\n","export const isPrivateLabel = (label: string) => label.startsWith('__');\n","import { logger } from '@shared/infrastructure/tracking/logger';\n\nimport { labelsRepository } from '../../../infrastructure/labels/labelsRepository';\nimport { operatorsRepository } from '../infrastructure/operatorsRepository';\nimport { filtersToQuery } from './helpers/filtersToQuery';\nimport { getLastFilter } from './helpers/getLastFilter';\nimport { isPrivateLabel } from './helpers/isPrivateLabel';\nimport { FilterKind, Filters, QueryBuilderContext, QueryBuilderEvent, Suggestions } from './types';\n\ntype ServiceFn<TContext, TEvent> = (context: TContext, event: TEvent) => Promise<Suggestions | Error>;\ntype Services<TContext, TEvent> = Record<string, ServiceFn<TContext, TEvent>>;\n\nfunction handleError(error: Error, info: string) {\n  const isAbortError = error instanceof DOMException && error.name === 'AbortError';\n  if (isAbortError) {\n    return [];\n  }\n\n  logger.error(error, { info });\n  throw error;\n}\n\nexport const services: Services<QueryBuilderContext, QueryBuilderEvent> = {\n  fetchLabels: async (context) => {\n    const { from, to } = context.inputParams;\n\n    try {\n      const labels = await labelsRepository.listLabels({ query: context.query, from, to });\n\n      const publicLabels: Suggestions = [];\n      const privateLabels: Suggestions = [];\n\n      // place private labels at the bottom of the suggestions list\n      labels.forEach((label) => {\n        if (isPrivateLabel(label.value)) {\n          privateLabels.push(label);\n        } else {\n          publicLabels.push(label);\n        }\n      });\n\n      return [...publicLabels, ...privateLabels];\n    } catch (error) {\n      return handleError(error as Error, 'Error while fetching labels!');\n    }\n  },\n  fetchOperators: async () => {\n    try {\n      return await operatorsRepository.list();\n    } catch (error) {\n      return handleError(error as Error, 'Error while fetching operators!');\n    }\n  },\n  // TODO: refactor indeed\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n  fetchLabelValues: async (context) => {\n    let { query, edition, suggestions } = context;\n    let targetFilter;\n\n    try {\n      if (edition) {\n        const filters = context.filters.filter((filter) => {\n          if (filter.id === edition!.filterId) {\n            targetFilter = filter;\n            return false;\n          }\n\n          return true;\n        }) as Filters;\n\n        if (!targetFilter) {\n          throw new Error(`Impossible to edit filter id=\"${edition.filterId}\": no filter found!`);\n        }\n\n        query = filtersToQuery(query, filters);\n      } else {\n        targetFilter = getLastFilter(context.filters);\n\n        if (targetFilter?.type !== FilterKind.partial) {\n          throw new Error('Impossible to load label values: no partial filter found!');\n        }\n      }\n\n      if (suggestions.disabled) {\n        return [];\n      }\n\n      const labelId = targetFilter.attribute.value;\n      const { from, to } = context.inputParams;\n\n      return await labelsRepository.listLabelValues({ label: labelId, query, from, to });\n    } catch (error) {\n      return handleError(error as Error, 'Error while fetching label values!');\n    }\n  },\n};\n","import { State, StateNodeConfig } from 'xstate';\n\nimport { QueryBuilderContext, QueryBuilderEvent } from '../types';\n\nexport const autoSuggestProxy: StateNodeConfig<\n  QueryBuilderContext,\n  State<QueryBuilderContext, QueryBuilderEvent>,\n  QueryBuilderEvent\n> = {\n  // epsilon transition to automatically suggests missing partial filter parts\n  always: [\n    {\n      cond: 'shouldSuggestOperators',\n      target: 'loadOperators',\n    },\n    {\n      cond: 'shouldSuggestValues',\n      target: 'loadLabelValues',\n    },\n    { target: 'idle' },\n  ],\n};\n","export const MESSAGES = {\n  FILTER_ADD: 'Filter by label values...',\n  SELECT_LABEL: 'Select a label...',\n  SELECT_OPERATOR: 'Select an operator...',\n  SELECT_VALUE: 'Select a value...',\n  SELECT_VALUES: 'Select values...',\n  TYPE_VALUE: 'Type a regex...',\n  LOADING: 'Loading...',\n  ERROR_LOAD: 'An unexpected error occurred while loading! Please try again.',\n  SUGGESTIONS_NONE: 'No suggestions available.',\n  SUGGESTIONS_DISABLED: 'Suggestions are disabled for this label.',\n};\n","import { OperatorKind } from '../types';\n\nexport const isRegexOperator = (operator: string | OperatorKind) =>\n  operator === OperatorKind['=~'] || operator === OperatorKind['!~'];\n","import { assign, State, StateNodeConfig } from 'xstate';\n\nimport { MESSAGES } from '../../ui/constants';\nimport { getLastFilter } from '../helpers/getLastFilter';\nimport { isMultipleValuesOperator } from '../helpers/isMultipleValuesOperator';\nimport { isPartialFilter } from '../helpers/isPartialFilter';\nimport { isRegexOperator } from '../helpers/isRegexOperator';\nimport { defaultContext } from '../stateMachine';\nimport { QueryBuilderContext, QueryBuilderEvent } from '../types';\n\nexport const idle: StateNodeConfig<\n  QueryBuilderContext,\n  State<QueryBuilderContext, QueryBuilderEvent>,\n  QueryBuilderEvent\n> = {\n  entry: [\n    'cancelAllLoad',\n    assign({\n      // eslint-disable-next-line sonarjs/cognitive-complexity\n      suggestions: (context) => {\n        let placeholder = MESSAGES.FILTER_ADD;\n        let allowCustomValue = false;\n        const lastFilter = getLastFilter(context.filters);\n\n        if (lastFilter && isPartialFilter(lastFilter)) {\n          if (!lastFilter.operator) {\n            placeholder = MESSAGES.SELECT_OPERATOR;\n          } else {\n            allowCustomValue = isRegexOperator(lastFilter.operator.value);\n\n            placeholder = isMultipleValuesOperator(lastFilter.operator.value)\n              ? MESSAGES.SELECT_VALUES\n              : allowCustomValue\n              ? MESSAGES.TYPE_VALUE\n              : MESSAGES.SELECT_VALUE;\n          }\n        }\n\n        return {\n          ...defaultContext.suggestions,\n          placeholder,\n          allowCustomValue,\n        };\n      },\n      edition: null,\n    }),\n  ],\n  on: {\n    START_INPUT: [\n      {\n        cond: 'shouldSuggestAttributes',\n        target: 'loadLabels',\n      },\n      {\n        cond: 'shouldSuggestOperators',\n        target: 'loadOperators',\n      },\n      {\n        cond: 'shouldSuggestValues',\n        target: 'loadLabelValues',\n      },\n    ],\n    EDIT_FILTER: [\n      {\n        cond: 'shouldEditAttribute',\n        target: 'loadLabels',\n        actions: ['setEdition'],\n      },\n      {\n        cond: 'shouldEditOperator',\n        target: 'loadOperators',\n        actions: ['setEdition'],\n      },\n      {\n        cond: 'shouldEditValue',\n        target: 'loadLabelValues',\n        actions: ['setEdition'],\n      },\n    ],\n    REMOVE_FILTER: [\n      {\n        cond: 'hasPartialFilter',\n        target: 'autoSuggestProxy',\n        actions: ['removeFilter'],\n      },\n      {\n        target: 'idle',\n        actions: ['removeFilter'],\n      },\n    ],\n    REMOVE_LAST_FILTER: {\n      target: 'idle',\n      actions: ['removeLastFilter'],\n    },\n    CHANGE_INPUT_PARAMS: {\n      target: 'idle',\n      actions: ['changeInputParams'],\n    },\n    EXECUTE_QUERY: {\n      target: 'idle',\n      actions: ['activateFilters'],\n    },\n  },\n};\n","import { assign, State, StateNodeConfig } from 'xstate';\n\nimport { MESSAGES } from '../../ui/constants';\nimport { defaultContext } from '../stateMachine';\nimport { QueryBuilderContext, QueryBuilderEvent, SuggestionKind, Suggestions } from '../types';\n\nexport const loadLabels: StateNodeConfig<\n  QueryBuilderContext,\n  State<QueryBuilderContext, QueryBuilderEvent>,\n  QueryBuilderEvent\n> = {\n  entry: assign({\n    suggestions: () => ({\n      ...defaultContext.suggestions,\n      isVisible: true,\n      isLoading: true,\n    }),\n  }),\n  invoke: {\n    id: 'fetchLabels',\n    src: 'fetchLabels',\n    onDone: {\n      target: 'displayLabels',\n      actions: assign({\n        suggestions: (context, event) => ({\n          ...context.suggestions,\n          items: (event.data as Suggestions).filter(\n            ({ value }) => !context.filters.some((filter) => filter.attribute?.value === value)\n          ),\n          isLoading: false,\n        }),\n      }),\n    },\n    onError: {\n      target: 'displayLabels',\n      actions: assign({\n        suggestions: (context, event) => ({\n          ...context.suggestions,\n          isLoading: false,\n          error: event.data,\n        }),\n      }),\n    },\n  },\n  on: {\n    DISCARD_SUGGESTIONS: 'idle',\n  },\n};\n\nexport const displayLabels: StateNodeConfig<\n  QueryBuilderContext,\n  State<QueryBuilderContext, QueryBuilderEvent>,\n  QueryBuilderEvent\n> = {\n  entry: assign({\n    suggestions: (context) => ({\n      ...context.suggestions,\n      type: SuggestionKind.attribute,\n      isVisible: true,\n      placeholder: MESSAGES.SELECT_LABEL,\n    }),\n  }),\n  on: {\n    DISCARD_SUGGESTIONS: 'idle',\n    SELECT_SUGGESTION: [\n      {\n        cond: 'isEditing',\n        target: 'loadOperators',\n        actions: ['editFilterAttribute'],\n      },\n      {\n        target: 'loadOperators',\n        actions: ['setFilterAttribute'],\n      },\n    ],\n    REMOVE_LAST_FILTER: {\n      target: 'idle',\n      actions: ['removeLastFilter'],\n    },\n  },\n};\n","import { assign, State, StateNodeConfig } from 'xstate';\n\nimport { invariant } from '../../../../types/helpers/invariant';\nimport { MESSAGES } from '../../ui/constants';\nimport { getFilterUnderEdition } from '../helpers/getFilterUnderEdition';\nimport { getLastFilter } from '../helpers/getLastFilter';\nimport { isMultipleValuesOperator } from '../helpers/isMultipleValuesOperator';\nimport { isPrivateLabel } from '../helpers/isPrivateLabel';\nimport { isRegexOperator } from '../helpers/isRegexOperator';\nimport { defaultContext } from '../stateMachine';\nimport { QueryBuilderContext, QueryBuilderEvent, SuggestionKind } from '../types';\n\nexport const loadLabelValues: StateNodeConfig<\n  QueryBuilderContext,\n  State<QueryBuilderContext, QueryBuilderEvent>,\n  QueryBuilderEvent\n> = {\n  entry: assign({\n    suggestions: (context) => {\n      const targetFilter = context.edition ? getFilterUnderEdition(context) : getLastFilter(context.filters);\n\n      invariant(typeof targetFilter?.operator !== undefined, 'No operator for the target filter!');\n\n      return {\n        ...defaultContext.suggestions,\n        disabled:\n          // don't fetch for these operators, an input will appear in the UI instead of a select\n          ['=~', '!~'].includes(targetFilter!.operator!.value) ||\n          // See https://github.com/grafana/pyroscope-app-plugin/issues/335\n          isPrivateLabel(targetFilter!.attribute!.value),\n        isVisible: true,\n        isLoading: true,\n      };\n    },\n  }),\n  invoke: {\n    id: 'fetchLabelValues',\n    src: 'fetchLabelValues',\n    onDone: {\n      target: 'displayLabelValues',\n      actions: assign({\n        suggestions: (context, event) => ({\n          ...context.suggestions,\n          items: event.data,\n          isLoading: false,\n        }),\n      }),\n    },\n    onError: {\n      target: 'displayLabelValues',\n      actions: assign({\n        suggestions: (context, event) => ({\n          ...context.suggestions,\n          items: [],\n          isLoading: false,\n          error: event.data,\n        }),\n      }),\n    },\n  },\n  on: {\n    DISCARD_SUGGESTIONS: 'idle',\n  },\n};\n\nexport const displayLabelValues: StateNodeConfig<\n  QueryBuilderContext,\n  State<QueryBuilderContext, QueryBuilderEvent>,\n  QueryBuilderEvent\n> = {\n  entry: assign({\n    // eslint-disable-next-line sonarjs/cognitive-complexity\n    suggestions: (context) => {\n      const targetFilter = context.edition ? getFilterUnderEdition(context) : getLastFilter(context.filters);\n\n      invariant(typeof targetFilter?.operator !== undefined, 'No operator for the target filter!');\n\n      const targetOperator = targetFilter!.operator!.value;\n\n      const allowCustomValue =\n        isRegexOperator(targetOperator) ||\n        // See https://github.com/grafana/pyroscope-app-plugin/issues/335\n        context.suggestions.disabled;\n\n      const multiple = isMultipleValuesOperator(targetOperator);\n\n      let placeholder: string;\n\n      if (allowCustomValue) {\n        placeholder = MESSAGES.TYPE_VALUE;\n      } else {\n        placeholder = multiple ? MESSAGES.SELECT_VALUES : MESSAGES.SELECT_VALUE;\n      }\n\n      let noOptionsMessage: string;\n\n      if (context.suggestions.error) {\n        noOptionsMessage = MESSAGES.ERROR_LOAD;\n      } else {\n        noOptionsMessage = context.suggestions.disabled ? MESSAGES.SUGGESTIONS_DISABLED : MESSAGES.SUGGESTIONS_NONE;\n      }\n\n      return {\n        ...context.suggestions,\n        type: SuggestionKind.value,\n        isVisible: true,\n        placeholder,\n        noOptionsMessage,\n        allowCustomValue,\n        multiple,\n      };\n    },\n  }),\n  on: {\n    DISCARD_SUGGESTIONS: 'idle',\n    SELECT_SUGGESTION: [\n      {\n        cond: 'isEditing',\n        target: 'autoSuggestProxy',\n        actions: ['editFilterValue'],\n      },\n      {\n        target: 'idle',\n        actions: ['setFilterValue'],\n      },\n    ],\n    REMOVE_LAST_FILTER: {\n      target: 'loadOperators',\n      actions: ['removeLastFilter'],\n    },\n  },\n};\n","import { assign, State, StateNodeConfig } from 'xstate';\n\nimport { MESSAGES } from '../../ui/constants';\nimport { defaultContext } from '../stateMachine';\nimport { QueryBuilderContext, QueryBuilderEvent, SuggestionKind } from '../types';\n\nexport const loadOperators: StateNodeConfig<\n  QueryBuilderContext,\n  State<QueryBuilderContext, QueryBuilderEvent>,\n  QueryBuilderEvent\n> = {\n  entry: assign({\n    suggestions: () => ({\n      ...defaultContext.suggestions,\n      isVisible: true,\n      isLoading: true,\n    }),\n  }),\n  invoke: {\n    id: 'fetchOperators',\n    src: 'fetchOperators',\n    onDone: {\n      target: 'displayOperators',\n      actions: assign({\n        suggestions: (context, event) => ({\n          ...context.suggestions,\n          items: event.data,\n          isLoading: false,\n        }),\n      }),\n    },\n    onError: {\n      target: 'displayOperators',\n      actions: assign({\n        suggestions: (context, event) => ({\n          ...context.suggestions,\n          items: [],\n          isLoading: false,\n          error: event.data,\n        }),\n      }),\n    },\n  },\n  on: {\n    DISCARD_SUGGESTIONS: 'idle',\n  },\n};\n\nexport const displayOperators: StateNodeConfig<\n  QueryBuilderContext,\n  State<QueryBuilderContext, QueryBuilderEvent>,\n  QueryBuilderEvent\n> = {\n  entry: assign({\n    suggestions: (context) => ({\n      ...context.suggestions,\n      type: SuggestionKind.operator,\n      isVisible: true,\n      placeholder: MESSAGES.SELECT_OPERATOR,\n      allowCustomValue: false,\n      multiple: false,\n    }),\n  }),\n  on: {\n    DISCARD_SUGGESTIONS: 'idle',\n    SELECT_SUGGESTION: [\n      // edition\n      {\n        cond: 'shouldSuggestValuesAfterOperatorEdition',\n        target: 'loadLabelValues',\n        actions: ['editFilterOperator'],\n      },\n      {\n        cond: 'shouldNotSuggestValuesAfterOperatorEdition',\n        target: 'autoSuggestProxy',\n        actions: ['editFilterOperator'],\n      },\n      // no edition\n      {\n        cond: 'hasPartialFilter',\n        target: 'autoSuggestProxy',\n        actions: ['setFilterOperator'],\n      },\n      {\n        target: 'loadLabelValues',\n        actions: ['setFilterOperator'],\n      },\n    ],\n    REMOVE_LAST_FILTER: {\n      target: 'loadLabels',\n      actions: ['removeLastFilter'],\n    },\n  },\n};\n","import { createMachine, interpret, Interpreter, type MachineConfig, type MachineOptions } from 'xstate';\n\nimport { actions } from './actions';\nimport { guards } from './guards';\nimport { queryToFilters } from './helpers/queryToFilters';\nimport { services } from './services';\nimport { autoSuggestProxy } from './states/autoSuggestProxy';\nimport { idle } from './states/idle';\nimport { displayLabels, loadLabels } from './states/loadLabels';\nimport { displayLabelValues, loadLabelValues } from './states/loadLabelValues';\nimport { displayOperators, loadOperators } from './states/loadOperators';\nimport { InputParams, QueryBuilderContext, QueryBuilderEvent, QueryBuilderSchema } from './types';\n\nexport const defaultContext: QueryBuilderContext = Object.freeze({\n  inputParams: {\n    query: '',\n    from: 0,\n    to: 0,\n  },\n  query: '',\n  filters: [],\n  isQueryUpToDate: true,\n  edition: null,\n  suggestions: {\n    type: null,\n    items: [],\n    isVisible: false,\n    isLoading: false,\n    error: null,\n    placeholder: '',\n    noOptionsMessage: '',\n    allowCustomValue: false,\n    multiple: false,\n    disabled: false,\n  },\n});\n\nconst config = (\n  context: QueryBuilderContext\n): MachineConfig<QueryBuilderContext, QueryBuilderSchema, QueryBuilderEvent> => ({\n  id: 'query-builder',\n  initial: 'idle',\n  context,\n  predictableActionArguments: true,\n  states: {\n    idle,\n    loadLabels,\n    displayLabels,\n    loadOperators,\n    displayOperators,\n    loadLabelValues,\n    displayLabelValues,\n    autoSuggestProxy,\n  },\n});\n\nconst options: MachineOptions<QueryBuilderContext, QueryBuilderEvent> = {\n  guards,\n  services,\n  actions,\n};\n\nexport type Actor = Interpreter<QueryBuilderContext, QueryBuilderSchema, QueryBuilderEvent>;\n\nexport function buildStateMachine(inputParams: InputParams) {\n  const { query } = inputParams;\n\n  const initialContext: QueryBuilderContext = {\n    ...defaultContext,\n    inputParams,\n    query,\n    // See changeInputParams() in domain/actions.ts\n    filters: queryToFilters(query),\n  };\n\n  const stateMachine = createMachine(config(initialContext), options);\n\n  const actor = interpret(stateMachine) as unknown as Actor;\n\n  return { actor, initialContext };\n}\n","import { css } from '@emotion/css';\nimport { SelectableValue } from '@grafana/data';\nimport { MultiSelect, useStyles2 } from '@grafana/ui';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { Suggestion, Suggestions } from '../../domain/types';\nimport { MESSAGES } from '../constants';\n\ntype MultipleEditionSelectProps = {\n  selection: Suggestion;\n  suggestions: any;\n  onCloseMenu: (values: Suggestions) => void;\n};\n\nconst placeSelectedValuesFirst = (values: Suggestions) => (a: Suggestion, b: Suggestion) => {\n  const aIsSelected = values.some((v) => v.value === a.value);\n  const bIsSelected = values.some((v) => v.value === b.value);\n\n  if (aIsSelected && bIsSelected) {\n    return a.value.localeCompare(b.value);\n  }\n\n  if (bIsSelected) {\n    return +1;\n  }\n\n  if (aIsSelected) {\n    return -1;\n  }\n\n  return 0;\n};\n\nexport function MultipleEditionSelect({ selection, suggestions, onCloseMenu }: MultipleEditionSelectProps) {\n  const styles = useStyles2(getStyles);\n\n  const defaultValue = useMemo(() => {\n    const selectionValues = selection.value.split('|');\n    const selectionLabels = selection.label.split(', ');\n    return selectionValues.map((v, i) => ({ value: v, label: selectionLabels[i] }));\n  }, [selection]);\n\n  const [values, setValues] = useState<Suggestions>(defaultValue);\n\n  // we don't sort when values change so that, for long lists, the user keeps the context they're in\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const sortedOptions = useMemo(() => suggestions.items.sort(placeSelectedValuesFirst(values)), [suggestions.items]);\n\n  const onChange = useCallback((newValues: Array<SelectableValue<string>>) => {\n    setValues(newValues.map(({ value = '', label = '' }) => ({ value, label })));\n  }, []);\n\n  const onInternalCloseMenu = useCallback(() => {\n    onCloseMenu(values);\n  }, [onCloseMenu, values]);\n\n  return (\n    <MultiSelect\n      className={styles.editionSelect}\n      placeholder={suggestions.placeholder}\n      loadingMessage={MESSAGES.LOADING}\n      closeMenuOnSelect={false}\n      hideSelectedOptions={false}\n      backspaceRemovesValue\n      // auto focus required when switching from another operator type\n      autoFocus\n      value={values}\n      onChange={onChange}\n      onCloseMenu={onInternalCloseMenu}\n      options={sortedOptions}\n      isOpen\n      isLoading={suggestions.isLoading}\n      invalid={Boolean(suggestions.error)}\n      noOptionsMessage={suggestions.noOptionsMessage}\n    />\n  );\n}\n\nconst getStyles = () => ({\n  editionSelect: css`\n    position: absolute;\n    z-index: 1;\n\n    [aria-label='Remove'] svg {\n      display: none;\n    }\n  `,\n});\n","import { css, cx } from '@emotion/css';\nimport { SelectableValue } from '@grafana/data';\nimport { Input, useStyles2 } from '@grafana/ui';\nimport React, { useEffect, useRef, useState } from 'react';\n\ntype SingleEditionInputProps = {\n  placeholder: string;\n  onChange: (suggestion: SelectableValue<string>) => void;\n  onBlur: () => void;\n  defaultValue?: string;\n  onFocus?: () => void;\n};\n\nexport function SingleEditionInput({ placeholder, defaultValue, onFocus, onChange, onBlur }: SingleEditionInputProps) {\n  const styles = useStyles2(getStyles);\n\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [invalid, setInvalid] = useState(false);\n\n  const onKeyUp = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    const value = (e.target as HTMLInputElement).value.trim();\n\n    // TODO: introduce an \"is empty\" value to handle this case (so that the filter will be synced in the URL)?\n    // see https://github.com/grafana/explore-profiles/pull/205\n    if (e.code === 'Enter') {\n      if (value) {\n        onChange({ value, label: value });\n      } else {\n        setInvalid(true);\n      }\n    }\n  };\n\n  const onInternalBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    const value = (e.target as HTMLInputElement).value.trim();\n\n    // TODO: introduce an \"is empty\" value to handle this case (so that the filter will be synced in the URL)?\n    // see https://github.com/grafana/explore-profiles/pull/205\n    if (value) {\n      onChange({ value, label: value });\n    } else {\n      onBlur();\n    }\n  };\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []);\n\n  return (\n    <Input\n      ref={inputRef}\n      className={cx(defaultValue && styles.edition)}\n      invalid={invalid}\n      placeholder={placeholder}\n      defaultValue={defaultValue}\n      onFocus={onFocus}\n      onKeyUp={onKeyUp}\n      onBlur={onInternalBlur}\n    />\n  );\n}\n\nconst getStyles = () => ({\n  edition: css`\n    position: absolute;\n    z-index: 1;\n  `,\n});\n","import { css } from '@emotion/css';\nimport { SelectableValue } from '@grafana/data';\nimport { Select, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { Suggestion } from '../../domain/types';\nimport { MESSAGES } from '../constants';\nimport { SingleEditionInput } from '../inputs/SingleEditionInput';\n\nconst getStyles = () => ({\n  editionSelect: css`\n    position: absolute;\n    z-index: 1;\n    min-width: 160px;\n    box-shadow: none;\n\n    & input:focus {\n      outline: none !important;\n    }\n  `,\n});\n\ntype EditionSelectProps = {\n  selection: Suggestion;\n  suggestions: any;\n  onChange: (suggestion: SelectableValue<string>) => void;\n  onCloseMenu: () => void;\n};\n\nexport function SingleEditionSelect({ selection, suggestions, onChange, onCloseMenu }: EditionSelectProps) {\n  const styles = useStyles2(getStyles);\n\n  if (suggestions.allowCustomValue) {\n    return (\n      <SingleEditionInput\n        defaultValue={selection.value}\n        placeholder={suggestions.placeholder}\n        onChange={onChange}\n        onBlur={onCloseMenu}\n      />\n    );\n  }\n\n  return (\n    <Select\n      className={styles.editionSelect}\n      placeholder={suggestions.placeholder}\n      loadingMessage={MESSAGES.LOADING}\n      closeMenuOnSelect={false}\n      autoFocus\n      value={selection.value}\n      onChange={onChange}\n      onCloseMenu={onCloseMenu}\n      options={suggestions.items}\n      isOpen\n      isLoading={suggestions.isLoading}\n      invalid={Boolean(suggestions.error)}\n      noOptionsMessage={suggestions.noOptionsMessage}\n    />\n  );\n}\n","import { cx } from '@emotion/css';\nimport { Tag, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { CompleteFilter, FilterPartKind } from '../../domain/types';\nimport { getStyles } from './Chiclet';\n\ntype ChicletAttributeOperatorValueProps = {\n  filter: CompleteFilter;\n  onClick: (event: React.MouseEvent<HTMLElement>, filter: CompleteFilter, part: FilterPartKind) => void;\n  onRemove: (event: React.MouseEvent<HTMLElement>, filter: CompleteFilter) => void;\n};\n\nconst noOp = () => {};\n\nexport const ChicletAttributeOperator = ({ filter, onClick, onRemove }: ChicletAttributeOperatorValueProps) => {\n  const styles = useStyles2(getStyles);\n\n  const { attribute, operator, active } = filter;\n  const className = active ? styles.chiclet : cx(styles.chiclet, styles.inactiveChiclet);\n\n  return (\n    <div className={className} aria-label=\"Filter\">\n      <Tag aria-label=\"Filter label\" className={styles.chicletAttribute} name={attribute.label} onClick={noOp} />\n\n      <Tag\n        aria-label=\"Filter operator\"\n        className={styles.chicletOperator}\n        name={operator.label}\n        onClick={(name, e) => onClick(e, filter, FilterPartKind.operator)}\n        tabIndex={0}\n      />\n\n      <Tag\n        aria-label=\"Remove filter\"\n        className={styles.chicletRemoveButton}\n        icon=\"times\"\n        name=\"\"\n        onClick={(name, e) => onRemove(e, filter)}\n        tabIndex={0}\n      />\n    </div>\n  );\n};\n","import { cx } from '@emotion/css';\nimport { Tag, Tooltip, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { CompleteFilter, FilterPartKind } from '../../domain/types';\nimport { getStyles } from './Chiclet';\n\ntype ChicletAttributeOperatorValueProps = {\n  filter: CompleteFilter;\n  onClick: (event: React.MouseEvent<HTMLElement>, filter: CompleteFilter, part: FilterPartKind) => void;\n  onRemove: (event: React.MouseEvent<HTMLElement>, filter: CompleteFilter) => void;\n};\n\nconst noOp = () => {};\n\nexport const ChicletAttributeOperatorValue = ({ filter, onClick, onRemove }: ChicletAttributeOperatorValueProps) => {\n  const styles = useStyles2(getStyles);\n\n  const { attribute, operator, value, active } = filter;\n  const className = active ? styles.chiclet : cx(styles.chiclet, styles.inactiveChiclet);\n\n  return (\n    <div className={className} aria-label=\"Filter\">\n      <Tag aria-label=\"Filter label\" className={styles.chicletAttribute} name={attribute.label} onClick={noOp} />\n\n      <Tag\n        aria-label=\"Filter operator\"\n        className={styles.chicletOperator}\n        name={operator.label}\n        onClick={(name, e) => onClick(e, filter, FilterPartKind.operator)}\n        tabIndex={0}\n      />\n\n      <Tooltip content={value.label}>\n        <Tag\n          aria-label=\"Filter value\"\n          name={value.label}\n          className={styles.chicletValue}\n          onClick={(name, e) => onClick(e, filter, FilterPartKind.value)}\n          tabIndex={0}\n        />\n      </Tooltip>\n\n      <Tag\n        aria-label=\"Remove filter\"\n        className={styles.chicletRemoveButton}\n        icon=\"times\"\n        name=\"\"\n        onClick={(name, e) => onRemove(e, filter)}\n        tabIndex={0}\n      />\n    </div>\n  );\n};\n","import { cx } from '@emotion/css';\nimport { Tag, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { FilterPartKind, PartialFilter } from '../../domain/types';\nimport { getStyles } from './Chiclet';\n\ntype PartialChicletProps = {\n  filter: PartialFilter;\n  onClick: (event: React.MouseEvent<HTMLElement>, filter: PartialFilter, part: FilterPartKind) => void;\n};\n\nexport const PartialChiclet = ({ filter, onClick }: PartialChicletProps) => {\n  const styles = useStyles2(getStyles);\n\n  const { attribute, operator } = filter;\n  if (!attribute && !operator) {\n    return null;\n  }\n\n  return (\n    <div className={cx(styles.chiclet, styles.partialChiclet)} aria-label=\"Partial filter\">\n      <Tag\n        colorIndex={9}\n        name={attribute.label}\n        title={`Edit \"${attribute.label}\"`}\n        onClick={(name, e) => onClick(e, filter, FilterPartKind.attribute)}\n        tabIndex={0}\n      />\n\n      {operator && (\n        <Tag\n          colorIndex={9}\n          name={operator.label}\n          title={`Edit \"${operator.label}\"`}\n          className={styles.chicletOperator}\n          onClick={(name, e) => onClick(e, filter, FilterPartKind.operator)}\n          tabIndex={0}\n        />\n      )}\n    </div>\n  );\n};\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport React, { memo } from 'react';\n\nimport { CompleteFilter, Filter, FilterKind, FilterPartKind } from '../../domain/types';\nimport { ChicletAttributeOperator } from './ChicletAttributeOperator';\nimport { ChicletAttributeOperatorValue } from './ChicletAttributeOperatorValue';\nimport { PartialChiclet } from './PartialChiclet';\n\ntype ChicletProps = {\n  filter: Filter;\n  onClick: (event: React.MouseEvent<HTMLElement>, filter: Filter, part: FilterPartKind) => void;\n  onRemove: (event: React.MouseEvent<HTMLElement>, filter: CompleteFilter) => void;\n};\n\nconst activeBackgroundColor = 'rgb(61, 113, 217)';\nconst activeTextColor = '#fff';\nconst inactiveBorderColor = '#4a4b52';\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  chiclet: css`\n    display: flex;\n    align-items: center;\n    border: 1px solid ${activeBackgroundColor};\n    border-radius: 2px;\n\n    & > button {\n      height: 30px;\n      background-color: ${theme.colors.background.primary};\n      color: ${theme.colors.text.maxContrast};\n    }\n\n    & > :first-child {\n      background-color: ${activeBackgroundColor};\n      color: ${activeTextColor};\n      border-radius: 0;\n\n      &:hover {\n        cursor: not-allowed !important;\n      }\n    }\n\n    & > :last-child {\n      border-left: 1px solid ${activeBackgroundColor};\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n    }\n  `,\n  partialChiclet: css`\n    border-color: ${inactiveBorderColor};\n    border-right: 0;\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n\n    & > :first-child {\n      background-color: ${theme.colors.background.secondary};\n      color: ${theme.colors.text.maxContrast};\n      border-radius: 0;\n      border-left: 0;\n\n      &:hover {\n        cursor: pointer !important;\n      }\n    }\n\n    & > :last-child {\n      border-color: ${inactiveBorderColor};\n      color: ${theme.colors.text.maxContrast};\n    }\n  `,\n  inactiveChiclet: css`\n    border-color: ${inactiveBorderColor};\n\n    & > button {\n      color: ${theme.colors.text.maxContrast};\n    }\n\n    & > :first-child {\n      background-color: ${theme.colors.background.secondary};\n      color: ${theme.colors.text.maxContrast};\n    }\n\n    & > :last-child {\n      border-color: ${inactiveBorderColor};\n    }\n  `,\n  chicletAttribute: css`\n    &:hover {\n      opacity: 1 !important;\n    }\n  `,\n  chicletOperator: css`\n    &:hover {\n      background-color: ${theme.colors.background.secondary};\n    }\n  `,\n  chicletValue: css`\n    flex-grow: 1;\n    text-align: left;\n    max-width: 420px;\n    text-overflow: ellipsis;\n    text-wrap: nowrap;\n    overflow: hidden;\n\n    &:hover {\n      background-color: ${theme.colors.background.secondary};\n    }\n  `,\n  chicletRemoveButton: css`\n    &:hover {\n      background-color: ${theme.colors.background.secondary};\n    }\n\n    & svg {\n      width: 12px;\n      height: 12px;\n    }\n  `,\n});\n\nconst ChicletComponent = ({ filter, onClick, onRemove }: ChicletProps) => {\n  switch (filter.type) {\n    case FilterKind.partial:\n      return <PartialChiclet filter={filter} onClick={onClick} />;\n\n    case FilterKind['attribute-operator-value']:\n      return <ChicletAttributeOperatorValue filter={filter as CompleteFilter} onClick={onClick} onRemove={onRemove} />;\n\n    case FilterKind['attribute-operator']:\n      return <ChicletAttributeOperator filter={filter as CompleteFilter} onClick={onClick} onRemove={onRemove} />;\n\n    default:\n      throw new TypeError(`Unsupported filter type \"${filter.type}\" (${JSON.stringify(filter)})!`);\n  }\n};\n\nexport const Chiclet = memo(\n  ChicletComponent,\n  (prevProps, nextProps) => JSON.stringify(prevProps.filter) === JSON.stringify(nextProps.filter)\n);\n","import { css } from '@emotion/css';\nimport { SelectableValue } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport React, { memo } from 'react';\n\nimport {\n  CompleteFilter,\n  Edition,\n  Filter,\n  FilterPartKind,\n  Filters,\n  QueryBuilderContext,\n  Suggestion,\n  Suggestions,\n} from '../../domain/types';\nimport { MultipleEditionSelect } from '../selects/MultipleEditionSelect';\nimport { SingleEditionSelect } from '../selects/SingleEditionSelect';\nimport { Chiclet } from './Chiclet';\n\nconst getStyles = () => ({\n  chicletsList: css`\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    gap: 4px;\n  `,\n  editChicletContainer: css`\n    position: relative;\n  `,\n});\n\ntype ChicletsListProps = {\n  filters: Filters;\n  onClickChiclet: (event: React.MouseEvent<HTMLElement>, filter: Filter, part: FilterPartKind) => void;\n  onRemoveChiclet: (event: React.MouseEvent<HTMLElement>, filter: CompleteFilter) => void;\n  edition: Edition | null;\n  suggestions: QueryBuilderContext['suggestions'];\n  onChangeSingleSuggestion: (suggestion: SelectableValue<string>) => void;\n  onCloseSingleSuggestionsMenu: () => void;\n  onCloseMultipleSuggestionsMenu: (values: Suggestions) => void;\n};\n\nfunction ChicletsListComponent({\n  filters,\n  onClickChiclet,\n  onRemoveChiclet,\n  edition,\n  suggestions,\n  onChangeSingleSuggestion,\n  onCloseSingleSuggestionsMenu,\n  onCloseMultipleSuggestionsMenu,\n}: ChicletsListProps) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.chicletsList} data-testid=\"filtersList\">\n      {filters.map((filter) => (\n        <div key={filter.id} className={styles.editChicletContainer}>\n          <Chiclet filter={filter} onClick={onClickChiclet} onRemove={onRemoveChiclet} />\n\n          {edition?.filterId === filter.id ? (\n            !suggestions.multiple ? (\n              <SingleEditionSelect\n                // we add a key to force to unmount the component. this prevents the operator to stick when editing label values\n                key={edition.part}\n                selection={filter[edition.part] as Suggestion}\n                suggestions={suggestions}\n                onChange={onChangeSingleSuggestion}\n                onCloseMenu={onCloseSingleSuggestionsMenu}\n              />\n            ) : (\n              <MultipleEditionSelect\n                selection={filter[edition.part] as Suggestion}\n                suggestions={suggestions}\n                onCloseMenu={onCloseMultipleSuggestionsMenu}\n              />\n            )\n          ) : null}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport const ChicletsList = memo(ChicletsListComponent);\n","import { css } from '@emotion/css';\nimport { SelectableValue } from '@grafana/data';\nimport { Select, useStyles2 } from '@grafana/ui';\nimport React, { useEffect, useState } from 'react';\n\nimport { MESSAGES } from '../constants';\nimport { SingleEditionInput } from '../inputs/SingleEditionInput';\n\nexport const getStyles = () => ({\n  select: css`\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  `,\n});\n\ntype SingleSelectProps = {\n  suggestions: any;\n  onFocus: () => void;\n  onChange: (suggestion: SelectableValue<string>) => void;\n  onKeyDown: (event: any) => void;\n  onCloseMenu: () => void;\n};\n\n// we use this hack to force the select to open after (e.g.) editing an existing attribute\n// in this case, regardless that the `isOpen` prop of the <Select /> component is true\n// the dropdown does not appear on the UI\n// it seems it's a bug from the <Select /> component itself\n// TODO: report it!\nfunction useEnsureIsOpenHack(isVisible: boolean) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  useEffect(() => {\n    if (isVisible && !isOpen) {\n      setTimeout(() => setIsOpen(true), 0);\n      return;\n    }\n\n    if (isVisible !== isOpen) {\n      setIsOpen(isVisible);\n    }\n  }, [isOpen, isVisible]);\n\n  return isOpen;\n}\n\nexport function SingleSelect({ suggestions, onFocus, onChange, onKeyDown, onCloseMenu }: SingleSelectProps) {\n  const styles = useStyles2(getStyles);\n  const isOpen = useEnsureIsOpenHack(suggestions.isVisible);\n\n  if (suggestions.allowCustomValue) {\n    return (\n      <SingleEditionInput\n        placeholder={suggestions.placeholder}\n        onFocus={onFocus}\n        onChange={onChange}\n        onBlur={onCloseMenu}\n      />\n    );\n  }\n\n  return (\n    <Select\n      className={styles.select}\n      placeholder={suggestions.placeholder}\n      loadingMessage={MESSAGES.LOADING}\n      closeMenuOnSelect={false}\n      value={null}\n      onFocus={onFocus}\n      onKeyDown={onKeyDown}\n      onChange={onChange}\n      onCloseMenu={onCloseMenu}\n      options={suggestions.items}\n      isOpen={isOpen}\n      isLoading={suggestions.isLoading}\n      invalid={Boolean(suggestions.error)}\n      noOptionsMessage={suggestions.noOptionsMessage}\n    />\n  );\n}\n","import { Select, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { MESSAGES } from '../constants';\nimport { getStyles } from './SingleSelect';\n\nconst noOp = () => {};\n\nexport function DisabledSelect() {\n  const styles = useStyles2(getStyles);\n\n  return <Select disabled className={styles.select} placeholder={MESSAGES.FILTER_ADD} onChange={noOp} />;\n}\n","import { css } from '@emotion/css';\nimport { SelectableValue } from '@grafana/data';\nimport { MultiSelect, useStyles2 } from '@grafana/ui';\nimport React, { useCallback, useState } from 'react';\n\nimport { Suggestions } from '../../domain/types';\nimport { MESSAGES } from '../constants';\n\ntype MultipleSelectProps = {\n  suggestions: any;\n  onFocus: () => void;\n  onKeyDown: (event: any, values: Suggestions) => void;\n  onCloseMenu: (values: Suggestions) => void;\n};\n\nexport function MultipleSelect({ suggestions, onFocus, onKeyDown, onCloseMenu }: MultipleSelectProps) {\n  const styles = useStyles2(getStyles);\n  const [values, setValues] = useState<Suggestions>([]);\n\n  const onChange = useCallback((newValues: Array<SelectableValue<string>>) => {\n    setValues(newValues.map(({ value = '', label = '' }) => ({ value, label })));\n  }, []);\n\n  const onInternalKeyDown = useCallback(\n    (event: any) => {\n      onKeyDown(event, values);\n    },\n    [onKeyDown, values]\n  );\n\n  const onInternalCloseMenu = useCallback(() => {\n    onCloseMenu(values);\n  }, [onCloseMenu, values]);\n\n  return (\n    <MultiSelect\n      className={styles.select}\n      placeholder={suggestions.placeholder}\n      loadingMessage={MESSAGES.LOADING}\n      closeMenuOnSelect={false}\n      hideSelectedOptions={false}\n      backspaceRemovesValue\n      // auto focus required when switching from another operator type\n      autoFocus\n      value={values}\n      onFocus={onFocus}\n      onKeyDown={onInternalKeyDown}\n      onChange={onChange}\n      onCloseMenu={onInternalCloseMenu}\n      options={suggestions.items}\n      isOpen={suggestions.isVisible}\n      isLoading={suggestions.isLoading}\n      invalid={Boolean(suggestions.error)}\n      noOptionsMessage={suggestions.noOptionsMessage}\n    />\n  );\n}\n\nconst getStyles = () => ({\n  select: css`\n    [aria-label='Remove'] svg {\n      display: none;\n    }\n  `,\n});\n","import { css, cx } from '@emotion/css';\nimport { SelectableValue } from '@grafana/data';\nimport { Button, useStyles2 } from '@grafana/ui';\nimport { usePrevious } from '@shared/components/QueryBuilder/ui/hooks';\nimport React, { memo, useCallback, useEffect } from 'react';\nimport { StateListener } from 'xstate/lib/interpreter';\n\nimport { Actor } from './domain/stateMachine';\nimport {\n  CompleteFilter,\n  CompleteFilters,\n  Filter,\n  FilterPartKind,\n  QueryBuilderContext,\n  QueryBuilderEvent,\n  Suggestions,\n} from './domain/types';\nimport { useStateMachine } from './domain/useStateMachine';\nimport { ChicletsList } from './ui/chiclets/ChicletsList';\nimport { DisabledSelect } from './ui/selects/DisabledSelect';\nimport { MultipleSelect } from './ui/selects/MultipleSelect';\nimport { SingleSelect } from './ui/selects/SingleSelect';\n\nconst getStyles = () => ({\n  queryBuilder: css`\n    display: flex;\n    justify-content: flex-start;\n    align-items: flex-end;\n    flex-wrap: wrap;\n    gap: 4px;\n    width: 100%;\n  `,\n  controls: css`\n    display: flex;\n    align-self: flex-start;\n    flex-grow: 1;\n  `,\n  executeButton: css`\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  `,\n});\n\nexport type QueryBuilderProps = {\n  id: string;\n  // TODO: after migrate the legacy comparison pages to Scenes, dataSourceUid will be mandatory\n  dataSourceUid?: string;\n  query: string;\n  from: number;\n  to: number;\n  onChangeQuery: (newQuery: string, filters: CompleteFilters) => void;\n  className?: string;\n  autoExecute?: boolean;\n};\n\nfunction QueryBuilderComponent(props: QueryBuilderProps) {\n  const styles = useStyles2(getStyles);\n\n  const { actor, internalProps } = useStateMachine(props);\n  const { filters, edition, isQueryUpToDate, suggestions } = internalProps;\n\n  const { onClickChiclet, onRemoveChiclet } = useChicletHandlers(actor);\n\n  const {\n    onFocus,\n    onChangeSingleSuggestion,\n    onSingleSelectKeyDown,\n    onCloseSingleMenu,\n    onMultipleSelectKeyDown,\n    onCloseMultipleMenu,\n  } = useSelectHandlers(actor, suggestions, props.id);\n\n  const onClickExecute = useCallback(() => {\n    actor.send({ type: 'EXECUTE_QUERY' });\n  }, [actor]);\n\n  useEffect(() => {\n    if (!props.autoExecute) {\n      return;\n    }\n\n    const onTransition: StateListener<QueryBuilderContext, QueryBuilderEvent> = ({ value, context, event }) => {\n      if (value === 'idle' && !context.isQueryUpToDate && event.type !== 'EXECUTE_QUERY') {\n        actor.send({ type: 'EXECUTE_QUERY' });\n      }\n    };\n\n    actor.onTransition(onTransition);\n\n    return () => {\n      actor.off(onTransition);\n    };\n  }, [actor, props.autoExecute]);\n\n  return (\n    <div id={props.id} className={cx(styles.queryBuilder, props.className)}>\n      {filters.length > 0 ? (\n        <ChicletsList\n          filters={filters}\n          onClickChiclet={onClickChiclet}\n          onRemoveChiclet={onRemoveChiclet}\n          edition={edition}\n          suggestions={suggestions}\n          onChangeSingleSuggestion={onChangeSingleSuggestion}\n          onCloseSingleSuggestionsMenu={onCloseSingleMenu}\n          onCloseMultipleSuggestionsMenu={onCloseMultipleMenu}\n        />\n      ) : null}\n\n      <div className={styles.controls}>\n        {edition ? (\n          <DisabledSelect />\n        ) : suggestions.multiple ? (\n          <MultipleSelect\n            suggestions={suggestions}\n            onFocus={onFocus}\n            onKeyDown={onMultipleSelectKeyDown}\n            onCloseMenu={onCloseMultipleMenu}\n          />\n        ) : (\n          <SingleSelect\n            suggestions={suggestions}\n            onFocus={onFocus}\n            onChange={onChangeSingleSuggestion}\n            onKeyDown={onSingleSelectKeyDown}\n            onCloseMenu={onCloseSingleMenu}\n          />\n        )}\n\n        {!props.autoExecute && (\n          <Button\n            onClick={onClickExecute}\n            tooltip={!isQueryUpToDate ? 'Execute new query' : 'Nothing to execute, all filters applied'}\n            className={styles.executeButton}\n            disabled={isQueryUpToDate}\n          >\n            Execute\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction useChicletHandlers(actor: Actor) {\n  const onClickChiclet = useCallback(\n    (event: any, filter: Filter, part: FilterPartKind) => {\n      actor.send({ type: 'EDIT_FILTER', data: { filterId: filter.id, part } });\n    },\n    [actor]\n  );\n\n  const onRemoveChiclet = useCallback(\n    (event: any, filter: CompleteFilter) => {\n      actor.send({ type: 'REMOVE_FILTER', data: filter.id });\n    },\n    [actor]\n  );\n\n  return {\n    onClickChiclet,\n    onRemoveChiclet,\n  };\n}\n\n// eslint-disable-next-line sonarjs/cognitive-complexity\nfunction useSelectHandlers(actor: Actor, suggestions: QueryBuilderContext['suggestions'], queryBuilderId: string) {\n  /* single & multiple */\n  const onFocus = useCallback(() => {\n    actor.send({ type: 'START_INPUT' });\n  }, [actor]);\n\n  /* single only */\n  const onChangeSingleSuggestion = useCallback(\n    (suggestion: SelectableValue<string>) => {\n      const { value = '', label = '' } = suggestion;\n\n      actor.send({ type: 'SELECT_SUGGESTION', data: { value, label } });\n    },\n    [actor]\n  );\n\n  const onSingleSelectKeyDown = useCallback(\n    (event: any) => {\n      if (event.code === 'Backspace' && !event.target.value) {\n        actor.send({ type: 'REMOVE_LAST_FILTER' });\n      }\n    },\n    [actor]\n  );\n\n  const onCloseSingleMenu = useCallback(() => {\n    actor.send({ type: 'DISCARD_SUGGESTIONS' });\n  }, [actor]);\n\n  /* multiple only */\n  const onMultipleSelectKeyDown = useCallback(\n    (event: any, values: Suggestions) => {\n      if (event.code === 'Backspace' && !event.target.value && !values.length) {\n        actor.send({ type: 'REMOVE_LAST_FILTER' });\n      }\n    },\n\n    [actor]\n  );\n\n  const onCloseMultipleMenu = useCallback(\n    (values: Suggestions) => {\n      if (values.length) {\n        actor.send({\n          type: 'SELECT_SUGGESTION',\n          data: { value: values.map((v) => v.value).join('|'), label: values.map((v) => v.label).join(', ') },\n        });\n      } else {\n        actor.send({ type: 'DISCARD_SUGGESTIONS' });\n      }\n    },\n    [actor]\n  );\n\n  /* misc */\n\n  const previousSuggestionsIsVisible = usePrevious(suggestions.isVisible);\n\n  useEffect(() => {\n    if (!suggestions.isVisible && previousSuggestionsIsVisible) {\n      // ensures that the input is blurred when a filter has been completed.\n      // we could have used blurInputOnSelect but this allows us to handle properly the case of\n      // editing a complete filter operator from (e.g.) =~ to = (and vice-versa).\n      // indeed, in such cases, we know if the input should be blurred only after selecting a\n      // suggestion, when the select is already rendered.\n      (document.querySelector(`#${queryBuilderId} input`) as HTMLInputElement)?.blur();\n    }\n  }, [suggestions.isVisible, previousSuggestionsIsVisible, queryBuilderId]);\n\n  return {\n    onFocus,\n    onChangeSingleSuggestion,\n    onSingleSelectKeyDown,\n    onMultipleSelectKeyDown,\n    onCloseSingleMenu,\n    onCloseMultipleMenu,\n  };\n}\n\nexport const QueryBuilder = memo(QueryBuilderComponent);\n","import { useEffect, useMemo, useState } from 'react';\n\nimport { QueryBuilderProps } from '../QueryBuilder';\nimport { buildStateMachine } from './stateMachine';\nimport { CompleteFilters, QueryBuilderContext } from './types';\n\nexport function useStateMachine({ dataSourceUid, query, from, to, onChangeQuery }: QueryBuilderProps) {\n  const { actor, initialContext } = useMemo(\n    () => buildStateMachine({ query, from, to }),\n    // We don't want to build a new state machine when the props change, props change is handheld via the CHANGE_INPUT_PARAMS action below\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  useEffect(() => {\n    actor.send({ type: 'CHANGE_INPUT_PARAMS', data: { dataSourceUid, query, from, to } });\n  }, [actor, dataSourceUid, query, from, to]);\n\n  const [internalProps, setInternalProps] = useState<QueryBuilderContext>(initialContext);\n\n  useEffect(() => {\n    actor.start();\n\n    // actor.subscribe(({ value: state, event, context }) => {\n    //   logger.debug('*** %o', JSON.stringify(event));\n    //   logger.debug('***', JSON.stringify(context, null, 1));\n    //   logger.debug('*** ---------------------> \"%s\"', state);\n    actor.subscribe(({ event, context }) => {\n      if (event.type === 'EXECUTE_QUERY') {\n        onChangeQuery(context.query, context.filters as CompleteFilters);\n      }\n\n      setInternalProps(context);\n    });\n\n    return () => {\n      actor.stop();\n    };\n    // onChangeQuery is not a stable prop, we omit it to prevent multiple machine initializations that would end up in a broken UI\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [actor]);\n\n  return { actor, internalProps };\n}\n","/**\n * This is the same use react-use: usePrevious()\n * If more react-use like hooks are needed, we can consider adding react-use as a dependency\n */\nimport { useEffect, useRef } from 'react';\n\nexport function usePrevious<T>(state: T): T | undefined {\n  const ref = useRef<T>();\n\n  useEffect(() => {\n    ref.current = state;\n  });\n\n  return ref.current;\n}\n","import PROFILE_METRICS from './profile-metrics.json';\n\nexport type ProfileMetricId = keyof typeof PROFILE_METRICS;\n\nexport type ProfileMetric = {\n  id: ProfileMetricId;\n  description: string;\n  type: string;\n  group: string;\n  unit: string; // TODO: enum\n};\n\nexport function getProfileMetric(profileMetricId: ProfileMetricId): ProfileMetric {\n  if (PROFILE_METRICS[profileMetricId]) {\n    return PROFILE_METRICS[profileMetricId] as ProfileMetric;\n  }\n\n  const [group = '?', type = '?'] = profileMetricId ? profileMetricId.split(':') : [];\n\n  // TODO: add missing metrics (e.g. godeltaprof are not yet defined)\n  // logger.warn(`No profile metric found for id \"${profileMetricId}\"`);\n\n  return {\n    id: profileMetricId,\n    description: '',\n    type,\n    group,\n    unit: 'short',\n  };\n}\n","type DataSourceDef = {\n  type: string;\n  uid: string;\n};\n\nexport const PYROSCOPE_DATA_SOURCE: DataSourceDef = Object.freeze({\n  type: 'grafana-pyroscope-datasource',\n  uid: '$dataSource', // interpolated variable\n});\n\n/* Runtime data sources */\n\nexport const PYROSCOPE_SERIES_DATA_SOURCE: DataSourceDef = Object.freeze({\n  type: 'grafana-pyroscope-series-datasource',\n  uid: 'grafana-pyroscope-series-datasource',\n});\n\nexport const PYROSCOPE_FAVORITES_DATA_SOURCE: DataSourceDef = Object.freeze({\n  type: 'grafana-pyroscope-favorites-datasource',\n  uid: 'grafana-pyroscope-favorites-datasource',\n});\n\nexport const PYROSCOPE_LABELS_DATA_SOURCE: DataSourceDef = Object.freeze({\n  type: 'grafana-pyroscope-labels-datasource',\n  uid: 'grafana-pyroscope-labels-datasource',\n});\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, VariableRefresh } from '@grafana/data';\nimport { MultiValueVariable, QueryVariable, SceneComponentProps, VariableValueOption } from '@grafana/scenes';\nimport { Cascader, CascaderOption, Icon, Tooltip, useStyles2 } from '@grafana/ui';\nimport { prepareHistoryEntry } from '@shared/domain/prepareHistoryEntry';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport { nanoid } from 'nanoid';\nimport React, { useMemo } from 'react';\nimport { lastValueFrom } from 'rxjs';\n\nimport { PYROSCOPE_SERIES_DATA_SOURCE } from '../../infrastructure/pyroscope-data-sources';\n\ntype ProfileMetricOptions = Array<{\n  value: string;\n  label: string;\n  type: string;\n  group: string;\n}>;\n\ntype ProfileMetricVariableState = {\n  query: string;\n  skipUrlSync: boolean;\n};\n\nexport class ProfileMetricVariable extends QueryVariable {\n  static DEFAULT_VALUE = 'process_cpu:cpu:nanoseconds:cpu:nanoseconds';\n\n  // hack: subscribe to changes of dataSource only\n  static QUERY_DEFAULT = '$dataSource and all profile metrics';\n\n  // hack: subscribe to changes of dataSource and serviceName to avoid showing options that don't have any data associated\n  static QUERY_SERVICE_NAME_DEPENDENT = '$dataSource and only $serviceName profile metrics';\n\n  constructor(state?: ProfileMetricVariableState) {\n    super({\n      key: 'profileMetricId',\n      name: 'profileMetricId',\n      label: 'Profile type',\n      datasource: PYROSCOPE_SERIES_DATA_SOURCE,\n      query: ProfileMetricVariable.QUERY_DEFAULT,\n      loading: true,\n      refresh: VariableRefresh.onTimeRangeChanged,\n      ...state,\n    });\n\n    this.changeValueTo = this.changeValueTo.bind(this);\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    if (!this.state.value) {\n      this.setState({ value: ProfileMetricVariable.DEFAULT_VALUE });\n    }\n  }\n\n  async update(force = false) {\n    if (!force && this.state.loading) {\n      return;\n    }\n\n    let options: VariableValueOption[] = [];\n    let error = null;\n\n    this.setState({ loading: true, options: [], error: null });\n\n    try {\n      options = await lastValueFrom(this.getValueOptions({}));\n    } catch (e) {\n      error = e;\n    } finally {\n      this.setState({ loading: false, options, error });\n    }\n  }\n\n  static buildCascaderOptions(options: ProfileMetricOptions): CascaderOption[] {\n    const optionsMap = new Map();\n\n    for (const { value } of options) {\n      const profileMetric = getProfileMetric(value as ProfileMetricId);\n      const { group, type } = profileMetric;\n\n      const nameSpaceServices = optionsMap.get(group) || {\n        value: group,\n        label: group,\n        items: [],\n      };\n\n      const items = nameSpaceServices.items || [];\n\n      items.push({\n        value,\n        label: type,\n      });\n\n      nameSpaceServices.items = items;\n\n      optionsMap.set(group, nameSpaceServices);\n    }\n\n    return Array.from(optionsMap.values()).sort((a, b) => b.label.localeCompare(a.label));\n  }\n\n  onSelect = (newValue: string) => {\n    reportInteraction('g_pyroscope_app_profile_metric_selected');\n\n    if (!this.state.skipUrlSync) {\n      prepareHistoryEntry();\n    }\n    this.changeValueTo(newValue);\n  };\n\n  static Component = ({ model }: SceneComponentProps<MultiValueVariable & { onSelect?: any }>) => {\n    const styles = useStyles2(getStyles);\n    const { loading, value, options, error } = model.useState();\n\n    const cascaderOptions = useMemo(() => {\n      return ProfileMetricVariable.buildCascaderOptions(options as ProfileMetricOptions);\n    }, [options]);\n\n    if (error) {\n      logger.error(error, { info: 'Error while loading \"profileMetricId\" variable values!' });\n\n      return (\n        <Tooltip theme=\"error\" content={error.toString()}>\n          <Icon className={styles.iconError} name=\"exclamation-triangle\" size=\"xl\" />\n        </Tooltip>\n      );\n    }\n\n    return (\n      <Cascader\n        // we add a key to ensure that the Cascader selects the initial value or available options properly when landing on the page\n        // and when switching exploration types, because the value might also be changed after the component has been rendered by SceneProfilesExplorer\n        key={nanoid(5)}\n        aria-label=\"Profile metrics list\"\n        width={24}\n        separator=\"/\"\n        displayAllSelectedLevels\n        placeholder={loading ? 'Loading...' : `Select a profile metric (${options.length})`}\n        options={cascaderOptions}\n        initialValue={value as string}\n        changeOnSelect={false}\n        onSelect={model.onSelect}\n      />\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  iconError: css`\n    height: 32px;\n    align-self: center;\n    color: ${theme.colors.error.text};\n  `,\n});\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, VariableRefresh } from '@grafana/data';\nimport {\n  MultiValueVariable,\n  QueryVariable,\n  SceneComponentProps,\n  sceneGraph,\n  VariableValueOption,\n} from '@grafana/scenes';\nimport { Cascader, Icon, Tooltip, useStyles2 } from '@grafana/ui';\nimport { prepareHistoryEntry } from '@shared/domain/prepareHistoryEntry';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport { userStorage } from '@shared/infrastructure/userStorage';\nimport React, { useMemo } from 'react';\nimport { lastValueFrom } from 'rxjs';\n\nimport { PYROSCOPE_SERIES_DATA_SOURCE } from '../../../infrastructure/pyroscope-data-sources';\nimport { FiltersVariable } from '../FiltersVariable/FiltersVariable';\nimport { buildServiceNameCascaderOptions } from './domain/useBuildServiceNameOptions';\n\ntype ServiceNameVariableState = {\n  query: string;\n  skipUrlSync: boolean;\n};\n\nexport class ServiceNameVariable extends QueryVariable {\n  // hack: subscribe to changes of dataSource only\n  static QUERY_DEFAULT = '$dataSource and all services';\n\n  // hack: subscribe to changes of dataSource and profileMetricId\n  static QUERY_PROFILE_METRIC_DEPENDENT = '$dataSource and only $profileMetricId services';\n\n  constructor(state?: ServiceNameVariableState) {\n    super({\n      key: 'serviceName',\n      name: 'serviceName',\n      label: 'Service',\n      datasource: PYROSCOPE_SERIES_DATA_SOURCE,\n      query: ServiceNameVariable.QUERY_DEFAULT,\n      loading: true,\n      refresh: VariableRefresh.onTimeRangeChanged,\n      ...state,\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    const { serviceName: serviceNameFromStorage } = userStorage.get(userStorage.KEYS.PROFILES_EXPLORER) || {};\n\n    if (serviceNameFromStorage && !this.state.value) {\n      this.setState({ value: serviceNameFromStorage });\n    }\n\n    this.subscribeToState((newState, prevState) => {\n      if (newState.value && newState.value !== prevState.value) {\n        const storage = userStorage.get(userStorage.KEYS.PROFILES_EXPLORER) || {};\n        storage.serviceName = newState.value;\n        userStorage.set(userStorage.KEYS.PROFILES_EXPLORER, storage);\n      }\n    });\n  }\n\n  async update() {\n    if (this.state.loading) {\n      return;\n    }\n\n    let options: VariableValueOption[] = [];\n    let error = null;\n\n    this.setState({ loading: true, options: [], error: null });\n\n    try {\n      options = await lastValueFrom(this.getValueOptions({}));\n    } catch (e) {\n      error = e;\n    } finally {\n      this.setState({ loading: false, options, error });\n    }\n  }\n\n  selectNewValue = (newValue: string) => {\n    reportInteraction('g_pyroscope_app_service_name_selected');\n\n    if (!this.state.skipUrlSync) {\n      prepareHistoryEntry();\n    }\n    this.changeValueTo(newValue);\n\n    // manually reset filters - we should listen to the variables changes but it leads to unwanted behaviour\n    // (filters set in the URL search parameters are resetted when the user lands on the page)\n    ['filters', 'filtersBaseline', 'filtersComparison'].forEach((filterKey) => {\n      const filtersVariable = sceneGraph.findByKeyAndType(this, filterKey, FiltersVariable);\n      filtersVariable.setState({ filters: [] });\n    });\n  };\n\n  static Component = ({ model }: SceneComponentProps<MultiValueVariable & { selectNewValue?: any }>) => {\n    const styles = useStyles2(getStyles);\n    const { loading, value, options, error } = model.useState();\n\n    const cascaderOptions = useMemo(\n      () => buildServiceNameCascaderOptions(options.map(({ label }) => label)),\n      [options]\n    );\n\n    if (error) {\n      logger.error(error, { info: 'Error while loading \"serviceName\" variable values!' });\n\n      return (\n        <Tooltip theme=\"error\" content={error.toString()}>\n          <Icon className={styles.iconError} name=\"exclamation-triangle\" size=\"xl\" />\n        </Tooltip>\n      );\n    }\n\n    return (\n      <Cascader\n        // we add a key to ensure that the Cascader selects the initial value properly when landing on the page\n        // and when switching exploration types, because the value might also be changed after the component has been rendered by SceneProfilesExplorer\n        // (e.g. in SceneExploreServiceProfileTypes)\n        key={String(loading) + String(value)}\n        aria-label=\"Services list\"\n        width={32}\n        separator=\"/\"\n        displayAllSelectedLevels\n        placeholder={loading ? 'Loading services...' : `Select a service (${options.length})`}\n        options={cascaderOptions}\n        initialValue={value as string}\n        changeOnSelect={false}\n        onSelect={model.selectNewValue}\n      />\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  iconError: css`\n    height: 32px;\n    align-self: center;\n    color: ${theme.colors.error.text};\n  `,\n});\n","import { CascaderOption } from '@grafana/ui';\n\n// eslint-disable-next-line sonarjs/cognitive-complexity\nexport function buildServiceNameCascaderOptions(serviceNames: string[]) {\n  const options: CascaderOption[] = [];\n\n  for (const serviceId of serviceNames) {\n    // serviceId = ebpf/agent-logs/agent ; parts = [ebpf,agent-logs,agent]\n    const parts = serviceId.split('/');\n\n    let currentPart: string;\n    const currentValues = [];\n    let currentOptions = options;\n\n    for (let level = 0; level < parts.length; level += 1) {\n      currentPart = parts[level];\n      currentValues.push(currentPart);\n      const value = currentValues.join('/');\n\n      const existingOption = currentOptions.find((o) => o.value === value);\n\n      if (existingOption) {\n        currentOptions = existingOption.items as CascaderOption[];\n      } else {\n        const newOption = {\n          value,\n          label: currentPart,\n          // setting items only for non-terminal nodes is required by the Cascader component\n          // without it, the initial value would not be properly set in the UI\n          items: level < parts.length - 1 ? [] : undefined,\n        };\n\n        currentOptions.push(newOption);\n        currentOptions = newOption.items || [];\n      }\n    }\n  }\n\n  return options;\n}\n","import { sceneGraph, SceneObject } from '@grafana/scenes';\nimport { useMemo } from 'react';\n\nimport { FiltersVariable } from './variables/FiltersVariable/FiltersVariable';\nimport { ProfileMetricVariable } from './variables/ProfileMetricVariable';\nimport { ServiceNameVariable } from './variables/ServiceNameVariable/ServiceNameVariable';\n\nexport function useBuildPyroscopeQuery(sceneObject: SceneObject, filterKey: string) {\n  const { value: serviceName } = sceneGraph\n    .findByKeyAndType(sceneObject, 'serviceName', ServiceNameVariable)\n    .useState();\n\n  const { value: profileMetricId } = sceneGraph\n    .findByKeyAndType(sceneObject, 'profileMetricId', ProfileMetricVariable)\n    .useState();\n\n  const { filterExpression } = sceneGraph.findByKeyAndType(sceneObject, filterKey, FiltersVariable).useState();\n\n  return useMemo(\n    () => `${profileMetricId}{service_name=\"${serviceName}\",${filterExpression}}`,\n    [filterExpression, profileMetricId, serviceName]\n  );\n}\n","import { DataSourceVariable } from '@grafana/scenes';\nimport { ApiClient } from '@shared/infrastructure/http/ApiClient';\nimport { userStorage } from '@shared/infrastructure/userStorage';\n\nexport class ProfilesDataSourceVariable extends DataSourceVariable {\n  constructor() {\n    super({\n      pluginId: 'grafana-pyroscope-datasource',\n      key: 'dataSource',\n      name: 'dataSource',\n      label: 'Data source',\n      skipUrlSync: true,\n      // we ensure that we'll always have the expected default data source (when the \"var-dataSource\" URL search param is missing, incorrect, etc.)\n      value: ApiClient.selectDefaultDataSource().uid,\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    this.setState({ skipUrlSync: false });\n\n    this.subscribeToState((newState, prevState) => {\n      if (newState.value && newState.value !== prevState.value) {\n        const storage = userStorage.get(userStorage.KEYS.PROFILES_EXPLORER) || {};\n        storage.dataSource = newState.value;\n        userStorage.set(userStorage.KEYS.PROFILES_EXPLORER, storage);\n      }\n    });\n  }\n}\n","import { AdHocVariableFilter } from '@grafana/data';\nimport { CompleteFilter, OperatorKind } from '@shared/components/QueryBuilder/domain/types';\n\nexport const convertPyroscopeToVariableFilter = (filter: CompleteFilter): AdHocVariableFilter => {\n  let newOperator = filter.operator.value;\n\n  if (filter.operator.value === OperatorKind['in']) {\n    newOperator = OperatorKind['=~'];\n  } else if (filter.operator.value === OperatorKind['not-in']) {\n    newOperator = OperatorKind['!~'];\n  }\n\n  return {\n    key: filter.attribute.value,\n    operator: newOperator,\n    value: filter.value.value,\n  };\n};\n\nfunction searchForFilter(filters: AdHocVariableFilter[], filterKey: string) {\n  let found: AdHocVariableFilter | undefined;\n\n  const filtersWithoutFound = filters.filter((f) => {\n    if (f.key === filterKey) {\n      found = f;\n      return false;\n    }\n\n    return true;\n  });\n\n  return { found, filtersWithoutFound };\n}\n\nconst addToFilters = (filters: AdHocVariableFilter[], filterToAdd: AdHocVariableFilter) => [...filters, filterToAdd];\n\nexport function includeLabelValue(\n  filters: AdHocVariableFilter[],\n  filterForInclude: AdHocVariableFilter\n): AdHocVariableFilter[] {\n  const { found, filtersWithoutFound } = searchForFilter(filters, filterForInclude.key);\n\n  if (!found) {\n    return addToFilters(filters, { ...filterForInclude, operator: '=~' });\n  }\n\n  if (['!~', '!='].includes(found.operator)) {\n    return addToFilters(filtersWithoutFound, { ...filterForInclude, operator: '=~' });\n  }\n\n  const foundValues = new Set(found.value.split('|'));\n\n  if (found.operator === '=~') {\n    return addToFilters(filtersWithoutFound, {\n      ...found,\n      value: Array.from(foundValues.add(filterForInclude.value)).join('|'),\n    });\n  }\n\n  // found.operator is '='\n  return found.value === filterForInclude.value\n    ? filters\n    : addToFilters(filtersWithoutFound, {\n        ...filterForInclude,\n        operator: '=~',\n        value: Array.from(foundValues.add(filterForInclude.value)).join('|'),\n      });\n}\n\nexport function excludeLabelValue(\n  filters: AdHocVariableFilter[],\n  filterForExclude: AdHocVariableFilter\n): AdHocVariableFilter[] {\n  const { found, filtersWithoutFound } = searchForFilter(filters, filterForExclude.key);\n\n  if (!found) {\n    return addToFilters(filters, { ...filterForExclude, operator: '!~' });\n  }\n\n  if (['=~', '='].includes(found.operator)) {\n    return addToFilters(filtersWithoutFound, { ...filterForExclude, operator: '!~' });\n  }\n\n  const foundValues = new Set(found.value.split('|'));\n\n  if (found.operator === '!~') {\n    return addToFilters(filtersWithoutFound, {\n      ...found,\n      value: Array.from(foundValues.add(filterForExclude.value)).join('|'),\n    });\n  }\n\n  // found.operator is '!='\n  return found.value === filterForExclude.value\n    ? filters\n    : addToFilters(filtersWithoutFound, {\n        ...filterForExclude,\n        operator: '!~',\n        value: Array.from(foundValues.add(filterForExclude.value)).join('|'),\n      });\n}\n\nexport function clearLabelValue(\n  filters: AdHocVariableFilter[],\n  filterForClear: AdHocVariableFilter\n): AdHocVariableFilter[] {\n  const { found, filtersWithoutFound } = searchForFilter(filters, filterForClear.key);\n\n  if (!found) {\n    return filters;\n  }\n\n  const filteredValues = found.value.split('|').filter((v) => v !== filterForClear.value);\n\n  if (filteredValues.length > 0) {\n    return addToFilters(filtersWithoutFound, {\n      ...found,\n      value: filteredValues.join('|'),\n    });\n  }\n\n  return [...filtersWithoutFound];\n}\n\nexport const isFilterValid = (filter: AdHocVariableFilter) => filter.operator in OperatorKind;\n","import { AdHocFiltersVariable, SceneComponentProps, sceneGraph } from '@grafana/scenes';\nimport { CompleteFilters, OperatorKind } from '@shared/components/QueryBuilder/domain/types';\nimport { QueryBuilder } from '@shared/components/QueryBuilder/QueryBuilder';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { uniq } from 'lodash';\nimport React from 'react';\n\nimport { useBuildPyroscopeQuery } from '../../useBuildPyroscopeQuery';\nimport { ProfilesDataSourceVariable } from '../ProfilesDataSourceVariable';\nimport { convertPyroscopeToVariableFilter, isFilterValid } from './filters-ops';\n\nexport class FiltersVariable extends AdHocFiltersVariable {\n  static DEFAULT_VALUE = [];\n\n  constructor({ key }: { key: string }) {\n    super({\n      key,\n      name: key,\n      label: 'Filters',\n      filters: FiltersVariable.DEFAULT_VALUE,\n      expressionBuilder: (filters) =>\n        filters\n          // after parsing the URL search parameters the filters might end up having an invalid operator, which in turn, will\n          // generate an invalid query that will make the API requests fail - we prevent this to happen by sanitizing the filters here\n          .filter(isFilterValid)\n          .map(({ key, operator, value }) =>\n            operator === OperatorKind['is-empty'] ? `${key}=\"\"` : `${key}${operator}\"${value}\"`\n          )\n          .join(','),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    // VariableDependencyConfig does not work :man_shrug: (never called)\n    const dataSourceSub = sceneGraph\n      .findByKeyAndType(this, 'dataSource', ProfilesDataSourceVariable)\n      .subscribeToState(() => {\n        this.setState({ filters: [] });\n      });\n\n    return () => {\n      dataSourceSub.unsubscribe();\n    };\n  }\n\n  onChangeQuery = (query: string, filters: CompleteFilters) => {\n    reportInteraction('g_pyroscope_app_filters_changed', {\n      name: this.state.name,\n      count: filters.length,\n      operators: uniq(filters.map((f) => f.operator.label)),\n    });\n\n    this.setState({\n      filters: filters.map(convertPyroscopeToVariableFilter),\n    });\n  };\n\n  static Component = ({ model }: SceneComponentProps<AdHocFiltersVariable & { onChangeQuery?: any }>) => {\n    const { key } = model.useState();\n\n    const query = useBuildPyroscopeQuery(model, key as string);\n\n    const { value: dataSourceUid } = sceneGraph\n      .findByKeyAndType(model, 'dataSource', ProfilesDataSourceVariable)\n      .useState();\n\n    const { from, to } = sceneGraph.getTimeRange(model).state.value;\n\n    return (\n      <QueryBuilder\n        id={`query-builder-${key}`}\n        autoExecute\n        dataSourceUid={dataSourceUid as string}\n        query={query}\n        from={from.unix() * 1000}\n        to={to.unix() * 1000}\n        onChangeQuery={model.onChangeQuery}\n      />\n    );\n  };\n}\n","import { sceneGraph, SceneObject } from '@grafana/scenes';\n\nexport function getSceneVariableValue(sceneObject: SceneObject, variableName: string): string {\n  return sceneGraph.lookupVariable(variableName, sceneObject)?.getValue() as string;\n}\n","import {\n  SceneComponentProps,\n  SceneObjectBase,\n  SceneObjectState,\n  SceneObjectUrlSyncConfig,\n  SceneObjectUrlValues,\n} from '@grafana/scenes';\nimport { RadioButtonGroup } from '@grafana/ui';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport React from 'react';\n\nexport enum PanelType {\n  TIMESERIES = 'time-series',\n  BARGAUGE = 'bar-gauge',\n  HISTOGRAM = 'histogram',\n}\n\nexport interface ScenePanelTypeSwitcherState extends SceneObjectState {\n  panelType: PanelType;\n  onChange?: (panelType: PanelType) => void;\n}\n\nexport class ScenePanelTypeSwitcher extends SceneObjectBase<ScenePanelTypeSwitcherState> {\n  protected _urlSync = new SceneObjectUrlSyncConfig(this, { keys: ['panelType'] });\n\n  static OPTIONS = [\n    { label: 'Time series', value: PanelType.TIMESERIES, icon: 'heart-rate' },\n    { label: 'Totals', value: PanelType.BARGAUGE, icon: 'align-left' },\n    { label: 'Histograms', value: PanelType.HISTOGRAM, icon: 'graph-bar' },\n  ];\n\n  static DEFAULT_PANEL_TYPE = PanelType.TIMESERIES;\n\n  constructor() {\n    super({\n      key: 'panel-type-switcher',\n      panelType: ScenePanelTypeSwitcher.DEFAULT_PANEL_TYPE,\n    });\n  }\n\n  getUrlState() {\n    return {\n      panelType: this.state.panelType,\n    };\n  }\n\n  updateFromUrl(values: SceneObjectUrlValues) {\n    const stateUpdate: Partial<ScenePanelTypeSwitcherState> = {};\n\n    if (typeof values.panelType === 'string' && values.panelType !== this.state.panelType) {\n      stateUpdate.panelType = Object.values(PanelType).includes(values.panelType as PanelType)\n        ? (values.panelType as PanelType)\n        : ScenePanelTypeSwitcher.DEFAULT_PANEL_TYPE;\n    }\n\n    this.setState(stateUpdate);\n  }\n\n  reset() {\n    this.setState({ panelType: ScenePanelTypeSwitcher.DEFAULT_PANEL_TYPE });\n  }\n\n  onChange = (panelType: PanelType) => {\n    reportInteraction('g_pyroscope_app_panel_type_changed', { panelType });\n\n    this.setState({ panelType });\n  };\n\n  static Component = ({ model }: SceneComponentProps<ScenePanelTypeSwitcher>) => {\n    const { panelType } = model.useState();\n\n    return (\n      <RadioButtonGroup\n        aria-label=\"Panel type switcher\"\n        options={ScenePanelTypeSwitcher.OPTIONS}\n        value={panelType}\n        onChange={model.onChange}\n        fullWidth={false}\n      />\n    );\n  };\n}\n","import { config } from '@grafana/runtime';\n\nexport function getColorByIndex(index: number) {\n  const visTheme = config.theme2.visualization;\n  return visTheme.getColorByName(visTheme.palette[index % 8]);\n}\n","import { Field } from '@grafana/data';\n\nexport const getSeriesLabelFieldName = (metricField: Field, label?: string) =>\n  metricField.labels?.[label as string] || '(no value)'; // metricField.labels can be empty when the ingested profiles do not have a label value set\n","import { DataFrame } from '@grafana/data';\n\nexport const getSeriesStatsValue = (series: DataFrame, displayName: string) =>\n  series.meta?.stats?.find((s) => s.displayName === displayName)?.value;\n","import { SceneQueryRunner } from '@grafana/scenes';\n\nimport { PYROSCOPE_DATA_SOURCE } from '../pyroscope-data-sources';\nimport { TimeSeriesQueryRunnerParams } from './TimeSeriesQueryRunnerParams';\n\nexport function buildTimeSeriesQueryRunner({\n  serviceName,\n  profileMetricId,\n  groupBy,\n  filters,\n}: TimeSeriesQueryRunnerParams) {\n  const completeFilters = filters ? [...filters] : [];\n  completeFilters.unshift({ key: 'service_name', operator: '=', value: serviceName || '$serviceName' });\n\n  const selector = completeFilters.map(({ key, operator, value }) => `${key}${operator}\"${value}\"`).join(',');\n\n  return new SceneQueryRunner({\n    datasource: PYROSCOPE_DATA_SOURCE,\n    queries: [\n      {\n        refId: `${profileMetricId || '$profileMetricId'}-${selector}-${groupBy?.label || 'no-group-by'}`,\n        queryType: 'metrics',\n        profileTypeId: profileMetricId || '$profileMetricId',\n        labelSelector: `{${selector},$filters}`,\n        groupBy: groupBy?.label ? [groupBy.label] : [],\n      },\n    ],\n  });\n}\n","/*\nHow it works:\n`this.#head` is an instance of `Node` which keeps track of its current value and nests another instance of `Node` that keeps the value that comes after it. When a value is provided to `.enqueue()`, the code needs to iterate through `this.#head`, going deeper and deeper to find the last value. However, iterating through every single item is slow. This problem is solved by saving a reference to the last value as `this.#tail` so that it can reference it to add a new value.\n*/\n\nclass Node {\n\tvalue;\n\tnext;\n\n\tconstructor(value) {\n\t\tthis.value = value;\n\t}\n}\n\nexport default class Queue {\n\t#head;\n\t#tail;\n\t#size;\n\n\tconstructor() {\n\t\tthis.clear();\n\t}\n\n\tenqueue(value) {\n\t\tconst node = new Node(value);\n\n\t\tif (this.#head) {\n\t\t\tthis.#tail.next = node;\n\t\t\tthis.#tail = node;\n\t\t} else {\n\t\t\tthis.#head = node;\n\t\t\tthis.#tail = node;\n\t\t}\n\n\t\tthis.#size++;\n\t}\n\n\tdequeue() {\n\t\tconst current = this.#head;\n\t\tif (!current) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#head = this.#head.next;\n\t\tthis.#size--;\n\t\treturn current.value;\n\t}\n\n\tpeek() {\n\t\tif (!this.#head) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.#head.value;\n\n\t\t// TODO: Node.js 18.\n\t\t// return this.#head?.value;\n\t}\n\n\tclear() {\n\t\tthis.#head = undefined;\n\t\tthis.#tail = undefined;\n\t\tthis.#size = 0;\n\t}\n\n\tget size() {\n\t\treturn this.#size;\n\t}\n\n\t* [Symbol.iterator]() {\n\t\tlet current = this.#head;\n\n\t\twhile (current) {\n\t\t\tyield current.value;\n\t\t\tcurrent = current.next;\n\t\t}\n\t}\n}\n","import Queue from 'yocto-queue';\n\nexport default function pLimit(concurrency) {\n\tvalidateConcurrency(concurrency);\n\n\tconst queue = new Queue();\n\tlet activeCount = 0;\n\n\tconst resumeNext = () => {\n\t\tif (activeCount < concurrency && queue.size > 0) {\n\t\t\tqueue.dequeue()();\n\t\t\t// Since `pendingCount` has been decreased by one, increase `activeCount` by one.\n\t\t\tactiveCount++;\n\t\t}\n\t};\n\n\tconst next = () => {\n\t\tactiveCount--;\n\n\t\tresumeNext();\n\t};\n\n\tconst run = async (function_, resolve, arguments_) => {\n\t\tconst result = (async () => function_(...arguments_))();\n\n\t\tresolve(result);\n\n\t\ttry {\n\t\t\tawait result;\n\t\t} catch {}\n\n\t\tnext();\n\t};\n\n\tconst enqueue = (function_, resolve, arguments_) => {\n\t\t// Queue `internalResolve` instead of the `run` function\n\t\t// to preserve asynchronous context.\n\t\tnew Promise(internalResolve => {\n\t\t\tqueue.enqueue(internalResolve);\n\t\t}).then(\n\t\t\trun.bind(undefined, function_, resolve, arguments_),\n\t\t);\n\n\t\t(async () => {\n\t\t\t// This function needs to wait until the next microtask before comparing\n\t\t\t// `activeCount` to `concurrency`, because `activeCount` is updated asynchronously\n\t\t\t// after the `internalResolve` function is dequeued and called. The comparison in the if-statement\n\t\t\t// needs to happen asynchronously as well to get an up-to-date value for `activeCount`.\n\t\t\tawait Promise.resolve();\n\n\t\t\tif (activeCount < concurrency) {\n\t\t\t\tresumeNext();\n\t\t\t}\n\t\t})();\n\t};\n\n\tconst generator = (function_, ...arguments_) => new Promise(resolve => {\n\t\tenqueue(function_, resolve, arguments_);\n\t});\n\n\tObject.defineProperties(generator, {\n\t\tactiveCount: {\n\t\t\tget: () => activeCount,\n\t\t},\n\t\tpendingCount: {\n\t\t\tget: () => queue.size,\n\t\t},\n\t\tclearQueue: {\n\t\t\tvalue() {\n\t\t\t\tqueue.clear();\n\t\t\t},\n\t\t},\n\t\tconcurrency: {\n\t\t\tget: () => concurrency,\n\n\t\t\tset(newConcurrency) {\n\t\t\t\tvalidateConcurrency(newConcurrency);\n\t\t\t\tconcurrency = newConcurrency;\n\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\t// eslint-disable-next-line no-unmodified-loop-condition\n\t\t\t\t\twhile (activeCount < concurrency && queue.size > 0) {\n\t\t\t\t\t\tresumeNext();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t});\n\n\treturn generator;\n}\n\nfunction validateConcurrency(concurrency) {\n\tif (!((Number.isInteger(concurrency) || concurrency === Number.POSITIVE_INFINITY) && concurrency > 0)) {\n\t\tthrow new TypeError('Expected `concurrency` to be a number from 1 and up');\n\t}\n}\n","import { TimeRange } from '@grafana/data';\n\nexport function computeRoundedTimeRange(timeRange: TimeRange) {\n  // round to 10s\n  return {\n    from: Math.floor((timeRange.from.valueOf() || 0) / 10000) * 10000,\n    to: Math.floor((timeRange.to.valueOf() || 0) / 10000) * 10000,\n  };\n}\n","import {\n  DataQueryResponse,\n  FieldType,\n  LegacyMetricFindQueryOptions,\n  LoadingState,\n  MetricFindValue,\n  TestDataSourceResponse,\n  TimeRange,\n} from '@grafana/data';\nimport { RuntimeDataSource, sceneGraph } from '@grafana/scenes';\nimport { isPrivateLabel } from '@shared/components/QueryBuilder/domain/helpers/isPrivateLabel';\nimport { labelsRepository } from '@shared/infrastructure/labels/labelsRepository';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport pLimit from 'p-limit';\n\nimport { GroupByVariable } from '../../domain/variables/GroupByVariable/GroupByVariable';\nimport { computeRoundedTimeRange } from '../../helpers/computeRoundedTimeRange';\nimport { PYROSCOPE_LABELS_DATA_SOURCE } from '../pyroscope-data-sources';\nimport { LabelsApiClient } from './http/LabelsApiClient';\n\nconst MAX_CONCURRENT_LABEL_VALUES_REQUESTS = 20;\nconst limit = pLimit(MAX_CONCURRENT_LABEL_VALUES_REQUESTS);\n\nexport class LabelsDataSource extends RuntimeDataSource {\n  static MAX_TIMESERIES_LABEL_VALUES = 10;\n\n  constructor() {\n    super(PYROSCOPE_LABELS_DATA_SOURCE.type, PYROSCOPE_LABELS_DATA_SOURCE.uid);\n  }\n\n  async query(): Promise<DataQueryResponse> {\n    return {\n      state: LoadingState.Done,\n      data: [\n        {\n          name: 'Labels',\n          fields: [\n            {\n              name: 'Label',\n              type: FieldType.other,\n              values: [],\n              config: {},\n            },\n          ],\n          length: 0,\n        },\n      ],\n    };\n  }\n\n  getParams(options: LegacyMetricFindQueryOptions) {\n    const { scopedVars, range } = options;\n    const sceneObject = scopedVars?.__sceneObject?.value as GroupByVariable;\n\n    const dataSourceUid = sceneGraph.interpolate(sceneObject, '$dataSource');\n    const serviceName = sceneGraph.interpolate(sceneObject, '$serviceName');\n    const profileMetricId = sceneGraph.interpolate(sceneObject, '$profileMetricId');\n\n    // we could interpolate ad hoc filters, but the Labels exploration type would reload all labels each time they are modified\n    // const filters = sceneGraph.interpolate(sceneObject, '$filters');\n    // const pyroscopeQuery = `${profileMetricId}{service_name=\"${serviceName}\",${filters}}`;\n    const query = `${profileMetricId}{service_name=\"${serviceName}\"}`;\n\n    const { from, to } = computeRoundedTimeRange(range as TimeRange);\n\n    return {\n      dataSourceUid,\n      serviceName,\n      profileMetricId,\n      query,\n      from,\n      to,\n    };\n  }\n\n  async metricFindQuery(_: string, options: LegacyMetricFindQueryOptions): Promise<MetricFindValue[]> {\n    const sceneObject = options.scopedVars?.__sceneObject?.value as GroupByVariable;\n\n    // save bandwidth\n    // TODO: remove this when we can declare the GroupByVariable in the Scene it's used\n    // without messing up the variable URL sync\n    if (!sceneObject.isActive) {\n      return [];\n    }\n\n    const { dataSourceUid, serviceName, profileMetricId, query, from, to } = this.getParams(options);\n\n    if (!serviceName || !profileMetricId) {\n      logger.warn(\n        'LabelsDataSource: either serviceName=\"%s\" and/or profileMetricId=\"%s\" is empty! Discarding request.',\n        serviceName,\n        profileMetricId\n      );\n      return [];\n    }\n\n    labelsRepository.setApiClient(new LabelsApiClient({ dataSourceUid }));\n\n    const labels = (await labelsRepository.listLabels({ query, from, to })).filter(\n      ({ value }) => !isPrivateLabel(value)\n    );\n\n    const labelsWithValuesAndCount = await Promise.all(\n      labels.map(({ value }) =>\n        limit(async () => {\n          const values = await labelsRepository.listLabelValues({ query, from, to, label: value });\n          const count = values.length;\n          return {\n            // TODO: check if there's a better way\n            value: JSON.stringify({\n              value,\n              groupBy: {\n                label: value,\n                values,\n              },\n            }),\n            text: `${value} (${count})`,\n            count,\n          };\n        })\n      )\n    );\n\n    const sortedLabels = labelsWithValuesAndCount\n      .sort((a, b) => b.count - a.count)\n      .map(({ value, text }) => ({ value, text }));\n\n    return [\n      // we do this here because GroupByVariable may set its default value to the 1st element automatically\n      {\n        value: 'all',\n        text: 'All',\n      },\n      ...sortedLabels,\n    ];\n  }\n\n  async testDatasource(): Promise<TestDataSourceResponse> {\n    return {\n      status: 'success',\n      message: 'OK',\n    };\n  }\n}\n","import { DataFrame } from '@grafana/data';\nimport { merge } from 'lodash';\nimport { map, Observable } from 'rxjs';\n\nimport { getSeriesStatsValue } from '../../../infrastructure/helpers/getSeriesStatsValue';\nimport { LabelsDataSource } from '../../../infrastructure/labels/LabelsDataSource';\n\n// General note: because (e.g.) SceneLabelValuesTimeseries sets the data provider in its constructor, data can come as undefined, hence all the optional chaining operators\n// in the transformers below\n\nexport const addRefId = () => (source: Observable<DataFrame[]>) =>\n  source.pipe(map((data: DataFrame[]) => data?.map((d, i) => merge(d, { refId: `${d.refId}-${i}` }))));\n\nexport const addStats = () => (source: Observable<DataFrame[]>) =>\n  source.pipe(\n    map((data: DataFrame[]) => {\n      const totalSeriesCount = data?.length;\n\n      return data?.map((d) => {\n        const allValuesSum = d.fields\n          ?.find((field) => field.type === 'number')\n          ?.values.reduce((acc: number, value: number) => acc + value, 0);\n\n        return merge(d, {\n          meta: {\n            stats: [\n              {\n                displayName: 'totalSeriesCount',\n                value: totalSeriesCount,\n              },\n              {\n                displayName: 'allValuesSum',\n                value: allValuesSum,\n              },\n            ],\n          },\n        });\n      });\n    })\n  );\n\n// depends on the \"addStats\" transformation to work properly\nexport const sortSeries = () => (source: Observable<DataFrame[]>) =>\n  source.pipe(\n    map((data: DataFrame[]) =>\n      data?.sort((d1, d2) => {\n        const d1Sum = getSeriesStatsValue(d1, 'allValuesSum') || 0;\n        const d2Sum = getSeriesStatsValue(d2, 'allValuesSum') || 0;\n        return d2Sum - d1Sum;\n      })\n    )\n  );\n\nexport const limitNumberOfSeries = () => (source: Observable<DataFrame[]>) =>\n  source.pipe(map((data: DataFrame[]) => data?.slice(0, LabelsDataSource.MAX_TIMESERIES_LABEL_VALUES)));\n","import { DataFrame, FieldMatcherID, LoadingState, ThresholdsMode, VizOrientation } from '@grafana/data';\nimport {\n  PanelBuilders,\n  SceneComponentProps,\n  SceneDataTransformer,\n  SceneObjectBase,\n  SceneObjectState,\n  VizPanel,\n  VizPanelState,\n} from '@grafana/scenes';\nimport { BarGaugeDisplayMode, BarGaugeNamePlacement, BarGaugeSizing, BarGaugeValueMode } from '@grafana/schema';\nimport React from 'react';\n\nimport { EventTimeseriesDataReceived } from '../domain/events/EventTimeseriesDataReceived';\nimport { getColorByIndex } from '../helpers/getColorByIndex';\nimport { getSeriesLabelFieldName } from '../infrastructure/helpers/getSeriesLabelFieldName';\nimport { getSeriesStatsValue } from '../infrastructure/helpers/getSeriesStatsValue';\nimport { buildTimeSeriesQueryRunner } from '../infrastructure/timeseries/buildTimeSeriesQueryRunner';\nimport { addRefId, addStats, sortSeries } from './SceneByVariableRepeaterGrid/infrastructure/data-transformations';\nimport { GridItemData } from './SceneByVariableRepeaterGrid/types/GridItemData';\n\ninterface SceneLabelValuesBarGaugeState extends SceneObjectState {\n  body: VizPanel;\n}\n\nexport class SceneLabelValuesBarGauge extends SceneObjectBase<SceneLabelValuesBarGaugeState> {\n  constructor({\n    item,\n    headerActions,\n  }: {\n    item: GridItemData;\n    headerActions: (item: GridItemData) => VizPanelState['headerActions'];\n  }) {\n    super({\n      key: 'bar-gauge-label-values',\n      body: PanelBuilders.bargauge()\n        .setTitle(item.label)\n        .setData(\n          new SceneDataTransformer({\n            $data: buildTimeSeriesQueryRunner(item.queryRunnerParams),\n            transformations: [addRefId, addStats, sortSeries],\n          })\n        )\n        .setHeaderActions(headerActions(item))\n        .build(),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this, item));\n  }\n\n  onActivate(item: GridItemData) {\n    const { body } = this.state;\n\n    const sub = (body.state.$data as SceneDataTransformer)!.subscribeToState((newState) => {\n      if (newState.data?.state !== LoadingState.Done) {\n        return;\n      }\n\n      const { series } = newState.data;\n\n      if (series?.length) {\n        body.setState(this.getConfig(item, series));\n      }\n\n      // we publish the event only after setting the new config so that the subscribers can modify it\n      this.publishEvent(new EventTimeseriesDataReceived({ series }), true);\n    });\n\n    return () => {\n      sub.unsubscribe();\n    };\n  }\n\n  getConfig(item: GridItemData, series: DataFrame[]) {\n    let max = Number.NEGATIVE_INFINITY;\n\n    for (const s of series) {\n      const allValuesSum = getSeriesStatsValue(s, 'allValuesSum') || 0;\n\n      if (allValuesSum > max) {\n        max = allValuesSum;\n      }\n    }\n\n    const groupByLabel = item.queryRunnerParams.groupBy?.label;\n\n    const description = groupByLabel ? 'This panel displays aggregate values over the current time period' : undefined;\n\n    return {\n      title: series.length > 1 ? `${item.label} (${series.length})` : item.label,\n      description,\n      options: {\n        reduceOptions: { values: false, calcs: ['sum'] },\n        orientation: VizOrientation.Horizontal,\n        displayMode: BarGaugeDisplayMode.Gradient,\n        valueMode: BarGaugeValueMode.Text,\n        showUnfilled: true,\n        sizing: BarGaugeSizing.Manual,\n        text: { titleSize: 13, valueSize: 13 },\n        namePlacement: BarGaugeNamePlacement.Top,\n        minVizHeight: 36,\n        maxVizHeight: 36,\n        legend: {\n          showLegend: false,\n        },\n      },\n      fieldConfig: {\n        defaults: {\n          // we force the label value because the overrides don't seem to work when we receive a single serie\n          displayName: series.length === 1 ? groupByLabel : undefined,\n          min: 0,\n          max,\n          thresholds: {\n            mode: ThresholdsMode.Percentage,\n            steps: [],\n          },\n        },\n        overrides: this.getOverrides(item, series),\n      },\n    };\n  }\n\n  getOverrides(item: GridItemData, series: DataFrame[]) {\n    const { index: startColorIndex, queryRunnerParams } = item;\n    const groupByLabel = queryRunnerParams.groupBy?.label;\n\n    return series.map((s, i) => ({\n      matcher: { id: FieldMatcherID.byFrameRefID, options: s.refId },\n      properties: [\n        {\n          id: 'displayName',\n          value: getSeriesLabelFieldName(s.fields[1], groupByLabel),\n        },\n        {\n          id: 'color',\n          value: { mode: 'fixed', fixedColor: getColorByIndex(startColorIndex + i) },\n        },\n      ],\n    }));\n  }\n\n  static Component({ model }: SceneComponentProps<SceneLabelValuesBarGauge>) {\n    const { body } = model.useState();\n\n    return <body.Component model={body} />;\n  }\n}\n","import { DataFrame, FieldMatcherID, getValueFormat, LoadingState } from '@grafana/data';\nimport {\n  PanelBuilders,\n  SceneComponentProps,\n  SceneDataTransformer,\n  SceneObjectBase,\n  SceneObjectState,\n  VizPanel,\n  VizPanelState,\n} from '@grafana/scenes';\nimport { SortOrder } from '@grafana/schema';\nimport { LegendDisplayMode, TooltipDisplayMode, VizLegendOptions } from '@grafana/ui';\nimport React from 'react';\n\nimport { EventTimeseriesDataReceived } from '../domain/events/EventTimeseriesDataReceived';\nimport { getColorByIndex } from '../helpers/getColorByIndex';\nimport { getSeriesLabelFieldName } from '../infrastructure/helpers/getSeriesLabelFieldName';\nimport { getSeriesStatsValue } from '../infrastructure/helpers/getSeriesStatsValue';\nimport { buildTimeSeriesQueryRunner } from '../infrastructure/timeseries/buildTimeSeriesQueryRunner';\nimport { addRefId, addStats, sortSeries } from './SceneByVariableRepeaterGrid/infrastructure/data-transformations';\nimport { GridItemData } from './SceneByVariableRepeaterGrid/types/GridItemData';\n\ninterface SceneLabelValuesHistogramState extends SceneObjectState {\n  body: VizPanel;\n  legendPlacement: VizLegendOptions['placement'];\n}\n\nexport class SceneLabelValuesHistogram extends SceneObjectBase<SceneLabelValuesHistogramState> {\n  constructor({\n    item,\n    headerActions,\n    legendPlacement,\n  }: {\n    item: GridItemData;\n    headerActions: (item: GridItemData) => VizPanelState['headerActions'];\n    legendPlacement?: SceneLabelValuesHistogramState['legendPlacement'];\n  }) {\n    super({\n      key: 'histogram-label-values',\n      legendPlacement: legendPlacement || 'bottom',\n      body: PanelBuilders.histogram()\n        .setTitle(item.label)\n        .setData(\n          new SceneDataTransformer({\n            $data: buildTimeSeriesQueryRunner(item.queryRunnerParams),\n            transformations: [addRefId, addStats, sortSeries],\n          })\n        )\n        .setHeaderActions(headerActions(item))\n        .build(),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this, item));\n  }\n\n  onActivate(item: GridItemData) {\n    const { body } = this.state;\n\n    const sub = (body.state.$data as SceneDataTransformer)!.subscribeToState((newState) => {\n      if (newState.data?.state !== LoadingState.Done) {\n        return;\n      }\n\n      const { series } = newState.data;\n\n      if (series?.length) {\n        body.setState(this.getConfig(item, series));\n      }\n\n      // we publish the event only after setting the new config so that the subscribers can modify it\n      this.publishEvent(new EventTimeseriesDataReceived({ series }), true);\n    });\n\n    return () => {\n      sub.unsubscribe();\n    };\n  }\n\n  getConfig(item: GridItemData, series: DataFrame[]) {\n    const { legendPlacement } = this.state;\n    const groupByLabel = item.queryRunnerParams.groupBy?.label;\n\n    return {\n      title: series.length > 1 ? `${item.label} (${series.length})` : item.label,\n      options: {\n        tooltip: {\n          mode: TooltipDisplayMode.Single,\n          sort: SortOrder.None,\n        },\n        legend: {\n          showLegend: true,\n          displayMode: LegendDisplayMode.List,\n          placement: legendPlacement,\n          calcs: [],\n        },\n      },\n      fieldConfig: {\n        defaults: {\n          // we force the label value because the overrides don't seem to work when we receive a single serie\n          displayName: series.length === 1 ? groupByLabel : undefined,\n          custom: {\n            lineWidth: 1,\n          },\n        },\n        overrides: this.getOverrides(item, series),\n      },\n    };\n  }\n\n  getOverrides(item: GridItemData, series: DataFrame[]) {\n    const { index: startColorIndex, queryRunnerParams } = item;\n    const groupByLabel = queryRunnerParams.groupBy?.label;\n\n    return series.map((s, i) => {\n      const metricField = s.fields[1];\n      let displayName = groupByLabel ? getSeriesLabelFieldName(metricField, groupByLabel) : metricField.name;\n\n      if (series.length === 1) {\n        const allValuesSum = getSeriesStatsValue(s, 'allValuesSum') || 0;\n        const formattedValue = getValueFormat(metricField.config.unit)(allValuesSum);\n\n        displayName = `total ${displayName} = ${formattedValue.text}${formattedValue.suffix}`;\n      }\n\n      return {\n        matcher: { id: FieldMatcherID.byFrameRefID, options: s.refId },\n        properties: [\n          {\n            id: 'displayName',\n            value: displayName,\n          },\n          {\n            id: 'color',\n            value: { mode: 'fixed', fixedColor: getColorByIndex(startColorIndex + i) },\n          },\n        ],\n      };\n    });\n  }\n\n  static Component({ model }: SceneComponentProps<SceneLabelValuesHistogram>) {\n    const { body } = model.useState();\n\n    return <body.Component model={body} />;\n  }\n}\n","import { DataFrame, FieldMatcherID, getValueFormat, LoadingState, PanelMenuItem } from '@grafana/data';\nimport {\n  PanelBuilders,\n  SceneComponentProps,\n  SceneDataProvider,\n  SceneDataTransformer,\n  SceneObjectBase,\n  SceneObjectState,\n  VizPanel,\n  VizPanelMenu,\n  VizPanelState,\n} from '@grafana/scenes';\nimport { GraphGradientMode, ScaleDistribution, ScaleDistributionConfig, SortOrder } from '@grafana/schema';\nimport { LegendDisplayMode, TooltipDisplayMode, VizLegendOptions } from '@grafana/ui';\nimport { merge } from 'lodash';\nimport React from 'react';\n\nimport { EventTimeseriesDataReceived } from '../domain/events/EventTimeseriesDataReceived';\nimport { getColorByIndex } from '../helpers/getColorByIndex';\nimport { getSeriesLabelFieldName } from '../infrastructure/helpers/getSeriesLabelFieldName';\nimport { getSeriesStatsValue } from '../infrastructure/helpers/getSeriesStatsValue';\nimport { LabelsDataSource } from '../infrastructure/labels/LabelsDataSource';\nimport { buildTimeSeriesQueryRunner } from '../infrastructure/timeseries/buildTimeSeriesQueryRunner';\nimport {\n  addRefId,\n  addStats,\n  limitNumberOfSeries,\n  sortSeries,\n} from './SceneByVariableRepeaterGrid/infrastructure/data-transformations';\nimport { GridItemData } from './SceneByVariableRepeaterGrid/types/GridItemData';\n\ninterface SceneLabelValuesTimeseriesState extends SceneObjectState {\n  item: GridItemData;\n  headerActions: (item: GridItemData) => VizPanelState['headerActions'];\n  body: VizPanel;\n  displayAllValues: boolean;\n  legendPlacement: VizLegendOptions['placement'];\n  overrides?: (series: DataFrame[]) => VizPanelState['fieldConfig']['overrides'];\n}\n\nexport class SceneLabelValuesTimeseries extends SceneObjectBase<SceneLabelValuesTimeseriesState> {\n  constructor({\n    item,\n    headerActions,\n    displayAllValues,\n    legendPlacement,\n    data,\n    overrides,\n  }: {\n    item: SceneLabelValuesTimeseriesState['item'];\n    headerActions: SceneLabelValuesTimeseriesState['headerActions'];\n    displayAllValues?: SceneLabelValuesTimeseriesState['displayAllValues'];\n    legendPlacement?: SceneLabelValuesTimeseriesState['legendPlacement'];\n    data?: SceneDataProvider;\n    overrides?: SceneLabelValuesTimeseriesState['overrides'];\n  }) {\n    super({\n      key: 'timeseries-label-values',\n      item,\n      headerActions,\n      displayAllValues: Boolean(displayAllValues),\n      legendPlacement: legendPlacement || 'bottom',\n      overrides,\n      body: PanelBuilders.timeseries()\n        .setTitle(item.label)\n        .setData(\n          data ||\n            new SceneDataTransformer({\n              $data: buildTimeSeriesQueryRunner(item.queryRunnerParams),\n              transformations: displayAllValues\n                ? [addRefId, addStats, sortSeries]\n                : [addRefId, addStats, sortSeries, limitNumberOfSeries],\n            })\n        )\n        .setHeaderActions(headerActions(item))\n        .build(),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    const { body } = this.state;\n\n    body.setState({ menu: this.buildMenu() });\n\n    const sub = (body.state.$data as SceneDataProvider).subscribeToState((newState, prevState) => {\n      if (newState.data?.state !== LoadingState.Done) {\n        return;\n      }\n\n      // ensure we retain the previous annotations, if they exist\n      if (!newState.data.annotations?.length && prevState.data?.annotations?.length) {\n        newState.data.annotations = prevState.data.annotations;\n      }\n\n      const { series } = newState.data;\n\n      if (series?.length) {\n        const config = this.state.displayAllValues ? this.getAllValuesConfig(series) : this.getConfig(series);\n        body.setState(merge({}, body.state, config));\n      }\n\n      // we publish the event only after setting the new config so that the subscribers can modify it\n      // (e.g. sync y-axis in SceneExploreDiffFlameGraphs.tsx)\n      this.publishEvent(new EventTimeseriesDataReceived({ series }), true);\n    });\n\n    return () => {\n      sub.unsubscribe();\n    };\n  }\n\n  buildMenu(selectedScaleIndex = 0): VizPanelMenu {\n    const scaleSubMenu = [\n      {\n        index: 0,\n        text: 'Linear',\n        scaleDistribution: { type: ScaleDistribution.Linear },\n      },\n      {\n        index: 1,\n        text: 'Log2',\n        scaleDistribution: { type: ScaleDistribution.Log, log: 2 },\n      },\n    ].map((option) => ({\n      text: `${selectedScaleIndex === option.index ? ' ' : ''}${option.text}`,\n      onClick: () => this.onClickScaleOption(option),\n    }));\n\n    return new VizPanelMenu({\n      items: [\n        {\n          text: 'Scale',\n          type: 'group',\n          subMenu: scaleSubMenu,\n        },\n      ],\n    });\n  }\n\n  onClickScaleOption(option: PanelMenuItem & { index: number; scaleDistribution: ScaleDistributionConfig }) {\n    const { scaleDistribution, text, index } = option;\n    const { body } = this.state;\n\n    body.clearFieldConfigCache();\n\n    body.setState({\n      menu: this.buildMenu(index),\n      fieldConfig: merge({}, body.state.fieldConfig, {\n        defaults: {\n          custom: {\n            scaleDistribution,\n            axisLabel: scaleDistribution.type !== ScaleDistribution.Linear ? text : '',\n          },\n        },\n      }),\n    });\n  }\n\n  getConfig(series: DataFrame[]) {\n    const { body, item, legendPlacement } = this.state;\n    let { title } = body.state;\n    let description;\n\n    if (item.queryRunnerParams.groupBy?.label) {\n      title = series.length > 1 ? `${item.label} (${series.length})` : item.label;\n\n      const totalSeriesCount = getSeriesStatsValue(series[0], 'totalSeriesCount') || 0;\n      const hasTooManySeries = totalSeriesCount > LabelsDataSource.MAX_TIMESERIES_LABEL_VALUES;\n\n      description = hasTooManySeries\n        ? `The number of series on this panel has been reduced from ${totalSeriesCount} to ${LabelsDataSource.MAX_TIMESERIES_LABEL_VALUES} to preserve readability. To view all the data, click on the expand icon on this panel.`\n        : undefined;\n    }\n\n    return {\n      title,\n      description,\n      options: {\n        tooltip: {\n          mode: 'single',\n          sort: 'none',\n        },\n        legend: {\n          showLegend: true,\n          displayMode: 'list',\n          placement: legendPlacement,\n        },\n      },\n      fieldConfig: {\n        defaults: {\n          min: 0,\n          custom: {\n            fillOpacity: series.length >= LabelsDataSource.MAX_TIMESERIES_LABEL_VALUES ? 0 : 9,\n            gradientMode: series.length === 1 ? GraphGradientMode.None : GraphGradientMode.Opacity,\n            pointSize: 3,\n          },\n        },\n        overrides: this.getOverrides(series),\n      },\n    };\n  }\n\n  getAllValuesConfig(series: DataFrame[]) {\n    const { legendPlacement } = this.state;\n\n    return {\n      options: {\n        tooltip: {\n          mode: TooltipDisplayMode.Single,\n          sort: SortOrder.None,\n        },\n        legend: {\n          showLegend: true,\n          displayMode: LegendDisplayMode.List,\n          placement: legendPlacement,\n          calcs: [],\n        },\n      },\n      fieldConfig: {\n        defaults: {\n          min: 0,\n          custom: {\n            fillOpacity: 0,\n            pointSize: 5,\n          },\n        },\n        overrides: this.getOverrides(series),\n      },\n    };\n  }\n\n  getOverrides(series: DataFrame[]) {\n    if (this.state.overrides) {\n      return this.state.overrides(series);\n    }\n\n    const { item } = this.state;\n    const groupByLabel = item.queryRunnerParams.groupBy?.label;\n\n    return series.map((s, i) => {\n      const metricField = s.fields[1];\n      let displayName = groupByLabel ? getSeriesLabelFieldName(metricField, groupByLabel) : metricField.name;\n\n      if (series.length === 1) {\n        const allValuesSum = getSeriesStatsValue(s, 'allValuesSum') || 0;\n        const formattedValue = getValueFormat(metricField.config.unit)(allValuesSum);\n\n        displayName = `total ${displayName} = ${formattedValue.text}${formattedValue.suffix}`;\n      }\n\n      return {\n        matcher: { id: FieldMatcherID.byFrameRefID, options: s.refId },\n        properties: [\n          {\n            id: 'displayName',\n            value: displayName,\n          },\n          {\n            id: 'color',\n            value: { mode: 'fixed', fixedColor: getColorByIndex(item.index + i) },\n          },\n        ],\n      };\n    });\n  }\n\n  updateTitle(newTitle: string) {\n    this.state.body.setState({ title: newTitle });\n  }\n\n  static Component({ model }: SceneComponentProps<SceneLabelValuesTimeseries>) {\n    const { body } = model.useState();\n\n    return <body.Component model={body} />;\n  }\n}\n","import { PanelType } from '../components/SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher';\nimport { SceneLabelValuesBarGauge } from '../components/SceneLabelValuesBarGauge';\nimport { SceneLabelValuesHistogram } from '../components/SceneLabelValuesHistogram';\nimport { SceneLabelValuesTimeseries } from '../components/SceneLabelValuesTimeseries';\n\nexport function vizPanelBuilder(panelType: PanelType, options: any) {\n  switch (panelType) {\n    case PanelType.BARGAUGE:\n      return new SceneLabelValuesBarGauge(options);\n\n    case PanelType.HISTOGRAM:\n      return new SceneLabelValuesHistogram(options);\n\n    case PanelType.TIMESERIES:\n    default:\n      return new SceneLabelValuesTimeseries(options);\n  }\n}\n","// src/index.ts\nimport * as React from \"react\";\n\n// src/helpers.ts\nvar styleToObject = (input) => {\n  if (typeof input !== \"string\") {\n    return {};\n  }\n  return input.split(/ ?; ?/).reduce((acc, item) => {\n    const [key, value] = item.split(/ ?: ?/).map((d, index) => index === 0 ? d.replace(/\\s+/g, \"\") : d.trim());\n    if (key && value) {\n      const nextKey = key.replace(/(\\w)-(\\w)/g, (_$0, $1, $2) => `${$1}${$2.toUpperCase()}`);\n      let nextValue = value.trim();\n      if (!Number.isNaN(Number(value))) {\n        nextValue = Number(value);\n      }\n      acc[key.startsWith(\"-\") ? key : nextKey] = nextValue;\n    }\n    return acc;\n  }, {});\n};\nfunction randomString(length = 6) {\n  const characters = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n  let result = \"\";\n  for (let index = length; index > 0; --index) {\n    result += characters[Math.round(Math.random() * (characters.length - 1))];\n  }\n  return result;\n}\nvar noTextChildNodes = [\n  \"br\",\n  \"col\",\n  \"colgroup\",\n  \"dl\",\n  \"hr\",\n  \"iframe\",\n  \"img\",\n  \"input\",\n  \"link\",\n  \"menuitem\",\n  \"meta\",\n  \"ol\",\n  \"param\",\n  \"select\",\n  \"table\",\n  \"tbody\",\n  \"tfoot\",\n  \"thead\",\n  \"tr\",\n  \"ul\",\n  \"wbr\"\n];\nvar possibleStandardNames = {\n  // HTML\n  \"accept-charset\": \"acceptCharset\",\n  acceptcharset: \"acceptCharset\",\n  accesskey: \"accessKey\",\n  allowfullscreen: \"allowFullScreen\",\n  autocapitalize: \"autoCapitalize\",\n  autocomplete: \"autoComplete\",\n  autocorrect: \"autoCorrect\",\n  autofocus: \"autoFocus\",\n  autoplay: \"autoPlay\",\n  autosave: \"autoSave\",\n  cellpadding: \"cellPadding\",\n  cellspacing: \"cellSpacing\",\n  charset: \"charSet\",\n  class: \"className\",\n  classid: \"classID\",\n  classname: \"className\",\n  colspan: \"colSpan\",\n  contenteditable: \"contentEditable\",\n  contextmenu: \"contextMenu\",\n  controlslist: \"controlsList\",\n  crossorigin: \"crossOrigin\",\n  dangerouslysetinnerhtml: \"dangerouslySetInnerHTML\",\n  datetime: \"dateTime\",\n  defaultchecked: \"defaultChecked\",\n  defaultvalue: \"defaultValue\",\n  enctype: \"encType\",\n  for: \"htmlFor\",\n  formmethod: \"formMethod\",\n  formaction: \"formAction\",\n  formenctype: \"formEncType\",\n  formnovalidate: \"formNoValidate\",\n  formtarget: \"formTarget\",\n  frameborder: \"frameBorder\",\n  hreflang: \"hrefLang\",\n  htmlfor: \"htmlFor\",\n  httpequiv: \"httpEquiv\",\n  \"http-equiv\": \"httpEquiv\",\n  icon: \"icon\",\n  innerhtml: \"innerHTML\",\n  inputmode: \"inputMode\",\n  itemid: \"itemID\",\n  itemprop: \"itemProp\",\n  itemref: \"itemRef\",\n  itemscope: \"itemScope\",\n  itemtype: \"itemType\",\n  keyparams: \"keyParams\",\n  keytype: \"keyType\",\n  marginwidth: \"marginWidth\",\n  marginheight: \"marginHeight\",\n  maxlength: \"maxLength\",\n  mediagroup: \"mediaGroup\",\n  minlength: \"minLength\",\n  nomodule: \"noModule\",\n  novalidate: \"noValidate\",\n  playsinline: \"playsInline\",\n  radiogroup: \"radioGroup\",\n  readonly: \"readOnly\",\n  referrerpolicy: \"referrerPolicy\",\n  rowspan: \"rowSpan\",\n  spellcheck: \"spellCheck\",\n  srcdoc: \"srcDoc\",\n  srclang: \"srcLang\",\n  srcset: \"srcSet\",\n  tabindex: \"tabIndex\",\n  typemustmatch: \"typeMustMatch\",\n  usemap: \"useMap\",\n  // SVG\n  accentheight: \"accentHeight\",\n  \"accent-height\": \"accentHeight\",\n  alignmentbaseline: \"alignmentBaseline\",\n  \"alignment-baseline\": \"alignmentBaseline\",\n  allowreorder: \"allowReorder\",\n  arabicform: \"arabicForm\",\n  \"arabic-form\": \"arabicForm\",\n  attributename: \"attributeName\",\n  attributetype: \"attributeType\",\n  autoreverse: \"autoReverse\",\n  basefrequency: \"baseFrequency\",\n  baselineshift: \"baselineShift\",\n  \"baseline-shift\": \"baselineShift\",\n  baseprofile: \"baseProfile\",\n  calcmode: \"calcMode\",\n  capheight: \"capHeight\",\n  \"cap-height\": \"capHeight\",\n  clippath: \"clipPath\",\n  \"clip-path\": \"clipPath\",\n  clippathunits: \"clipPathUnits\",\n  cliprule: \"clipRule\",\n  \"clip-rule\": \"clipRule\",\n  colorinterpolation: \"colorInterpolation\",\n  \"color-interpolation\": \"colorInterpolation\",\n  colorinterpolationfilters: \"colorInterpolationFilters\",\n  \"color-interpolation-filters\": \"colorInterpolationFilters\",\n  colorprofile: \"colorProfile\",\n  \"color-profile\": \"colorProfile\",\n  colorrendering: \"colorRendering\",\n  \"color-rendering\": \"colorRendering\",\n  contentscripttype: \"contentScriptType\",\n  contentstyletype: \"contentStyleType\",\n  diffuseconstant: \"diffuseConstant\",\n  dominantbaseline: \"dominantBaseline\",\n  \"dominant-baseline\": \"dominantBaseline\",\n  edgemode: \"edgeMode\",\n  enablebackground: \"enableBackground\",\n  \"enable-background\": \"enableBackground\",\n  externalresourcesrequired: \"externalResourcesRequired\",\n  fillopacity: \"fillOpacity\",\n  \"fill-opacity\": \"fillOpacity\",\n  fillrule: \"fillRule\",\n  \"fill-rule\": \"fillRule\",\n  filterres: \"filterRes\",\n  filterunits: \"filterUnits\",\n  floodopacity: \"floodOpacity\",\n  \"flood-opacity\": \"floodOpacity\",\n  floodcolor: \"floodColor\",\n  \"flood-color\": \"floodColor\",\n  fontfamily: \"fontFamily\",\n  \"font-family\": \"fontFamily\",\n  fontsize: \"fontSize\",\n  \"font-size\": \"fontSize\",\n  fontsizeadjust: \"fontSizeAdjust\",\n  \"font-size-adjust\": \"fontSizeAdjust\",\n  fontstretch: \"fontStretch\",\n  \"font-stretch\": \"fontStretch\",\n  fontstyle: \"fontStyle\",\n  \"font-style\": \"fontStyle\",\n  fontvariant: \"fontVariant\",\n  \"font-variant\": \"fontVariant\",\n  fontweight: \"fontWeight\",\n  \"font-weight\": \"fontWeight\",\n  glyphname: \"glyphName\",\n  \"glyph-name\": \"glyphName\",\n  glyphorientationhorizontal: \"glyphOrientationHorizontal\",\n  \"glyph-orientation-horizontal\": \"glyphOrientationHorizontal\",\n  glyphorientationvertical: \"glyphOrientationVertical\",\n  \"glyph-orientation-vertical\": \"glyphOrientationVertical\",\n  glyphref: \"glyphRef\",\n  gradienttransform: \"gradientTransform\",\n  gradientunits: \"gradientUnits\",\n  horizadvx: \"horizAdvX\",\n  \"horiz-adv-x\": \"horizAdvX\",\n  horizoriginx: \"horizOriginX\",\n  \"horiz-origin-x\": \"horizOriginX\",\n  imagerendering: \"imageRendering\",\n  \"image-rendering\": \"imageRendering\",\n  kernelmatrix: \"kernelMatrix\",\n  kernelunitlength: \"kernelUnitLength\",\n  keypoints: \"keyPoints\",\n  keysplines: \"keySplines\",\n  keytimes: \"keyTimes\",\n  lengthadjust: \"lengthAdjust\",\n  letterspacing: \"letterSpacing\",\n  \"letter-spacing\": \"letterSpacing\",\n  lightingcolor: \"lightingColor\",\n  \"lighting-color\": \"lightingColor\",\n  limitingconeangle: \"limitingConeAngle\",\n  markerend: \"markerEnd\",\n  \"marker-end\": \"markerEnd\",\n  markerheight: \"markerHeight\",\n  markermid: \"markerMid\",\n  \"marker-mid\": \"markerMid\",\n  markerstart: \"markerStart\",\n  \"marker-start\": \"markerStart\",\n  markerunits: \"markerUnits\",\n  markerwidth: \"markerWidth\",\n  maskcontentunits: \"maskContentUnits\",\n  maskunits: \"maskUnits\",\n  numoctaves: \"numOctaves\",\n  overlineposition: \"overlinePosition\",\n  \"overline-position\": \"overlinePosition\",\n  overlinethickness: \"overlineThickness\",\n  \"overline-thickness\": \"overlineThickness\",\n  paintorder: \"paintOrder\",\n  \"paint-order\": \"paintOrder\",\n  \"panose-1\": \"panose1\",\n  pathlength: \"pathLength\",\n  patterncontentunits: \"patternContentUnits\",\n  patterntransform: \"patternTransform\",\n  patternunits: \"patternUnits\",\n  pointerevents: \"pointerEvents\",\n  \"pointer-events\": \"pointerEvents\",\n  pointsatx: \"pointsAtX\",\n  pointsaty: \"pointsAtY\",\n  pointsatz: \"pointsAtZ\",\n  preservealpha: \"preserveAlpha\",\n  preserveaspectratio: \"preserveAspectRatio\",\n  primitiveunits: \"primitiveUnits\",\n  refx: \"refX\",\n  refy: \"refY\",\n  renderingintent: \"renderingIntent\",\n  \"rendering-intent\": \"renderingIntent\",\n  repeatcount: \"repeatCount\",\n  repeatdur: \"repeatDur\",\n  requiredextensions: \"requiredExtensions\",\n  requiredfeatures: \"requiredFeatures\",\n  shaperendering: \"shapeRendering\",\n  \"shape-rendering\": \"shapeRendering\",\n  specularconstant: \"specularConstant\",\n  specularexponent: \"specularExponent\",\n  spreadmethod: \"spreadMethod\",\n  startoffset: \"startOffset\",\n  stddeviation: \"stdDeviation\",\n  stitchtiles: \"stitchTiles\",\n  stopcolor: \"stopColor\",\n  \"stop-color\": \"stopColor\",\n  stopopacity: \"stopOpacity\",\n  \"stop-opacity\": \"stopOpacity\",\n  strikethroughposition: \"strikethroughPosition\",\n  \"strikethrough-position\": \"strikethroughPosition\",\n  strikethroughthickness: \"strikethroughThickness\",\n  \"strikethrough-thickness\": \"strikethroughThickness\",\n  strokedasharray: \"strokeDasharray\",\n  \"stroke-dasharray\": \"strokeDasharray\",\n  strokedashoffset: \"strokeDashoffset\",\n  \"stroke-dashoffset\": \"strokeDashoffset\",\n  strokelinecap: \"strokeLinecap\",\n  \"stroke-linecap\": \"strokeLinecap\",\n  strokelinejoin: \"strokeLinejoin\",\n  \"stroke-linejoin\": \"strokeLinejoin\",\n  strokemiterlimit: \"strokeMiterlimit\",\n  \"stroke-miterlimit\": \"strokeMiterlimit\",\n  strokewidth: \"strokeWidth\",\n  \"stroke-width\": \"strokeWidth\",\n  strokeopacity: \"strokeOpacity\",\n  \"stroke-opacity\": \"strokeOpacity\",\n  suppresscontenteditablewarning: \"suppressContentEditableWarning\",\n  suppresshydrationwarning: \"suppressHydrationWarning\",\n  surfacescale: \"surfaceScale\",\n  systemlanguage: \"systemLanguage\",\n  tablevalues: \"tableValues\",\n  targetx: \"targetX\",\n  targety: \"targetY\",\n  textanchor: \"textAnchor\",\n  \"text-anchor\": \"textAnchor\",\n  textdecoration: \"textDecoration\",\n  \"text-decoration\": \"textDecoration\",\n  textlength: \"textLength\",\n  textrendering: \"textRendering\",\n  \"text-rendering\": \"textRendering\",\n  underlineposition: \"underlinePosition\",\n  \"underline-position\": \"underlinePosition\",\n  underlinethickness: \"underlineThickness\",\n  \"underline-thickness\": \"underlineThickness\",\n  unicodebidi: \"unicodeBidi\",\n  \"unicode-bidi\": \"unicodeBidi\",\n  unicoderange: \"unicodeRange\",\n  \"unicode-range\": \"unicodeRange\",\n  unitsperem: \"unitsPerEm\",\n  \"units-per-em\": \"unitsPerEm\",\n  unselectable: \"unselectable\",\n  valphabetic: \"vAlphabetic\",\n  \"v-alphabetic\": \"vAlphabetic\",\n  vectoreffect: \"vectorEffect\",\n  \"vector-effect\": \"vectorEffect\",\n  vertadvy: \"vertAdvY\",\n  \"vert-adv-y\": \"vertAdvY\",\n  vertoriginx: \"vertOriginX\",\n  \"vert-origin-x\": \"vertOriginX\",\n  vertoriginy: \"vertOriginY\",\n  \"vert-origin-y\": \"vertOriginY\",\n  vhanging: \"vHanging\",\n  \"v-hanging\": \"vHanging\",\n  videographic: \"vIdeographic\",\n  \"v-ideographic\": \"vIdeographic\",\n  viewbox: \"viewBox\",\n  viewtarget: \"viewTarget\",\n  vmathematical: \"vMathematical\",\n  \"v-mathematical\": \"vMathematical\",\n  wordspacing: \"wordSpacing\",\n  \"word-spacing\": \"wordSpacing\",\n  writingmode: \"writingMode\",\n  \"writing-mode\": \"writingMode\",\n  xchannelselector: \"xChannelSelector\",\n  xheight: \"xHeight\",\n  \"x-height\": \"xHeight\",\n  xlinkactuate: \"xlinkActuate\",\n  \"xlink:actuate\": \"xlinkActuate\",\n  xlinkarcrole: \"xlinkArcrole\",\n  \"xlink:arcrole\": \"xlinkArcrole\",\n  xlinkhref: \"xlinkHref\",\n  \"xlink:href\": \"xlinkHref\",\n  xlinkrole: \"xlinkRole\",\n  \"xlink:role\": \"xlinkRole\",\n  xlinkshow: \"xlinkShow\",\n  \"xlink:show\": \"xlinkShow\",\n  xlinktitle: \"xlinkTitle\",\n  \"xlink:title\": \"xlinkTitle\",\n  xlinktype: \"xlinkType\",\n  \"xlink:type\": \"xlinkType\",\n  xmlbase: \"xmlBase\",\n  \"xml:base\": \"xmlBase\",\n  xmllang: \"xmlLang\",\n  \"xml:lang\": \"xmlLang\",\n  \"xml:space\": \"xmlSpace\",\n  xmlnsxlink: \"xmlnsXlink\",\n  \"xmlns:xlink\": \"xmlnsXlink\",\n  xmlspace: \"xmlSpace\",\n  ychannelselector: \"yChannelSelector\",\n  zoomandpan: \"zoomAndPan\",\n  // event handlers\n  onblur: \"onBlur\",\n  onchange: \"onChange\",\n  onclick: \"onClick\",\n  oncontextmenu: \"onContextMenu\",\n  ondoubleclick: \"onDoubleClick\",\n  ondrag: \"onDrag\",\n  ondragend: \"onDragEnd\",\n  ondragenter: \"onDragEnter\",\n  ondragexit: \"onDragExit\",\n  ondragleave: \"onDragLeave\",\n  ondragover: \"onDragOver\",\n  ondragstart: \"onDragStart\",\n  ondrop: \"onDrop\",\n  onerror: \"onError\",\n  onfocus: \"onFocus\",\n  oninput: \"onInput\",\n  oninvalid: \"onInvalid\",\n  onkeydown: \"onKeyDown\",\n  onkeypress: \"onKeyPress\",\n  onkeyup: \"onKeyUp\",\n  onload: \"onLoad\",\n  onmousedown: \"onMouseDown\",\n  onmouseenter: \"onMouseEnter\",\n  onmouseleave: \"onMouseLeave\",\n  onmousemove: \"onMouseMove\",\n  onmouseout: \"onMouseOut\",\n  onmouseover: \"onMouseOver\",\n  onmouseup: \"onMouseUp\",\n  onscroll: \"onScroll\",\n  onsubmit: \"onSubmit\",\n  ontouchcancel: \"onTouchCancel\",\n  ontouchend: \"onTouchEnd\",\n  ontouchmove: \"onTouchMove\",\n  ontouchstart: \"onTouchStart\",\n  onwheel: \"onWheel\"\n};\n\n// src/index.ts\nfunction getReactNode(node, options) {\n  const { key, level, ...rest } = options;\n  switch (node.nodeType) {\n    case 1: {\n      return React.createElement(\n        parseName(node.nodeName),\n        parseAttributes(node, key),\n        parseChildren(node.childNodes, level, rest)\n      );\n    }\n    case 3: {\n      const nodeText = node.nodeValue?.toString() ?? \"\";\n      if (!rest.allowWhiteSpaces && /^\\s+$/.test(nodeText) && !/[\\u00A0\\u202F]/.test(nodeText)) {\n        return null;\n      }\n      if (!node.parentNode) {\n        return nodeText;\n      }\n      const parentNodeName = node.parentNode.nodeName.toLowerCase();\n      if (noTextChildNodes.includes(parentNodeName)) {\n        if (/\\S/.test(nodeText)) {\n          console.warn(\n            `A textNode is not allowed inside '${parentNodeName}'. Your text \"${nodeText}\" will be ignored`\n          );\n        }\n        return null;\n      }\n      return nodeText;\n    }\n    case 8: {\n      return null;\n    }\n    case 11: {\n      return parseChildren(node.childNodes, level, options);\n    }\n    default: {\n      return null;\n    }\n  }\n}\nfunction parseAttributes(node, reactKey) {\n  const attributes = {\n    key: reactKey\n  };\n  if (node instanceof Element) {\n    const nodeClassNames = node.getAttribute(\"class\");\n    if (nodeClassNames) {\n      attributes.className = nodeClassNames;\n    }\n    [...node.attributes].forEach((d) => {\n      switch (d.name) {\n        case \"class\":\n          break;\n        case \"style\":\n          attributes[d.name] = styleToObject(d.value);\n          break;\n        case \"allowfullscreen\":\n        case \"allowpaymentrequest\":\n        case \"async\":\n        case \"autofocus\":\n        case \"autoplay\":\n        case \"checked\":\n        case \"controls\":\n        case \"default\":\n        case \"defer\":\n        case \"disabled\":\n        case \"formnovalidate\":\n        case \"hidden\":\n        case \"ismap\":\n        case \"itemscope\":\n        case \"loop\":\n        case \"multiple\":\n        case \"muted\":\n        case \"nomodule\":\n        case \"novalidate\":\n        case \"open\":\n        case \"readonly\":\n        case \"required\":\n        case \"reversed\":\n        case \"selected\":\n        case \"typemustmatch\":\n          attributes[possibleStandardNames[d.name] || d.name] = true;\n          break;\n        default:\n          attributes[possibleStandardNames[d.name] || d.name] = d.value;\n      }\n    });\n  }\n  return attributes;\n}\nfunction parseChildren(childNodeList, level, options) {\n  const children = [...childNodeList].map(\n    (node, index) => convertFromNode(node, {\n      ...options,\n      index,\n      level: level + 1\n    })\n  ).filter(Boolean);\n  if (!children.length) {\n    return null;\n  }\n  return children;\n}\nfunction parseName(nodeName) {\n  if (/[a-z]+[A-Z]+[a-z]+/.test(nodeName)) {\n    return nodeName;\n  }\n  return nodeName.toLowerCase();\n}\nfunction convertFromNode(input, options = {}) {\n  if (!input || !(input instanceof Node)) {\n    return null;\n  }\n  const { actions = [], index = 0, level = 0, randomKey } = options;\n  let node = input;\n  let key = `${level}-${index}`;\n  const result = [];\n  if (randomKey && level === 0) {\n    key = `${randomString()}-${key}`;\n  }\n  if (Array.isArray(actions)) {\n    actions.forEach((action) => {\n      if (action.condition(node, key, level)) {\n        if (typeof action.pre === \"function\") {\n          node = action.pre(node, key, level);\n          if (!(node instanceof Node)) {\n            node = input;\n            if (process.env.NODE_ENV !== \"production\") {\n              console.warn(\n                \"The `pre` method always must return a valid DomNode (instanceof Node) - your modification will be ignored (Hint: if you want to render a React-component, use the `post` method instead)\"\n              );\n            }\n          }\n        }\n        if (typeof action.post === \"function\") {\n          result.push(action.post(node, key, level));\n        }\n      }\n    });\n  }\n  if (result.length) {\n    return result;\n  }\n  return getReactNode(node, { key, level, ...options });\n}\nfunction convertFromString(input, options = {}) {\n  if (!input || typeof input !== \"string\") {\n    return null;\n  }\n  const {\n    includeAllNodes = false,\n    nodeOnly = false,\n    selector = \"body > *\",\n    type = \"text/html\"\n  } = options;\n  try {\n    const parser = new DOMParser();\n    const document = parser.parseFromString(input, type);\n    if (includeAllNodes) {\n      const { childNodes } = document.body;\n      if (nodeOnly) {\n        return childNodes;\n      }\n      return [...childNodes].map((node2) => convertFromNode(node2, options));\n    }\n    const node = document.querySelector(selector) || document.body.childNodes[0];\n    if (!(node instanceof Node)) {\n      throw new TypeError(\"Error parsing input\");\n    }\n    if (nodeOnly) {\n      return node;\n    }\n    return convertFromNode(node, options);\n  } catch (error) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(error);\n    }\n  }\n  return null;\n}\nfunction convert(input, options = {}) {\n  if (typeof input === \"string\") {\n    return convertFromString(input, options);\n  }\n  if (input instanceof Node) {\n    return convertFromNode(input, options);\n  }\n  return null;\n}\nexport {\n  convertFromNode,\n  convertFromString,\n  convert as default\n};\n//# sourceMappingURL=index.mjs.map","\"use client\";\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n// src/index.tsx\nimport {\n  cloneElement,\n  isValidElement,\n  useCallback,\n  useEffect as useEffect2,\n  useReducer,\n  useRef as useRef2,\n  useState\n} from \"react\";\nimport convert2 from \"react-from-dom\";\n\n// src/config.ts\nvar CACHE_NAME = \"react-inlinesvg\";\nvar CACHE_MAX_RETRIES = 10;\nvar STATUS = {\n  IDLE: \"idle\",\n  LOADING: \"loading\",\n  LOADED: \"loaded\",\n  FAILED: \"failed\",\n  READY: \"ready\",\n  UNSUPPORTED: \"unsupported\"\n};\n\n// src/modules/helpers.ts\nfunction canUseDOM() {\n  return !!(typeof window !== \"undefined\" && window.document && window.document.createElement);\n}\nfunction isSupportedEnvironment() {\n  return supportsInlineSVG() && typeof window !== \"undefined\" && window !== null;\n}\nasync function request(url, options) {\n  const response = await fetch(url, options);\n  const contentType = response.headers.get(\"content-type\");\n  const [fileType] = (contentType ?? \"\").split(/ ?; ?/);\n  if (response.status > 299) {\n    throw new Error(\"Not found\");\n  }\n  if (![\"image/svg+xml\", \"text/plain\"].some((d) => fileType.includes(d))) {\n    throw new Error(`Content type isn't valid: ${fileType}`);\n  }\n  return response.text();\n}\nfunction sleep(seconds = 1) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, seconds * 1e3);\n  });\n}\nfunction supportsInlineSVG() {\n  if (!document) {\n    return false;\n  }\n  const div = document.createElement(\"div\");\n  div.innerHTML = \"<svg />\";\n  const svg = div.firstChild;\n  return !!svg && svg.namespaceURI === \"http://www.w3.org/2000/svg\";\n}\nfunction randomCharacter(character) {\n  return character[Math.floor(Math.random() * character.length)];\n}\nfunction randomString(length) {\n  const letters = \"abcdefghijklmnopqrstuvwxyz\";\n  const numbers = \"1234567890\";\n  const charset = `${letters}${letters.toUpperCase()}${numbers}`;\n  let R = \"\";\n  for (let index = 0; index < length; index++) {\n    R += randomCharacter(charset);\n  }\n  return R;\n}\nfunction omit(input, ...filter) {\n  const output = {};\n  for (const key in input) {\n    if ({}.hasOwnProperty.call(input, key)) {\n      if (!filter.includes(key)) {\n        output[key] = input[key];\n      }\n    }\n  }\n  return output;\n}\n\n// src/modules/cache.ts\nvar CacheStore = class {\n  constructor() {\n    __publicField(this, \"cacheApi\");\n    __publicField(this, \"cacheStore\");\n    __publicField(this, \"subscribers\", []);\n    __publicField(this, \"isReady\", false);\n    this.cacheStore = /* @__PURE__ */ new Map();\n    let cacheName = CACHE_NAME;\n    let usePersistentCache = false;\n    if (canUseDOM()) {\n      cacheName = window.REACT_INLINESVG_CACHE_NAME ?? CACHE_NAME;\n      usePersistentCache = !!window.REACT_INLINESVG_PERSISTENT_CACHE && \"caches\" in window;\n    }\n    if (usePersistentCache) {\n      caches.open(cacheName).then((cache) => {\n        this.cacheApi = cache;\n        this.isReady = true;\n        this.subscribers.forEach((callback) => callback());\n      }).catch((error) => {\n        this.isReady = true;\n        console.error(`Failed to open cache: ${error.message}`);\n      });\n    } else {\n      this.isReady = true;\n    }\n  }\n  onReady(callback) {\n    if (this.isReady) {\n      callback();\n    } else {\n      this.subscribers.push(callback);\n    }\n  }\n  async get(url, fetchOptions) {\n    await (this.cacheApi ? this.fetchAndAddToPersistentCache(url, fetchOptions) : this.fetchAndAddToInternalCache(url, fetchOptions));\n    return this.cacheStore.get(url)?.content ?? \"\";\n  }\n  set(url, data) {\n    this.cacheStore.set(url, data);\n  }\n  isCached(url) {\n    return this.cacheStore.get(url)?.status === STATUS.LOADED;\n  }\n  async fetchAndAddToInternalCache(url, fetchOptions) {\n    const cache = this.cacheStore.get(url);\n    if (cache?.status === STATUS.LOADING) {\n      await this.handleLoading(url, async () => {\n        this.cacheStore.set(url, { content: \"\", status: STATUS.IDLE });\n        await this.fetchAndAddToInternalCache(url, fetchOptions);\n      });\n      return;\n    }\n    if (!cache?.content) {\n      this.cacheStore.set(url, { content: \"\", status: STATUS.LOADING });\n      try {\n        const content = await request(url, fetchOptions);\n        this.cacheStore.set(url, { content, status: STATUS.LOADED });\n      } catch (error) {\n        this.cacheStore.set(url, { content: \"\", status: STATUS.FAILED });\n        throw error;\n      }\n    }\n  }\n  async fetchAndAddToPersistentCache(url, fetchOptions) {\n    const cache = this.cacheStore.get(url);\n    if (cache?.status === STATUS.LOADED) {\n      return;\n    }\n    if (cache?.status === STATUS.LOADING) {\n      await this.handleLoading(url, async () => {\n        this.cacheStore.set(url, { content: \"\", status: STATUS.IDLE });\n        await this.fetchAndAddToPersistentCache(url, fetchOptions);\n      });\n      return;\n    }\n    this.cacheStore.set(url, { content: \"\", status: STATUS.LOADING });\n    const data = await this.cacheApi?.match(url);\n    if (data) {\n      const content = await data.text();\n      this.cacheStore.set(url, { content, status: STATUS.LOADED });\n      return;\n    }\n    try {\n      await this.cacheApi?.add(new Request(url, fetchOptions));\n      const response = await this.cacheApi?.match(url);\n      const content = await response?.text() ?? \"\";\n      this.cacheStore.set(url, { content, status: STATUS.LOADED });\n    } catch (error) {\n      this.cacheStore.set(url, { content: \"\", status: STATUS.FAILED });\n      throw error;\n    }\n  }\n  async handleLoading(url, callback) {\n    let retryCount = 0;\n    while (this.cacheStore.get(url)?.status === STATUS.LOADING && retryCount < CACHE_MAX_RETRIES) {\n      await sleep(0.1);\n      retryCount += 1;\n    }\n    if (retryCount >= CACHE_MAX_RETRIES) {\n      await callback();\n    }\n  }\n  keys() {\n    return [...this.cacheStore.keys()];\n  }\n  data() {\n    return [...this.cacheStore.entries()].map(([key, value]) => ({ [key]: value }));\n  }\n  async delete(url) {\n    if (this.cacheApi) {\n      await this.cacheApi.delete(url);\n    }\n    this.cacheStore.delete(url);\n  }\n  async clear() {\n    if (this.cacheApi) {\n      const keys = await this.cacheApi.keys();\n      for (const key of keys) {\n        await this.cacheApi.delete(key);\n      }\n    }\n    this.cacheStore.clear();\n  }\n};\n\n// src/modules/hooks.tsx\nimport { useEffect, useRef } from \"react\";\nfunction usePrevious(state) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = state;\n  });\n  return ref.current;\n}\n\n// src/modules/utils.ts\nimport convert from \"react-from-dom\";\nfunction getNode(options) {\n  const {\n    baseURL,\n    content,\n    description,\n    handleError,\n    hash,\n    preProcessor,\n    title,\n    uniquifyIDs = false\n  } = options;\n  try {\n    const svgText = processSVG(content, preProcessor);\n    const node = convert(svgText, { nodeOnly: true });\n    if (!node || !(node instanceof SVGSVGElement)) {\n      throw new Error(\"Could not convert the src to a DOM Node\");\n    }\n    const svg = updateSVGAttributes(node, { baseURL, hash, uniquifyIDs });\n    if (description) {\n      const originalDesc = svg.querySelector(\"desc\");\n      if (originalDesc?.parentNode) {\n        originalDesc.parentNode.removeChild(originalDesc);\n      }\n      const descElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"desc\");\n      descElement.innerHTML = description;\n      svg.prepend(descElement);\n    }\n    if (typeof title !== \"undefined\") {\n      const originalTitle = svg.querySelector(\"title\");\n      if (originalTitle?.parentNode) {\n        originalTitle.parentNode.removeChild(originalTitle);\n      }\n      if (title) {\n        const titleElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"title\");\n        titleElement.innerHTML = title;\n        svg.prepend(titleElement);\n      }\n    }\n    return svg;\n  } catch (error) {\n    return handleError(error);\n  }\n}\nfunction processSVG(content, preProcessor) {\n  if (preProcessor) {\n    return preProcessor(content);\n  }\n  return content;\n}\nfunction updateSVGAttributes(node, options) {\n  const { baseURL = \"\", hash, uniquifyIDs } = options;\n  const replaceableAttributes = [\"id\", \"href\", \"xlink:href\", \"xlink:role\", \"xlink:arcrole\"];\n  const linkAttributes = [\"href\", \"xlink:href\"];\n  const isDataValue = (name, value) => linkAttributes.includes(name) && (value ? !value.includes(\"#\") : false);\n  if (!uniquifyIDs) {\n    return node;\n  }\n  [...node.children].forEach((d) => {\n    if (d.attributes?.length) {\n      const attributes = Object.values(d.attributes).map((a) => {\n        const attribute = a;\n        const match = /url\\((.*?)\\)/.exec(a.value);\n        if (match?.[1]) {\n          attribute.value = a.value.replace(match[0], `url(${baseURL}${match[1]}__${hash})`);\n        }\n        return attribute;\n      });\n      replaceableAttributes.forEach((r) => {\n        const attribute = attributes.find((a) => a.name === r);\n        if (attribute && !isDataValue(r, attribute.value)) {\n          attribute.value = `${attribute.value}__${hash}`;\n        }\n      });\n    }\n    if (d.children.length) {\n      return updateSVGAttributes(d, options);\n    }\n    return d;\n  });\n  return node;\n}\n\n// src/index.tsx\nimport { jsx } from \"react/jsx-runtime\";\nvar cacheStore;\nfunction ReactInlineSVG(props) {\n  const {\n    cacheRequests = true,\n    children = null,\n    description,\n    fetchOptions,\n    innerRef,\n    loader = null,\n    onError,\n    onLoad,\n    src,\n    title,\n    uniqueHash\n  } = props;\n  const [state, setState] = useReducer(\n    (previousState2, nextState) => ({\n      ...previousState2,\n      ...nextState\n    }),\n    {\n      content: \"\",\n      element: null,\n      isCached: cacheRequests && cacheStore.isCached(props.src),\n      status: STATUS.IDLE\n    }\n  );\n  const { content, element, isCached, status } = state;\n  const previousProps = usePrevious(props);\n  const previousState = usePrevious(state);\n  const hash = useRef2(uniqueHash ?? randomString(8));\n  const isActive = useRef2(false);\n  const isInitialized = useRef2(false);\n  const handleError = useCallback(\n    (error) => {\n      if (isActive.current) {\n        setState({\n          status: error.message === \"Browser does not support SVG\" ? STATUS.UNSUPPORTED : STATUS.FAILED\n        });\n        onError?.(error);\n      }\n    },\n    [onError]\n  );\n  const handleLoad = useCallback((loadedContent, hasCache = false) => {\n    if (isActive.current) {\n      setState({\n        content: loadedContent,\n        isCached: hasCache,\n        status: STATUS.LOADED\n      });\n    }\n  }, []);\n  const fetchContent = useCallback(async () => {\n    const responseContent = await request(src, fetchOptions);\n    handleLoad(responseContent);\n  }, [fetchOptions, handleLoad, src]);\n  const getElement = useCallback(() => {\n    try {\n      const node = getNode({ ...props, handleError, hash: hash.current, content });\n      const convertedElement = convert2(node);\n      if (!convertedElement || !isValidElement(convertedElement)) {\n        throw new Error(\"Could not convert the src to a React element\");\n      }\n      setState({\n        element: convertedElement,\n        status: STATUS.READY\n      });\n    } catch (error) {\n      handleError(new Error(error.message));\n    }\n  }, [content, handleError, props]);\n  const getContent = useCallback(async () => {\n    const dataURI = /^data:image\\/svg[^,]*?(;base64)?,(.*)/u.exec(src);\n    let inlineSrc;\n    if (dataURI) {\n      inlineSrc = dataURI[1] ? window.atob(dataURI[2]) : decodeURIComponent(dataURI[2]);\n    } else if (src.includes(\"<svg\")) {\n      inlineSrc = src;\n    }\n    if (inlineSrc) {\n      handleLoad(inlineSrc);\n      return;\n    }\n    try {\n      if (cacheRequests) {\n        const cachedContent = await cacheStore.get(src, fetchOptions);\n        handleLoad(cachedContent, true);\n      } else {\n        await fetchContent();\n      }\n    } catch (error) {\n      handleError(error);\n    }\n  }, [cacheRequests, fetchContent, fetchOptions, handleError, handleLoad, src]);\n  const load = useCallback(async () => {\n    if (isActive.current) {\n      setState({\n        content: \"\",\n        element: null,\n        isCached: false,\n        status: STATUS.LOADING\n      });\n    }\n  }, []);\n  useEffect2(\n    () => {\n      isActive.current = true;\n      if (!canUseDOM() || isInitialized.current) {\n        return () => void 0;\n      }\n      try {\n        if (status === STATUS.IDLE) {\n          if (!isSupportedEnvironment()) {\n            throw new Error(\"Browser does not support SVG\");\n          }\n          if (!src) {\n            throw new Error(\"Missing src\");\n          }\n          load();\n        }\n      } catch (error) {\n        handleError(error);\n      }\n      isInitialized.current = true;\n      return () => {\n        isActive.current = false;\n      };\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n  useEffect2(() => {\n    if (!canUseDOM()) {\n      return;\n    }\n    if (!previousProps) {\n      return;\n    }\n    if (previousProps.src !== src) {\n      if (!src) {\n        handleError(new Error(\"Missing src\"));\n        return;\n      }\n      load();\n    } else if (previousProps.title !== title || previousProps.description !== description) {\n      getElement();\n    }\n  }, [description, getElement, handleError, load, previousProps, src, title]);\n  useEffect2(() => {\n    if (!previousState) {\n      return;\n    }\n    if (previousState.status !== STATUS.LOADING && status === STATUS.LOADING) {\n      getContent();\n    }\n    if (previousState.status !== STATUS.LOADED && status === STATUS.LOADED) {\n      getElement();\n    }\n    if (previousState.status !== STATUS.READY && status === STATUS.READY) {\n      onLoad?.(src, isCached);\n    }\n  }, [getContent, getElement, isCached, onLoad, previousState, src, status]);\n  const elementProps = omit(\n    props,\n    \"baseURL\",\n    \"cacheRequests\",\n    \"children\",\n    \"description\",\n    \"fetchOptions\",\n    \"innerRef\",\n    \"loader\",\n    \"onError\",\n    \"onLoad\",\n    \"preProcessor\",\n    \"src\",\n    \"title\",\n    \"uniqueHash\",\n    \"uniquifyIDs\"\n  );\n  if (!canUseDOM()) {\n    return loader;\n  }\n  if (element) {\n    return cloneElement(element, { ref: innerRef, ...elementProps });\n  }\n  if ([STATUS.UNSUPPORTED, STATUS.FAILED].includes(status)) {\n    return children;\n  }\n  return loader;\n}\nfunction InlineSVG(props) {\n  if (!cacheStore) {\n    cacheStore = new CacheStore();\n  }\n  const { loader } = props;\n  const hasCallback = useRef2(false);\n  const [isReady, setReady] = useState(cacheStore.isReady);\n  useEffect2(() => {\n    if (!hasCallback.current) {\n      cacheStore.onReady(() => {\n        setReady(true);\n      });\n      hasCallback.current = true;\n    }\n  }, []);\n  if (!isReady) {\n    return loader;\n  }\n  return /* @__PURE__ */ jsx(ReactInlineSVG, { ...props });\n}\nexport {\n  cacheStore,\n  InlineSVG as default\n};\n//# sourceMappingURL=index.mjs.map","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2, useTheme2 } from '@grafana/ui';\nimport React, { SVGProps } from 'react';\nimport SVG from 'react-inlinesvg';\n\nimport dark404 from './img/grot-404-dark.svg';\nimport light404 from './img/grot-404-light.svg';\nimport useMousePosition from './useMousePosition';\n\nconst MIN_ARM_ROTATION = -20;\nconst MAX_ARM_ROTATION = 5;\nconst MIN_ARM_TRANSLATION = -5;\nconst MAX_ARM_TRANSLATION = 5;\n\ninterface Props {\n  width?: SVGProps<SVGElement>['width'];\n  height?: SVGProps<SVGElement>['height'];\n  show404?: boolean;\n}\n\nexport const GrotNotFound = ({ width = 'auto', height, show404 = false }: Props) => {\n  const theme = useTheme2();\n  const { x, y } = useMousePosition();\n  const styles = useStyles2(getStyles, x, y, show404);\n  return (\n    <SVG\n      src={(theme.isDark ? dark404 : light404) as unknown as string}\n      className={styles.svg}\n      height={height}\n      width={width}\n    />\n  );\n};\n\nGrotNotFound.displayName = 'GrotNotFound';\n\nconst getStyles = (theme: GrafanaTheme2, xPos: number | null, yPos: number | null, show404: boolean) => {\n  const { innerWidth, innerHeight } = window;\n  const heightRatio = yPos && yPos / innerHeight;\n  const widthRatio = xPos && xPos / innerWidth;\n  const rotation = heightRatio !== null ? getIntermediateValue(heightRatio, MIN_ARM_ROTATION, MAX_ARM_ROTATION) : 0;\n  const translation =\n    widthRatio !== null ? getIntermediateValue(widthRatio, MIN_ARM_TRANSLATION, MAX_ARM_TRANSLATION) : 0;\n\n  return {\n    svg: css({\n      '#grot-404-arm, #grot-404-magnifier': {\n        transform: `rotate(${rotation}deg) translateX(${translation}%)`,\n        transformOrigin: 'center',\n        transition: 'transform 50ms linear',\n      },\n      '#grot-404-text': {\n        display: show404 ? 'block' : 'none',\n      },\n    }),\n  };\n};\n\n/**\n * Given a start value, end value, and a ratio, return the intermediate value\n * Works with negative and inverted start/end values\n */\nconst getIntermediateValue = (ratio: number, start: number, end: number) => {\n  const value = ratio * (end - start) + start;\n  return value;\n};\n","import { throttle } from 'lodash';\nimport { useEffect, useState } from 'react';\n\ninterface MousePosition {\n  x: number | null;\n  y: number | null;\n}\n\n// For performance reasons, we throttle the mouse position updates\nconst DEFAULT_THROTTLE_INTERVAL_MS = 50;\n\nconst useMousePosition = (throttleInterval = DEFAULT_THROTTLE_INTERVAL_MS) => {\n  const [mousePosition, setMousePosition] = useState<MousePosition>({ x: null, y: null });\n\n  useEffect(() => {\n    const updateMousePosition = throttle((event: MouseEvent) => {\n      setMousePosition({ x: event.clientX, y: event.clientY });\n    }, throttleInterval);\n    window.addEventListener('mousemove', updateMousePosition);\n\n    return () => {\n      window.removeEventListener('mousemove', updateMousePosition);\n    };\n  }, [throttleInterval]);\n\n  return mousePosition;\n};\n\nexport default useMousePosition;\n","import { css } from '@emotion/css';\nimport { Box, Stack, Text, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { GrotNotFound } from './GrotNotFound';\n\ninterface Props {\n  message: string;\n}\n\nexport const EmptyState = ({ message }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.container}>\n      <Box paddingY={8}>\n        <Stack direction=\"column\" alignItems=\"center\" gap={3}>\n          <GrotNotFound width={300} />\n          <Text variant=\"h5\">{message}</Text>\n        </Stack>\n      </Box>\n    </div>\n  );\n};\n\nEmptyState.displayName = 'EmptyState';\n\nfunction getStyles() {\n  return {\n    container: css({\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'space-evenly',\n      flexDirection: 'column',\n    }),\n  };\n}\n","import { SceneComponentProps, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport React from 'react';\n\nimport { EmptyState } from './ui/EmptyState';\n\ninterface SceneEmptyStateState extends SceneObjectState {\n  message: string;\n}\n\nexport class SceneEmptyState extends SceneObjectBase<SceneEmptyStateState> {\n  public static Component = ({ model }: SceneComponentProps<SceneEmptyState>) => {\n    const { message } = model.useState();\n    return <EmptyState message={message} />;\n  };\n}\n","import { SceneComponentProps, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { Alert } from '@grafana/ui';\nimport React from 'react';\n\ninterface SceneErrorStateState extends SceneObjectState {\n  message: string;\n}\n\nexport class SceneErrorState extends SceneObjectBase<SceneErrorStateState> {\n  public static Component = ({ model }: SceneComponentProps<SceneErrorState>) => {\n    const { message } = model.useState();\n    return (\n      <Alert title=\"Query error!\" severity=\"error\">\n        {message}\n      </Alert>\n    );\n  };\n}\n","import {\n  SceneComponentProps,\n  SceneObjectBase,\n  SceneObjectState,\n  SceneObjectUrlSyncConfig,\n  SceneObjectUrlValues,\n} from '@grafana/scenes';\nimport { RadioButtonGroup } from '@grafana/ui';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport React from 'react';\n\nexport enum LayoutType {\n  GRID = 'grid',\n  ROWS = 'rows',\n}\n\nexport interface SceneLayoutSwitcherState extends SceneObjectState {\n  layout: LayoutType;\n  onChange?: (layout: LayoutType) => void;\n}\n\nexport class SceneLayoutSwitcher extends SceneObjectBase<SceneLayoutSwitcherState> {\n  protected _urlSync = new SceneObjectUrlSyncConfig(this, { keys: ['layout'] });\n\n  static OPTIONS = [\n    { label: 'Grid', value: LayoutType.GRID },\n    { label: 'Rows', value: LayoutType.ROWS },\n  ];\n\n  static DEFAULT_LAYOUT = LayoutType.GRID;\n\n  constructor() {\n    super({\n      key: 'layout-switcher',\n      layout: SceneLayoutSwitcher.DEFAULT_LAYOUT,\n    });\n  }\n\n  getUrlState() {\n    return {\n      layout: this.state.layout,\n    };\n  }\n\n  updateFromUrl(values: SceneObjectUrlValues) {\n    const stateUpdate: Partial<SceneLayoutSwitcherState> = {};\n\n    if (typeof values.layout === 'string' && values.layout !== this.state.layout) {\n      stateUpdate.layout = Object.values(LayoutType).includes(values.layout as LayoutType)\n        ? (values.layout as LayoutType)\n        : SceneLayoutSwitcher.DEFAULT_LAYOUT;\n    }\n\n    this.setState(stateUpdate);\n  }\n\n  onChange = (layout: LayoutType) => {\n    reportInteraction('g_pyroscope_app_layout_changed', { layout });\n\n    this.setState({ layout });\n  };\n\n  static Component = ({ model }: SceneComponentProps<SceneLayoutSwitcher>) => {\n    const { layout } = model.useState();\n\n    return (\n      <RadioButtonGroup\n        aria-label=\"Layout switcher\"\n        options={SceneLayoutSwitcher.OPTIONS}\n        value={layout}\n        onChange={model.onChange}\n        fullWidth={false}\n      />\n    );\n  };\n}\n","import {\n  SceneComponentProps,\n  SceneObjectBase,\n  SceneObjectState,\n  SceneObjectUrlSyncConfig,\n  SceneObjectUrlValues,\n} from '@grafana/scenes';\nimport { InlineSwitch } from '@grafana/ui';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport React from 'react';\n\nexport interface SceneNoDataSwitcherState extends SceneObjectState {\n  hideNoData: string;\n  onChange?: (hideNoData: string) => void;\n}\n\nexport class SceneNoDataSwitcher extends SceneObjectBase<SceneNoDataSwitcherState> {\n  protected _urlSync = new SceneObjectUrlSyncConfig(this, { keys: ['hideNoData'] });\n\n  static DEFAULT_VALUE = 'off';\n\n  constructor() {\n    super({\n      key: 'no-data-switcher',\n      hideNoData: SceneNoDataSwitcher.DEFAULT_VALUE,\n    });\n  }\n\n  getUrlState() {\n    return {\n      hideNoData: this.state.hideNoData,\n    };\n  }\n\n  updateFromUrl(values: SceneObjectUrlValues) {\n    const stateUpdate: Partial<SceneNoDataSwitcherState> = {};\n\n    if (typeof values.hideNoData === 'string' && values.hideNoData !== this.state.hideNoData) {\n      stateUpdate.hideNoData = ['on', 'off'].includes(values.hideNoData)\n        ? values.hideNoData\n        : SceneNoDataSwitcher.DEFAULT_VALUE;\n    }\n\n    this.setState(stateUpdate);\n  }\n\n  onChange = (hideNoData: 'on' | 'off') => {\n    reportInteraction('g_pyroscope_app_hide_no_data_changed', { hideNoData });\n\n    this.setState({ hideNoData });\n  };\n\n  static Component = ({ model }: SceneComponentProps<SceneNoDataSwitcher>) => {\n    const { hideNoData } = model.useState();\n\n    return (\n      <InlineSwitch\n        data-testid=\"noDataSwitcher\"\n        showLabel\n        label=\"Hide panels without data\"\n        value={hideNoData === 'on'}\n        onChange={(event: React.ChangeEvent<HTMLInputElement>) => model.onChange(event.target.checked ? 'on' : 'off')}\n      />\n    );\n  };\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport {\n  SceneComponentProps,\n  SceneObjectBase,\n  SceneObjectState,\n  SceneObjectUrlSyncConfig,\n  SceneObjectUrlValues,\n} from '@grafana/scenes';\nimport { Icon, IconButton, Input, Tag, useStyles2 } from '@grafana/ui';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport React from 'react';\n\nexport interface SceneQuickFilterState extends SceneObjectState {\n  placeholder: string;\n  searchText: string;\n  onChange?: (searchText: string) => void;\n  resultsCount: string;\n}\n\nexport class SceneQuickFilter extends SceneObjectBase<SceneQuickFilterState> {\n  protected _urlSync = new SceneObjectUrlSyncConfig(this, { keys: ['searchText'] });\n\n  static DEFAULT_SEARCH_TEXT = '';\n\n  static DEBOUNCE_DELAY = 250;\n\n  constructor({ placeholder }: { placeholder: string }) {\n    super({\n      key: 'quick-filter',\n      placeholder,\n      searchText: SceneQuickFilter.DEFAULT_SEARCH_TEXT,\n      resultsCount: '',\n    });\n  }\n\n  setPlaceholder(placeholder: string) {\n    this.setState({ placeholder });\n  }\n\n  setResultsCount(resultsCount: number) {\n    this.setState({ resultsCount: String(resultsCount) });\n  }\n\n  getUrlState() {\n    return {\n      searchText: this.state.searchText,\n    };\n  }\n\n  updateFromUrl(values: SceneObjectUrlValues) {\n    const stateUpdate: Partial<SceneQuickFilterState> = {};\n\n    if (typeof values.searchText === 'string' && values.searchText !== this.state.searchText) {\n      stateUpdate.searchText = values.searchText;\n    }\n\n    this.setState(stateUpdate);\n  }\n\n  onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ searchText: e.target.value });\n  };\n\n  reset() {\n    this.setState({ placeholder: '', searchText: '', resultsCount: '' });\n  }\n\n  clearSearchText = () => {\n    this.setState({ searchText: '' });\n  };\n\n  onFocus = () => {\n    reportInteraction('g_pyroscope_app_quick_filter_focused');\n  };\n\n  static Component = ({ model }: SceneComponentProps<SceneQuickFilter>) => {\n    const styles = useStyles2(getStyles);\n    const { placeholder, searchText, resultsCount } = model.useState();\n\n    return (\n      <Input\n        type=\"text\"\n        className=\"quick-filter\"\n        aria-label=\"Quick filter\"\n        placeholder={placeholder}\n        value={searchText}\n        prefix={<Icon name=\"search\" />}\n        suffix={\n          <>\n            {resultsCount !== '' && (\n              <Tag\n                className={styles.resultsCount}\n                name={resultsCount}\n                colorIndex={9}\n                data-testid=\"quick-filter-results-count\"\n              />\n            )}\n            <IconButton name=\"times\" aria-label=\"Clear search\" onClick={model.clearSearchText} />\n          </>\n        }\n        onChange={model.onChange}\n        onKeyDown={(e: React.KeyboardEvent<HTMLInputElement>) => {\n          if (e.key === 'Escape') {\n            model.clearSearchText();\n          }\n        }}\n        onFocus={model.onFocus}\n      />\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  resultsCount: css`\n    margin-right: ${theme.spacing(1)};\n    border-radius: 11px;\n    padding: 2px 8px;\n    color: ${theme.colors.text.primary};\n    background-color: ${theme.colors.background.secondary};\n  `,\n});\n","import { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\n\nexport function getProfileMetricLabel(profileMetricId: string) {\n  const profileMetric = getProfileMetric(profileMetricId as ProfileMetricId);\n  return `${profileMetric.type} (${profileMetric.group})`;\n}\n","import {\n  AdHocVariableFilter,\n  DataQueryResponse,\n  FieldType,\n  LoadingState,\n  MetricFindValue,\n  TestDataSourceResponse,\n} from '@grafana/data';\nimport { RuntimeDataSource } from '@grafana/scenes';\nimport { userStorage } from '@shared/infrastructure/userStorage';\nimport { isEqual } from 'lodash';\n\nimport { PanelType } from '../../components/SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher';\nimport { PYROSCOPE_FAVORITES_DATA_SOURCE } from '../pyroscope-data-sources';\nimport { getProfileMetricLabel } from '../series/helpers/getProfileMetricLabel';\n\nexport type Favorite = {\n  index: number; // for colouring purpose only\n  queryRunnerParams: {\n    serviceName: string;\n    profileMetricId: string;\n    groupBy?: {\n      label: string;\n    };\n    filters?: AdHocVariableFilter[];\n  };\n  panelType?: PanelType;\n};\n\nexport class FavoritesDataSource extends RuntimeDataSource {\n  static getAllFavorites() {\n    return userStorage.get(userStorage.KEYS.PROFILES_EXPLORER)?.favorites || [];\n  }\n\n  static areFavoritesEqual(f1: Favorite, f2: Favorite) {\n    return f1.panelType === f2.panelType && isEqual(f1.queryRunnerParams, f2.queryRunnerParams);\n  }\n\n  static exists(favorite: Favorite) {\n    return FavoritesDataSource.getAllFavorites().some((f: Favorite) =>\n      FavoritesDataSource.areFavoritesEqual(f, favorite)\n    );\n  }\n\n  static addFavorite(favorite: Favorite) {\n    const storage = userStorage.get(userStorage.KEYS.PROFILES_EXPLORER);\n    storage.favorites.push(favorite);\n    userStorage.set(userStorage.KEYS.PROFILES_EXPLORER, storage);\n  }\n\n  static removeFavorite(favorite: Favorite) {\n    const storage = userStorage.get(userStorage.KEYS.PROFILES_EXPLORER);\n    storage.favorites = storage.favorites.filter((f: Favorite) => !FavoritesDataSource.areFavoritesEqual(f, favorite));\n    userStorage.set(userStorage.KEYS.PROFILES_EXPLORER, storage);\n  }\n\n  constructor() {\n    super(PYROSCOPE_FAVORITES_DATA_SOURCE.type, PYROSCOPE_FAVORITES_DATA_SOURCE.uid);\n\n    const storage = userStorage.get(userStorage.KEYS.PROFILES_EXPLORER) || {};\n    storage.favorites ||= [];\n\n    // ensures backward compatibility for older favorites without panel type\n    storage.favorites = storage.favorites.map((f: Favorite) => ({\n      panelType: PanelType.TIMESERIES,\n      ...f,\n    }));\n\n    userStorage.set(userStorage.KEYS.PROFILES_EXPLORER, storage);\n  }\n\n  async query(): Promise<DataQueryResponse> {\n    return {\n      state: LoadingState.Done,\n      data: [\n        {\n          name: 'Favories',\n          fields: [\n            {\n              name: null,\n              type: FieldType.other,\n              values: [],\n              config: {},\n            },\n          ],\n          length: 0,\n        },\n      ],\n    };\n  }\n\n  async metricFindQuery(): Promise<MetricFindValue[]> {\n    return FavoritesDataSource.getAllFavorites().map((f: Favorite) => {\n      const { serviceName, profileMetricId, groupBy, filters } = f.queryRunnerParams || {};\n      const textParts = [serviceName, getProfileMetricLabel(profileMetricId)];\n\n      if (groupBy?.label) {\n        textParts.push(groupBy.label);\n      }\n\n      if (filters?.length) {\n        textParts.push(filters.map(({ key, operator, value }) => `${key}${operator}\"${value}\"`).join(', '));\n      }\n\n      return {\n        value: JSON.stringify({ value: JSON.stringify(f), ...f }),\n        text: textParts.join('  '),\n      };\n    });\n  }\n\n  async testDatasource(): Promise<TestDataSourceResponse> {\n    return {\n      status: 'success',\n      message: 'OK',\n    };\n  }\n}\n","import { AdHocVariableFilter } from '@grafana/data';\nimport { sceneGraph, SceneObject } from '@grafana/scenes';\nimport { clone, defaults, uniqBy } from 'lodash';\n\nimport { GridItemData } from '../../components/SceneByVariableRepeaterGrid/types/GridItemData';\nimport { FiltersVariable } from '../../domain/variables/FiltersVariable/FiltersVariable';\nimport { getSceneVariableValue } from '../../helpers/getSceneVariableValue';\n\ntype InterpolatedQueryRunnerParams = GridItemData['queryRunnerParams'] & {\n  serviceName: string;\n  profileMetricId: string;\n  filters: AdHocVariableFilter[];\n};\n\nexport function interpolateQueryRunnerVariables(\n  sceneObject: SceneObject,\n  item: GridItemData\n): InterpolatedQueryRunnerParams {\n  const { queryRunnerParams } = item;\n\n  const interpolatedParams = defaults(clone(queryRunnerParams), {\n    serviceName: getSceneVariableValue(sceneObject, 'serviceName'),\n    profileMetricId: getSceneVariableValue(sceneObject, 'profileMetricId'),\n  });\n\n  // state.filters has the AdHocFilterWithLabels[] type so we get rid of keyLabel and valueLabel\n  const parsedFilters = (sceneGraph.lookupVariable('filters', sceneObject) as FiltersVariable).state.filters.map(\n    ({ key, operator, value }) => ({ key, operator, value })\n  );\n\n  interpolatedParams.filters = uniqBy(\n    [...(interpolatedParams.filters || []), ...parsedFilters],\n    ({ key, operator, value }) => `${key}${operator}${value}`\n  );\n\n  return interpolatedParams as InterpolatedQueryRunnerParams;\n}\n","import { css } from '@emotion/css';\nimport { SceneComponentProps, SceneObjectBase, SceneObjectState, VariableDependencyConfig } from '@grafana/scenes';\nimport { IconButton, useStyles2 } from '@grafana/ui';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport React from 'react';\n\nimport { GridItemData } from '../../components/SceneByVariableRepeaterGrid/types/GridItemData';\nimport { Favorite, FavoritesDataSource } from '../../infrastructure/favorites/FavoritesDataSource';\nimport { interpolateQueryRunnerVariables } from '../../infrastructure/helpers/interpolateQueryRunnerVariables';\n\ninterface FavActionState extends SceneObjectState {\n  item: GridItemData;\n  isFav?: boolean;\n  skipVariablesInterpolation?: boolean;\n}\n\nexport class FavAction extends SceneObjectBase<FavActionState> {\n  protected _variableDependency = new VariableDependencyConfig(this, {\n    variableNames: ['serviceName', 'profileMetricId', 'filters'],\n    onReferencedVariableValueChanged: () => {\n      this.update();\n    },\n  });\n\n  constructor(state: FavActionState) {\n    super(state);\n\n    this.addActivationHandler(() => this.update());\n  }\n\n  update() {\n    this.setState({ isFav: this.isStored() });\n  }\n\n  isStored() {\n    return FavoritesDataSource.exists(this.buildFavorite());\n  }\n\n  static buildFavorite(item: GridItemData): Favorite {\n    const { index, queryRunnerParams, panelType } = item;\n\n    const favorite: Favorite = {\n      index,\n      queryRunnerParams: {\n        serviceName: queryRunnerParams.serviceName as string,\n        profileMetricId: queryRunnerParams.profileMetricId as string,\n      },\n      panelType,\n    };\n\n    // we don't store values, we'll fetch all timeseries by using the `groupBy` parameter\n    if (queryRunnerParams.groupBy) {\n      favorite.queryRunnerParams.groupBy = {\n        label: queryRunnerParams.groupBy.label,\n      };\n    }\n\n    // we don't store filters if empty\n    if (queryRunnerParams.filters?.length) {\n      favorite.queryRunnerParams.filters = queryRunnerParams.filters;\n    }\n\n    return favorite;\n  }\n\n  buildFavorite(): Favorite {\n    const { item, skipVariablesInterpolation } = this.state;\n\n    return FavAction.buildFavorite({\n      index: item.index,\n      queryRunnerParams: skipVariablesInterpolation\n        ? item.queryRunnerParams\n        : interpolateQueryRunnerVariables(this, item),\n      panelType: item.panelType,\n    } as GridItemData);\n  }\n\n  public onClick = () => {\n    reportInteraction('g_pyroscope_app_fav_action_clicked', { favAfterClick: !this.state.isFav });\n\n    if (!this.state.isFav) {\n      FavoritesDataSource.addFavorite(this.buildFavorite());\n    } else {\n      FavoritesDataSource.removeFavorite(this.buildFavorite());\n    }\n\n    this.setState({ isFav: !this.state.isFav });\n  };\n\n  public static Component = ({ model }: SceneComponentProps<FavAction>) => {\n    const styles = useStyles2(getStyles);\n    const { isFav } = model.useState();\n\n    return (\n      <IconButton\n        className={isFav ? styles.favedButton : styles.notFavedbutton}\n        name={isFav ? 'favorite' : 'star'}\n        variant=\"secondary\"\n        size=\"sm\"\n        aria-label={isFav ? 'Unfavorite' : 'Favorite'}\n        tooltip={isFav ? 'Unfavorite' : 'Favorite'}\n        tooltipPlacement=\"top\"\n        onClick={model.onClick}\n      />\n    );\n  };\n}\n\nconst getStyles = () => ({\n  favedButton: css`\n    color: #f2cc0d;\n    margin: 0;\n  `,\n  notFavedbutton: css`\n    margin: 0;\n  `,\n});\n","import { FavAction } from '../../..//domain/actions/FavAction';\nimport { FavoritesDataSource } from '../../../infrastructure/favorites/FavoritesDataSource';\nimport { GridItemData } from '../types/GridItemData';\n\nexport const sortFavGridItems: (a: GridItemData, b: GridItemData) => number = function (a, b) {\n  const aIsFav = FavoritesDataSource.exists(FavAction.buildFavorite(a));\n  const bIsFav = FavoritesDataSource.exists(FavAction.buildFavorite(b));\n\n  if (aIsFav && bIsFav) {\n    return a.label.localeCompare(b.label);\n  }\n\n  if (bIsFav) {\n    return +1;\n  }\n\n  if (aIsFav) {\n    return -1;\n  }\n\n  return 0;\n};\n","import { DashboardCursorSync, VariableRefresh } from '@grafana/data';\nimport {\n  behaviors,\n  EmbeddedSceneState,\n  QueryVariable,\n  SceneComponentProps,\n  SceneCSSGridItem,\n  SceneCSSGridLayout,\n  sceneGraph,\n  SceneObjectBase,\n  VariableValueOption,\n  VizPanelState,\n} from '@grafana/scenes';\nimport { Spinner } from '@grafana/ui';\nimport { noOp } from '@shared/domain/noOp';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport { debounce, isEqual } from 'lodash';\nimport React from 'react';\n\nimport { EventTimeseriesDataReceived } from '../../domain/events/EventTimeseriesDataReceived';\nimport { FiltersVariable } from '../../domain/variables/FiltersVariable/FiltersVariable';\nimport { getSceneVariableValue } from '../../helpers/getSceneVariableValue';\nimport { vizPanelBuilder } from '../../helpers/vizPanelBuilder';\nimport { SceneLabelValuesBarGauge } from '../SceneLabelValuesBarGauge';\nimport { SceneLabelValuesHistogram } from '../SceneLabelValuesHistogram';\nimport { SceneLabelValuesTimeseries } from '../SceneLabelValuesTimeseries';\nimport { SceneEmptyState } from './components/SceneEmptyState/SceneEmptyState';\nimport { SceneErrorState } from './components/SceneErrorState/SceneErrorState';\nimport { LayoutType, SceneLayoutSwitcher, SceneLayoutSwitcherState } from './components/SceneLayoutSwitcher';\nimport { SceneNoDataSwitcher, SceneNoDataSwitcherState } from './components/SceneNoDataSwitcher';\nimport { ScenePanelTypeSwitcher } from './components/ScenePanelTypeSwitcher';\nimport { SceneQuickFilter, SceneQuickFilterState } from './components/SceneQuickFilter';\nimport { sortFavGridItems } from './domain/sortFavGridItems';\nimport { GridItemData } from './types/GridItemData';\n\ninterface SceneByVariableRepeaterGridState extends EmbeddedSceneState {\n  variableName: string;\n  items: GridItemData[];\n  headerActions: (item: GridItemData, items: GridItemData[]) => VizPanelState['headerActions'];\n  mapOptionToItem: (\n    option: VariableValueOption,\n    index: number,\n    variablesValues: Record<string, string>\n  ) => GridItemData | null;\n  sortItemsFn: (a: GridItemData, b: GridItemData) => number;\n  hideNoData: boolean;\n}\n\nconst GRID_TEMPLATE_COLUMNS = 'repeat(auto-fit, minmax(400px, 1fr))';\nconst GRID_TEMPLATE_ROWS = '1fr';\nconst GRID_AUTO_ROWS = '240px';\n\nexport class SceneByVariableRepeaterGrid extends SceneObjectBase<SceneByVariableRepeaterGridState> {\n  static buildGridItemKey(item: GridItemData) {\n    return `grid-item-${item.index}-${item.value}`;\n  }\n\n  static getGridColumnsTemplate(layout: LayoutType) {\n    return layout === LayoutType.ROWS ? GRID_TEMPLATE_ROWS : GRID_TEMPLATE_COLUMNS;\n  }\n\n  constructor({\n    key,\n    variableName,\n    headerActions,\n    mapOptionToItem,\n    sortItemsFn,\n  }: {\n    key: string;\n    variableName: SceneByVariableRepeaterGridState['variableName'];\n    headerActions: SceneByVariableRepeaterGridState['headerActions'];\n    mapOptionToItem: SceneByVariableRepeaterGridState['mapOptionToItem'];\n    sortItemsFn?: SceneByVariableRepeaterGridState['sortItemsFn'];\n  }) {\n    super({\n      key,\n      variableName,\n      items: [],\n      headerActions,\n      mapOptionToItem,\n      sortItemsFn: sortItemsFn || sortFavGridItems,\n      hideNoData: false,\n      body: new SceneCSSGridLayout({\n        templateColumns: SceneByVariableRepeaterGrid.getGridColumnsTemplate(SceneLayoutSwitcher.DEFAULT_LAYOUT),\n        autoRows: GRID_AUTO_ROWS,\n        isLazy: true,\n        $behaviors: [\n          new behaviors.CursorSync({\n            key: 'metricCrosshairSync',\n            sync: DashboardCursorSync.Crosshair,\n          }),\n        ],\n        children: [],\n      }),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    // here we try to emulate VariableDependencyConfig.onVariableUpdateCompleted\n    const variable = sceneGraph.lookupVariable(this.state.variableName, this) as QueryVariable & { update: () => void };\n\n    const variableSub = variable.subscribeToState((newState, prevState) => {\n      if (!newState.loading && prevState.loading) {\n        this.renderGridItems();\n      }\n    });\n\n    // if the variable is inactive, the data source will not fetch the options\n    // so we force an update here to be sure we have the latest values\n    variable.update();\n\n    const refreshSub = this.subscribeToRefreshClick();\n    const quickFilterSub = this.subscribeToQuickFilterChange();\n    const layoutChangeSub = this.subscribeToLayoutChange();\n    const hideNoDataSub = this.subscribeToHideNoDataChange();\n    const filtersSub = this.subscribeToFiltersChange();\n\n    return () => {\n      filtersSub.unsubscribe();\n      hideNoDataSub.unsubscribe();\n      layoutChangeSub.unsubscribe();\n      quickFilterSub.unsubscribe();\n      refreshSub.unsubscribe();\n\n      variableSub.unsubscribe();\n    };\n  }\n\n  subscribeToRefreshClick() {\n    const variable = sceneGraph.lookupVariable(this.state.variableName, this) as QueryVariable & { update: () => void };\n    const originalRefresh = variable.state.refresh;\n\n    variable.setState({ refresh: VariableRefresh.never });\n\n    const onClickRefresh = () => {\n      variable.update();\n    };\n\n    // start of hack, for a better UX: we disable the variable \"refresh\" option and we allow the user to reload the list only by clicking on the \"Refresh\" button\n    // if we don't do this, every time the time range changes (even with auto-refresh on),\n    // all the timeseries present on the screen would be re-created, resulting in blinking and a poor UX\n    const refreshButton = document.querySelector(\n      '[data-testid=\"data-testid RefreshPicker run button\"]'\n    ) as HTMLButtonElement;\n\n    if (!refreshButton) {\n      logger.error(\n        new Error('SceneByVariableRepeaterGrid: Refresh button not found! The list of items will never be updated.')\n      );\n    }\n\n    refreshButton?.addEventListener('click', onClickRefresh);\n    refreshButton?.setAttribute('title', 'Click to completely refresh all the panels present on the screen');\n    // end of hack\n\n    return {\n      unsubscribe() {\n        refreshButton?.removeAttribute('title');\n        refreshButton?.removeEventListener('click', onClickRefresh);\n        variable.setState({ refresh: originalRefresh });\n      },\n    };\n  }\n\n  subscribeToQuickFilterChange() {\n    const quickFilter = sceneGraph.findByKeyAndType(this, 'quick-filter', SceneQuickFilter);\n\n    this.subscribeToState((newState, prevState) => {\n      if (newState.items.length !== prevState.items.length) {\n        quickFilter.setResultsCount(newState.items.length);\n      }\n    });\n\n    const onChangeState = (newState: SceneQuickFilterState, prevState?: SceneQuickFilterState) => {\n      if (newState.searchText !== prevState?.searchText) {\n        this.renderGridItems();\n      }\n    };\n\n    return quickFilter.subscribeToState(debounce(onChangeState, SceneQuickFilter.DEBOUNCE_DELAY));\n  }\n\n  subscribeToLayoutChange() {\n    const layoutSwitcher = sceneGraph.findByKeyAndType(this, 'layout-switcher', SceneLayoutSwitcher);\n\n    const body = this.state.body as SceneCSSGridLayout;\n\n    const onChangeState = (newState: SceneLayoutSwitcherState, prevState?: SceneLayoutSwitcherState) => {\n      if (newState.layout !== prevState?.layout) {\n        body.setState({\n          templateColumns: SceneByVariableRepeaterGrid.getGridColumnsTemplate(newState.layout),\n        });\n      }\n    };\n\n    onChangeState(layoutSwitcher.state);\n\n    return layoutSwitcher.subscribeToState(onChangeState);\n  }\n\n  subscribeToHideNoDataChange() {\n    const noDataSwitcher = sceneGraph.findByKeyAndType(this, 'no-data-switcher', SceneNoDataSwitcher);\n\n    if (!noDataSwitcher.isActive) {\n      this.setState({ hideNoData: false });\n\n      return {\n        unsubscribe: noOp,\n      };\n    }\n\n    const onChangeState = (newState: SceneNoDataSwitcherState, prevState?: SceneNoDataSwitcherState) => {\n      if (newState.hideNoData !== prevState?.hideNoData) {\n        this.setState({ hideNoData: newState.hideNoData === 'on' });\n\n        // we force render because this.state.items certainly have not changed but we want to update the UI panels anyway\n        this.renderGridItems(true);\n      }\n    };\n\n    onChangeState(noDataSwitcher.state);\n\n    return noDataSwitcher.subscribeToState(onChangeState);\n  }\n\n  subscribeToFiltersChange() {\n    const filtersVariable = sceneGraph.findByKeyAndType(this, 'filters', FiltersVariable);\n    const noDataSwitcher = sceneGraph.findByKeyAndType(this, 'no-data-switcher', SceneNoDataSwitcher);\n\n    // the handler will be called each time a filter is added/removed/modified\n    return filtersVariable.subscribeToState(() => {\n      if (noDataSwitcher.state.hideNoData === 'on') {\n        // to be sure the list is updated we force render because the filters only influence the query made in each panel\n        this.renderGridItems(true);\n      }\n    });\n  }\n\n  buildItemsData(variable: QueryVariable) {\n    const { mapOptionToItem } = this.state;\n\n    const variableValues = {\n      serviceName: getSceneVariableValue(this, 'serviceName'),\n      profileMetricId: getSceneVariableValue(this, 'profileMetricId'),\n      panelType: sceneGraph.findByKeyAndType(this, 'panel-type-switcher', ScenePanelTypeSwitcher).state.panelType,\n    };\n\n    const items = variable.state.options\n      .map((option, i) => mapOptionToItem(option, i, variableValues))\n      .filter(Boolean) as GridItemData[];\n\n    return this.filterItems(items).sort(this.state.sortItemsFn);\n  }\n\n  shouldRenderItems(newItems: SceneByVariableRepeaterGridState['items']) {\n    const { items } = this.state;\n\n    if (!newItems.length || items.length !== newItems.length) {\n      return true;\n    }\n\n    return !isEqual(items, newItems);\n  }\n\n  renderGridItems(forceRender = false) {\n    const variable = sceneGraph.lookupVariable(this.state.variableName, this) as QueryVariable;\n\n    if (variable.state.loading) {\n      return;\n    }\n\n    if (variable.state.error) {\n      this.renderErrorState(variable.state.error);\n      return;\n    }\n\n    const newItems = this.buildItemsData(variable);\n\n    if (!forceRender && !this.shouldRenderItems(newItems)) {\n      return;\n    }\n\n    this.setState({ items: newItems });\n\n    if (!this.state.items.length) {\n      this.renderEmptyState();\n      return;\n    }\n\n    const gridItems = this.state.items.map((item) => {\n      const vizPanel = vizPanelBuilder(item.panelType, {\n        item,\n        headerActions: this.state.headerActions.bind(null, item, this.state.items),\n      });\n\n      if (this.state.hideNoData) {\n        this.setupHideNoData(vizPanel);\n      }\n\n      return new SceneCSSGridItem({\n        key: SceneByVariableRepeaterGrid.buildGridItemKey(item),\n        body: vizPanel,\n      });\n    });\n\n    (this.state.body as SceneCSSGridLayout).setState({\n      autoRows: GRID_AUTO_ROWS, // required to have the correct grid items height\n      children: gridItems,\n    });\n  }\n\n  setupHideNoData(vizPanel: SceneLabelValuesTimeseries | SceneLabelValuesBarGauge | SceneLabelValuesHistogram) {\n    const sub = vizPanel.subscribeToEvent(EventTimeseriesDataReceived, (event) => {\n      if (event.payload.series?.length) {\n        return;\n      }\n\n      const gridItem = sceneGraph.getAncestor(vizPanel, SceneCSSGridItem);\n      const { key: gridItemKey } = gridItem.state;\n      const grid = sceneGraph.getAncestor(gridItem, SceneCSSGridLayout);\n\n      const filteredChildren = grid.state.children.filter((c) => c.state.key !== gridItemKey);\n\n      if (!filteredChildren.length) {\n        this.renderEmptyState();\n      } else {\n        grid.setState({ children: filteredChildren });\n      }\n    });\n\n    vizPanel.addActivationHandler(() => {\n      return () => {\n        sub.unsubscribe();\n      };\n    });\n  }\n\n  filterItems(items: SceneByVariableRepeaterGridState['items']) {\n    const quickFilterScene = sceneGraph.findByKeyAndType(this, 'quick-filter', SceneQuickFilter);\n    const { searchText } = quickFilterScene.state;\n\n    if (!searchText) {\n      return items;\n    }\n\n    const regexes = searchText\n      .split(',')\n      .map((t) => t.trim())\n      .filter(Boolean)\n      .map((r) => {\n        try {\n          return new RegExp(r);\n        } catch {\n          return null;\n        }\n      })\n      .filter(Boolean) as RegExp[];\n\n    return items.filter(({ label }) => regexes.some((r) => r.test(label)));\n  }\n\n  renderEmptyState() {\n    (this.state.body as SceneCSSGridLayout).setState({\n      autoRows: '480px',\n      children: [\n        new SceneCSSGridItem({\n          body: new SceneEmptyState({\n            message: 'No results',\n          }),\n        }),\n      ],\n    });\n  }\n\n  renderErrorState(error: Error) {\n    (this.state.body as SceneCSSGridLayout).setState({\n      autoRows: '480px',\n      children: [\n        new SceneCSSGridItem({\n          body: new SceneErrorState({\n            message: error.toString(),\n          }),\n        }),\n      ],\n    });\n  }\n\n  static Component({ model }: SceneComponentProps<SceneByVariableRepeaterGrid>) {\n    const { body, variableName } = model.useState();\n    const { loading } = (sceneGraph.lookupVariable(variableName, model) as QueryVariable)?.useState();\n\n    return loading ? <Spinner /> : <body.Component model={body} />;\n  }\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nimport { GridItemData } from '../../components/SceneByVariableRepeaterGrid/types/GridItemData';\n\nexport interface EventExpandPanelPayload {\n  item: GridItemData;\n}\n\nexport class EventExpandPanel extends BusEventWithPayload<EventExpandPanelPayload> {\n  public static type = 'expand-panel';\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nimport { GridItemData } from '../../components/SceneByVariableRepeaterGrid/types/GridItemData';\n\nexport interface EventSelectLabelPayload {\n  item: GridItemData;\n}\n\nexport class EventSelectLabel extends BusEventWithPayload<EventSelectLabelPayload> {\n  public static type = 'select-label';\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nimport { GridItemData } from '../../components/SceneByVariableRepeaterGrid/types/GridItemData';\n\nexport interface EventViewServiceFlameGraphPayload {\n  item: GridItemData;\n}\n\nexport class EventViewServiceFlameGraph extends BusEventWithPayload<EventViewServiceFlameGraphPayload> {\n  public static type = 'view-service-flame-graph';\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nimport { GridItemData } from '../../components/SceneByVariableRepeaterGrid/types/GridItemData';\n\nexport interface EventViewServiceLabelsPayload {\n  item: GridItemData;\n}\n\nexport class EventViewServiceLabels extends BusEventWithPayload<EventViewServiceLabelsPayload> {\n  public static type = 'view-service-labels';\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nimport { GridItemData } from '../../components/SceneByVariableRepeaterGrid/types/GridItemData';\n\nexport interface EventViewServiceProfilesPayload {\n  item: GridItemData;\n}\n\nexport class EventViewServiceProfiles extends BusEventWithPayload<EventViewServiceProfilesPayload> {\n  public static type = 'view-service-profiles';\n}\n","import { css } from '@emotion/css';\nimport { SceneComponentProps, SceneObject, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { Button, IconName, useStyles2 } from '@grafana/ui';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport { merge } from 'lodash';\nimport React from 'react';\n\nimport { GridItemData } from '../../components/SceneByVariableRepeaterGrid/types/GridItemData';\nimport { getSceneVariableValue } from '../../helpers/getSceneVariableValue';\nimport { interpolateQueryRunnerVariables } from '../../infrastructure/helpers/interpolateQueryRunnerVariables';\nimport { EventExpandPanel, EventExpandPanelPayload } from '../events/EventExpandPanel';\nimport { EventSelectLabel, EventSelectLabelPayload } from '../events/EventSelectLabel';\nimport { EventViewServiceFlameGraph, EventViewServiceFlameGraphPayload } from '../events/EventViewServiceFlameGraph';\nimport { EventViewServiceLabels, EventViewServiceLabelsPayload } from '../events/EventViewServiceLabels';\nimport { EventViewServiceProfiles, EventViewServiceProfilesPayload } from '../events/EventViewServiceProfiles';\n\ntype ActionType = 'expand-panel' | 'select-label' | 'view-flame-graph' | 'view-labels' | 'view-profiles';\n\ntype EventLookup = {\n  icon?: IconName;\n  label?: string;\n  ariaLabel?: string;\n  tooltip: (item: GridItemData, model: SceneObject) => string;\n  EventConstructor:\n    | (new (payload: EventExpandPanelPayload) => EventExpandPanel)\n    | (new (payload: EventSelectLabelPayload) => EventSelectLabel)\n    | (new (payload: EventViewServiceFlameGraphPayload) => EventViewServiceFlameGraph)\n    | (new (payload: EventViewServiceLabelsPayload) => EventViewServiceLabels)\n    | (new (payload: EventViewServiceProfilesPayload) => EventViewServiceProfiles);\n};\n\nconst Events = new Map<ActionType, EventLookup>([\n  [\n    'expand-panel',\n    Object.freeze({\n      ariaLabel: 'Expand panel',\n      icon: 'expand-arrows',\n      tooltip: () => 'Expand this panel to view all the data for the current filters',\n      EventConstructor: EventExpandPanel,\n    }),\n  ],\n  [\n    'select-label',\n    Object.freeze({\n      label: 'Select',\n      tooltip: ({ queryRunnerParams }) => `View \"${queryRunnerParams.groupBy?.label}\" values breakdown`,\n      EventConstructor: EventSelectLabel,\n    }),\n  ],\n  [\n    'view-flame-graph',\n    Object.freeze({\n      label: 'Flame graph',\n      tooltip: ({ queryRunnerParams }, model) => {\n        const serviceName = queryRunnerParams.serviceName || getSceneVariableValue(model, 'serviceName');\n        const profileMetricId = queryRunnerParams.profileMetricId || getSceneVariableValue(model, 'profileMetricId');\n        return `View the \"${getProfileMetric(profileMetricId as ProfileMetricId).type}\" flame graph of ${serviceName}`;\n      },\n      EventConstructor: EventViewServiceFlameGraph,\n    }),\n  ],\n  [\n    'view-labels',\n    Object.freeze({\n      label: 'Labels',\n      tooltip: ({ queryRunnerParams }, model) => {\n        const serviceName = queryRunnerParams.serviceName || getSceneVariableValue(model, 'serviceName');\n        return `Explore the labels of ${serviceName}`;\n      },\n      EventConstructor: EventViewServiceLabels,\n    }),\n  ],\n  [\n    'view-profiles',\n    Object.freeze({\n      label: 'Profile types',\n      tooltip: ({ queryRunnerParams }, model) => {\n        const serviceName = queryRunnerParams.serviceName || getSceneVariableValue(model, 'serviceName');\n        return `View the profile types of ${serviceName}`;\n      },\n      EventConstructor: EventViewServiceProfiles,\n    }),\n  ],\n]);\n\ninterface SelectActionState extends SceneObjectState {\n  type: ActionType;\n  EventConstructor: EventLookup['EventConstructor'];\n  item: GridItemData;\n  label?: string;\n  ariaLabel?: string;\n  icon?: IconName;\n  tooltip?: EventLookup['tooltip'];\n  skipVariablesInterpolation?: boolean;\n}\n\nexport class SelectAction extends SceneObjectBase<SelectActionState> {\n  constructor({\n    type,\n    item,\n    tooltip,\n    skipVariablesInterpolation,\n  }: {\n    type: ActionType;\n    item: SelectActionState['item'];\n    tooltip?: SelectActionState['tooltip'];\n    skipVariablesInterpolation?: SelectActionState['skipVariablesInterpolation'];\n  }) {\n    const lookup = Events.get(type);\n    if (!lookup) {\n      throw new TypeError(`Unknown event type=\"${type}\"!`);\n    }\n\n    super({ type, item, ...merge({}, lookup, { tooltip, skipVariablesInterpolation }) });\n  }\n\n  public onClick = () => {\n    reportInteraction('g_pyroscope_app_select_action_clicked', { type: this.state.type });\n\n    this.publishEvent(this.buildEvent(), true);\n  };\n\n  buildEvent() {\n    const { EventConstructor, item, skipVariablesInterpolation } = this.state;\n\n    const completeItem = {\n      ...item,\n      queryRunnerParams: skipVariablesInterpolation\n        ? item.queryRunnerParams\n        : interpolateQueryRunnerVariables(this, item),\n    };\n\n    return new EventConstructor({\n      item: completeItem,\n    });\n  }\n\n  public static Component = ({ model }: SceneComponentProps<SelectAction>) => {\n    const styles = useStyles2(getStyles);\n    const { ariaLabel, label, icon, tooltip, item } = model.useState();\n\n    return (\n      <Button\n        className={styles.selectButton}\n        aria-label={ariaLabel || label}\n        variant=\"primary\"\n        size=\"sm\"\n        fill=\"text\"\n        onClick={model.onClick}\n        icon={icon}\n        tooltip={tooltip?.(item, model)}\n        tooltipPlacement=\"top\"\n      >\n        {label}\n      </Button>\n    );\n  };\n}\n\nconst getStyles = () => ({\n  selectButton: css`\n    margin: 0;\n    padding: 0;\n  `,\n});\n","import {\n  EmbeddedSceneState,\n  SceneComponentProps,\n  sceneGraph,\n  SceneObjectBase,\n  SceneVariableSet,\n} from '@grafana/scenes';\nimport React from 'react';\n\nimport { SceneByVariableRepeaterGrid } from '../../components/SceneByVariableRepeaterGrid/SceneByVariableRepeaterGrid';\nimport { FavAction } from '../../domain/actions/FavAction';\nimport { SelectAction } from '../../domain/actions/SelectAction';\nimport { ProfileMetricVariable } from '../../domain/variables/ProfileMetricVariable';\nimport { ServiceNameVariable } from '../../domain/variables/ServiceNameVariable/ServiceNameVariable';\nimport { SceneLayoutSwitcher } from '../SceneByVariableRepeaterGrid/components/SceneLayoutSwitcher';\nimport { PanelType } from '../SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher';\nimport { SceneQuickFilter } from '../SceneByVariableRepeaterGrid/components/SceneQuickFilter';\n\ninterface SceneExploreAllServicesState extends EmbeddedSceneState {}\n\nexport class SceneExploreAllServices extends SceneObjectBase<SceneExploreAllServicesState> {\n  constructor() {\n    super({\n      key: 'explore-all-services',\n      $variables: new SceneVariableSet({\n        variables: [\n          // we use a custom instance of ServiceNameVariable to display only the services associated to the selected profile metric\n          new ServiceNameVariable({\n            query: ServiceNameVariable.QUERY_PROFILE_METRIC_DEPENDENT,\n            skipUrlSync: true,\n          }),\n        ],\n      }),\n      body: new SceneByVariableRepeaterGrid({\n        key: 'all-services-grid',\n        variableName: 'serviceName',\n        mapOptionToItem: (option, index, { profileMetricId }) => ({\n          index,\n          value: option.value as string,\n          label: option.label,\n          queryRunnerParams: {\n            serviceName: option.value as string,\n            profileMetricId,\n          },\n          panelType: PanelType.TIMESERIES,\n        }),\n        headerActions: (item) => [\n          new SelectAction({ type: 'view-profiles', item }),\n          new SelectAction({ type: 'view-labels', item }),\n          new SelectAction({ type: 'view-flame-graph', item }),\n          new FavAction({ item }),\n        ],\n      }),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    sceneGraph\n      .findByKeyAndType(this, 'quick-filter', SceneQuickFilter)\n      .setPlaceholder('Search services (comma-separated regexes are supported)');\n  }\n\n  // see SceneProfilesExplorer\n  getVariablesAndGridControls() {\n    return {\n      variables: [sceneGraph.findByKeyAndType(this, 'profileMetricId', ProfileMetricVariable)],\n      gridControls: [\n        sceneGraph.findByKeyAndType(this, 'quick-filter', SceneQuickFilter),\n        sceneGraph.findByKeyAndType(this, 'layout-switcher', SceneLayoutSwitcher),\n      ],\n    };\n  }\n\n  static Component({ model }: SceneComponentProps<SceneExploreAllServices>) {\n    const { body } = model.useState();\n\n    return <body.Component model={body} />;\n  }\n}\n","import { SceneComponentProps, SceneObject, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { Drawer } from '@grafana/ui';\nimport React from 'react';\n\ninterface SceneDrawerState extends SceneObjectState {\n  key?: string;\n  isOpen?: boolean;\n  title?: string;\n  subTitle?: string;\n  body?: SceneObject;\n}\n\nexport class SceneDrawer extends SceneObjectBase<SceneDrawerState> {\n  constructor(state?: SceneDrawerState) {\n    super({\n      key: 'drawer',\n      isOpen: false,\n      ...state,\n    });\n  }\n\n  open = ({\n    title,\n    subTitle,\n    body,\n  }: {\n    title?: SceneDrawerState['title'];\n    subTitle?: SceneDrawerState['subTitle'];\n    body?: SceneDrawerState['body'];\n  }) => {\n    this.setState({ ...this.state, isOpen: true, title, subTitle, body });\n  };\n\n  close = () => {\n    this.setState({ isOpen: false });\n  };\n\n  static Component = ({ model }: SceneComponentProps<SceneDrawer>) => {\n    const { isOpen, title, subTitle, body } = model.useState();\n\n    return (\n      <>\n        {body && isOpen && (\n          <Drawer size=\"lg\" title={title} subtitle={subTitle} closeOnMaskClick onClose={model.close}>\n            <body.Component model={body} />\n          </Drawer>\n        )}\n      </>\n    );\n  };\n}\n","import { VariableRefresh } from '@grafana/data';\nimport { QueryVariable, VariableValueOption } from '@grafana/scenes';\nimport { lastValueFrom } from 'rxjs';\n\nimport { PYROSCOPE_FAVORITES_DATA_SOURCE } from '../../infrastructure/pyroscope-data-sources';\n\nexport class FavoriteVariable extends QueryVariable {\n  constructor() {\n    super({\n      name: 'favorite',\n      label: ' Favorite',\n      datasource: PYROSCOPE_FAVORITES_DATA_SOURCE,\n      // \"hack\": we want to subscribe to changes of dataSource\n      query: '$dataSource',\n      loading: true,\n      refresh: VariableRefresh.never,\n      skipUrlSync: true,\n    });\n  }\n\n  async update() {\n    if (this.state.loading) {\n      return;\n    }\n\n    let options: VariableValueOption[] = [];\n    let error = null;\n\n    this.setState({ loading: true, options: [], error: null });\n\n    try {\n      options = await lastValueFrom(this.getValueOptions({}));\n    } catch (e) {\n      error = e;\n    } finally {\n      this.setState({ loading: false, options, error });\n    }\n  }\n}\n","import {\n  EmbeddedSceneState,\n  SceneComponentProps,\n  sceneGraph,\n  SceneObjectBase,\n  SceneVariableSet,\n} from '@grafana/scenes';\nimport React from 'react';\n\nimport { SceneByVariableRepeaterGrid } from '../../components/SceneByVariableRepeaterGrid/SceneByVariableRepeaterGrid';\nimport { GridItemData } from '../../components/SceneByVariableRepeaterGrid/types/GridItemData';\nimport { SceneDrawer } from '../../components/SceneDrawer';\nimport { FavAction } from '../../domain/actions/FavAction';\nimport { SelectAction } from '../../domain/actions/SelectAction';\nimport { EventExpandPanel } from '../../domain/events/EventExpandPanel';\nimport { FavoriteVariable } from '../../domain/variables/FavoriteVariable';\nimport { vizPanelBuilder } from '../../helpers/vizPanelBuilder';\nimport { SceneLayoutSwitcher } from '../SceneByVariableRepeaterGrid/components/SceneLayoutSwitcher';\nimport { SceneNoDataSwitcher } from '../SceneByVariableRepeaterGrid/components/SceneNoDataSwitcher';\nimport { SceneQuickFilter } from '../SceneByVariableRepeaterGrid/components/SceneQuickFilter';\n\ninterface SceneExploreFavoritesState extends EmbeddedSceneState {\n  drawer: SceneDrawer;\n}\n\nexport class SceneExploreFavorites extends SceneObjectBase<SceneExploreFavoritesState> {\n  constructor() {\n    super({\n      key: 'explore-favorites',\n      $variables: new SceneVariableSet({ variables: [new FavoriteVariable()] }),\n      body: new SceneByVariableRepeaterGrid({\n        key: 'favorites-grid',\n        variableName: 'favorite',\n        mapOptionToItem: (option) => {\n          // see FavoritesDataSource.ts\n          const { index, value, panelType, queryRunnerParams } = JSON.parse(option.value as string);\n\n          return {\n            index,\n            value,\n            label: option.label,\n            queryRunnerParams,\n            panelType,\n          };\n        },\n        sortItemsFn: (a, b) => a.label.localeCompare(b.label),\n        headerActions: (item) => {\n          const actions: Array<SelectAction | FavAction> = [\n            new SelectAction({ type: 'view-labels', item, skipVariablesInterpolation: true }),\n            new SelectAction({ type: 'view-flame-graph', item, skipVariablesInterpolation: true }),\n          ];\n\n          if (item.queryRunnerParams.groupBy) {\n            actions.push(\n              new SelectAction({\n                type: 'expand-panel',\n                item,\n                tooltip: () => 'Expand this panel to view all the data',\n                skipVariablesInterpolation: true,\n              })\n            );\n          }\n\n          actions.push(new FavAction({ item, skipVariablesInterpolation: true }));\n\n          return actions;\n        },\n      }),\n      drawer: new SceneDrawer(),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    sceneGraph\n      .findByKeyAndType(this, 'quick-filter', SceneQuickFilter)\n      .setPlaceholder('Search favorites (comma-separated regexes are supported)');\n\n    const expandPanelSub = this.subscribeToEvent(EventExpandPanel, async (event) => {\n      this.openExpandedPanelDrawer(event.payload.item);\n    });\n\n    return () => {\n      expandPanelSub.unsubscribe();\n    };\n  }\n\n  // see SceneProfilesExplorer\n  getVariablesAndGridControls() {\n    return {\n      variables: [],\n      gridControls: [\n        sceneGraph.findByKeyAndType(this, 'quick-filter', SceneQuickFilter),\n        sceneGraph.findByKeyAndType(this, 'layout-switcher', SceneLayoutSwitcher),\n        sceneGraph.findByKeyAndType(this, 'no-data-switcher', SceneNoDataSwitcher),\n      ],\n    };\n  }\n\n  openExpandedPanelDrawer(item: GridItemData) {\n    const headerActions = () => [\n      new SelectAction({ type: 'view-labels', item }),\n      new SelectAction({ type: 'view-flame-graph', item }),\n    ];\n\n    this.state.drawer.open({\n      title: item.label,\n      body: vizPanelBuilder(item.panelType, {\n        displayAllValues: true,\n        legendPlacement: 'right',\n        item,\n        headerActions,\n      }),\n    });\n  }\n\n  static Component({ model }: SceneComponentProps<SceneExploreFavorites>) {\n    const { body, drawer } = model.useState();\n\n    return (\n      <>\n        <body.Component model={body} />\n        <drawer.Component model={drawer} />\n      </>\n    );\n  }\n}\n","import {\n  SceneComponentProps,\n  SceneObjectBase,\n  SceneObjectState,\n  VariableDependencyConfig,\n  VizPanelState,\n} from '@grafana/scenes';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport React from 'react';\n\nimport { getSceneVariableValue } from '../helpers/getSceneVariableValue';\nimport { getProfileMetricLabel } from '../infrastructure/series/helpers/getProfileMetricLabel';\nimport { PanelType } from './SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher';\nimport { GridItemData } from './SceneByVariableRepeaterGrid/types/GridItemData';\nimport { SceneLabelValuesTimeseries } from './SceneLabelValuesTimeseries';\n\ninterface SceneMainServiceTimeseriesState extends SceneObjectState {\n  item?: GridItemData;\n  headerActions: (item: GridItemData) => VizPanelState['headerActions'];\n  body?: SceneLabelValuesTimeseries;\n}\n\nexport class SceneMainServiceTimeseries extends SceneObjectBase<SceneMainServiceTimeseriesState> {\n  static MIN_HEIGHT = 200;\n\n  protected _variableDependency = new VariableDependencyConfig(this, {\n    variableNames: ['profileMetricId'],\n    onReferencedVariableValueChanged: () => {\n      this.state.body?.updateTitle(this.buildTitle());\n    },\n  });\n\n  constructor({\n    item,\n    headerActions,\n  }: {\n    item: SceneMainServiceTimeseriesState['item'];\n    headerActions: SceneMainServiceTimeseriesState['headerActions'];\n  }) {\n    super({\n      item,\n      headerActions,\n      body: undefined,\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    const { headerActions } = this.state;\n\n    this.setState({\n      body: new SceneLabelValuesTimeseries({\n        item: {\n          // we should test with users first but...\n          // ...uncomment to preserve the color of the item that was clicked (coming from \"All services\", \"Favorites\", etc.)\n          // index: item ? item.index : 0,\n          index: 0,\n          value: '',\n          label: this.buildTitle(),\n          panelType: PanelType.TIMESERIES,\n          // let actions interpolate the missing values\n          queryRunnerParams: {},\n        },\n        headerActions,\n      }),\n    });\n  }\n\n  buildTitle() {\n    const profileMetricId = getSceneVariableValue(this, 'profileMetricId');\n    const { description } = getProfileMetric(profileMetricId as ProfileMetricId);\n    return description || getProfileMetricLabel(profileMetricId);\n  }\n\n  static Component({ model }: SceneComponentProps<SceneMainServiceTimeseries>) {\n    const { body } = model.useState();\n\n    return body && <body.Component model={body} />;\n  }\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\ninterface EventViewDiffFlameGraphPayload {}\n\nexport class EventViewDiffFlameGraph extends BusEventWithPayload<EventViewDiffFlameGraphPayload> {\n  public static type = 'view-diff-flame-graph';\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Field, measureText, RadioButtonGroup, RefreshPicker, Select, useStyles2, useTheme2 } from '@grafana/ui';\nimport { useResizeObserver } from '@react-aria/utils';\nimport { noOp } from '@shared/domain/noOp';\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport { GroupByVariable } from './GroupByVariable';\n\ntype Props = {\n  options: Array<SelectableValue<string>>;\n  mainLabels: string[];\n  value?: string;\n  onChange: (label: string) => void;\n  onRefresh: () => void;\n};\n\nexport function GroupBySelector({ options, mainLabels, value, onChange, onRefresh }: Props) {\n  const styles = useStyles2(getStyles);\n  const theme = useTheme2();\n\n  const [labelSelectorRequiredWidth, setLabelSelectorRequiredWidth] = useState<number>(0);\n  const [availableWidth, setAvailableWidth] = useState<number>(0);\n\n  const useHorizontalLabelSelector = availableWidth > labelSelectorRequiredWidth;\n\n  const controlsContainer = useRef<HTMLDivElement>(null);\n\n  useResizeObserver({\n    ref: controlsContainer,\n    onResize: () => {\n      const element = controlsContainer.current;\n      if (element) {\n        setAvailableWidth(element.clientWidth);\n      }\n    },\n  });\n\n  const mainOptions = options.filter((o) => mainLabels.includes(o.value as string));\n  const otherOptions = options.filter((o) => !mainLabels.includes(o.value as string));\n\n  useEffect(() => {\n    const { fontSize } = theme.typography;\n    const text = mainOptions.map((option) => option.label || option.text || '').join(' ');\n    const textWidth = measureText(text, fontSize).width;\n    const additionalWidthPerItem = 70;\n    setLabelSelectorRequiredWidth(textWidth + additionalWidthPerItem * mainOptions.length);\n  }, [mainOptions, theme]);\n\n  return (\n    <Field label=\"Group by labels\">\n      <div ref={controlsContainer} className={styles.container}>\n        {useHorizontalLabelSelector ? (\n          <>\n            <RadioButtonGroup aria-label=\"Labels selector\" options={mainOptions} value={value} onChange={onChange} />\n            <Select\n              aria-label=\"Other labels selector\"\n              className={styles.select}\n              placeholder=\"Other labels\"\n              options={otherOptions}\n              value={value && otherOptions.some((x) => x.value === value) ? value : null} // remove value from select when radio button clicked\n              onChange={(selected) => onChange(selected?.value ?? 'all')}\n              isClearable\n            />\n          </>\n        ) : (\n          <Select\n            aria-label=\"Labels selector\"\n            className={styles.select}\n            value={value}\n            placeholder=\"Select label\"\n            options={options}\n            onChange={(selected) => onChange(selected?.value || GroupByVariable.DEFAULT_VALUE)}\n            isClearable\n          />\n        )}\n        <RefreshPicker\n          noIntervalPicker\n          onRefresh={onRefresh}\n          isOnCanvas={false}\n          onIntervalChanged={noOp}\n          tooltip=\"Click to refresh all labels\"\n        />\n      </div>\n    </Field>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    gap: ${theme.spacing(1)};\n  `,\n  select: css`\n    max-width: ${theme.spacing(22)};\n  `,\n});\n","import {useEffect as $Vsl8o$useEffect} from \"react\";\n\n\nfunction $9daab02d461809db$var$hasResizeObserver() {\n    return typeof window.ResizeObserver !== 'undefined';\n}\nfunction $9daab02d461809db$export$683480f191c0e3ea(options) {\n    const { ref: ref, box: box, onResize: onResize } = options;\n    (0, $Vsl8o$useEffect)(()=>{\n        let element = ref === null || ref === void 0 ? void 0 : ref.current;\n        if (!element) return;\n        if (!$9daab02d461809db$var$hasResizeObserver()) {\n            window.addEventListener('resize', onResize, false);\n            return ()=>{\n                window.removeEventListener('resize', onResize, false);\n            };\n        } else {\n            const resizeObserverInstance = new window.ResizeObserver((entries)=>{\n                if (!entries.length) return;\n                onResize();\n            });\n            resizeObserverInstance.observe(element, {\n                box: box\n            });\n            return ()=>{\n                if (element) resizeObserverInstance.unobserve(element);\n            };\n        }\n    }, [\n        onResize,\n        ref,\n        box\n    ]);\n}\n\n\nexport {$9daab02d461809db$export$683480f191c0e3ea as useResizeObserver};\n//# sourceMappingURL=useResizeObserver.module.js.map\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { MultiValueVariable, QueryVariable, SceneComponentProps, VariableValueOption } from '@grafana/scenes';\nimport { Field, Icon, RefreshPicker, Spinner, Tooltip, useStyles2 } from '@grafana/ui';\nimport { noOp } from '@shared/domain/noOp';\nimport { prepareHistoryEntry } from '@shared/domain/prepareHistoryEntry';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport React, { useMemo } from 'react';\nimport { lastValueFrom } from 'rxjs';\n\nimport { PYROSCOPE_LABELS_DATA_SOURCE } from '../../../infrastructure/pyroscope-data-sources';\nimport { GroupBySelector } from './GroupBySelector';\n\nexport class GroupByVariable extends QueryVariable {\n  static DEFAULT_VALUE = 'all';\n\n  static MAX_MAIN_LABELS = 8;\n\n  constructor() {\n    super({\n      key: 'groupBy',\n      name: 'groupBy',\n      label: 'Group by labels',\n      datasource: PYROSCOPE_LABELS_DATA_SOURCE,\n      // \"hack\": we want to subscribe to changes of dataSource, serviceName and profileMetricId\n      // we could also add filters, but the Service labels exploration type would reload all labels each time they are modified\n      // which wouldn't be great UX\n      query: '$dataSource and $profileMetricId{service_name=\"$serviceName\"}',\n      loading: true,\n    });\n\n    this.changeValueTo = this.changeValueTo.bind(this);\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    if (!this.state.value) {\n      this.setState({ value: GroupByVariable.DEFAULT_VALUE });\n    }\n  }\n\n  update = async () => {\n    if (this.state.loading) {\n      return;\n    }\n\n    let options: VariableValueOption[] = [];\n    let error = null;\n\n    this.setState({ loading: true, options: [], error: null });\n\n    try {\n      options = await lastValueFrom(this.getValueOptions({}));\n    } catch (e) {\n      error = e;\n    } finally {\n      this.setState({ loading: false, options, error });\n    }\n  };\n\n  onChange = (newValue: string) => {\n    reportInteraction('g_pyroscope_app_group_by_label_clicked');\n\n    prepareHistoryEntry();\n    this.changeValueTo(newValue);\n  };\n\n  static Component = ({ model }: SceneComponentProps<MultiValueVariable & { update?: any; onChange?: any }>) => {\n    const styles = useStyles2(getStyles);\n    const { loading, value, options, error } = model.useState();\n\n    const groupByOptions = useMemo(\n      () =>\n        options.map(({ label, value }) => {\n          return value === 'all'\n            ? { label, value }\n            : {\n                label,\n                // see src/pages/ProfilesExplorerView/data/labels/LabelsDataSource.ts\n                value: JSON.parse(String(value)).value,\n              };\n        }),\n      [options]\n    );\n\n    if (loading) {\n      return (\n        <Field label=\"Group by labels\">\n          <Spinner className={styles.spinner} />\n        </Field>\n      );\n    }\n\n    if (error) {\n      logger.error(error, { info: 'Error while loading \"groupBy\" variable values!' });\n\n      return (\n        <Field label=\"Group by labels\">\n          <div className={styles.groupByErrorContainer}>\n            <Tooltip theme=\"error\" content={error.toString()}>\n              <Icon className={styles.iconError} name=\"exclamation-triangle\" size=\"xl\" />\n            </Tooltip>\n            <RefreshPicker noIntervalPicker onRefresh={model.update} isOnCanvas={false} onIntervalChanged={noOp} />\n          </div>\n        </Field>\n      );\n    }\n\n    const getMainLabels = (groupByOptions: Array<SelectableValue<string>>) => {\n      return groupByOptions.slice(0, GroupByVariable.MAX_MAIN_LABELS).map(({ value }) => value as string);\n    };\n\n    return (\n      <GroupBySelector\n        options={groupByOptions}\n        value={value as string}\n        mainLabels={getMainLabels(groupByOptions)}\n        onChange={model.onChange}\n        onRefresh={model.update}\n      />\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  spinner: css`\n    height: 32px;\n    line-height: 32px;\n  `,\n  groupByErrorContainer: css`\n    display: flex;\n  `,\n  iconError: css`\n    height: 32px;\n    align-self: center;\n    color: ${theme.colors.error.text};\n  `,\n});\n","import { BusEventWithPayload } from '@grafana/data';\n\nimport { GridItemData } from '../../../../../SceneByVariableRepeaterGrid/types/GridItemData';\nimport { CompareTarget } from '../../components/SceneLabelValuesGrid/domain/types';\n\ninterface EventSelectForComparePayload {\n  compareTarget: CompareTarget;\n  item: GridItemData;\n}\n\nexport class EventSelectForCompare extends BusEventWithPayload<EventSelectForComparePayload> {\n  public static type = 'select-for-compare';\n}\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Checkbox, Tooltip, useStyles2 } from '@grafana/ui';\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport { CompareTarget } from '../../../domain/types';\n\ntype CompareActionProps = {\n  option: {\n    label: string;\n    value: CompareTarget;\n    description: string;\n  };\n  checked: boolean;\n  onChange: (compareTarget: CompareTarget) => void;\n};\n\nexport function CompareAction({ option, checked, onChange }: CompareActionProps) {\n  const styles = useStyles2(getStyles);\n\n  const [showTooltip, setShowTooltip] = useState(false);\n  const checkboxRef = useRef<HTMLInputElement>(null);\n  const label = (checkboxRef.current as HTMLInputElement)?.closest('label');\n\n  // we write custom code to provide the tooltips because wrapping our checkbox into the <Tooltip> component does not work\n  useEffect(() => {\n    if (!label || checked) {\n      setShowTooltip(false);\n      return;\n    }\n\n    const onMouseEnter = () => {\n      setShowTooltip(true);\n    };\n\n    const onMouseLeave = () => {\n      setShowTooltip(false);\n    };\n\n    label.addEventListener('mouseenter', onMouseEnter);\n    label.addEventListener('mouseleave', onMouseLeave);\n\n    return () => {\n      label.removeEventListener('mouseleave', onMouseLeave);\n      label.removeEventListener('mouseenter', onMouseEnter);\n    };\n  }, [checked, label]);\n\n  return (\n    <>\n      <Tooltip content={option.description} show={!checked && showTooltip} placement=\"top\">\n        <span className={styles.tooltipAnchor} />\n      </Tooltip>\n      <Checkbox\n        ref={checkboxRef}\n        className={cx(styles.checkbox, 'checkbox', checked && 'checked')}\n        checked={checked}\n        label={option.label}\n        onChange={() => onChange(option.value)}\n      />\n    </>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  tooltipAnchor: css`\n    position: relative;\n    left: 42px;\n  `,\n  checkbox: css`\n    column-gap: 4px;\n\n    &:last-child {\n      & :nth-child(1) {\n        grid-column-start: 2;\n      }\n      & :nth-child(2) {\n        grid-column-start: 1;\n      }\n    }\n\n    span {\n      color: ${theme.colors.text.secondary};\n    }\n    span:hover {\n      color: ${theme.colors.text.primary};\n    }\n\n    &.checked span {\n      color: ${theme.colors.text.primary};\n    }\n  `,\n});\n","import { css } from '@emotion/css';\nimport { getValueFormat, GrafanaTheme2 } from '@grafana/data';\nimport { Spinner, useStyles2 } from '@grafana/ui';\nimport React, { useMemo } from 'react';\n\nimport { GridItemData } from '../../../../../../../../../components/SceneByVariableRepeaterGrid/types/GridItemData';\nimport { getColorByIndex } from '../../../../../../../../../helpers/getColorByIndex';\nimport { CompareTarget } from '../../../domain/types';\nimport { ItemStats } from '../SceneStatsPanel';\nimport { CompareAction } from './CompareAction';\n\ntype StatsPanelProps = {\n  item: GridItemData;\n  itemStats?: ItemStats;\n  statsDescription: string;\n  compareActionChecks: boolean[];\n  onChangeCompareTarget: (compareTarget: CompareTarget) => void;\n};\n\nexport function StatsPanel({\n  item,\n  itemStats,\n  statsDescription,\n  compareActionChecks,\n  onChangeCompareTarget,\n}: StatsPanelProps) {\n  const styles = useStyles2(getStyles);\n\n  const { index, value } = item;\n\n  const color = getColorByIndex(index);\n\n  const total = useMemo(() => {\n    if (!itemStats) {\n      return <Spinner inline />;\n    }\n\n    const { allValuesSum, unit } = itemStats;\n    const { text, suffix } = getValueFormat(unit)(allValuesSum);\n\n    return `${text}${suffix}`;\n  }, [itemStats]);\n\n  const options = useMemo(\n    () => [\n      {\n        label: 'Baseline',\n        value: CompareTarget.BASELINE,\n        description: !compareActionChecks[0] ? `Click to select \"${value}\" as baseline for comparison` : '',\n      },\n      {\n        label: 'Comparison',\n        value: CompareTarget.COMPARISON,\n        description: !compareActionChecks[1] ? `Click to select \"${value}\" as target for comparison` : '',\n      },\n    ],\n    [compareActionChecks, value]\n  );\n\n  return (\n    <div className={styles.container} data-testid={`stats-panel-${value}`}>\n      <h1 style={{ color }} className={styles.title} title={`${statsDescription}: ${total}`}>\n        {total}\n      </h1>\n\n      <div className={styles.compareActions}>\n        <CompareAction option={options[0]} checked={compareActionChecks[0]} onChange={onChangeCompareTarget} />\n        <CompareAction option={options[1]} checked={compareActionChecks[1]} onChange={onChangeCompareTarget} />\n      </div>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    width: 100%;\n    background-color: ${theme.colors.background.canvas};\n    padding: ${theme.spacing(1)};\n    border: 1px solid ${theme.colors.border.weak};\n    border-right: none;\n    border-radius: 2px 0 0 2px;\n  `,\n  title: css`\n    font-size: 24px;\n    width: 100%;\n    text-align: center;\n    margin-top: ${theme.spacing(5)};\n  `,\n  compareActions: css`\n    display: flex;\n    justify-content: space-between;\n    font-size: 11px;\n    border-top: 1px solid ${theme.colors.border.weak};\n    padding: ${theme.spacing(1)} 0 0 0;\n\n    & .checkbox:nth-child(2) {\n      padding-right: 4px;\n      border-right: 1px solid ${theme.colors.border.strong};\n    }\n    & .checkbox:nth-child(4) {\n      padding-left: 4px;\n    }\n  `,\n});\n","import { SceneComponentProps, sceneGraph, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport React from 'react';\nimport { getSceneVariableValue } from 'src/pages/ProfilesExplorerView/helpers/getSceneVariableValue';\nimport { getProfileMetricLabel } from 'src/pages/ProfilesExplorerView/infrastructure/series/helpers/getProfileMetricLabel';\n\nimport { GridItemData } from '../../../../../../../SceneByVariableRepeaterGrid/types/GridItemData';\nimport { EventSelectForCompare } from '../../../../domain/events/EventSelectForCompare';\nimport { SceneGroupByLabels } from '../../../../SceneGroupByLabels';\nimport { CompareTarget } from '../../domain/types';\nimport { StatsPanel } from './ui/StatsPanel';\n\nexport type ItemStats = {\n  allValuesSum: number;\n  unit: string;\n};\n\ninterface SceneStatsPanelState extends SceneObjectState {\n  item: GridItemData;\n  itemStats?: ItemStats;\n  compareActionChecks: boolean[];\n  statsDescription: string;\n}\n\nexport class SceneStatsPanel extends SceneObjectBase<SceneStatsPanelState> {\n  static WIDTH_IN_PIXELS = 186;\n\n  constructor({ item }: { item: GridItemData }) {\n    super({\n      item,\n      itemStats: undefined,\n      compareActionChecks: [false, false],\n      statsDescription: '',\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    const compare = sceneGraph.findByKeyAndType(this, 'group-by-labels', SceneGroupByLabels).getCompare();\n\n    this.updateCompareActions(compare.get(CompareTarget.BASELINE), compare.get(CompareTarget.COMPARISON));\n\n    this.setState({ statsDescription: this.getStatsDescription() });\n  }\n\n  updateCompareActions(baselineItem?: GridItemData, comparisonItem?: GridItemData) {\n    const { item } = this.state;\n\n    this.setState({\n      compareActionChecks: [baselineItem?.value === item.value, comparisonItem?.value === item.value],\n    });\n  }\n\n  getStatsDescription() {\n    const profileMetricId = getSceneVariableValue(this, 'profileMetricId');\n    const { description } = getProfileMetric(profileMetricId as ProfileMetricId);\n    return description || getProfileMetricLabel(profileMetricId);\n  }\n\n  onChangeCompareTarget = (compareTarget: CompareTarget) => {\n    this.publishEvent(\n      new EventSelectForCompare({\n        compareTarget,\n        item: this.state.item,\n      }),\n      true\n    );\n  };\n\n  getStats() {\n    return this.state.itemStats;\n  }\n\n  updateStats(itemStats: ItemStats) {\n    this.setState({ itemStats });\n  }\n\n  static Component({ model }: SceneComponentProps<SceneStatsPanel>) {\n    const { item, itemStats, statsDescription, compareActionChecks } = model.useState();\n\n    return (\n      <StatsPanel\n        item={item}\n        itemStats={itemStats}\n        statsDescription={statsDescription}\n        compareActionChecks={compareActionChecks}\n        onChangeCompareTarget={model.onChangeCompareTarget}\n      />\n    );\n  }\n}\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { SceneComponentProps, SceneObjectBase, SceneObjectState, VizPanelState } from '@grafana/scenes';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { EventTimeseriesDataReceived } from '../../../../../../../domain/events/EventTimeseriesDataReceived';\nimport { getSeriesStatsValue } from '../../../../../../../infrastructure/helpers/getSeriesStatsValue';\nimport { GridItemData } from '../../../../../../SceneByVariableRepeaterGrid/types/GridItemData';\nimport { SceneLabelValuesTimeseries } from '../../../../../../SceneLabelValuesTimeseries';\nimport { GRID_AUTO_ROWS } from '../SceneLabelValuesGrid';\nimport { SceneStatsPanel } from './SceneStatsPanel/SceneStatsPanel';\n\ninterface SceneLabelValuesStatAndTimeseriesState extends SceneObjectState {\n  statsPanel: SceneStatsPanel;\n  timeseriesPanel: SceneLabelValuesTimeseries;\n}\n\nexport class SceneLabelValuePanel extends SceneObjectBase<SceneLabelValuesStatAndTimeseriesState> {\n  static buildPanelKey(item: GridItemData) {\n    return `compare-panel-${item.value}`;\n  }\n\n  constructor({\n    item,\n    headerActions,\n  }: {\n    item: GridItemData;\n    headerActions: (item: GridItemData) => VizPanelState['headerActions'];\n  }) {\n    super({\n      key: 'label-value-panel',\n      statsPanel: new SceneStatsPanel({ item }),\n      timeseriesPanel: new SceneLabelValuesTimeseries({ item, headerActions }),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    const { statsPanel, timeseriesPanel } = this.state;\n\n    const timeseriesSub = timeseriesPanel.subscribeToEvent(EventTimeseriesDataReceived, (event) => {\n      const s = event.payload.series?.[0];\n\n      if (!s) {\n        statsPanel.updateStats({ allValuesSum: 0, unit: 'short' });\n        return;\n      }\n\n      const allValuesSum = getSeriesStatsValue(s, 'allValuesSum') || 0;\n\n      if (statsPanel.getStats()?.allValuesSum !== allValuesSum) {\n        statsPanel.updateStats({\n          allValuesSum,\n          unit: s.fields[1].config.unit || 'short',\n        });\n      }\n    });\n\n    return () => {\n      timeseriesSub.unsubscribe();\n    };\n  }\n\n  static Component({ model }: SceneComponentProps<SceneLabelValuePanel>) {\n    const styles = useStyles2(getStyles); // eslint-disable-line react-hooks/rules-of-hooks\n    const { statsPanel, timeseriesPanel } = model.useState();\n    const { compareActionChecks } = statsPanel.useState();\n    const isSelected = compareActionChecks[0] || compareActionChecks[1];\n\n    return (\n      <div className={cx(styles.container, isSelected && 'selected')}>\n        <div className={styles.statsPanel}>\n          <statsPanel.Component model={statsPanel} />\n        </div>\n        <div className={styles.timeseriesPanel}>\n          <timeseriesPanel.Component model={timeseriesPanel} />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    min-width: 0px;\n    min-height: ${GRID_AUTO_ROWS};\n    flex-flow: row;\n\n    box-sizing: border-box;\n    border: 1px solid transparent;\n    &.selected {\n      border: 1px solid ${theme.colors.primary.main};\n    }\n\n    & > div {\n      display: flex;\n      position: relative;\n      flex-direction: row;\n      align-self: stretch;\n      min-height: ${GRID_AUTO_ROWS};\n    }\n  `,\n  statsPanel: css`\n    width: ${SceneStatsPanel.WIDTH_IN_PIXELS}px;\n  `,\n  timeseriesPanel: css`\n    flex-grow: 1;\n\n    & [data-viz-panel-key] > * {\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n    }\n  `,\n});\n","import { SceneQueryRunner } from '@grafana/scenes';\n\nimport { PYROSCOPE_DATA_SOURCE } from '../../../../../../../infrastructure/pyroscope-data-sources';\n\nexport function buildLabelValuesGridQueryRunner({ label }: { label: string }) {\n  const selector = 'service_name=\"$serviceName\"';\n\n  return new SceneQueryRunner({\n    datasource: PYROSCOPE_DATA_SOURCE,\n    queries: [\n      {\n        refId: `$profileMetricId-${selector}-${label}`,\n        queryType: 'metrics',\n        profileTypeId: '$profileMetricId',\n        labelSelector: `{${selector}}`,\n        groupBy: [label],\n      },\n    ],\n  });\n}\n","import { DashboardCursorSync, DataFrame, LoadingState } from '@grafana/data';\nimport {\n  behaviors,\n  EmbeddedSceneState,\n  SceneComponentProps,\n  SceneCSSGridItem,\n  SceneCSSGridLayout,\n  SceneDataProvider,\n  SceneDataTransformer,\n  sceneGraph,\n  SceneObjectBase,\n  VizPanelState,\n} from '@grafana/scenes';\nimport { Spinner } from '@grafana/ui';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport { debounce, isEqual } from 'lodash';\nimport React from 'react';\n\nimport { EventTimeseriesDataReceived } from '../../../../../../domain/events/EventTimeseriesDataReceived';\nimport { FiltersVariable } from '../../../../../../domain/variables/FiltersVariable/FiltersVariable';\nimport { GroupByVariable } from '../../../../../../domain/variables/GroupByVariable/GroupByVariable';\nimport { getSceneVariableValue } from '../../../../../../helpers/getSceneVariableValue';\nimport { getSeriesLabelFieldName } from '../../../../../../infrastructure/helpers/getSeriesLabelFieldName';\nimport { SceneEmptyState } from '../../../../../SceneByVariableRepeaterGrid/components/SceneEmptyState/SceneEmptyState';\nimport { SceneErrorState } from '../../../../../SceneByVariableRepeaterGrid/components/SceneErrorState/SceneErrorState';\nimport {\n  LayoutType,\n  SceneLayoutSwitcher,\n  SceneLayoutSwitcherState,\n} from '../../../../../SceneByVariableRepeaterGrid/components/SceneLayoutSwitcher';\nimport {\n  SceneNoDataSwitcher,\n  SceneNoDataSwitcherState,\n} from '../../../../../SceneByVariableRepeaterGrid/components/SceneNoDataSwitcher';\nimport { PanelType } from '../../../../../SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher';\nimport {\n  SceneQuickFilter,\n  SceneQuickFilterState,\n} from '../../../../../SceneByVariableRepeaterGrid/components/SceneQuickFilter';\nimport { sortFavGridItems } from '../../../../../SceneByVariableRepeaterGrid/domain/sortFavGridItems';\nimport {\n  addRefId,\n  addStats,\n  sortSeries,\n} from '../../../../../SceneByVariableRepeaterGrid/infrastructure/data-transformations';\nimport { GridItemData } from '../../../../../SceneByVariableRepeaterGrid/types/GridItemData';\nimport { SceneLabelValuePanel } from './components/SceneLabelValuePanel';\nimport { buildLabelValuesGridQueryRunner } from './infrastructure/buildLabelValuesGridQueryRunner';\n\ninterface SceneLabelValuesGridState extends EmbeddedSceneState {\n  $data: SceneDataProvider;\n  isLoading: boolean;\n  items: GridItemData[];\n  label: string;\n  startColorIndex: number;\n  headerActions: (item: GridItemData, items: GridItemData[]) => VizPanelState['headerActions'];\n  sortItemsFn: (a: GridItemData, b: GridItemData) => number;\n  hideNoData: boolean;\n}\n\nconst GRID_TEMPLATE_COLUMNS = 'repeat(auto-fit, minmax(600px, 1fr))';\nconst GRID_TEMPLATE_ROWS = '1fr';\nexport const GRID_AUTO_ROWS = '160px';\n\nexport class SceneLabelValuesGrid extends SceneObjectBase<SceneLabelValuesGridState> {\n  static buildGridItemKey(item: GridItemData) {\n    return `grid-item-${item.index}-${item.value}`;\n  }\n\n  constructor({\n    key,\n    label,\n    startColorIndex,\n    headerActions,\n  }: {\n    key: string;\n    label: SceneLabelValuesGridState['label'];\n    startColorIndex: SceneLabelValuesGridState['startColorIndex'];\n    headerActions: SceneLabelValuesGridState['headerActions'];\n  }) {\n    super({\n      key,\n      label,\n      startColorIndex,\n      items: [],\n      isLoading: true,\n      $data: new SceneDataTransformer({\n        $data: buildLabelValuesGridQueryRunner({ label }),\n        transformations: [addRefId, addStats, sortSeries],\n      }),\n      hideNoData: false,\n      headerActions,\n      sortItemsFn: sortFavGridItems,\n      body: new SceneCSSGridLayout({\n        templateColumns: GRID_TEMPLATE_ROWS,\n        autoRows: GRID_AUTO_ROWS,\n        isLazy: true,\n        $behaviors: [\n          new behaviors.CursorSync({\n            key: 'metricCrosshairSync',\n            sync: DashboardCursorSync.Crosshair,\n          }),\n        ],\n        children: [],\n      }),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    this.subscribeOnceToDataChange();\n\n    const groupBySub = this.subscribeToGroupByChange();\n\n    const refreshSub = this.subscribeToRefreshClick();\n    const quickFilterSub = this.subscribeToQuickFilterChange();\n    const layoutChangeSub = this.subscribeToLayoutChange();\n    const hideNoDataSub = this.subscribeToHideNoDataChange();\n    const filtersSub = this.subscribeToFiltersChange();\n\n    return () => {\n      filtersSub.unsubscribe();\n      hideNoDataSub.unsubscribe();\n      layoutChangeSub.unsubscribe();\n      quickFilterSub.unsubscribe();\n      refreshSub.unsubscribe();\n      groupBySub.unsubscribe();\n    };\n  }\n\n  subscribeOnceToDataChange(forceRender = false) {\n    const dataSub = this.state.$data.subscribeToState((newState) => {\n      if (newState.data?.state === LoadingState.Loading) {\n        return;\n      }\n\n      dataSub.unsubscribe();\n\n      this.renderGridItems(forceRender);\n\n      this.setState({ isLoading: false });\n    });\n  }\n\n  subscribeToGroupByChange() {\n    const groupByVariable = sceneGraph.findByKeyAndType(this, 'groupBy', GroupByVariable);\n\n    return groupByVariable.subscribeToState((newState, prevState) => {\n      if (!newState.loading && prevState.loading) {\n        this.refetchData();\n      }\n    });\n  }\n\n  subscribeToRefreshClick() {\n    const onClickRefresh = () => {\n      this.refetchData();\n    };\n\n    // start of hack, for a better UX: we disable the variable \"refresh\" option and we allow the user to reload the list only by clicking on the \"Refresh\" button\n    // if we don't do this, every time the time range changes (even with auto-refresh on),\n    // all the timeseries present on the screen would be re-created, resulting in blinking and a poor UX\n    const refreshButton = document.querySelector(\n      '[data-testid=\"data-testid RefreshPicker run button\"]'\n    ) as HTMLButtonElement;\n\n    if (!refreshButton) {\n      logger.error(\n        new Error('SceneByVariableRepeaterGrid: Refresh button not found! The list of items will never be updated.')\n      );\n    }\n\n    refreshButton?.addEventListener('click', onClickRefresh);\n    refreshButton?.setAttribute('title', 'Click to completely refresh all the panels present on the screen');\n    // end of hack\n\n    return {\n      unsubscribe() {\n        refreshButton?.removeAttribute('title');\n        refreshButton?.removeEventListener('click', onClickRefresh);\n      },\n    };\n  }\n\n  subscribeToQuickFilterChange() {\n    const quickFilter = sceneGraph.findByKeyAndType(this, 'quick-filter', SceneQuickFilter);\n\n    this.subscribeToState((newState, prevState) => {\n      if (newState.items.length !== prevState.items.length) {\n        quickFilter.setResultsCount(newState.items.length);\n      }\n    });\n\n    const onChangeState = (newState: SceneQuickFilterState, prevState?: SceneQuickFilterState) => {\n      if (newState.searchText !== prevState?.searchText) {\n        this.renderGridItems();\n      }\n    };\n\n    return quickFilter.subscribeToState(debounce(onChangeState, SceneQuickFilter.DEBOUNCE_DELAY));\n  }\n\n  subscribeToLayoutChange() {\n    const layoutSwitcher = sceneGraph.findByKeyAndType(this, 'layout-switcher', SceneLayoutSwitcher);\n    const body = this.state.body as SceneCSSGridLayout;\n\n    const onChangeState = (newState: SceneLayoutSwitcherState, prevState?: SceneLayoutSwitcherState) => {\n      if (newState.layout !== prevState?.layout) {\n        body.setState({\n          templateColumns: newState.layout === LayoutType.ROWS ? GRID_TEMPLATE_ROWS : GRID_TEMPLATE_COLUMNS,\n        });\n      }\n    };\n\n    onChangeState(layoutSwitcher.state);\n\n    return layoutSwitcher.subscribeToState(onChangeState);\n  }\n\n  subscribeToHideNoDataChange() {\n    const noDataSwitcher = sceneGraph.findByKeyAndType(this, 'no-data-switcher', SceneNoDataSwitcher);\n\n    this.setState({ hideNoData: noDataSwitcher.state.hideNoData === 'on' });\n\n    const onChangeState = (newState: SceneNoDataSwitcherState, prevState?: SceneNoDataSwitcherState) => {\n      if (newState.hideNoData !== prevState?.hideNoData) {\n        this.setState({ hideNoData: newState.hideNoData === 'on' });\n\n        this.refetchData(true);\n      }\n    };\n\n    return noDataSwitcher.subscribeToState(onChangeState);\n  }\n\n  subscribeToFiltersChange() {\n    const filtersVariable = sceneGraph.findByKeyAndType(this, 'filters', FiltersVariable);\n    const noDataSwitcher = sceneGraph.findByKeyAndType(this, 'no-data-switcher', SceneNoDataSwitcher);\n\n    // the handler will be called each time a filter is added/removed/modified\n    return filtersVariable.subscribeToState(() => {\n      if (noDataSwitcher.state.hideNoData === 'on') {\n        // to be sure the list is updated we refetch because the filters only influence the query made in each panel\n        this.refetchData();\n      }\n    });\n  }\n\n  refetchData(forceRender = false) {\n    this.setState({\n      isLoading: true,\n      $data: new SceneDataTransformer({\n        $data: buildLabelValuesGridQueryRunner({ label: this.state.label }),\n        transformations: [addRefId, addStats, sortSeries],\n      }),\n    });\n\n    this.subscribeOnceToDataChange(forceRender);\n  }\n\n  shouldRenderItems(newItems: SceneLabelValuesGridState['items']) {\n    const { items } = this.state;\n\n    if (!newItems.length || items.length !== newItems.length) {\n      return true;\n    }\n\n    return !isEqual(items, newItems);\n  }\n\n  buildItemsData(series: DataFrame[]) {\n    const serviceName = getSceneVariableValue(this, 'serviceName');\n    const profileMetricId = getSceneVariableValue(this, 'profileMetricId');\n\n    const { label, startColorIndex, sortItemsFn } = this.state;\n\n    // the series are already sorted by the data transformation\n    const items = series.map((s, index) => {\n      const metricField = s.fields[1];\n      const labelValue = metricField.labels?.[label] || '';\n      const labelName = getSeriesLabelFieldName(metricField, label);\n\n      return {\n        index: startColorIndex + index,\n        value: labelValue,\n        label: labelName,\n        queryRunnerParams: {\n          serviceName,\n          profileMetricId,\n          // defaults to an \"is empty\" operator in the UI when the label value is not set\n          filters: [{ key: label, operator: '=', value: labelValue }],\n        },\n        panelType: PanelType.TIMESERIES,\n      };\n    });\n\n    return this.filterItems(items).sort(sortItemsFn);\n  }\n\n  renderGridItems(forceRender = false) {\n    if (!this.state.$data.state.data) {\n      return;\n    }\n\n    const { state: loadingState, series, errors } = this.state.$data.state.data;\n\n    if (loadingState === LoadingState.Loading) {\n      return;\n    }\n\n    if (loadingState === LoadingState.Error) {\n      // TODO: check\n      this.renderErrorState(errors?.[0] as Error);\n      return;\n    }\n\n    const newItems = this.buildItemsData(series);\n\n    if (!forceRender && !this.shouldRenderItems(newItems)) {\n      return;\n    }\n\n    this.setState({ items: newItems });\n\n    if (!this.state.items.length) {\n      this.renderEmptyState();\n      return;\n    }\n\n    const gridItems = newItems.map((item) => {\n      return new SceneCSSGridItem({\n        key: SceneLabelValuesGrid.buildGridItemKey(item),\n        body: this.buildVizPanel(item),\n      });\n    });\n\n    (this.state.body as SceneCSSGridLayout).setState({\n      autoRows: GRID_AUTO_ROWS, // required to have the correct grid items height\n      children: gridItems,\n    });\n  }\n\n  buildVizPanel(item: GridItemData) {\n    const vizPanel = new SceneLabelValuePanel({\n      item,\n      headerActions: this.state.headerActions.bind(null, item, this.state.items),\n    });\n\n    const sub = vizPanel.subscribeToEvent(EventTimeseriesDataReceived, (event) => {\n      if (!this.state.hideNoData || event.payload.series?.length) {\n        return;\n      }\n\n      const gridItem = sceneGraph.getAncestor(vizPanel, SceneCSSGridItem);\n      const { key: gridItemKey } = gridItem.state;\n      const grid = sceneGraph.getAncestor(gridItem, SceneCSSGridLayout);\n\n      const filteredChildren = grid.state.children.filter((c) => c.state.key !== gridItemKey);\n\n      if (!filteredChildren.length) {\n        this.renderEmptyState();\n      } else {\n        grid.setState({ children: filteredChildren });\n      }\n    });\n\n    vizPanel.addActivationHandler(() => {\n      return () => {\n        sub.unsubscribe();\n      };\n    });\n\n    return vizPanel;\n  }\n\n  filterItems(items: SceneLabelValuesGridState['items']) {\n    const quickFilterScene = sceneGraph.findByKeyAndType(this, 'quick-filter', SceneQuickFilter);\n    const { searchText } = quickFilterScene.state;\n\n    if (!searchText) {\n      return items;\n    }\n\n    const regexes = searchText\n      .split(',')\n      .map((t) => t.trim())\n      .filter(Boolean)\n      .map((r) => {\n        try {\n          return new RegExp(r);\n        } catch {\n          return null;\n        }\n      })\n      .filter(Boolean) as RegExp[];\n\n    return items.filter(({ label }) => regexes.some((r) => r.test(label)));\n  }\n\n  renderEmptyState() {\n    (this.state.body as SceneCSSGridLayout).setState({\n      autoRows: '480px',\n      children: [\n        new SceneCSSGridItem({\n          body: new SceneEmptyState({\n            message: 'No results',\n          }),\n        }),\n      ],\n    });\n  }\n\n  renderErrorState(error: Error) {\n    (this.state.body as SceneCSSGridLayout).setState({\n      autoRows: '480px',\n      children: [\n        new SceneCSSGridItem({\n          body: new SceneErrorState({\n            message: error.toString(),\n          }),\n        }),\n      ],\n    });\n  }\n\n  static Component({ model }: SceneComponentProps<SceneLabelValuesGrid>) {\n    const { body, isLoading } = model.useState();\n\n    return isLoading ? (\n      <Spinner />\n    ) : (\n      <div style={{ marginBottom: '2px' }}>\n        <body.Component model={body} />\n      </div>\n    );\n  }\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nimport { GridItemData } from '../../../../../SceneByVariableRepeaterGrid/types/GridItemData';\n\nexport interface EventClearLabelFromFiltersPayload {\n  item: GridItemData;\n}\n\nexport class EventClearLabelFromFilters extends BusEventWithPayload<EventClearLabelFromFiltersPayload> {\n  public static type = 'clear-label-from-filters';\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nimport { GridItemData } from '../../../../../SceneByVariableRepeaterGrid/types/GridItemData';\n\nexport interface EventExcludeLabelFromFiltersPayload {\n  item: GridItemData;\n}\n\nexport class EventExcludeLabelFromFilters extends BusEventWithPayload<EventExcludeLabelFromFiltersPayload> {\n  public static type = 'exclude-label-from-filters';\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nimport { GridItemData } from '../../../../../SceneByVariableRepeaterGrid/types/GridItemData';\n\nexport interface EventIncludeLabelInFiltersPayload {\n  item: GridItemData;\n}\n\nexport class EventIncludeLabelInFilters extends BusEventWithPayload<EventIncludeLabelInFiltersPayload> {\n  public static type = 'include-label-in-filters';\n}\n\nexport interface EventExcludeLabelFromFiltersPayload {\n  item: GridItemData;\n}\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, useStyles2 } from '@grafana/ui';\nimport React, { memo } from 'react';\n\ntype FilterButtonsProps = {\n  label: string;\n  status: 'included' | 'excluded' | 'clear';\n  onInclude: () => void;\n  onExclude: () => void;\n  onClear: () => void;\n};\n\nfunction getStatus({ status, label, onInclude, onExclude, onClear }: FilterButtonsProps) {\n  const isIncludeSelected = status === 'included';\n  const includeTooltip = !isIncludeSelected ? `Include \"${label}\" in the filters` : `Clear \"${label}\" from the filters`;\n\n  const isExcludeSelected = status === 'excluded';\n  const excludeTooltip = !isExcludeSelected ? `Exclude \"${label}\" in the filters` : `Clear \"${label}\" from the filters`;\n\n  return {\n    include: {\n      isSelected: isIncludeSelected,\n      tooltip: includeTooltip,\n      onClick: isIncludeSelected ? onClear : onInclude,\n    },\n    exclude: {\n      isSelected: isExcludeSelected,\n      tooltip: excludeTooltip,\n      onClick: isExcludeSelected ? onClear : onExclude,\n    },\n  };\n}\n\n// Kindly borrowed and adapted from https://github.com/grafana/explore-logs/blob/main/src/Components/FilterButton.tsx :)\nconst FilterButtonsComponent = (props: FilterButtonsProps) => {\n  const styles = useStyles2(getStyles);\n\n  const { include, exclude } = getStatus(props);\n\n  return (\n    <div className={styles.container}>\n      <Button\n        size=\"sm\"\n        fill=\"outline\"\n        variant={include.isSelected ? 'primary' : 'secondary'}\n        aria-selected={include.isSelected}\n        className={cx(styles.includeButton, include.isSelected && 'selected')}\n        onClick={include.onClick}\n        tooltip={include.tooltip}\n        tooltipPlacement=\"top\"\n        data-testid=\"filter-button-include\"\n      >\n        Include\n      </Button>\n      <Button\n        size=\"sm\"\n        fill=\"outline\"\n        variant={exclude.isSelected ? 'primary' : 'secondary'}\n        aria-selected={exclude.isSelected}\n        className={cx(styles.excludeButton, exclude.isSelected && 'selected')}\n        onClick={exclude.onClick}\n        tooltip={exclude.tooltip}\n        tooltipPlacement=\"top\"\n        data-testid=\"filter-button-exclude\"\n      >\n        Exclude\n      </Button>\n    </div>\n  );\n};\n\nexport const FilterButtons = memo(FilterButtonsComponent);\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    container: css`\n      display: flex;\n      justify-content: center;\n    `,\n    includeButton: css`\n      border-radius: ${theme.shape.radius.default} 0 0 ${theme.shape.radius.default};\n\n      &:not(.selected) {\n        border-right: none;\n      }\n    `,\n    excludeButton: css`\n      border-radius: 0 ${theme.shape.radius.default} ${theme.shape.radius.default} 0;\n\n      &:not(.selected) {\n        border-left: none;\n      }\n    `,\n  };\n};\n","import { AdHocVariableFilter } from '@grafana/data';\nimport { SceneComponentProps, sceneGraph, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { isRegexOperator } from '@shared/components/QueryBuilder/domain/helpers/isRegexOperator';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport React, { useMemo } from 'react';\n\nimport { FiltersVariable } from '../../../../../../../domain/variables/FiltersVariable/FiltersVariable';\nimport { GridItemData } from '../../../../../../SceneByVariableRepeaterGrid/types/GridItemData';\nimport { EventClearLabelFromFilters } from '../../events/EventClearLabelFromFilters';\nimport { EventExcludeLabelFromFilters } from '../../events/EventExcludeLabelFromFilters';\nimport { EventIncludeLabelInFilters } from '../../events/EventIncludeLabelInFilters';\nimport { FilterButtons } from './ui/FilterButtons';\n\nexport interface IncludeExcludeActionState extends SceneObjectState {\n  item: GridItemData;\n}\n\nexport class IncludeExcludeAction extends SceneObjectBase<IncludeExcludeActionState> {\n  constructor({ item }: IncludeExcludeActionState) {\n    super({ item });\n  }\n\n  getStatus(filters: AdHocVariableFilter[]) {\n    const { key, value } = this.state.item.queryRunnerParams.filters![0];\n\n    const found = filters.find((f) => f.key === key);\n    if (!found) {\n      return 'clear';\n    }\n\n    if (isRegexOperator(found.operator) && found.value.split('|').includes(value)) {\n      return found.operator === '=~' ? 'included' : 'excluded';\n    }\n\n    // found.operator is '=' or '!='\n    if (found.value === value) {\n      return found.operator === '=' ? 'included' : 'excluded';\n    }\n\n    return 'clear';\n  }\n\n  onInclude = () => {\n    reportInteraction('g_pyroscope_app_include_action_clicked');\n\n    this.publishEvent(new EventIncludeLabelInFilters({ item: this.state.item }), true);\n  };\n\n  onExclude = () => {\n    reportInteraction('g_pyroscope_app_exclude_action_clicked');\n\n    this.publishEvent(new EventExcludeLabelFromFilters({ item: this.state.item }), true);\n  };\n\n  onClear = () => {\n    this.publishEvent(new EventClearLabelFromFilters({ item: this.state.item }), true);\n  };\n\n  public static Component = ({ model }: SceneComponentProps<IncludeExcludeAction>) => {\n    const { item } = model.useState();\n\n    const { filters } = (sceneGraph.findByKeyAndType(model, 'filters', FiltersVariable) as FiltersVariable).useState();\n    const status = useMemo(() => model.getStatus(filters), [filters, model]);\n\n    return (\n      <FilterButtons\n        label={item.value}\n        status={status}\n        onInclude={model.onInclude}\n        onExclude={model.onExclude}\n        onClear={model.onClear}\n      />\n    );\n  };\n}\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, useStyles2 } from '@grafana/ui';\nimport { noOp } from '@shared/domain/noOp';\nimport React, { useMemo } from 'react';\n\nimport { SceneStatsPanel } from '../components/SceneLabelValuesGrid/components/SceneStatsPanel/SceneStatsPanel';\nimport { CompareTarget } from '../components/SceneLabelValuesGrid/domain/types';\nimport { SceneGroupByLabelsState } from '../SceneGroupByLabels';\n\ntype CompareButtonProps = {\n  compare: SceneGroupByLabelsState['compare'];\n  onClickCompare: () => void;\n  onClickClear: () => void;\n};\n\nexport function CompareControls({ compare, onClickCompare, onClickClear }: CompareButtonProps) {\n  const styles = useStyles2(getStyles);\n  const compareIsDisabled = compare.size < 2;\n  const hasSelection = compare.size > 0;\n\n  const tooltip = useMemo(() => {\n    if (compare.size === 2) {\n      return `Compare \"${compare.get(CompareTarget.BASELINE)?.label}\" vs \"${\n        compare.get(CompareTarget.COMPARISON)?.label\n      }\"`;\n    }\n    if (compare.size === 0) {\n      return 'Select both a baseline and a comparison panel to compare their flame graphs';\n    }\n\n    return compare.has(CompareTarget.BASELINE)\n      ? `Select another panel to compare against \"${compare.get(CompareTarget.BASELINE)?.label}\"`\n      : `Select another panel to compare against \"${compare.get(CompareTarget.COMPARISON)?.label}\"`;\n  }, [compare]);\n\n  return (\n    <div className={styles.container}>\n      <Button\n        arial-label=\"Compare\"\n        className={styles.compareButton}\n        variant=\"primary\"\n        disabled={compareIsDisabled}\n        onClick={compareIsDisabled ? noOp : onClickCompare}\n        tooltip={tooltip}\n      >\n        Compare ({compare.size}/2)\n      </Button>\n\n      <Button\n        data-testid=\"clearComparison\"\n        className={cx(styles.clearButton, !compareIsDisabled ? styles.clearButtonActive : undefined)}\n        icon=\"times\"\n        variant=\"secondary\"\n        tooltip={hasSelection ? 'Clear comparison selection' : ''}\n        disabled={!hasSelection}\n        onClick={!hasSelection ? noOp : onClickClear}\n      />\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    align-items: center;\n    width: ${SceneStatsPanel.WIDTH_IN_PIXELS}px;\n  `,\n  compareButton: css`\n    width: ${SceneStatsPanel.WIDTH_IN_PIXELS - 32}px;\n    border-right: none;\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  `,\n  clearButton: css`\n    box-sizing: border-box;\n    width: 32px !important;\n    height: 32px !important;\n    color: ${theme.colors.text.secondary};\n    background-color: transparent;\n    border-left: none !important;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n\n    &:not([disabled]),\n    &:not([disabled]):hover {\n      background-color: transparent;\n      box-shadow: none;\n    }\n  `,\n  clearButtonActive: css`\n    border-color: ${theme.colors.border.medium};\n\n    &:hover {\n      border-color: ${theme.colors.border.medium};\n    }\n  `,\n});\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport {\n  MultiValueVariableState,\n  SceneComponentProps,\n  sceneGraph,\n  SceneObject,\n  SceneObjectBase,\n  SceneObjectState,\n} from '@grafana/scenes';\nimport { Stack, useStyles2 } from '@grafana/ui';\nimport { prepareHistoryEntry } from '@shared/domain/prepareHistoryEntry';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport React, { useMemo } from 'react';\nimport { Unsubscribable } from 'rxjs';\nimport { EventViewDiffFlameGraph } from 'src/pages/ProfilesExplorerView/domain/events/EventViewDiffFlameGraph';\n\nimport { FavAction } from '../../../../domain/actions/FavAction';\nimport { SelectAction } from '../../../../domain/actions/SelectAction';\nimport { EventExpandPanel } from '../../../../domain/events/EventExpandPanel';\nimport { EventSelectLabel } from '../../../../domain/events/EventSelectLabel';\nimport {\n  clearLabelValue,\n  excludeLabelValue,\n  includeLabelValue,\n} from '../../../../domain/variables/FiltersVariable/filters-ops';\nimport { FiltersVariable } from '../../../../domain/variables/FiltersVariable/FiltersVariable';\nimport { GroupByVariable } from '../../../../domain/variables/GroupByVariable/GroupByVariable';\nimport { getSceneVariableValue } from '../../../../helpers/getSceneVariableValue';\nimport { vizPanelBuilder } from '../../../../helpers/vizPanelBuilder';\nimport { interpolateQueryRunnerVariables } from '../../../../infrastructure/helpers/interpolateQueryRunnerVariables';\nimport { getProfileMetricLabel } from '../../../../infrastructure/series/helpers/getProfileMetricLabel';\nimport { SceneLayoutSwitcher } from '../../../SceneByVariableRepeaterGrid/components/SceneLayoutSwitcher';\nimport { SceneNoDataSwitcher } from '../../../SceneByVariableRepeaterGrid/components/SceneNoDataSwitcher';\nimport {\n  PanelType,\n  ScenePanelTypeSwitcher,\n  ScenePanelTypeSwitcherState,\n} from '../../../SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher';\nimport { SceneQuickFilter } from '../../../SceneByVariableRepeaterGrid/components/SceneQuickFilter';\nimport { SceneByVariableRepeaterGrid } from '../../../SceneByVariableRepeaterGrid/SceneByVariableRepeaterGrid';\nimport { GridItemData } from '../../../SceneByVariableRepeaterGrid/types/GridItemData';\nimport { SceneDrawer } from '../../../SceneDrawer';\nimport { SceneProfilesExplorer } from '../../../SceneProfilesExplorer/SceneProfilesExplorer';\nimport { SceneStatsPanel } from './components/SceneLabelValuesGrid/components/SceneStatsPanel/SceneStatsPanel';\nimport { CompareTarget } from './components/SceneLabelValuesGrid/domain/types';\nimport { SceneLabelValuesGrid } from './components/SceneLabelValuesGrid/SceneLabelValuesGrid';\nimport { IncludeExcludeAction } from './domain/actions/IncludeExcludeAction/IncludeExcludeAction';\nimport { EventClearLabelFromFilters } from './domain/events/EventClearLabelFromFilters';\nimport { EventExcludeLabelFromFilters } from './domain/events/EventExcludeLabelFromFilters';\nimport { EventIncludeLabelInFilters } from './domain/events/EventIncludeLabelInFilters';\nimport { EventSelectForCompare } from './domain/events/EventSelectForCompare';\nimport { CompareControls } from './ui/CompareControls';\n\nexport interface SceneGroupByLabelsState extends SceneObjectState {\n  body?: SceneObject;\n  drawer: SceneDrawer;\n  compare: Map<CompareTarget, GridItemData>;\n  panelTypeChangeSub?: Unsubscribable;\n}\n\nexport class SceneGroupByLabels extends SceneObjectBase<SceneGroupByLabelsState> {\n  constructor({ item }: { item?: GridItemData }) {\n    super({\n      key: 'group-by-labels',\n      body: undefined,\n      drawer: new SceneDrawer(),\n      compare: new Map(),\n      panelTypeChangeSub: undefined,\n    });\n\n    this.addActivationHandler(() => {\n      this.onActivate(item);\n    });\n  }\n\n  async onActivate(item?: GridItemData) {\n    // initial load\n    const groupByVariable = sceneGraph.findByKeyAndType(this, 'groupBy', GroupByVariable);\n    await groupByVariable.update();\n\n    if (item) {\n      this.initVariablesAndControls(item);\n    }\n\n    this.renderBody(groupByVariable.state);\n\n    const groupBySub = this.subscribeToGroupByChange();\n    const panelEventsSub = this.subscribeToPanelEvents();\n\n    return () => {\n      panelEventsSub.unsubscribe();\n      groupBySub.unsubscribe();\n\n      this.state.panelTypeChangeSub?.unsubscribe();\n    };\n  }\n\n  initVariablesAndControls(item: GridItemData) {\n    const { queryRunnerParams, panelType } = item;\n    const { groupBy } = queryRunnerParams;\n\n    if (groupBy?.label) {\n      const groupByVariable = sceneGraph.findByKeyAndType(this, 'groupBy', GroupByVariable);\n      groupByVariable.changeValueTo(groupBy.label);\n    }\n\n    if (panelType) {\n      const panelTypeSwitcher = sceneGraph.findByKeyAndType(this, 'panel-type-switcher', ScenePanelTypeSwitcher);\n      panelTypeSwitcher.setState({ panelType });\n    }\n  }\n\n  subscribeToGroupByChange() {\n    const groupByVariable = sceneGraph.findByKeyAndType(this, 'groupBy', GroupByVariable);\n    const quickFilter = sceneGraph.findByKeyAndType(this, 'quick-filter', SceneQuickFilter);\n\n    return groupByVariable.subscribeToState((newState, prevState) => {\n      if (newState.value !== prevState?.value) {\n        quickFilter.clearSearchText();\n\n        this.renderBody(newState);\n      }\n    });\n  }\n\n  subscribeToPanelEvents() {\n    const selectLabelSub = this.subscribeToEvent(EventSelectLabel, (event) => {\n      this.selectLabel(event.payload.item);\n    });\n\n    const expandPanelSub = this.subscribeToEvent(EventExpandPanel, async (event) => {\n      this.openExpandedPanelDrawer(event.payload.item);\n    });\n\n    const selectForCompareSub = this.subscribeToEvent(EventSelectForCompare, (event) => {\n      const { compareTarget, item } = event.payload;\n      this.selectForCompare(compareTarget, item);\n    });\n\n    const includeFilterSub = this.subscribeToEvent(EventIncludeLabelInFilters, (event) => {\n      this.includeLabelValueInFilters(event.payload.item);\n    });\n\n    const excludeFilterSub = this.subscribeToEvent(EventExcludeLabelFromFilters, (event) => {\n      this.excludeLabelValueFromFilters(event.payload.item);\n    });\n\n    const clearFilterSub = this.subscribeToEvent(EventClearLabelFromFilters, (event) => {\n      this.clearLabelValueFromFilters(event.payload.item);\n    });\n\n    return {\n      unsubscribe() {\n        clearFilterSub.unsubscribe();\n        excludeFilterSub.unsubscribe();\n        includeFilterSub.unsubscribe();\n        selectForCompareSub.unsubscribe();\n        expandPanelSub.unsubscribe();\n        selectLabelSub.unsubscribe();\n      },\n    };\n  }\n\n  subscribeToPanelTypeChange() {\n    const panelTypeSwitcher = sceneGraph.findByKeyAndType(this, 'panel-type-switcher', ScenePanelTypeSwitcher);\n\n    return panelTypeSwitcher.subscribeToState(\n      (newState: ScenePanelTypeSwitcherState, prevState?: ScenePanelTypeSwitcherState) => {\n        if (newState.panelType !== prevState?.panelType) {\n          (this.state.body as SceneByVariableRepeaterGrid)?.renderGridItems();\n        }\n      }\n    );\n  }\n\n  renderBody(groupByVariableState: MultiValueVariableState) {\n    this.state.panelTypeChangeSub?.unsubscribe();\n\n    if (groupByVariableState.value === 'all') {\n      // we have to resubscribe every time because the subscription is removed every time the ScenePanelTypeSwitcher UI component is unmounted\n      this.setState({ panelTypeChangeSub: this.subscribeToPanelTypeChange() });\n\n      this.switchToLabelNamesGrid();\n    } else {\n      this.switchToLabelValuesGrid(groupByVariableState);\n    }\n  }\n\n  switchToLabelNamesGrid() {\n    sceneGraph\n      .findByKeyAndType(this, 'quick-filter', SceneQuickFilter)\n      .setPlaceholder('Search labels (comma-separated regexes are supported)');\n\n    this.setState({\n      body: this.buildSceneLabelNamesGrid(),\n    });\n  }\n\n  buildSceneLabelNamesGrid() {\n    return new SceneByVariableRepeaterGrid({\n      key: 'service-labels-grid',\n      variableName: 'groupBy',\n      mapOptionToItem: (option, index, { serviceName, profileMetricId, panelType }) => {\n        if (option.value === 'all') {\n          return null;\n        }\n\n        // see LabelsDataSource.ts\n        const { value, groupBy } = JSON.parse(option.value as string);\n\n        return {\n          index: index - 1, // the 'all' option has been removed ;)\n          value,\n          // remove the count in parenthesis that exists in option.label\n          // it'll be set by SceneLabelValuesTimeseries or SceneLabelValuesBarGauge\n          label: value,\n          queryRunnerParams: {\n            serviceName,\n            profileMetricId,\n            groupBy,\n            filters: [],\n          },\n          panelType: panelType as PanelType,\n        };\n      },\n      headerActions: (item) => [\n        new SelectAction({ type: 'select-label', item }),\n        new SelectAction({ type: 'expand-panel', item }),\n        new FavAction({ item }),\n      ],\n    });\n  }\n\n  switchToLabelValuesGrid(groupByVariableState: MultiValueVariableState) {\n    sceneGraph\n      .findByKeyAndType(this, 'quick-filter', SceneQuickFilter)\n      .setPlaceholder('Search label values (comma-separated regexes are supported)');\n\n    this.clearCompare();\n\n    const { value, options } = groupByVariableState;\n\n    const index = options\n      .filter((o) => o.value !== 'all')\n      // See LabelsDataSource.ts\n      .findIndex((o) => JSON.parse(o.value as string).value === value);\n    const startColorIndex = index > -1 ? index : 0;\n\n    this.setState({\n      body: this.buildSceneLabelValuesGrid(value as string, startColorIndex),\n    });\n  }\n\n  buildSceneLabelValuesGrid(label: string, startColorIndex: number) {\n    return new SceneLabelValuesGrid({\n      key: 'service-label-values-grid',\n      startColorIndex,\n      label,\n      headerActions: (item) => [\n        new SelectAction({\n          type: 'view-flame-graph',\n          item,\n          tooltip: (item, model) => {\n            const { queryRunnerParams, label } = item;\n            const profileMetricId =\n              queryRunnerParams.profileMetricId || getSceneVariableValue(model, 'profileMetricId');\n            const groupByValue = getSceneVariableValue(model, 'groupBy');\n\n            return `View the \"${\n              getProfileMetric(profileMetricId as ProfileMetricId).type\n            }\" flame graph for \"${groupByValue}=${label}\"`;\n          },\n        }),\n        new IncludeExcludeAction({ item }),\n        new FavAction({ item }),\n      ],\n    });\n  }\n\n  selectLabel({ queryRunnerParams }: GridItemData) {\n    const labelValue = queryRunnerParams!.groupBy!.label;\n    const groupByVariable = sceneGraph.findByKeyAndType(this, 'groupBy', GroupByVariable);\n\n    prepareHistoryEntry();\n    groupByVariable.changeValueTo(labelValue);\n\n    // the event may be published from an expanded panel in the drawer\n    this.state.drawer.close();\n  }\n\n  includeLabelValueInFilters(item: GridItemData) {\n    const [filterToInclude] = item.queryRunnerParams.filters!;\n    const filtersVariable = sceneGraph.findByKeyAndType(this, 'filters', FiltersVariable);\n\n    filtersVariable.setState({ filters: includeLabelValue(filtersVariable.state.filters, filterToInclude) });\n  }\n\n  excludeLabelValueFromFilters(item: GridItemData) {\n    const filtersVariable = sceneGraph.findByKeyAndType(this, 'filters', FiltersVariable);\n    const [filterToExclude] = item.queryRunnerParams.filters!;\n\n    filtersVariable.setState({ filters: excludeLabelValue(filtersVariable.state.filters, filterToExclude) });\n  }\n\n  clearLabelValueFromFilters(item: GridItemData) {\n    const filtersVariable = sceneGraph.findByKeyAndType(this, 'filters', FiltersVariable);\n    const [filterToClear] = item.queryRunnerParams.filters!;\n\n    filtersVariable.setState({ filters: clearLabelValue(filtersVariable.state.filters, filterToClear) });\n  }\n\n  openExpandedPanelDrawer(item: GridItemData) {\n    const serviceName = getSceneVariableValue(this, 'serviceName');\n    const profileMetricId = getSceneVariableValue(this, 'profileMetricId');\n    const title = `${serviceName}  ${getProfileMetricLabel(profileMetricId)}  ${item.label}`;\n\n    const headerActions = () => [new SelectAction({ type: 'select-label', item }), new FavAction({ item })];\n\n    this.state.drawer.open({\n      title,\n      body: vizPanelBuilder(item.panelType, {\n        displayAllValues: true,\n        legendPlacement: 'right',\n        item,\n        headerActions,\n      }),\n    });\n  }\n\n  selectForCompare(compareTarget: CompareTarget, item: GridItemData) {\n    const compare = new Map(this.state.compare);\n\n    if (compare.get(compareTarget)?.value === item.value) {\n      compare.delete(compareTarget);\n    } else {\n      compare.set(compareTarget, item);\n    }\n\n    this.setState({ compare });\n\n    this.updateStatsPanels();\n  }\n\n  updateStatsPanels() {\n    const { compare } = this.state;\n    const baselineItem = compare.get(CompareTarget.BASELINE);\n    const comparisonItem = compare.get(CompareTarget.COMPARISON);\n\n    const statsPanels = sceneGraph.findAllObjects(this, (o) => o instanceof SceneStatsPanel) as SceneStatsPanel[];\n\n    // TODO: optimize if needed\n    // we can remove the loop if we clear the current selection in the UI before updating the compare map (see selectForCompare() and onClickClearCompareButton())\n    for (const panel of statsPanels) {\n      panel.updateCompareActions(baselineItem, comparisonItem);\n    }\n  }\n\n  getCompare() {\n    return this.state.compare;\n  }\n\n  clearCompare() {\n    this.setState({ compare: new Map() });\n  }\n\n  updateCompareFilters() {\n    const { compare } = this.state;\n    const baselineItem = compare.get(CompareTarget.BASELINE);\n    const comparisonItem = compare.get(CompareTarget.COMPARISON);\n\n    const baselineQueryRunnerParams = interpolateQueryRunnerVariables(this, baselineItem as GridItemData);\n    const comparisonQueryRunnerParams = interpolateQueryRunnerVariables(this, comparisonItem as GridItemData);\n\n    sceneGraph.findByKeyAndType(this, 'filtersBaseline', FiltersVariable).setState({\n      filters: baselineQueryRunnerParams.filters,\n    });\n\n    sceneGraph.findByKeyAndType(this, 'filtersComparison', FiltersVariable).setState({\n      filters: comparisonQueryRunnerParams.filters,\n    });\n  }\n\n  onClickCompareButton = () => {\n    reportInteraction('g_pyroscope_app_compare_link_clicked');\n\n    this.updateCompareFilters();\n\n    this.publishEvent(new EventViewDiffFlameGraph({}), true);\n  };\n\n  onClickClearCompareButton = () => {\n    this.clearCompare();\n    this.updateStatsPanels();\n  };\n\n  static Component = ({ model }: SceneComponentProps<SceneGroupByLabels>) => {\n    const styles = useStyles2(getStyles);\n\n    const { body, drawer, compare } = model.useState();\n\n    const groupByVariable = sceneGraph.findByKeyAndType(model, 'groupBy', GroupByVariable);\n    const { value: groupByVariableValue } = groupByVariable.useState();\n\n    const gridControls = useMemo(\n      () =>\n        groupByVariableValue === 'all'\n          ? sceneGraph.findByKeyAndType(model, 'profiles-explorer', SceneProfilesExplorer).state.gridControls\n          : ([\n              sceneGraph.findByKeyAndType(model, 'quick-filter', SceneQuickFilter),\n              sceneGraph.findByKeyAndType(model, 'layout-switcher', SceneLayoutSwitcher),\n              sceneGraph.findByKeyAndType(model, 'no-data-switcher', SceneNoDataSwitcher),\n            ] as SceneObject[]),\n      [groupByVariableValue, model]\n    );\n\n    return (\n      <div className={styles.container} data-testid=\"groupByLabelsContainer\">\n        <groupByVariable.Component model={groupByVariable} />\n\n        <div className={styles.sceneControls}>\n          <Stack wrap=\"wrap\">\n            {groupByVariableValue !== 'all' && (\n              <CompareControls\n                compare={compare}\n                onClickCompare={model.onClickCompareButton}\n                onClickClear={model.onClickClearCompareButton}\n              />\n            )}\n\n            {gridControls.map((control) => (\n              <control.Component key={control.state.key} model={control} />\n            ))}\n          </Stack>\n        </div>\n\n        {body && <body.Component model={body} />}\n        {<drawer.Component model={drawer} />}\n      </div>\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    margin-top: ${theme.spacing(1)};\n  `,\n  sceneControls: css`\n    margin-bottom: ${theme.spacing(1)};\n\n    & .quick-filter {\n      flex: 1;\n      min-width: 112px;\n    }\n  `,\n});\n","import { DashboardCursorSync } from '@grafana/data';\nimport {\n  behaviors,\n  EmbeddedSceneState,\n  SceneComponentProps,\n  SceneFlexItem,\n  SceneFlexLayout,\n  sceneGraph,\n  SceneObjectBase,\n} from '@grafana/scenes';\nimport React from 'react';\n\nimport { SceneMainServiceTimeseries } from '../../components/SceneMainServiceTimeseries';\nimport { FavAction } from '../../domain/actions/FavAction';\nimport { SelectAction } from '../../domain/actions/SelectAction';\nimport { FiltersVariable } from '../../domain/variables/FiltersVariable/FiltersVariable';\nimport { ProfileMetricVariable } from '../../domain/variables/ProfileMetricVariable';\nimport { ServiceNameVariable } from '../../domain/variables/ServiceNameVariable/ServiceNameVariable';\nimport { GridItemData } from '../SceneByVariableRepeaterGrid/types/GridItemData';\nimport { SceneGroupByLabels } from './components/SceneGroupByLabels/SceneGroupByLabels';\n\ninterface SceneExploreServiceLabelsState extends EmbeddedSceneState {}\n\nexport class SceneExploreServiceLabels extends SceneObjectBase<SceneExploreServiceLabelsState> {\n  constructor({ item }: { item?: GridItemData }) {\n    super({\n      key: 'explore-service-labels',\n      body: new SceneFlexLayout({\n        direction: 'column',\n        $behaviors: [\n          new behaviors.CursorSync({\n            key: 'metricCrosshairSync',\n            sync: DashboardCursorSync.Crosshair,\n          }),\n        ],\n        children: [\n          new SceneFlexItem({\n            minHeight: SceneMainServiceTimeseries.MIN_HEIGHT,\n            body: new SceneMainServiceTimeseries({\n              item,\n              headerActions: (item) => [new SelectAction({ type: 'view-flame-graph', item }), new FavAction({ item })],\n            }),\n          }),\n          new SceneFlexItem({\n            body: new SceneGroupByLabels({ item }),\n          }),\n        ],\n      }),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this, item));\n  }\n\n  onActivate(item?: GridItemData) {\n    if (item) {\n      this.initVariables(item);\n    }\n\n    const profileMetricVariable = sceneGraph.findByKeyAndType(this, 'profileMetricId', ProfileMetricVariable);\n\n    profileMetricVariable.setState({ query: ProfileMetricVariable.QUERY_SERVICE_NAME_DEPENDENT });\n    profileMetricVariable.update(true);\n\n    return () => {\n      profileMetricVariable.setState({ query: ProfileMetricVariable.QUERY_DEFAULT });\n      profileMetricVariable.update(true);\n    };\n  }\n\n  initVariables(item: GridItemData) {\n    const { queryRunnerParams } = item;\n    const { serviceName, profileMetricId, filters } = queryRunnerParams;\n\n    if (serviceName) {\n      const serviceNameVariable = sceneGraph.findByKeyAndType(this, 'serviceName', ServiceNameVariable);\n      serviceNameVariable.changeValueTo(serviceName);\n    }\n\n    if (profileMetricId) {\n      const profileMetricVariable = sceneGraph.findByKeyAndType(this, 'profileMetricId', ProfileMetricVariable);\n      profileMetricVariable.changeValueTo(profileMetricId);\n    }\n\n    if (filters) {\n      const filtersVariable = sceneGraph.findByKeyAndType(this, 'filters', FiltersVariable);\n      filtersVariable.setState({ filters });\n    }\n  }\n\n  // see SceneProfilesExplorer\n  getVariablesAndGridControls() {\n    return {\n      variables: [\n        sceneGraph.findByKeyAndType(this, 'serviceName', ServiceNameVariable),\n        sceneGraph.findByKeyAndType(this, 'profileMetricId', ProfileMetricVariable),\n        sceneGraph.findByKeyAndType(this, 'filters', FiltersVariable),\n      ],\n      gridControls: [],\n    };\n  }\n\n  static Component({ model }: SceneComponentProps<SceneExploreServiceLabels>) {\n    const { body } = model.useState();\n\n    return <body.Component model={body} />;\n  }\n}\n","import {\n  EmbeddedSceneState,\n  SceneComponentProps,\n  sceneGraph,\n  SceneObjectBase,\n  SceneVariableSet,\n} from '@grafana/scenes';\nimport React from 'react';\n\nimport { SceneByVariableRepeaterGrid } from '../../components/SceneByVariableRepeaterGrid/SceneByVariableRepeaterGrid';\nimport { FavAction } from '../../domain/actions/FavAction';\nimport { SelectAction } from '../../domain/actions/SelectAction';\nimport { ProfileMetricVariable } from '../../domain/variables/ProfileMetricVariable';\nimport { ServiceNameVariable } from '../../domain/variables/ServiceNameVariable/ServiceNameVariable';\nimport { SceneLayoutSwitcher } from '../SceneByVariableRepeaterGrid/components/SceneLayoutSwitcher';\nimport { PanelType } from '../SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher';\nimport { SceneQuickFilter } from '../SceneByVariableRepeaterGrid/components/SceneQuickFilter';\nimport { GridItemData } from '../SceneByVariableRepeaterGrid/types/GridItemData';\n\ninterface SceneExploreServiceProfileTypesState extends EmbeddedSceneState {}\n\nexport class SceneExploreServiceProfileTypes extends SceneObjectBase<SceneExploreServiceProfileTypesState> {\n  constructor({ item }: { item?: GridItemData }) {\n    super({\n      key: 'explore-service-profile-types',\n      $variables: new SceneVariableSet({\n        variables: [\n          // we use a custom instance of ProfileMetricVariable to display only the profile metrics associated to the selected service\n          new ProfileMetricVariable({\n            query: ProfileMetricVariable.QUERY_SERVICE_NAME_DEPENDENT,\n            skipUrlSync: true,\n          }),\n        ],\n      }),\n      body: new SceneByVariableRepeaterGrid({\n        key: 'profile-metrics-grid',\n        variableName: 'profileMetricId',\n        mapOptionToItem: (option, index, { serviceName }) => ({\n          index,\n          value: option.value as string,\n          label: option.label,\n          queryRunnerParams: {\n            serviceName,\n            profileMetricId: option.value as string,\n          },\n          panelType: PanelType.TIMESERIES,\n        }),\n        headerActions: (item) => [\n          new SelectAction({ type: 'view-labels', item }),\n          new SelectAction({ type: 'view-flame-graph', item }),\n          new FavAction({ item }),\n        ],\n      }),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this, item));\n  }\n\n  onActivate(item?: GridItemData) {\n    sceneGraph\n      .findByKeyAndType(this, 'quick-filter', SceneQuickFilter)\n      .setPlaceholder('Search profile types (comma-separated regexes are supported)');\n\n    if (item) {\n      this.initVariables(item);\n    }\n  }\n\n  initVariables(item: GridItemData) {\n    if (item.queryRunnerParams.serviceName) {\n      const serviceNameVariable = sceneGraph.findByKeyAndType(this, 'serviceName', ServiceNameVariable);\n      serviceNameVariable.changeValueTo(item.queryRunnerParams.serviceName);\n    }\n  }\n\n  // see SceneProfilesExplorer\n  getVariablesAndGridControls() {\n    return {\n      variables: [sceneGraph.findByKeyAndType(this, 'serviceName', ServiceNameVariable)],\n      gridControls: [\n        sceneGraph.findByKeyAndType(this, 'quick-filter', SceneQuickFilter),\n        sceneGraph.findByKeyAndType(this, 'layout-switcher', SceneLayoutSwitcher),\n      ],\n    };\n  }\n\n  static Component({ model }: SceneComponentProps<SceneExploreServiceProfileTypes>) {\n    const { body } = model.useState();\n\n    return <body.Component model={body} />;\n  }\n}\n","import { dateTimeParse } from '@grafana/data';\nimport { SceneTimeRangeState } from '@grafana/scenes';\n\nexport function buildTimeRange(from: string, to: string): SceneTimeRangeState {\n  return {\n    from,\n    to,\n    value: {\n      from: dateTimeParse(from),\n      to: dateTimeParse(to),\n      raw: { from, to },\n    },\n  };\n}\n\nexport const getDefaultTimeRange = () => buildTimeRange('now-30m', 'now');\n","import { MetricFindValue } from '@grafana/data';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\n\nimport { PyroscopeSeries } from './http/SeriesApiClient';\n\nexport function formatSeriesToProfileMetrics(\n  pyroscopeSeries: PyroscopeSeries,\n  serviceName?: string\n): MetricFindValue[] {\n  if (serviceName) {\n    const profileMetricsMap = pyroscopeSeries.services.get(serviceName) || new Map();\n\n    return Array.from(profileMetricsMap.values())\n      .sort((a, b) => b.group.localeCompare(a.group))\n      .map(({ id, type, group }) => ({\n        value: id,\n        text: `${type} (${group})`,\n      }));\n  }\n\n  return Array.from(pyroscopeSeries.profileMetrics.keys())\n    .map((id) => getProfileMetric(id as ProfileMetricId))\n    .sort((a, b) => b.group.localeCompare(a.group))\n    .map(({ id, type, group }) => ({\n      value: id,\n      text: `${type} (${group})`,\n    }));\n}\n","import { MetricFindValue } from '@grafana/data';\n\nimport { PyroscopeSeries } from './http/SeriesApiClient';\n\nexport function formatSeriesToServices(pyroscopeSeries: PyroscopeSeries, profileMetricId?: string): MetricFindValue[] {\n  if (profileMetricId) {\n    const servicesSet = pyroscopeSeries.profileMetrics.get(profileMetricId) || new Set();\n\n    return Array.from(servicesSet)\n      .sort((a, b) => a.localeCompare(b))\n      .map((serviceName) => ({\n        text: serviceName,\n        value: serviceName,\n      }));\n  }\n\n  return Array.from(pyroscopeSeries.services.keys())\n    .sort((a, b) => a.localeCompare(b))\n    .map((serviceName) => ({\n      text: serviceName,\n      value: serviceName,\n    }));\n}\n","import { DataSourceProxyClient } from './DataSourceProxyClient';\n\nexport class DataSourceProxyClientBuilder {\n  private static cache = new Map<string, DataSourceProxyClient>();\n\n  static build<ApiClentType>(\n    dataSourceUid: string,\n    ApiClientClass: { new (options: { dataSourceUid: string }): ApiClentType }\n  ) {\n    const cacheKey = `${dataSourceUid}-${ApiClientClass.name}`;\n\n    const cachedInstance = DataSourceProxyClientBuilder.cache.get(cacheKey);\n    if (cachedInstance instanceof ApiClientClass) {\n      return cachedInstance;\n    }\n\n    const clientInstance = new ApiClientClass({ dataSourceUid });\n\n    DataSourceProxyClientBuilder.cache.set(cacheKey, clientInstance as DataSourceProxyClient);\n\n    return clientInstance;\n  }\n}\n","import { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport { logger } from '@shared/infrastructure/tracking/logger';\n\nimport { PyroscopeSeries } from './SeriesApiClient';\n\ntype Labels = Array<{ name: string; value: string }>;\n\nfunction findServiceNameAndProfileMetricId(labels: Labels) {\n  let serviceName;\n  let profileMetricId;\n\n  for (const { name, value } of labels) {\n    if (name === 'service_name') {\n      serviceName = value;\n    }\n\n    if (name === '__profile_type__') {\n      profileMetricId = value;\n    }\n\n    if (serviceName && profileMetricId) {\n      return [serviceName, profileMetricId];\n    }\n  }\n\n  return [];\n}\n\nexport function formatSeriesResponse(data: { labelsSet: Array<{ labels: Labels }> }): PyroscopeSeries {\n  const services: PyroscopeSeries['services'] = new Map();\n  const profileMetrics: PyroscopeSeries['profileMetrics'] = new Map();\n\n  if (!data.labelsSet) {\n    logger.warn('Pyroscope SeriesApiClient: no data received!');\n    return { services, profileMetrics };\n  }\n\n  for (const { labels } of data.labelsSet) {\n    const [serviceName, profileMetricId] = findServiceNameAndProfileMetricId(labels);\n\n    if (!serviceName || !profileMetricId) {\n      logger.warn(\n        'Pyroscope ServicesApiClient: \"service_name\" and/or \"__profile_type__\" are missing in the labels received!',\n        labels\n      );\n      continue;\n    }\n\n    const serviceProfileMetrics = services.get(serviceName) || new Map();\n    serviceProfileMetrics.set(profileMetricId, getProfileMetric(profileMetricId as ProfileMetricId));\n    services.set(serviceName, serviceProfileMetrics);\n\n    const profileMetricServices = profileMetrics.get(profileMetricId) || new Set();\n    profileMetricServices.add(serviceName);\n    profileMetrics.set(profileMetricId, profileMetricServices);\n  }\n\n  return { services, profileMetrics };\n}\n","import { ProfileMetric } from '@shared/infrastructure/profile-metrics/getProfileMetric';\n\nimport { DataSourceProxyClient } from './DataSourceProxyClient';\nimport { formatSeriesResponse } from './formatSeriesResponse';\n\ntype ProfileMetricsMap = Map<ProfileMetric['id'], ProfileMetric>;\ntype ServiceToProfileMetricsMap = Map<string, ProfileMetricsMap>;\n\ntype ServicesSet = Set<string>;\ntype ProfileMetricToServicesSet = Map<string, ServicesSet>;\n\nexport type PyroscopeSeries = { services: ServiceToProfileMetricsMap; profileMetrics: ProfileMetricToServicesSet };\n\nexport class SeriesApiClient extends DataSourceProxyClient {\n  constructor(options: { dataSourceUid: string }) {\n    super(options);\n  }\n\n  async list(options: { from: number; to: number }): Promise<PyroscopeSeries> {\n    const { from, to } = options;\n\n    return this.fetch('/querier.v1.QuerierService/Series', {\n      method: 'POST',\n      body: JSON.stringify({\n        start: from,\n        end: to,\n        labelNames: ['service_name', '__profile_type__'],\n        matchers: [],\n      }),\n    })\n      .then((response) => response.json())\n      .then(formatSeriesResponse);\n  }\n}\n","import { TimeRange } from '@grafana/data';\nimport { AbstractRepository } from '@shared/infrastructure/AbstractRepository';\nimport { MemoryCacheClient } from '@shared/infrastructure/MemoryCacheClient';\n\nimport { computeRoundedTimeRange } from '../../../helpers/computeRoundedTimeRange';\nimport { PyroscopeSeries, SeriesApiClient } from './SeriesApiClient';\n\nclass SeriesRepository extends AbstractRepository<SeriesApiClient, MemoryCacheClient> {\n  constructor(options: { cacheClient: MemoryCacheClient }) {\n    super(options);\n  }\n\n  async list(options: { timeRange: TimeRange }): Promise<PyroscopeSeries> {\n    const { from, to } = computeRoundedTimeRange(options.timeRange);\n\n    const cacheParams = [this.apiClient!.baseUrl, from, to];\n\n    const responseFromCacheP = this.cacheClient!.get(cacheParams);\n    if (responseFromCacheP) {\n      const { services, profileMetrics } = await responseFromCacheP;\n\n      if (!services.size && !profileMetrics.size) {\n        this.cacheClient!.delete(cacheParams);\n      }\n\n      return { services, profileMetrics };\n    }\n\n    const fetchP = this.apiClient!.list({ from, to });\n    this.cacheClient!.set(cacheParams, fetchP);\n\n    try {\n      const { services, profileMetrics } = await fetchP;\n      return { services, profileMetrics };\n    } catch (error) {\n      this.cacheClient!.delete(cacheParams);\n      throw error;\n    }\n  }\n}\n\nexport const seriesRepository = new SeriesRepository({\n  cacheClient: new MemoryCacheClient(),\n});\n","import {\n  DataQueryResponse,\n  FieldType,\n  LegacyMetricFindQueryOptions,\n  LoadingState,\n  MetricFindValue,\n  TestDataSourceResponse,\n  TimeRange,\n} from '@grafana/data';\nimport { RuntimeDataSource, sceneGraph } from '@grafana/scenes';\n\nimport { PYROSCOPE_SERIES_DATA_SOURCE } from '../pyroscope-data-sources';\nimport { formatSeriesToProfileMetrics } from './formatSeriesToProfileMetrics';\nimport { formatSeriesToServices } from './formatSeriesToServices';\nimport { DataSourceProxyClientBuilder } from './http/DataSourceProxyClientBuilder';\nimport { SeriesApiClient } from './http/SeriesApiClient';\nimport { seriesRepository } from './http/seriesRepository';\n\nexport class SeriesDataSource extends RuntimeDataSource {\n  constructor() {\n    super(PYROSCOPE_SERIES_DATA_SOURCE.type, PYROSCOPE_SERIES_DATA_SOURCE.uid);\n  }\n\n  async fetchSeries(dataSourceUid: string, timeRange: TimeRange) {\n    const seriesApiClient = DataSourceProxyClientBuilder.build(dataSourceUid, SeriesApiClient);\n    seriesRepository.setApiClient(seriesApiClient);\n    return seriesRepository.list({ timeRange });\n  }\n\n  async query(): Promise<DataQueryResponse> {\n    return {\n      state: LoadingState.Done,\n      data: [\n        {\n          name: 'PyroscopeSeries',\n          fields: [\n            {\n              name: 'PyroscopeSeries',\n              type: FieldType.other,\n              values: [],\n              config: {},\n            },\n          ],\n          length: 0,\n        },\n      ],\n    };\n  }\n\n  async metricFindQuery(query: string, options: LegacyMetricFindQueryOptions): Promise<MetricFindValue[]> {\n    const sceneObject = options.scopedVars?.__sceneObject?.value;\n\n    const dataSourceUid = sceneGraph.interpolate(sceneObject, '$dataSource');\n    const serviceName = sceneGraph.interpolate(sceneObject, '$serviceName');\n    const profileMetricId = sceneGraph.interpolate(sceneObject, '$profileMetricId');\n\n    const pyroscopeSeries = await this.fetchSeries(dataSourceUid, options.range as TimeRange);\n\n    switch (query) {\n      // queries that depend only on the selected data source\n      case '$dataSource and all services':\n        return formatSeriesToServices(pyroscopeSeries);\n\n      case '$dataSource and all profile metrics':\n        return formatSeriesToProfileMetrics(pyroscopeSeries);\n\n      // queries that depend on the selected profile metric or the selected service\n      case '$dataSource and only $profileMetricId services':\n        return formatSeriesToServices(pyroscopeSeries, profileMetricId);\n\n      case '$dataSource and only $serviceName profile metrics':\n        return formatSeriesToProfileMetrics(pyroscopeSeries, serviceName);\n\n      default:\n        throw new TypeError(`Unsupported query \"${query}\"!`);\n    }\n  }\n\n  async testDatasource(): Promise<TestDataSourceResponse> {\n    return {\n      status: 'success',\n      message: 'OK',\n    };\n  }\n}\n","import { toUtc } from '@grafana/data';\nimport { SceneObjectUrlValue } from '@grafana/scenes';\n\nconst INTERVAL_STRING_REGEX = /^\\d+[yYmMsSwWhHdD]$/;\n\n/* Copied from https://github.com/grafana/scenes/blob/main/packages/scenes/src/utils/parseUrlParam.ts */\n\n// eslint-disable-next-line sonarjs/cognitive-complexity\nexport function parseUrlParam(value: SceneObjectUrlValue): string | null {\n  if (typeof value !== 'string') {\n    return null;\n  }\n\n  if (value.indexOf('now') !== -1) {\n    return value;\n  }\n\n  if (INTERVAL_STRING_REGEX.test(value)) {\n    return value;\n  }\n\n  if (value.length === 8) {\n    const utcValue = toUtc(value, 'YYYYMMDD');\n    if (utcValue.isValid()) {\n      return utcValue.toISOString();\n    }\n  } else if (value.length === 15) {\n    const utcValue = toUtc(value, 'YYYYMMDDTHHmmss');\n    if (utcValue.isValid()) {\n      return utcValue.toISOString();\n    }\n  } else if (value.length === 24) {\n    const utcValue = toUtc(value);\n    return utcValue.toISOString();\n  }\n\n  const epoch = parseInt(value, 10);\n  if (!isNaN(epoch)) {\n    return toUtc(epoch).toISOString();\n  }\n\n  return null;\n}\n","import { FieldType, MutableDataFrame } from '@grafana/data';\n\nexport class RangeAnnotation extends MutableDataFrame {\n  constructor() {\n    super();\n    [\n      {\n        name: 'time',\n        type: FieldType.time,\n      },\n      {\n        name: 'timeEnd',\n        type: FieldType.time,\n      },\n      {\n        name: 'isRegion',\n        type: FieldType.boolean,\n      },\n      {\n        name: 'color',\n        type: FieldType.other,\n      },\n      {\n        name: 'text',\n        type: FieldType.string,\n      },\n    ].forEach((field) => this.addField(field));\n  }\n\n  addRange(entry: { time: number; timeEnd: number; color?: string; text: string }) {\n    this.add({ ...entry, isRegion: true });\n  }\n}\n","import { DateTime, dateTime, LoadingState, TimeRange } from '@grafana/data';\nimport {\n  sceneGraph,\n  SceneObjectBase,\n  SceneObjectUrlSyncConfig,\n  SceneObjectUrlValues,\n  SceneTimeRangeLike,\n  SceneTimeRangeState,\n  VariableDependencyConfig,\n  VizPanel,\n} from '@grafana/scenes';\nimport { omit } from 'lodash';\n\nimport { evaluateTimeRange } from '../domain/evaluateTimeRange';\nimport { parseUrlParam } from '../domain/parseUrlParam';\nimport { RangeAnnotation } from '../domain/RangeAnnotation';\n\nexport enum TimeRangeWithAnnotationsMode {\n  ANNOTATIONS = 'annotations',\n  DEFAULT = 'default',\n}\n\ninterface SceneTimeRangeWithAnnotationsState extends SceneTimeRangeState {\n  annotationTimeRange: TimeRange;\n  mode: TimeRangeWithAnnotationsMode;\n  annotationColor: string;\n  annotationTitle: string;\n}\n\nconst TIMERANGE_NIL = {\n  from: dateTime(0),\n  to: dateTime(0),\n  raw: { from: '', to: '' },\n};\n\n/**\n * This custom SceneTimeRange class provides the ability to draw annotations on timeseries vizualisations.\n * Indeed, timeseries visualizations don't support drawing annotations by dragging (it's only supported when holding ctrl/command key) so we need to hijack the zooming event to emulate drawing.\n * At the same time, the only way to hijack it is by passing custom $timeRange because TimeSeries vizualization handles zooming internally by looking for the nearest time range object.\n * @see https://github.com/grafana/scenes/pull/744\n */\nexport class SceneTimeRangeWithAnnotations\n  extends SceneObjectBase<SceneTimeRangeWithAnnotationsState>\n  implements SceneTimeRangeLike\n{\n  protected _variableDependency = new VariableDependencyConfig(this, {\n    variableNames: ['dataSource', 'serviceName'],\n    onReferencedVariableValueChanged: () => {\n      this.nullifyAnnotationTimeRange();\n      this.updateTimeseriesAnnotation();\n    },\n  });\n\n  protected _urlSync = new SceneObjectUrlSyncConfig(this, { keys: ['diffFrom', 'diffTo'] });\n\n  constructor(options: {\n    key: string;\n    mode: TimeRangeWithAnnotationsMode;\n    annotationColor: string;\n    annotationTitle: string;\n  }) {\n    super({\n      from: TIMERANGE_NIL.raw.from,\n      to: TIMERANGE_NIL.raw.to,\n      value: TIMERANGE_NIL,\n      annotationTimeRange: TIMERANGE_NIL,\n      ...options,\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    this.setState(omit(this.getAncestorTimeRange().state, 'key'));\n\n    this._subs.add(\n      this.getAncestorTimeRange().subscribeToState((newState) => {\n        this.setState(omit(newState, 'key'));\n      })\n    );\n\n    this._subs.add(\n      this.getTimeseries().state.$data?.subscribeToState((newState, prevState) => {\n        if (!newState.data || newState.data.state !== LoadingState.Done) {\n          return;\n        }\n\n        // add annotation for the first time\n        if (!newState.data.annotations?.length && !prevState.data?.annotations?.length) {\n          this.updateTimeseriesAnnotation();\n          return;\n        }\n\n        // ensure we retain the previous annotations, if they exist\n        if (!newState.data.annotations?.length && prevState.data?.annotations?.length) {\n          newState.data.annotations = prevState.data.annotations;\n        }\n      })\n    );\n  }\n\n  protected getAncestorTimeRange(): SceneTimeRangeLike {\n    if (!this.parent || !this.parent.parent) {\n      throw new Error(typeof this + ' must be used within $timeRange scope');\n    }\n\n    return sceneGraph.getTimeRange(this.parent.parent);\n  }\n\n  protected getTimeseries(): VizPanel {\n    try {\n      const vizPanel = sceneGraph.getAncestor(this, VizPanel);\n\n      if (vizPanel.state.pluginId !== 'timeseries') {\n        throw new TypeError('Incorrect VizPanel type!');\n      }\n\n      return vizPanel;\n    } catch (error) {\n      throw new Error('Ancestor timeseries panel not found!');\n    }\n  }\n\n  updateTimeseriesAnnotation() {\n    const { annotationTimeRange, annotationColor, annotationTitle } = this.state;\n\n    const { $data } = this.getTimeseries().state;\n\n    const data = $data?.state.data;\n    if (!data) {\n      return;\n    }\n\n    const annotation = new RangeAnnotation();\n\n    annotation.addRange({\n      color: annotationColor,\n      text: annotationTitle,\n      time: annotationTimeRange.from.unix() * 1000,\n      timeEnd: annotationTimeRange.to.unix() * 1000,\n    });\n\n    // tradeoff: this will notify all the $data subscribers even though the data itself hasn't changed\n    $data?.setState({\n      data: {\n        ...data,\n        annotations: [annotation],\n      },\n    });\n  }\n\n  setAnnotationTimeRange(annotationTimeRange: TimeRange, updateTimeseries = false) {\n    this.setState({ annotationTimeRange });\n\n    if (updateTimeseries) {\n      this.updateTimeseriesAnnotation();\n    }\n  }\n\n  nullifyAnnotationTimeRange() {\n    this.setAnnotationTimeRange(TIMERANGE_NIL);\n  }\n\n  getUrlState() {\n    const { annotationTimeRange } = this.state;\n\n    return {\n      diffFrom:\n        typeof annotationTimeRange.raw.from === 'string'\n          ? annotationTimeRange.raw.from\n          : annotationTimeRange.raw.from.toISOString(),\n      diffTo:\n        typeof annotationTimeRange.raw.to === 'string'\n          ? annotationTimeRange.raw.to\n          : annotationTimeRange.raw.to.toISOString(),\n    };\n  }\n\n  updateFromUrl(values: SceneObjectUrlValues) {\n    const { diffFrom, diffTo } = values;\n\n    if (!diffTo && !diffFrom) {\n      return;\n    }\n\n    const { annotationTimeRange } = this.state;\n\n    this.setAnnotationTimeRange(\n      this.buildAnnotationTimeRange(\n        parseUrlParam(diffFrom) ?? annotationTimeRange.from,\n        parseUrlParam(diffTo) ?? annotationTimeRange.to\n      )\n    );\n  }\n\n  buildAnnotationTimeRange(diffFrom: string | DateTime, diffTo: string | DateTime) {\n    return evaluateTimeRange(\n      diffFrom,\n      diffTo,\n      this.getTimeZone(),\n      this.state.fiscalYearStartMonth,\n      this.state.UNSAFE_nowDelay\n    );\n  }\n\n  onTimeRangeChange(timeRange: TimeRange): void {\n    const { mode } = this.state;\n\n    if (mode === TimeRangeWithAnnotationsMode.DEFAULT) {\n      this.getAncestorTimeRange().onTimeRangeChange(timeRange);\n      return;\n    }\n\n    // this triggers a timeseries request to the API\n    // TODO: caching?\n    this.setAnnotationTimeRange(timeRange, true);\n  }\n\n  onTimeZoneChange(timeZone: string): void {\n    this.getAncestorTimeRange().onTimeZoneChange(timeZone);\n  }\n\n  getTimeZone(): string {\n    return this.getAncestorTimeRange().getTimeZone();\n  }\n\n  onRefresh(): void {\n    this.getAncestorTimeRange().onRefresh();\n  }\n}\n","import { dateMath, DateTime, TimeRange } from '@grafana/data';\nimport { TimeZone } from '@grafana/schema';\n\n/* Copied from https://github.com/grafana/scenes/blob/main/packages/scenes/src/utils/evaluateTimeRange.ts */\n\nexport function evaluateTimeRange(\n  from: string | DateTime,\n  to: string | DateTime,\n  timeZone: TimeZone,\n  fiscalYearStartMonth?: number,\n  delay?: string\n): TimeRange {\n  const hasDelay = delay && to === 'now';\n\n  return {\n    from: dateMath.parse(from, false, timeZone, fiscalYearStartMonth)!,\n    to: dateMath.parse(hasDelay ? 'now-' + delay : to, true, timeZone, fiscalYearStartMonth)!,\n    raw: {\n      from: from,\n      to: to,\n    },\n  };\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nimport { TimerangeSelectionMode } from '../actions/SwitchTimeRangeSelectionModeAction';\n\ninterface EventSwitchTimerangeSelectionModePayload {\n  mode: TimerangeSelectionMode;\n}\n\nexport class EventSwitchTimerangeSelectionMode extends BusEventWithPayload<EventSwitchTimerangeSelectionModePayload> {\n  public static type = 'switch-timerange-selection-mode';\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { SceneComponentProps, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { Icon, RadioButtonGroup, Tooltip, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { EventSwitchTimerangeSelectionMode } from '../events/EventSwitchTimerangeSelectionMode';\n\nexport enum TimerangeSelectionMode {\n  TIMEPICKER = 'timepicker',\n  FLAMEGRAPH = 'flame-graph',\n}\n\ninterface SwitchTimeRangeSelectionTypeActionState extends SceneObjectState {\n  mode: TimerangeSelectionMode;\n}\n\nexport class SwitchTimeRangeSelectionModeAction extends SceneObjectBase<SwitchTimeRangeSelectionTypeActionState> {\n  static OPTIONS = [\n    { label: 'Time picker', value: TimerangeSelectionMode.TIMEPICKER },\n    { label: 'Flame graph', value: TimerangeSelectionMode.FLAMEGRAPH },\n  ];\n\n  constructor() {\n    super({\n      mode: TimerangeSelectionMode.FLAMEGRAPH,\n    });\n  }\n\n  public onChange = (newMode: TimerangeSelectionMode) => {\n    this.setState({ mode: newMode });\n\n    this.publishEvent(new EventSwitchTimerangeSelectionMode({ mode: newMode }), true);\n  };\n\n  public static Component = ({ model }: SceneComponentProps<SwitchTimeRangeSelectionModeAction>) => {\n    const styles = useStyles2(getStyles);\n    const { mode } = model.useState();\n\n    return (\n      <div className={styles.container}>\n        <label className={styles.label}>\n          <span>Range selection mode&nbsp;</span>\n          <Tooltip\n            content={\n              <div className={styles.tooltip}>\n                <div>\n                  Use these buttons to change the behaviour when selecting a range with the mouse on the time series:\n                </div>\n                <dl>\n                  <dt>Time picker</dt>\n                  <dd>Time range zoom in (default behaviour)</dd>\n                  <dt>Flame graph</dt>\n                  <dd>\n                    Time range for building the flame graph (the stack traces will be retrieved only for the selected\n                    range)\n                  </dd>\n                </dl>\n              </div>\n            }\n            placement=\"top\"\n          >\n            <Icon name=\"question-circle\" />\n          </Tooltip>\n        </label>\n        <RadioButtonGroup\n          size=\"sm\"\n          options={SwitchTimeRangeSelectionModeAction.OPTIONS}\n          value={mode}\n          onChange={model.onChange}\n          aria-label=\"Range selection mode\"\n        />\n      </div>\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n  `,\n  tooltip: css`\n    padding: ${theme.spacing(1)};\n    & dl {\n      margin-top: ${theme.spacing(2)};\n      display: grid;\n      grid-gap: ${theme.spacing(1)} ${theme.spacing(2)};\n      grid-template-columns: max-content;\n    }\n    & dt {\n      font-weight: bold;\n    }\n    & dd {\n      margin: 0;\n      grid-column-start: 2;\n    }\n  `,\n  label: css`\n    font-size: 12px;\n    text-align: right;\n    margin-bottom: 2px;\n    color: ${theme.colors.text.secondary};\n  `,\n});\n","import { SceneQueryRunner } from '@grafana/scenes';\nimport { PYROSCOPE_DATA_SOURCE } from 'src/pages/ProfilesExplorerView/infrastructure/pyroscope-data-sources';\n\nexport function buildCompareTimeSeriesQueryRunner({\n  filterKey,\n}: {\n  filterKey: 'filtersBaseline' | 'filtersComparison';\n}) {\n  return new SceneQueryRunner({\n    datasource: PYROSCOPE_DATA_SOURCE,\n    queries: [\n      {\n        refId: `$profileMetricId-$serviceName-${filterKey}}`,\n        queryType: 'metrics',\n        profileTypeId: '$profileMetricId',\n        labelSelector: `{service_name=\"$serviceName\",$${filterKey}}`,\n      },\n    ],\n  });\n}\n","import Color from 'color';\n\nexport const BASELINE_COLORS = {\n  COLOR: Color('#d066d4'),\n  OVERLAY: Color('#d066d4').alpha(0.3),\n};\n\nexport const COMPARISON_COLORS = {\n  COLOR: Color('#1398f6'),\n  OVERLAY: Color('#1398f6').alpha(0.3),\n};\n","import { css } from '@emotion/css';\nimport {\n  dateTime,\n  dateTimeFormat,\n  FieldMatcherID,\n  getValueFormat,\n  GrafanaTheme2,\n  systemDateFormats,\n} from '@grafana/data';\nimport {\n  SceneComponentProps,\n  SceneDataTransformer,\n  sceneGraph,\n  SceneObjectBase,\n  SceneObjectState,\n  SceneRefreshPicker,\n  SceneTimePicker,\n  SceneTimeRange,\n  SceneTimeRangeLike,\n  VariableDependencyConfig,\n} from '@grafana/scenes';\nimport { useStyles2 } from '@grafana/ui';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport { omit } from 'lodash';\nimport React from 'react';\n\nimport { buildTimeRange } from '../../../../domain/buildTimeRange';\nimport { FiltersVariable } from '../../../../domain/variables/FiltersVariable/FiltersVariable';\nimport { getSceneVariableValue } from '../../../../helpers/getSceneVariableValue';\nimport { getSeriesStatsValue } from '../../../../infrastructure/helpers/getSeriesStatsValue';\nimport { getProfileMetricLabel } from '../../../../infrastructure/series/helpers/getProfileMetricLabel';\nimport { PanelType } from '../../../SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher';\nimport { addRefId, addStats } from '../../../SceneByVariableRepeaterGrid/infrastructure/data-transformations';\nimport { CompareTarget } from '../../../SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/domain/types';\nimport { SceneLabelValuesTimeseries } from '../../../SceneLabelValuesTimeseries';\nimport { Preset } from '../ScenePresetsPicker/ScenePresetsPicker';\nimport {\n  SceneTimeRangeWithAnnotations,\n  TimeRangeWithAnnotationsMode,\n} from './components/SceneTimeRangeWithAnnotations';\nimport {\n  SwitchTimeRangeSelectionModeAction,\n  TimerangeSelectionMode,\n} from './domain/actions/SwitchTimeRangeSelectionModeAction';\nimport { EventSwitchTimerangeSelectionMode } from './domain/events/EventSwitchTimerangeSelectionMode';\nimport { RangeAnnotation } from './domain/RangeAnnotation';\nimport { buildCompareTimeSeriesQueryRunner } from './infrastructure/buildCompareTimeSeriesQueryRunner';\nimport { BASELINE_COLORS, COMPARISON_COLORS } from './ui/colors';\n\nconst ONE_DAY_IN_MS = 24 * 60 * 60 * 1000;\n\ninterface SceneComparePanelState extends SceneObjectState {\n  target: CompareTarget;\n  filterKey: 'filtersBaseline' | 'filtersComparison';\n  title: string;\n  color: string;\n  timePicker: SceneTimePicker;\n  refreshPicker: SceneRefreshPicker;\n  $timeRange: SceneTimeRange;\n  timeseriesPanel: SceneLabelValuesTimeseries;\n}\n\nexport class SceneComparePanel extends SceneObjectBase<SceneComparePanelState> {\n  protected _variableDependency = new VariableDependencyConfig(this, {\n    variableNames: ['profileMetricId'],\n    onReferencedVariableValueChanged: () => {\n      this.state.timeseriesPanel.updateTitle(this.buildTimeseriesTitle());\n    },\n  });\n\n  constructor({\n    target,\n    useAncestorTimeRange,\n  }: {\n    target: SceneComparePanelState['target'];\n    useAncestorTimeRange: boolean;\n  }) {\n    const filterKey = target === CompareTarget.BASELINE ? 'filtersBaseline' : 'filtersComparison';\n    const title = target === CompareTarget.BASELINE ? 'Baseline' : 'Comparison';\n    const color =\n      target === CompareTarget.BASELINE ? BASELINE_COLORS.COLOR.toString() : COMPARISON_COLORS.COLOR.toString();\n\n    super({\n      key: `${target}-panel`,\n      target,\n      filterKey,\n      title,\n      color,\n      $timeRange: new SceneTimeRange({ key: `${target}-panel-timerange`, ...buildTimeRange('now-1h', 'now') }),\n      timePicker: new SceneTimePicker({ isOnCanvas: true }),\n      refreshPicker: new SceneRefreshPicker({ isOnCanvas: true }),\n      timeseriesPanel: SceneComparePanel.buildTimeSeriesPanel({ target, filterKey, title, color }),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this, useAncestorTimeRange));\n  }\n\n  onActivate(useAncestorTimeRange: boolean) {\n    const { $timeRange, timeseriesPanel } = this.state;\n\n    if (useAncestorTimeRange) {\n      $timeRange.setState(omit(this.getAncestorTimeRange().state, 'key'));\n    }\n\n    timeseriesPanel.updateTitle(this.buildTimeseriesTitle());\n\n    const eventSub = this.subscribeToEvents();\n\n    return () => {\n      eventSub.unsubscribe();\n    };\n  }\n\n  static buildTimeSeriesPanel({ target, filterKey, title, color }: any) {\n    const timeseriesPanel = new SceneLabelValuesTimeseries({\n      item: {\n        index: 0,\n        value: target,\n        label: '',\n        queryRunnerParams: {},\n        panelType: PanelType.TIMESERIES,\n      },\n      data: new SceneDataTransformer({\n        $data: buildCompareTimeSeriesQueryRunner({ filterKey }),\n        transformations: [addRefId, addStats],\n      }),\n      overrides: (series) =>\n        series.map((s) => {\n          const metricField = s.fields[1];\n          const allValuesSum = getSeriesStatsValue(s, 'allValuesSum') || 0;\n          const formattedValue = getValueFormat(metricField.config.unit)(allValuesSum);\n          const total = `${formattedValue.text}${formattedValue.suffix}`;\n          const [diffFrom, diffTo, timeZone] = SceneComparePanel.getDiffRange(timeseriesPanel);\n\n          const displayName =\n            diffFrom && diffTo\n              ? `Total = ${total} / Flame graph range = ${dateTimeFormat(diffFrom, {\n                  format: systemDateFormats.fullDate,\n                  timeZone,\n                })}  ${dateTimeFormat(diffTo, {\n                  format: systemDateFormats.fullDate,\n                  timeZone,\n                })}`\n              : `Total = ${total}`;\n\n          return {\n            matcher: { id: FieldMatcherID.byFrameRefID, options: s.refId },\n            properties: [\n              {\n                id: 'displayName',\n                value: displayName,\n              },\n              {\n                id: 'color',\n                value: { mode: 'fixed', fixedColor: color },\n              },\n            ],\n          };\n        }),\n      headerActions: () => [new SwitchTimeRangeSelectionModeAction()],\n    });\n\n    timeseriesPanel.state.body.setState({\n      $timeRange: new SceneTimeRangeWithAnnotations({\n        key: `${target}-annotation-timerange`,\n        mode: TimeRangeWithAnnotationsMode.ANNOTATIONS,\n        annotationColor:\n          target === CompareTarget.BASELINE ? BASELINE_COLORS.OVERLAY.toString() : COMPARISON_COLORS.OVERLAY.toString(),\n        annotationTitle: `${title} flame graph range`,\n      }),\n    });\n\n    return timeseriesPanel;\n  }\n\n  static getDiffRange(\n    timeseriesPanel: SceneLabelValuesTimeseries\n  ): [number | undefined, number | undefined, string | undefined] {\n    let diffFrom: number | undefined;\n    let diffTo: number | undefined;\n\n    const annotation = timeseriesPanel.state.body.state.$data?.state.data?.annotations?.[0] as RangeAnnotation;\n\n    annotation?.fields.some(({ name, values }) => {\n      diffFrom = name === 'time' ? values[0] : diffFrom;\n      diffTo = name === 'timeEnd' ? values[0] : diffTo;\n      return diffFrom && diffTo;\n    });\n\n    return [diffFrom, diffTo, timeseriesPanel.state.$timeRange?.state.timeZone];\n  }\n\n  protected getAncestorTimeRange(): SceneTimeRangeLike {\n    if (!this.parent || !this.parent.parent) {\n      throw new Error(typeof this + ' must be used within $timeRange scope');\n    }\n\n    return sceneGraph.getTimeRange(this.parent.parent);\n  }\n\n  subscribeToEvents() {\n    const switchSub = this.subscribeToEvent(EventSwitchTimerangeSelectionMode, (event) => {\n      // this triggers a timeseries request to the API\n      // TODO: caching?\n      (this.state.timeseriesPanel.state.body.state.$timeRange as SceneTimeRangeWithAnnotations).setState({\n        mode:\n          event.payload.mode === TimerangeSelectionMode.FLAMEGRAPH\n            ? TimeRangeWithAnnotationsMode.ANNOTATIONS\n            : TimeRangeWithAnnotationsMode.DEFAULT,\n      });\n    });\n\n    const timeRangeSub = this.state.$timeRange.subscribeToState((newState, prevState) => {\n      if (newState.from !== prevState.from || newState.to !== prevState.to) {\n        this.updateTitle('');\n      }\n    });\n\n    return {\n      unsubscribe() {\n        timeRangeSub.unsubscribe();\n        switchSub.unsubscribe();\n      },\n    };\n  }\n\n  buildTimeseriesTitle() {\n    const profileMetricId = getSceneVariableValue(this, 'profileMetricId');\n    const { description } = getProfileMetric(profileMetricId as ProfileMetricId);\n    return description || getProfileMetricLabel(profileMetricId);\n  }\n\n  useDiffTimeRange() {\n    return (this.state.timeseriesPanel.state.body.state.$timeRange as SceneTimeRangeWithAnnotations).useState();\n  }\n\n  applyPreset({ from, to, diffFrom, diffTo, label }: Preset) {\n    this.setDiffRange(diffFrom, diffTo);\n\n    this.state.$timeRange.setState(buildTimeRange(from, to));\n\n    this.updateTitle(label);\n  }\n\n  setDiffRange(diffFrom: string, diffTo: string) {\n    const $diffTimeRange = this.state.timeseriesPanel.state.body.state.$timeRange as SceneTimeRangeWithAnnotations;\n\n    $diffTimeRange.setAnnotationTimeRange($diffTimeRange.buildAnnotationTimeRange(diffFrom, diffTo), true);\n  }\n\n  /**\n   * This function is responsible for automatically selecting half of the time range (from the time picker) that will be used to build the diff flame graph\n   * For the baseline panel, the leftmost part, for the comparison one, the rightmost part.\n   * In the future, we might want to be smarter and provides a way to select (e.g.) the region with the lowest resource consumption on the baseline panel vs\n   * the region with the highest consumption on the comparison panel.\n   */\n  autoSelectDiffRange(selectWholeRange: boolean) {\n    const { $timeRange, target } = this.state;\n    const { from, to } = $timeRange.state.value;\n\n    if (selectWholeRange) {\n      this.setDiffRange(from.toISOString(), to.toISOString());\n      return;\n    }\n\n    const diff = to.diff(from);\n\n    // ensure that we don't kill the backend when selecting long periods like 7d\n    const range = Math.min(Math.round(diff * 0.25), ONE_DAY_IN_MS);\n\n    if (target === CompareTarget.BASELINE) {\n      // we have to create a new instance because add() mutates the original one\n      this.setDiffRange(from.toISOString(), dateTime(from).add(range).toISOString());\n    } else {\n      // we have to create a new instance because subtract() mutates the original one\n      this.setDiffRange(dateTime(to).subtract(range).toISOString(), to.toISOString());\n    }\n  }\n\n  updateTitle(label = '') {\n    const title = this.state.target === CompareTarget.BASELINE ? 'Baseline' : 'Comparison';\n    const newTitle = label ? `${title} (${label})` : title;\n\n    this.setState({ title: newTitle });\n  }\n\n  public static Component = ({ model }: SceneComponentProps<SceneComparePanel>) => {\n    const {\n      target,\n      color,\n      title,\n      timeseriesPanel: timeseries,\n      timePicker,\n      refreshPicker,\n      filterKey,\n    } = model.useState();\n    const styles = useStyles2(getStyles, color);\n\n    const filtersVariable = sceneGraph.findByKey(model, filterKey) as FiltersVariable;\n\n    return (\n      <div className={styles.panel} data-testid={`panel-${target}`}>\n        <div className={styles.panelHeader}>\n          <h6>\n            <div className={styles.colorCircle} />\n            {title}\n          </h6>\n\n          <div className={styles.timePicker}>\n            <timePicker.Component model={timePicker} />\n            <refreshPicker.Component model={refreshPicker} />\n          </div>\n        </div>\n\n        <div className={styles.filter}>\n          <filtersVariable.Component model={filtersVariable} />\n        </div>\n\n        <div className={styles.timeseries}>{timeseries && <timeseries.Component model={timeseries} />}</div>\n      </div>\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2, color: string) => ({\n  panel: css`\n    background-color: ${theme.colors.background.primary};\n    padding: ${theme.spacing(1)} ${theme.spacing(1)} 0 ${theme.spacing(1)};\n    border: 1px solid ${theme.colors.border.weak};\n    border-radius: 2px;\n  `,\n  panelHeader: css`\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: ${theme.spacing(2)};\n    flex-wrap: wrap;\n\n    & > h6 {\n      font-size: 15px;\n      height: 32px;\n      line-height: 32px;\n      margin: 0 ${theme.spacing(1)} 0 0;\n    }\n  `,\n  colorCircle: css`\n    display: inline-block;\n    background-color: ${color};\n    border-radius: 50%;\n    width: 9px;\n    height: 9px;\n    margin-right: 6px;\n  `,\n  timePicker: css`\n    display: flex;\n    justify-content: flex-end;\n    gap: ${theme.spacing(1)};\n  `,\n  filter: css`\n    display: flex;\n    margin-bottom: ${theme.spacing(3)};\n  `,\n  timeseries: css`\n    height: 200px;\n\n    & [data-viz-panel-key] > * {\n      border: 0 none;\n    }\n\n    & [data-viz-panel-key] [data-testid='uplot-main-div'] {\n      cursor: crosshair;\n    }\n  `,\n});\n","import { useState } from 'react';\n\ntype PanelId = 'ai' | 'function-details' | null;\n\ntype OnOpenHandler = () => void;\n\ntype SidePanel = {\n  onOpen: (handler: OnOpenHandler) => void;\n  isOpen: (panelId: PanelId) => boolean;\n  open: (panelId: PanelId) => void;\n  close: () => void;\n};\n\nexport function useToggleSidePanel(): SidePanel {\n  const [openPanelId, setOpenPanelId] = useState<PanelId>(null);\n  const [onOpenHandler, setOnOpenHandler] = useState<OnOpenHandler>();\n\n  return {\n    onOpen(handler: OnOpenHandler) {\n      setOnOpenHandler(() => handler);\n    },\n    isOpen(panelId: PanelId) {\n      return panelId === openPanelId;\n    },\n    open(panelId: PanelId) {\n      setOpenPanelId(panelId);\n      onOpenHandler?.();\n    },\n    close() {\n      setOpenPanelId(null);\n    },\n  };\n}\n","// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const context = this.#currentResult.context;\n        if (action?.type === \"success\") {\n          this.#mutateOptions.onSuccess?.(action.data, variables, context);\n          this.#mutateOptions.onSettled?.(action.data, null, variables, context);\n        } else if (action?.type === \"error\") {\n          this.#mutateOptions.onError?.(action.error, variables, context);\n          this.#mutateOptions.onSettled?.(\n            void 0,\n            action.error,\n            variables,\n            context\n          );\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","export type PluginSettings = {\n  collapsedFlamegraphs: boolean;\n  maxNodes: number;\n  enableFlameGraphDotComExport: boolean;\n  enableFunctionDetails: boolean;\n};\n\nexport const DEFAULT_SETTINGS: PluginSettings = Object.freeze({\n  collapsedFlamegraphs: false,\n  maxNodes: 16384,\n  enableFlameGraphDotComExport: true,\n  enableFunctionDetails: true,\n});\n","import { ApiClient } from '../http/ApiClient';\nimport { PluginSettings } from './PluginSettings';\n\ntype ApiResponse = {\n  settings: Array<{ name: string; value: string }>;\n};\n\nclass SettingsApiClient extends ApiClient {\n  static PLUGIN_SETTING_NAME = 'pluginSettings';\n\n  async get(): Promise<PluginSettings> {\n    return super\n      .fetch('/settings.v1.SettingsService/Get', { method: 'POST', body: JSON.stringify({}) })\n      .then((response) => response.json())\n      .then((json: ApiResponse) => {\n        if (!json.settings) {\n          return {};\n        }\n\n        const setting = json.settings.find(({ name }) => name === SettingsApiClient.PLUGIN_SETTING_NAME);\n\n        if (!setting) {\n          throw new Error('Setting not found!');\n        }\n\n        return JSON.parse(setting.value);\n      });\n  }\n\n  async set(newSettings: PluginSettings) {\n    return super\n      .fetch('/settings.v1.SettingsService/Set', {\n        method: 'POST',\n        body: JSON.stringify({\n          setting: {\n            name: SettingsApiClient.PLUGIN_SETTING_NAME,\n            value: JSON.stringify(newSettings),\n          },\n        }),\n      })\n      .then((response) => response.json());\n  }\n}\n\nexport const settingsApiClient = new SettingsApiClient();\n","import { useMutation, useQuery } from '@tanstack/react-query';\n\nimport { DEFAULT_SETTINGS, PluginSettings } from './PluginSettings';\nimport { settingsApiClient } from './settingsApiClient';\n\ntype FetchParams = {\n  enabled?: boolean;\n};\n\ntype FetchResponse = {\n  isFetching: boolean;\n  error: Error | null;\n  settings?: PluginSettings;\n  mutate: (newSettings: PluginSettings) => Promise<void>;\n};\n\n/**\n * Fetches the plugin settings and, if none/only some have been stored previously, returns adequate default values for the rest of the application\n */\nexport function useFetchPluginSettings({ enabled }: FetchParams = {}): FetchResponse {\n  const { isFetching, error, data } = useQuery({\n    enabled,\n    queryKey: ['settings'],\n    queryFn: () =>\n      settingsApiClient.get().then(\n        (json) =>\n          // provide defaults if any value comes null or undefined from the API (which can be the case ;))\n          Object.keys(DEFAULT_SETTINGS).reduce((acc, key) => {\n            acc[key] ??= DEFAULT_SETTINGS[key as keyof PluginSettings]; // TS luv :man_shrug:\n            return acc;\n          }, json as Record<string, any>) as PluginSettings // TS luv :man_shrug:\n      ),\n  });\n\n  const { mutateAsync: mutate } = useMutation({\n    mutationFn: (newSettings: PluginSettings) => settingsApiClient.set(newSettings),\n    networkMode: 'always',\n  });\n\n  return {\n    isFetching,\n    error: settingsApiClient.isAbortError(error) ? null : error,\n    settings: data,\n    mutate,\n  };\n}\n","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport { MutationObserver, notifyManager } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { noop, shouldThrowError } from \"./utils.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","import { Alert, AlertVariant } from '@grafana/ui';\nimport { ErrorContext, logger } from '@shared/infrastructure/tracking/logger';\nimport React from 'react';\n\ntype InlineBannerProps = {\n  severity: AlertVariant;\n  title: string;\n  message?: string | React.ReactNode;\n  error?: Error;\n  errorContext?: ErrorContext;\n};\n\nexport function InlineBanner({ severity, title, message, error, errorContext }: InlineBannerProps) {\n  if (error) {\n    logger.error(error, errorContext);\n  }\n\n  return (\n    <Alert title={title} severity={severity}>\n      {error && (\n        <>\n          {error.message}\n          <br />\n        </>\n      )}\n      {message}\n    </Alert>\n  );\n}\n","const Components = {\n  RadioButton: {\n    container: \"data-testid radio-button\"\n  },\n  Breadcrumbs: {\n    breadcrumb: (title) => `data-testid ${title} breadcrumb`\n  },\n  TimePicker: {\n    openButton: \"data-testid TimePicker Open Button\",\n    overlayContent: \"data-testid TimePicker Overlay Content\",\n    fromField: \"data-testid Time Range from field\",\n    toField: \"data-testid Time Range to field\",\n    applyTimeRange: \"data-testid TimePicker submit button\",\n    copyTimeRange: \"data-testid TimePicker copy button\",\n    pasteTimeRange: \"data-testid TimePicker paste button\",\n    calendar: {\n      label: \"data-testid Time Range calendar\",\n      openButton: \"data-testid Open time range calendar\",\n      closeButton: \"data-testid Close time range Calendar\"\n    },\n    absoluteTimeRangeTitle: \"data-testid-absolute-time-range-narrow\"\n  },\n  DataSourcePermissions: {\n    form: () => 'form[name=\"addPermission\"]',\n    roleType: \"Role to add new permission to\",\n    rolePicker: \"Built-in role picker\",\n    permissionLevel: \"Permission Level\"\n  },\n  DateTimePicker: {\n    input: \"data-testid date-time-input\"\n  },\n  DataSource: {\n    TestData: {\n      QueryTab: {\n        scenarioSelectContainer: \"Test Data Query scenario select container\",\n        scenarioSelect: \"Test Data Query scenario select\",\n        max: \"TestData max\",\n        min: \"TestData min\",\n        noise: \"TestData noise\",\n        seriesCount: \"TestData series count\",\n        spread: \"TestData spread\",\n        startValue: \"TestData start value\",\n        drop: \"TestData drop values\"\n      }\n    },\n    DataSourceHttpSettings: {\n      urlInput: \"data-testid Datasource HTTP settings url\"\n    },\n    Jaeger: {\n      traceIDInput: \"Trace ID\"\n    },\n    Prometheus: {\n      configPage: {\n        connectionSettings: \"Data source connection URL\",\n        // aria-label in grafana experimental\n        manageAlerts: \"prometheus-alerts-manager\",\n        // id for switch component\n        scrapeInterval: \"data-testid scrape interval\",\n        queryTimeout: \"data-testid query timeout\",\n        defaultEditor: \"data-testid default editor\",\n        disableMetricLookup: \"disable-metric-lookup\",\n        // id for switch component\n        prometheusType: \"data-testid prometheus type\",\n        prometheusVersion: \"data-testid prometheus version\",\n        cacheLevel: \"data-testid cache level\",\n        incrementalQuerying: \"prometheus-incremental-querying\",\n        // id for switch component\n        queryOverlapWindow: \"data-testid query overlap window\",\n        disableRecordingRules: \"disable-recording-rules\",\n        // id for switch component\n        customQueryParameters: \"data-testid custom query parameters\",\n        httpMethod: \"data-testid http method\",\n        exemplarsAddButton: \"data-testid Add exemplar config button\",\n        internalLinkSwitch: \"data-testid Internal link switch\"\n      },\n      queryEditor: {\n        // kickstart: '', see QueryBuilder queryPatterns below\n        explain: \"data-testid prometheus explain switch wrapper\",\n        editorToggle: \"data-testid QueryEditorModeToggle\",\n        // wrapper for toggle\n        options: \"data-testid prometheus options\",\n        // wrapper for options group\n        legend: \"data-testid prometheus legend wrapper\",\n        // wrapper for multiple compomnents\n        format: \"data-testid prometheus format\",\n        step: \"prometheus-step\",\n        // id for autosize component\n        type: \"data-testid prometheus type\",\n        //wrapper for radio button group\n        exemplars: \"prometheus-exemplars\",\n        // id for editor switch component\n        builder: {\n          // see QueryBuilder below for commented selectors\n          // labelSelect: 'data-testid Select label',\n          // valueSelect: 'data-testid Select value',\n          // matchOperatorSelect: 'data-testid Select match operator',\n          metricSelect: \"data-testid metric select\",\n          hints: \"data-testid prometheus hints\",\n          // wrapper for hints component\n          metricsExplorer: \"data-testid metrics explorer\",\n          queryAdvisor: \"data-testid query advisor\"\n        },\n        code: {\n          queryField: \"data-testid prometheus query field\",\n          metricsBrowser: {\n            openButton: \"data-testid open metrics browser\",\n            selectMetric: \"data-testid select a metric\",\n            metricList: \"data-testid metric list\",\n            labelNamesFilter: \"data-testid label names filter\",\n            labelValuesFilter: \"data-testid label values filter\",\n            useQuery: \"data-testid use query\",\n            useAsRateQuery: \"data-testid use as rate query\",\n            validateSelector: \"data-testid validate selector\",\n            clear: \"data-testid clear\"\n          }\n        }\n      },\n      exemplarMarker: \"data-testid Exemplar marker\",\n      variableQueryEditor: {\n        queryType: \"data-testid query type\",\n        labelnames: {\n          metricRegex: \"data-testid label names metric regex\"\n        },\n        labelValues: {\n          labelSelect: \"data-testid label values label select\"\n          // metric select see queryEditor: builder for more context\n          // label select for metric filtering see queryEditor: builder for more context\n        },\n        metricNames: {\n          metricRegex: \"data-testid metric names metric regex\"\n        },\n        varQueryResult: \"data-testid variable query result\",\n        seriesQuery: \"data-testid prometheus series query\",\n        classicQuery: \"data-testid prometheus classic query\"\n      },\n      annotations: {\n        minStep: \"prometheus-annotation-min-step\",\n        // id for autosize input\n        title: \"data-testid prometheus annotation title\",\n        tags: \"data-testid prometheus annotation tags\",\n        text: \"data-testid prometheus annotation text\",\n        seriesValueAsTimestamp: \"data-testid prometheus annotation series value as timestamp\"\n      }\n    }\n  },\n  Menu: {\n    MenuComponent: (title) => `${title} menu`,\n    MenuGroup: (title) => `${title} menu group`,\n    MenuItem: (title) => `${title} menu item`,\n    SubMenu: {\n      container: \"data-testid SubMenu container\",\n      icon: \"data-testid SubMenu icon\"\n    }\n  },\n  Panels: {\n    Panel: {\n      title: (title) => `data-testid Panel header ${title}`,\n      headerItems: (item) => `data-testid Panel header item ${item}`,\n      menuItems: (item) => `data-testid Panel menu item ${item}`,\n      menu: (title) => `data-testid Panel menu ${title}`,\n      containerByTitle: (title) => `${title} panel`,\n      headerCornerInfo: (mode) => `Panel header ${mode}`,\n      status: (status) => `data-testid Panel status ${status}`,\n      loadingBar: () => `Panel loading bar`,\n      HoverWidget: {\n        container: \"data-testid hover-header-container\",\n        dragIcon: \"data-testid drag-icon\"\n      },\n      PanelDataErrorMessage: \"data-testid Panel data error message\"\n    },\n    Visualization: {\n      Graph: {\n        container: \"Graph container\",\n        VisualizationTab: {\n          legendSection: \"Legend section\"\n        },\n        Legend: {\n          legendItemAlias: (name) => `gpl alias ${name}`,\n          showLegendSwitch: \"gpl show legend\"\n        },\n        xAxis: {\n          labels: () => \"div.flot-x-axis > div.flot-tick-label\"\n        }\n      },\n      BarGauge: {\n        /**\n         * @deprecated use valueV2 from Grafana 8.3 instead\n         */\n        value: \"Bar gauge value\",\n        valueV2: \"data-testid Bar gauge value\"\n      },\n      PieChart: {\n        svgSlice: \"data testid Pie Chart Slice\"\n      },\n      Text: {\n        container: () => \".markdown-html\"\n      },\n      Table: {\n        header: \"table header\",\n        footer: \"table-footer\",\n        body: \"data-testid table body\"\n      }\n    }\n  },\n  VizLegend: {\n    seriesName: (name) => `data-testid VizLegend series ${name}`\n  },\n  Drawer: {\n    General: {\n      title: (title) => `Drawer title ${title}`,\n      expand: \"Drawer expand\",\n      contract: \"Drawer contract\",\n      close: \"data-testid Drawer close\",\n      rcContentWrapper: () => \".rc-drawer-content-wrapper\",\n      subtitle: \"data-testid drawer subtitle\"\n    }\n  },\n  PanelEditor: {\n    General: {\n      content: \"Panel editor content\"\n    },\n    OptionsPane: {\n      content: \"Panel editor option pane content\",\n      select: \"Panel editor option pane select\",\n      fieldLabel: (type) => `${type} field property editor`\n    },\n    // not sure about the naming *DataPane*\n    DataPane: {\n      content: \"Panel editor data pane content\"\n    },\n    applyButton: \"data-testid Apply changes and go back to dashboard\",\n    toggleVizPicker: \"data-testid toggle-viz-picker\",\n    toggleVizOptions: \"data-testid toggle-viz-options\",\n    toggleTableView: \"toggle-table-view\",\n    // [Geomap] Map controls\n    showZoomField: \"Map controls Show zoom control field property editor\",\n    showAttributionField: \"Map controls Show attribution field property editor\",\n    showScaleField: \"Map controls Show scale field property editor\",\n    showMeasureField: \"Map controls Show measure tools field property editor\",\n    showDebugField: \"Map controls Show debug field property editor\",\n    measureButton: \"show measure tools\"\n  },\n  PanelInspector: {\n    Data: {\n      content: \"Panel inspector Data content\"\n    },\n    Stats: {\n      content: \"Panel inspector Stats content\"\n    },\n    Json: {\n      content: \"Panel inspector Json content\"\n    },\n    Query: {\n      content: \"Panel inspector Query content\",\n      refreshButton: \"Panel inspector Query refresh button\",\n      jsonObjectKeys: () => \".json-formatter-key\"\n    }\n  },\n  Tab: {\n    title: (title) => `Tab ${title}`,\n    active: () => '[class*=\"-activeTabStyle\"]'\n  },\n  RefreshPicker: {\n    /**\n     * @deprecated use runButtonV2 from Grafana 8.3 instead\n     */\n    runButton: \"RefreshPicker run button\",\n    /**\n     * @deprecated use intervalButtonV2 from Grafana 8.3 instead\n     */\n    intervalButton: \"RefreshPicker interval button\",\n    runButtonV2: \"data-testid RefreshPicker run button\",\n    intervalButtonV2: \"data-testid RefreshPicker interval button\"\n  },\n  QueryTab: {\n    content: \"Query editor tab content\",\n    queryInspectorButton: \"Query inspector button\",\n    queryHistoryButton: \"data-testid query-history-button\",\n    addQuery: \"data-testid query-tab-add-query\"\n  },\n  QueryHistory: {\n    queryText: \"Query text\"\n  },\n  QueryEditorRows: {\n    rows: \"Query editor row\"\n  },\n  QueryEditorRow: {\n    actionButton: (title) => `data-testid ${title}`,\n    title: (refId) => `Query editor row title ${refId}`,\n    container: (refId) => `Query editor row ${refId}`\n  },\n  AlertTab: {\n    content: \"data-testid Alert editor tab content\"\n  },\n  Alert: {\n    /**\n     * @deprecated use alertV2 from Grafana 8.3 instead\n     */\n    alert: (severity) => `Alert ${severity}`,\n    alertV2: (severity) => `data-testid Alert ${severity}`\n  },\n  TransformTab: {\n    content: \"data-testid Transform editor tab content\",\n    newTransform: (name) => `data-testid New transform ${name}`,\n    transformationEditor: (name) => `data-testid Transformation editor ${name}`,\n    transformationEditorDebugger: (name) => `data-testid Transformation editor debugger ${name}`\n  },\n  Transforms: {\n    card: (name) => `data-testid New transform ${name}`,\n    disableTransformationButton: \"data-testid Disable transformation button\",\n    Reduce: {\n      modeLabel: \"data-testid Transform mode label\",\n      calculationsLabel: \"data-testid Transform calculations label\"\n    },\n    SpatialOperations: {\n      actionLabel: \"root Action field property editor\",\n      locationLabel: \"root Location Mode field property editor\",\n      location: {\n        autoOption: \"Auto location option\",\n        coords: {\n          option: \"Coords location option\",\n          latitudeFieldLabel: \"root Latitude field field property editor\",\n          longitudeFieldLabel: \"root Longitude field field property editor\"\n        },\n        geohash: {\n          option: \"Geohash location option\",\n          geohashFieldLabel: \"root Geohash field field property editor\"\n        },\n        lookup: {\n          option: \"Lookup location option\",\n          lookupFieldLabel: \"root Lookup field field property editor\",\n          gazetteerFieldLabel: \"root Gazetteer field property editor\"\n        }\n      }\n    },\n    searchInput: \"data-testid search transformations\",\n    noTransformationsMessage: \"data-testid no transformations message\",\n    addTransformationButton: \"data-testid add transformation button\",\n    removeAllTransformationsButton: \"data-testid remove all transformations button\"\n  },\n  NavBar: {\n    Configuration: {\n      button: \"Configuration\"\n    },\n    Toggle: {\n      button: \"data-testid Toggle menu\"\n    },\n    Reporting: {\n      button: \"Reporting\"\n    }\n  },\n  NavMenu: {\n    Menu: \"data-testid navigation mega-menu\",\n    item: \"data-testid Nav menu item\"\n  },\n  NavToolbar: {\n    container: \"data-testid Nav toolbar\"\n  },\n  PageToolbar: {\n    container: () => \".page-toolbar\",\n    item: (tooltip) => `${tooltip}`,\n    itemButton: (title) => `data-testid ${title}`\n  },\n  QueryEditorToolbarItem: {\n    button: (title) => `QueryEditor toolbar item button ${title}`\n  },\n  BackButton: {\n    backArrow: \"data-testid Go Back\"\n  },\n  OptionsGroup: {\n    group: (title) => title ? `Options group ${title}` : \"Options group\",\n    toggle: (title) => title ? `Options group ${title} toggle` : \"Options group toggle\"\n  },\n  PluginVisualization: {\n    item: (title) => `Plugin visualization item ${title}`,\n    current: () => '[class*=\"-currentVisualizationItem\"]'\n  },\n  Select: {\n    option: \"Select option\",\n    input: () => 'input[id*=\"time-options-input\"]',\n    singleValue: () => 'div[class*=\"-singleValue\"]'\n  },\n  FieldConfigEditor: {\n    content: \"Field config editor content\"\n  },\n  OverridesConfigEditor: {\n    content: \"Field overrides editor content\"\n  },\n  FolderPicker: {\n    /**\n     * @deprecated use containerV2 from Grafana 8.3 instead\n     */\n    container: \"Folder picker select container\",\n    containerV2: \"data-testid Folder picker select container\",\n    input: \"data-testid folder-picker-input\"\n  },\n  ReadonlyFolderPicker: {\n    container: \"data-testid Readonly folder picker select container\"\n  },\n  DataSourcePicker: {\n    container: \"data-testid Data source picker select container\",\n    /**\n     * @deprecated use inputV2 instead\n     */\n    input: () => 'input[id=\"data-source-picker\"]',\n    inputV2: \"data-testid Select a data source\",\n    dataSourceList: \"data-testid Data source list dropdown\",\n    advancedModal: {\n      dataSourceList: \"data-testid Data source list\",\n      builtInDataSourceList: \"data-testid Built in data source list\"\n    }\n  },\n  TimeZonePicker: {\n    /**\n     * @deprecated use TimeZonePicker.containerV2 from Grafana 8.3 instead\n     */\n    container: \"Time zone picker select container\",\n    containerV2: \"data-testid Time zone picker select container\"\n  },\n  WeekStartPicker: {\n    /**\n     * @deprecated use WeekStartPicker.containerV2 from Grafana 8.3 instead\n     */\n    container: \"Choose starting day of the week\",\n    containerV2: \"data-testid Choose starting day of the week\",\n    placeholder: \"Choose starting day of the week\"\n  },\n  TraceViewer: {\n    spanBar: \"data-testid SpanBar--wrapper\"\n  },\n  QueryField: { container: \"data-testid Query field\" },\n  QueryBuilder: {\n    queryPatterns: \"data-testid Query patterns\",\n    labelSelect: \"data-testid Select label\",\n    valueSelect: \"data-testid Select value\",\n    matchOperatorSelect: \"data-testid Select match operator\"\n  },\n  ValuePicker: {\n    button: (name) => `data-testid Value picker button ${name}`,\n    select: (name) => `data-testid Value picker select ${name}`\n  },\n  Search: {\n    /**\n     * @deprecated use sectionV2 from Grafana 8.3 instead\n     */\n    section: \"Search section\",\n    sectionV2: \"data-testid Search section\",\n    /**\n     * @deprecated use itemsV2 from Grafana 8.3 instead\n     */\n    items: \"Search items\",\n    itemsV2: \"data-testid Search items\",\n    cards: \"data-testid Search cards\",\n    collapseFolder: (sectionId) => `data-testid Collapse folder ${sectionId}`,\n    expandFolder: (sectionId) => `data-testid Expand folder ${sectionId}`,\n    dashboardItem: (item) => `${Components.Search.dashboardItems} ${item}`,\n    dashboardCard: (item) => `data-testid Search card ${item}`,\n    folderHeader: (folderName) => `data-testid Folder header ${folderName}`,\n    folderContent: (folderName) => `data-testid Folder content ${folderName}`,\n    dashboardItems: \"data-testid Dashboard search item\"\n  },\n  DashboardLinks: {\n    container: \"data-testid Dashboard link container\",\n    dropDown: \"data-testid Dashboard link dropdown\",\n    link: \"data-testid Dashboard link\"\n  },\n  LoadingIndicator: {\n    icon: \"data-testid Loading indicator\"\n  },\n  CallToActionCard: {\n    /**\n     * @deprecated use buttonV2 from Grafana 8.3 instead\n     */\n    button: (name) => `Call to action button ${name}`,\n    buttonV2: (name) => `data-testid Call to action button ${name}`\n  },\n  DataLinksContextMenu: {\n    singleLink: \"data-testid Data link\"\n  },\n  CodeEditor: {\n    container: \"data-testid Code editor container\"\n  },\n  DashboardImportPage: {\n    textarea: \"data-testid-import-dashboard-textarea\",\n    submit: \"data-testid-load-dashboard\"\n  },\n  ImportDashboardForm: {\n    name: \"data-testid-import-dashboard-title\",\n    submit: \"data-testid-import-dashboard-submit\"\n  },\n  PanelAlertTabContent: {\n    content: \"data-testid Unified alert editor tab content\"\n  },\n  VisualizationPreview: {\n    card: (name) => `data-testid suggestion-${name}`\n  },\n  ColorSwatch: {\n    name: `data-testid-colorswatch`\n  },\n  DashboardRow: {\n    title: (title) => `data-testid dashboard-row-title-${title}`\n  },\n  UserProfile: {\n    profileSaveButton: \"data-testid-user-profile-save\",\n    preferencesSaveButton: \"data-testid-shared-prefs-save\",\n    orgsTable: \"data-testid-user-orgs-table\",\n    sessionsTable: \"data-testid-user-sessions-table\",\n    extensionPointTabs: \"data-testid-extension-point-tabs\",\n    extensionPointTab: (tabId) => `data-testid-extension-point-tab-${tabId}`\n  },\n  FileUpload: {\n    inputField: \"data-testid-file-upload-input-field\",\n    fileNameSpan: \"data-testid-file-upload-file-name\"\n  },\n  DebugOverlay: {\n    wrapper: \"debug-overlay\"\n  },\n  OrgRolePicker: {\n    input: \"Role\"\n  },\n  AnalyticsToolbarButton: {\n    button: \"Dashboard insights\"\n  },\n  Variables: {\n    variableOption: \"data-testid variable-option\"\n  },\n  Annotations: {\n    annotationsTypeInput: \"annotations-type-input\",\n    annotationsChoosePanelInput: \"choose-panels-input\"\n  },\n  Tooltip: {\n    container: \"data-testid tooltip\"\n  }\n};\n\nexport { Components };\n//# sourceMappingURL=components.js.map\n","import { Components } from './components.js';\nexport { Components } from './components.js';\nimport { Pages } from './pages.js';\nexport { Pages } from './pages.js';\n\nconst selectors = {\n  pages: Pages,\n  components: Components\n};\n\nexport { selectors };\n//# sourceMappingURL=index.js.map\n","import { Components } from './components.js';\n\nconst Pages = {\n  Login: {\n    url: \"/login\",\n    username: \"data-testid Username input field\",\n    password: \"data-testid Password input field\",\n    submit: \"data-testid Login button\",\n    skip: \"data-testid Skip change password button\"\n  },\n  Home: {\n    url: \"/\"\n  },\n  DataSource: {\n    name: \"data-testid Data source settings page name input field\",\n    delete: \"Data source settings page Delete button\",\n    readOnly: \"data-testid Data source settings page read only message\",\n    saveAndTest: \"data-testid Data source settings page Save and Test button\",\n    alert: \"data-testid Data source settings page Alert\"\n  },\n  DataSources: {\n    url: \"/datasources\",\n    dataSources: (dataSourceName) => `Data source list item ${dataSourceName}`\n  },\n  EditDataSource: {\n    url: (dataSourceUid) => `/datasources/edit/${dataSourceUid}`,\n    settings: \"Datasource settings page basic settings\"\n  },\n  AddDataSource: {\n    url: \"/datasources/new\",\n    /** @deprecated Use dataSourcePluginsV2 */\n    dataSourcePlugins: (pluginName) => `Data source plugin item ${pluginName}`,\n    dataSourcePluginsV2: (pluginName) => `Add new data source ${pluginName}`\n  },\n  ConfirmModal: {\n    delete: \"data-testid Confirm Modal Danger Button\"\n  },\n  AddDashboard: {\n    url: \"/dashboard/new\",\n    itemButton: (title) => `data-testid ${title}`,\n    addNewPanel: \"Add new panel\",\n    addNewRow: \"Add new row\",\n    addNewPanelLibrary: \"Add new panel from panel library\"\n  },\n  Dashboard: {\n    url: (uid) => `/d/${uid}`,\n    DashNav: {\n      /**\n       * @deprecated use navV2 from Grafana 8.3 instead\n       */\n      nav: \"Dashboard navigation\",\n      navV2: \"data-testid Dashboard navigation\",\n      publicDashboardTag: \"data-testid public dashboard tag\",\n      shareButton: \"data-testid share-button\"\n    },\n    SubMenu: {\n      submenu: \"Dashboard submenu\",\n      submenuItem: \"data-testid template variable\",\n      submenuItemLabels: (item) => `data-testid Dashboard template variables submenu Label ${item}`,\n      submenuItemValueDropDownValueLinkTexts: (item) => `data-testid Dashboard template variables Variable Value DropDown value link text ${item}`,\n      submenuItemValueDropDownDropDown: \"Variable options\",\n      submenuItemValueDropDownOptionTexts: (item) => `data-testid Dashboard template variables Variable Value DropDown option text ${item}`,\n      Annotations: {\n        annotationsWrapper: \"data-testid annotation-wrapper\",\n        annotationLabel: (label) => `data-testid Dashboard annotations submenu Label ${label}`,\n        annotationToggle: (label) => `data-testid Dashboard annotations submenu Toggle ${label}`\n      }\n    },\n    Settings: {\n      Actions: {\n        close: \"data-testid dashboard-settings-close\"\n      },\n      General: {\n        deleteDashBoard: \"Dashboard settings page delete dashboard button\",\n        sectionItems: (item) => `Dashboard settings section item ${item}`,\n        saveDashBoard: \"Dashboard settings aside actions Save button\",\n        saveAsDashBoard: \"Dashboard settings aside actions Save As button\",\n        /**\n         * @deprecated use components.TimeZonePicker.containerV2 from Grafana 8.3 instead\n         */\n        timezone: \"Time zone picker select container\",\n        title: \"Tab General\"\n      },\n      Annotations: {\n        List: {\n          /**\n           * @deprecated use addAnnotationCTAV2 from Grafana 8.3 instead\n           */\n          addAnnotationCTA: Components.CallToActionCard.button(\"Add annotation query\"),\n          addAnnotationCTAV2: Components.CallToActionCard.buttonV2(\"Add annotation query\"),\n          annotations: \"data-testid list-annotations\"\n        },\n        Settings: {\n          name: \"Annotations settings name input\"\n        },\n        NewAnnotation: {\n          panelFilterSelect: \"data-testid annotations-panel-filter\",\n          showInLabel: \"show-in-label\",\n          previewInDashboard: \"data-testid annotations-preview\",\n          delete: \"data-testid annotations-delete\",\n          apply: \"data-testid annotations-apply\",\n          enable: \"data-testid annotation-enable\",\n          hide: \"data-testid annotation-hide\"\n        }\n      },\n      Variables: {\n        List: {\n          /**\n           * @deprecated use addVariableCTAV2 from Grafana 8.3 instead\n           */\n          addVariableCTA: Components.CallToActionCard.button(\"Add variable\"),\n          addVariableCTAV2: Components.CallToActionCard.buttonV2(\"Add variable\"),\n          newButton: \"Variable editor New variable button\",\n          table: \"Variable editor Table\",\n          tableRowNameFields: (variableName) => `Variable editor Table Name field ${variableName}`,\n          tableRowDefinitionFields: (variableName) => `Variable editor Table Definition field ${variableName}`,\n          tableRowArrowUpButtons: (variableName) => `Variable editor Table ArrowUp button ${variableName}`,\n          tableRowArrowDownButtons: (variableName) => `Variable editor Table ArrowDown button ${variableName}`,\n          tableRowDuplicateButtons: (variableName) => `Variable editor Table Duplicate button ${variableName}`,\n          tableRowRemoveButtons: (variableName) => `Variable editor Table Remove button ${variableName}`\n        },\n        Edit: {\n          General: {\n            headerLink: \"Variable editor Header link\",\n            modeLabelNew: \"Variable editor Header mode New\",\n            /**\n             * @deprecated\n             */\n            modeLabelEdit: \"Variable editor Header mode Edit\",\n            generalNameInput: \"Variable editor Form Name field\",\n            generalNameInputV2: \"data-testid Variable editor Form Name field\",\n            generalTypeSelect: \"Variable editor Form Type select\",\n            generalTypeSelectV2: \"data-testid Variable editor Form Type select\",\n            generalLabelInput: \"Variable editor Form Label field\",\n            generalLabelInputV2: \"data-testid Variable editor Form Label field\",\n            generalHideSelect: \"Variable editor Form Hide select\",\n            generalHideSelectV2: \"data-testid Variable editor Form Hide select\",\n            selectionOptionsMultiSwitch: \"data-testid Variable editor Form Multi switch\",\n            selectionOptionsIncludeAllSwitch: \"data-testid Variable editor Form IncludeAll switch\",\n            selectionOptionsCustomAllInput: \"data-testid Variable editor Form IncludeAll field\",\n            previewOfValuesOption: \"data-testid Variable editor Preview of Values option\",\n            submitButton: \"data-testid Variable editor Run Query button\",\n            applyButton: \"data-testid Variable editor Apply button\"\n          },\n          QueryVariable: {\n            queryOptionsDataSourceSelect: Components.DataSourcePicker.inputV2,\n            queryOptionsRefreshSelect: \"Variable editor Form Query Refresh select\",\n            queryOptionsRefreshSelectV2: \"data-testid Variable editor Form Query Refresh select\",\n            queryOptionsRegExInput: \"Variable editor Form Query RegEx field\",\n            queryOptionsRegExInputV2: \"data-testid Variable editor Form Query RegEx field\",\n            queryOptionsSortSelect: \"Variable editor Form Query Sort select\",\n            queryOptionsSortSelectV2: \"data-testid Variable editor Form Query Sort select\",\n            queryOptionsQueryInput: \"data-testid Variable editor Form Default Variable Query Editor textarea\",\n            valueGroupsTagsEnabledSwitch: \"Variable editor Form Query UseTags switch\",\n            valueGroupsTagsTagsQueryInput: \"Variable editor Form Query TagsQuery field\",\n            valueGroupsTagsTagsValuesQueryInput: \"Variable editor Form Query TagsValuesQuery field\"\n          },\n          ConstantVariable: {\n            constantOptionsQueryInput: \"Variable editor Form Constant Query field\",\n            constantOptionsQueryInputV2: \"data-testid Variable editor Form Constant Query field\"\n          },\n          DatasourceVariable: {\n            datasourceSelect: \"data-testid datasource variable datasource type\"\n          },\n          TextBoxVariable: {\n            textBoxOptionsQueryInput: \"Variable editor Form TextBox Query field\",\n            textBoxOptionsQueryInputV2: \"data-testid Variable editor Form TextBox Query field\"\n          },\n          CustomVariable: {\n            customValueInput: \"data-testid custom-variable-input\"\n          },\n          IntervalVariable: {\n            intervalsValueInput: \"data-testid interval variable intervals input\",\n            autoEnabledCheckbox: \"data-testid interval variable auto value checkbox\",\n            stepCountIntervalSelect: \"data-testid interval variable step count input\",\n            minIntervalInput: \"data-testid interval variable mininum interval input\"\n          },\n          GroupByVariable: {\n            dataSourceSelect: Components.DataSourcePicker.inputV2,\n            infoText: \"data-testid group by variable info text\",\n            modeToggle: \"data-testid group by variable mode toggle\"\n          },\n          AdHocFiltersVariable: {\n            datasourceSelect: Components.DataSourcePicker.inputV2,\n            infoText: \"data-testid ad-hoc filters variable info text\"\n          }\n        }\n      }\n    },\n    Annotations: {\n      marker: \"data-testid annotation-marker\"\n    },\n    Rows: {\n      Repeated: {\n        ConfigSection: {\n          warningMessage: \"data-testid Repeated rows warning message\"\n        }\n      }\n    }\n  },\n  Dashboards: {\n    url: \"/dashboards\",\n    /**\n     * @deprecated use components.Search.dashboardItem from Grafana 8.3 instead\n     */\n    dashboards: (title) => `Dashboard search item ${title}`\n  },\n  SaveDashboardAsModal: {\n    newName: \"Save dashboard title field\",\n    save: \"Save dashboard button\"\n  },\n  SaveDashboardModal: {\n    save: \"Dashboard settings Save Dashboard Modal Save button\",\n    saveVariables: \"Dashboard settings Save Dashboard Modal Save variables checkbox\",\n    saveTimerange: \"Dashboard settings Save Dashboard Modal Save timerange checkbox\"\n  },\n  SharePanelModal: {\n    linkToRenderedImage: \"Link to rendered image\"\n  },\n  ShareDashboardModal: {\n    PublicDashboard: {\n      Tab: \"Tab Public dashboard\",\n      WillBePublicCheckbox: \"data-testid public dashboard will be public checkbox\",\n      LimitedDSCheckbox: \"data-testid public dashboard limited datasources checkbox\",\n      CostIncreaseCheckbox: \"data-testid public dashboard cost may increase checkbox\",\n      PauseSwitch: \"data-testid public dashboard pause switch\",\n      EnableAnnotationsSwitch: \"data-testid public dashboard on off switch for annotations\",\n      CreateButton: \"data-testid public dashboard create button\",\n      DeleteButton: \"data-testid public dashboard delete button\",\n      CopyUrlInput: \"data-testid public dashboard copy url input\",\n      CopyUrlButton: \"data-testid public dashboard copy url button\",\n      SettingsDropdown: \"data-testid public dashboard settings dropdown\",\n      TemplateVariablesWarningAlert: \"data-testid public dashboard disabled template variables alert\",\n      UnsupportedDataSourcesWarningAlert: \"data-testid public dashboard unsupported data sources alert\",\n      NoUpsertPermissionsWarningAlert: \"data-testid public dashboard no upsert permissions alert\",\n      EnableTimeRangeSwitch: \"data-testid public dashboard on off switch for time range\",\n      EmailSharingConfiguration: {\n        Container: \"data-testid email sharing config container\",\n        ShareType: \"data-testid public dashboard share type\",\n        EmailSharingInput: \"data-testid public dashboard email sharing input\",\n        EmailSharingInviteButton: \"data-testid public dashboard email sharing invite button\",\n        EmailSharingList: \"data-testid public dashboard email sharing list\",\n        DeleteEmail: \"data-testid public dashboard delete email button\",\n        ReshareLink: \"data-testid public dashboard reshare link button\"\n      }\n    }\n  },\n  PublicDashboard: {\n    page: \"public-dashboard-page\",\n    NotAvailable: {\n      container: \"public-dashboard-not-available\",\n      title: \"public-dashboard-title\",\n      pausedDescription: \"public-dashboard-paused-description\"\n    }\n  },\n  RequestViewAccess: {\n    form: \"request-view-access-form\",\n    recipientInput: \"request-view-access-recipient-input\",\n    submitButton: \"request-view-access-submit-button\"\n  },\n  PublicDashboardConfirmAccess: {\n    submitButton: \"data-testid confirm-access-submit-button\"\n  },\n  Explore: {\n    url: \"/explore\",\n    General: {\n      container: \"data-testid Explore\",\n      graph: \"Explore Graph\",\n      table: \"Explore Table\",\n      scrollView: \"data-testid explorer scroll view\"\n    }\n  },\n  SoloPanel: {\n    url: (page) => `/d-solo/${page}`\n  },\n  PluginsList: {\n    page: \"Plugins list page\",\n    list: \"Plugins list\",\n    listItem: \"Plugins list item\",\n    signatureErrorNotice: \"data-testid Unsigned plugins notice\"\n  },\n  PluginPage: {\n    page: \"Plugin page\",\n    signatureInfo: \"data-testid Plugin signature info\",\n    disabledInfo: \"data-testid Plugin disabled info\"\n  },\n  PlaylistForm: {\n    name: \"Playlist name\",\n    interval: \"Playlist interval\",\n    itemDelete: \"data-testid playlist-form-delete-item\"\n  },\n  BrowseDashboards: {\n    table: {\n      body: \"data-testid browse-dashboards-table\",\n      row: (name) => `data-testid browse dashboards row ${name}`,\n      checkbox: (uid) => `data-testid ${uid} checkbox`\n    },\n    NewFolderForm: {\n      form: \"data-testid new folder form\",\n      nameInput: \"data-testid new-folder-name-input\",\n      createButton: \"data-testid new-folder-create-button\"\n    }\n  },\n  Search: {\n    url: \"/?search=openn\",\n    FolderView: {\n      url: \"/?search=open&layout=folders\"\n    }\n  },\n  PublicDashboards: {\n    ListItem: {\n      linkButton: \"public-dashboard-link-button\",\n      configButton: \"public-dashboard-configuration-button\",\n      trashcanButton: \"public-dashboard-remove-button\",\n      pauseSwitch: \"data-testid public dashboard pause switch\"\n    }\n  },\n  UserListPage: {\n    tabs: {\n      allUsers: \"data-testid all-users-tab\",\n      orgUsers: \"data-testid org-users-tab\",\n      anonUserDevices: \"data-testid anon-user-devices-tab\",\n      publicDashboardsUsers: \"data-testid public-dashboards-users-tab\",\n      users: \"data-testid users-tab\"\n    },\n    org: {\n      url: \"/org/users\"\n    },\n    admin: {\n      url: \"/admin/users\"\n    },\n    publicDashboards: {\n      container: \"data-testid public-dashboards-users-list\"\n    },\n    UserListAdminPage: {\n      container: \"data-testid user-list-admin-page\"\n    },\n    UsersListPage: {\n      container: \"data-testid users-list-page\"\n    },\n    UserAnonListPage: {\n      container: \"data-testid user-anon-list-page\"\n    },\n    UsersListPublicDashboardsPage: {\n      container: \"data-testid users-list-public-dashboards-page\",\n      DashboardsListModal: {\n        listItem: (uid) => `data-testid dashboards-list-item-${uid}`\n      }\n    }\n  },\n  ProfilePage: {\n    url: \"/profile\"\n  }\n};\n\nexport { Pages };\n//# sourceMappingURL=pages.js.map\n","import React, { useEffect, useState } from 'react';\n\ninterface Props {\n  children: React.ReactNode;\n  delay: number;\n}\n\n/**\n * Delay the rendering of the children by N amount of milliseconds\n */\nexport function DelayRender({ children, delay }: Props) {\n  const [shouldRender, setShouldRender] = useState(false);\n  useEffect(() => {\n    window.setTimeout(() => {\n      setShouldRender(true);\n    }, delay);\n  }, [children, delay]);\n\n  return <>{shouldRender ? children : null}</>;\n}\n","import { cx } from '@emotion/css';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Dropdown, ToolbarButton } from '@grafana/ui';\nimport React, { ReactElement, useCallback } from 'react';\n\ntype TooltipPlacement =\n  | 'auto-start'\n  | 'auto'\n  | 'auto-end'\n  | 'top-start'\n  | 'top'\n  | 'top-end'\n  | 'right-start'\n  | 'right'\n  | 'right-end'\n  | 'bottom-end'\n  | 'bottom'\n  | 'bottom-start'\n  | 'left-end'\n  | 'left'\n  | 'left-start';\n\ninterface PanelMenuProps {\n  menu: ReactElement | (() => ReactElement);\n  menuButtonClass?: string;\n  dragClassCancel?: string;\n  title?: string;\n  placement?: TooltipPlacement;\n  offset?: [number, number];\n  onVisibleChange?: (state: boolean) => void;\n  onOpenMenu?: () => void;\n}\n\nexport function PanelMenu({\n  menu,\n  title,\n  placement = 'bottom',\n  offset,\n  dragClassCancel,\n  menuButtonClass,\n  onVisibleChange,\n  onOpenMenu,\n}: PanelMenuProps) {\n  const testId = title ? selectors.components.Panels.Panel.menu(title) : `panel-menu-button`;\n\n  const handleVisibility = useCallback(\n    (show: boolean) => {\n      if (show && onOpenMenu) {\n        onOpenMenu();\n      }\n      return onVisibleChange;\n    },\n    [onOpenMenu, onVisibleChange]\n  );\n\n  const label = title ? `Menu for panel with title ${title}` : `Menu for panel with no title`;\n\n  return (\n    <Dropdown overlay={menu} placement={placement} offset={offset} onVisibleChange={handleVisibility}>\n      <ToolbarButton\n        aria-label={label}\n        title=\"Menu\"\n        icon=\"ellipsis-v\"\n        iconSize=\"md\"\n        narrow\n        data-testid={testId}\n        className={cx(menuButtonClass, dragClassCancel)}\n      />\n    </Dropdown>\n  );\n}\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors as e2eSelectors } from '@grafana/e2e-selectors';\nimport { Icon, useStyles2 } from '@grafana/ui';\nimport React, { ReactElement, useCallback, useRef, useState } from 'react';\n\nimport { PanelMenu } from './PanelMenu';\n\ninterface Props {\n  children?: React.ReactNode;\n  menu?: ReactElement | (() => ReactElement);\n  title?: string;\n  offset?: number;\n  dragClass?: string;\n  onOpenMenu?: () => void;\n}\n\nexport function HoverWidget({ menu, title, dragClass, children, offset = -32, onOpenMenu }: Props) {\n  const styles = useStyles2(getStyles);\n  const draggableRef = useRef<HTMLDivElement>(null);\n  const selectors = e2eSelectors.components.Panels.Panel.HoverWidget;\n  // Capture the pointer to keep the widget visible while dragging\n  const onPointerDown = useCallback((e: React.PointerEvent<HTMLDivElement>) => {\n    draggableRef.current?.setPointerCapture(e.pointerId);\n  }, []);\n\n  const onPointerUp = useCallback((e: React.PointerEvent<HTMLDivElement>) => {\n    draggableRef.current?.releasePointerCapture(e.pointerId);\n  }, []);\n\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  if (children === undefined || React.Children.count(children) === 0) {\n    return null;\n  }\n\n  return (\n    <div\n      className={cx(styles.container, { 'show-on-hover': !menuOpen })}\n      style={{ top: `${offset}px` }}\n      data-testid={selectors.container}\n    >\n      {dragClass && (\n        <div\n          className={cx(styles.square, styles.draggable, dragClass)}\n          onPointerDown={onPointerDown}\n          onPointerUp={onPointerUp}\n          ref={draggableRef}\n          data-testid={selectors.dragIcon}\n        >\n          <Icon name=\"expand-arrows\" className={styles.draggableIcon} />\n        </div>\n      )}\n      {!title && <h6 className={cx(styles.untitled, { [styles.draggable]: !!dragClass }, dragClass)}>Untitled</h6>}\n      {children}\n      {menu && (\n        <PanelMenu\n          menu={menu}\n          title={title}\n          placement=\"bottom\"\n          menuButtonClass={styles.menuButton}\n          onVisibleChange={setMenuOpen}\n          onOpenMenu={onOpenMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    hidden: css({\n      visibility: 'hidden',\n      opacity: '0',\n    }),\n    container: css({\n      label: 'hover-container-widget',\n      transition: `all .1s linear`,\n      display: 'flex',\n      position: 'absolute',\n      zIndex: 1,\n      right: 0,\n      boxSizing: 'content-box',\n      alignItems: 'center',\n      background: theme.colors.background.secondary,\n      color: theme.colors.text.primary,\n      border: `1px solid ${theme.colors.border.weak}`,\n      borderRadius: theme.shape.radius.default,\n      height: theme.spacing(4),\n      boxShadow: theme.shadows.z1,\n    }),\n    square: css({\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      width: theme.spacing(4),\n      height: '100%',\n    }),\n    draggable: css({\n      cursor: 'move',\n      // mobile do not support draggable panels\n      [theme.breakpoints.down('md')]: {\n        display: 'none',\n      },\n    }),\n    menuButton: css({\n      // Background and border are overriden when topnav toggle is disabled\n      background: 'inherit',\n      border: 'none',\n      '&:hover': {\n        background: theme.colors.secondary.main,\n      },\n    }),\n    untitled: css({\n      color: theme.colors.text.disabled,\n      fontStyle: 'italic',\n      padding: theme.spacing(0, 1),\n      marginBottom: 0,\n    }),\n    draggableIcon: css({\n      transform: 'rotate(45deg)',\n      color: theme.colors.text.secondary,\n      '&:hover': {\n        color: theme.colors.text.primary,\n      },\n    }),\n  };\n}\n","import { css, CSSObject, cx } from '@emotion/css';\nimport { GrafanaTheme2, LinkModel, LinkTarget } from '@grafana/data';\nimport { Button, useStyles2 } from '@grafana/ui';\nimport React, { forwardRef } from 'react';\n\ntype TitleItemProps = {\n  className?: string;\n  children: React.ReactNode;\n  onClick?: LinkModel['onClick'];\n  href?: string;\n  target?: LinkTarget;\n  title?: string;\n};\n\ntype TitleItemElement = HTMLAnchorElement & HTMLButtonElement;\n\nexport const TitleItem = forwardRef<TitleItemElement, TitleItemProps>(\n  ({ className, children, href, onClick, target, title, ...rest }, ref) => {\n    const styles = useStyles2(getStyles);\n\n    if (href) {\n      return (\n        <a\n          ref={ref}\n          href={href}\n          onClick={onClick}\n          target={target}\n          title={title}\n          className={cx(styles.linkItem, className)}\n          {...rest}\n        >\n          {children}\n        </a>\n      );\n    } else if (onClick) {\n      return (\n        <Button ref={ref} className={cx(styles.item, className)} variant=\"secondary\" fill=\"text\" onClick={onClick}>\n          {children}\n        </Button>\n      );\n    } else {\n      return (\n        <span ref={ref} className={cx(styles.item, className)} {...rest}>\n          {children}\n        </span>\n      );\n    }\n  }\n);\n\nTitleItem.displayName = 'TitleItem';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  const item = css({\n    color: `${theme.colors.text.secondary}`,\n    label: 'panel-header-item',\n    cursor: 'auto',\n    border: 'none',\n    borderRadius: `${theme.shape.radius.default}`,\n    padding: `${theme.spacing(0, 1)}`,\n    height: `${theme.spacing(theme.components.panel.headerHeight)}`,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n\n    '&:focus, &:focus-visible': {\n      ...getFocusStyles(theme),\n      zIndex: 1,\n    },\n    '&: focus:not(:focus-visible)': {\n      outline: 'none',\n      boxShadow: `none`,\n    },\n\n    '&:hover ': {\n      boxShadow: `${theme.shadows.z1}`,\n      background: `${theme.colors.background.secondary}`,\n      color: `${theme.colors.text.primary}`,\n    },\n  });\n\n  return {\n    item,\n    linkItem: cx(item, css({ cursor: 'pointer' })),\n  };\n};\n\nfunction getFocusStyles(theme: GrafanaTheme2): CSSObject {\n  return {\n    outline: '2px dotted transparent',\n    outlineOffset: '2px',\n    boxShadow: `0 0 0 2px ${theme.colors.background.canvas}, 0 0 0px 4px ${theme.colors.primary.main}`,\n    transitionTimingFunction: `cubic-bezier(0.19, 1, 0.22, 1)`,\n    transitionDuration: '0.2s',\n    transitionProperty: 'outline, outline-offset, box-shadow',\n  };\n}\n","import { css, cx } from '@emotion/css';\nimport { Icon, Tooltip, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { TitleItem } from './TitleItem';\n\ninterface Props {\n  description: string | (() => string);\n  className?: string;\n}\n\nexport function PanelDescription({ description, className }: Props) {\n  const styles = useStyles2(getStyles);\n\n  const getDescriptionContent = () => {\n    const panelDescription = typeof description === 'function' ? description() : description;\n\n    return (\n      <div className=\"panel-info-content markdown-html\">\n        <div dangerouslySetInnerHTML={{ __html: panelDescription }} />\n      </div>\n    );\n  };\n\n  return description !== '' ? (\n    <Tooltip interactive content={getDescriptionContent}>\n      <TitleItem className={cx(className, styles.description)}>\n        <Icon name=\"info-circle\" size=\"md\" />\n      </TitleItem>\n    </Tooltip>\n  ) : null;\n}\n\nconst getStyles = () => {\n  return {\n    description: css({\n      code: {\n        whiteSpace: 'normal',\n        wordWrap: 'break-word',\n      },\n\n      'pre > code': {\n        display: 'block',\n      },\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { ToolbarButton, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\ninterface Props {\n  message?: string;\n  onClick?: (e: React.SyntheticEvent) => void;\n  ariaLabel?: string;\n}\n\nexport function PanelStatus({ message, onClick, ariaLabel = 'status' }: Props) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <ToolbarButton\n      className={styles.buttonStyles}\n      onClick={onClick}\n      variant={'destructive'}\n      icon=\"exclamation-triangle\"\n      iconSize=\"md\"\n      tooltip={message || ''}\n      aria-label={ariaLabel}\n    />\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  const { headerHeight, padding } = theme.components.panel;\n\n  return {\n    buttonStyles: css({\n      label: 'panel-header-state-button',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      padding: theme.spacing(padding),\n      width: theme.spacing(headerHeight),\n      height: theme.spacing(headerHeight),\n      borderRadius: theme.shape.radius.default,\n    }),\n  };\n};\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2, LoadingState } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Icon, LoadingBar, Tooltip, useStyles2, useTheme2 } from '@grafana/ui';\nimport React, { CSSProperties, ReactElement, ReactNode, useEffect, useRef, useState } from 'react';\n\nimport { DelayRender } from './DelayRender';\nimport { HoverWidget } from './HoverWidget';\nimport { PanelDescription } from './PanelDescription';\nimport { PanelMenu } from './PanelMenu';\nimport { PanelStatus } from './PanelStatus';\nimport { TitleItem } from './TitleItem';\n\n// This `GrafanaPanelBox` has been derived from the `PanelChrome`, which is exportable via @grafana/ui\n// This variant makes it behave more like the panel/box from Pyroscope, where css dictates the style\n// versus explicit height & width props.\n// The various files in this subdirectory are lifted from grafana/grafana, but this base component, `PanelChromeProps`\n// has been altered slightly.\n//\n// TODO Consider creating a varation of this component that can be exported from @grafana/ui.\n\n/**\n * @internal\n */\ninterface PanelChromeProps {\n  children: ReactNode;\n  padding?: PanelPadding;\n  hoverHeaderOffset?: number;\n  title?: string;\n  description?: string | (() => string);\n  titleItems?: ReactNode;\n  menu?: ReactElement | (() => ReactElement);\n  dragClass?: string;\n  dragClassCancel?: string;\n  hoverHeader?: boolean;\n  /**\n   * Use only to indicate loading or streaming data in the panel.\n   * Any other values of loadingState are ignored.\n   */\n  loadingState?: LoadingState;\n  /**\n   * Used to display status message (used for panel errors currently)\n   */\n  statusMessage?: string;\n  /**\n   * Handle opening error details view (like inspect / error tab)\n   */\n  statusMessageOnClick?: (e: React.SyntheticEvent) => void;\n  actions?: ReactNode;\n  displayMode?: 'default' | 'transparent';\n  onCancelQuery?: () => void;\n  /**\n   * callback when opening the panel menu\n   */\n  onOpenMenu?: () => void;\n}\n\n/**\n * @internal\n */\ntype PanelPadding = 'none' | 'md';\n\n/**\n * @internal\n */\nexport function GrafanaPanelBox({\n  children,\n  padding = 'md',\n  title = '',\n  description = '',\n  displayMode = 'default',\n  titleItems,\n  menu,\n  dragClass,\n  dragClassCancel,\n  hoverHeader = false,\n  hoverHeaderOffset,\n  loadingState,\n  statusMessage,\n  statusMessageOnClick,\n  actions,\n  onCancelQuery,\n  onOpenMenu,\n}: PanelChromeProps) {\n  const theme = useTheme2();\n  const styles = useStyles2(getStyles);\n\n  const [width, setWidth] = useState(0);\n  const childrenContainerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (childrenContainerRef.current) {\n      setWidth(childrenContainerRef.current.offsetWidth);\n    }\n  }, [childrenContainerRef]);\n\n  const hasHeader = !hoverHeader;\n\n  // hover menu is only shown on hover when not on touch devices\n  const showOnHoverClass = 'show-on-hover';\n\n  const headerHeight = getHeaderHeight(theme, hasHeader);\n  const { contentStyle } = getContentStyle(padding, theme);\n\n  const headerStyles: CSSProperties = {\n    height: headerHeight,\n    cursor: dragClass ? 'move' : 'auto',\n  };\n\n  const containerStyles: CSSProperties = {};\n  if (displayMode === 'transparent') {\n    containerStyles.backgroundColor = 'transparent';\n    containerStyles.border = 'none';\n  }\n\n  const testid = title ? selectors.components.Panels.Panel.title(title) : 'Panel';\n\n  const headerContent = (\n    <>\n      {title && (\n        <h6 title={title} className={styles.title}>\n          {title}\n        </h6>\n      )}\n\n      <div className={cx(styles.titleItems, dragClassCancel)} data-testid=\"title-items-container\">\n        <PanelDescription description={description} className={dragClassCancel} />\n        {titleItems}\n      </div>\n\n      {loadingState === LoadingState.Streaming && (\n        <Tooltip content={onCancelQuery ? 'Stop streaming' : 'Streaming'}>\n          <TitleItem className={dragClassCancel} data-testid=\"panel-streaming\" onClick={onCancelQuery}>\n            <Icon name=\"circle-mono\" size=\"md\" className={styles.streaming} />\n          </TitleItem>\n        </Tooltip>\n      )}\n      {loadingState === LoadingState.Loading && onCancelQuery && (\n        <DelayRender delay={2000}>\n          <Tooltip content=\"Cancel query\">\n            <TitleItem\n              className={cx(dragClassCancel, styles.pointer)}\n              data-testid=\"panel-cancel-query\"\n              onClick={onCancelQuery}\n            >\n              <Icon name=\"sync-slash\" size=\"md\" />\n            </TitleItem>\n          </Tooltip>\n        </DelayRender>\n      )}\n      <div className={styles.rightAligned}>\n        {actions && <div className={styles.rightActions}>{itemsRenderer(actions, (item) => item)}</div>}\n      </div>\n    </>\n  );\n\n  return (\n    <div className={styles.container} style={containerStyles} data-testid={testid}>\n      <div className={styles.loadingBarContainer}>\n        {loadingState === LoadingState.Loading ? <LoadingBar width={width} ariaLabel=\"Panel loading bar\" /> : null}\n      </div>\n\n      {hoverHeader && (\n        <>\n          <HoverWidget\n            menu={menu}\n            title={title}\n            offset={hoverHeaderOffset}\n            dragClass={dragClass}\n            onOpenMenu={onOpenMenu}\n          >\n            {headerContent}\n          </HoverWidget>\n\n          {statusMessage && (\n            <div className={styles.errorContainerFloating}>\n              <PanelStatus message={statusMessage} onClick={statusMessageOnClick} ariaLabel=\"Panel status\" />\n            </div>\n          )}\n        </>\n      )}\n\n      {hasHeader && (\n        <div className={cx(styles.headerContainer, dragClass)} style={headerStyles} data-testid=\"header-container\">\n          {statusMessage && (\n            <div className={dragClassCancel}>\n              <PanelStatus message={statusMessage} onClick={statusMessageOnClick} ariaLabel=\"Panel status\" />\n            </div>\n          )}\n\n          {headerContent}\n\n          {menu && (\n            <PanelMenu\n              menu={menu}\n              title={title}\n              placement=\"bottom-end\"\n              menuButtonClass={cx(styles.menuItem, dragClassCancel, showOnHoverClass)}\n              onOpenMenu={onOpenMenu}\n            />\n          )}\n        </div>\n      )}\n\n      <div className={styles.content} style={contentStyle} ref={childrenContainerRef}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nconst itemsRenderer = (items: ReactNode[] | ReactNode, renderer: (items: ReactNode[]) => ReactNode): ReactNode => {\n  const toRender = React.Children.toArray(items).filter(Boolean);\n  return toRender.length > 0 ? renderer(toRender) : null;\n};\n\nconst getHeaderHeight = (theme: GrafanaTheme2, hasHeader: boolean) => {\n  if (hasHeader) {\n    return theme.spacing.gridSize * theme.components.panel.headerHeight;\n  }\n\n  return 0;\n};\n\nconst getContentStyle = (padding: string, theme: GrafanaTheme2) => {\n  const chromePadding = (padding === 'md' ? theme.components.panel.padding : 0) * theme.spacing.gridSize;\n\n  const contentStyle: CSSProperties = {\n    padding: chromePadding,\n  };\n\n  return { contentStyle };\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  const { background, borderColor, padding } = theme.components.panel;\n\n  return {\n    container: css({\n      label: 'panel-container',\n      backgroundColor: background,\n      border: `1px solid ${borderColor}`,\n      position: 'relative',\n      borderRadius: theme.shape.radius.default,\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n\n      '.show-on-hover': {\n        visibility: 'hidden',\n        opacity: '0',\n      },\n\n      '&:focus-visible, &:hover': {\n        // only show menu icon on hover or focused panel\n        '.show-on-hover': {\n          visibility: 'visible',\n          opacity: '1',\n        },\n      },\n\n      '&:focus-visible': {\n        outline: `1px solid ${theme.colors.action.focus}`,\n      },\n\n      '&:focus-within': {\n        '.show-on-hover': {\n          visibility: 'visible',\n          opacity: '1',\n        },\n      },\n    }),\n    loadingBarContainer: css({\n      label: 'panel-loading-bar-container',\n      position: 'absolute',\n      top: 0,\n      width: '100%',\n      overflow: 'hidden',\n    }),\n    content: css({\n      label: 'panel-content',\n      flexGrow: 1,\n      //contain: 'strict',\n    }),\n    headerContainer: css({\n      label: 'panel-header',\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    pointer: css({\n      cursor: 'pointer',\n    }),\n    streaming: css({\n      label: 'panel-streaming',\n      marginRight: 0,\n      color: theme.colors.success.text,\n\n      '&:hover': {\n        color: theme.colors.success.text,\n      },\n    }),\n    title: css({\n      label: 'panel-title',\n      marginBottom: 0, // override default h6 margin-bottom\n      padding: theme.spacing(0, padding),\n      textOverflow: 'ellipsis',\n      overflow: 'hidden',\n      whiteSpace: 'nowrap',\n      fontSize: theme.typography.h6.fontSize,\n      fontWeight: theme.typography.h6.fontWeight,\n    }),\n    items: css({\n      display: 'flex',\n    }),\n    item: css({\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    }),\n    hiddenMenu: css({\n      visibility: 'hidden',\n    }),\n    menuItem: css({\n      label: 'panel-menu',\n      border: 'none',\n      background: theme.colors.secondary.main,\n      '&:hover': {\n        background: theme.colors.secondary.shade,\n      },\n    }),\n    errorContainerFloating: css({\n      label: 'error-container',\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      zIndex: theme.zIndex.tooltip,\n    }),\n    rightActions: css({\n      display: 'flex',\n      padding: theme.spacing(0, padding),\n      gap: theme.spacing(1),\n    }),\n    rightAligned: css({\n      label: 'right-aligned-container',\n      marginLeft: 'auto',\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    titleItems: css({\n      display: 'flex',\n      height: '100%',\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, LoadingState } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport React, { ReactNode } from 'react';\n\nimport { GrafanaPanelBox } from './GrafanaPanelBox/GrafanaPanelBox';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  panelWrap: css`\n    margin-bottom: ${theme.spacing(1)};\n  `,\n});\n\ntype PanelProps = {\n  isLoading: boolean;\n  title?: ReactNode;\n  description?: ReactNode;\n  children: ReactNode;\n  className?: string;\n  headerActions?: ReactNode;\n  dataTestId?: string;\n};\n\nexport function Panel({\n  isLoading,\n  title,\n  description,\n  children,\n  className = '',\n  headerActions,\n  dataTestId,\n}: PanelProps) {\n  const s = useStyles2(getStyles);\n\n  const loadingState = isLoading ? LoadingState.Loading : LoadingState.Done;\n\n  return (\n    <div className={`${className} ${s.panelWrap}`} data-testid={dataTestId || 'panel'}>\n      <GrafanaPanelBox\n        loadingState={loadingState}\n        title={title as unknown as string}\n        description={description as unknown as string}\n        actions={headerActions}\n      >\n        {children}\n      </GrafanaPanelBox>\n    </div>\n  );\n}\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","var randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  var uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nexport default v4;","import { logWarning } from '@grafana/runtime';\nimport { SemVer } from 'semver';\n\nconst LLM_PLUGIN_ID = \"grafana-llm-app\";\nconst LLM_PLUGIN_ROUTE = `/api/plugins/${LLM_PLUGIN_ID}`;\nlet LLM_PLUGIN_VERSION = new SemVer(\"0.2.0\");\nfunction setLLMPluginVersion(version) {\n  try {\n    LLM_PLUGIN_VERSION = new SemVer(version);\n  } catch (e) {\n    logWarning(\"Failed to parse version of grafana-llm-app; assuming old version is present.\");\n  }\n}\n\nexport { LLM_PLUGIN_ID, LLM_PLUGIN_ROUTE, LLM_PLUGIN_VERSION, setLLMPluginVersion };\n//# sourceMappingURL=constants.js.map\n","import { LiveChannelScope, isLiveChannelMessageEvent } from '@grafana/data';\nimport { getBackendSrv, getGrafanaLiveSrv, logDebug } from '@grafana/runtime';\nimport { useState, useCallback, useEffect } from 'react';\nimport { useAsync } from 'react-use';\nimport { pipe } from 'rxjs';\nimport { filter, map, scan, tap, takeWhile } from 'rxjs/operators';\nimport { v4 } from 'uuid';\nimport { LLM_PLUGIN_ID, LLM_PLUGIN_ROUTE, setLLMPluginVersion } from './constants.js';\n\nconst OPENAI_CHAT_COMPLETIONS_PATH = \"openai/v1/chat/completions\";\nvar Model = /* @__PURE__ */ ((Model2) => {\n  Model2[\"BASE\"] = \"base\";\n  Model2[\"LARGE\"] = \"large\";\n  return Model2;\n})(Model || {});\nfunction isContentMessage(message) {\n  return \"content\" in message;\n}\nfunction isDoneMessage(message) {\n  return \"done\" in message && message.done != null;\n}\nfunction isErrorResponse(response) {\n  return \"error\" in response;\n}\nfunction extractContent() {\n  return pipe(\n    filter((response) => isContentMessage(response.choices[0].delta)),\n    // The type assertion is needed here because the type predicate above doesn't seem to propagate.\n    map(\n      (response) => response.choices[0].delta.content\n    )\n  );\n}\nfunction accumulateContent() {\n  return pipe(\n    extractContent(),\n    scan((acc, curr) => acc + curr, \"\")\n  );\n}\nasync function chatCompletions(request) {\n  const response = await getBackendSrv().post(\n    \"/api/plugins/grafana-llm-app/resources/openai/v1/chat/completions\",\n    request,\n    {\n      headers: { \"Content-Type\": \"application/json\" }\n    }\n  );\n  return response;\n}\nfunction streamChatCompletions(request) {\n  const channel = {\n    scope: LiveChannelScope.Plugin,\n    namespace: LLM_PLUGIN_ID,\n    path: OPENAI_CHAT_COMPLETIONS_PATH + \"/\" + v4(),\n    data: request\n  };\n  const messages = getGrafanaLiveSrv().getStream(channel).pipe(filter((event) => isLiveChannelMessageEvent(event)));\n  return messages.pipe(\n    tap((event) => {\n      if (isErrorResponse(event.message)) {\n        throw new Error(event.message.error);\n      }\n    }),\n    takeWhile((event) => isErrorResponse(event.message) || !isDoneMessage(event.message.choices[0].delta)),\n    map((event) => event.message)\n  );\n}\nlet loggedWarning = false;\nconst health = async () => {\n  try {\n    const settings = await getBackendSrv().get(`${LLM_PLUGIN_ROUTE}/settings`, void 0, void 0, {\n      showSuccessAlert: false,\n      showErrorAlert: false\n    });\n    if (!settings.enabled) {\n      return { configured: false, ok: false, error: \"The Grafana LLM plugin is not enabled.\" };\n    }\n  } catch (e) {\n    logDebug(String(e));\n    logDebug(\n      \"Failed to check if OpenAI is enabled. This is expected if the Grafana LLM plugin is not installed, and the above error can be ignored.\"\n    );\n    loggedWarning = true;\n    return { configured: false, ok: false, error: \"The Grafana LLM plugin is not installed.\" };\n  }\n  let response;\n  try {\n    response = await getBackendSrv().get(`${LLM_PLUGIN_ROUTE}/health`, void 0, void 0, {\n      showSuccessAlert: false,\n      showErrorAlert: false\n    });\n  } catch (e) {\n    if (!loggedWarning) {\n      logDebug(String(e));\n      logDebug(\n        \"Failed to check if OpenAI is enabled. This is expected if the Grafana LLM plugin is not installed, and the above error can be ignored.\"\n      );\n      loggedWarning = true;\n    }\n    return { configured: false, ok: false, error: \"The Grafana LLM plugin is not installed.\" };\n  }\n  const { details } = response;\n  if (details?.version !== void 0) {\n    setLLMPluginVersion(details.version);\n  }\n  if (details?.openAI === void 0) {\n    return { configured: false, ok: false, error: \"The Grafana LLM plugin is outdated; please update it.\" };\n  }\n  return typeof details.openAI === \"boolean\" ? { configured: details.openAI, ok: details.openAI } : details.openAI;\n};\nconst enabled = async () => {\n  const healthDetails = await health();\n  return healthDetails.configured && healthDetails.ok;\n};\nvar StreamStatus = /* @__PURE__ */ ((StreamStatus2) => {\n  StreamStatus2[\"IDLE\"] = \"idle\";\n  StreamStatus2[\"GENERATING\"] = \"generating\";\n  StreamStatus2[\"COMPLETED\"] = \"completed\";\n  return StreamStatus2;\n})(StreamStatus || {});\nconst TIMEOUT = 1e4;\nfunction useOpenAIStream(model = \"large\" /* LARGE */, temperature = 1, notifyError = () => {\n}) {\n  const [messages, setMessages] = useState([]);\n  const [reply, setReply] = useState(\"\");\n  const [streamStatus, setStreamStatus] = useState(\"idle\" /* IDLE */);\n  const [error, setError] = useState();\n  const onError = useCallback(\n    (e) => {\n      setStreamStatus(\"idle\" /* IDLE */);\n      setMessages([]);\n      setError(e);\n      notifyError(\n        \"Failed to generate content using OpenAI\",\n        `Please try again or if the problem persists, contact your organization admin.`\n      );\n      console.error(e);\n    },\n    [notifyError]\n  );\n  const { error: enabledError, value: isEnabled } = useAsync(async () => await enabled(), [enabled]);\n  const { error: asyncError, value } = useAsync(async () => {\n    if (!isEnabled || !messages.length) {\n      return { enabled: isEnabled };\n    }\n    setStreamStatus(\"generating\" /* GENERATING */);\n    setError(void 0);\n    const stream = streamChatCompletions({\n      model,\n      temperature,\n      messages\n    }).pipe(\n      // Accumulate the stream content into a stream of strings, where each\n      // element contains the accumulated message so far.\n      accumulateContent()\n      // The stream is just a regular Observable, so we can use standard rxjs\n      // functionality to update state, e.g. recording when the stream\n      // has completed.\n      // The operator decision tree on the rxjs website is a useful resource:\n      // https://rxjs.dev/operator-decision-tree.)\n    );\n    return {\n      enabled: isEnabled,\n      stream: stream.subscribe({\n        next: setReply,\n        error: onError,\n        complete: () => {\n          setStreamStatus(\"completed\" /* COMPLETED */);\n          setTimeout(() => {\n            setStreamStatus(\"idle\" /* IDLE */);\n          });\n          setMessages([]);\n          setError(void 0);\n        }\n      })\n    };\n  }, [messages, isEnabled]);\n  useEffect(() => {\n    return () => {\n      if (value?.stream) {\n        value.stream.unsubscribe();\n      }\n    };\n  }, [value]);\n  useEffect(() => {\n    let timeout;\n    if (streamStatus === \"generating\" /* GENERATING */ && reply === \"\") {\n      timeout = setTimeout(() => {\n        onError(new Error(`OpenAI stream timed out after ${TIMEOUT}ms`));\n      }, TIMEOUT);\n    }\n    return () => {\n      timeout && clearTimeout(timeout);\n    };\n  }, [streamStatus, reply, onError]);\n  if (asyncError || enabledError) {\n    setError(asyncError || enabledError);\n  }\n  return {\n    setMessages,\n    reply,\n    streamStatus,\n    error,\n    value\n  };\n}\n\nexport { Model, StreamStatus, TIMEOUT, accumulateContent, chatCompletions, enabled, extractContent, health, isContentMessage, isDoneMessage, isErrorResponse, streamChatCompletions, useOpenAIStream };\n//# sourceMappingURL=openai.js.map\n","import { operate } from '../util/lift';\nimport { scanInternals } from './scanInternals';\nexport function scan(accumulator, seed) {\n    return operate(scanInternals(accumulator, seed, arguments.length >= 2, true));\n}\n//# sourceMappingURL=scan.js.map","import { createOperatorSubscriber } from './OperatorSubscriber';\nexport function scanInternals(accumulator, seed, hasSeed, emitOnNext, emitBeforeComplete) {\n    return function (source, subscriber) {\n        var hasState = hasSeed;\n        var state = seed;\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var i = index++;\n            state = hasState\n                ?\n                    accumulator(state, value, i)\n                :\n                    ((hasState = true), value);\n            emitOnNext && subscriber.next(state);\n        }, emitBeforeComplete &&\n            (function () {\n                hasState && subscriber.next(state);\n                subscriber.complete();\n            })));\n    };\n}\n//# sourceMappingURL=scanInternals.js.map","import { isFunction } from '../util/isFunction';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { identity } from '../util/identity';\nexport function tap(observerOrNext, error, complete) {\n    var tapObserver = isFunction(observerOrNext) || error || complete\n        ?\n            { next: observerOrNext, error: error, complete: complete }\n        : observerOrNext;\n    return tapObserver\n        ? operate(function (source, subscriber) {\n            var _a;\n            (_a = tapObserver.subscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n            var isUnsub = true;\n            source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                var _a;\n                (_a = tapObserver.next) === null || _a === void 0 ? void 0 : _a.call(tapObserver, value);\n                subscriber.next(value);\n            }, function () {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.complete) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                subscriber.complete();\n            }, function (err) {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.error) === null || _a === void 0 ? void 0 : _a.call(tapObserver, err);\n                subscriber.error(err);\n            }, function () {\n                var _a, _b;\n                if (isUnsub) {\n                    (_a = tapObserver.unsubscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                }\n                (_b = tapObserver.finalize) === null || _b === void 0 ? void 0 : _b.call(tapObserver);\n            }));\n        })\n        :\n            identity;\n}\n//# sourceMappingURL=tap.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function takeWhile(predicate, inclusive) {\n    if (inclusive === void 0) { inclusive = false; }\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var result = predicate(value, index++);\n            (result || inclusive) && subscriber.next(value);\n            !result && subscriber.complete();\n        }));\n    });\n}\n//# sourceMappingURL=takeWhile.js.map","import { css } from '@emotion/css';\nimport { IconName } from '@grafana/data';\nimport { Button, useStyles2 } from '@grafana/ui';\nimport { InteractionName, reportInteraction } from '@shared/domain/reportInteraction';\nimport React, { ReactNode } from 'react';\n\nimport { useFetchLlmPluginStatus } from './infrastructure/useFetchLlmPluginStatus';\n\ntype AIButtonProps = {\n  children: ReactNode;\n  onClick: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  disabled?: boolean;\n  interactionName: InteractionName;\n};\n\nexport function AIButton({ children, onClick, disabled, interactionName }: AIButtonProps) {\n  const styles = useStyles2(getStyles);\n  const { isEnabled, error, isFetching } = useFetchLlmPluginStatus();\n\n  let icon: IconName = 'ai';\n  let tooltip = '';\n\n  if (isFetching) {\n    icon = 'fa fa-spinner';\n    tooltip = 'Checking the status of the Grafana LLM plugin...';\n  } else if (error) {\n    icon = 'exclamation-triangle';\n    tooltip = 'Error while checking the status of the Grafana LLM plugin!';\n  } else if (!isEnabled) {\n    icon = 'shield-exclamation';\n    tooltip = 'Grafana LLM plugin missing or not configured! Please check the plugins administration page.';\n  }\n\n  return (\n    <Button\n      className={styles.aiButton}\n      size=\"md\"\n      fill=\"text\"\n      icon={icon}\n      disabled={!isEnabled || disabled}\n      tooltip={tooltip}\n      tooltipPlacement=\"top\"\n      onClick={(event: React.MouseEvent<HTMLButtonElement>) => {\n        reportInteraction(interactionName);\n        onClick(event);\n      }}\n    >\n      {children}\n    </Button>\n  );\n}\n\nconst getStyles = () => ({\n  aiButton: css`\n    padding: 0 4px;\n  `,\n});\n","import { openai } from '@grafana/llm';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useFetchLlmPluginStatus() {\n  const { data, isFetching, error } = useQuery({\n    queryKey: ['llm'],\n    queryFn: () => openai.enabled(),\n  });\n\n  if (error) {\n    logger.error(error, { info: 'Error while checking the status of the Grafana LLM plugin!' });\n  }\n\n  return { isEnabled: Boolean(data), isFetching, error };\n}\n","import*as e from\"react\";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},n.apply(this,arguments)}const t=[\"children\",\"options\"];var r,i;!function(e){e.blockQuote=\"0\",e.breakLine=\"1\",e.breakThematic=\"2\",e.codeBlock=\"3\",e.codeFenced=\"4\",e.codeInline=\"5\",e.footnote=\"6\",e.footnoteReference=\"7\",e.gfmTask=\"8\",e.heading=\"9\",e.headingSetext=\"10\",e.htmlBlock=\"11\",e.htmlComment=\"12\",e.htmlSelfClosing=\"13\",e.image=\"14\",e.link=\"15\",e.linkAngleBraceStyleDetector=\"16\",e.linkBareUrlDetector=\"17\",e.linkMailtoDetector=\"18\",e.newlineCoalescer=\"19\",e.orderedList=\"20\",e.paragraph=\"21\",e.ref=\"22\",e.refImage=\"23\",e.refLink=\"24\",e.table=\"25\",e.tableSeparator=\"26\",e.text=\"27\",e.textBolded=\"28\",e.textEmphasized=\"29\",e.textEscaped=\"30\",e.textMarked=\"31\",e.textStrikethroughed=\"32\",e.unorderedList=\"33\"}(r||(r={})),function(e){e[e.MAX=0]=\"MAX\",e[e.HIGH=1]=\"HIGH\",e[e.MED=2]=\"MED\",e[e.LOW=3]=\"LOW\",e[e.MIN=4]=\"MIN\"}(i||(i={}));const l=[\"allowFullScreen\",\"allowTransparency\",\"autoComplete\",\"autoFocus\",\"autoPlay\",\"cellPadding\",\"cellSpacing\",\"charSet\",\"className\",\"classId\",\"colSpan\",\"contentEditable\",\"contextMenu\",\"crossOrigin\",\"encType\",\"formAction\",\"formEncType\",\"formMethod\",\"formNoValidate\",\"formTarget\",\"frameBorder\",\"hrefLang\",\"inputMode\",\"keyParams\",\"keyType\",\"marginHeight\",\"marginWidth\",\"maxLength\",\"mediaGroup\",\"minLength\",\"noValidate\",\"radioGroup\",\"readOnly\",\"rowSpan\",\"spellCheck\",\"srcDoc\",\"srcLang\",\"srcSet\",\"tabIndex\",\"useMap\"].reduce((e,n)=>(e[n.toLowerCase()]=n,e),{for:\"htmlFor\"}),o={amp:\"&\",apos:\"'\",gt:\">\",lt:\"<\",nbsp:\"\",quot:\"\"},c=[\"style\",\"script\"],a=/([-A-Z0-9_:]+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|(?:\\{((?:\\\\.|{[^}]*?}|[^}])*)\\})))?/gi,s=/mailto:/i,d=/\\n{2,}$/,u=/^(\\s*>[\\s\\S]*?)(?=\\n{2,})/,p=/^ *> ?/gm,f=/^ {2,}\\n/,h=/^(?:( *[-*_])){3,} *(?:\\n *)+\\n/,m=/^\\s*(`{3,}|~{3,}) *(\\S+)?([^\\n]*?)?\\n([\\s\\S]+?)\\s*\\1 *(?:\\n *)*\\n?/,g=/^(?: {4}[^\\n]+\\n*)+(?:\\n *)+\\n?/,y=/^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,k=/^(?:\\n *)*\\n/,x=/\\r\\n?/g,v=/^\\[\\^([^\\]]+)](:(.*)((\\n+ {4,}.*)|(\\n(?!\\[\\^).+))*)/,b=/^\\[\\^([^\\]]+)]/,$=/\\f/g,E=/^---[ \\t]*\\n(.|\\n)*\\n---[ \\t]*\\n/,w=/^\\s*?\\[(x|\\s)\\]/,S=/^ *(#{1,6}) *([^\\n]+?)(?: +#*)?(?:\\n *)*(?:\\n|$)/,C=/^ *(#{1,6}) +([^\\n]+?)(?: +#*)?(?:\\n *)*(?:\\n|$)/,A=/^([^\\n]+)\\n *(=|-){3,} *(?:\\n *)+\\n/,O=/^ *(?!<[a-z][^ >/]* ?\\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\\n?(\\s*(?:<\\1[^>]*?>[\\s\\S]*?<\\/\\1>|(?!<\\1\\b)[\\s\\S])*?)<\\/\\1>(?!<\\/\\1>)\\n*/i,T=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,L=/^<!--[\\s\\S]*?(?:-->)/,R=/^(data|aria|x)-[a-z_][a-z\\d_.-]*$/,z=/^ *<([a-z][a-z0-9:]*)(?:\\s+((?:<.*?>|[^>])*))?\\/?>(?!<\\/\\1>)(\\s*\\n)?/i,M=/^\\{.*\\}$/,I=/^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,U=/^<([^ >]+@[^ >]+)>/,j=/^<([^ >]+:\\/[^ >]+)>/,B=/-([a-z])?/gi,N=/^(.*\\|.*)\\n(?: *(\\|? *[-:]+ *\\|[-| :]*)\\n((?:.*\\|.*\\n)*))?\\n?/,H=/^\\[([^\\]]*)\\]:\\s+<?([^\\s>]+)>?\\s*(\"([^\"]*)\")?/,D=/^!\\[([^\\]]*)\\] ?\\[([^\\]]*)\\]/,P=/^\\[([^\\]]*)\\] ?\\[([^\\]]*)\\]/,_=/(\\[|\\])/g,F=/(\\n|^[-*]\\s|^#|^ {2,}|^-{2,}|^>\\s)/,W=/\\t/g,G=/(^ *\\||\\| *$)/g,Z=/^ *:-+: *$/,q=/^ *:-+ *$/,V=/^ *-+: *$/,X=\"((?:\\\\[.*?\\\\][([].*?[)\\\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\\\n)*?)\",Q=new RegExp(`^([*_])\\\\1${X}\\\\1\\\\1(?!\\\\1)`),J=new RegExp(`^([*_])${X}\\\\1(?!\\\\1|\\\\w)`),K=new RegExp(`^==${X}==`),Y=new RegExp(`^~~${X}~~`),ee=/^\\\\([^0-9A-Za-z\\s])/,ne=/^[\\s\\S]+?(?=[^0-9A-Z\\s\\u00c0-\\uffff&#;.()'\"]|\\d+\\.|\\n\\n| {2,}\\n|\\w+:\\S|$)/i,te=/^\\n+/,re=/^([ \\t]*)/,ie=/\\\\([^\\\\])/g,le=/ *\\n+$/,oe=/(?:^|\\n)( *)$/,ce=\"(?:\\\\d+\\\\.)\",ae=\"(?:[*+-])\";function se(e){return\"( *)(\"+(1===e?ce:ae)+\") +\"}const de=se(1),ue=se(2);function pe(e){return new RegExp(\"^\"+(1===e?de:ue))}const fe=pe(1),he=pe(2);function me(e){return new RegExp(\"^\"+(1===e?de:ue)+\"[^\\\\n]*(?:\\\\n(?!\\\\1\"+(1===e?ce:ae)+\" )[^\\\\n]*)*(\\\\n|$)\",\"gm\")}const ge=me(1),ye=me(2);function ke(e){const n=1===e?ce:ae;return new RegExp(\"^( *)(\"+n+\") [\\\\s\\\\S]+?(?:\\\\n{2,}(?! )(?!\\\\1\"+n+\" (?!\"+n+\" ))\\\\n*|\\\\s*\\\\n*$)\")}const xe=ke(1),ve=ke(2);function be(e,n){const t=1===n,r=t?xe:ve,i=t?ge:ye,l=t?fe:he;return{match(e,n,t){const i=oe.exec(t);return i&&(n.list||!n.inline&&!n.simple)?r.exec(e=i[1]+e):null},order:1,parse(e,n,r){const o=t?+e[2]:void 0,c=e[0].replace(d,\"\\n\").match(i);let a=!1;return{items:c.map(function(e,t){const i=l.exec(e)[0].length,o=new RegExp(\"^ {1,\"+i+\"}\",\"gm\"),s=e.replace(o,\"\").replace(l,\"\"),d=t===c.length-1,u=-1!==s.indexOf(\"\\n\\n\")||d&&a;a=u;const p=r.inline,f=r.list;let h;r.list=!0,u?(r.inline=!1,h=s.replace(le,\"\\n\\n\")):(r.inline=!0,h=s.replace(le,\"\"));const m=n(h,r);return r.inline=p,r.list=f,m}),ordered:t,start:o}},render:(n,t,r)=>e(n.ordered?\"ol\":\"ul\",{key:r.key,start:\"20\"===n.type?n.start:void 0},n.items.map(function(n,i){return e(\"li\",{key:i},t(n,r))}))}}const $e=new RegExp(\"^\\\\[((?:\\\\[[^\\\\]]*\\\\]|[^\\\\[\\\\]]|\\\\](?=[^\\\\[]*\\\\]))*)\\\\]\\\\(\\\\s*<?((?:\\\\([^)]*\\\\)|[^\\\\s\\\\\\\\]|\\\\\\\\.)*?)>?(?:\\\\s+['\\\"]([\\\\s\\\\S]*?)['\\\"])?\\\\s*\\\\)\"),Ee=/^!\\[(.*?)\\]\\( *((?:\\([^)]*\\)|[^() ])*) *\"?([^)\"]*)?\"?\\)/,we=[u,m,g,S,A,C,L,N,ge,xe,ye,ve],Se=[...we,/^[^\\n]+(?:  \\n|\\n{2,})/,O,z];function Ce(e){return e.replace(/[]/g,\"a\").replace(/[]/g,\"c\").replace(/[]/g,\"d\").replace(/[]/g,\"e\").replace(/[]/g,\"i\").replace(/[]/g,\"n\").replace(/[]/g,\"o\").replace(/[]/g,\"u\").replace(/[]/g,\"y\").replace(/[^a-z0-9- ]/gi,\"\").replace(/ /gi,\"-\").toLowerCase()}function Ae(e){return V.test(e)?\"right\":Z.test(e)?\"center\":q.test(e)?\"left\":null}function Oe(e,n,t,r){const i=t.inTable;t.inTable=!0;let l=e.trim().split(/( *(?:`[^`]*`|<.*?>.*?<\\/.*?>(?!<\\/.*?>)|\\\\\\||\\|) *)/).reduce((e,i)=>(\"|\"===i.trim()?e.push(r?{type:\"26\"}:{type:\"27\",text:i}):\"\"!==i&&e.push.apply(e,n(i,t)),e),[]);t.inTable=i;let o=[[]];return l.forEach(function(e,n){\"26\"===e.type?0!==n&&n!==l.length-1&&o.push([]):(\"27\"!==e.type||null!=l[n+1]&&\"26\"!==l[n+1].type||(e.text=e.text.trimEnd()),o[o.length-1].push(e))}),o}function Te(e,n,t){t.inline=!0;const r=e[2]?e[2].replace(G,\"\").split(\"|\").map(Ae):[],i=e[3]?function(e,n,t){return e.trim().split(\"\\n\").map(function(e){return Oe(e,n,t,!0)})}(e[3],n,t):[],l=Oe(e[1],n,t,!!i.length);return t.inline=!1,i.length?{align:r,cells:i,header:l,type:\"25\"}:{children:l,type:\"21\"}}function Le(e,n){return null==e.align[n]?{}:{textAlign:e.align[n]}}function Re(e){return function(n,t){return t.inline?e.exec(n):null}}function ze(e){return function(n,t){return t.inline||t.simple?e.exec(n):null}}function Me(e){return function(n,t){return t.inline||t.simple?null:e.exec(n)}}function Ie(e){return function(n){return e.exec(n)}}function Ue(e,n,t){if(n.inline||n.simple)return null;if(t&&!t.endsWith(\"\\n\"))return null;let r=\"\";e.split(\"\\n\").every(e=>!we.some(n=>n.test(e))&&(r+=e+\"\\n\",e.trim()));const i=r.trimEnd();return\"\"==i?null:[r,i]}function je(e){try{if(decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,\"\").match(/^\\s*(javascript|vbscript|data(?!:image)):/i))return}catch(e){return null}return e}function Be(e){return e.replace(ie,\"$1\")}function Ne(e,n,t){const r=t.inline||!1,i=t.simple||!1;t.inline=!0,t.simple=!0;const l=e(n,t);return t.inline=r,t.simple=i,l}function He(e,n,t){const r=t.inline||!1,i=t.simple||!1;t.inline=!1,t.simple=!0;const l=e(n,t);return t.inline=r,t.simple=i,l}function De(e,n,t){const r=t.inline||!1;t.inline=!1;const i=e(n,t);return t.inline=r,i}const Pe=(e,n,t)=>({children:Ne(n,e[1],t)});function _e(){return{}}function Fe(){return null}function We(...e){return e.filter(Boolean).join(\" \")}function Ge(e,n,t){let r=e;const i=n.split(\".\");for(;i.length&&(r=r[i[0]],void 0!==r);)i.shift();return r||t}function Ze(t=\"\",r={}){r.overrides=r.overrides||{},r.slugify=r.slugify||Ce,r.namedCodesToUnicode=r.namedCodesToUnicode?n({},o,r.namedCodesToUnicode):o;const i=r.createElement||e.createElement;function d(e,t,...l){const o=Ge(r.overrides,`${e}.props`,{});return i(function(e,n){const t=Ge(n,e);return t?\"function\"==typeof t||\"object\"==typeof t&&\"render\"in t?t:Ge(n,`${e}.component`,e):e}(e,r.overrides),n({},t,o,{className:We(null==t?void 0:t.className,o.className)||void 0}),...l)}function G(n){n=n.replace(E,\"\");let t=!1;r.forceInline?t=!0:r.forceBlock||(t=!1===F.test(n));const i=le(ie(t?n:`${n.trimEnd().replace(te,\"\")}\\n\\n`,{inline:t}));for(;\"string\"==typeof i[i.length-1]&&!i[i.length-1].trim();)i.pop();if(null===r.wrapper)return i;const l=r.wrapper||(t?\"span\":\"div\");let o;if(i.length>1||r.forceWrapper)o=i;else{if(1===i.length)return o=i[0],\"string\"==typeof o?d(\"span\",{key:\"outer\"},o):o;o=null}return e.createElement(l,{key:\"outer\"},o)}function Z(n){const t=n.match(a);return t?t.reduce(function(n,t,r){const i=t.indexOf(\"=\");if(-1!==i){const o=function(e){return-1!==e.indexOf(\"-\")&&null===e.match(R)&&(e=e.replace(B,function(e,n){return n.toUpperCase()})),e}(t.slice(0,i)).trim(),c=function(e){const n=e[0];return('\"'===n||\"'\"===n)&&e.length>=2&&e[e.length-1]===n?e.slice(1,-1):e}(t.slice(i+1).trim()),a=l[o]||o,s=n[a]=function(e,n){return\"style\"===e?n.split(/;\\s?/).reduce(function(e,n){const t=n.slice(0,n.indexOf(\":\"));return e[t.trim().replace(/(-[a-z])/g,e=>e[1].toUpperCase())]=n.slice(t.length+1).trim(),e},{}):\"href\"===e||\"src\"===e?je(n):(n.match(M)&&(n=n.slice(1,n.length-1)),\"true\"===n||\"false\"!==n&&n)}(o,c);\"string\"==typeof s&&(O.test(s)||z.test(s))&&(n[a]=e.cloneElement(G(s.trim()),{key:r}))}else\"style\"!==t&&(n[l[t]||t]=!0);return n},{}):null}const q=[],V={},X={0:{match:Me(u),order:1,parse:(e,n,t)=>({children:n(e[0].replace(p,\"\"),t)}),render:(e,n,t)=>d(\"blockquote\",{key:t.key},n(e.children,t))},1:{match:Ie(f),order:1,parse:_e,render:(e,n,t)=>d(\"br\",{key:t.key})},2:{match:Me(h),order:1,parse:_e,render:(e,n,t)=>d(\"hr\",{key:t.key})},3:{match:Me(g),order:0,parse:e=>({lang:void 0,text:e[0].replace(/^ {4}/gm,\"\").replace(/\\n+$/,\"\")}),render:(e,t,r)=>d(\"pre\",{key:r.key},d(\"code\",n({},e.attrs,{className:e.lang?`lang-${e.lang}`:\"\"}),e.text))},4:{match:Me(m),order:0,parse:e=>({attrs:Z(e[3]||\"\"),lang:e[2]||void 0,text:e[4],type:\"3\"})},5:{match:ze(y),order:3,parse:e=>({text:e[2]}),render:(e,n,t)=>d(\"code\",{key:t.key},e.text)},6:{match:Me(v),order:0,parse:e=>(q.push({footnote:e[2],identifier:e[1]}),{}),render:Fe},7:{match:Re(b),order:1,parse:e=>({target:`#${r.slugify(e[1])}`,text:e[1]}),render:(e,n,t)=>d(\"a\",{key:t.key,href:je(e.target)},d(\"sup\",{key:t.key},e.text))},8:{match:Re(w),order:1,parse:e=>({completed:\"x\"===e[1].toLowerCase()}),render:(e,n,t)=>d(\"input\",{checked:e.completed,key:t.key,readOnly:!0,type:\"checkbox\"})},9:{match:Me(r.enforceAtxHeadings?C:S),order:1,parse:(e,n,t)=>({children:Ne(n,e[2],t),id:r.slugify(e[2]),level:e[1].length}),render:(e,n,t)=>d(`h${e.level}`,{id:e.id,key:t.key},n(e.children,t))},10:{match:Me(A),order:0,parse:(e,n,t)=>({children:Ne(n,e[1],t),level:\"=\"===e[2]?1:2,type:\"9\"})},11:{match:Ie(O),order:1,parse(e,n,t){const[,r]=e[3].match(re),i=new RegExp(`^${r}`,\"gm\"),l=e[3].replace(i,\"\"),o=(a=l,Se.some(e=>e.test(a))?De:Ne);var a;const s=e[1].toLowerCase(),d=-1!==c.indexOf(s),u={attrs:Z(e[2]),noInnerParse:d,tag:(d?s:e[1]).trim()};return t.inAnchor=t.inAnchor||\"a\"===s,d?u.text=e[3]:u.children=o(n,l,t),t.inAnchor=!1,u},render:(e,t,r)=>d(e.tag,n({key:r.key},e.attrs),e.text||t(e.children,r))},13:{match:Ie(z),order:1,parse:e=>({attrs:Z(e[2]||\"\"),tag:e[1].trim()}),render:(e,t,r)=>d(e.tag,n({},e.attrs,{key:r.key}))},12:{match:Ie(L),order:1,parse:()=>({}),render:Fe},14:{match:ze(Ee),order:1,parse:e=>({alt:e[1],target:Be(e[2]),title:e[3]}),render:(e,n,t)=>d(\"img\",{key:t.key,alt:e.alt||void 0,title:e.title||void 0,src:je(e.target)})},15:{match:Re($e),order:3,parse:(e,n,t)=>({children:He(n,e[1],t),target:Be(e[2]),title:e[3]}),render:(e,n,t)=>d(\"a\",{key:t.key,href:je(e.target),title:e.title},n(e.children,t))},16:{match:Re(j),order:0,parse:e=>({children:[{text:e[1],type:\"27\"}],target:e[1],type:\"15\"})},17:{match:(e,n)=>n.inAnchor?null:Re(I)(e,n),order:0,parse:e=>({children:[{text:e[1],type:\"27\"}],target:e[1],title:void 0,type:\"15\"})},18:{match:Re(U),order:0,parse(e){let n=e[1],t=e[1];return s.test(t)||(t=\"mailto:\"+t),{children:[{text:n.replace(\"mailto:\",\"\"),type:\"27\"}],target:t,type:\"15\"}}},20:be(d,1),33:be(d,2),19:{match:Me(k),order:3,parse:_e,render:()=>\"\\n\"},21:{match:Ue,order:3,parse:Pe,render:(e,n,t)=>d(\"p\",{key:t.key},n(e.children,t))},22:{match:Re(H),order:0,parse:e=>(V[e[1]]={target:e[2],title:e[4]},{}),render:Fe},23:{match:ze(D),order:0,parse:e=>({alt:e[1]||void 0,ref:e[2]}),render:(e,n,t)=>V[e.ref]?d(\"img\",{key:t.key,alt:e.alt,src:je(V[e.ref].target),title:V[e.ref].title}):null},24:{match:Re(P),order:0,parse:(e,n,t)=>({children:n(e[1],t),fallbackChildren:n(e[0].replace(_,\"\\\\$1\"),t),ref:e[2]}),render:(e,n,t)=>V[e.ref]?d(\"a\",{key:t.key,href:je(V[e.ref].target),title:V[e.ref].title},n(e.children,t)):d(\"span\",{key:t.key},n(e.fallbackChildren,t))},25:{match:Me(N),order:1,parse:Te,render(e,n,t){const r=e;return d(\"table\",{key:t.key},d(\"thead\",null,d(\"tr\",null,r.header.map(function(e,i){return d(\"th\",{key:i,style:Le(r,i)},n(e,t))}))),d(\"tbody\",null,r.cells.map(function(e,i){return d(\"tr\",{key:i},e.map(function(e,i){return d(\"td\",{key:i,style:Le(r,i)},n(e,t))}))})))}},27:{match:Ie(ne),order:4,parse:e=>({text:e[0].replace(T,(e,n)=>r.namedCodesToUnicode[n]?r.namedCodesToUnicode[n]:e)}),render:e=>e.text},28:{match:ze(Q),order:2,parse:(e,n,t)=>({children:n(e[2],t)}),render:(e,n,t)=>d(\"strong\",{key:t.key},n(e.children,t))},29:{match:ze(J),order:3,parse:(e,n,t)=>({children:n(e[2],t)}),render:(e,n,t)=>d(\"em\",{key:t.key},n(e.children,t))},30:{match:ze(ee),order:1,parse:e=>({text:e[1],type:\"27\"})},31:{match:ze(K),order:3,parse:Pe,render:(e,n,t)=>d(\"mark\",{key:t.key},n(e.children,t))},32:{match:ze(Y),order:3,parse:Pe,render:(e,n,t)=>d(\"del\",{key:t.key},n(e.children,t))}};!0===r.disableParsingRawHTML&&(delete X[11],delete X[13]);const ie=function(e){let n=Object.keys(e);function t(r,i){let l=[],o=\"\";for(;r;){let c=0;for(;c<n.length;){const a=n[c],s=e[a],d=s.match(r,i,o);if(d){const e=d[0];r=r.substring(e.length);const n=s.parse(d,t,i);null==n.type&&(n.type=a),l.push(n),o=e;break}c++}}return l}return n.sort(function(n,t){let r=e[n].order,i=e[t].order;return r!==i?r-i:n<t?-1:1}),function(e,n){return t(function(e){return e.replace(x,\"\\n\").replace($,\"\").replace(W,\"    \")}(e),n)}}(X),le=(oe=function(e,n){return function(t,r,i){const l=e[t.type].render;return n?n(()=>l(t,r,i),t,r,i):l(t,r,i)}}(X,r.renderRule),function e(n,t={}){if(Array.isArray(n)){const r=t.key,i=[];let l=!1;for(let r=0;r<n.length;r++){t.key=r;const o=e(n[r],t),c=\"string\"==typeof o;c&&l?i[i.length-1]+=o:null!==o&&i.push(o),l=c}return t.key=r,i}return oe(n,e,t)});var oe;const ce=G(t);return q.length?d(\"div\",null,ce,d(\"footer\",{key:\"footer\"},q.map(function(e){return d(\"div\",{id:r.slugify(e.identifier),key:e.identifier},e.identifier,le(ie(e.footnote,{inline:!0})))}))):ce}export default n=>{let{children:r=\"\",options:i}=n,l=function(e,n){if(null==e)return{};var t,r,i={},l=Object.keys(e);for(r=0;r<l.length;r++)n.indexOf(t=l[r])>=0||(i[t]=e[t]);return i}(n,t);return e.cloneElement(Ze(r,i),l)};export{r as RuleType,Ze as compiler,Ce as slugify};\n//# sourceMappingURL=index.modern.js.map\n","import { css } from '@emotion/css';\nimport { useStyles2 } from '@grafana/ui';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport Markdown from 'markdown-to-jsx';\nimport React, { ReactNode } from 'react';\n\nimport { OpenAiReply } from '../domain/useOpenAiChatCompletions';\n\n// yeah, I know...\nconst setNativeValue = (element: Element, value: string) => {\n  const valueSetter = Object!.getOwnPropertyDescriptor(element, 'value')!.set;\n  const prototypeValueSetter = Object!.getOwnPropertyDescriptor(Object.getPrototypeOf(element), 'value')!.set;\n\n  if (valueSetter && valueSetter !== prototypeValueSetter) {\n    prototypeValueSetter!.call(element, value);\n  } else {\n    valueSetter!.call(element, value);\n  }\n};\n\nconst onClickSearchTerm = (event: any) => {\n  const searchInputElement = document.querySelector('[placeholder^=\"Search\"]');\n\n  if (searchInputElement === null) {\n    logger.error(new Error('Cannot find search input element!'));\n    return;\n  }\n\n  const value = event.target.textContent.trim();\n\n  setNativeValue(searchInputElement, value);\n\n  searchInputElement.dispatchEvent(new Event('input', { bubbles: true }));\n};\n\nconst SearchTerm = ({ children }: { children: ReactNode }) => {\n  const styles = useStyles2(getStyles);\n\n  // If the code block contains newlines, don't make it a search link\n  if (typeof children === 'string' && children.includes('\\n')) {\n    return <code>{children}</code>;\n  }\n\n  return (\n    <code className={styles.searchLink} title=\"Search for this node\" onClick={onClickSearchTerm}>\n      {children}\n    </code>\n  );\n};\n\nconst MARKDOWN_OPTIONS = {\n  overrides: {\n    code: {\n      component: SearchTerm,\n    },\n  },\n};\n\ntype AiReplyProps = {\n  reply: OpenAiReply['reply'];\n};\n\nexport function AiReply({ reply }: AiReplyProps) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.container}>\n      {reply?.messages\n        ?.filter((message) => message.role !== 'system')\n        .map((message) => (\n          <>\n            <div className={styles.reply}>\n              <Markdown options={MARKDOWN_OPTIONS}>{message.content}</Markdown>\n            </div>\n            <hr />\n          </>\n        ))}\n\n      <div className={styles.reply}>\n        <Markdown options={MARKDOWN_OPTIONS}>{reply.text}</Markdown>\n      </div>\n    </div>\n  );\n}\n\nconst getStyles = () => ({\n  container: css`\n    width: 100%;\n    height: 100%;\n  `,\n  reply: css`\n    font-size: 13px;\n\n    & ol,\n    & ul {\n      margin: 0 0 16px 24px;\n    }\n  `,\n  searchLink: css`\n    color: rgb(255, 136, 51);\n    border: 1px solid transparent;\n    padding: 2px 4px;\n    cursor: pointer;\n    font-size: 13px;\n\n    &:hover,\n    &:focus,\n    &:active {\n      box-sizing: border-box;\n      border: 1px solid rgb(255, 136, 51, 0.8);\n      border-radius: 4px;\n    }\n  `,\n});\n","import { css } from '@emotion/css';\nimport { Button, TextArea, useStyles2 } from '@grafana/ui';\nimport React, { KeyboardEvent, useCallback, useState } from 'react';\n\nconst getStyles = () => ({\n  textarea: css`\n    margin-bottom: 8px;\n  `,\n  sendButton: css`\n    float: right;\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  `,\n});\n\ntype FollowUpFormProps = {\n  onSubmit: (question: string) => void;\n};\n\nfunction useFollowUpForm(onSubmit: FollowUpFormProps['onSubmit']) {\n  const [question, setQuestion] = useState('');\n\n  const onChangeInput = useCallback((event: any) => {\n    setQuestion(event.target.value);\n  }, []);\n\n  const onClickSend = useCallback(() => {\n    const questionToSend = question.trim();\n    if (!questionToSend) {\n      return;\n    }\n\n    onSubmit(questionToSend);\n\n    setQuestion('');\n  }, [question, onSubmit]);\n\n  return {\n    question,\n    onChangeInput,\n    onClickSend,\n  };\n}\n\nexport function FollowUpForm({ onSubmit }: FollowUpFormProps) {\n  const styles = useStyles2(getStyles);\n  const { question, onChangeInput, onClickSend } = useFollowUpForm(onSubmit);\n\n  const onKeyDown = (event: KeyboardEvent<HTMLTextAreaElement>) => {\n    if (event.code === 'Enter' && !event.shiftKey) {\n      onClickSend();\n    }\n  };\n\n  return (\n    <div>\n      <TextArea\n        className={styles.textarea}\n        placeholder=\"Ask a follow-up question...\"\n        value={question}\n        onChange={onChangeInput}\n        onKeyDown={onKeyDown}\n      />\n\n      <Button className={styles.sendButton} onClick={onClickSend}>\n        Send\n      </Button>\n    </div>\n  );\n}\n","/* https://platform.openai.com/docs/models/overview */\n\nexport const model = 'gpt-4-1106-preview';\n\n/* https://platform.openai.com/docs/guides/prompt-engineering/tactics */\n\nenum PromptCategories {\n  system = 'system',\n  user = 'user',\n}\n\ntype Prompts = Record<string, (profileType: string, profiles: string[]) => string>;\n\nconst prompts: Record<PromptCategories, Prompts> = {\n  system: {\n    // add new system prompts above\n    empty: () => `\n    You are a performance profiling expert and excel at analyzing profiles in the DOT format.\n    In the DOT format, a row like N47 -> N61 means the function from N47 called the function from N61.\n`,\n  },\n  user: {\n    // add new user prompts above\n    single: (profileType: string, profiles: string[]) => `\n    Analyze this flamegraph in DOT format and address these key aspects:\n    - **Performance Bottleneck**: Identify the primary factors slowing down the process, consuming excessive memory, or causing a bottleneck in the system.\n    - **Root Cause**: Explain clearly why these bottlenecks are occurring.\n    - **Recommended Fix**: Suggest practical solutions for these issues.\n\n    Guidelines:\n    - Always use full function names without splitting them from package names.\n    - Exclude numeric values, percentages, and node names (e.g., N1, N3, Node 1, Node 2).\n    - Focus on user code over low-level runtime optimizations.\n    - For standard library or runtime functions, explain their presence/function and link them to user code functions calling them. Avoid repetitive mentions from the same call chain.\n    - Do not mention that the flamegraph profile is in DOT format.\n    - Only use h5 and h6 markdown headers (e.g., ##### Performance Bottleneck, ###### Recommended Fix)\n    - Do not use h1,h2,h3,h4 headers (e.g., ## Bottleneck, ### Root Cause, #### Recommended Fix)\n\n    Format the response using markdown headers for each section corresponding to the key aspects.\n\n    The profile type is: ${profileType}\n    Profile in DOT format:\n    ${profiles[0]}\n`,\n    anton: (profileType: string, profiles: string[]) => `\nGive me actionable feedback and suggestions on how I improve the application performance.\n\nDo not break function names.\nDo not show any numeric values, absolute or percents.\nDo not show node names like N1, N3, or Node 1, Node 2.\nDo not suggest low-level runtime optimisations, focus on the user code.\n\nAlways use full function names.\nNever split function and package name.\n\nRemove any numeric values, absolute or percents, from the output.\nRemove node names like N1, N3, or Node 1, Node 2 from the output.\n\nIf the function is widely known (e.g., a runtime or stdlib function), provide me concise explanation why the function is present in the profile and what could be the cause.\nIf a function is defined in the runtime or in the standard library, tell me which function in the user code calls it.\nAvoid mentioning functions from the same call-chain.\n\n5 suggestions is enough.\nThe profile type is ${profileType}\nBelow is the performance profile in DOT format:\n${profiles[0]}\n`,\n    diff: (profileType: string, profiles: string[]) => `\nAnalyze the differences between these two performance profiles presented in DOT format. Provide a detailed comparison focusing on the following aspects:\n\n- Performance Change: Determine how the performance has changed from the first profile to the second. Identify if there are new bottlenecks, improved or worsened performance areas, or significant changes in resource consumption.\n- Function Impact: Highlight no more than 3 specific functions that have undergone notable changes in their performance impact. Discuss any new functions that have appeared in the second profile or any existing functions that have significantly increased or decreased in resource usage.\n- Potential Causes: Discuss the possible reasons for these changes in performance, linking them to the differences in function execution or resource usage between the two profiles.\n\nGuidelines for Analysis:\n- Use full function names without separating them from their package names\n- Focus on user code rather than low-level runtime optimizations or standard library functions unless they are directly relevant to the user code's performance changes\n- Exclude numeric values, percentages, and node names (e.g., N1, N3, Node 1, Node 2) from the analysis\n- Format the response using markdown headers for each section to structure the analysis clearly\n\nThe profile type is: ${profileType}\n\nFirst performance profile in DOT format:\n${profiles[0]}\n\nSecond performance profile in DOT format:\n${profiles[1]}\n`,\n  },\n};\n\nexport const buildPrompts = ({\n  system,\n  user,\n  profileType,\n  profiles,\n}: {\n  system: string;\n  user: string;\n  profileType: string;\n  profiles: string[];\n}) => {\n  const systemPrompt = prompts.system[system];\n\n  if (typeof systemPrompt !== 'function') {\n    throw new Error(`Cannot find system prompt \"${system}\"!`);\n  }\n\n  const userPrompt = prompts.user[user];\n\n  if (typeof userPrompt !== 'function') {\n    throw new Error(`Cannot find user prompt \"${user}\"!`);\n  }\n\n  return {\n    system: systemPrompt(profileType, profiles),\n    user: userPrompt(profileType, profiles),\n  };\n};\n","import { TimeRange } from '@grafana/data';\nimport { FlamebearerProfile } from '@shared/types/FlamebearerProfile';\n\nimport { DataSourceProxyClient } from '../series/http/DataSourceProxyClient';\n\ntype DiffProfileResponse = string | FlamebearerProfile;\n\ntype GetParams = {\n  query: string;\n  timeRange: TimeRange;\n  format: 'dot' | 'json';\n  maxNodes: number;\n};\n\nexport class ProfileApiClient extends DataSourceProxyClient {\n  constructor(options: { dataSourceUid: string }) {\n    super(options);\n  }\n\n  async get(params: GetParams): Promise<DiffProfileResponse> {\n    const searchParams = new URLSearchParams({\n      query: params.query,\n      from: String(params.timeRange.from.unix() * 1000),\n      until: String(params.timeRange.to.unix() * 1000),\n      format: params.format,\n    });\n\n    if (params.maxNodes) {\n      searchParams.set('max-nodes', String(params.maxNodes));\n    }\n\n    const response = await this.fetch(`/pyroscope/render?${searchParams.toString()}`);\n\n    switch (params.format) {\n      case 'dot':\n        return response.text();\n\n      case 'json':\n        return response.json();\n\n      default:\n        throw new TypeError(`Unknown format \"${params.format}\"!`);\n    }\n  }\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { SceneComponentProps, sceneGraph, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { Alert, Button, IconButton, Spinner, useStyles2 } from '@grafana/ui';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { InlineBanner } from '@shared/ui/InlineBanner';\nimport { Panel } from '@shared/ui/Panel/Panel';\nimport React from 'react';\n\nimport { ProfilesDataSourceVariable } from '../../domain/variables/ProfilesDataSourceVariable';\nimport { getSceneVariableValue } from '../../helpers/getSceneVariableValue';\nimport { AiReply } from './components/AiReply';\nimport { FollowUpForm } from './components/FollowUpForm';\nimport { useOpenAiChatCompletions } from './domain/useOpenAiChatCompletions';\nimport { FetchParams, useFetchDotProfiles } from './infrastructure/useFetchDotProfiles';\n\ninterface SceneAiPanelState extends SceneObjectState {}\n\nexport class SceneAiPanel extends SceneObjectBase<SceneAiPanelState> {\n  constructor() {\n    super({ key: 'ai-panel' });\n  }\n\n  validateFetchParams(isDiff: boolean, fetchParams: FetchParams) {\n    let params = fetchParams;\n    let error;\n\n    if (isDiff && fetchParams.length !== 2) {\n      error = new Error(\n        `Invalid number of fetch parameters for analyzing the diff flame graph (${fetchParams.length})!`\n      );\n      params = [];\n    } else if (!isDiff && fetchParams.length !== 1) {\n      error = new Error(`Invalid number of fetch parameters for analyzing the flame graph (${fetchParams.length})!`);\n      params = [];\n    }\n\n    return { params, error };\n  }\n\n  useSceneAiPanel = (isDiff: boolean, fetchParams: FetchParams): DomainHookReturnValue => {\n    const dataSourceUid = sceneGraph.findByKeyAndType(this, 'dataSource', ProfilesDataSourceVariable).useState()\n      .value as string;\n\n    const { params, error: validationError } = this.validateFetchParams(isDiff, fetchParams);\n\n    const { error: fetchError, isFetching, profiles } = useFetchDotProfiles(dataSourceUid, params);\n\n    const profileMetricId = getSceneVariableValue(this, 'profileMetricId');\n    const profileType = getProfileMetric(profileMetricId as ProfileMetricId).type;\n\n    const { reply, error: llmError, retry } = useOpenAiChatCompletions(profileType, profiles);\n\n    return {\n      data: {\n        validationError,\n        isLoading: isFetching || (!isFetching && !fetchError && !llmError && !reply.text.trim()),\n        fetchError,\n        llmError,\n        reply,\n        shouldDisplayReply: Boolean(reply?.hasStarted || reply?.hasFinished),\n        shouldDisplayFollowUpForm: !fetchError && !llmError && Boolean(reply?.hasFinished),\n      },\n      actions: {\n        retry,\n        submitFollowupQuestion(question: string) {\n          reply.askFollowupQuestion(question);\n        },\n      },\n    };\n  };\n\n  static Component = ({\n    model,\n    isDiff,\n    fetchParams,\n    onClose,\n  }: SceneComponentProps<SceneAiPanel> & {\n    isDiff: boolean;\n    fetchParams: FetchParams;\n    onClose: () => void;\n  }) => {\n    const styles = useStyles2(getStyles);\n    const { data, actions } = model.useSceneAiPanel(isDiff, fetchParams);\n\n    return (\n      <Panel\n        className={styles.sidePanel}\n        title=\"Flame graph analysis\"\n        isLoading={data.isLoading}\n        headerActions={\n          <IconButton\n            title=\"Close panel\"\n            name=\"times-circle\"\n            variant=\"secondary\"\n            aria-label=\"close\"\n            onClick={onClose}\n          />\n        }\n        dataTestId=\"ai-panel\"\n      >\n        <div className={styles.content}>\n          {data.validationError && (\n            <InlineBanner severity=\"error\" title=\"Validation error!\" error={data.validationError} />\n          )}\n\n          {data.fetchError && (\n            <InlineBanner\n              severity=\"error\"\n              title=\"Error while loading profile data!\"\n              message=\"Sorry for any inconvenience, please try again later.\"\n              error={data.fetchError}\n            />\n          )}\n\n          {data.shouldDisplayReply && <AiReply reply={data.reply} />}\n\n          {data.isLoading && (\n            <>\n              <Spinner inline />\n              &nbsp;Analyzing...\n            </>\n          )}\n\n          {data.llmError && (\n            <Alert title=\"An error occured while generating content using OpenAI!\" severity=\"warning\">\n              <div>\n                <div>\n                  <p>{data.llmError.message}</p>\n                  <p>\n                    Sorry for any inconvenience, please retry or if the problem persists, contact your organization\n                    admin.\n                  </p>\n                </div>\n              </div>\n              <Button className={styles.retryButton} variant=\"secondary\" fill=\"outline\" onClick={() => actions.retry()}>\n                Retry\n              </Button>\n            </Alert>\n          )}\n\n          {data.shouldDisplayFollowUpForm && <FollowUpForm onSubmit={actions.submitFollowupQuestion} />}\n        </div>\n      </Panel>\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  sidePanel: css`\n    flex: 1 0 50%;\n    margin-left: 8px;\n    max-width: calc(50% - 4px);\n  `,\n  title: css`\n    margin: -4px 0 4px 0;\n  `,\n  content: css`\n    padding: ${theme.spacing(1)};\n  `,\n  retryButton: css`\n    float: right;\n  `,\n});\n","import { TimeRange } from '@grafana/data';\nimport { useQuery } from '@tanstack/react-query';\n\nimport { ProfileApiClient } from '../../../infrastructure/profiles/ProfileApiClient';\nimport { DataSourceProxyClientBuilder } from '../../../infrastructure/series/http/DataSourceProxyClientBuilder';\nimport { cleanupDotResponse } from './cleanupDotResponse';\n\nexport type FetchParams = Array<{\n  query: string;\n  timeRange: TimeRange;\n}>;\n\nconst MAX_NODES = 100;\n\nexport function useFetchDotProfiles(dataSourceUid: string, fetchParams: FetchParams) {\n  const profileApiClient = DataSourceProxyClientBuilder.build(dataSourceUid, ProfileApiClient);\n\n  const { isFetching, error, data } = useQuery({\n    queryKey: [\n      'dot-profiles',\n      dataSourceUid,\n      ...fetchParams.flatMap(({ query, timeRange }) => [query, timeRange.from.unix(), timeRange.to.unix()]),\n      MAX_NODES,\n    ],\n    queryFn: () => {\n      // TODO: pass a signal options to properly abort all in-flight requests\n      return Promise.all(\n        fetchParams.map(({ query, timeRange }) =>\n          profileApiClient\n            .get({ query, timeRange, format: 'dot', maxNodes: MAX_NODES })\n            .then((response) => cleanupDotResponse(response as string))\n        )\n      );\n    },\n  });\n\n  return {\n    isFetching,\n    error,\n    profiles: data || [],\n  };\n}\n","export function cleanupDotResponse(profile: string): string {\n  return profile\n    .replace(/fontsize=\\d+ /g, '')\n    .replace(/id=\"node\\d+\" /g, '')\n    .replace(/labeltooltip=\".*\\)\" /g, '')\n    .replace(/tooltip=\".*\\)\" /g, '')\n    .replace(/(N\\d+ -> N\\d+).*/g, '$1')\n    .replace(/N\\d+ \\[label=\"other.*\\n/, '')\n    .replace(/shape=box /g, '')\n    .replace(/fillcolor=\"#\\w{6}\"/g, '')\n    .replace(/color=\"#\\w{6}\" /g, '');\n}\n","import { openai } from '@grafana/llm';\nimport { useCallback, useEffect, useState } from 'react';\nimport { SubscriptionLike } from 'rxjs';\n\nimport { buildPrompts, model } from './buildLlmPrompts';\n\ntype Messages = openai.Message[];\n\nexport type OpenAiReply = {\n  reply: {\n    text: string;\n    hasStarted: boolean;\n    hasFinished: boolean;\n    messages: Messages;\n    askFollowupQuestion: (question: string) => void;\n  };\n  retry: () => void;\n  error: Error | null;\n};\n\nexport function useOpenAiChatCompletions(profileType: string, profiles: string[]): OpenAiReply {\n  const [reply, setReply] = useState('');\n  const [replyHasStarted, setReplyHasStarted] = useState(false);\n  const [replyHasFinished, setReplyHasFinished] = useState(false);\n  const [messages, setMessages] = useState<Messages>([]);\n  const [error, setError] = useState<Error | null>(null);\n  const [subscription, setSubscription] = useState<SubscriptionLike>();\n\n  const sendMessages = useCallback((messagesToSend: Messages) => {\n    setMessages(messagesToSend);\n\n    setError(null);\n\n    setReply('');\n    setReplyHasStarted(true);\n    setReplyHasFinished(false);\n\n    const stream = openai\n      .streamChatCompletions({\n        model,\n        messages: messagesToSend,\n      })\n      .pipe(\n        // Accumulate the stream content into a stream of strings, where each\n        // element contains the accumulated message so far.\n        openai.accumulateContent()\n      );\n\n    const subscription = stream.subscribe({\n      next: setReply,\n      error(e) {\n        setError(e);\n        setReplyHasStarted(false);\n        setReplyHasFinished(true);\n        setSubscription(undefined);\n      },\n      complete() {\n        setReplyHasStarted(false);\n        setReplyHasFinished(true);\n        setSubscription(undefined);\n      },\n    });\n\n    setSubscription(subscription);\n  }, []);\n\n  const askFollowupQuestion = useCallback(\n    (question: string): void => {\n      const messagesToAdd: Messages = [\n        {\n          role: 'assistant',\n          content: reply,\n        },\n        {\n          role: 'user',\n          content: question,\n        },\n      ];\n\n      try {\n        sendMessages([...messages, ...messagesToAdd]);\n      } catch (error) {\n        setError(error as Error);\n      }\n    },\n    [messages, reply, sendMessages]\n  );\n\n  useEffect(() => {\n    if (!profiles.length || messages.length > 0) {\n      return;\n    }\n\n    const prompts = buildPrompts({\n      system: 'empty',\n      user: profiles.length === 2 ? 'diff' : 'single',\n      profileType,\n      profiles,\n    });\n\n    try {\n      sendMessages([\n        {\n          role: 'system',\n          content: prompts.system,\n        },\n        {\n          role: 'system',\n          content: prompts.user,\n        },\n      ]);\n    } catch (error) {\n      setError(error as Error);\n    }\n  }, [messages.length, profileType, profiles, profiles.length, sendMessages]);\n\n  useEffect(() => {\n    return () => {\n      if (subscription) {\n        subscription.unsubscribe();\n        setSubscription(undefined);\n      }\n    };\n  }, [subscription]);\n\n  return {\n    reply: {\n      text: reply,\n      hasStarted: replyHasStarted,\n      hasFinished: replyHasFinished,\n      messages: messages,\n      askFollowupQuestion,\n    },\n    retry() {\n      if (messages.length > 0) {\n        try {\n          sendMessages(messages);\n        } catch (error) {\n          setError(error as Error);\n        }\n      }\n    },\n    error,\n  };\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nexport interface EventDiffAutoSelectPayload {\n  wholeRange: boolean;\n}\n\nexport class EventDiffAutoSelect extends BusEventWithPayload<EventDiffAutoSelectPayload> {\n  public static type = 'diff-auto-select';\n}\n","import { BusEventWithPayload } from '@grafana/data';\n\nexport interface EventDiffChoosePresetPayload {}\n\nexport class EventDiffChoosePreset extends BusEventWithPayload<EventDiffChoosePresetPayload> {\n  public static type = 'diff-choose-preset';\n}\n","import { displayWarning } from '@shared/domain/displayStatus';\nimport { DEFAULT_SETTINGS } from '@shared/infrastructure/settings/PluginSettings';\nimport { useFetchPluginSettings } from '@shared/infrastructure/settings/useFetchPluginSettings';\nimport { logger } from '@shared/infrastructure/tracking/logger';\n\nimport { useUrlSearchParams } from './useUrlSearchParams';\n\nfunction useSetDefaultMaxNodes(hasMaxNodes: boolean, setMaxNodes: (newMaxNodes: number) => void) {\n  const { isFetching, error, settings } = useFetchPluginSettings({ enabled: !hasMaxNodes });\n\n  if (hasMaxNodes || isFetching) {\n    return;\n  }\n\n  if (error) {\n    displayWarning([\n      'Error while retrieving the plugin settings!',\n      'Some features might not work as expected (e.g. flame graph max nodes). Please try to reload the page, sorry for the inconvenience.',\n    ]);\n    logger.error(error);\n\n    setMaxNodes(DEFAULT_SETTINGS.maxNodes);\n\n    return;\n  }\n\n  setMaxNodes(settings!.maxNodes);\n}\n\nexport function useMaxNodesFromUrl(): [number | null, (newMaxNodes: number) => void] {\n  const { searchParams, pushNewUrl } = useUrlSearchParams();\n  const maxNodes = Number(searchParams.get('maxNodes') ?? '');\n\n  const setMaxNodes = (newMaxNodes: number) => {\n    pushNewUrl({ maxNodes: String(newMaxNodes) });\n  };\n\n  useSetDefaultMaxNodes(maxNodes > 0, setMaxNodes);\n\n  return [maxNodes, setMaxNodes];\n}\n","import { useHistory, useLocation } from 'react-router-dom';\n\nexport function useUrlSearchParams() {\n  const history = useHistory();\n  const location = useLocation();\n\n  return {\n    searchParams: new URLSearchParams(location.search),\n    pushNewUrl: (newParams: Record<string, string>) => {\n      const newSearchParams = new URLSearchParams(window.location.search);\n\n      for (const [key, value] of Object.entries(newParams)) {\n        newSearchParams.set(key, value);\n      }\n\n      history.replace({ search: newSearchParams.toString() });\n    },\n  };\n}\n","import { TimeRange } from '@grafana/data';\nimport { FlamebearerProfile } from '@shared/types/FlamebearerProfile';\n\nimport { DataSourceProxyClient } from '../../../../../infrastructure/series/http/DataSourceProxyClient';\n\ntype DiffProfileResponse = FlamebearerProfile;\n\ntype GetParams = {\n  leftQuery: string;\n  leftTimeRange: TimeRange;\n  rightQuery: string;\n  rightTimeRange: TimeRange;\n  maxNodes: number | null;\n};\n\nexport class DiffProfileApiClient extends DataSourceProxyClient {\n  constructor(options: { dataSourceUid: string }) {\n    super(options);\n  }\n\n  async get(params: GetParams): Promise<DiffProfileResponse> {\n    const searchParams = new URLSearchParams({\n      leftQuery: params.leftQuery,\n      leftFrom: String(params.leftTimeRange.from.unix() * 1000),\n      leftUntil: String(params.leftTimeRange.to.unix() * 1000),\n      rightQuery: params.rightQuery,\n      rightFrom: String(params.rightTimeRange.from.unix() * 1000),\n      rightUntil: String(params.rightTimeRange.to.unix() * 1000),\n    });\n\n    if (params.maxNodes) {\n      searchParams.set('max-nodes', String(params.maxNodes));\n    }\n\n    const response = await this.fetch(`/pyroscope/render-diff?${searchParams.toString()}`);\n\n    const json = await response.json();\n\n    return json;\n  }\n}\n","import { TimeRange } from '@grafana/data';\nimport { useMaxNodesFromUrl } from '@shared/domain/url-params/useMaxNodesFromUrl';\nimport { useQuery } from '@tanstack/react-query';\n\nimport { DataSourceProxyClientBuilder } from '../../../../../infrastructure/series/http/DataSourceProxyClientBuilder';\nimport { DiffProfileApiClient } from './DiffProfileApiClient';\n\ntype FetchParams = {\n  enabled: boolean;\n  dataSourceUid: string;\n  baselineTimeRange: TimeRange;\n  baselineQuery: string;\n  comparisonTimeRange: TimeRange;\n  comparisonQuery: string;\n};\n\nexport function useFetchDiffProfile({\n  enabled,\n  dataSourceUid,\n  baselineTimeRange,\n  baselineQuery,\n  comparisonTimeRange,\n  comparisonQuery,\n}: FetchParams) {\n  const [maxNodes] = useMaxNodesFromUrl();\n\n  const diffProfileApiClient = DataSourceProxyClientBuilder.build(dataSourceUid, DiffProfileApiClient);\n\n  const { isFetching, error, data, refetch } = useQuery({\n    // for UX: keep previous data while fetching -> profile does not re-render with empty panels when refreshing\n    placeholderData: (previousData) => previousData,\n    enabled: Boolean(enabled && maxNodes),\n    // eslint-disable-next-line @tanstack/query/exhaustive-deps\n    queryKey: [\n      'diff-profile',\n      dataSourceUid,\n      baselineQuery,\n      baselineTimeRange.from.unix(),\n      baselineTimeRange.to.unix(),\n      comparisonQuery,\n      comparisonTimeRange.from.unix(),\n      comparisonTimeRange.to.unix(),\n      maxNodes,\n    ],\n    queryFn: () => {\n      diffProfileApiClient.abort();\n\n      const params = {\n        leftQuery: baselineQuery,\n        leftTimeRange: baselineTimeRange,\n        rightQuery: comparisonQuery,\n        rightTimeRange: comparisonTimeRange,\n        maxNodes,\n      };\n\n      return diffProfileApiClient.get(params).then((json) => ({\n        profile: {\n          version: json.version,\n          flamebearer: json.flamebearer,\n          metadata: json.metadata,\n        },\n      }));\n    },\n  });\n\n  return {\n    isFetching,\n    error: diffProfileApiClient.isAbortError(error) ? null : error,\n    ...data,\n    refetch,\n  };\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, Collapse, useStyles2 } from '@grafana/ui';\nimport DiffViewHowToImg from '@img/diff-view-how-to.gif';\nimport { InlineBanner } from '@shared/ui/InlineBanner';\nimport React, { useState } from 'react';\n\ntype MissingSelectionsBannerProps = {\n  onClickAutoSelect: () => void;\n  onClickChoosePreset: () => void;\n  onOpenLearnHow: () => void;\n};\n\nexport function MissingSelectionsBanner({\n  onClickAutoSelect,\n  onClickChoosePreset,\n  onOpenLearnHow,\n}: MissingSelectionsBannerProps) {\n  const styles = useStyles2(getStyles);\n\n  const [isCollapseOpen, setIsCollapseOpen] = useState(false);\n\n  const onToggleCollapse = () => {\n    if (!isCollapseOpen) {\n      onOpenLearnHow();\n    }\n    setIsCollapseOpen(!isCollapseOpen);\n  };\n\n  return (\n    <InlineBanner\n      severity=\"info\"\n      title=\"Select both the baseline and the comparison flame graph ranges to view the diff flame graph\"\n      message={\n        <div className={styles.infoMsg}>\n          <p>How?</p>\n          <p>\n            <Button variant=\"primary\" onClick={onClickAutoSelect}>\n              Auto-select\n            </Button>{' '}\n            or{' '}\n            <Button variant=\"primary\" fill=\"text\" className={styles.textButton} onClick={onClickChoosePreset}>\n              choose a preset\n            </Button>\n          </p>\n          <p>Alternatively:</p>\n          <Collapse\n            label=\"Click here to learn how to select the flame graph ranges with the mouse\"\n            collapsible\n            className={styles.collapse}\n            isOpen={isCollapseOpen}\n            onToggle={onToggleCollapse}\n          >\n            <div className={styles.collapseContent}>\n              <ol>\n                <li>Ensure that the &ldquo;Flame graph&rdquo; range selection mode is selected</li>\n                <li>\n                  Use your mouse to select the desired time ranges on both the baseline and the comparison time series\n                </li>\n              </ol>\n              <img src={DiffViewHowToImg} alt=\"How to view the diff flame graph\" />\n            </div>\n          </Collapse>\n        </div>\n      }\n    />\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  infoMsg: css`\n    padding: ${theme.spacing(2)} 0 0 0;\n  `,\n  textButton: css`\n    padding: 0;\n  `,\n  collapse: css`\n    background: transparent;\n    border: 0;\n  `,\n  collapseContent: css`\n    padding: 0 ${theme.spacing(5)};\n\n    & img {\n      max-width: 100%;\n      width: auto;\n      margin-top: ${theme.spacing(2)};\n    }\n  `,\n});\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { SceneComponentProps, sceneGraph, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { Spinner, useStyles2 } from '@grafana/ui';\nimport { FlameGraph } from '@shared/components/FlameGraph/FlameGraph';\nimport { displayWarning } from '@shared/domain/displayStatus';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { useToggleSidePanel } from '@shared/domain/useToggleSidePanel';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport { useFetchPluginSettings } from '@shared/infrastructure/settings/useFetchPluginSettings';\nimport { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { FlamebearerProfile } from '@shared/types/FlamebearerProfile';\nimport { InlineBanner } from '@shared/ui/InlineBanner';\nimport { Panel } from '@shared/ui/Panel/Panel';\nimport { PyroscopeLogo } from '@shared/ui/PyroscopeLogo';\nimport React, { useEffect, useMemo } from 'react';\n\nimport { useBuildPyroscopeQuery } from '../../../../domain/useBuildPyroscopeQuery';\nimport { ProfilesDataSourceVariable } from '../../../../domain/variables/ProfilesDataSourceVariable';\nimport { getSceneVariableValue } from '../../../../helpers/getSceneVariableValue';\nimport { AIButton } from '../../../SceneAiPanel/components/AiButton/AIButton';\nimport { SceneAiPanel } from '../../../SceneAiPanel/SceneAiPanel';\nimport { EventDiffAutoSelect } from '../../domain/events/EventDiffAutoSelect';\nimport { EventDiffChoosePreset } from '../../domain/events/EventDiffChoosePreset';\nimport { SceneExploreDiffFlameGraph } from '../../SceneExploreDiffFlameGraph';\nimport { useFetchDiffProfile } from './infrastructure/useFetchDiffProfile';\nimport { MissingSelectionsBanner } from './ui/MissingSelectionsBanner';\n\ninterface SceneDiffFlameGraphState extends SceneObjectState {\n  aiPanel: SceneAiPanel;\n}\n\nexport class SceneDiffFlameGraph extends SceneObjectBase<SceneDiffFlameGraphState> {\n  constructor() {\n    super({\n      key: 'diff-flame-graph',\n      aiPanel: new SceneAiPanel(),\n    });\n  }\n\n  buildTitle() {\n    const serviceName = getSceneVariableValue(this, 'serviceName');\n    const profileMetricId = getSceneVariableValue(this, 'profileMetricId');\n    const profileMetricType = getProfileMetric(profileMetricId as ProfileMetricId).type;\n\n    return (\n      <>\n        <PyroscopeLogo size=\"small\" />\n        Diff flame graph for {serviceName} ({profileMetricType})\n      </>\n    );\n  }\n\n  useSceneDiffFlameGraph = (): DomainHookReturnValue => {\n    const { aiPanel } = this.useState();\n    const { baselineTimeRange, comparisonTimeRange } = (this.parent as SceneExploreDiffFlameGraph).useDiffTimeRanges();\n\n    const baselineQuery = useBuildPyroscopeQuery(this, 'filtersBaseline');\n    const comparisonQuery = useBuildPyroscopeQuery(this, 'filtersComparison');\n\n    const { settings, error: fetchSettingsError } = useFetchPluginSettings();\n\n    const dataSourceUid = sceneGraph.findByKeyAndType(this, 'dataSource', ProfilesDataSourceVariable).useState()\n      .value as string;\n\n    const isDiffQueryEnabled = Boolean(\n      baselineQuery &&\n        comparisonQuery &&\n        // warning: sending zero parameters values to the API would make the pods crash\n        // so we enable only when we have non-zero parameters values\n        baselineTimeRange.from.unix() &&\n        baselineTimeRange.to.unix() &&\n        comparisonTimeRange.from.unix() &&\n        comparisonTimeRange.to.unix()\n    );\n\n    const {\n      isFetching,\n      error: fetchProfileError,\n      profile,\n    } = useFetchDiffProfile({\n      enabled: isDiffQueryEnabled,\n      dataSourceUid,\n      baselineTimeRange,\n      baselineQuery,\n      comparisonTimeRange,\n      comparisonQuery,\n    });\n\n    const noProfileDataAvailable =\n      isDiffQueryEnabled && !isFetching && !fetchProfileError && profile?.flamebearer.numTicks === 0;\n\n    const shouldDisplayFlamegraph = Boolean(\n      isDiffQueryEnabled && !fetchProfileError && !noProfileDataAvailable && profile\n    );\n    const hasMissingSelections = !isDiffQueryEnabled;\n\n    return {\n      data: {\n        title: this.buildTitle(),\n        isLoading: isFetching,\n        fetchProfileError,\n        noProfileDataAvailable,\n        shouldDisplayFlamegraph,\n        hasMissingSelections,\n        profile: profile as FlamebearerProfile,\n        settings,\n        fetchSettingsError,\n        ai: {\n          panel: aiPanel,\n          fetchParams: [\n            { query: baselineQuery, timeRange: baselineTimeRange },\n            { query: comparisonQuery, timeRange: comparisonTimeRange },\n          ],\n        },\n      },\n      actions: {},\n    };\n  };\n\n  onClickAutoSelect = () => {\n    reportInteraction('g_pyroscope_app_diff_auto_select_clicked');\n\n    this.publishEvent(new EventDiffAutoSelect({ wholeRange: false }), true);\n  };\n\n  onClickChoosePreset = () => {\n    reportInteraction('g_pyroscope_app_diff_choose_preset_clicked');\n\n    this.publishEvent(new EventDiffChoosePreset({}), true);\n  };\n\n  onOpenLearnHow = () => {\n    reportInteraction('g_pyroscope_app_diff_learn_how_clicked');\n  };\n\n  static Component = ({ model }: SceneComponentProps<SceneDiffFlameGraph>) => {\n    const styles = useStyles2(getStyles);\n\n    const { data } = model.useSceneDiffFlameGraph();\n    const sidePanel = useToggleSidePanel();\n\n    const isAiButtonDisabled = data.isLoading || data.hasMissingSelections || data.noProfileDataAvailable;\n\n    useEffect(() => {\n      if (isAiButtonDisabled) {\n        sidePanel.close();\n      }\n    }, [isAiButtonDisabled, sidePanel]);\n\n    if (data.fetchSettingsError) {\n      displayWarning([\n        'Error while retrieving the plugin settings!',\n        'Some features might not work as expected (e.g. flamegraph export options). Please try to reload the page, sorry for the inconvenience.',\n      ]);\n    }\n\n    const panelTitle = useMemo(\n      () => (\n        <>\n          {data.title}\n          {data.isLoading && <Spinner inline className={styles.spinner} />}\n        </>\n      ),\n      [data.isLoading, data.title, styles.spinner]\n    );\n\n    return (\n      <div className={styles.flex}>\n        <Panel\n          dataTestId=\"diff-flame-graph-panel\"\n          className={styles.flamegraphPanel}\n          title={panelTitle}\n          isLoading={data.isLoading}\n          headerActions={\n            <AIButton\n              disabled={isAiButtonDisabled || sidePanel.isOpen('ai')}\n              onClick={() => sidePanel.open('ai')}\n              interactionName=\"g_pyroscope_app_explain_flamegraph_clicked\"\n            >\n              Explain Flame Graph\n            </AIButton>\n          }\n        >\n          {data.hasMissingSelections && (\n            <MissingSelectionsBanner\n              onClickAutoSelect={model.onClickAutoSelect}\n              onClickChoosePreset={model.onClickChoosePreset}\n              onOpenLearnHow={model.onOpenLearnHow}\n            />\n          )}\n\n          {data.fetchProfileError && (\n            <InlineBanner severity=\"error\" title=\"Error while loading profile data!\" error={data.fetchProfileError} />\n          )}\n\n          {data.noProfileDataAvailable && (\n            <InlineBanner\n              severity=\"warning\"\n              title=\"No profile data available\"\n              message=\"Please verify that you've selected adequate filters and time ranges.\"\n            />\n          )}\n\n          {data.shouldDisplayFlamegraph && (\n            <FlameGraph\n              diff={true}\n              profile={data.profile}\n              enableFlameGraphDotComExport={data.settings?.enableFlameGraphDotComExport}\n              collapsedFlamegraphs={data.settings?.collapsedFlamegraphs}\n            />\n          )}\n        </Panel>\n\n        {sidePanel.isOpen('ai') && (\n          <data.ai.panel.Component\n            model={data.ai.panel}\n            isDiff\n            fetchParams={data.ai.fetchParams}\n            onClose={sidePanel.close}\n          />\n        )}\n      </div>\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  flex: css`\n    display: flex;\n  `,\n  flamegraphPanel: css`\n    min-width: 0;\n    flex-grow: 1;\n  `,\n  sidePanel: css`\n    flex: 1 0 50%;\n    margin-left: 8px;\n    max-width: calc(50% - 4px);\n  `,\n  spinner: css`\n    margin-left: ${theme.spacing(1)};\n  `,\n  aiButton: css`\n    margin-top: ${theme.spacing(1)};\n  `,\n});\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Badge, Icon, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nexport const FEEDBACK_FORM_URL = 'https://grafana.qualtrics.com/jfe/form/SV_6Gav4IUU6jcYfd4';\n\n// borrowed from https://github.com/grafana/explore-logs/blob/main/src/Components/IndexScene/GiveFeedbackButton.tsx\nexport const GiveFeedbackButton = () => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.wrapper}>\n      <a\n        href={FEEDBACK_FORM_URL}\n        className={styles.feedback}\n        title=\"Share your thoughts about Profiles in Grafana.\"\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n      >\n        <Icon name=\"comment-alt-message\" /> Give feedback\n      </a>\n      <a\n        href={FEEDBACK_FORM_URL}\n        className={styles.feedback}\n        title=\"Share your thoughts about Profiles in Grafana.\"\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n      >\n        <Badge text={'Preview'} color={'blue'} icon={'rocket'} />\n      </a>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css({\n      display: 'flex',\n      gap: theme.spacing(1),\n      justifyContent: 'flex-end',\n      paddingTop: '4px',\n    }),\n    feedback: css({\n      alignSelf: 'center',\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize,\n      '&:hover': {\n        color: theme.colors.text.link,\n      },\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport {\n  SceneComponentProps,\n  sceneGraph,\n  SceneObjectBase,\n  SceneObjectState,\n  VariableDependencyConfig,\n} from '@grafana/scenes';\nimport { Button, Modal, Select, useStyles2 } from '@grafana/ui';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport React from 'react';\n\nimport { FEEDBACK_FORM_URL } from '../../../GiveFeedbackButton';\nimport { CompareTarget } from '../../../SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/domain/types';\nimport { EventDiffAutoSelect } from '../../domain/events/EventDiffAutoSelect';\nimport { SceneComparePanel } from '../SceneComparePanel/SceneComparePanel';\n\ninterface ScenePresetsPickerState extends SceneObjectState {\n  name: string;\n  label: string;\n  isModalOpen: boolean;\n  isSelectOpen: boolean;\n  value: string | null;\n}\n\nexport type Preset = {\n  from: string;\n  to: string;\n  diffFrom: string;\n  diffTo: string;\n  label: string;\n};\n\nexport class ScenePresetsPicker extends SceneObjectBase<ScenePresetsPickerState> {\n  protected _variableDependency = new VariableDependencyConfig(this, {\n    variableNames: ['dataSource', 'serviceName'],\n    onReferencedVariableValueChanged: () => {\n      this.reset();\n    },\n  });\n\n  static PRESETS = [\n    {\n      label: 'Built-in presets',\n      value: 'built-in',\n      options: [\n        {\n          value: 'last hour (30m-window)',\n          label: 'Last hour (30m-window)',\n          baseline: {\n            from: 'now-1h',\n            to: 'now',\n            diffFrom: 'now-1h',\n            diffTo: 'now-30m',\n            label: 'last hour',\n          },\n          comparison: {\n            from: 'now-1h',\n            to: 'now',\n            diffFrom: 'now-30m',\n            diffTo: 'now',\n            label: 'last hour',\n          },\n        },\n        {\n          value: 'last hour (1h-window)',\n          label: 'Last hour (1h-window)',\n          baseline: {\n            from: 'now-1h',\n            to: 'now',\n            diffFrom: 'now-1h',\n            diffTo: 'now',\n            label: 'last hour',\n          },\n          comparison: {\n            from: 'now-1h',\n            to: 'now',\n            diffFrom: 'now-1h',\n            diffTo: 'now',\n            label: 'last hour',\n          },\n        },\n        {\n          value: '6h ago vs now',\n          label: '6h ago vs now (30m-window)',\n          baseline: {\n            from: 'now-375m',\n            to: 'now-315m',\n            diffFrom: 'now-375m',\n            diffTo: 'now-345m',\n            label: '6h ago',\n          },\n          comparison: {\n            from: 'now-1h',\n            to: 'now',\n            diffFrom: 'now-30m',\n            diffTo: 'now',\n            label: 'last hour',\n          },\n        },\n        {\n          value: '24h ago vs now',\n          label: '24h ago vs now (30m-window)',\n          baseline: {\n            from: 'now-1455m',\n            to: 'now-1395m',\n            diffFrom: 'now-1455m',\n            diffTo: 'now-1425m',\n            label: '24h ago',\n          },\n          comparison: {\n            from: 'now-1h',\n            to: 'now',\n            diffFrom: 'now-30m',\n            diffTo: 'now',\n            label: 'last hour',\n          },\n        },\n        {\n          value: 'auto-select-25',\n          label: 'Auto-select (25% range)',\n        },\n        {\n          value: 'auto-select-whole',\n          label: 'Auto-select (whole range)',\n        },\n      ],\n    },\n    {\n      label: 'My presets',\n      value: 'custom',\n      options: [\n        {\n          label: 'Dummy preset saved earlier',\n          value: 'dummy',\n        },\n      ],\n    },\n  ];\n\n  constructor() {\n    super({\n      name: 'compare-presets',\n      label: 'Comparison presets',\n      value: null,\n      isModalOpen: false,\n      isSelectOpen: false,\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    [CompareTarget.BASELINE, CompareTarget.COMPARISON].forEach((compareTarget) => {\n      this._subs.add(\n        sceneGraph\n          .findByKeyAndType(this, `${compareTarget}-panel`, SceneComparePanel)\n          .state.$timeRange.subscribeToState((newState, prevState) => {\n            if (newState.from !== prevState.from || newState.to !== prevState.to) {\n              this.setState({ value: null });\n            }\n          })\n      );\n    });\n  }\n\n  onChangePreset = (option: SelectableValue<string>) => {\n    reportInteraction('g_pyroscope_app_diff_preset_selected', { value: option.value as string });\n\n    this.closeSelect();\n\n    if (option.value === 'dummy') {\n      this.setState({ value: null, isModalOpen: true });\n      return;\n    }\n\n    if (option.value?.startsWith('auto-select-')) {\n      this.publishEvent(new EventDiffAutoSelect({ wholeRange: option.value === 'auto-select-whole' }), true);\n      return;\n    }\n\n    [CompareTarget.BASELINE, CompareTarget.COMPARISON].forEach((compareTarget) => {\n      sceneGraph.findByKeyAndType(this, `${compareTarget}-panel`, SceneComparePanel).applyPreset(option[compareTarget]);\n    });\n\n    this.setState({ value: option.value });\n  };\n\n  onClickSave = () => {\n    reportInteraction('g_pyroscope_app_diff_preset_save_clicked');\n\n    this.setState({ isModalOpen: true });\n  };\n\n  closeModal = () => {\n    this.setState({ isModalOpen: false });\n  };\n\n  openSelect() {\n    this.setState({ isSelectOpen: true });\n  }\n\n  closeSelect() {\n    this.setState({ isSelectOpen: false });\n  }\n\n  onOpenSelect = () => {\n    setTimeout(() => this.openSelect(), 0);\n  };\n\n  onCloseSelect = () => {\n    this.closeSelect();\n  };\n\n  reset() {\n    this.setState({ value: null, isSelectOpen: false, isModalOpen: false });\n  }\n\n  static Component({ model }: SceneComponentProps<ScenePresetsPicker & { onChange: any }>) {\n    const styles = useStyles2(getStyles); // eslint-disable-line react-hooks/rules-of-hooks\n    const { value, isSelectOpen, isModalOpen } = model.useState();\n\n    return (\n      <>\n        <div className={styles.presetsContainer}>\n          <Select\n            className={styles.select}\n            placeholder=\"Choose a preset\"\n            value={value}\n            options={ScenePresetsPicker.PRESETS}\n            onChange={model.onChangePreset}\n            isOpen={isSelectOpen}\n            onOpenMenu={model.onOpenSelect}\n            onCloseMenu={model.onCloseSelect}\n          />\n          <Button\n            icon=\"save\"\n            variant=\"secondary\"\n            tooltip=\"Save the current time ranges and filters as a custom preset\"\n            onClick={model.onClickSave}\n          />\n        </div>\n        <Modal\n          title=\"Custom user presets\"\n          isOpen={isModalOpen}\n          closeOnEscape={true}\n          closeOnBackdropClick={true}\n          onDismiss={model.closeModal}\n        >\n          <p>\n            This feature, which would allow you to save the current time ranges and filters, is currently not\n            implemented.\n          </p>\n          <p>\n            Please let us know if you would be interested to use it by{' '}\n            <a href={FEEDBACK_FORM_URL} target=\"_blank\" rel=\"noreferrer noopener\" className={styles.link}>\n              leaving us your feedback.\n            </a>\n          </p>\n          <p>Thank you!</p>\n          <Modal.ButtonRow>\n            <Button variant=\"secondary\" fill=\"outline\" onClick={model.closeModal}>\n              Cancel\n            </Button>\n            <Button onClick={model.closeModal} disabled>\n              Save\n            </Button>\n          </Modal.ButtonRow>\n        </Modal>\n      </>\n    );\n  }\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  presetsContainer: css`\n    display: flex;\n  `,\n  select: css`\n    min-width: ${theme.spacing(24)};\n    text-align: left;\n  `,\n  link: css`\n    color: ${theme.colors.text.link};\n  `,\n});\n","import { css } from '@emotion/css';\nimport { DashboardCursorSync, GrafanaTheme2 } from '@grafana/data';\nimport { locationService } from '@grafana/runtime';\nimport { behaviors, SceneComponentProps, sceneGraph, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { ProfileMetricVariable } from '../../domain/variables/ProfileMetricVariable';\nimport { ServiceNameVariable } from '../../domain/variables/ServiceNameVariable/ServiceNameVariable';\nimport { CompareTarget } from '../SceneExploreServiceLabels/components/SceneGroupByLabels/components/SceneLabelValuesGrid/domain/types';\nimport { SceneComparePanel } from './components/SceneComparePanel/SceneComparePanel';\nimport { SceneDiffFlameGraph } from './components/SceneDiffFlameGraph/SceneDiffFlameGraph';\nimport { ScenePresetsPicker } from './components/ScenePresetsPicker/ScenePresetsPicker';\nimport { syncYAxis } from './domain/behaviours/syncYAxis';\nimport { EventDiffAutoSelect } from './domain/events/EventDiffAutoSelect';\nimport { EventDiffChoosePreset } from './domain/events/EventDiffChoosePreset';\n\ninterface SceneExploreDiffFlameGraphState extends SceneObjectState {\n  baselinePanel: SceneComparePanel;\n  comparisonPanel: SceneComparePanel;\n  body: SceneDiffFlameGraph;\n  presetsPicker: ScenePresetsPicker;\n}\n\nexport class SceneExploreDiffFlameGraph extends SceneObjectBase<SceneExploreDiffFlameGraphState> {\n  constructor({ useAncestorTimeRange }: { useAncestorTimeRange: boolean }) {\n    super({\n      key: 'explore-diff-flame-graph',\n      baselinePanel: new SceneComparePanel({\n        target: CompareTarget.BASELINE,\n        useAncestorTimeRange,\n      }),\n      comparisonPanel: new SceneComparePanel({\n        target: CompareTarget.COMPARISON,\n        useAncestorTimeRange,\n      }),\n      $behaviors: [\n        new behaviors.CursorSync({\n          key: 'metricCrosshairSync',\n          sync: DashboardCursorSync.Crosshair,\n        }),\n        syncYAxis(),\n      ],\n      body: new SceneDiffFlameGraph(),\n      presetsPicker: new ScenePresetsPicker(),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    // hack to force UrlSyncManager to handle a new location\n    // this will sync the state from the URL by calling updateFromUrl() on all the time ranges (`SceneTimeRange` and our custom `SceneTimeRangeWithAnnotations`) that are defined on `SceneComparePanel`\n    // if not, landing on this view will result in empty URL search parameters (to/from and diffTo/diffFrom) which will make shareable links useless\n    locationService.partial({}, true); // replace to avoid creating history items\n\n    const profileMetricVariable = sceneGraph.findByKeyAndType(this, 'profileMetricId', ProfileMetricVariable);\n\n    profileMetricVariable.setState({ query: ProfileMetricVariable.QUERY_SERVICE_NAME_DEPENDENT });\n    profileMetricVariable.update(true);\n\n    this.subscribeToEvents();\n\n    return () => {\n      profileMetricVariable.setState({ query: ProfileMetricVariable.QUERY_DEFAULT });\n      profileMetricVariable.update(true);\n    };\n  }\n\n  subscribeToEvents() {\n    this._subs.add(\n      this.subscribeToEvent(EventDiffAutoSelect, (event) => {\n        this.autoSelectDiffRanges(event.payload.wholeRange);\n      })\n    );\n\n    this._subs.add(\n      this.subscribeToEvent(EventDiffChoosePreset, () => {\n        this.state.presetsPicker.openSelect();\n      })\n    );\n  }\n\n  autoSelectDiffRanges(selectWholeRange: boolean) {\n    const { baselinePanel, comparisonPanel } = this.state;\n\n    baselinePanel.autoSelectDiffRange(selectWholeRange);\n    comparisonPanel.autoSelectDiffRange(selectWholeRange);\n  }\n\n  // see SceneProfilesExplorer\n  getVariablesAndGridControls() {\n    return {\n      variables: [\n        sceneGraph.findByKeyAndType(this, 'serviceName', ServiceNameVariable),\n        sceneGraph.findByKeyAndType(this, 'profileMetricId', ProfileMetricVariable),\n        this.state.presetsPicker,\n      ],\n      gridControls: [],\n    };\n  }\n\n  useDiffTimeRanges = () => {\n    const { baselinePanel, comparisonPanel } = this.state;\n\n    const { annotationTimeRange: baselineTimeRange } = baselinePanel.useDiffTimeRange();\n    const { annotationTimeRange: comparisonTimeRange } = comparisonPanel.useDiffTimeRange();\n\n    return {\n      baselineTimeRange,\n      comparisonTimeRange,\n    };\n  };\n\n  static Component({ model }: SceneComponentProps<SceneExploreDiffFlameGraph>) {\n    const styles = useStyles2(getStyles); // eslint-disable-line react-hooks/rules-of-hooks\n\n    const { baselinePanel, comparisonPanel, body } = model.useState();\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.columns}>\n          <baselinePanel.Component model={baselinePanel} />\n          <comparisonPanel.Component model={comparisonPanel} />\n        </div>\n\n        <body.Component model={body} />\n      </div>\n    );\n  }\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n  `,\n  columns: css`\n    display: flex;\n    flex-direction: row;\n    gap: ${theme.spacing(1)};\n    margin-bottom: ${theme.spacing(1)};\n\n    & > div {\n      flex: 1 1 0;\n    }\n  `,\n});\n","import { sceneGraph, SceneObject, SceneObjectState, VizPanel } from '@grafana/scenes';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport { cloneDeep, merge } from 'lodash';\n\nimport { EventTimeseriesDataReceived } from '../../../../domain/events/EventTimeseriesDataReceived';\n\nexport function syncYAxis() {\n  return (vizPanel: SceneObject<SceneObjectState>) => {\n    const maxima = new Map<string, number>();\n\n    const eventSub = vizPanel.subscribeToEvent(EventTimeseriesDataReceived, (event) => {\n      const s = event.payload.series?.[0];\n      const refId = s?.refId;\n\n      if (!refId) {\n        logger.warn('Missing refId! Cannot sync y-axis on the timeseries.', event.payload.series);\n        return;\n      }\n\n      maxima.set(s.refId as string, Math.max(...s.fields[1].values));\n\n      updateTimeseriesAxis(vizPanel, Math.max(...maxima.values()));\n    });\n\n    return () => {\n      eventSub.unsubscribe();\n    };\n  };\n}\n\nfunction updateTimeseriesAxis(vizPanel: SceneObject, max: number) {\n  // findAllObjects searches down the full scene graph\n  const timeseries = sceneGraph.findAllObjects(\n    vizPanel,\n    (o) => o instanceof VizPanel && o.state.pluginId === 'timeseries'\n  ) as VizPanel[];\n\n  for (const t of timeseries) {\n    t.clearFieldConfigCache(); // required\n\n    t.setState({\n      fieldConfig: merge(cloneDeep(t.state.fieldConfig), { defaults: { max } }),\n    });\n  }\n}\n","import { DataSourceProxyClient } from '../../../../../infrastructure/series/http/DataSourceProxyClient';\n\ntype GithubLoginResponse = {\n  cookie: string;\n};\n\nexport class VcsClient extends DataSourceProxyClient {\n  async githubLogin(authorizationCode: string): Promise<GithubLoginResponse> {\n    const response = await this.fetch('/vcs.v1.VCSService/GithubLogin', {\n      method: 'POST',\n      body: JSON.stringify({\n        authorizationCode,\n      }),\n    });\n\n    const json = await response.json();\n\n    return json;\n  }\n\n  // TODO: return json + rename?\n  async githubApp(): Promise<string> {\n    const response = await this.fetch('/vcs.v1.VCSService/GithubApp', {\n      method: 'POST',\n      body: JSON.stringify({}),\n    });\n\n    const json = await response.json();\n\n    return json.clientID;\n  }\n}\n","import { logger } from '@shared/infrastructure/tracking/logger';\n\n/** The maximum Unix ms timestamp that can be stored in a JS Date object. */\nconst MAX_UNIX_TS_MS = 8640000000000000;\n\n/**\n * This is a value class representing a GitSession cookie value in the browser.\n * It provides APIs to decode a GitSession cookie value and to check if the the\n * underlying user token is expired.\n */\nexport class GitSessionCookie {\n  private readonly oauthTokenMetadata: string;\n  private readonly expiry: Date;\n\n  constructor(metadata: string, expiry: number) {\n    this.oauthTokenMetadata = metadata;\n    this.expiry = new Date(expiry);\n  }\n\n  /**\n   * Checks if the session cookie is expired. If the optional `biasMs` is\n   * provided, then the expiry is biased to expire sooner by `biasMs`\n   * milliseconds.\n   *\n   * @param biasMs Offset in milliseconds\n   * @returns True if the session cookie is expired.\n   */\n  isUserTokenExpired(biasMs = 0): boolean {\n    return Date.now() >= this.expiry.getTime() - biasMs;\n  }\n\n  /**\n   * Decodes the base64 encoded value portion of a session cookie.\n   *\n   * @param value The value portion of a session cookie\n   * @returns A valid `GitSessionCookie` if the string can be decoded, otherwise\n   * undefined.\n   */\n  static decode(value: string | undefined): GitSessionCookie | undefined {\n    if (value === undefined || value === '') {\n      return undefined;\n    }\n\n    let decoded;\n    try {\n      decoded = atob(value);\n    } catch (error) {\n      logger.error(error as Error, { info: 'Failed to base64 decode GitSession value' });\n      return undefined;\n    }\n\n    const { payload, isLegacy } = GitSessionCookie.tryDecode(decoded);\n    if (isLegacy) {\n      // This is a legacy cookie value, which does not expose a plaintext\n      // expiry. The expiry is set to a maximum date value and we rely on a 401\n      // response from the server to indicate expiration.\n      return new GitSessionCookie(value, MAX_UNIX_TS_MS);\n    }\n\n    return new GitSessionCookie(payload.metadata, Number(payload.expiry));\n  }\n\n  /**\n   * Attempts to decode the plaintext value portion of a session cookie.\n   *\n   * @param input Plaintext representation of a session cookie value\n   * @returns The payload of the session cookie if it's not a legacy cookie. If\n   * it is a legacy cookie, isLegacy is set to true.\n   */\n  private static tryDecode(input: string): { payload: any; isLegacy: boolean } {\n    try {\n      const payload = JSON.parse(input);\n      return { payload, isLegacy: false };\n    } catch {\n      return { payload: undefined, isLegacy: true };\n    }\n  }\n}\n","import { GitSessionCookie } from './GitSessionCookie';\n\nconst LEGACY_GITHUB_SESSION_COOKIE_NAME = 'GitSession';\nconst GITHUB_SESSION_COOKIE_NAME = 'pyroscope_git_session';\n\nexport interface GitSessionCookieManager {\n  getCookie(): GitSessionCookie | undefined;\n  setCookie(cookie: string): void;\n  deleteCookie(): void;\n}\n\ntype Cookie = {\n  key: string;\n  value: string;\n};\n\nclass InternalGitSessionCookieManager implements GitSessionCookieManager {\n  private rawCookie: Cookie | undefined;\n  private sessionCookie: GitSessionCookie | undefined;\n\n  getCookie(): GitSessionCookie | undefined {\n    // To make sure we're using a cookie that accurately reflects the browser\n    // state, let's be paranoid and make sure our cached cookie is accurate.\n    this.syncCookieWithBrowser();\n    return this.sessionCookie;\n  }\n\n  setCookie(cookie: string): void {\n    if (!cookie.startsWith(`${GITHUB_SESSION_COOKIE_NAME}=`)) {\n      cookie = `${GITHUB_SESSION_COOKIE_NAME}=${cookie}`;\n    }\n\n    const rawCookie = InternalGitSessionCookieManager.getCookieFromJar(cookie, GITHUB_SESSION_COOKIE_NAME);\n    if (rawCookie === undefined) {\n      // If we can't parse the key-value pair out of [cookie], let's return now\n      // to avoid corrupting the state of the manager or browser cookie.\n      return;\n    }\n\n    this.deleteLegacyCookie();\n    this.rawCookie = rawCookie;\n    this.sessionCookie = GitSessionCookie.decode(rawCookie.value);\n    document.cookie = `${cookie}; path=/`;\n  }\n\n  deleteCookie(): void {\n    document.cookie = `${GITHUB_SESSION_COOKIE_NAME}=; Path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;\n    this.deleteLegacyCookie();\n    this.rawCookie = undefined;\n    this.sessionCookie = undefined;\n  }\n\n  private deleteLegacyCookie(): void {\n    document.cookie = `${LEGACY_GITHUB_SESSION_COOKIE_NAME}=; Path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;\n  }\n\n  private syncCookieWithBrowser(): void {\n    const cookie = InternalGitSessionCookieManager.getCookieFromJar(document.cookie, GITHUB_SESSION_COOKIE_NAME);\n    if (cookie?.key === this.rawCookie?.key && cookie?.value === this.rawCookie?.value) {\n      return;\n    }\n\n    cookie !== undefined ? this.setCookie(`${cookie.key}=${cookie.value}`) : this.deleteCookie();\n  }\n\n  private static getCookieFromJar(jar: string, name: string): Cookie | undefined {\n    return jar\n      .split(';')\n      .map((ck) => {\n        // Just doing split('=') results in the trailing padding to be dropped.\n        // While `btoa` seems to handle this case without problem, being\n        // pedantic with padding isn't a bad thing. Doing this song and dance\n        // allows us to keep the trailing padding.\n        const [key, ...rest] = ck.trim().split('=');\n        const value = rest.join('=');\n        return { key: key.trim(), value: value?.trim() };\n      })\n      .find(({ key }) => key === name);\n  }\n}\n\nexport const gitSessionCookieManager: GitSessionCookieManager = new InternalGitSessionCookieManager();\n","function buildGitHubAuthURL(clientID: string, nonce: string): string {\n  const url = new URL('/login/oauth/authorize', 'https://github.com');\n\n  url.searchParams.set('client_id', clientID);\n  url.searchParams.set('scope', 'repo');\n  url.searchParams.set(\n    'state',\n    btoa(\n      JSON.stringify({\n        redirect_uri: window.location.origin,\n        nonce,\n      })\n    )\n  );\n\n  return url.toString();\n}\n\nconst POPUP_WIDTH = 800;\nconst POPUP_HEIGHT = 950;\n\nexport function openLoginPopup(clientId: string, nonce: string): Window | null {\n  const oauthURL = buildGitHubAuthURL(clientId, nonce);\n\n  const { top } = window;\n  const x = (top?.outerWidth ?? 0) / 2 + (top?.screenX ?? 0) - POPUP_WIDTH / 2;\n  const y = (top?.outerHeight ?? 0) / 2 + (top?.screenY ?? 0) - POPUP_HEIGHT / 2;\n\n  return window.open(\n    oauthURL,\n    'GitHub Login',\n    `toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${POPUP_WIDTH}, height=${POPUP_HEIGHT}, top=${y}, left=${x}`\n  );\n}\n","import { displayError } from '@shared/domain/displayStatus';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport React from 'react';\n\nimport { VcsClient } from '../../../infrastructure/VcsClient';\nimport { PrivateVcsClient } from '../../GitHubContextProvider/infrastructure/PrivateVcsClient';\nimport { nonce } from '../GitHubContextProvider';\nimport { GitSessionCookie } from '../infrastructure/GitSessionCookie';\nimport { gitSessionCookieManager } from '../infrastructure/GitSessionCookieManager';\nimport { openLoginPopup } from './openLoginPopup';\n\nexport async function githubLogin(\n  vcsClient: VcsClient,\n  privateVcsClient: PrivateVcsClient,\n  sessionCookie: GitSessionCookie | undefined,\n  externalWindow: Window | null | undefined,\n  setExternalWindow: React.Dispatch<React.SetStateAction<Window | null | undefined>>\n): Promise<void> {\n  if (externalWindow) {\n    externalWindow.close();\n  }\n\n  if (sessionCookie?.isUserTokenExpired()) {\n    // A session already exists, but it's expired. Refresh the session.\n    try {\n      await privateVcsClient.refresh();\n      return;\n    } catch (error) {\n      // This error isn't fatal and we can recover from it by restarting the\n      // oauth login flow.\n      logger.error(error as Error, { info: 'Failed to refresh GitHub user token' });\n\n      // Failed to refresh the token. Delete the old token and enter the\n      // follow login flow to get a completely new token.\n      gitSessionCookieManager.deleteCookie();\n    }\n  }\n\n  // No session cookie exists, begin the complete login flow.\n  try {\n    const clientId = await vcsClient.githubApp();\n    setExternalWindow(openLoginPopup(clientId, nonce));\n  } catch (error) {\n    displayError(error as Error, ['Failed to start login flow.', (error as Error).message]);\n  }\n}\n","import { VcsClient } from '../../../infrastructure/VcsClient';\n\nexport async function authFromUrl(\n  vcsClient: VcsClient,\n  urlSearchParams: URLSearchParams,\n  nonce: string\n): Promise<string> {\n  const code = urlSearchParams.get('code');\n  if (!code) {\n    return '';\n  }\n\n  const stateValue = urlSearchParams.get('state');\n  if (!stateValue) {\n    throw new Error('Invalid state parameter!');\n  }\n\n  let state;\n\n  try {\n    state = JSON.parse(atob(stateValue));\n  } catch (error) {\n    throw new Error('Invalid state parameter!');\n  }\n\n  if (state.nonce !== nonce) {\n    throw new Error('Invalid nonce parameter!');\n  }\n\n  const res = await vcsClient.githubLogin(code);\n  return res.cookie;\n}\n","import { createContext } from 'react';\n\nexport type TGitHubContext = {\n  isLoggedIn: boolean;\n  isSessionExpired: boolean;\n  isLoginInProgress: boolean;\n  login: () => Promise<void>;\n};\n\nexport const DEFAULT_GITHUB_CONTEXT: TGitHubContext = {\n  isLoginInProgress: false,\n  isLoggedIn: false,\n  isSessionExpired: false,\n  login: async () => {},\n};\n\nexport const GitHubContext = createContext(DEFAULT_GITHUB_CONTEXT);\n","import { logger } from '@shared/infrastructure/tracking/logger';\n\nimport { DataSourceProxyClient } from '../../../../../../../infrastructure/series/http/DataSourceProxyClient';\nimport { GitSessionCookieManager, gitSessionCookieManager } from './GitSessionCookieManager';\n\ntype GetFileResponse = {\n  content: string;\n  URL: string;\n};\n\ntype Commit = {\n  repositoryUrl: string;\n  gitRef: string;\n};\n\ntype GetCommitResponse = {\n  author: {\n    avatarURL: string;\n    login: string;\n  };\n  date?: Date;\n  message: string;\n  sha: string;\n  URL: string;\n};\n\nexport const PLACEHOLDER_COMMIT_DATA = Object.freeze({\n  sha: '<unknown>',\n  date: undefined,\n  author: {\n    login: 'unknown author',\n    avatarURL: '',\n  },\n  message: '',\n  URL: '',\n});\n\n/**\n * Exposes VCSService endpoints which are protected by token authentication. It\n * implements middleware to try auto-refresh expired tokens. While an\n * auto-refresh is in progress, subsequent requests are queued. Once the token\n * is refreshed, the queued requests will be dispatched using the new token.\n *\n * WARNING: Only one instance of this class should be instantiated because it\n * needs to keep a singleton reference to the `GitSession` cookie. This class\n * will refresh the `GitSession` cookie whenever it expires and multiple\n * instances will cause unexpected errors and race conditions.\n */\nexport class PrivateVcsClient extends DataSourceProxyClient {\n  private sessionManager: GitSessionCookieManager;\n\n  private pendingQueue: Array<(err: Error | undefined) => void>;\n  private isRefreshing: boolean;\n\n  /** Time interval where the session should be considered expired. */\n  private static readonly BIAS_MS = 5 * 60 * 1000; // 5 minutes\n\n  constructor(options: { dataSourceUid: string }) {\n    super(options);\n\n    this.sessionManager = gitSessionCookieManager;\n    this.isRefreshing = false;\n    this.pendingQueue = [];\n  }\n\n  /**\n   * Fetches a file from GitHub.\n   *\n   * @param repositoryUrl A repository url\n   * @param gitRef A ref of the file version\n   * @param localPath A file path relative to the repository root\n   * @returns Base64 encoded file contents.\n   */\n  async getFile(repositoryUrl: string, gitRef: string, localPath: string, rootPath: string): Promise<GetFileResponse> {\n    const response = await this.postWithRefresh(\n      '/vcs.v1.VCSService/GetFile',\n      JSON.stringify({\n        repositoryURL: repositoryUrl,\n        ref: gitRef,\n        localPath,\n        rootPath,\n      })\n    );\n\n    return response.json();\n  }\n\n  /**\n   * Fetches a series of commit metadata (author, date, etc) for a list of\n   * commit refs.\n   *\n   * @param commits A list of commits\n   * @returns GitHub commit metadata for the commits\n   */\n  async getCommits(commits: Commit[]): Promise<GetCommitResponse[]> {\n    return await Promise.all(\n      commits.map(({ repositoryUrl, gitRef }) => {\n        if (!repositoryUrl || !gitRef) {\n          return PLACEHOLDER_COMMIT_DATA;\n        }\n\n        return this.getCommit(repositoryUrl, gitRef).catch((error) => {\n          logger.error(error, {\n            info: `Error while fetching commit from repo \"${repositoryUrl}\" (${gitRef})!'`,\n          });\n\n          return PLACEHOLDER_COMMIT_DATA;\n        });\n      })\n    );\n  }\n\n  async refresh(): Promise<void> {\n    return this.refreshSession();\n  }\n\n  /**\n   * Gets commit metadata (author, date, etc) for a single commit ref.\n   *\n   * @param repositoryUrl A repository url\n   * @param gitRef A commit ref\n   * @returns Metadata for a single GitHub commit.\n   */\n  private async getCommit(repositoryUrl: string, gitRef: string): Promise<GetCommitResponse> {\n    const response = await this.postWithRefresh(\n      '/vcs.v1.VCSService/GetCommit',\n      JSON.stringify({\n        repositoryURL: repositoryUrl,\n        ref: gitRef,\n      })\n    );\n\n    const json = await response.json();\n    json.date &&= new Date(json.date);\n    return json;\n  }\n\n  /**\n   * Makes an HTTP POST request. If the session cookie is expired, this method\n   * will auto-refresh the session cookie. During this time, all subsequent\n   * requests will be queued until the refresh is complete.\n   *\n   * @param path An API route path\n   * @param body Request body contents\n   * @returns A promise for the HTTP POST request.\n   */\n  private async postWithRefresh(path: string, body: string): Promise<Response> {\n    // Check if the session is refreshing.\n    if (this.isRefreshing) {\n      return this.queueRequest(path, body);\n    }\n\n    // Check if session is expired.\n    if (this.sessionManager.getCookie()?.isUserTokenExpired(PrivateVcsClient.BIAS_MS)) {\n      this.isRefreshing = true;\n\n      // Refresh the session.\n      try {\n        await this.refreshSession();\n      } catch (e) {\n        this.sessionManager.deleteCookie();\n        this.flushQueue(e as Error);\n      }\n\n      // Resolve the request that triggered the refresh.\n      this.flushQueue();\n      this.isRefreshing = false;\n    }\n\n    return this.post(path, body);\n  }\n\n  /**\n   * Makes an HTTP POST request. This method assumes a valid session cookie.\n   *\n   * @param path An API route path\n   * @param body Request body contents\n   * @returns A response of the resulting HTTP POST request.\n   */\n  private async post(path: string, body: string): Promise<Response> {\n    return this.fetch(path, {\n      method: 'POST',\n      body: body,\n    });\n  }\n\n  /**\n   * Exchanges the current session cookie for a new one, then saves the cookie\n   * in the session manager.\n   */\n  private async refreshSession(): Promise<void> {\n    const response = await this.fetch('/vcs.v1.VCSService/GithubRefresh', {\n      method: 'POST',\n      body: JSON.stringify({}),\n    });\n\n    const body = await response.json();\n    this.sessionManager.setCookie(body.cookie);\n  }\n\n  /**\n   * Queues an HTTP request to the provided path with the provided body. The\n   * request will be executed when the queue gets flushed.\n   *\n   * @param path An API route path\n   * @param body Request body contents\n   * @returns A response of the resulting HTTP POST request.\n   */\n  private async queueRequest(path: string, body: string): Promise<Response> {\n    return new Promise((resolve, reject) => {\n      this.pendingQueue.push((err) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        resolve(this.post(path, body));\n      });\n    });\n  }\n\n  /**\n   * Flushes a queue of requests in the order in which they were received. If\n   * an error occurred while the requests were queued, it is passed to each\n   * request callback.\n   *\n   * This function also resets the internal queue.\n   *\n   * @param err An optional error\n   */\n  private flushQueue(err: Error | undefined = undefined) {\n    this.pendingQueue.forEach((callback) => callback(err));\n    this.pendingQueue = [];\n  }\n}\n","import { displayError } from '@shared/domain/displayStatus';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { DataSourceProxyClientBuilder } from 'src/pages/ProfilesExplorerView/infrastructure/series/http/DataSourceProxyClientBuilder';\n\nimport { VcsClient } from '../../infrastructure/VcsClient';\nimport { generateNonce } from './domain/generateNonce';\nimport { githubLogin } from './domain/githubLogin';\nimport { useGithubSessionCookie } from './domain/useGithubSessionCookie';\nimport { usePollGitHubPopup } from './domain/usePollGitHubPopup';\nimport { DEFAULT_GITHUB_CONTEXT, GitHubContext } from './GitHubContext';\nimport { PrivateVcsClient } from './infrastructure/PrivateVcsClient';\n\ntype GitHubContextProviderProps = {\n  dataSourceUid: string;\n  children: React.ReactNode;\n};\n\nexport const nonce = generateNonce();\n\nexport function GitHubContextProvider({ dataSourceUid, children }: GitHubContextProviderProps) {\n  const vcsClient = DataSourceProxyClientBuilder.build(dataSourceUid, VcsClient);\n  const privateVcsClient = DataSourceProxyClientBuilder.build(dataSourceUid, PrivateVcsClient);\n\n  const [isLoginInProgress, setIsLoginInProgress] = useState(DEFAULT_GITHUB_CONTEXT.isLoginInProgress);\n  const [sessionCookie, setSessionCookie] = useGithubSessionCookie();\n  const [externalWindow, setExternalWindow] = useState<Window | null>();\n\n  // hack to prevent failures impossible to fix for the user (unless they know they have to delete the cookie)\n  // when logged in and changing data source\n  // TODO: provide a better way\n  useEffect(() => {\n    setSessionCookie('');\n  }, [dataSourceUid]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  usePollGitHubPopup({ vcsClient, externalWindow, setExternalWindow, setSessionCookie, nonce });\n\n  // Check if login window is open and toggle the login state accordingly. For\n  // example, if the login window IS open and the login state is not\n  // \"in progress\", then update the state to be \"in progress\".\n  const newIsLoginInProgress = externalWindow ? !externalWindow.closed : false;\n  if (newIsLoginInProgress !== isLoginInProgress) {\n    setIsLoginInProgress(newIsLoginInProgress);\n  }\n\n  const login = useCallback(async () => {\n    try {\n      await githubLogin(vcsClient, privateVcsClient, sessionCookie, externalWindow, setExternalWindow);\n    } catch (error) {\n      displayError(error as Error, ['Failed to login to GitHub', (error as Error).message]);\n    }\n  }, [vcsClient, privateVcsClient, sessionCookie, externalWindow]);\n\n  return (\n    <GitHubContext.Provider\n      value={{\n        isLoginInProgress,\n        isLoggedIn: Boolean(sessionCookie && !sessionCookie.isUserTokenExpired()),\n        isSessionExpired: Boolean(sessionCookie?.isUserTokenExpired()),\n        login,\n      }}\n    >\n      {children}\n    </GitHubContext.Provider>\n  );\n}\n","export function generateNonce(): string {\n  // https://stackoverflow.com/questions/76825670/how-to-generate-and-use-random-value-for-nonce-in-inline-script-in-javascript\n  return btoa(String.fromCharCode(...crypto.getRandomValues(new Uint8Array(32))));\n}\n","import { useState } from 'react';\n\nimport { gitSessionCookieManager } from '../infrastructure/GitSessionCookieManager';\n\nexport function useGithubSessionCookie() {\n  const [cookie, setCookie] = useState(gitSessionCookieManager.getCookie());\n\n  const setNextCookie = (nextValue: string) => {\n    if (!nextValue) {\n      gitSessionCookieManager.deleteCookie();\n      setCookie(undefined);\n    } else {\n      gitSessionCookieManager.setCookie(nextValue);\n      setCookie(gitSessionCookieManager.getCookie());\n    }\n  };\n\n  return [cookie, setNextCookie] as const;\n}\n","import { displayError } from '@shared/domain/displayStatus';\nimport { useEffect } from 'react';\n\nimport { VcsClient } from '../../../infrastructure/VcsClient';\nimport { authFromUrl } from './authFromUrl';\n\ntype PollGithubPopupParams = {\n  vcsClient: VcsClient;\n  externalWindow: Window | null | undefined;\n  setExternalWindow: (window: Window | null) => void;\n  setSessionCookie: (sessionCookie: string) => void;\n  nonce: string;\n};\n\nfunction tryGetWindowSearchParams(window: Window): URLSearchParams | null {\n  try {\n    return new URL(window.location.href).searchParams;\n  } catch {\n    return null;\n  }\n}\n\nexport function usePollGitHubPopup({\n  vcsClient,\n  externalWindow,\n  setExternalWindow,\n  setSessionCookie,\n  nonce,\n}: PollGithubPopupParams) {\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n  useEffect(() => {\n    const checkPopup = async () => {\n      if (!externalWindow || externalWindow.closed) {\n        setExternalWindow(null);\n        return;\n      }\n\n      try {\n        const searchParams = tryGetWindowSearchParams(externalWindow);\n\n        if (searchParams !== null) {\n          const sessionCookie = await authFromUrl(vcsClient, searchParams, nonce);\n\n          if (sessionCookie) {\n            setSessionCookie(sessionCookie);\n            externalWindow.close();\n            setExternalWindow(null);\n            return;\n          }\n        }\n      } catch (error) {\n        displayError(error as Error, ['Error while login in with GitHub!', (error as Error).message]);\n        externalWindow.close();\n        setExternalWindow(null);\n        return;\n      }\n\n      // keep checking for the popup to close\n      window.setTimeout(checkPopup, 700);\n    };\n\n    if (externalWindow) {\n      checkPopup();\n    }\n\n    return () => {\n      if (externalWindow) {\n        externalWindow.close();\n        setExternalWindow(null);\n      }\n    };\n  }, [externalWindow, setExternalWindow, setSessionCookie, nonce, vcsClient]);\n}\n","import { SceneQueryRunner } from '@grafana/scenes';\n\nimport { PYROSCOPE_DATA_SOURCE } from '../pyroscope-data-sources';\nimport { TimeSeriesQueryRunnerParams } from '../timeseries/TimeSeriesQueryRunnerParams';\n\ntype FlameGraphQueryRunnerParams = TimeSeriesQueryRunnerParams & {\n  maxNodes?: number;\n};\n\nexport function buildFlameGraphQueryRunner({ filters, maxNodes }: FlameGraphQueryRunnerParams) {\n  const completeFilters = filters ? [...filters] : [];\n  completeFilters.unshift({ key: 'service_name', operator: '=', value: '$serviceName' });\n\n  const selector = completeFilters.map(({ key, operator, value }) => `${key}${operator}\"${value}\"`).join(',');\n\n  return new SceneQueryRunner({\n    datasource: PYROSCOPE_DATA_SOURCE,\n    queries: [\n      {\n        refId: 'profile',\n        queryType: 'profile',\n        profileTypeId: '$profileMetricId',\n        labelSelector: `{${selector},$filters}`,\n        maxNodes,\n      },\n    ],\n  });\n}\n","type ParsedQuery = {\n  serviceId: string;\n  profileMetricId: string;\n  labelsSelector: string;\n  labels: string[];\n};\n\nexport function parseQuery(query: string): ParsedQuery {\n  const [, serviceId = ''] = query.match(/.+\\{.*service_name=\"([^\"]+)\".*\\}/) || [];\n  const [, profileMetricId = ''] = query.match(/([^{]+)\\{.*}/) || [];\n\n  const labelsSelector = query.substring(query.indexOf('{'));\n\n  const labels = labelsSelector\n    .replace(/(\\{|\\})/, '')\n    .split(',')\n    .map((m) => m.match(/\\W*([^=!~]+)(=|!=|=~|!~)\"(.*)\"/)?.[0])\n    .filter((label) => label && !label.includes('service_name')) as string[];\n\n  return { serviceId, profileMetricId, labelsSelector, labels };\n}\n\ntype BuildQueryParams = {\n  serviceId: string;\n  profileMetricId: string;\n  labels?: string[];\n};\n\nexport const buildQuery = ({ serviceId, profileMetricId, labels }: BuildQueryParams): string =>\n  labels?.length\n    ? `${profileMetricId}{service_name=\"${serviceId}\",${labels.join()}}`\n    : `${profileMetricId}{service_name=\"${serviceId}\"}`;\n","import { Field, Message } from 'protobufjs/light';\n\nexport class PprofRequest extends Message<PprofRequest> {\n    constructor(\n        profile_typeID: string,\n        label_selector: string,\n        start: number,\n        end: number,\n        max_nodes: number\n    ) {\n        super();\n        this.profile_typeID = profile_typeID;\n        this.label_selector = label_selector;\n        this.start = start;\n        this.end = end;\n        this.max_nodes = max_nodes;\n    }\n\n    @Field.d(1, 'string')\n    profile_typeID: string;\n\n    @Field.d(2, 'string')\n    label_selector: string;\n\n    @Field.d(3, 'int64')\n    start: number;\n\n    @Field.d(4, 'int64')\n    end: number;\n\n    @Field.d(5, 'int64')\n    max_nodes: number;\n}\n","import { TimeRange } from '@grafana/data';\nimport { parseQuery } from '@shared/domain/url-params/parseQuery';\nimport { PprofProfile } from '@shared/types/PprofProfile';\n\nimport { DataSourceProxyClient } from '../../../infrastructure/series/http/DataSourceProxyClient';\nimport { PprofRequest } from './PprofRequest';\n\ntype SelectMergeProfileParams = {\n  query: string;\n  timeRange: TimeRange;\n  maxNodes: number;\n};\n\ntype SelectMergeProfileJsonParams = {\n  profileMetricId: string;\n  labelsSelector: string;\n  start: number;\n  end: number;\n  stackTrace: string[];\n  maxNodes: number;\n};\n\nexport class PprofApiClient extends DataSourceProxyClient {\n  static buildPprofRequest(query: string, timeRange: TimeRange, maxNodes: number): Uint8Array {\n    const { profileMetricId, labelsSelector } = parseQuery(query);\n\n    const start = timeRange.from.unix() * 1000;\n    const end = timeRange.to.unix() * 1000;\n\n    const message = new PprofRequest(profileMetricId, labelsSelector, start, end, maxNodes);\n\n    return PprofRequest.encode(message).finish();\n  }\n\n  async selectMergeProfile({ query, timeRange, maxNodes }: SelectMergeProfileParams): Promise<Blob> {\n    const response = await this.fetch('/querier.v1.QuerierService/SelectMergeProfile', {\n      method: 'POST',\n      headers: { 'content-type': 'application/proto' },\n      body: new Blob([PprofApiClient.buildPprofRequest(query, timeRange, maxNodes)]),\n    });\n\n    return response.blob();\n  }\n\n  async selectMergeProfileJson({\n    profileMetricId,\n    labelsSelector,\n    start,\n    end,\n    stackTrace,\n    maxNodes,\n  }: SelectMergeProfileJsonParams): Promise<PprofProfile> {\n    const response = await this.fetch('/querier.v1.QuerierService/SelectMergeProfile', {\n      method: 'POST',\n      body: JSON.stringify({\n        profile_typeID: profileMetricId,\n        label_selector: labelsSelector,\n        start: start * 1000,\n        end: end * 1000,\n        stackTraceSelector: {\n          call_site: stackTrace.map((name) => ({ name })),\n        },\n        maxNodes,\n      }),\n    });\n\n    return response.json();\n  }\n}\n","import { TimeRange } from '@grafana/data';\nimport { parseQuery } from '@shared/domain/url-params/parseQuery';\n\nexport function getExportFilename(query: string, timeRange: TimeRange) {\n  const { serviceId, profileMetricId } = parseQuery(query);\n  const dateString = `${timeRange.from.format('YYYY-MM-DD_HHmm')}-to-${timeRange.to.format('YYYY-MM-DD_HHmm')}`;\n  return `${serviceId.replace(/\\//g, '-')}_${profileMetricId}_${dateString}`;\n}\n","import { HttpClient } from '@shared/infrastructure/http/HttpClient';\nimport { FlamebearerProfile } from '@shared/types/FlamebearerProfile';\n\ntype UploadResponse = {\n  key: string;\n  url: string;\n  subProfiles: any[]; // TODO: define them, what are they?\n};\n\nclass FlamegraphDotComApiClient extends HttpClient {\n  constructor() {\n    super('https://flamegraph.com/api', {\n      'content-type': 'application/json',\n    });\n  }\n\n  async upload(name: string, profile: FlamebearerProfile): Promise<UploadResponse> {\n    const response = await this.fetch('/upload/v1', {\n      method: 'POST',\n      body: JSON.stringify({\n        name,\n        profile: btoa(JSON.stringify(profile)),\n        fileTypeData: {\n          units: profile.metadata.units,\n          spyName: profile.metadata.spyName,\n        },\n        type: 'json',\n      }),\n    });\n\n    const json = await response.json();\n\n    return json;\n  }\n}\n\nexport const flamegraphDotComApiClient = new FlamegraphDotComApiClient();\n","import { TimeRange } from '@grafana/data';\nimport { SceneComponentProps, sceneGraph, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { Button, Dropdown, Menu } from '@grafana/ui';\nimport { displayError } from '@shared/domain/displayStatus';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { useMaxNodesFromUrl } from '@shared/domain/url-params/useMaxNodesFromUrl';\nimport { DEFAULT_SETTINGS } from '@shared/infrastructure/settings/PluginSettings';\nimport { useFetchPluginSettings } from '@shared/infrastructure/settings/useFetchPluginSettings';\nimport { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { FlamebearerProfile } from '@shared/types/FlamebearerProfile';\nimport 'compression-streams-polyfill';\nimport saveAs from 'file-saver';\nimport React from 'react';\n\nimport { ProfilesDataSourceVariable } from '../../../../domain/variables/ProfilesDataSourceVariable';\nimport { ProfileApiClient } from '../../../../infrastructure/profiles/ProfileApiClient';\nimport { DataSourceProxyClientBuilder } from '../../../../infrastructure/series/http/DataSourceProxyClientBuilder';\nimport { PprofApiClient } from '../../infrastructure/PprofApiClient';\nimport { getExportFilename } from './domain/getExportFilename';\nimport { flamegraphDotComApiClient } from './infrastructure/flamegraphDotComApiClient';\n\ninterface SceneExportMenuState extends SceneObjectState {}\n\ntype ExtraProps = {\n  query: string;\n  timeRange: TimeRange;\n};\n\nexport class SceneExportMenu extends SceneObjectBase<SceneExportMenuState> {\n  constructor() {\n    super({ key: 'export-flame-graph-menu' });\n  }\n\n  async fetchFlamebearerProfile({\n    dataSourceUid,\n    query,\n    timeRange,\n    maxNodes,\n  }: ExtraProps & { dataSourceUid: string; maxNodes: number | null }): Promise<FlamebearerProfile | null> {\n    const profileApiClient = DataSourceProxyClientBuilder.build(dataSourceUid, ProfileApiClient);\n\n    let profile;\n\n    try {\n      profile = await profileApiClient.get({\n        query,\n        timeRange,\n        format: 'json',\n        maxNodes: maxNodes || DEFAULT_SETTINGS.maxNodes,\n      });\n    } catch (error) {\n      displayError(error as Error, ['Error while loading flamebearer profile data!', (error as Error).message]);\n      return null;\n    }\n\n    return profile as FlamebearerProfile;\n  }\n\n  async fetchPprofProfile({\n    dataSourceUid,\n    query,\n    timeRange,\n    maxNodes,\n  }: ExtraProps & { dataSourceUid: string; maxNodes: number | null }): Promise<Blob | null> {\n    const pprofApiClient = DataSourceProxyClientBuilder.build(dataSourceUid, PprofApiClient);\n\n    let profile;\n\n    try {\n      const blob = await pprofApiClient.selectMergeProfile({\n        query,\n        timeRange,\n        maxNodes: maxNodes || DEFAULT_SETTINGS.maxNodes,\n      });\n      profile = await new Response(blob.stream().pipeThrough(new CompressionStream('gzip'))).blob();\n    } catch (error) {\n      displayError(error as Error, ['Failed to export to pprof!', (error as Error).message]);\n      return null;\n    }\n\n    return profile;\n  }\n\n  useSceneExportMenu = ({ query, timeRange }: ExtraProps): DomainHookReturnValue => {\n    const dataSourceUid = sceneGraph.findByKeyAndType(this, 'dataSource', ProfilesDataSourceVariable).useState()\n      .value as string;\n\n    const [maxNodes] = useMaxNodesFromUrl();\n    const { settings } = useFetchPluginSettings();\n\n    const downloadPng = () => {\n      reportInteraction('g_pyroscope_app_export_profile', { format: 'png' });\n\n      const filename = `${getExportFilename(query, timeRange)}.png`;\n\n      (document.querySelector('canvas[data-testid=\"flameGraph\"]') as HTMLCanvasElement).toBlob((blob) => {\n        if (!blob) {\n          const error = new Error('Error while creating the image, no blob.');\n          displayError(error, ['Failed to export to png!', error.message]);\n          return;\n        }\n\n        saveAs(blob, filename);\n      }, 'image/png');\n    };\n\n    const downloadJson = async () => {\n      reportInteraction('g_pyroscope_app_export_profile', { format: 'json' });\n\n      const profile = await this.fetchFlamebearerProfile({ dataSourceUid, query, timeRange, maxNodes });\n      if (!profile) {\n        return;\n      }\n\n      const filename = `${getExportFilename(query, timeRange)}.json`;\n      const data = `data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(profile))}`;\n\n      saveAs(data, filename);\n    };\n\n    const downloadPprof = async () => {\n      reportInteraction('g_pyroscope_app_export_profile', { format: 'pprof' });\n\n      const profile = await this.fetchPprofProfile({ dataSourceUid, query, timeRange, maxNodes });\n      if (!profile) {\n        return;\n      }\n\n      const filename = `${getExportFilename(query, timeRange)}.pb.gz`;\n\n      saveAs(profile, filename);\n    };\n\n    const uploadToFlamegraphDotCom = async () => {\n      reportInteraction('g_pyroscope_app_export_profile', { format: 'flamegraph.com' });\n\n      const profile = await this.fetchFlamebearerProfile({ dataSourceUid, query, timeRange, maxNodes });\n      if (!profile) {\n        return;\n      }\n\n      try {\n        const response = await flamegraphDotComApiClient.upload(getExportFilename(query, timeRange), profile);\n\n        if (!response.url) {\n          throw new Error('Empty URL received.');\n        }\n\n        const dlLink = document.createElement('a');\n        dlLink.target = '_blank';\n        dlLink.href = response.url;\n        document.body.appendChild(dlLink);\n        dlLink.click();\n        document.body.removeChild(dlLink);\n      } catch (error) {\n        displayError(error as Error, ['Failed to export to flamegraph.com!', (error as Error).message]);\n        return;\n      }\n    };\n\n    return {\n      data: {\n        shouldDisplayFlamegraphDotCom: Boolean(settings?.enableFlameGraphDotComExport),\n      },\n      actions: {\n        downloadPng,\n        downloadJson,\n        downloadPprof,\n        uploadToFlamegraphDotCom,\n      },\n    };\n  };\n\n  static Component = ({ model, query, timeRange }: SceneComponentProps<SceneExportMenu> & ExtraProps) => {\n    const { actions } = model.useSceneExportMenu({ query, timeRange });\n\n    return (\n      <Dropdown\n        overlay={\n          <Menu>\n            <Menu.Item label=\"png\" onClick={actions.downloadPng} />\n            <Menu.Item label=\"json\" onClick={actions.downloadJson} />\n            <Menu.Item label=\"pprof\" onClick={actions.downloadPprof} />\n          </Menu>\n        }\n      >\n        <Button\n          icon=\"download-alt\"\n          size=\"sm\"\n          variant=\"secondary\"\n          fill=\"outline\"\n          aria-label=\"Export profile data\"\n          tooltip=\"Export profile data\"\n        />\n      </Dropdown>\n    );\n  };\n}\n","import { useContext } from 'react';\n\nimport { GitHubContext, TGitHubContext } from './GitHubContext';\n\nexport function useGitHubContext(): TGitHubContext {\n  return useContext(GitHubContext);\n}\n","/* https://platform.openai.com/docs/models/overview */\nimport { FunctionDetails, LineProfile } from '../../../domain/types/FunctionDetails';\n\nexport const model = 'gpt-4-1106-preview';\n\n/* https://platform.openai.com/docs/guides/prompt-engineering/tactics */\n\nexport type SuggestionPromptInputs = {\n  functionDetails: FunctionDetails;\n  lines: LineProfile[];\n};\n\nexport const buildSuggestionPrompts = ({\n  functionDetails,\n  lines,\n}: // dotProfile,\nSuggestionPromptInputs) => {\n  const userPrompt = `\nYou are a code optimization expert. I will give you code, each line annotated with amount of time spent on a particular line (it's in the beginning of each line), and a function name.\n\nI want you to write back a new improved code for this function and explain why you made changes.\n\nMake sure to take annotations into strong consideration. If a suggested performance improvement isn't backed up by information from the annotations, do not include it.\n\nDo not mention the actual numbers from the annotations, users can already see how much time was spent on each line. Do not list various lines and their time spent. When you mention functions or lines, do not mention the time spent on them.\n\nIf you can't find any meaningful performance optimizations, say so. Ask for context if you think other context might help make decisions. If you think the problem is with user input and not the actual code itself, say so.\n\nWhen you output code in markdown, please don't specify language after 3 backticks (e.g instead of saying \"\\`\\`\\`go\" say \"\\`\\`\\`\"), and always add a new line after 3 backticks.\n\nFunction name is \\`${functionDetails.name}\\`. Do not mention the function name, users can already see it.\n\nWhen posting a response, follow the outline below:\n* give a brief explanation of things that could be improve\n* print new code if it's possible\n* explain each change in more details\n\n\nAnnotated code is below:\n\\`\\`\\`\n${codeInfoToAnnotatedCode(functionDetails, lines)}\n\\`\\`\\`\n`;\n\n  return {\n    system: ``,\n    user: userPrompt,\n  };\n};\n\nfunction codeInfoToAnnotatedCode(functionDetails: FunctionDetails, lines: LineProfile[]): string {\n  let code = lines\n    .map((line) => {\n      return `(${line.cum} ${functionDetails.unit}) ${line.line}`;\n    })\n    .join('\\n');\n\n  return code;\n}\n","import { css } from '@emotion/css';\nimport { Spinner, useStyles2 } from '@grafana/ui';\nimport { InlineBanner } from '@shared/ui/InlineBanner';\nimport React from 'react';\n\nimport { AiReply } from '../../../../../../components/SceneAiPanel/components/AiReply';\nimport { FollowUpForm } from '../../../../../../components/SceneAiPanel/components/FollowUpForm';\nimport { SuggestionPromptInputs } from './domain/buildLlmSuggestionPrompts';\nimport { useAiSuggestionsPanel } from './domain/useAiSuggestionsPanel';\n\nconst getStyles = () => ({\n  title: css`\n    margin: -4px 0 4px 0;\n  `,\n  content: css``,\n});\n\ntype AiSuggestionsPanelProps = {\n  suggestionPromptInputs: SuggestionPromptInputs;\n};\n\nexport function AiSuggestionsPanel({ suggestionPromptInputs }: AiSuggestionsPanelProps) {\n  const styles = useStyles2(getStyles);\n  const { data, actions } = useAiSuggestionsPanel(suggestionPromptInputs);\n\n  return (\n    <>\n      <h6 className={styles.title}>Code Optimization Suggestions</h6>\n      <div className={styles.content}>\n        {data.isLoading && (\n          <>\n            <Spinner inline />\n            &nbsp;Analyzing...\n          </>\n        )}\n\n        {data.fetchError && (\n          <InlineBanner\n            severity=\"error\"\n            title=\"Error while fetching profiles!\"\n            message=\"Sorry for any inconvenience, please try again later.\"\n          />\n        )}\n\n        {data.llmError && (\n          <InlineBanner\n            severity=\"error\"\n            title=\"Failed to generate content using OpenAI!\"\n            error={data.llmError}\n            message=\"Sorry for any inconvenience, please try again later or if the problem persists, contact your organization admin.\"\n          />\n        )}\n\n        {data.shouldDisplayReply && <AiReply reply={data.reply} />}\n\n        {data.shouldDisplayFollowUpForm && <FollowUpForm onSubmit={actions.submitFollowupQuestion} />}\n      </div>\n    </>\n  );\n}\n","import { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\n\nimport { SuggestionPromptInputs } from './buildLlmSuggestionPrompts';\nimport { useOpenAiSuggestions } from './useOpenAiSuggestions';\n\nexport function useAiSuggestionsPanel(suggestionPromptInputs: SuggestionPromptInputs): DomainHookReturnValue {\n  const { reply, error: llmError } = useOpenAiSuggestions(suggestionPromptInputs);\n\n  return {\n    data: {\n      isLoading: !llmError && !reply.text.trim(),\n      llmError,\n      reply,\n      shouldDisplayReply: Boolean(reply?.hasStarted || reply?.hasFinished),\n      shouldDisplayFollowUpForm: !llmError && Boolean(reply?.hasFinished),\n    },\n    actions: {\n      submitFollowupQuestion(question: string) {\n        reply.askFollowupQuestion(question);\n      },\n    },\n  };\n}\n","import { openai } from '@grafana/llm';\nimport { useCallback, useEffect, useState } from 'react';\n\nimport { buildSuggestionPrompts, model, SuggestionPromptInputs } from './buildLlmSuggestionPrompts';\n\ntype Messages = openai.Message[];\n\n// TODO(@petethepig): this is largely same function as useOpenAiChatCompletions, maybe we should merge them somehow\nexport function useOpenAiSuggestions(suggestionPromptInputs: SuggestionPromptInputs) {\n  const [reply, setReply] = useState('');\n  const [replyHasStarted, setReplyHasStarted] = useState(false);\n  const [replyHasFinished, setReplyHasFinished] = useState(false);\n  const [messages, setMessages] = useState<Messages>([]);\n  const [error, setError] = useState<Error | null>(null);\n\n  const sendMessages = useCallback((messagesToSend: Messages) => {\n    setMessages(messagesToSend);\n\n    setError(null);\n\n    setReply('');\n    setReplyHasStarted(true);\n    setReplyHasFinished(false);\n\n    const stream = openai\n      .streamChatCompletions({\n        model,\n        messages: messagesToSend,\n      })\n      .pipe(\n        // Accumulate the stream content into a stream of strings, where each\n        // element contains the accumulated message so far.\n        openai.accumulateContent()\n      );\n\n    stream.subscribe({\n      next: setReply,\n      error(e) {\n        setError(e);\n        setReplyHasStarted(false);\n        setReplyHasFinished(true);\n      },\n      complete() {\n        setReplyHasStarted(false);\n        setReplyHasFinished(true);\n      },\n    });\n  }, []);\n\n  const askFollowupQuestion = useCallback(\n    (question: string): void => {\n      const messagesToAdd: Messages = [\n        {\n          role: 'assistant',\n          content: reply,\n        },\n        {\n          role: 'user',\n          content: question,\n        },\n      ];\n\n      try {\n        sendMessages([...messages, ...messagesToAdd]);\n      } catch (error) {\n        setError(error as Error);\n      }\n    },\n    [messages, reply, sendMessages]\n  );\n\n  useEffect(() => {\n    if (messages.length > 0) {\n      return;\n    }\n\n    const prompts = buildSuggestionPrompts(suggestionPromptInputs);\n\n    try {\n      sendMessages([\n        {\n          role: 'system',\n          content: prompts.system,\n        },\n        {\n          role: 'system',\n          content: prompts.user,\n        },\n      ]);\n    } catch (error) {\n      setError(error as Error);\n    }\n  }, [messages.length, suggestionPromptInputs, sendMessages]);\n\n  return {\n    reply: {\n      text: reply,\n      hasStarted: replyHasStarted,\n      hasFinished: replyHasFinished,\n      messages: messages,\n      askFollowupQuestion,\n    },\n    error,\n  };\n}\n","/**\n * Converts raw.githubusercontent.com URLS to github.com URLs.\n *\n * E.g. https://raw.githubusercontent.com/golang/go/master/src/runtime/netpoll_kqueue.go\n * needs to be to transformed to: https://github.com/{org}/{repo}/blob/{filepath}\n */\nexport function buildGithubUrlForFunction(url: string, startLine: unknown): string {\n  let newUrl = url;\n\n  const matches = url.match(/raw\\.githubusercontent\\.com\\/([^/]+)\\/([^/]+)\\/(.+)/);\n  if (matches) {\n    const [, org, repo, rest] = matches;\n    newUrl = `https://github.com/${org}/${repo}/blob/${rest}`;\n  }\n\n  if (startLine !== undefined && !url.includes('#')) {\n    // link to the specific line this function exists at\n    newUrl += `#L${startLine}`;\n  }\n\n  return newUrl;\n}\n","import { CallSiteProps, LineProfile } from '../../../domain/types/FunctionDetails';\n\nconst VERTICAL_LINES_PADDING = 5;\n\ntype CallSitesMap = Map<number, CallSiteProps>;\n\nexport function buildPlaceholderLineProfiles(callSitesMap: CallSitesMap) {\n  if (!callSitesMap.size) {\n    return [];\n  }\n\n  const callSites = Array.from(callSitesMap.values()).sort((a, b) => a.line - b.line);\n\n  const firstLineIndex = Math.max(0, callSites[0].line - VERTICAL_LINES_PADDING - 1);\n  const lastLineIndex = callSites[callSites.length - 1].line + VERTICAL_LINES_PADDING + 1;\n\n  const lines = [];\n\n  for (let lineNumber = firstLineIndex + 1; lineNumber < lastLineIndex; lineNumber++) {\n    const callSite = callSitesMap.get(lineNumber);\n\n    lines.push({\n      line: undefined,\n      number: lineNumber,\n      cum: callSite?.cum ?? 0,\n      flat: callSite?.flat ?? 0,\n    });\n  }\n\n  return lines;\n}\n\nexport function buildLineProfiles(fileContent: string, callSitesMap: CallSitesMap): LineProfile[] {\n  if (!callSitesMap.size) {\n    return [];\n  }\n\n  const callSites = Array.from(callSitesMap.values()).sort((a, b) => a.line - b.line);\n  const allLines = fileContent.split('\\n');\n\n  const firstLineIndex = Math.max(0, callSites[0].line - VERTICAL_LINES_PADDING - 1);\n  const lastLineIndex = Math.min(allLines.length, callSites[callSites.length - 1].line + VERTICAL_LINES_PADDING);\n\n  return allLines.slice(firstLineIndex, lastLineIndex).map((line, index) => {\n    const lineNumber = index + firstLineIndex + 1;\n    const callSite = callSitesMap.get(lineNumber);\n\n    return {\n      line,\n      number: lineNumber,\n      cum: callSite?.cum ?? 0,\n      flat: callSite?.flat ?? 0,\n    };\n  });\n}\n","import { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { useMemo, useState } from 'react';\n\nimport { FunctionDetails, LineProfile } from '../../../domain/types/FunctionDetails';\nimport { useGitHubContext } from '../../GitHubContextProvider/useGitHubContext';\nimport { useFetchVCSFile } from '../infrastructure/useFetchVCSFile';\nimport { buildGithubUrlForFunction } from './buildGithubUrlForFunction';\nimport { buildLineProfiles, buildPlaceholderLineProfiles } from './buildLineProfiles';\n\n/**\n * View model for Code component\n */\nexport type CodeLine = LineProfile & { line: string };\n\ntype CodeContainerDomainValue = DomainHookReturnValue & { data: { lines: CodeLine[] } };\n\nexport function useCodeContainer(dataSourceUid: string, functionDetails: FunctionDetails): CodeContainerDomainValue {\n  const { isLoggedIn } = useGitHubContext();\n  const { version } = functionDetails;\n\n  const [openAiSuggestions, setOpenAiSuggestions] = useState<boolean>(false);\n\n  const {\n    fileInfo,\n    error: fetchError,\n    isFetching,\n  } = useFetchVCSFile({\n    enabled: isLoggedIn,\n    dataSourceUid,\n    localPath: functionDetails.fileName,\n    repository: version?.repository ?? '',\n    gitRef: version?.git_ref ?? '',\n    rootPath: version?.root_path ?? '',\n  });\n\n  // might be a bit costly so we memoize it\n  const lines = useMemo(\n    () =>\n      fileInfo?.content\n        ? buildLineProfiles(fileInfo.content, functionDetails.callSites)\n        : buildPlaceholderLineProfiles(functionDetails.callSites),\n    [fileInfo?.content, functionDetails.callSites]\n  );\n\n  return {\n    data: {\n      fetchError,\n      openAiSuggestions,\n      isLoadingCode: isFetching,\n      unit: functionDetails.unit,\n      githubUrl: fileInfo?.URL ? buildGithubUrlForFunction(fileInfo.URL, functionDetails.startLine) : undefined,\n      lines: lines.map((line) => ({ ...line, line: line.line ?? '???' })),\n      noCodeAvailable: Boolean(fetchError) || !lines.some((line) => line.line),\n    },\n    actions: {\n      setOpenAiSuggestions,\n    },\n  };\n}\n","import { useQuery } from '@tanstack/react-query';\n\nimport { DataSourceProxyClientBuilder } from '../../../../../../../infrastructure/series/http/DataSourceProxyClientBuilder';\nimport { PrivateVcsClient } from '../../GitHubContextProvider/infrastructure/PrivateVcsClient';\n\ntype FetchParams = {\n  enabled: boolean;\n  dataSourceUid: string;\n  repository: string;\n  gitRef: string;\n  localPath: string;\n  rootPath: string;\n};\n\ntype FetchResponse = {\n  isFetching: boolean;\n  error: Error | null;\n  fileInfo?: {\n    content: string;\n    URL: string;\n  };\n};\n\nexport function useFetchVCSFile({\n  enabled,\n  dataSourceUid,\n  repository,\n  gitRef,\n  localPath,\n  rootPath,\n}: FetchParams): FetchResponse {\n  const privateVcsClient = DataSourceProxyClientBuilder.build(dataSourceUid, PrivateVcsClient);\n  const { isFetching, error, data } = useQuery({\n    enabled: Boolean(enabled && localPath),\n    queryKey: ['vcs-file', repository, gitRef, localPath, rootPath],\n    queryFn: () =>\n      privateVcsClient\n        .getFile(repository, gitRef, localPath, rootPath)\n        .then((code) => ({\n          content: code.content,\n          URL: code.URL,\n        }))\n        .then((json) => ({ URL: json.URL, content: atob(json.content) })),\n  });\n\n  return {\n    isFetching,\n    error: privateVcsClient.isAbortError(error) ? null : error,\n    fileInfo: data,\n  };\n}\n","import { getValueFormat, ValueFormatter } from '@grafana/data';\n\ntype FormatUnit = 'nanoseconds' | 'microseconds' | 'milliseconds' | 'seconds' | 'count' | string;\n\nexport function buildUnitFormatter(unit: FormatUnit): ValueFormatter {\n  switch (unit) {\n    case 'nanoseconds':\n      return getValueFormat('ns');\n    case 'microseconds':\n      return getValueFormat('s');\n    case 'milliseconds':\n      return getValueFormat('ms');\n    case 'seconds':\n      return getValueFormat('s');\n    case 'count':\n      return getValueFormat('short');\n    default:\n      return getValueFormat(unit);\n  }\n}\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { LinkButton, Spinner, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { AIButton } from '../../../../../../../components/SceneAiPanel/components/AiButton/AIButton';\nimport { buildUnitFormatter } from '../../../domain/buildUnitFormatter';\nimport { CodeLine } from '../domain/useCodeContainer';\n\ntype CodeProps = {\n  lines: CodeLine[];\n  unit: string;\n  githubUrl?: string;\n  isLoadingCode: boolean;\n  noCodeAvailable: boolean;\n  onOptimizeCodeClick: () => void;\n};\n\nexport const Code = ({ lines, unit, githubUrl, isLoadingCode, noCodeAvailable, onOptimizeCodeClick }: CodeProps) => {\n  const styles = useStyles2(getStyles);\n\n  const fmt = buildUnitFormatter(unit);\n  const formatValue = (n: number): string => {\n    if (n <= 0) {\n      return '.';\n    }\n\n    const formatted = fmt(n);\n    if (!formatted.suffix) {\n      return formatted.text;\n    }\n    return formatted.text + formatted.suffix;\n  };\n\n  // TODO: memoize\n  // Trim common indent prefixes from each line, if possible. This prevents us\n  // from rendering deeply indented code where the user would have to\n  // immediately scroll right to read the code.\n  trimIndentPrefix(lines);\n\n  // TODO: move to useCodeContainer()?\n  const [sumSelf, sumTotal] = lines.reduce(\n    ([accSelf, accTotal], { flat, cum }) => [accSelf + flat, accTotal + cum],\n    [0, 0]\n  );\n\n  return (\n    <div data-testid=\"function-details-code-container\">\n      <div className={styles.container}>\n        <div className={styles.header}>\n          <div className={styles.breakdownLabel}>\n            <h6>Breakdown per line</h6>\n            <span>\n              {isLoadingCode && <Spinner inline />}\n              {!isLoadingCode && noCodeAvailable && '(file information unavailable)'}\n            </span>\n          </div>\n\n          <div className={styles.buttons}>\n            <LinkButton\n              disabled={Boolean(isLoadingCode || !githubUrl)}\n              href={githubUrl}\n              target=\"_blank\"\n              icon=\"github\"\n              fill=\"text\"\n            >\n              View on GitHub\n            </LinkButton>\n\n            <AIButton\n              onClick={onOptimizeCodeClick}\n              disabled={isLoadingCode || noCodeAvailable}\n              interactionName=\"g_pyroscope_app_optimize_code_clicked\"\n            >\n              Optimize Code\n            </AIButton>\n          </div>\n        </div>\n      </div>\n\n      <pre className={styles.codeBlock} data-testid=\"function-details-code\">\n        <div className={cx(styles.highlighted, styles.codeBlockHeader)}>\n          {formatLine('Total:', formatValue(sumSelf), formatValue(sumTotal), ' (self, total)')}\n        </div>\n        {lines.map(({ line, number, cum: total, flat: self }) => (\n          <div key={line + number + total + self} className={self + total > 0 ? styles.highlighted : ''}>\n            {\n              // The space after `number` is relevant. It aligns the line\n              // number with the `Total:` header to mimic the pprof tool.\n              formatLine(`${number} `, formatValue(self), formatValue(total), line)\n            }\n          </div>\n        ))}\n      </pre>\n    </div>\n  );\n};\n\nconst formatLine = (lineNumber: string, self: string, total: string, rest?: string): string => {\n  // The length of each column is important. In order for tabs to render to\n  // their full width, the length of all the column widths must be one less than\n  // a multiple of 8.\n  const cols = lineNumber.padStart(7, ' ') + self.padStart(12, ' ') + total.padStart(12, ' ');\n\n  if (!rest) {\n    return cols;\n  }\n  return `${cols} ${rest}`;\n};\n\nconst trimIndentPrefix = (lines: CodeLine[]) => {\n  if (lines.length === 0) {\n    return;\n  }\n\n  let commonPrefix = getIndentPrefix(lines[0].line);\n  for (let i = 1; i < lines.length; i++) {\n    const { line } = lines[i];\n    if (line.trim() === '') {\n      // Don't count blank lines or lines with only whitespace.\n      continue;\n    }\n\n    const prefix = getIndentPrefix(line);\n    commonPrefix = longestCommonPrefix(commonPrefix, prefix);\n  }\n\n  if (!commonPrefix) {\n    // No common prefixes were found.\n    return;\n  }\n\n  // Trim the common prefix.\n  for (let i = 0; i < lines.length; i++) {\n    lines[i].line = lines[i].line.substring(commonPrefix.length);\n  }\n};\n\nconst getIndentPrefix = (text: string): string => {\n  const matches = text.match(/^[ \\t]*/);\n  return matches?.[0] ?? '';\n};\n\nconst longestCommonPrefix = (a: string, b: string): string => {\n  let prefixLen = 0;\n  for (let i = 0; i < Math.min(a.length, b.length); i++) {\n    if (a[i] !== b[i]) {\n      break;\n    }\n\n    prefixLen++;\n  }\n  return a.substring(0, prefixLen);\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    width: 100%;\n  `,\n  header: css`\n    display: flex;\n    justify-content: space-between;\n    align-items: end;\n    width: 100%;\n  `,\n  breakdownLabel: css`\n    & > h6 {\n      display: inline-block;\n      margin-top: ${theme.spacing(1)};\n    }\n\n    & > span {\n      margin-left: ${theme.spacing(1)};\n      font-size: ${theme.typography.bodySmall.fontSize};\n    }\n\n    & > svg {\n      margin-left: ${theme.spacing(1)};\n    }\n  `,\n  buttons: css`\n    display: flex;\n    flex-wrap: no-wrap;\n  `,\n  codeBlock: css`\n    position: relative;\n    min-height: 240px;\n    font-size: 12px;\n    overflow-x: auto;\n    white-space: pre;\n    color: ${theme.colors.text.secondary};\n  `,\n  highlighted: css`\n    color: ${theme.colors.text.maxContrast};\n  `,\n  codeBlockHeader: css`\n    margin-bottom: 8px;\n  `,\n});\n","import { displayError } from '@shared/domain/displayStatus';\nimport { HttpClientError } from '@shared/infrastructure/http/HttpClientError';\nimport React from 'react';\n\nimport { FunctionDetails } from '../../domain/types/FunctionDetails';\nimport { AiSuggestionsPanel } from '../AiSuggestionsPanel/AiSuggestionsPanel';\nimport { useCodeContainer } from './domain/useCodeContainer';\nimport { Code } from './ui/Code';\n\ntype CodeContainerProps = {\n  dataSourceUid: string;\n  functionDetails: FunctionDetails;\n};\n\nexport function CodeContainer({ dataSourceUid, functionDetails }: CodeContainerProps) {\n  const { data, actions } = useCodeContainer(dataSourceUid, functionDetails);\n\n  if (data.fetchError && (data.fetchError as HttpClientError)?.response?.status !== 404) {\n    displayError(data.fetchError, ['Failed to fetch file information!', (data.fetchError as Error).message]);\n  }\n\n  return (\n    <>\n      <Code\n        lines={data.lines}\n        unit={data.unit}\n        githubUrl={data.githubUrl}\n        isLoadingCode={data.isLoadingCode}\n        noCodeAvailable={data.noCodeAvailable}\n        onOptimizeCodeClick={() => {\n          actions.setOpenAiSuggestions(true);\n          document.getElementById('ai-suggestions-panel')?.scrollIntoView({\n            behavior: 'smooth',\n          });\n        }}\n      />\n      <h6 id=\"ai-suggestions-panel\" style={{ height: 0, marginBottom: 0 }}></h6>\n      {data.openAiSuggestions ? (\n        <AiSuggestionsPanel\n          suggestionPromptInputs={{\n            functionDetails: functionDetails,\n            lines: data.lines,\n          }}\n        />\n      ) : null}\n    </>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Icon, LinkButton, Spinner, useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { useGitHubContext } from './GitHubContextProvider/useGitHubContext';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  ellipsis: css`\n    color: ${theme.colors.primary.text};\n    text-overflow: ellipsis;\n    overflow: hidden;\n    direction: rtl;\n    white-space: nowrap;\n  `,\n});\n\ntype GitHubRepositoryProps = {\n  enableIntegration: boolean;\n  repository: {\n    name: string;\n    commitUrl: string;\n    commitName: string;\n  };\n};\n\nexport const GitHubRepository = ({ enableIntegration, repository }: GitHubRepositoryProps) => {\n  const styles = useStyles2(getStyles);\n  const { isLoginInProgress, isLoggedIn, login } = useGitHubContext();\n\n  if (!enableIntegration) {\n    return <>-</>;\n  }\n\n  // enableIntegration=true\n  if (isLoginInProgress) {\n    return (\n      <>\n        <Spinner />\n        <span>Connecting to GitHub...</span>\n      </>\n    );\n  }\n\n  // enableIntegration=true, isLoginInProgress=false\n  if (!isLoggedIn) {\n    return (\n      <LinkButton icon=\"github\" variant=\"primary\" onClick={login}>\n        Connect to {repository.name}\n      </LinkButton>\n    );\n  }\n\n  // enableIntegration=true, isLoginInProgress=false, isLoggedIn=true\n  return (\n    <>\n      <Icon name=\"github\" size=\"lg\" />\n      <a className={styles.ellipsis} href={repository.commitUrl} target=\"_blank\" rel=\"noreferrer\" title=\"View commit\">\n        <Icon name=\"external-link-alt\" />\n        &nbsp;\n        {repository.commitName}\n      </a>\n    </>\n  );\n};\n","import { Commit, FunctionDetails } from './types/FunctionDetails';\n\nexport type CommitWithSamples = Commit & {\n  samples: {\n    unit: string;\n    current: number;\n    total: number;\n  };\n};\n\nexport function getCommitsWithSamples(functionsDetails: FunctionDetails[], totalSamples: number): CommitWithSamples[] {\n  const commits = functionsDetails.map((details) => ({\n    ...details.commit,\n    samples: {\n      unit: details.unit ?? 'count',\n      current: Array.from(details.callSites.values()).reduce((acc, { cum }) => acc + cum, 0),\n      total: totalSamples,\n    },\n  }));\n\n  return commits;\n}\n","export const GITHUB_URL = 'https://github.com/';\n\nexport const isGitHubRepository = (repositoryUrl: string): boolean => repositoryUrl.startsWith(GITHUB_URL);\n","import { GITHUB_URL } from './isGitHubRepository';\nimport { FunctionVersion } from './types/FunctionDetails';\n\nexport function getRepositoryDetails(isGitHub: boolean, functionVersion?: FunctionVersion) {\n  if (!functionVersion?.repository) {\n    return null;\n  }\n\n  const url = functionVersion.repository;\n  const name = url.replace(GITHUB_URL, '');\n  const gitRef = functionVersion.git_ref;\n\n  return {\n    isGitHub,\n    url,\n    name,\n    commitUrl: gitRef ? `${url}/commit/${gitRef}` : url,\n    commitName: gitRef ? `${name}@${gitRef.substring(0, 7)}` : name,\n  };\n}\n","import { Function, Location, Mapping, PprofProfile, Sample } from '@shared/types/PprofProfile';\n\nimport { PLACEHOLDER_COMMIT_DATA } from '../components/GitHubContextProvider/infrastructure/PrivateVcsClient';\nimport { CallSiteProps, FunctionDetails } from './types/FunctionDetails';\n\nconst buildDetails = (profile: PprofProfile, func: Function, mapping?: Mapping) => {\n  let version;\n\n  try {\n    version = mapping ? JSON.parse(profile.stringTable[Number(mapping.buildId)]) : undefined;\n  } catch {}\n\n  return {\n    name: profile.stringTable[Number(func.name)],\n    version,\n    startLine: !Number.isNaN(Number(func.startLine)) ? Number(func.startLine) : undefined,\n    fileName: profile.stringTable[Number(func.filename)],\n    callSites: new Map<number, CallSiteProps>(),\n    unit: profile.stringTable[Number(profile.sampleType[0].unit)],\n    commit: PLACEHOLDER_COMMIT_DATA,\n  };\n};\n\nfunction convertSample(\n  fnName: string,\n  profile: PprofProfile,\n  locations: Map<string, Location>,\n  functions: Map<string, Function>,\n  mappings: Map<string, Mapping>,\n  sample: Sample,\n  versions: Map<string, FunctionDetails>\n) {\n  const locationIdSet = new Set();\n\n  sample.locationId.forEach((locationId, index) => {\n    const location = locations.get(locationId);\n    if (!location) {\n      return;\n    }\n\n    const func = functions.get(location.line[0].functionId);\n    if (!func) {\n      return;\n    }\n\n    if (profile.stringTable[Number(func.name)] !== fnName) {\n      return;\n    }\n\n    // https://github.com/google/pprof/blob/main/doc/README.md#details\n    if (locationIdSet.has(locationId)) {\n      return;\n    }\n\n    locationIdSet.add(locationId);\n\n    const details = versions.get(location.mappingId) || buildDetails(profile, func, mappings.get(location.mappingId));\n\n    const lineNumber = Number(location.line[0].line);\n\n    const callSite = details.callSites.get(lineNumber) || {\n      line: Number(location.line[0].line),\n      flat: 0,\n      cum: 0,\n    };\n\n    // if the function we're interested in is at the leaf node (index=0), we have its flat value...\n    const flat = index === 0 ? Number(sample.value[0]) : 0; // value of the location itself\n\n    // ...if not, that's its cum value\n    // locations above the leaf node don't contribute to the sample value (their self is 0)\n    // this is what the API returns\n    const cum = Number(sample.value[0]); // value of the location plus all its descendants\n\n    callSite.flat += flat;\n    callSite.cum += cum;\n\n    details.callSites.set(lineNumber, callSite);\n\n    versions.set(location.mappingId, details);\n  });\n}\n\nexport function convertPprofToFunctionDetails(fnName: string, profile: PprofProfile): FunctionDetails[] {\n  const versions = new Map<string, FunctionDetails>();\n\n  const locations = new Map(profile.location?.map((l) => [l.id, l]));\n  const functions = new Map(profile.function?.map((f) => [f.id, f]));\n  const mappings = new Map(profile.mapping?.map((m) => [m.id, m]));\n\n  profile.sample\n    // Sometimes a sample may not have a stack trace associated with it. This\n    // may be a bug in the Pyroscope API or it may be an idiosyncrasy of the pprof format.\n    // While it may cause some counting errors, let's skip these for now.\n    ?.filter((sample) => sample.locationId !== undefined)\n    .forEach((sample) => convertSample(fnName, profile, locations, functions, mappings, sample, versions));\n\n  return Array.from(versions.values());\n}\n","import { DataSourceProxyClientBuilder } from '../../../../../infrastructure/series/http/DataSourceProxyClientBuilder';\nimport { PrivateVcsClient } from '../components/GitHubContextProvider/infrastructure/PrivateVcsClient';\nimport { FunctionDetails } from '../domain/types/FunctionDetails';\n\nexport async function fetchCommitsInfo(\n  dataSourceUid: string,\n  functionsDetails: FunctionDetails[]\n): Promise<FunctionDetails[]> {\n  const privateVcsClient = DataSourceProxyClientBuilder.build(dataSourceUid, PrivateVcsClient);\n\n  const commits = functionsDetails.map((details) => ({\n    repositoryUrl: details?.version?.repository || '',\n    gitRef: details?.version?.git_ref || 'HEAD',\n    rootPath: details?.version?.root_path || '',\n  }));\n\n  // TODO: extract to its own hook and simplify useSceneFunctionDetailsPanel()?\n  const commitsInfo = await privateVcsClient.getCommits(commits);\n\n  commitsInfo.forEach((commit, i) => {\n    functionsDetails[i].commit = commit;\n  });\n\n  return functionsDetails;\n}\n","import { FunctionDetails } from '../../domain/types/FunctionDetails';\n\nexport const getTotalSum = (fd: FunctionDetails): number =>\n  Array.from(fd.callSites.values()).reduce((acc, { cum }) => acc + cum, 0);\n","import { FunctionDetails } from '../../domain/types/FunctionDetails';\nimport { getTotalSum } from './getTotalSum';\n\nexport const sortByTotal = (a: FunctionDetails, b: FunctionDetails) => getTotalSum(b) - getTotalSum(a);\n","import { TimeRange } from '@grafana/data';\nimport { parseQuery } from '@shared/domain/url-params/parseQuery';\nimport { useQuery } from '@tanstack/react-query';\nimport { useMemo } from 'react';\n\nimport { DataSourceProxyClientBuilder } from '../../../../../infrastructure/series/http/DataSourceProxyClientBuilder';\nimport { PprofApiClient } from '../../../infrastructure/PprofApiClient';\nimport { PLACEHOLDER_COMMIT_DATA } from '../components/GitHubContextProvider/infrastructure/PrivateVcsClient';\nimport { useGitHubContext } from '../components/GitHubContextProvider/useGitHubContext';\nimport { convertPprofToFunctionDetails } from '../domain/convertPprofToFunctionDetails';\nimport { FunctionDetails } from '../domain/types/FunctionDetails';\nimport { fetchCommitsInfo } from './fetchCommitsInfo';\nimport { sortByTotal } from './helpers/sortByTotal';\n\ntype FetchParams = {\n  dataSourceUid: string;\n  query: string;\n  timeRange: TimeRange;\n  stackTrace: string[];\n};\n\ntype FetchResponse = {\n  isFetching: boolean;\n  error: Error | null;\n  functionsDetails: FunctionDetails[];\n};\n\n// We don't expect more than 500 nodes after the selected node.\n// This will avoid downloading too much data by removing leaf nodes.\n// TODO: This could be a setting in the UI.\nconst MAX_NODES = 500;\n\n// eslint-disable-next-line sonarjs/cognitive-complexity\nexport function useFetchFunctionsDetails({ dataSourceUid, query, timeRange, stackTrace }: FetchParams): FetchResponse {\n  const { profileMetricId, labelsSelector } = parseQuery(query);\n  const [start, end] = [timeRange.from.unix(), timeRange.to.unix()];\n  const { isLoggedIn: isGitHubLogged } = useGitHubContext();\n\n  const pprofApiClient = DataSourceProxyClientBuilder.build(dataSourceUid, PprofApiClient);\n\n  const {\n    isFetching,\n    error: queryError,\n    data,\n  } = useQuery({\n    enabled: Boolean(profileMetricId && labelsSelector && stackTrace.length > 0 && start > 0 && end > 0),\n    // eslint-disable-next-line @tanstack/query/exhaustive-deps\n    queryKey: ['function-details', profileMetricId, labelsSelector, start, end, stackTrace, isGitHubLogged],\n    queryFn: async () => {\n      const pprof = await pprofApiClient.selectMergeProfileJson({\n        profileMetricId,\n        labelsSelector,\n        start,\n        end,\n        stackTrace,\n        maxNodes: MAX_NODES,\n      });\n\n      const functionsDetails = convertPprofToFunctionDetails(stackTrace[stackTrace.length - 1], pprof).sort(\n        sortByTotal\n      );\n\n      return isGitHubLogged ? fetchCommitsInfo(dataSourceUid, functionsDetails) : functionsDetails;\n    },\n  });\n\n  const functionsDetails = useMemo(\n    () =>\n      data?.length\n        ? data\n        : [\n            {\n              name: stackTrace.at(-1) as string,\n              startLine: undefined,\n              fileName: '',\n              callSites: new Map(),\n              unit: '',\n              commit: PLACEHOLDER_COMMIT_DATA,\n            },\n          ],\n    [data, stackTrace]\n  );\n\n  return {\n    isFetching,\n    error: pprofApiClient.isAbortError(queryError) ? null : queryError,\n    functionsDetails,\n  };\n}\n","// Array reprsenting one minute, hour, day, week, month, etc in seconds\nconst CUTOFFS = [60, 3600, 86400, 86400 * 7, 86400 * 30, 86400 * 365, Infinity];\n\n// Array equivalent to the above but in the string representation of the units\nconst UNITS: Intl.RelativeTimeFormatUnit[] = ['second', 'minute', 'hour', 'day', 'week', 'month', 'year'];\n\n// Intl.RelativeTimeFormat do its magic\nconst RTF = new Intl.RelativeTimeFormat('en-US', { numeric: 'auto' });\n\n/**\n * Convert a date to a relative time string, such as \"a minute ago\", \"in 2 hours\", \"yesterday\", \"3 months ago\", etc.\n *\n * Adapted from https://www.builder.io/blog/relative-time\n */\nexport function getRelativeTimeString(date: Date): string {\n  const timeMs = date.getTime();\n\n  // Get the amount of seconds between the given date and now\n  const deltaSeconds = Math.round((timeMs - Date.now()) / 1000);\n\n  // Grab the ideal cutoff unit\n  const unitIndex = CUTOFFS.findIndex((cutoff) => cutoff > Math.abs(deltaSeconds));\n\n  // Get the divisor to divide from the seconds. E.g. if our unit is \"day\" our divisor\n  // is one day in seconds, so we can divide our seconds by this to get the # of days\n  const divisor = unitIndex ? CUTOFFS[unitIndex - 1] : 1;\n\n  // Intl.RelativeTimeFormat do its magic\n  return RTF.format(Math.floor(deltaSeconds / divisor), UNITS[unitIndex]);\n}\n","import { getRelativeTimeString } from './getRelativeTimeString';\n\nconst DTF = new Intl.DateTimeFormat('en-US', {\n  year: 'numeric',\n  month: 'long',\n  day: '2-digit',\n});\n\nexport function formatCommitDate(commitDate?: Date) {\n  return commitDate ? `${DTF.format(commitDate)} (${getRelativeTimeString(commitDate)})` : '?';\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { buildUnitFormatter } from '../domain/buildUnitFormatter';\nimport { formatCommitDate } from '../domain/formatCommitDate';\nimport { CommitWithSamples } from '../domain/getCommitsWithSamples';\nimport { getCommitShortMessage, getCommitShortSha } from './CommitSelect';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n  `,\n  firstLine: css`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: 1em;\n  `,\n  sha: css`\n    font-family: monospace;\n  `,\n  sample: css`\n    font-size: 12px;\n  `,\n  secondLine: css`\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    font-size: 12px;\n    color: ${theme.colors.text.secondary};\n  `,\n  avatar: css`\n    display: inline-block;\n    margin-right: 4px;\n    border-radius: 50%;\n    background: grey;\n    width: 16px;\n    height: 16px;\n  `,\n  message: css`\n    font-size: 12px;\n    color: ${theme.colors.text.secondary};\n  `,\n});\n\ntype CommitOptionProps = {\n  commit: CommitWithSamples;\n};\n\nexport function CommitOption({ commit }: CommitOptionProps) {\n  const styles = useStyles2(getStyles);\n\n  const { author, samples } = commit;\n\n  const commitAuthor = author.login;\n  const commitAuthorAvatarUrl = author.avatarURL;\n\n  const total = buildUnitFormatter(samples.unit)(samples.current);\n  const samplePercent = Math.round((samples.current / samples.total) * 100);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.firstLine}>\n        <span className={styles.sha}>{getCommitShortSha(commit.sha)}</span>\n        <span className={styles.sample}>\n          {total.text}\n          {total.suffix} ({samplePercent}%)\n        </span>\n      </div>\n\n      <div className={styles.secondLine}>\n        {commitAuthorAvatarUrl && <img className={styles.avatar} src={commitAuthorAvatarUrl} alt={commitAuthor} />}\n        <span>\n          {commitAuthor} on {formatCommitDate(commit.date)}\n        </span>\n      </div>\n\n      <span className={styles.message}>{getCommitShortMessage(commit.message)}</span>\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { Commit } from '../domain/types/FunctionDetails';\nimport { getCommitShortMessage, getCommitShortSha } from './CommitSelect';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n    gap: 1em;\n  `,\n  sha: css`\n    font-family: monospace;\n  `,\n  message: css`\n    color: ${theme.colors.text.secondary};\n  `,\n});\n\ntype CommitOptionSelectedProps = {\n  commit: Commit;\n};\n\nexport function CommitOptionSelected({ commit }: CommitOptionSelectedProps) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.container}>\n      <span className={styles.sha}>{getCommitShortSha(commit.sha)}</span>\n      <div className={styles.message}>\n        <span>{getCommitShortMessage(commit.message)}</span>\n      </div>\n    </div>\n  );\n}\n","import { SelectableValue } from '@grafana/data';\nimport { FormatOptionLabelMeta, Select } from '@grafana/ui';\nimport React from 'react';\n\nimport { PLACEHOLDER_COMMIT_DATA } from '../components/GitHubContextProvider/infrastructure/PrivateVcsClient';\nimport { CommitWithSamples } from '../domain/getCommitsWithSamples';\nimport { CommitOption } from './CommitOption';\nimport { CommitOptionSelected } from './CommitOptionSelected';\n\ntype CommitSelectProps = {\n  commits: CommitWithSamples[];\n  selectedCommit: CommitWithSamples;\n  onChange: (commit: CommitWithSamples) => void;\n};\n\nexport function CommitSelect({ commits, selectedCommit, onChange }: CommitSelectProps) {\n  return (\n    <Select\n      options={commits.map((commit) => ({\n        label: commit.sha,\n        value: commit,\n      }))}\n      value={{\n        label: selectedCommit.sha,\n        value: selectedCommit,\n      }}\n      hideSelectedOptions\n      isSearchable={false}\n      noOptionsMessage=\"No commits found\"\n      formatOptionLabel={formatOption}\n      onChange={(item) => {\n        if (item.value) {\n          onChange(item.value);\n        }\n      }}\n    />\n  );\n}\n\nfunction formatOption(\n  item: SelectableValue<CommitWithSamples>,\n  formatOptionMeta: FormatOptionLabelMeta<CommitWithSamples>\n) {\n  const { value: commit } = item;\n\n  if (!commit) {\n    return null;\n  }\n\n  const isSelected = formatOptionMeta.selectValue[0]?.value === commit;\n\n  return isSelected ? <CommitOptionSelected commit={commit} /> : <CommitOption commit={commit} />;\n}\n\nexport const getCommitShortSha = (sha: string): string => {\n  return sha === PLACEHOLDER_COMMIT_DATA.sha ? sha : sha.substring(0, 7);\n};\n\nexport const getCommitShortMessage = (message: string): string => {\n  return message.split('\\n')[0];\n};\n","import { Alert, Icon, TextLink } from '@grafana/ui';\nimport React from 'react';\n\ntype GitHubIntegrationBannerProps = {\n  onDismiss: () => void;\n};\n\nexport const GitHubIntegrationBanner = ({ onDismiss }: GitHubIntegrationBannerProps) => {\n  return (\n    <Alert severity=\"info\" title=\"Integrate with Github\" buttonContent=\"Dismiss\" onRemove={onDismiss}>\n      <p>\n        This language supports integration with <Icon name=\"github\" /> GitHub.\n      </p>\n      <p>\n        To activate this feature, you will need to add two new labels when sending profiles{' '}\n        <code>service_repository</code> and <code>service_ref</code>.{' '}\n      </p>\n      <p>\n        They should respectively be set to the full repository GitHub URL and the current{' '}\n        <TextLink href=\"https://docs.github.com/en/rest/git/refs?apiVersion=2022-11-28#about-git-references\" external>\n          git ref\n        </TextLink>{' '}\n        of the running service.\n      </p>\n      <Icon name=\"document-info\" />{' '}\n      <TextLink\n        href=\"https://grafana.com/docs/grafana-cloud/monitor-applications/profiles/pyroscope-github-integration/\"\n        external\n      >\n        Learn more\n      </TextLink>\n    </Alert>\n  );\n};\n","import { Spinner } from '@grafana/ui';\nimport React, { memo } from 'react';\n\ntype InlineSpinnerProps = {\n  isLoading: boolean;\n  children: React.ReactNode;\n};\n\nfunction InlineSpinnerComponent({ isLoading, children }: InlineSpinnerProps) {\n  return isLoading ? <Spinner inline /> : <>{children}</>;\n}\n\nexport const InlineSpinner = memo(InlineSpinnerComponent);\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2, TimeRange } from '@grafana/data';\nimport { SceneComponentProps, sceneGraph, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { IconButton, InlineLabel, TextLink, Tooltip, useStyles2 } from '@grafana/ui';\nimport { displaySuccess } from '@shared/domain/displayStatus';\nimport { userStorage } from '@shared/infrastructure/userStorage';\nimport { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { InlineBanner } from '@shared/ui/InlineBanner';\nimport { Panel } from '@shared/ui/Panel/Panel';\nimport React, { useMemo, useState } from 'react';\n\nimport { useBuildPyroscopeQuery } from '../../../../domain/useBuildPyroscopeQuery';\nimport { ProfilesDataSourceVariable } from '../../../../domain/variables/ProfilesDataSourceVariable';\nimport { CodeContainer } from './components/CodeContainer/CodeContainer';\nimport { GitHubRepository } from './components/GitHubRepository';\nimport { formatFileName } from './domain/formatFileName';\nimport { CommitWithSamples, getCommitsWithSamples } from './domain/getCommitsWithSamples';\nimport { getRepositoryDetails } from './domain/getRepositoryDetails';\nimport { isGitHubRepository } from './domain/isGitHubRepository';\nimport { FunctionDetails } from './domain/types/FunctionDetails';\nimport { StackTrace } from './domain/types/StackTrace';\nimport { useFetchFunctionsDetails } from './infrastructure/useFetchFunctionsDetails';\nimport { CommitSelect } from './ui/CommitSelect';\nimport { GitHubIntegrationBanner } from './ui/GitHubIntegrationBanner';\nimport { InlineSpinner } from './ui/InlineSpinner';\n\ninterface SceneFunctionDetailsPanelState extends SceneObjectState {}\n\nexport class SceneFunctionDetailsPanel extends SceneObjectBase<SceneFunctionDetailsPanelState> {\n  static LABEL_WIDTH = 16;\n\n  constructor() {\n    super({ key: 'function-details-panel' });\n  }\n\n  // eslint-disable-next-line sonarjs/cognitive-complexity\n  useSceneFunctionDetailsPanel = (stackTrace: StackTrace, timeRange: TimeRange): DomainHookReturnValue => {\n    const dataSourceUid = sceneGraph.findByKeyAndType(this, 'dataSource', ProfilesDataSourceVariable).useState()\n      .value as string;\n    const query = useBuildPyroscopeQuery(this, 'filters');\n\n    const {\n      functionsDetails,\n      error: fetchFunctionDetailsError,\n      isFetching,\n    } = useFetchFunctionsDetails({ dataSourceUid, query, timeRange, stackTrace });\n\n    const [prevFunctionsDetails, setPrevFunctionsDetails] = useState<FunctionDetails[]>();\n    const [currentFunctionDetails, setCurrentFunctionDetails] = useState<FunctionDetails>(functionsDetails[0]);\n    const [isGitHubBannerDismissed, setIsGitHubBannerDismissed] = useState(\n      userStorage.has(userStorage.KEYS.GITHUB_INTEGRATION)\n    );\n\n    if (functionsDetails && prevFunctionsDetails !== functionsDetails) {\n      setPrevFunctionsDetails(functionsDetails);\n\n      if (currentFunctionDetails !== functionsDetails[0]) {\n        setCurrentFunctionDetails(functionsDetails[0]);\n      }\n    }\n\n    const isGitHubRepo = isGitHubRepository(currentFunctionDetails?.version?.repository || '');\n    const isGitHubSupported = currentFunctionDetails?.fileName?.endsWith('.go');\n    const shouldDisplayGitHubBanner = !isGitHubBannerDismissed && !isGitHubRepo && isGitHubSupported;\n\n    // TODO: massage in useFetchFunctionsDetails?\n    const totalSamples = useMemo(\n      () =>\n        functionsDetails\n          .map((details) => Array.from(details.callSites.values()).reduce((acc, { cum }) => acc + cum, 0))\n          .reduce((acc, total) => acc + total, 0),\n      [functionsDetails]\n    );\n    const commits = getCommitsWithSamples(functionsDetails, totalSamples);\n    const selectedCommit = commits.find(({ sha }) => sha === currentFunctionDetails?.commit?.sha);\n\n    return {\n      data: {\n        isLoading: isFetching,\n        fetchFunctionDetailsError,\n        functionDetails: currentFunctionDetails,\n        // TODO: massage in useFetchFunctionsDetails?\n        repository: getRepositoryDetails(isGitHubRepo, currentFunctionDetails?.version),\n        commits,\n        selectedCommit,\n        isGitHubSupported,\n        shouldDisplayGitHubBanner,\n        dataSourceUid,\n      },\n      actions: {\n        selectCommit(selectedCommit: CommitWithSamples) {\n          const details = functionsDetails.find(({ commit }) => commit.sha === selectedCommit.sha);\n          setCurrentFunctionDetails(details as FunctionDetails);\n        },\n        async copyFilePathToClipboard() {\n          try {\n            if (currentFunctionDetails?.fileName) {\n              await navigator.clipboard.writeText(currentFunctionDetails.fileName);\n              displaySuccess(['File path copied to clipboard!']);\n            }\n          } catch {}\n        },\n        dismissGitHubBanner() {\n          userStorage.set(userStorage.KEYS.GITHUB_INTEGRATION, {});\n          setIsGitHubBannerDismissed(true);\n        },\n      },\n    };\n  };\n\n  static Component = ({\n    model,\n    timeRange,\n    stackTrace,\n    onClose,\n  }: SceneComponentProps<SceneFunctionDetailsPanel> & {\n    timeRange: TimeRange;\n    stackTrace: StackTrace;\n    onClose: () => void;\n  }) => {\n    const styles = useStyles2(getStyles);\n    const { data, actions } = model.useSceneFunctionDetailsPanel(stackTrace, timeRange);\n\n    return (\n      <Panel\n        className={styles.sidePanel}\n        title=\"Function Details\"\n        isLoading={false}\n        headerActions={<IconButton name=\"times-circle\" variant=\"secondary\" aria-label=\"close\" onClick={onClose} />}\n        dataTestId=\"function-details-panel\"\n      >\n        <div className={styles.content}>\n          {data.fetchFunctionDetailsError && (\n            <InlineBanner\n              severity=\"error\"\n              title=\"Error while fetching function details!\"\n              error={data.fetchFunctionDetailsError}\n            />\n          )}\n\n          <div className={styles.container}>\n            <div className={styles.row} data-testid=\"row-function-name\">\n              <InlineLabel width={SceneFunctionDetailsPanel.LABEL_WIDTH}>Function name</InlineLabel>\n              <Tooltip content={data.functionDetails.name} placement=\"top\">\n                <span className={styles.textValue}>{data.functionDetails.name}</span>\n              </Tooltip>\n            </div>\n\n            <div className={styles.row} data-testid=\"row-start-line\">\n              <InlineLabel\n                tooltip=\"The line where this function definition starts\"\n                width={SceneFunctionDetailsPanel.LABEL_WIDTH}\n              >\n                Start line\n              </InlineLabel>\n              <span className={styles.textValue}>\n                <InlineSpinner isLoading={data.isLoading}>\n                  {data.functionDetails.startLine !== undefined ? data.functionDetails.startLine : '-'}\n                </InlineSpinner>\n              </span>\n            </div>\n\n            <div className={styles.row} data-testid=\"row-file-path\">\n              <InlineLabel\n                tooltip=\"File path where that function is defined\"\n                width={SceneFunctionDetailsPanel.LABEL_WIDTH}\n              >\n                File\n              </InlineLabel>\n              <InlineSpinner isLoading={data.isLoading}>\n                {data.functionDetails.fileName ? (\n                  <>\n                    <Tooltip content={data.functionDetails.fileName} placement=\"top\">\n                      <span className={styles.textValue}>{formatFileName(data.functionDetails.fileName)}</span>\n                    </Tooltip>\n                    <IconButton\n                      name=\"clipboard-alt\"\n                      tooltip=\"Copy to clipboard\"\n                      onClick={actions.copyFilePathToClipboard}\n                    />\n                  </>\n                ) : (\n                  '-'\n                )}\n              </InlineSpinner>\n            </div>\n\n            {data.shouldDisplayGitHubBanner && (\n              <div className={styles.row} data-testid=\"row-github-banner\">\n                <GitHubIntegrationBanner onDismiss={actions.dismissGitHubBanner} />\n              </div>\n            )}\n\n            <div className={styles.row} data-testid=\"row-repository\">\n              <InlineLabel\n                tooltip=\"The repository configured for the selected service\"\n                width={SceneFunctionDetailsPanel.LABEL_WIDTH}\n              >\n                Repository\n              </InlineLabel>\n              <InlineSpinner isLoading={data.isLoading}>\n                {data.repository ? (\n                  data.repository.isGitHub ? (\n                    <GitHubRepository enableIntegration={data.isGitHubSupported} repository={data.repository} />\n                  ) : (\n                    <TextLink href={data.repository} external>\n                      {data.repository}\n                    </TextLink>\n                  )\n                ) : (\n                  '-'\n                )}\n              </InlineSpinner>\n            </div>\n\n            <div className={styles.row} data-testid=\"row-commit\">\n              <InlineLabel\n                width={SceneFunctionDetailsPanel.LABEL_WIDTH}\n                tooltip=\"The version of the application (commit) where the function is defined. Use the dropdown menu to target a specific commit.\"\n              >\n                Commit\n              </InlineLabel>\n              <InlineSpinner isLoading={data.isLoading}>\n                <CommitSelect\n                  commits={data.commits}\n                  selectedCommit={data.selectedCommit}\n                  onChange={actions.selectCommit}\n                />\n              </InlineSpinner>\n            </div>\n          </div>\n\n          <CodeContainer dataSourceUid={data.dataSourceUid} functionDetails={data.functionDetails} />\n        </div>\n      </Panel>\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  sidePanel: css`\n    flex: 1 0 50%;\n    margin-left: 8px;\n    max-width: calc(50% - 4px);\n  `,\n  title: css`\n    margin: -4px 0 4px 0;\n  `,\n  content: css`\n    padding: ${theme.spacing(1)};\n  `,\n  container: css`\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n  `,\n  row: css`\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    padding-bottom: 10px;\n    > * {\n      margin-right: 10px !important;\n    }\n  `,\n  textValue: css`\n    text-overflow: ellipsis;\n    overflow: hidden;\n    direction: rtl;\n    white-space: nowrap;\n  `,\n});\n","// when using direction=rtl, the first / is ending up at the end of the string\n// so we add a / at the end of the string to make it look better\nexport const formatFileName = (fileName: string): string =>\n  fileName?.[0] === '/' ? fileName.substring(1) + '/' : fileName;\n","import { css } from '@emotion/css';\nimport { createTheme, GrafanaTheme2, LoadingState, TimeRange } from '@grafana/data';\nimport { FlameGraph } from '@grafana/flamegraph';\nimport { SceneComponentProps, SceneObjectBase, SceneObjectState, SceneQueryRunner } from '@grafana/scenes';\nimport { Spinner, useStyles2, useTheme2 } from '@grafana/ui';\nimport { displayWarning } from '@shared/domain/displayStatus';\nimport { useMaxNodesFromUrl } from '@shared/domain/url-params/useMaxNodesFromUrl';\nimport { useToggleSidePanel } from '@shared/domain/useToggleSidePanel';\nimport { getProfileMetric, ProfileMetricId } from '@shared/infrastructure/profile-metrics/getProfileMetric';\nimport { useFetchPluginSettings } from '@shared/infrastructure/settings/useFetchPluginSettings';\nimport { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { Panel } from '@shared/ui/Panel/Panel';\nimport { PyroscopeLogo } from '@shared/ui/PyroscopeLogo';\nimport React, { useEffect, useMemo } from 'react';\nimport { Unsubscribable } from 'rxjs';\n\nimport { useBuildPyroscopeQuery } from '../../domain/useBuildPyroscopeQuery';\nimport { getSceneVariableValue } from '../../helpers/getSceneVariableValue';\nimport { buildFlameGraphQueryRunner } from '../../infrastructure/flame-graph/buildFlameGraphQueryRunner';\nimport { PYROSCOPE_DATA_SOURCE } from '../../infrastructure/pyroscope-data-sources';\nimport { AIButton } from '../SceneAiPanel/components/AiButton/AIButton';\nimport { SceneAiPanel } from '../SceneAiPanel/SceneAiPanel';\nimport { SceneExportMenu } from './components/SceneExportMenu/SceneExportMenu';\nimport { useGitHubIntegration } from './components/SceneFunctionDetailsPanel/domain/useGitHubIntegration';\nimport { SceneFunctionDetailsPanel } from './components/SceneFunctionDetailsPanel/SceneFunctionDetailsPanel';\n\ninterface SceneFlameGraphState extends SceneObjectState {\n  $data: SceneQueryRunner;\n  lastTimeRange?: TimeRange;\n  exportMenu: SceneExportMenu;\n  aiPanel: SceneAiPanel;\n  functionDetailsPanel: SceneFunctionDetailsPanel;\n}\n\n// I've tried to use a SplitLayout for the body without any success (left: flame graph, right: explain flame graph content)\n// without success: the flame graph dimensions are set in runtime and do not change when the user resizes the layout\nexport class SceneFlameGraph extends SceneObjectBase<SceneFlameGraphState> {\n  constructor() {\n    super({\n      key: 'flame-graph',\n      $data: new SceneQueryRunner({\n        datasource: PYROSCOPE_DATA_SOURCE,\n        queries: [],\n      }),\n      lastTimeRange: undefined,\n      exportMenu: new SceneExportMenu(),\n      aiPanel: new SceneAiPanel(),\n      functionDetailsPanel: new SceneFunctionDetailsPanel(),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    let dataSubscription: Unsubscribable | undefined;\n\n    const stateSubscription = this.subscribeToState((newState, prevState) => {\n      if (newState.$data === prevState.$data) {\n        return;\n      }\n\n      if (dataSubscription) {\n        dataSubscription.unsubscribe();\n      }\n\n      dataSubscription = newState.$data?.subscribeToState((newDataState) => {\n        if (newDataState.data?.state === LoadingState.Done) {\n          this.setState({ lastTimeRange: newDataState.data.timeRange });\n        }\n      });\n    });\n\n    return () => {\n      stateSubscription.unsubscribe();\n      dataSubscription?.unsubscribe();\n    };\n  }\n\n  buildTitle() {\n    const serviceName = getSceneVariableValue(this, 'serviceName');\n    const profileMetricId = getSceneVariableValue(this, 'profileMetricId');\n    const profileMetricType = getProfileMetric(profileMetricId as ProfileMetricId).type;\n\n    return (\n      <>\n        <PyroscopeLogo size=\"small\" />\n        Flame graph for {serviceName} ({profileMetricType})\n      </>\n    );\n  }\n\n  useSceneFlameGraph = (): DomainHookReturnValue => {\n    const { isLight } = useTheme2();\n    const getTheme = useMemo(() => () => createTheme({ colors: { mode: isLight ? 'light' : 'dark' } }), [isLight]);\n\n    const [maxNodes] = useMaxNodesFromUrl();\n    const { settings, error: isFetchingSettingsError } = useFetchPluginSettings();\n    const { $data, lastTimeRange, exportMenu, aiPanel, functionDetailsPanel } = this.useState();\n\n    if (isFetchingSettingsError) {\n      displayWarning([\n        'Error while retrieving the plugin settings!',\n        'Some features might not work as expected (e.g. collapsed flame graphs). Please try to reload the page, sorry for the inconvenience.',\n      ]);\n    }\n\n    useEffect(() => {\n      if (maxNodes) {\n        this.setState({\n          $data: buildFlameGraphQueryRunner({ maxNodes }),\n        });\n      }\n    }, [maxNodes]);\n\n    const $dataState = $data.useState();\n    const isFetchingProfileData = $dataState?.data?.state === LoadingState.Loading;\n    const profileData = $dataState?.data?.series?.[0];\n    const hasProfileData = Number(profileData?.length) > 1;\n\n    const query = useBuildPyroscopeQuery(this, 'filters');\n\n    return {\n      data: {\n        title: this.buildTitle(),\n        isLoading: isFetchingProfileData,\n        isFetchingProfileData,\n        hasProfileData,\n        profileData,\n        settings,\n        export: {\n          menu: exportMenu,\n          query,\n          timeRange: lastTimeRange,\n        },\n        ai: {\n          panel: aiPanel,\n          fetchParams: [{ query, timeRange: lastTimeRange }],\n        },\n        gitHub: {\n          panel: functionDetailsPanel,\n          timeRange: lastTimeRange,\n        },\n      },\n      actions: {\n        getTheme,\n      },\n    };\n  };\n\n  static Component = ({ model }: SceneComponentProps<SceneFlameGraph>) => {\n    const styles = useStyles2(getStyles);\n\n    const { data, actions } = model.useSceneFlameGraph();\n    const sidePanel = useToggleSidePanel();\n    const gitHubIntegration = useGitHubIntegration(sidePanel);\n\n    const isAiButtonDisabled = data.isLoading || !data.hasProfileData;\n\n    useEffect(() => {\n      if (isAiButtonDisabled) {\n        sidePanel.close();\n      }\n    }, [isAiButtonDisabled, sidePanel]);\n\n    const panelTitle = useMemo(\n      () => (\n        <>\n          {data.title}\n          {data.isLoading && <Spinner inline className={styles.spinner} />}\n        </>\n      ),\n      [data.isLoading, data.title, styles.spinner]\n    );\n\n    return (\n      <div className={styles.flex}>\n        <Panel\n          dataTestId=\"flame-graph-panel\"\n          className={styles.flamegraphPanel}\n          title={panelTitle}\n          isLoading={data.isLoading}\n          headerActions={\n            <AIButton\n              disabled={isAiButtonDisabled || sidePanel.isOpen('ai')}\n              onClick={() => sidePanel.open('ai')}\n              interactionName=\"g_pyroscope_app_explain_flamegraph_clicked\"\n            >\n              Explain Flame Graph\n            </AIButton>\n          }\n        >\n          <FlameGraph\n            data={data.profileData as any}\n            disableCollapsing={!data.settings?.collapsedFlamegraphs}\n            getTheme={actions.getTheme as any}\n            getExtraContextMenuButtons={gitHubIntegration.actions.getExtraFlameGraphMenuItems}\n            extraHeaderElements={\n              <data.export.menu.Component\n                model={data.export.menu}\n                query={data.export.query}\n                timeRange={data.export.timeRange}\n              />\n            }\n          />\n        </Panel>\n\n        {sidePanel.isOpen('ai') && (\n          <data.ai.panel.Component model={data.ai.panel} fetchParams={data.ai.fetchParams} onClose={sidePanel.close} />\n        )}\n\n        {sidePanel.isOpen('function-details') && (\n          <data.gitHub.panel.Component\n            model={data.gitHub.panel}\n            timeRange={data.gitHub.timeRange}\n            stackTrace={gitHubIntegration.data.stacktrace}\n            onClose={sidePanel.close}\n          />\n        )}\n      </div>\n    );\n  };\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  flex: css`\n    display: flex;\n  `,\n  flamegraphPanel: css`\n    min-width: 0;\n    flex-grow: 1;\n  `,\n  spinner: css`\n    margin-left: ${theme.spacing(1)};\n  `,\n});\n","import { IconName } from '@grafana/data';\nimport { Props as FlameGraphProps } from '@grafana/flamegraph';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { useFetchPluginSettings } from '@shared/infrastructure/settings/useFetchPluginSettings';\nimport { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport { useCallback, useState } from 'react';\n\nimport { useGitHubContext } from '../components/GitHubContextProvider/useGitHubContext';\nimport { buildStackTrace } from './buildStackTrace';\n\nexport function useGitHubIntegration(sidePanel: any): DomainHookReturnValue {\n  const { login, isSessionExpired } = useGitHubContext();\n  const { settings } = useFetchPluginSettings();\n\n  const isFunctionDetailsEnabled = settings?.enableFunctionDetails;\n\n  const [stacktrace, setStacktrace] = useState<string[]>([]);\n\n  const getExtraFlameGraphMenuItems: FlameGraphProps['getExtraContextMenuButtons'] = useCallback(\n    ({ item }: any, data: Record<string, any>) => {\n      // clicking on the top-level \"total\" node doesn't add \"Function details\" as an extra contextual menu item\n      if (!isFunctionDetailsEnabled || item.level === 0) {\n        return [];\n      }\n\n      return [\n        {\n          label: 'Function details',\n          icon: 'info-circle' as IconName,\n          onClick: () => {\n            reportInteraction('g_pyroscope_app_function_details_clicked');\n\n            setStacktrace(buildStackTrace(item, data));\n\n            sidePanel.open('function-details');\n\n            // login can only happen as a consequence of a user action\n            // this is why we check if the session is expired here and not whenever we make a request to the API\n            if (isSessionExpired) {\n              login();\n            }\n          },\n        },\n      ];\n    },\n    [isFunctionDetailsEnabled, isSessionExpired, login, sidePanel]\n  );\n\n  return {\n    data: {\n      stacktrace,\n    },\n    actions: {\n      getExtraFlameGraphMenuItems,\n    },\n  };\n}\n","import { createTheme, getDisplayProcessor } from '@grafana/data';\n\nimport { StackTrace } from './types/StackTrace';\n\nexport function buildStackTrace(levelItem: any, data: Record<string, any>): StackTrace {\n  let stacktrace: string[] = [];\n\n  const labels = data.fields.find(({ name }: { name: string }) => name === 'label');\n  if (!labels) {\n    return stacktrace;\n  }\n\n  const dp = getDisplayProcessor({ field: labels, theme: createTheme() });\n  let node = levelItem;\n\n  while (node && node.level > 0) {\n    for (const idx of node.itemIndexes) {\n      stacktrace.unshift(dp(labels.values[idx]).text);\n    }\n\n    node = node.parents?.[0];\n  }\n\n  return stacktrace;\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { SceneComponentProps, sceneGraph, SceneObjectBase, SceneObjectState } from '@grafana/scenes';\nimport { useStyles2 } from '@grafana/ui';\nimport React from 'react';\n\nimport { FavAction } from '../../domain/actions/FavAction';\nimport { SelectAction } from '../../domain/actions/SelectAction';\nimport { FiltersVariable } from '../../domain/variables/FiltersVariable/FiltersVariable';\nimport { ProfileMetricVariable } from '../../domain/variables/ProfileMetricVariable';\nimport { ServiceNameVariable } from '../../domain/variables/ServiceNameVariable/ServiceNameVariable';\nimport { GridItemData } from '../SceneByVariableRepeaterGrid/types/GridItemData';\nimport { SceneMainServiceTimeseries } from '../SceneMainServiceTimeseries';\nimport { SceneFlameGraph } from './SceneFlameGraph';\n\ninterface SceneExploreServiceFlameGraphState extends SceneObjectState {\n  mainTimeseries: SceneMainServiceTimeseries;\n  body: SceneFlameGraph;\n}\n\nexport class SceneExploreServiceFlameGraph extends SceneObjectBase<SceneExploreServiceFlameGraphState> {\n  constructor({ item }: { item?: GridItemData }) {\n    super({\n      key: 'explore-service-flame-graph',\n      mainTimeseries: new SceneMainServiceTimeseries({\n        item,\n        headerActions: (item) => [new SelectAction({ type: 'view-labels', item }), new FavAction({ item })],\n      }),\n      body: new SceneFlameGraph(),\n    });\n\n    this.addActivationHandler(this.onActivate.bind(this, item));\n  }\n\n  onActivate(item?: GridItemData) {\n    if (item) {\n      this.initVariables(item);\n    }\n\n    const profileMetricVariable = sceneGraph.findByKeyAndType(this, 'profileMetricId', ProfileMetricVariable);\n\n    profileMetricVariable.setState({ query: ProfileMetricVariable.QUERY_SERVICE_NAME_DEPENDENT });\n    profileMetricVariable.update(true);\n\n    return () => {\n      profileMetricVariable.setState({ query: ProfileMetricVariable.QUERY_DEFAULT });\n      profileMetricVariable.update(true);\n    };\n  }\n\n  initVariables(item: GridItemData) {\n    const { serviceName, profileMetricId, filters } = item.queryRunnerParams;\n\n    if (serviceName) {\n      const serviceNameVariable = sceneGraph.findByKeyAndType(this, 'serviceName', ServiceNameVariable);\n      serviceNameVariable.changeValueTo(serviceName);\n    }\n\n    if (profileMetricId) {\n      const profileMetricVariable = sceneGraph.findByKeyAndType(this, 'profileMetricId', ProfileMetricVariable);\n      profileMetricVariable.changeValueTo(profileMetricId);\n    }\n\n    if (filters) {\n      const filtersVariable = sceneGraph.findByKeyAndType(this, 'filters', FiltersVariable);\n      filtersVariable.setState({ filters });\n    }\n  }\n\n  // see SceneProfilesExplorer\n  getVariablesAndGridControls() {\n    return {\n      variables: [\n        sceneGraph.findByKeyAndType(this, 'serviceName', ServiceNameVariable),\n        sceneGraph.findByKeyAndType(this, 'profileMetricId', ProfileMetricVariable),\n        sceneGraph.findByKeyAndType(this, 'filters', FiltersVariable),\n      ],\n      gridControls: [],\n    };\n  }\n\n  static Component({ model }: SceneComponentProps<SceneExploreServiceFlameGraph>) {\n    const styles = useStyles2(getStyles); // eslint-disable-line react-hooks/rules-of-hooks\n    const { mainTimeseries, body } = model.useState();\n\n    // we use CSS here and Scenes Flex layout because we encountered a problem where the Flamegraph would not respect each panel width,\n    // resulting in a cropped flame graph when opening the side panel\n    return (\n      <div className={styles.flex}>\n        <div className={styles.mainTimeseries}>\n          <mainTimeseries.Component model={mainTimeseries} />\n        </div>\n        <body.Component model={body} />\n      </div>\n    );\n  }\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  flex: css`\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    gap: ${theme.spacing(1)};\n  `,\n  mainTimeseries: css`\n    height: ${SceneMainServiceTimeseries.MIN_HEIGHT}px;\n  `,\n});\n","import { SceneObject, SceneVariable } from '@grafana/scenes';\nimport { displaySuccess } from '@shared/domain/displayStatus';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { logger } from '@shared/infrastructure/tracking/logger';\nimport { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { PLUGIN_BASE_URL, ROUTES } from 'src/constants';\n\nimport { ProfilesDataSourceVariable } from '../../../../domain/variables/ProfilesDataSourceVariable';\nimport { ExplorationType } from '../../SceneProfilesExplorer';\nimport { HeaderProps } from '../Header';\nimport { builsShareableUrl } from './builsShareableUrl';\n\nasync function onClickShareLink() {\n  reportInteraction('g_pyroscope_app_share_link_clicked');\n\n  try {\n    await navigator.clipboard.writeText(builsShareableUrl().toString());\n\n    displaySuccess(['Link copied to clipboard!']);\n  } catch (error) {\n    logger.error(error as Error, { info: 'Error while creating the shareable link!' });\n  }\n}\n\nexport function useHeader({ explorationType, controls, body, $variables, onChangeExplorationType }: HeaderProps) {\n  const [timePickerControl, refreshPickerControl] =\n    explorationType === ExplorationType.DIFF_FLAME_GRAPH ? [] : (controls as [SceneObject, SceneObject]);\n\n  const dataSourceVariable = $variables.state.variables[0] as ProfilesDataSourceVariable;\n\n  const bodySceneObject = body?.state.primary as any;\n\n  if (typeof bodySceneObject.getVariablesAndGridControls !== 'function') {\n    throw new Error(\n      `Error while rendering \"${bodySceneObject.constructor.name}\": the \"getVariablesAndGridControls\" method is missing! Please implement it.`\n    );\n  }\n\n  const { variables: sceneVariables, gridControls } = bodySceneObject.getVariablesAndGridControls() as {\n    variables: SceneVariable[];\n    gridControls: SceneObject[];\n  };\n\n  const dataSourceUid = dataSourceVariable.useState().value as string;\n\n  const history = useHistory();\n\n  return {\n    data: {\n      explorationType,\n      dataSourceVariable,\n      timePickerControl,\n      refreshPickerControl,\n      sceneVariables,\n      gridControls,\n      body,\n      dataSourceUid,\n    },\n    actions: {\n      onChangeExplorationType,\n      onClickShareLink,\n      onClickUserSettings: useCallback(() => {\n        reportInteraction('g_pyroscope_app_user_settings_clicked');\n\n        history.push(`${PLUGIN_BASE_URL}${ROUTES.SETTINGS}`, { referrer: window.location.href });\n      }, [history]),\n    },\n  };\n}\n","import { dateMath } from '@grafana/data';\n\nimport { getDefaultTimeRange } from '../../../..//domain/buildTimeRange';\n\nexport function builsShareableUrl(): URL {\n  const shareableUrl = new URL(window.location.toString());\n  const { searchParams } = shareableUrl;\n\n  if (!searchParams.get('from')) {\n    searchParams.set('from', getDefaultTimeRange().from);\n  }\n  if (!searchParams.get('to')) {\n    searchParams.set('to', getDefaultTimeRange().to);\n  }\n\n  ['from', 'to', 'from-2', 'to-2', 'from-3', 'to-3', 'diffFrom', 'diffTo', 'diffFrom-2', 'diffTo-2'].forEach((name) => {\n    const value = searchParams.get(name);\n    if (value) {\n      searchParams.set(name, String(dateMath.parse(value)!.valueOf()));\n    }\n  });\n\n  return shareableUrl;\n}\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Button, useStyles2 } from '@grafana/ui';\nimport { noOp } from '@shared/domain/noOp';\nimport React, { Fragment } from 'react';\n\ntype ExplorationTypeSelectorProps = {\n  options: Array<SelectableValue<string>>;\n  value: string;\n  onChange: (newValue: string) => void;\n};\n\nexport function ExplorationTypeSelector({ options, value, onChange }: ExplorationTypeSelectorProps) {\n  const styles = useStyles2(getStyles);\n\n  const activeIndex = options.findIndex((o) => o.value === value);\n\n  const getButtonVariant = (currentIndex: number) => {\n    if (activeIndex === options.length - 1) {\n      // \"Favorites\" is the last option, so in this case we don't want all the previous buttons to be active\n      return currentIndex === activeIndex ? 'primary' : 'secondary';\n    }\n\n    return currentIndex <= activeIndex ? 'primary' : 'secondary';\n  };\n\n  return (\n    <div className={styles.explorationTypeContainer} data-testid=\"exploration-types\">\n      <div className={styles.label}>Exploration</div>\n\n      <div className={styles.breadcrumb}>\n        {options.map((option, i) => {\n          const isActive = value === option.value;\n          const variant = getButtonVariant(i);\n          const isPrimary = variant === 'primary';\n          const extraClasses = [isActive && 'active', isPrimary && 'primary'];\n\n          return (\n            <Fragment key={option.value}>\n              <Button\n                className={cx(styles.button, ...extraClasses)}\n                variant={variant}\n                size=\"sm\"\n                aria-label={option.label}\n                icon={option.icon as any}\n                onClick={isActive ? noOp : () => onChange(option.value as string)}\n                tooltip={option.description}\n                tooltipPlacement=\"top\"\n                data-testid={isActive ? 'is-active' : undefined}\n              >\n                {option.label}\n              </Button>\n\n              {/* add a connection only for buttons before \"Diff flame graph\" and \"Favorites\" */}\n              {i < options.length - 3 && (\n                <div\n                  className={\n                    activeIndex !== options.length - 1 && i <= activeIndex - 1\n                      ? cx(styles.arrow, 'arrow', ...extraClasses)\n                      : styles.arrow\n                  }\n                />\n              )}\n            </Fragment>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  explorationTypeContainer: css`\n    display: flex;\n    align-items: center;\n  `,\n  label: css`\n    display: flex;\n    gap: 2px;\n    align-items: center;\n    font-size: 14px;\n    margin-right: ${theme.spacing(1)};\n\n    ${theme.breakpoints.down('xxl')} {\n      display: none;\n    }\n  `,\n  breadcrumb: css`\n    display: flex;\n    align-items: center;\n    height: 32px;\n    line-height: 32px;\n\n    .active {\n      background-color: ${theme.colors.primary.main};\n    }\n\n    .arrow.primary {\n      background-color: ${theme.colors.primary.main};\n    }\n\n    & button.primary:not(.active),\n    & .arrow.primary:not(.active) {\n      opacity: 0.7;\n    }\n\n    & button.primary:not(.active):hover {\n      opacity: 1;\n      background-color: ${theme.colors.primary.main};\n    }\n  `,\n  button: css`\n    height: 27px;\n    line-height: 27px;\n    border-radius: 15px;\n\n    &:hover {\n      border-color: ${theme.colors.primary.main};\n    }\n\n    &.active:hover {\n      cursor: default;\n      background-color: ${theme.colors.primary.main};\n    }\n\n    &:nth-last-child(2) {\n      margin-left: ${theme.spacing(1)};\n    }\n\n    &:nth-last-child(1) {\n      margin-left: ${theme.spacing(2)};\n    }\n  `,\n  arrow: css`\n    background-color: ${theme.colors.text.disabled};\n    width: 10px;\n    height: 2px;\n  `,\n});\n","import { css, cx } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useChromeHeaderHeight } from '@grafana/runtime';\nimport { Field, Icon, IconButton, useStyles2 } from '@grafana/ui';\nimport { PluginInfo } from '@shared/ui/PluginInfo';\nimport React from 'react';\n\nimport { GiveFeedbackButton } from '../../GiveFeedbackButton';\nimport { SceneProfilesExplorer, SceneProfilesExplorerState } from '../SceneProfilesExplorer';\nimport { useHeader } from './domain/useHeader';\nimport { ExplorationTypeSelector } from './ui/ExplorationTypeSelector';\n\nexport type HeaderProps = {\n  explorationType: SceneProfilesExplorerState['explorationType'];\n  controls: SceneProfilesExplorerState['controls'];\n  body: SceneProfilesExplorerState['body'];\n  $variables: SceneProfilesExplorerState['$variables'];\n  onChangeExplorationType: (explorationType: string) => void;\n};\n\nexport function Header(props: HeaderProps) {\n  const chromeHeaderHeight = useChromeHeaderHeight();\n  const styles = useStyles2(getStyles, chromeHeaderHeight ?? 0);\n\n  const { data, actions } = useHeader(props);\n\n  const { explorationType, dataSourceVariable, timePickerControl, refreshPickerControl, sceneVariables, gridControls } =\n    data;\n\n  return (\n    <div className={styles.header} data-testid=\"allControls\">\n      <GiveFeedbackButton />\n\n      <div className={styles.appControls} data-testid=\"appControls\">\n        <div className={styles.appControlsLeft}>\n          <ExplorationTypeSelector\n            options={SceneProfilesExplorer.EXPLORATION_TYPE_OPTIONS}\n            value={explorationType as string}\n            onChange={actions.onChangeExplorationType}\n          />\n        </div>\n\n        <div className={styles.appControlsRight}>\n          {timePickerControl && (\n            <timePickerControl.Component key={timePickerControl.state.key} model={timePickerControl} />\n          )}\n          {refreshPickerControl && (\n            <refreshPickerControl.Component key={refreshPickerControl.state.key} model={refreshPickerControl} />\n          )}\n\n          <div className={styles.appMiscButtons}>\n            <IconButton name=\"cog\" tooltip=\"View/edit user settings\" onClick={actions.onClickUserSettings} />\n\n            <IconButton\n              name=\"share-alt\"\n              tooltip=\"Copy shareable link to the clipboard\"\n              onClick={actions.onClickShareLink}\n            />\n\n            <PluginInfo />\n          </div>\n        </div>\n      </div>\n\n      <div id={`scene-controls-${explorationType}`} className={styles.sceneControls} data-testid=\"sceneControls\">\n        <Field\n          label={dataSourceVariable.state.label}\n          className={cx(styles.sceneVariable, dataSourceVariable.state.name)}\n          data-testid={dataSourceVariable.state.name}\n        >\n          <dataSourceVariable.Component model={dataSourceVariable} />\n        </Field>\n\n        {sceneVariables.map((variable) => (\n          <Field\n            key={variable.state.name}\n            label={\n              variable.state.label === 'Filters' ? (\n                <div className={styles.sceneVariableLabel}>\n                  <Icon name=\"filter\" className={styles.icon} />\n                  {variable.state.label}\n                </div>\n              ) : (\n                variable.state.label\n              )\n            }\n            className={cx(styles.sceneVariable, variable.state.name)}\n            data-testid={variable.state.name}\n          >\n            <variable.Component model={variable} />\n          </Field>\n        ))}\n\n        {gridControls.map((control) => (\n          <Field key={control.state.key} id={control.state.key} className={styles.gridControl} label=\"\">\n            <control.Component model={control} />\n          </Field>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2, chromeHeaderHeight: number) => ({\n  header: css`\n    background-color: ${theme.colors.background.canvas};\n    position: sticky;\n    top: ${chromeHeaderHeight}px;\n    z-index: 1;\n    padding-bottom: ${theme.spacing(2)};\n  `,\n  appControls: css`\n    display: flex;\n    padding: ${theme.spacing(1)} 0;\n    justify-content: space-between;\n    gap: ${theme.spacing(2)};\n  `,\n  appControlsLeft: css`\n    display: flex;\n    gap: ${theme.spacing(1)};\n  `,\n  appControlsRight: css`\n    display: flex;\n    gap: ${theme.spacing(1)};\n  `,\n  appMiscButtons: css`\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    border: 1px solid ${theme.colors.border.weak};\n    background-color: ${theme.colors.background.secondary};\n    height: 32px;\n    padding: 0 ${theme.spacing(1)};\n\n    & svg {\n      width: 18px;\n      height: 18px;\n    }\n  `,\n  sceneControls: css`\n    display: flex;\n    flex-wrap: wrap;\n    gap: ${theme.spacing(1)};\n    padding: 0;\n    margin-top: 20px;\n  `,\n  sceneVariable: css`\n    display: flex;\n    margin-bottom: 0;\n\n    & #dataSource {\n      width: ${theme.spacing(32)};\n    }\n\n    &.filters {\n      flex-grow: 1;\n    }\n\n    &.compare-presets {\n      margin-left: auto;\n      text-align: right;\n    }\n  `,\n  sceneVariableLabel: css`\n    font-size: 12px;\n    font-weight: 500;\n    line-height: 15px;\n    height: 15px;\n    margin-bottom: 4px;\n    color: ${theme.colors.text.primary};\n    max-width: 480px;\n  `,\n  icon: css`\n    display: inline-block;\n    margin-right: 4px;\n  `,\n  gridControl: css`\n    margin-bottom: 0;\n\n    &#quick-filter {\n      flex: 1;\n      min-width: 112px;\n    }\n  `,\n});\n","import { css } from '@emotion/css';\nimport {\n  EmbeddedSceneState,\n  getUrlSyncManager,\n  SceneComponentProps,\n  sceneGraph,\n  SceneObject,\n  SceneObjectBase,\n  SceneObjectUrlSyncConfig,\n  SceneObjectUrlValues,\n  SceneRefreshPicker,\n  SceneTimePicker,\n  SceneTimeRange,\n  sceneUtils,\n  SceneVariableSet,\n  SplitLayout,\n} from '@grafana/scenes';\nimport { useStyles2 } from '@grafana/ui';\nimport { displayError } from '@shared/domain/displayStatus';\nimport { prepareHistoryEntry } from '@shared/domain/prepareHistoryEntry';\nimport { reportInteraction } from '@shared/domain/reportInteraction';\nimport { DomainHookReturnValue } from '@shared/types/DomainHookReturnValue';\nimport React from 'react';\n\nimport { SceneExploreAllServices } from '../../components/SceneExploreAllServices/SceneExploreAllServices';\nimport { SceneExploreFavorites } from '../../components/SceneExploreFavorites/SceneExploreFavorites';\nimport { SceneExploreServiceLabels } from '../../components/SceneExploreServiceLabels/SceneExploreServiceLabels';\nimport { SceneExploreServiceProfileTypes } from '../../components/SceneExploreServiceProfileTypes/SceneExploreServiceProfileTypes';\nimport { getDefaultTimeRange } from '../../domain/buildTimeRange';\nimport { EventViewDiffFlameGraph } from '../../domain/events/EventViewDiffFlameGraph';\nimport { EventViewServiceFlameGraph } from '../../domain/events/EventViewServiceFlameGraph';\nimport { EventViewServiceLabels } from '../../domain/events/EventViewServiceLabels';\nimport { EventViewServiceProfiles } from '../../domain/events/EventViewServiceProfiles';\nimport { FiltersVariable } from '../../domain/variables/FiltersVariable/FiltersVariable';\nimport { GroupByVariable } from '../../domain/variables/GroupByVariable/GroupByVariable';\nimport { ProfileMetricVariable } from '../../domain/variables/ProfileMetricVariable';\nimport { ProfilesDataSourceVariable } from '../../domain/variables/ProfilesDataSourceVariable';\nimport { ServiceNameVariable } from '../../domain/variables/ServiceNameVariable/ServiceNameVariable';\nimport { FavoritesDataSource } from '../../infrastructure/favorites/FavoritesDataSource';\nimport { LabelsDataSource } from '../../infrastructure/labels/LabelsDataSource';\nimport { SeriesDataSource } from '../../infrastructure/series/SeriesDataSource';\nimport { SceneLayoutSwitcher } from '../SceneByVariableRepeaterGrid/components/SceneLayoutSwitcher';\nimport { SceneNoDataSwitcher } from '../SceneByVariableRepeaterGrid/components/SceneNoDataSwitcher';\nimport { ScenePanelTypeSwitcher } from '../SceneByVariableRepeaterGrid/components/ScenePanelTypeSwitcher';\nimport { SceneQuickFilter } from '../SceneByVariableRepeaterGrid/components/SceneQuickFilter';\nimport { GridItemData } from '../SceneByVariableRepeaterGrid/types/GridItemData';\nimport { SceneTimeRangeWithAnnotations } from '../SceneExploreDiffFlameGraph/components/SceneComparePanel/components/SceneTimeRangeWithAnnotations';\nimport { SceneExploreDiffFlameGraph } from '../SceneExploreDiffFlameGraph/SceneExploreDiffFlameGraph';\nimport { GitHubContextProvider } from '../SceneExploreServiceFlameGraph/components/SceneFunctionDetailsPanel/components/GitHubContextProvider/GitHubContextProvider';\nimport { SceneExploreServiceFlameGraph } from '../SceneExploreServiceFlameGraph/SceneExploreServiceFlameGraph';\nimport { Header } from './components/Header';\n\nexport interface SceneProfilesExplorerState extends Partial<EmbeddedSceneState> {\n  $timeRange: SceneTimeRange;\n  $variables: SceneVariableSet;\n  gridControls: Array<SceneObject & { key?: string }>;\n  explorationType?: ExplorationType;\n  body?: SplitLayout;\n}\n\nexport enum ExplorationType {\n  ALL_SERVICES = 'all',\n  PROFILE_TYPES = 'profiles',\n  LABELS = 'labels',\n  FLAME_GRAPH = 'flame-graph',\n  DIFF_FLAME_GRAPH = 'diff-flame-graph',\n  FAVORITES = 'favorites',\n}\n\nexport class SceneProfilesExplorer extends SceneObjectBase<SceneProfilesExplorerState> {\n  static EXPLORATION_TYPE_OPTIONS = [\n    {\n      value: ExplorationType.ALL_SERVICES,\n      label: 'All services',\n      description: 'Overview of all services, for any given profile type',\n    },\n    {\n      value: ExplorationType.PROFILE_TYPES,\n      label: 'Profile types',\n      description: 'Overview of all the profile types for a single service',\n    },\n    {\n      value: ExplorationType.LABELS,\n      label: 'Labels',\n      description: 'Single service label exploration and filtering',\n    },\n    {\n      value: ExplorationType.FLAME_GRAPH,\n      label: 'Flame graph',\n      description: 'Single service flame graph',\n    },\n    {\n      value: ExplorationType.DIFF_FLAME_GRAPH,\n      label: 'Diff flame graph',\n      description: 'Compare the differences between two flame graphs',\n    },\n    {\n      value: ExplorationType.FAVORITES,\n      label: 'Favorites',\n      description: 'Overview of favorited visualizations',\n      icon: 'favorite',\n    },\n  ];\n\n  static DEFAULT_EXPLORATION_TYPE = SceneProfilesExplorer.EXPLORATION_TYPE_OPTIONS[0].value;\n\n  protected _urlSync = new SceneObjectUrlSyncConfig(this, { keys: ['explorationType'] });\n\n  constructor() {\n    super({\n      key: 'profiles-explorer',\n      explorationType: undefined,\n      body: undefined,\n      $timeRange: new SceneTimeRange(getDefaultTimeRange()),\n      $variables: new SceneVariableSet({\n        // in order to sync with the URL and...\n        // ...because of a limitation of the Scenes library, we have to create them now, once, and not every time we set a new exploration type\n        // also, we prevent re-creating all variables when switching exploration type, which would lead to unecessary work and layout shifts in the UI\n        // (because values would be empty before loading, then populated after fetched)\n        // see setExplorationType() for dynamic updates\n        variables: [\n          new ProfilesDataSourceVariable(),\n          new ServiceNameVariable(),\n          new ProfileMetricVariable(),\n          new FiltersVariable({ key: 'filters' }),\n          new FiltersVariable({ key: 'filtersBaseline' }),\n          new FiltersVariable({ key: 'filtersComparison' }),\n          new GroupByVariable(),\n        ],\n      }),\n      controls: [new SceneTimePicker({ isOnCanvas: true }), new SceneRefreshPicker({ isOnCanvas: true })],\n      // these scenes also sync with the URL so...\n      // ...because of a limitation of the Scenes library, we have to create them now, once, and not every time we set a new exploration type\n      gridControls: [\n        new SceneQuickFilter({ placeholder: '' }),\n        new ScenePanelTypeSwitcher(),\n        new SceneLayoutSwitcher(),\n        new SceneNoDataSwitcher(),\n      ],\n    });\n\n    getUrlSyncManager().initSync(this);\n\n    this.registerRuntimeDataSources();\n\n    this.addActivationHandler(this.onActivate.bind(this));\n  }\n\n  onActivate() {\n    const eventsSub = this.subscribeToEvents();\n\n    if (!this.state.explorationType) {\n      this.setExplorationType({\n        type: SceneProfilesExplorer.DEFAULT_EXPLORATION_TYPE,\n      });\n    }\n\n    return () => {\n      eventsSub.unsubscribe();\n    };\n  }\n\n  getUrlState() {\n    return {\n      explorationType: this.state.explorationType,\n    };\n  }\n\n  updateFromUrl(values: SceneObjectUrlValues) {\n    if (typeof values.explorationType === 'string' && values.explorationType !== this.state.explorationType) {\n      const type = values.explorationType as ExplorationType;\n      this.setExplorationType({\n        type: Object.values(ExplorationType).includes(type) ? type : SceneProfilesExplorer.DEFAULT_EXPLORATION_TYPE,\n      });\n    }\n  }\n\n  registerRuntimeDataSources() {\n    // wrapped in a try-catch to prevent error when registered twice, which can easily happen if we go back & forth to the Profiles Explorer page\n    try {\n      sceneUtils.registerRuntimeDataSource({ dataSource: new SeriesDataSource() });\n      sceneUtils.registerRuntimeDataSource({ dataSource: new FavoritesDataSource() });\n      sceneUtils.registerRuntimeDataSource({ dataSource: new LabelsDataSource() });\n    } catch (error) {\n      const { message } = error as Error;\n\n      if (!/A runtime data source with uid (.+) has already been registered/.test(message)) {\n        displayError(error as Error, [\n          'Fail to register all the runtime data sources!',\n          'The application cannot work as expected, please try reloading the page or if the problem persists, contact your organization admin.',\n        ]);\n      }\n    }\n  }\n\n  subscribeToEvents() {\n    const profilesSub = this.subscribeToEvent(EventViewServiceProfiles, (event) => {\n      this.setExplorationType({\n        type: ExplorationType.PROFILE_TYPES,\n        comesFromUserAction: true,\n        item: event.payload.item,\n      });\n    });\n\n    const labelsSub = this.subscribeToEvent(EventViewServiceLabels, (event) => {\n      this.setExplorationType({\n        type: ExplorationType.LABELS,\n        comesFromUserAction: true,\n        item: event.payload.item,\n      });\n    });\n\n    const flameGraphSub = this.subscribeToEvent(EventViewServiceFlameGraph, (event) => {\n      this.setExplorationType({\n        type: ExplorationType.FLAME_GRAPH,\n        comesFromUserAction: true,\n        item: event.payload.item,\n      });\n    });\n\n    const diffFlameGraphSub = this.subscribeToEvent(EventViewDiffFlameGraph, () => {\n      this.setExplorationType({\n        type: ExplorationType.DIFF_FLAME_GRAPH,\n        comesFromUserAction: true,\n      });\n    });\n\n    return {\n      unsubscribe() {\n        diffFlameGraphSub.unsubscribe();\n        flameGraphSub.unsubscribe();\n        labelsSub.unsubscribe();\n        profilesSub.unsubscribe();\n      },\n    };\n  }\n\n  setExplorationType({\n    type,\n    comesFromUserAction,\n    item,\n  }: {\n    type: ExplorationType;\n    comesFromUserAction?: boolean;\n    item?: GridItemData;\n  }) {\n    if (comesFromUserAction) {\n      prepareHistoryEntry();\n      this.resetVariables(type);\n    }\n\n    this.setState({\n      explorationType: type,\n      body: this.buildBodyScene(type, item, comesFromUserAction),\n    });\n  }\n\n  resetVariables(nextExplorationType: string) {\n    sceneGraph.findByKeyAndType(this, 'quick-filter', SceneQuickFilter).reset();\n    sceneGraph.findByKeyAndType(this, 'groupBy', GroupByVariable).changeValueTo(GroupByVariable.DEFAULT_VALUE);\n    sceneGraph.findByKeyAndType(this, 'panel-type-switcher', ScenePanelTypeSwitcher).reset();\n\n    // preserve existing filters only when switching to \"Labels\", \"Flame graph\" or \"Diff flame graph\"\n    if (\n      ![ExplorationType.LABELS, ExplorationType.FLAME_GRAPH, ExplorationType.DIFF_FLAME_GRAPH].includes(\n        nextExplorationType as ExplorationType\n      )\n    ) {\n      sceneGraph.findByKeyAndType(this, 'filters', FiltersVariable).setState({\n        filters: FiltersVariable.DEFAULT_VALUE,\n      });\n    }\n\n    // apply filters when entering \"Diff flame graph\"\n    if (nextExplorationType === ExplorationType.DIFF_FLAME_GRAPH) {\n      const [filtersVariable, baselineFiltersVariable, comparisonFiltersVariable] = [\n        'filters',\n        'filtersBaseline',\n        'filtersComparison',\n      ].map((filterKey) => sceneGraph.findByKey(this, filterKey)) as FiltersVariable[];\n\n      const existingFilters = filtersVariable.state.filters;\n\n      if (existingFilters.length) {\n        baselineFiltersVariable.setState({ filters: existingFilters });\n        comparisonFiltersVariable.setState({ filters: existingFilters });\n      }\n    }\n\n    // clear baseline/comparison filters and time ranges when leaving \"Diff flame graph\"\n    if (\n      nextExplorationType !== ExplorationType.DIFF_FLAME_GRAPH &&\n      this.state.explorationType === ExplorationType.DIFF_FLAME_GRAPH\n    ) {\n      ['filtersBaseline', 'filtersComparison'].forEach((filterKey) => {\n        sceneGraph.findByKeyAndType(this, filterKey, FiltersVariable).setState({\n          filters: FiltersVariable.DEFAULT_VALUE,\n        });\n      });\n\n      const { from, to, value } = this.state.$timeRange.state;\n\n      ['baseline-panel-timerange', 'comparison-panel-timerange'].forEach((timeRangeKey) => {\n        sceneGraph.findByKeyAndType(this, timeRangeKey, SceneTimeRange).setState({ from, to, value });\n      });\n\n      ['baseline-annotation-timerange', 'comparison-annotation-timerange'].forEach((timeRangeKey) => {\n        sceneGraph.findByKeyAndType(this, timeRangeKey, SceneTimeRangeWithAnnotations).nullifyAnnotationTimeRange();\n      });\n    }\n  }\n\n  buildBodyScene(explorationType: ExplorationType, item?: GridItemData, comesFromUserAction?: boolean) {\n    let primary;\n\n    switch (explorationType) {\n      case ExplorationType.PROFILE_TYPES:\n        primary = new SceneExploreServiceProfileTypes({ item });\n        break;\n\n      case ExplorationType.LABELS:\n        primary = new SceneExploreServiceLabels({ item });\n        break;\n\n      case ExplorationType.FLAME_GRAPH:\n        primary = new SceneExploreServiceFlameGraph({ item });\n        break;\n\n      case ExplorationType.DIFF_FLAME_GRAPH:\n        primary = new SceneExploreDiffFlameGraph({ useAncestorTimeRange: Boolean(comesFromUserAction) });\n        break;\n\n      case ExplorationType.FAVORITES:\n        primary = new SceneExploreFavorites();\n        break;\n\n      case ExplorationType.ALL_SERVICES:\n      default:\n        primary = new SceneExploreAllServices();\n    }\n\n    return new SplitLayout({\n      direction: 'column',\n      primary,\n    });\n  }\n\n  onChangeExplorationType = (explorationType: string) => {\n    reportInteraction('g_pyroscope_app_exploration_type_clicked', { explorationType });\n\n    this.setExplorationType({\n      type: explorationType as ExplorationType,\n      comesFromUserAction: true,\n    });\n  };\n\n  useProfilesExplorer = (): DomainHookReturnValue => {\n    const { explorationType, controls, body, $variables } = this.useState();\n\n    const dataSourceVariable = $variables.state.variables[0] as ProfilesDataSourceVariable;\n    const dataSourceUid = dataSourceVariable.useState().value as string;\n\n    return {\n      data: {\n        explorationType,\n        controls,\n        body,\n        $variables,\n        dataSourceUid,\n      },\n      actions: {\n        onChangeExplorationType: this.onChangeExplorationType,\n      },\n    };\n  };\n\n  static Component({ model }: SceneComponentProps<SceneProfilesExplorer>) {\n    const styles = useStyles2(getStyles); // eslint-disable-line react-hooks/rules-of-hooks\n\n    const { data, actions } = model.useProfilesExplorer();\n    const { explorationType, controls, body, $variables, dataSourceUid } = data;\n\n    return (\n      <GitHubContextProvider dataSourceUid={dataSourceUid}>\n        <Header\n          explorationType={explorationType}\n          controls={controls}\n          body={body}\n          $variables={$variables}\n          onChangeExplorationType={actions.onChangeExplorationType}\n        />\n\n        <div className={styles.body} data-testid=\"sceneBody\">\n          {body && <body.Component model={body} />}\n        </div>\n      </GitHubContextProvider>\n    );\n  }\n}\n\nconst getStyles = () => ({\n  body: css`\n    position: relative;\n    z-index: 0;\n    background: transparent;\n  `,\n});\n","import React, { useMemo } from 'react';\n\nimport { SceneProfilesExplorer } from './components/SceneProfilesExplorer/SceneProfilesExplorer';\n\nexport function ProfilesExplorerView() {\n  const sceneProfilesExplorer = useMemo(() => new SceneProfilesExplorer(), []);\n\n  return <sceneProfilesExplorer.Component model={sceneProfilesExplorer} />;\n}\n","import { css } from '@emotion/css';\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Button, FieldSet, Form, InlineField, InlineFieldRow, InlineSwitch, Input, useStyles2 } from '@grafana/ui';\nimport { displayError } from '@shared/domain/displayStatus';\nimport { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nimport { useSettingsView } from './domain/useSettingsView';\n\nexport function SettingsView() {\n  const styles = useStyles2(getStyles);\n  const { data, actions } = useSettingsView();\n\n  if (data.fetchError) {\n    displayError(data.fetchError, [\n      'Error while retrieving the plugin settings!',\n      'Please try to reload the page, sorry for the inconvenience.',\n    ]);\n  }\n\n  return (\n    <>\n      <PageTitle title=\"Profiles settings\" />\n      <Form className={styles.settingsForm} onSubmit={actions.saveSettings}>\n        {() => (\n          <>\n            <FieldSet label=\"Flame graph\" data-testid=\"flamegraph-settings\">\n              <InlineFieldRow>\n                <InlineField label=\"Collapsed flame graphs\" labelWidth={24}>\n                  <InlineSwitch\n                    label=\"Toggle collapsed flame graphs\"\n                    name=\"collapsed-flamegraphs\"\n                    value={data.collapsedFlamegraphs}\n                    onChange={actions.toggleCollapsedFlamegraphs}\n                  />\n                </InlineField>\n              </InlineFieldRow>\n              <InlineFieldRow>\n                <InlineField label=\"Maximum number of nodes\" tooltip=\"\" labelWidth={24}>\n                  <Input\n                    name=\"max-nodes\"\n                    type=\"number\"\n                    min=\"1\"\n                    value={data.maxNodes}\n                    onChange={actions.updateMaxNodes}\n                  />\n                </InlineField>\n              </InlineFieldRow>\n            </FieldSet>\n            <FieldSet label=\"Function details\" data-testid=\"function-details-settings\">\n              <InlineFieldRow>\n                <InlineField\n                  label=\"Enable function details\"\n                  labelWidth={24}\n                  tooltip={\n                    <div className={styles.tooltip}>\n                      <p>\n                        The function details feature enables mapping of resource usage to lines of source code. If the\n                        GitHub integration is configured, then the source code will be downloaded from GitHub.\n                      </p>\n                      <p>\n                        <a\n                          href=\"https://grafana.com/docs/grafana-cloud/monitor-applications/profiles/pyroscope-github-integration/\"\n                          target=\"_blank\"\n                          rel=\"noreferrer noopener\"\n                        >\n                          Learn more\n                        </a>\n                      </p>\n                    </div>\n                  }\n                  interactive\n                >\n                  <InlineSwitch\n                    label=\"Toggle function details\"\n                    name=\"function-details-feature\"\n                    value={data.enableFunctionDetails}\n                    onChange={actions.toggleEnableFunctionDetails}\n                  />\n                </InlineField>\n              </InlineFieldRow>\n            </FieldSet>\n\n            <div className={styles.buttons}>\n              <Button variant=\"primary\" type=\"submit\">\n                Save settings\n              </Button>\n              <Button variant=\"secondary\" onClick={actions.goBack} aria-label=\"Back to Explore Profiles\">\n                Back to Explore Profiles\n              </Button>\n            </div>\n          </>\n        )}\n      </Form>\n    </>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  settingsForm: css`\n    & > fieldset {\n      border: 0 none;\n      border-bottom: 1px solid ${theme.colors.border.weak};\n      padding-left: 0;\n    }\n\n    & > fieldset > legend {\n      font-size: ${theme.typography.h4.fontSize};\n    }\n  `,\n  buttons: css`\n    display: flex;\n    gap: ${theme.spacing(1)};\n  `,\n  tooltip: css`\n    p {\n      margin: ${theme.spacing(1)};\n    }\n\n    a {\n      color: ${theme.colors.text.link};\n    }\n\n    em {\n      font-style: normal;\n      font-weight: ${theme.typography.fontWeightBold};\n    }\n  `,\n});\n","import { displayError, displaySuccess } from '@shared/domain/displayStatus';\nimport { useMaxNodesFromUrl } from '@shared/domain/url-params/useMaxNodesFromUrl';\nimport { DEFAULT_SETTINGS, PluginSettings } from '@shared/infrastructure/settings/PluginSettings';\nimport { useFetchPluginSettings } from '@shared/infrastructure/settings/useFetchPluginSettings';\nimport { useEffect, useRef, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { PLUGIN_BASE_URL, ROUTES } from '../../../constants';\n\nexport function useSettingsView() {\n  const { settings, error: fetchError, mutate } = useFetchPluginSettings();\n  const [maxNodesFromUrl, setMaxNodes] = useMaxNodesFromUrl();\n  const [currentSettings, setCurrentSettings] = useState<PluginSettings>(settings ?? DEFAULT_SETTINGS);\n\n  const history = useHistory();\n  const referrerRef = useRef(history.location.state?.referrer);\n\n  useEffect(() => {\n    if (settings) {\n      setCurrentSettings(settings);\n    }\n  }, [settings]);\n\n  return {\n    data: {\n      ...currentSettings,\n      fetchError,\n    },\n    actions: {\n      toggleCollapsedFlamegraphs() {\n        setCurrentSettings((s) => ({\n          ...s,\n          collapsedFlamegraphs: !s.collapsedFlamegraphs,\n        }));\n      },\n      updateMaxNodes(event: React.ChangeEvent<HTMLInputElement>) {\n        setCurrentSettings((s) => ({\n          ...s,\n          maxNodes: Number(event.target.value),\n        }));\n      },\n      toggleEnableFlameGraphDotComExport() {\n        setCurrentSettings((s) => ({\n          ...s,\n          enableFlameGraphDotComExport: !s.enableFlameGraphDotComExport,\n        }));\n      },\n      toggleEnableFunctionDetails() {\n        setCurrentSettings((s) => ({\n          ...s,\n          enableFunctionDetails: !s.enableFunctionDetails,\n        }));\n      },\n      async saveSettings() {\n        setMaxNodes(currentSettings.maxNodes);\n\n        try {\n          await mutate(currentSettings);\n\n          displaySuccess(['Plugin settings successfully saved!']);\n        } catch (error) {\n          displayError(error as Error, [\n            'Error while saving the plugin settings!',\n            'Please try again later, sorry for the inconvenience.',\n          ]);\n        }\n      },\n      goBack() {\n        if (!referrerRef.current) {\n          history.push(`${PLUGIN_BASE_URL}${ROUTES.PROFILES_EXPLORER_VIEW}`);\n          return;\n        }\n\n        const backUrl = new URL(referrerRef.current);\n\n        // when calling saveSettings() above, the new maxNodes value is set and the URL search parameter is updated (see useMaxNodesFromUrl.ts)\n        if (maxNodesFromUrl) {\n          backUrl.searchParams.set('maxNodes', String(maxNodesFromUrl));\n        }\n\n        history.push(`${backUrl.pathname}${backUrl.search}`);\n      },\n    },\n  };\n}\n","import { History } from 'history';\nimport { useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport plugin from '../../../../plugin.json';\n\nconst NAVIGATION_ROUTES = plugin.includes.map(({ path }) => path.replace('%PLUGIN_ID%', plugin.id));\n\nconst interceptClick = (history: History) => (event: Event) => {\n  const link = (event.target as HTMLElement).closest('[aria-label=\"Navigation\"] a') as HTMLAnchorElement;\n  if (!link) {\n    return;\n  }\n\n  const pathname = link.getAttribute('href');\n\n  if (!pathname || !NAVIGATION_ROUTES.includes(pathname)) {\n    return;\n  }\n\n  history.replace({\n    pathname,\n    search: new URLSearchParams(window.location.search).toString(),\n  });\n\n  event.preventDefault();\n};\n\nexport function useNavigationLinksUpdate() {\n  const history = useHistory();\n\n  useEffect(() => {\n    const onClick = interceptClick(history);\n\n    document.body.addEventListener('click', onClick, true);\n\n    return () => {\n      document.body.removeEventListener('click', onClick, true);\n    };\n  }, [history]);\n}\n","import { prefixRouteWithPluginBaseUrl } from '@shared/domain/prefixRouteWithPluginBaseUrl';\nimport React from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\n\nimport { ROUTES } from '../../../constants';\nimport { AdHocView } from '../../../pages/AdHocView/AdHocView';\nimport { ProfilesExplorerView } from '../../../pages/ProfilesExplorerView/ProfilesExplorerView';\nimport { SettingsView } from '../../../pages/SettingsView/SettingsView';\nimport { useNavigationLinksUpdate } from './domain/useNavigationLinksUpdate';\n\nexport function Routes() {\n  useNavigationLinksUpdate();\n\n  return (\n    <Switch>\n      <Route path={prefixRouteWithPluginBaseUrl(ROUTES.PROFILES_EXPLORER_VIEW)} exact>\n        <ProfilesExplorerView />\n      </Route>\n      <Route path={prefixRouteWithPluginBaseUrl(ROUTES.ADHOC_VIEW)} exact>\n        <AdHocView />\n      </Route>\n      <Route path={prefixRouteWithPluginBaseUrl(ROUTES.SETTINGS)} exact>\n        <SettingsView />\n      </Route>\n      {/* Default Route */}\n      <Route>\n        <Redirect to={prefixRouteWithPluginBaseUrl(ROUTES.PROFILES_EXPLORER_VIEW)} />\n      </Route>\n    </Switch>\n  );\n}\n","import { PageLayoutType } from '@grafana/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { InlineBanner } from '@shared/ui/InlineBanner';\nimport { PageTitle } from '@shared/ui/PageTitle';\nimport React from 'react';\n\nexport function ErrorPage({ error }: { error: Error }) {\n  return (\n    <PluginPage layout={PageLayoutType.Canvas}>\n      <div className=\"pyroscope-app\">\n        <PageTitle title=\"Explore Profiles\" />\n\n        <InlineBanner\n          severity=\"error\"\n          title=\"Fatal error!\"\n          message=\"Please try reloading the page or, if the problem persists, contact your organization admin. Sorry for the inconvenience.\"\n          error={error}\n          errorContext={{ handheldBy: 'React error boundary' }}\n        />\n      </div>\n    </PluginPage>\n  );\n}\n","import { Environment, getEnvironment } from '../getEnvironment';\nimport { FARO_ENVIRONMENTS } from './faro-environments';\n\nexport type FaroEnvironment = { environment: Environment; appName: string; faroUrl: string };\n\nexport function getFaroEnvironment() {\n  const environment = getEnvironment();\n\n  if (!environment || !FARO_ENVIRONMENTS.has(environment)) {\n    return;\n  }\n\n  return FARO_ENVIRONMENTS.get(environment) as FaroEnvironment;\n}\n","import { initializeFaro as coreInit } from '@grafana/faro-core';\nimport { makeCoreConfig } from './config';\nexport function initializeFaro(config) {\n    const coreConfig = makeCoreConfig(config);\n    if (!coreConfig) {\n        return undefined;\n    }\n    return coreInit(coreConfig);\n}\n//# sourceMappingURL=initialize.js.map","import { createInternalLogger, defaultBatchingConfig, defaultGlobalObjectKey, defaultInternalLoggerLevel, defaultLogArgsSerializer, defaultUnpatchedConsole, isObject, } from '@grafana/faro-core';\nimport { defaultEventDomain } from '../consts';\nimport { parseStacktrace } from '../instrumentations';\nimport { defaultSessionTrackingConfig } from '../instrumentations/session';\nimport { defaultMetas } from '../metas';\nimport { k6Meta } from '../metas/k6';\nimport { FetchTransport } from '../transports';\nimport { getWebInstrumentations } from './getWebInstrumentations';\nexport function makeCoreConfig(browserConfig) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    const transports = [];\n    const internalLogger = createInternalLogger(browserConfig.unpatchedConsole, browserConfig.internalLoggerLevel);\n    if (browserConfig.transports) {\n        if (browserConfig.url || browserConfig.apiKey) {\n            internalLogger.error('if \"transports\" is defined, \"url\" and \"apiKey\" should not be defined');\n        }\n        transports.push(...browserConfig.transports);\n    }\n    else if (browserConfig.url) {\n        transports.push(new FetchTransport({\n            url: browserConfig.url,\n            apiKey: browserConfig.apiKey,\n        }));\n    }\n    else {\n        internalLogger.error('either \"url\" or \"transports\" must be defined');\n    }\n    function createMetas() {\n        const initialMetas = defaultMetas;\n        if (browserConfig.metas) {\n            initialMetas.push(...browserConfig.metas);\n        }\n        const isK6BrowserSession = isObject(window.k6);\n        if (isK6BrowserSession) {\n            return [...initialMetas, k6Meta];\n        }\n        return initialMetas;\n    }\n    const config = {\n        app: browserConfig.app,\n        batching: Object.assign(Object.assign({}, defaultBatchingConfig), browserConfig.batching),\n        dedupe: (_a = browserConfig.dedupe) !== null && _a !== void 0 ? _a : true,\n        globalObjectKey: browserConfig.globalObjectKey || defaultGlobalObjectKey,\n        instrumentations: (_b = browserConfig.instrumentations) !== null && _b !== void 0 ? _b : getWebInstrumentations(),\n        internalLoggerLevel: (_c = browserConfig.internalLoggerLevel) !== null && _c !== void 0 ? _c : defaultInternalLoggerLevel,\n        isolate: (_d = browserConfig.isolate) !== null && _d !== void 0 ? _d : false,\n        logArgsSerializer: (_e = browserConfig.logArgsSerializer) !== null && _e !== void 0 ? _e : defaultLogArgsSerializer,\n        metas: createMetas(),\n        parseStacktrace,\n        paused: (_f = browserConfig.paused) !== null && _f !== void 0 ? _f : false,\n        preventGlobalExposure: (_g = browserConfig.preventGlobalExposure) !== null && _g !== void 0 ? _g : false,\n        transports,\n        unpatchedConsole: (_h = browserConfig.unpatchedConsole) !== null && _h !== void 0 ? _h : defaultUnpatchedConsole,\n        beforeSend: browserConfig.beforeSend,\n        eventDomain: (_j = browserConfig.eventDomain) !== null && _j !== void 0 ? _j : defaultEventDomain,\n        ignoreErrors: browserConfig.ignoreErrors,\n        ignoreUrls: browserConfig.ignoreUrls,\n        sessionTracking: Object.assign(Object.assign({}, defaultSessionTrackingConfig), browserConfig.sessionTracking),\n        user: browserConfig.user,\n        view: browserConfig.view,\n        trackResources: browserConfig.trackResources,\n        trackWebVitalsAttribution: browserConfig.trackWebVitalsAttribution,\n    };\n    return config;\n}\n//# sourceMappingURL=makeCoreConfig.js.map","export const defaultEventDomain = 'browser';\n//# sourceMappingURL=consts.js.map","import { css } from '@emotion/css';\nimport { GrafanaTheme2, PageLayoutType } from '@grafana/data';\nimport { PluginPage } from '@grafana/runtime';\nimport { ErrorBoundary, useStyles2 } from '@grafana/ui';\nimport { queryClient } from '@shared/infrastructure/react-query/queryClient';\nimport { initFaro } from '@shared/infrastructure/tracking/faro/faro';\nimport { QueryClientProvider } from '@tanstack/react-query';\nimport React, { useState } from 'react';\n\nimport { Onboarding } from './components/Onboarding/Onboarding';\nimport { Routes } from './components/Routes/Routes';\nimport { ErrorPage } from './ui/ErrorPage';\n\ninitFaro();\n\nexport function App() {\n  const styles = useStyles2(getStyles);\n  const [error, setError] = useState<Error>();\n\n  if (error) {\n    return <ErrorPage error={error} />;\n  }\n\n  return (\n    <ErrorBoundary onError={setError}>\n      {() => (\n        <QueryClientProvider client={queryClient}>\n          <Onboarding>\n            <div className={styles.pageContainer}>\n              <PluginPage layout={PageLayoutType.Custom}>\n                <div className=\"pyroscope-app\">\n                  <Routes />\n                </div>\n              </PluginPage>\n            </div>\n          </Onboarding>\n        </QueryClientProvider>\n      )}\n    </ErrorBoundary>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  pageContainer: css`\n    display: flex;\n    flex-direction: column;\n    padding: ${theme.spacing(1)} ${theme.spacing(2)} ${theme.spacing(2)} ${theme.spacing(2)};\n    flex-basis: 100%;\n    flex-grow: 1;\n  `,\n});\n","import { AppPlugin } from '@grafana/data';\nimport { AppPluginSettings } from '@shared/types/AppPluginSettings';\n\nimport { App } from './app/App';\n\nexport const plugin = new AppPlugin<AppPluginSettings>().setRootPage(App);\n"],"names":["module","exports","fn","ctx","params","Array","arguments","length","offset","index","pending","Promise","resolve","reject","err","apply","base64","string","p","n","charAt","Math","ceil","b64","s64","i","encode","buffer","start","end","t","parts","chunk","j","b","push","String","fromCharCode","slice","join","invalidEncoding","decode","c","charCodeAt","undefined","Error","test","codegen","functionParams","functionName","body","Codegen","formatStringOrScope","source","toString","verbose","console","log","scopeKeys","Object","keys","scopeParams","scopeValues","scopeOffset","Function","formatParams","formatOffset","replace","$0","$1","value","Number","floor","JSON","stringify","functionNameOverride","EventEmitter","this","_listeners","prototype","on","evt","off","listeners","splice","emit","args","fetch","asPromise","fs","inquire","filename","options","callback","xhr","readFile","contents","XMLHttpRequest","binary","onreadystatechange","readyState","status","response","responseText","Uint8Array","overrideMimeType","responseType","open","send","factory","Float32Array","f32","f8b","le","writeFloat_f32_cpy","val","buf","pos","writeFloat_f32_rev","readFloat_f32_cpy","readFloat_f32_rev","writeFloatLE","writeFloatBE","readFloatLE","readFloatBE","writeFloat_ieee754","writeUint","sign","isNaN","round","exponent","LN2","pow","readFloat_ieee754","readUint","uint","mantissa","NaN","Infinity","bind","writeUintLE","writeUintBE","readUintLE","readUintBE","Float64Array","f64","writeDouble_f64_cpy","writeDouble_f64_rev","readDouble_f64_cpy","readDouble_f64_rev","writeDoubleLE","writeDoubleBE","readDoubleLE","readDoubleBE","writeDouble_ieee754","off0","off1","readDouble_ieee754","lo","hi","moduleName","mod","eval","e","path","isAbsolute","normalize","split","absolute","prefix","shift","originPath","includePath","alreadyNormalized","alloc","size","SIZE","MAX","slab","call","utf8","len","read","write","c1","c2","cssKeywords","reverseKeywords","key","convert","rgb","channels","labels","hsl","hsv","hwb","cmyk","xyz","lab","lch","hex","keyword","ansi16","ansi256","hcg","apple","gray","model","defineProperty","r","g","min","max","delta","h","s","l","rdif","gdif","bdif","v","diff","diffc","w","k","reversed","currentClosestKeyword","currentClosestDistance","distance","y","x","z","t2","t3","t1","smin","lmin","f","q","vmin","sl","wh","bl","ratio","m","y2","x2","z2","a","atan2","PI","sqrt","hr","cos","sin","saturation","ansi","color","mult","rem","toUpperCase","substring","match","colorString","map","char","integer","parseInt","chroma","grayscale","hue","pure","mg","conversions","route","forEach","fromModel","routes","toModel","wrappedFn","arg0","result","conversion","wrapRounded","raw","wrapRaw","link","from","to","wrapConversion","graph","parent","cur","unshift","models","buildGraph","queue","current","pop","adjacents","adjacent","node","deriveBFS","colorNames","swizzle","hasOwnProperty","reverseNames","create","name","cs","get","clamp","num","hexDouble","str","toLowerCase","hexAlpha","i2","parseFloat","alpha","rgba","percent","hsla","hwba","skippedModels","hashedModelKeys","sort","limiters","Color","object","valpha","newArray","zeroArray","indexOf","hashedKeys","limit","freeze","toJSON","places","self","percentString","array","unitArray","unitObject","roundToPlace","red","getset","maxfn","green","blue","saturationl","lightness","saturationv","white","wblack","cyan","magenta","yellow","black","hexa","rgbArray","alphaHex","rgbNumber","luminosity","lum","element","entries","chan","contrast","color2","lum1","lum2","level","contrastRatio","isDark","isLight","negate","lighten","darken","saturate","desaturate","whiten","blacken","fade","opaquer","rotate","degrees","mix","mixinColor","weight","color1","w1","w2","includes","isArray","number","toFixed","roundTo","channel","modifier","d","onload","onerror","error","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","global","navigator","userAgent","saveAs","HTMLAnchorElement","URL","webkitURL","createElement","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","msSaveOrOpenBlob","autoBom","warn","type","Blob","title","innerText","HTMLElement","safari","FileReader","onloadend","readAsDataURL","HASH_UNDEFINED","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","MAX_SAFE_INTEGER","argsTag","arrayTag","asyncTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","nullTag","objectTag","promiseTag","proxyTag","regexpTag","setTag","stringTag","undefinedTag","weakMapTag","arrayBufferTag","dataViewTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","freeSelf","root","freeExports","nodeType","freeModule","moduleExports","freeProcess","process","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arraySome","predicate","mapToArray","setToArray","set","uid","func","transform","arrayProto","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","exec","IE_PROTO","nativeObjectToString","reIsNative","RegExp","Buffer","Symbol","propertyIsEnumerable","symToStringTag","toStringTag","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","isBuffer","nativeKeys","arg","DataView","getNative","Map","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","clear","entry","ListCache","MapCache","SetCache","values","__data__","add","Stack","data","assocIndexOf","eq","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","isObjectLike","baseIsEqual","other","bitmask","customizer","stack","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteLength","byteOffset","message","isPartial","stacked","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","skipCtor","objValue","othValue","compared","objCtor","constructor","othCtor","equalObjects","baseIsEqualDeep","arrLength","othLength","seen","arrValue","othIndex","has","keysFunc","symbolsFunc","arrayPush","baseGetAllKeys","getSymbols","getMapData","getValue","isObject","isMasked","isFunction","baseIsNative","pairs","LARGE_ARRAY_SIZE","resIndex","symbol","arrayFilter","isIndex","ArrayBuffer","Ctor","ctorString","isArguments","isLength","baseUnary","inherited","isArr","isArg","isBuff","isType","skipIndexes","iteratee","baseTimes","arrayLikeKeys","baseKeys","propIsEnumerable","assign","test1","getOwnPropertyNames","test2","test3","letter","shouldUseNative","symbols","TypeError","toObject","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","propFullName","secret","getShim","isRequired","ReactPropTypes","bigint","bool","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","converter","Enum","util","genValuePartial_fromObject","gen","field","fieldIndex","prop","defaultAlreadyEmitted","resolvedType","typeDefault","repeated","fullName","isUnsigned","genValuePartial_toObject","fromObject","mtype","fields","fieldsArray","safeProp","compareFieldsById","repeatedFields","mapFields","normalFields","partOf","valuesById","long","low","high","unsigned","toNumber","bytes","arrayDefault","hasKs2","_fieldsArray","filter","group","ref","id","types","defaults","keyType","basic","packed","rfield","required","missing","wireType","mapKey","genTypePartial","optional","ReflectionObject","className","Namespace","comment","comments","valuesOptions","reserved","fromJSON","json","enm","toJSONOptions","keepComments","Boolean","isString","isInteger","isReservedId","isReservedName","allow_alias","remove","Field","Type","ruleRe","rule","extend","defaultValue","Long","extensionField","declaringField","_packed","getOption","setOption","ifNotSet","resolved","lookupTypeOrEnum","proto3_optional","fromNumber","newBuffer","emptyObject","emptyArray","ctor","fieldId","fieldType","fieldRule","decorateType","decorateEnum","fieldName","_configure","Type_","protobuf","build","load","Root","loadSync","encoder","decoder","verifier","OneOf","MapField","Service","Method","Message","wrappers","configure","Writer","BufferWriter","Reader","BufferReader","rpc","roots","resolvedKeyType","fieldKeyType","fieldValueType","properties","$type","writer","encodeDelimited","reader","decodeDelimited","verify","requestType","requestStream","responseStream","parsedOptions","resolvedRequestType","resolvedResponseType","lookupType","arrayToJSON","obj","nested","_nestedArray","clearCache","namespace","addJSON","toArray","nestedArray","nestedJson","names","methods","getEnum","prev","setOptions","onAdd","onRemove","define","ptr","part","resolveAll","lookup","filterTypes","parentAlreadyChecked","found","lookupEnum","lookupService","Service_","Enum_","defineProperties","_handleAdd","_handleRemove","setParsedOption","opt","find","newValue","setProperty","newOpt","Root_","fieldNames","oneof","addFieldsToParent","oneofName","oneOfGetter","oneOfSetter","LongBits","indexOutOfRange","writeLength","RangeError","create_array","readLongVarint","bits","readFixed32_end","readFixed64","_slice","subarray","uint32","int32","sint32","fixed32","sfixed32","float","double","nativeBuffer","skip","skipType","BufferReader_","merge","int64","uint64","sint64","zzDecode","fixed64","sfixed64","utf8Slice","parse","common","deferred","files","SYNC","resolvePath","sync","finish","cb","getBundledFileName","idx","lastIndexOf","altname","parsed","imports","weakImports","queued","weak","readFileSync","isNode","exposeRe","tryHandleExtension","extendedType","sisterField","parse_","common_","rpcImpl","requestDelimited","responseDelimited","rpcCall","method","requestCtor","responseCtor","request","endedByRPC","_methodsArray","service","methodsArray","rpcService","methodName","lcFirst","isReserved","oneofs","extensions","_fieldsById","_oneofsArray","_ctor","fieldsById","oneofsArray","generateConstructor","ctorProperties","setup","wrapper","originalThis","fork","ldelim","typeName","bake","o","safePropBackslashRe","safePropQuoteRe","ucFirst","camelCaseRe","camelCase","decorateRoot","enumerable","decorateEnumIndex","dst","setProp","prevValue","concat","zero","zzEncode","zeroHash","fromString","toLong","fromHash","hash","toHash","mask","part0","part1","part2","src","newError","CustomError","captureStackTrace","writable","configurable","pool","versions","isFinite","isset","isSet","utf8Write","_Buffer_from","_Buffer_allocUnsafe","sizeOrArray","dcodeIO","key2Re","key32Re","key64Re","longToHash","longFromHash","fromBits","ProtocolError","fieldMap","longs","enums","encoding","allocUnsafe","seenFirstField","invalid","genVerifyKey","genVerifyValue","oneofProp","expected","type_url","Op","next","noop","State","head","tail","states","writeByte","VarintOp","writeVarint64","writeFixed32","_push","writeBytes","reset","BufferWriter_","writeStringBuffer","writeBytesBuffer","copy","_DraggableCore","default","React","nodeInterop","__esModule","cache","_getRequireWildcardCache","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","desc","_interopRequireWildcard","_propTypes","_interopRequireDefault","_reactDom","_clsx","_domFns","_positionFns","_shims","_log","cacheBabelInterop","cacheNodeInterop","_extends","_defineProperty","input","hint","prim","toPrimitive","res","_toPrimitive","_toPropertyKey","Draggable","Component","getDerivedStateFromProps","_ref","_ref2","position","prevPropsPosition","super","coreData","onStart","createDraggableData","setState","dragging","dragged","state","uiData","newState","slackX","slackY","bounds","newStateX","newStateY","getBoundPosition","deltaX","deltaY","onDrag","onStop","defaultPosition","isElementSVG","componentDidMount","SVGElement","findDOMNode","componentWillUnmount","_this$props$nodeRef$c","_this$props","nodeRef","render","axis","children","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","positionOffset","scale","draggableCoreProps","style","svgTransform","draggable","validPosition","transformOpts","canDragX","canDragY","createSVGTransform","createCSSTransform","onDragStart","onDragStop","cloneElement","Children","only","propTypes","left","right","top","bottom","dontSetMe","defaultProps","eventsFor","move","stop","dragEventFor","DraggableCore","onMouseDown","allowAnyClick","button","thisNode","ownerDocument","disabled","defaultView","Node","handle","matchesSelectorAndParentsTo","cancel","preventDefault","touchIdentifier","getTouchIdentifier","getControlPosition","coreEvent","createCoreData","mounted","enableUserSelectHack","addUserSelectStyles","lastX","lastY","addEvent","handleDrag","handleDragStop","grid","snapToGrid","event","removeUserSelectStyles","removeEvent","handleDragStart","onTouchStart","passive","_this$props2","onMouseUp","onTouchEnd","offsetParent","addClassName","el","handler","inputOptions","capture","addEventListener","attachEvent","doc","styleEl","getElementById","innerHTML","getElementsByTagName","appendChild","controlPos","translation","getTranslation","_getPrefix","browserPrefixToKey","getTouch","identifier","targetTouches","findInArray","changedTouches","innerHeight","height","clientHeight","computedStyle","getComputedStyle","int","paddingTop","paddingBottom","innerWidth","width","clientWidth","paddingLeft","paddingRight","matchesSelector","selector","baseNode","parentNode","offsetXYFromParent","offsetParentRect","getBoundingClientRect","clientX","scrollLeft","clientY","scrollTop","outerHeight","borderTopWidth","borderBottomWidth","outerWidth","borderLeftWidth","borderRightWidth","removeClassName","removeEventListener","detachEvent","selection","empty","getSelection","removeAllRanges","matchesSelectorFunc","unitSuffix","defaultX","defaultY","classList","browserPrefixToStyle","getPrefix","prefixes","_window$document","documentElement","out","shouldCapitalize","kebabToTitleCase","isStart","isNum","cloneBounds","ownerWindow","boundNode","querySelector","boundNodeEl","nodeStyle","boundNodeStyle","offsetLeft","marginLeft","offsetTop","marginTop","marginRight","marginBottom","draggableCore","touchObj","pendingX","pendingY","clsx","hasElementType","Element","hasMap","hasSet","hasArrayBuffer","isView","equal","it","done","flags","$$typeof","_typeof","iterator","_react","_reactDraggable","_reactResizable","_utils","_calculateUtils","_ReactGridLayoutPropTypes","ownKeys","enumerableOnly","sym","_objectSpread","getOwnPropertyDescriptors","_defineProperties","descriptor","_setPrototypeOf","setPrototypeOf","__proto__","_assertThisInitialized","ReferenceError","_getPrototypeOf","getPrototypeOf","GridItem","_React$Component","subClass","superClass","_inherits","Constructor","protoProps","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","_possibleConstructorReturn","_this","instance","_classCallCheck","_len","_key","resizing","createRef","transformScale","newPosition","parentRect","clientRect","cLeft","pLeft","cTop","pTop","_calcXY","calcXY","getPositionParams","isBounded","containerWidth","positionParams","_this$props3","margin","rowHeight","bottomBoundary","calcGridItemWHPx","colWidth","calcGridColWidth","rightBoundary","_calcXY2","_ref3","_this$props4","_this$state$dragging","_calcXY3","callbackData","onResizeHandler","nextProps","nextState","droppingPosition","oldPosition","calcGridItemPosition","fastPositionEqual","useCSSTransforms","moveDroppingItem","prevProps","elementRef","prevDroppingPosition","shouldDrag","cols","containerPadding","maxRows","_this$props5","usePercentages","setTransform","setTopLeft","perc","child","isDraggable","isResizable","_this$props6","minW","minH","maxW","maxH","resizeHandles","resizeHandle","maxWidth","mins","maxes","minConstraints","maxConstraints","Resizable","draggableOpts","onResizeStop","onResizeStart","onResize","_ref4","handlerName","_this$props7","_this$props8","_calcWH","calcWH","_this$props9","newChild","static","dropping","cssTransforms","createStyle","mixinResizable","mixinDraggable","resizeHandleAxesType","resizeHandleType","_lodash","_GridItem","_unsupportedIterableToArray","minLen","_arrayLikeToArray","arr","arr2","layoutClassName","isFirefox","ReactGridLayout","staticProps","activeDrag","layout","synchronizeLayoutWithChildren","compactType","allowOverlap","oldDragItem","oldLayout","oldResizeItem","droppingDOMNode","getLayoutItem","cloneLayoutItem","preventCollision","placeholder","moveElement","compact","newLayout","onLayoutMaybeChanged","_ref5","_this$state","_withLayoutItem","withLayoutItem","hasCollisions","collisions","getAllCollisions","layoutItem","leastX","leastY","_withLayoutItem2","_arrayWithHoles","_i","_s","_e","_arr","_n","_d","_iterableToArrayLimit","_nonIterableRest","_slicedToArray","_ref6","_this$state2","_e$nativeEvent$target","stopPropagation","nativeEvent","contains","droppingItem","onDropDragOver","onDragOverResult","removeDroppingPlaceholder","finalDroppingItem","_e$nativeEvent","layerX","layerY","_this$state$droppingP","calculatedPosition","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","dragEnterCounter","item","onDrop","prevState","newLayoutBase","propsLayout","childrenEqual","fastRGLPropsEqual","autoSize","nbRow","containerPaddingY","onLayoutChange","isDroppingItem","draggableCancel","draggableHandle","_this$state3","resizable","resizeHandlesOptions","bounded","_this2","isDroppable","innerRef","mergedClassName","mergedStyle","containerHeight","onDragLeave","onDragEnter","onDragOver","processGridItem","verticalCompact","_default","_responsiveUtils","_ReactGridLayout","_excluded","getIndentationValue","param","breakpoint","ResponsiveReactGridLayout","generateInitialState","layouts","_cols","findOrGenerateResponsiveLayout","breakpoints","getBreakpointFromWidth","colNo","getColsFromBreakpoint","onWidthChange","newBreakpoint","lastBreakpoint","newCols","newLayouts","cloneLayout","onBreakpointChange","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","_objectWithoutProperties","validateLayout","lg","md","sm","xs","xxs","gridUnits","colOrRowSize","marginPx","lowerBound","upperBound","ComposedComponent","_class","WidthProvider","offsetWidth","onWindowResize","measureBeforeMount","rest","isEqualImpl","breakpointsSorted","sortBreakpoints","breakpointsAbove","correctBounds","sorted","matching","breakpointName","collides","compactItem","getFirstCollision","getStatics","modifyLayout","moveElementAwayFromCollision","translate","WebkitTransform","MozTransform","msTransform","OTransform","sortLayoutItems","sortLayoutItemsByColRow","sortLayoutItemsByRowCol","initialLayout","exists","isProduction","_grid","correctedLayout","itemKey","DEBUG","bottomY","moved","l1","l2","compareWith","heightWidth","resolveCompactionCollision","moveToCoord","sizeProp","otherItem","fullLayout","compactH","collidesWith","isUserAction","oldX","oldY","reverse","collision","itemToMove","compactV","fakeItem","contextName","subProps","_console","utils","Responsive","handleRefs","lastHandleRect","slack","_proto","resetData","runConstraints","lockAspectRatio","deltaW","deltaH","abs","oldW","oldH","slackW","slackH","resizeHandler","axisV","axisH","handleRect","_this2$runConstraints","dimensionsChanged","persist","renderResizeHandle","handleAxis","_this3","handleSize","_this3$handleRefs$han","resizableProps","_Resizable","_propTypes2","ResizableBox","propsWidth","propsHeight","_PropTypes$number","_len2","_key2","_PropTypes$number2","ex","React__default","canUseDOM","reducePropsToState","handleStateChangeOnClient","mapStateOnServer","WrappedComponent","mountedInstances","emitChange","SideEffect","_PureComponent","peek","rewind","recordedState","UNSAFE_componentWillMount","componentDidUpdate","PureComponent","displayName","getDisplayName","tslib_1","react_1","useTimeoutFn_1","__importDefault","ms","deps","_a","isReady","useEffect","useRef","ready","timeout","useCallback","clearTimeout","for","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","__self","__source","_owner","Fragment","jsx","jsxs","ANY","Comparator","comp","parseOptions","loose","trim","debug","semver","operator","version","re","COMPARATORLOOSE","COMPARATOR","SemVer","er","cmp","intersects","Range","includePrerelease","startsWith","safeRe","range","format","parseRange","first","isNullSet","isAny","comps","memoKey","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","cached","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","comparatorTrimReplace","TILDETRIM","tildeTrimReplace","CARETTRIM","caretTrimReplace","rangeList","parseComparator","replaceGTE0","rangeMap","comparators","delete","some","thisComparators","isSatisfiable","rangeComparators","every","thisComparator","rangeComparator","testSet","remainingComparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","replaceTilde","TILDELOOSE","TILDE","_","M","pr","ret","replaceCaret","CARETLOOSE","CARET","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","fM","fm","fp","fpr","fb","tM","tm","tp","tpr","prerelease","allowed","major","minor","patch","MAX_LENGTH","compareIdentifiers","LOOSE","FULL","compare","compareMain","comparePre","compareBuild","inc","release","identifierBase","base","neq","gt","gte","lt","lte","op","rtl","coerceRtlRegex","COERCERTLFULL","COERCERTL","lastIndex","COERCEFULL","COERCE","versionA","versionB","version1","version2","v1","v2","comparison","v1Higher","highVersion","lowVersion","highHasPre","throwErrors","list","internalRe","constants","identifiers","valid","clean","rcompare","compareLoose","rsort","coerce","satisfies","toComparators","maxSatisfying","minSatisfying","minVersion","validRange","outside","gtr","ltr","simplifyRange","subset","tokens","SEMVER_SPEC_VERSION","RELEASE_TYPES","rcompareIdentifiers","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","env","NODE_DEBUG","numeric","anum","bnum","firstKey","looseOption","emptyOpts","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","isGlobal","safe","token","makeSafeRegex","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","LONETILDE","LONECARET","r1","r2","maxSV","rangeObj","minSV","minver","setMin","comparator","compver","hilo","gtfn","ltefn","ltfn","ecomp","ranges","simplified","original","minimumVersionWithPreRelease","minimumVersion","simpleSubset","sub","dom","eqSet","gtltComp","higher","lower","hasDomLT","hasDomGT","higherGT","lowerLT","needDomLTPre","needDomGTPre","sawNonNull","OUTER","simpleSub","simpleDom","isSub","isArrayish","results","wrap","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","AMAZON","APPLE","ASUS","BLACKBERRY","BROWSER","CHROME","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SHARP","SONY","XIAOMI","ZEBRA","FACEBOOK","CHROMIUM_OS","MAC_OS","enumerize","str1","str2","lowerize","rgxMapper","ua","arrays","matches","regex","strMapper","windowsVersionMap","regexes","browser","cpu","device","engine","EDGE","os","UAParser","getResult","_navigator","_ua","_uach","userAgentData","_rgxmap","mergedRegexes","_isSelfNav","getBrowser","_browser","brave","isBrave","getCPU","_cpu","getDevice","_device","mobile","standalone","maxTouchPoints","getEngine","_engine","getOS","_os","platform","getUA","setUA","CPU","DEVICE","ENGINE","OS","$","jQuery","Zepto","parser","__WEBPACK_EXTERNAL_MODULE__6089__","__WEBPACK_EXTERNAL_MODULE__7781__","__WEBPACK_EXTERNAL_MODULE__8531__","__WEBPACK_EXTERNAL_MODULE__2007__","__WEBPACK_EXTERNAL_MODULE__4201__","__WEBPACK_EXTERNAL_MODULE__3241__","__WEBPACK_EXTERNAL_MODULE__5959__","__WEBPACK_EXTERNAL_MODULE__8398__","__WEBPACK_EXTERNAL_MODULE__3806__","__WEBPACK_EXTERNAL_MODULE__1269__","extendStatics","__extends","__","__assign","__rest","__decorate","decorators","decorate","__param","paramIndex","decorator","__esDecorate","descriptorIn","contextIn","initializers","extraInitializers","accept","kind","context","access","addInitializer","init","__runInitializers","thisArg","useValue","__propKey","__setFunctionName","description","__metadata","metadataKey","metadataValue","metadata","__awaiter","_arguments","P","generator","fulfilled","step","rejected","then","__generator","label","sent","trys","ops","verb","__createBinding","k2","__exportStar","__values","__read","ar","__spread","__spreadArrays","il","jl","__spreadArray","pack","__await","__asyncGenerator","asyncIterator","resume","fulfill","settle","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","__setModuleDefault","__importStar","__classPrivateFieldGet","receiver","__classPrivateFieldSet","__classPrivateFieldIn","__addDisposableResource","async","dispose","inner","asyncDispose","_SuppressedError","SuppressedError","suppressed","__disposeResources","fail","hasError","rec","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","amdO","getter","definition","globalThis","nmd","paths","isServer","isValidTimeout","timeUntilStale","updatedAt","staleTime","Date","now","resolveStaleTime","query","resolveEnabled","enabled","matchQuery","filters","fetchStatus","queryKey","stale","queryHash","hashQueryKeyByOptions","partialMatchKey","isActive","isStale","matchMutation","mutation","mutationKey","hashKey","queryKeyHashFn","isPlainObject","reduce","replaceEqualDeep","isPlainArray","aItems","aSize","bItems","bSize","equalItems","shallowEqualObjects","hasObjectPrototype","prot","replaceData","prevData","structuralSharing","addToEnd","items","newItems","addToStart","skipToken","ensureQueryFn","fetchOptions","queryFn","initialPromise","notifyManager","transactions","notifyFn","batchNotifyFn","scheduleFn","schedule","batch","originalQueue","flush","batchCalls","setNotifyFunction","setBatchNotifyFunction","setScheduler","createNotifyManager","Subscribable","subscribe","listener","onSubscribe","onUnsubscribe","hasListeners","focusManager","onFocus","setEventListener","focused","setFocused","isFocused","visibilityState","onlineManager","onOnline","onlineListener","offlineListener","setOnline","online","isOnline","defaultRetryDelay","failureCount","canFetch","networkMode","CancelledError","revert","silent","isCancelledError","createRetryer","config","continueFn","promiseResolve","promiseReject","isRetryCancelled","isResolved","promise","outerResolve","outerReject","canContinue","canRun","canStart","onSuccess","onError","pause","continueResolve","onPause","onContinue","run","promiseOrValue","catch","retry","retryDelay","delay","shouldRetry","onFail","cancelOptions","abort","continue","cancelRetry","continueRetry","Removable","destroy","clearGcTimeout","scheduleGc","gcTime","optionalRemove","updateGcTime","newGcTime","Query","defaultOptions","observers","initialData","hasData","initialDataUpdatedAt","dataUpdateCount","dataUpdatedAt","errorUpdateCount","errorUpdatedAt","fetchFailureCount","fetchFailureReason","fetchMeta","isInvalidated","getDefaultState","meta","setData","newData","manual","setStateOptions","observer","isDisabled","getObserversCount","getCurrentResult","isStaleByTime","shouldFetchOnWindowFocus","refetch","cancelRefetch","shouldFetchOnReconnect","addObserver","notify","removeObserver","invalidate","abortController","AbortController","addSignalProperty","signal","fetchFn","queryFnContext","persister","behavior","onFetch","onSettled","isFetchingOptimistic","action","fetchState","reducer","onQueryUpdate","QueryCache","client","defaultQueryOptions","getQueryDefaults","queryInMap","getAll","defaultedFilters","findAll","queries","Mutation","mutationId","mutationCache","failureReason","isPaused","variables","submittedAt","execute","mutationFn","restored","onMutate","runNext","onMutationUpdate","MutationCache","defaultMutationOptions","scope","scopeFor","mutations","firstPendingMutation","foundMutation","flat","resumePausedMutations","pausedMutations","all","getNextPageParam","pages","pageParams","getPreviousPageParam","queryClient","queryCache","mount","unmount","isFetching","isMutating","getQueryData","ensureQueryData","cachedData","fetchQuery","defaultedOptions","revalidateIfStale","prefetchQuery","getQueriesData","setQueryData","updater","functionalUpdate","setQueriesData","getQueryState","removeQueries","resetQueries","refetchFilters","refetchQueries","cancelQueries","defaultedCancelOptions","promises","invalidateQueries","refetchType","throwOnError","fetchInfiniteQuery","direction","fetchMore","oldPages","oldPageParams","cancelled","fetchPage","previous","pageParam","aborted","page","maxPages","addTo","oldData","initialPageParam","remainingPages","prefetchInfiniteQuery","getQueryCache","getMutationCache","getDefaultOptions","setDefaultOptions","setQueryDefaults","queryDefault","setMutationDefaults","getMutationDefaults","_defaulted","refetchOnReconnect","suspense","refetchOnWindowFocus","TransportItemType","transportItemTypeToBodyKey","EXCEPTION","LOG","MEASUREMENT","TRACE","EVENT","dateNow","getCurrentTimestamp","toISOString","timestampToIsoString","isTypeof","isToString","isInstanceOf","reference","isNull","isNumber","isEventDefined","Event","isEvent","isErrorDefined","isError","isErrorEvent","isDomError","isDomException","deepEqual","aIsArray","bIsArray","aIsObject","bIsObject","aKeys","bKeys","aKey","defaultExceptionType","stacktraceParser","LogLevel","defaultLogLevel","allLogLevels","INFO","WARN","ERROR","defaultLogArgsSerializer","InternalLoggerLevel","defaultInternalLogger","info","defaultInternalLoggerLevel","defaultUnpatchedConsole","createInternalLogger","unpatchedConsole","internalLoggerLevel","internalLogger","OFF","VERBOSE","initializeInternalLogger","faro","registerFaro","metas","transports","api","instrumentations","unpause","isolate","setInternalFaroOnGlobalObject","preventGlobalExposure","globalObjectKey","setFaroOnGlobalObject","BatchExecutor","sendFn","_b","signalBuffer","itemLimit","sendTimeout","paused","flushInterval","addItem","setInterval","clearInterval","groupItems","itemMap","metaKey","currentItems","initializeTransports","beforeSendHooks","applyBeforeSendHooks","filteredItems","hook","modified","batchExecutor","batching","transport","isBatched","newTransports","newTransport","existingTransport","addBeforeSendHooks","newBeforeSendHooks","beforeSendHook","addIgnoreErrorsPatterns","ignoreErrorsPatterns","ignoreErrorsPattern","patterns","payload","msg","pattern","shouldIgnoreEvent","getBeforeSendHooks","filteredItem","instantSend","transportsToRemove","transportToRemove","existingTransportIndex","removeBeforeSendHooks","beforeSendHooksToRemove","initializeUnpatchedConsole","initializeFaro","_unpatchedConsole","_config","acc","notifyListeners","itemsToRemove","currentItem","addListener","removeListener","currentListener","initializeMetas","tracesApi","otel","getOTEL","getTraceContext","trace","getSpanContext","active","trace_id","traceId","span_id","spanId","initOTEL","isOTELInitialized","pushTraces","initializeTracesAPI","lastPayload","parseStacktrace","changeStacktraceParser","newStacktraceParser","getStacktraceParser","pushError","skipDedupe","stackFrames","spanContext","timestampOverwriteMs","timestamp","frames","stacktrace","testingPayload","stackTrace","dedupe","initializeExceptionsAPI","_transports","metaSession","metaUser","metaView","setUser","user","setSession","session","resetUser","resetSession","getSession","setView","view","previousView","getView","initializeMetaAPI","logArgsSerializer","pushLog","initializeLogsAPI","pushMeasurement","initializeMeasurementsAPI","pushEvent","attributes","domain","eventDomain","initializeEventsAPI","initializeAPI","newInstrumentations","newInstrumentation","existingInstrumentation","initialize","instrumentationsToRemove","instrumentationToRemove","existingInstrumentationIndex","initializeInstrumentations","initial","sdk","app","bundleId","appName","sessionTracking","registerInitialMetas","beforeSend","ignoreErrors","registerInitialTransports","registerInitialInstrumentations","defaultBatchingConfig","newLineString","evalString","unknownSymbolString","atString","webkitLineRegex","webkitEvalRegex","webkitEvalString","webkitAddressAtString","webkitAddressAtStringLength","firefoxLineRegex","firefoxEvalRegex","firefoxEvalString","safariExtensionString","safariWebExtensionString","reactMinifiedRegex","buildStackFrame","lineno","colno","stackFrame","function","getDataFromSafariExtensions","isSafariExtension","isSafariWebExtension","getStackFramesFromError","lines","_line","line","submatch","columnNumber","STORAGE_KEY","SESSION_EXPIRATION_TIME","SESSION_INACTIVITY_TIME","defaultSessionTrackingConfig","persistent","maxSessionPersistenceTime","unknownString","defaultMetas","osName","osVersion","language","brands","getBrands","viewportWidth","viewportHeight","url","k6Meta","k6Properties","k6","isK6Browser","testRunId","BaseExtension","logDebug","logInfo","logWarn","logError","BaseTransport","getIgnoreUrls","mergeResourceSpans","traces","resourceSpans","currentResource","currentSpans","scopeSpans","newSpans","throttle","lastPending","timeoutBehavior","webStorageType","local","isWebStorageAvailable","storage","testItem","setItem","removeItem","getItem","webStorageMechanism","isWebStorageTypeAvailable","isLocalStorageAvailable","isSessionStorageAvailable","isSampled","_c","samplingRate","sampler","random","alphabet","genShortID","createUserSessionObject","sessionId","started","lastActivity","generateSessionId","isUserSessionValid","getUserSessionUpdater","fetchUserSession","storeUserSession","forceSessionExtend","sessionTrackingConfig","isPersistentSessions","sessionFromStorage","newSession","addSessionMetadataToNextSession","sessionMeta","onSessionChange","previousSession","PersistentSessionsManager","updateSession","updateUserSession","removeUserSession","storageTypeLocal","storedSession","sessionFromLocalStorage","userSession","VolatileSessionsManager","storageTypeSession","sessionFromSessionStorage","getSessionManagerByConfig","FetchTransport","disabledUntil","rateLimitBackoffMs","defaultRateLimitBackoffMs","getNow","promiseBuffer","concurrency","inProgress","work","producer","reason","promiseProducer","createPromiseBuffer","bufferSize","bk","signals","getTransportBody","requestOptions","apiKey","headers","restOfRequestOptions","keepalive","extendFaroSession","getRetryAfterDate","text","ignoreUrls","retryAfterHeader","date","SessionExpiredString","BaseInstrumentation","domErrorType","domExceptionType","objectEventValue","valueTypeRegex","getErrorDetails","isDomErrorRes","isEventRes","ErrorsInstrumentation","oldOnerror","eventIsString","initialStackFrame","groups","getValueAndTypeFromMessage","registerOnerror","detail","isPrimitive","persisted","timeStamp","performance","getEntriesByType","responseStart","u","activationStart","prerendering","wasDiscarded","rating","navigationType","PerformanceObserver","supportedEntryTypes","getEntries","observe","buffered","requestAnimationFrame","T","E","firstHiddenTime","C","S","disconnect","startTime","reportAllChanges","L","A","I","interactionId","durationThreshold","F","D","interactionCount","B","H","entryType","duration","latency","requestIdleCallback","O","G","J","Q","U","V","Y","W","cancelable","processingStart","X","Z","WebVitalsBasic","mapping","indicator","executor","metric","cls","hadRecentInput","takeRecords","fcp","fid","inp","PerformanceEventTiming","lcp","ttfb","domInteractive","domContentLoadedEventStart","domComplete","nodeName","et","processingEnd","renderTime","tt","rt","ot","ct","ut","ft","dt","vt","mt","pt","NAVIGATION_ID_STORAGE_KEY","loadStateKey","timeToFirstByteKey","WebVitalsWithAttribution","corePushMeasurement","measureCLS","measureFCP","measureFID","measureINP","measureLCP","measureTTFB","sources","largestShiftTarget","largestShiftTime","largestShiftValue","largestShiftSource","largestShiftEntry","loadState","attribution","buildInitialValues","addIfPresent","buildInitialContext","timeToFirstByte","firstByteToFCP","navigationEntry","fcpEntry","ht","eventTarget","eventType","eventTime","eventEntry","interactionTarget","interactionTargetElement","interactionType","interactionTime","nextPaintTime","processedEventEntries","longAnimationFrameEntries","inputDelay","processingDuration","presentationDelay","resourceLoadDelay","resourceLoadDuration","elementRenderDelay","requestStart","responseEnd","lcpEntry","lcpResourceEntry","waitingDuration","cacheDuration","dnsDuration","connectionDuration","requestDuration","workerStart","fetchStart","domainLookupStart","connectStart","connectEnd","navigationEntryId","navigation_type","navigation_entry_id","WebVitalsInstrumentation","intializeWebVitalsInstrumentation","trackWebVitalsAttribution","EVENT_SESSION_START","EVENT_SESSION_RESUME","SessionInstrumentation","sendSessionStartEvent","notifiedSession","createInitialSession","SessionManager","sessionsConfig","lifecycleType","initialSession","createSession","registerBeforeSendHook","newItem","newAttributes","initialSessionMeta","ViewInstrumentation","sendViewChangedEvent","notifiedView","fromView","toView","w3cTraceparentFormat","getSpanContextFromServerTiming","serverTimings","serverEntry","entryUrlIsIgnored","ignoredUrls","entryName","includePerformanceEntry","performanceEntryJSON","allowProps","allowPropKey","allowPropValue","perfEntryPropVal","createFaroResourceTiming","resourceEntryRaw","decodedBodySize","domainLookupEnd","encodedBodySize","initiatorType","nextHopProtocol","redirectEnd","redirectStart","renderBlockingStatus","rbs","responseStatus","secureConnectionStart","transferSize","toFaroPerformanceTimingString","tcpHandshakeTime","dnsLookupTime","tlsNegotiationTime","redirectTime","requestTime","responseTime","fetchTime","serviceWorkerTime","cacheHitStatus","cacheType","getCacheType","protocol","DEFAULT_TRACK_RESOURCES","PerformanceInstrumentation","handleReady","readyStateCompleteHandler","onDocumentReady","faroNavigationId","faroNavigationEntryResolve","faroNavigationEntryPromise","observedEntries","navigationEntryRaw","navEntryJson","serverTiming","faroPreviousNavigationId","faroNavigationEntry","domContentLoadedEventEnd","loadEventEnd","loadEventStart","parserStart","timing","domLoading","timeOrigin","getDocumentParsingTime","pageLoadTime","documentParsingTime","domProcessingTime","domContentLoadHandlerTime","onLoadTime","createFaroNavigationTiming","getNavigationTimings","trackResources","resourceEntryJson","faroResourceEntry","faroResourceId","observeResourceTimings","flatMap","ConsoleInstrumentation","disabledLevels","defaultDisabledLevels","getWebInstrumentations","enablePerformanceInstrumentation","captureConsole","captureConsoleDisabledLevels","PYROSCOPE_APP_ID","plugin","PLUGIN_BASE_URL","ROUTES","GIT_COMMIT","MATCHERS","regExp","environment","getEnvironment","host","FARO_ENVIRONMENTS","faroUrl","getFaro","QueryClientContext","useQueryClient","QueryClientProvider","Provider","logger","callConsole","userStorage","itemName","localStorage","KEYS","SETTINGS","GITHUB_INTEGRATION","PROFILES_EXPLORER","noOp","HttpClientError","responseJson","statusText","HttpClient","pathname","fullUrl","baseUrl","defaultHeaders","fullOptions","ok","isAbortError","DOMException","ApiClient","getPyroscopeDataSources","datasources","ds","selectDefaultDataSource","pyroscopeDataSources","uidFromUrl","searchParams","uidFromLocalStorage","dataSource","jsonData","overridesDefault","isDefault","getBaseUrl","pyroscopeDataSource","appSubUrl","at","bootData","orgId","QueryObserver","bindMethods","shouldFetchOnMount","updateResult","shouldFetchOn","notifyOptions","prevOptions","prevQuery","shouldFetchOptionally","nextRefetchInterval","getOptimisticResult","createResult","optimisticResult","trackResult","onPropTracked","trackedResult","trackProp","getCurrentQuery","fetchOptimistic","refetchInterval","nextInterval","refetchIntervalInBackground","prevResult","prevResultState","prevResultOptions","queryInitialState","isPlaceholderData","_optimisticResults","fetchOnMount","fetchOptionally","select","selectError","placeholderData","isPending","isLoading","isSuccess","isInitialLoading","isFetched","isFetchedAfterMount","isRefetching","isLoadingError","isRefetchError","nextResult","defaultNotifyOptions","notifyOnChangeProps","notifyOnChangePropsValue","includedProps","typedKey","shouldNotifyListeners","retryOnMount","shouldLoadOnMount","refetchOnMount","QueryErrorResetBoundaryContext","isReset","clearReset","createValue","useQueryErrorResetBoundary","IsRestoringContext","useIsRestoring","shouldThrowError","throwError","ensurePreventErrorBoundaryRetry","errorResetBoundary","useClearResetErrorBoundary","getHasError","ensureStaleTime","shouldSuspend","useQuery","Observer","isRestoring","_experimental_beforeQuery","onStoreChange","unsubscribe","_experimental_afterQuery","useBaseQuery","statsApiClient","hasIngestedData","dataIngested","oldestProfileTime","newestProfileTime","getStyles","theme","row","css","display","flexDirection","justifyContent","alignItems","headerColumn","minWidth","column","tooltip","colors","secondary","fontSize","typography","bodySmall","contentWithIcon","styleMixins","mediaUp","formatSize","formattedValueToString","getValueFormat","formatCount","count","QueryAnalysisTooltip","styles","useStyles2","totalBytesInTimeRange","queryImpact","queryAnalysisTooltip","useMemo","div","data-testid","totalQueriedSeries","deduplicationNeeded","Divider","queryScopes","strong","componentType","componentCount","blockCount","seriesCount","profileCount","sampleCount","indexBytes","profileBytes","symbolBytes","Toggletip","content","fitContent","span","IconButton","aria-label","clock","_temp","ATTRIBUTE_NAMES","TAG_NAMES","BASE","BODY","HEAD","HTML","LINK","META","NOSCRIPT","SCRIPT","STYLE","TITLE","TAG_PROPERTIES","REACT_TAG_MAP","accesskey","charset","class","contenteditable","contextmenu","itemprop","tabindex","HTML_TAG_MAP","SELF_CLOSING_TAGS","HELMET_ATTRIBUTE","createClass","objectWithoutProperties","encodeSpecialCharacters","getTitleFromPropsList","propsList","innermostTitle","getInnermostProperty","innermostTemplate","innermostDefaultTitle","getOnChangeClientState","getAttributesFromPropsList","tagType","tagAttrs","getBaseTagFromPropsList","primaryAttributes","innermostBaseTag","lowerCaseAttributeKey","getTagsFromPropsList","tagName","approvedSeenTags","approvedTags","instanceTags","instanceSeenTags","primaryAttributeKey","attributeKey","tagUnion","property","rafPolyfill","currentTime","cafPolyfill","webkitRequestAnimationFrame","mozRequestAnimationFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","_helmetCallback","commitTagChanges","baseTag","bodyAttributes","htmlAttributes","linkTags","metaTags","noscriptTags","onChangeClientState","scriptTags","styleTags","titleAttributes","updateAttributes","updateTitle","tagUpdates","updateTags","addedTags","removedTags","_tagUpdates$tagType","newTags","oldTags","flattenArray","possibleArray","elementTag","helmetAttributeString","getAttribute","helmetAttributes","attributesToRemove","attributeKeys","attribute","setAttribute","indexToSave","removeAttribute","tags","headElement","tagNodes","querySelectorAll","indexToDelete","newElement","styleSheet","cssText","createTextNode","existingTag","isEqualNode","removeChild","generateElementAttributesAsString","attr","convertElementAttributestoReactProps","initProps","getMethodsForTag","toComponent","_initProps","attributeString","flattenedTitle","generateTitleAsString","_mappedTag","mappedTag","mappedAttribute","dangerouslySetInnerHTML","__html","generateTagsAsReactComponent","attributeHtml","tagContent","isSelfClosing","generateTagsAsString","_ref$title","noscript","script","HelmetSideEffects","defer","HelmetExport","HelmetWrapper","classCallCheck","possibleConstructorReturn","inherits","shouldComponentUpdate","mapNestedChildrenToProps","nestedChildren","flattenArrayTypeChildren","_babelHelpers$extends","arrayTypeChildren","newChildProps","mapObjectTypeChildren","_babelHelpers$extends2","_babelHelpers$extends3","newProps","mapArrayTypeChildrenToProps","newFlattenedProps","arrayChildName","_babelHelpers$extends4","warnOnInvalidChildren","mapChildrenToProps","_child$props","initAttributes","convertReactPropstoHtmlAttributes","_props","defaultTitle","titleTemplate","mappedState","renderStatic","pluginCommitSha","pluginCommitURL","buildInfo","grafanaBuildInfo","InfoMenuHeader","updated","usePluginContext","menuHeader","h5","subTitle","InfoMenu","isDev","shortCommitSha","Menu","header","Item","icon","onClick","edition","commit","PluginInfo","Dropdown","overlay","placement","spacing","PyroscopeLogoComponent","img","cx","logo","PyroscopeLogo","PageTitleComponent","queryAnalysis","fullTitle","Helmet","titleContainer","h1","infoArea","h2","PageTitle","memo","EmptyLoadingPage","PluginPage","PageLayoutType","Canvas","Icon","StyledLink","NoDataSourcePage","Alert","severity","onboardingRow","background","onboardingParagraph","onboardingPanel","onboardingPanelHeader","onboardingPanelImage","hero","heroTitles","heroImage","onboardingPanelNumber","color3","onboardingPanelNumberSpan","onboardingPanelDescription","subtitle","OnboardingModal","instances","useFetchInstances","settingsUrl","setSettingsUrl","useState","isCloud","orgSlug","hpInstanceId","newSettingsUrl","actions","useOnboardingModal","HeroImage","HeroImageExploreProfiles","h3","ReduceCosts","DecreaseLatency","ResolveIncidents","br","onboardingPage","primary","closeButton","pageNav","OnboardingPage","onCloseModal","Custom","Onboarding","isModalClosed","setIsModalClosed","pyroscopeDataSourcesCount","stats","useFetchTenantStats","hasNoUserData","shouldShowLoadingPage","shouldShowOnboardingPage","shouldShowNoDataSourceBanner","closeModal","useOnboarding","prefixRouteWithPluginBaseUrl","container","AdHocColumns","displayError","msgs","handheldBy","getAppEvents","publish","AppEvents","alertError","displayWarning","alertWarning","displaySuccess","alertSuccess","adHocProfileClient","profileId","profileType","profile_type","profileTypes","profile","flamebearerProfile","uploadSingle","file","_readProfileFile","uploadDiff","fileReader","fileContent","base64Content","stripBase64Prefix","DEFAULT_PROFILE_DATA","multiple","AdHocFileDropZone","onFileDropped","onFileRemove","onDropAccepted","FileDropzone","Intl","Collator","sensitivity","inf","escapeRegExp","EXACT_HERE","swapAlpha","upper","OPTS","unicode","interSplit","intraSplit","intraBound","interLft","interRgt","interChars","interIns","intraChars","intraIns","intraContr","intraMode","intraSlice","intraSub","intraTrn","intraDel","intraFilt","term","haystack","needle","chars","terms","interLft2","interLft1","ia","ib","lazyRepeat","mode2Tpl","uFuzzy","opts","_intraSplit","_interSplit","_intraBound","letters","toLocaleUpperCase","toLocaleLowerCase","uFlag","quotedAny","EXACTS_RE","NEGS_RE","intraRules","_intraSlice","_intraIns","_intraSub","_intraTrn","_intraDel","plen","withIntraSplit","trimRe","contrsRe","exacts","NUM_OR_ALPHA_RE","prepQuery","capt","interOR","reTpl","contrs","fill","pi","matchAll","lftIdx","rgtIdx","lftChar","rgtChar","numChars","variants","intraInsTpl","preTpl","sufTpl","interCharsTpl","idxs","withIntraBound","interBound","queryR","partsLen","interRgt2","interRgt1","mayDiscard","ii","mhstr","idxAcc","disc","lft2","lft1","rgt2","rgt1","inter","intra","refine","termLen","groupLen","fullMatch","idxOf","refineMatch","lftCharIdx","rgtCharIdx","isPre","isSuf","junk","junkIdx","m2","charIdx","refLen","ri","lastRi","idxInNext","prepend","search","outOfOrder","infoThresh","preFiltered","needles","negs","neg","negsRe","terms2","ti","permute","perm","matchedIdxs","ni","preFiltered2","matched","retInfo","retOrder","_info","order","_search","latinize","accents","N","accentsMap","accentsTpl","accentsRe","replacer","strings","_mark","_append","highlight","mark","accum","append","fr","isBrowser","useLayoutEffect","defaultState","ResizeObserver","rect","setRect","contentRect","top_1","PIXELS_PER_LEVEL","devicePixelRatio","MUTE_THRESHOLD","HIDE_THRESHOLD","LABEL_THRESHOLD","BAR_BORDER_WIDTH","BAR_TEXT_PADDING_LEFT","GROUP_STRIP_WIDTH","GROUP_STRIP_PADDING","GROUP_STRIP_MARGIN_LEFT","GROUP_TEXT_OFFSET","FlameGraphContextMenu","itemData","onMenuItemClick","onItemFocus","onSandwich","collapseConfig","onExpandGroup","onCollapseGroup","onExpandAllGroups","onCollapseAllGroups","getExtraContextMenuButtons","collapsing","allGroupsExpanded","allGroupsCollapsed","selectedView","ContextMenu","renderMenuItems","extraButtons","isDiff","isDiffFlamegraph","MenuItem","clipboard","writeText","MenuGroup","collapsed","posX","posY","focusOnOpen","FlameGraphTooltip","totalTicks","tableData","getDiffTooltipData","InteractiveTable","tooltipTable","columns","getRowId","originalRow","rowId","tooltipData","getTooltipData","lastParagraph","unitTitle","unitValue","percentValue","unitSelf","percentSelf","samples","Portal","VizTooltipContainer","tooltipContainer","tooltipContent","tooltipName","getLabel","itemIndexes","displayValue","valueDisplayProcessor","displaySelf","getSelfDisplay","suffix","getUnitTitle","toLocaleString","totalTicksRight","getLevels","valueRight","totalTicksLeft","valueLeft","percentageLeft","percentageRight","displayValueLeft","getValueWithUnit","displayValueRight","shortValFormat","baseline","overflow","wordBreak","trimLeft","trimRight","tinycolor","named","matchers","hsva","hex8","parseIntFromHex","convertHexToDecimal","hex6","hex4","hex3","stringInputToObject","isValidCSSUnit","bound01","rgbToRgb","substr","convertToPercentage","hsvToRgb","hue2rgb","hslToRgb","boundAlpha","inputToRGB","_originalInput","_r","_g","_roundA","_format","_gradientType","gradientType","_ok","rgbToHsl","rgbToHsv","rgbToHex","allow3Char","pad2","rgbaToArgbHex","convertDecimalToHex","_desaturate","amount","toHsl","clamp01","_saturate","_greyscale","_lighten","_brighten","toRgb","_darken","_spin","_complement","polyad","_splitcomplement","_analogous","slices","_monochromatic","toHsv","modification","getBrightness","isValid","getOriginalInput","getFormat","getAlpha","getLuminance","RsRGB","GsRGB","BsRGB","setAlpha","toHsvString","toHslString","toHex","toHexString","toHex8","allow4Char","rgbaToHex","toHex8String","toRgbString","toPercentageRgb","toPercentageRgbString","toName","hexNames","toFilter","secondColor","hex8String","secondHex8String","formatSet","formattedString","hasAlpha","clone","_applyModification","brighten","greyscale","spin","_applyCombination","analogous","complement","monochromatic","splitcomplement","triad","tetrad","fromRatio","newColor","equals","rgb1","rgb2","readability","isReadable","wcag2","wcag2Parms","parms","mostReadable","baseColor","colorList","includeFallbackColors","bestColor","bestScore","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","flipped","flip","isOnePointZero","processPercent","isPercentage","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","SampleUnit","SampleUnit2","SelectedView","SelectedView2","ColorScheme","ColorScheme2","ColorSchemeDiff","ColorSchemeDiff2","packageColors","byValueGradient","getBarColorByValue","byPackageGradient","rangeMin","rangeMax","intensity","diffDefaultColors","diffDefaultGradient","diffColorBlindColors","diffColorBlindGradient","useFlameRender","canvasRef","depth","wrapperWidth","matchedLabels","textAlign","totalViewTicks","totalColorTicks","colorScheme","focusedItemData","collapsedMap","numberOfLevels","setCtx","ctx2","getContext","textBaseline","font","strokeStyle","useSetupCanvas","useTheme2","mutedColor","barMutedColor","getBarColor","topLevel","muted","barColor","Default","DiffColorBlind","ValueBased","packageName","matcher","getPackageName","seed","remainder","h1b","k1","murmurhash3_32_gc","colorIndex","packageColor","getBarColorByPackage","ticks","ticksRight","colorScale","scaleLinear","ticksLeft","getBarColorByDiff","useColorFunction","renderFunc","beginPath","fillStyle","stroke","collapsedItemConfig","finalLabel","renderLabel","groupStripX","renderGroupingStrip","useRenderFunc","clearRect","canvas","mutedPath2D","Path2D","levelOffset","pixelsPerTick","collapsedItemRendered","curBarTicks","offsetModifier","skipRender","isCollapsedItem","getBarX","nextList","parents","walkTree","save","clip","unit","measure","measureText","spaceForTextInRect","fullLabel","labelX","fillText","restore","FlameGraphCanvas","setRangeMin","setRangeMax","onItemFocused","totalProfileTicks","totalProfileTicksRight","showFlameGraphOnly","setCollapsedMap","sizeRef","graphRef","tooltipItem","setTooltipItem","clickedItemData","setClickedItemData","onGraphClick","convertPixelCoordinatesToBarCoordinates","offsetX","offsetY","mousePosition","setMousePosition","onGraphMouseMove","onGraphMouseLeave","handleOnClick","parentElement","canvasWrapper","onMouseMove","onMouseLeave","setCollapsedStatus","setAllCollapsedStatus","flexGrow","flexBasis","canvasContainer","cursor","flex","sandwichMarker","writingMode","whiteSpace","sandwichMarkerIcon","verticalAlign","currentLevel","levelIndex","xStart","xEnd","collapsedConfig","FlameGraphMetadata","focusedItem","sandwichedLabel","onFocusPillClick","onSandwichPillClick","ticksVal","metadataPill","metadataPillName","pillCloseButton","borderRadius","padding","fontWeight","fontWeightMedium","lineHeight","textOverflow","__defProp","__defProps","__getOwnPropDescs","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","__spreadProps","FlameGraph","sandwichItem","levels","setLevels","levelsCallers","setLevelsCallers","setTotalProfileTicks","setTotalProfileTicksRight","setTotalViewTicks","levelsCallers2","levels2","totalProfileTicks2","totalProfileTicksRight2","totalViewTicks2","callers","callees","getSandwichLevels","commonCanvasProps","sandwichCanvasWrapper","sandwichMarkerCalees","mergeParentSubtrees","newRoots","newRoot","newNode","getParentSubtrees","mergeSubtrees","oppositeDirection","indexes","prevSiblingsVal","nextItems","nextGroups","groupBy","__publicField","CollapsedMap","newMap","newConfig","item2","CollapsedMapBuilder","threshold","addTree","getCollapsedMap","FlameGraphDataContainer","createTheme","wrongFields","FieldType","enum","missingFields","wrongTypeFields","frameField","expectedTypes","checkFields","getMessageCheckFieldsResult","labelField","levelField","valueField","selfField","valueRightField","selfRightField","enumConfig","labelDisplayProcessor","getDisplayProcessor","uniqueLabels","getLevel","fieldAccessor","getValueRight","getSelf","getSelfRight","getUniqueLabels","Bytes","Nanoseconds","initLevels","nodes","getNodesWithLabel","uniqueLabelsMap","prevLevel","lastSibling","collapsedMapContainer","collapsingThreshold","nestedSetToLevels","index2","FlameGraphHeader","setSearch","setSelectedView","onReset","onTextAlignChange","showResetButton","onColorSchemeChange","stickyHeader","extraHeaderElements","vertical","isDiffMode","localSearch","setLocalSearch","localSearchState","setLocalSearchState","prevSearch","usePrevious","useDebounce","useSearchInput","Button","inputContainer","Input","onChange","currentTarget","rightContainer","variant","buttonSpacing","ColorSchemeButton","ButtonGroup","TopTable","RadioButtonGroup","alignOptions","getViewOptions","extraElements","menu","PackageBased","colorDotStyle","colorDotByValue","colorDotByPackage","colorDotDiffColorBlind","colorDotDiffDefault","colorDot","colorDotDiff","viewOptions","Both","flexWrap","gap","zIndex","navbarFixed","resetButton","resetButtonIconWrapper","windowObject","cancelFrame","requestFrame","clearTimeoutFn","setTimeoutFn","cancelAnimationFrameFn","requestAnimationFrameFn","animationFrameID","timeoutID","AutoSizer","defaultHeight","scaledHeight","scaledWidth","defaultWidth","_autoSizer","_detectElementResize","_parentNode","_resizeObserver","_timeoutId","_onResize","disableHeight","disableWidth","offsetHeight","_setRef","autoSizer","nonce","ResizeObserverInstance","animationKeyframes","animationName","animationStartEvent","animationStyle","checkTriggers","resetTriggers","scrollListener","triggers","__resizeTriggers__","expand","firstElementChild","contract","lastElementChild","expandChild","scrollWidth","scrollHeight","__resizeLast__","__resizeRAF__","__resizeListeners__","animation","keyframeprefix","domPrefixes","startEvents","pfx","elm","addResizeListener","elementStyle","createStyles","expandTrigger","contractTrigger","__animationListener__","removeResizeListener","createDetectElementResize","doNotBailOutOnEmptyChildren","outerStyle","childParams","bailoutOnChildren","FlameGraphTopTableContainer","onSymbolClick","onSearch","onTableSort","table","filteredTable","total","totalRight","setSort","topTableContainer","frame","actionField","TableCellDisplayMode","cellComponent","ActionCell","rowIndex","actionFieldTableConfig","filterable","actionColumnWidth","hideHeader","inspect","align","cellOptions","custom","createActionField","symbolField","TOP_TABLE_COLUMN_WIDTH","links","baselineField","createNumberField","comparisonField","diffField","ColorText","removeColor","addColor","mappings","MappingType","ValueToText","RangeToText","totalField","dataFrames","applyFieldOverrides","fieldConfig","overrides","replaceVariables","buildTableDataFrame","Table","initialSortBy","onSortByChange","tableFieldOptions","Auto","getStylesActionCell","isSearched","isSandwiched","actionCellWrapper","actionCellButton","backgroundColor","ufuzzy","FlameGraphContainer","onTableSymbolClick","onViewSelected","onTextAlignSelected","getTheme","disableCollapsing","setFocusedItemData","setTextAlign","setSandwichItem","dataContainer","setColorScheme","defaultColorScheme","useColorScheme","minHeight","tableContainer","horizontalContainer","columnGap","horizontalGraphContainer","horizontalTableContainer","maxHeight","verticalGraphContainer","verticalTableContainer","foundLabels","useLabelSearch","resetFocus","resetSandwich","flameGraph","data2","ThemeContext","PROFILES_EXPLORER_PAGE_NAME","PROFILES_EXPLORER_VIEW","getCurrentPage","getMetaProperties","appRelease","apps","appVersion","URLSearchParams","reportInteraction","interactionName","grafanaReportInteraction","ch2","u8","u16","Uint16Array","i32","Int32Array","fleb","fdeb","clim","freb","eb","fl","revfl","fd","revfd","rev","hMap","cd","mb","co","rvb","sv","r_1","flt","fdt","flm","flrm","fdm","fdrm","bits16","shft","slc","ec","ind","nt","code","inflt","dat","st","dict","dl","noBuf","resize","noSt","cbuf","nbuf","final","bt","lm","dm","lbt","dbt","tbts","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lms","dms","lpos","dsym","dend","wbits","wbits16","hTree","i0","i1","maxSym","tr","mbt","ln","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","clen","cf","wfblk","wblk","syms","lf","df","li","bs","dlt","mlb","ddt","mdb","lclt","nlc","lcdt","ndc","lcfreq","lct","mlcb","nlcc","ll","flen","ftlen","dtlen","llm","lcts","clct","deo","dflt","lvl","plvl","pre","post","lst","msk_1","bs1_1","bs2_1","hsh","lc_1","wi","hv","imod","pimod","ch_1","dif","maxn","maxd","ml","nl","mmd","lin","din","crct","crc","cr","adler","dopt","dictionary","newDat","mem","wcln","fnStr","td","ks","st_1","spInd","ch","bInflt","inflateSync","pbf","gopt","bDflt","deflateSync","gze","gzh","gzhl","wbytes","guze","gzs","gzl","zle","zlh","zule","zls","postMessage","astrm","strm","ondata","ev","astrmify","fns","ext","td_1","mrg","transfer","Worker","onmessage","ed","$e$","wk","cbfs","wrkr","terminate","queuedSize","ondrain","mtime","flg","zs","lv","StrmOpt","Deflate","endLen","newBuf","AsyncDeflate","Inflate","bts","AsyncInflate","Gzip","AsyncGzip","Gunzip","onmember","AsyncGunzip","Zlib","AsyncZlib","Unzlib","AsyncUnzlib","TextDecoder","stream","queueMicrotask","wrapSync","Stream","hasWorker","compressors","decompressors","makeMulti","TransformStreamBase","processors","Processor","endCb","compressor","controller","enqueue","highWaterMark","globals","CompressionStream","TransformStream","DecompressionStream","makeDecompressionStream","flamegraphDotComApiClient","upload","btoa","fileTypeData","units","spyName","CompareTarget","DATETIME_FORMATTER","DateTimeFormat","year","month","day","hour12","hour","minute","second","formatToParts","dateForExportFilename","timeRange","unix","getTimeRange","fromKey","toKey","BASELINE","dateTimeParse","getExportFilename","timeRanges","COMPARISON","ExportMenu","enableFlameGraphDotComExport","uploadToFlamegraphDotCom","customExportName","dlLink","click","shouldDisplayFlamegraphDotCom","downloadPng","toBlob","blob","downloadJson","dataStr","encodeURIComponent","useExportMenu","ExportDataComponent","ExportData","getNodes","itemOffset","selfRight","valRight","valTotal","offsetRight","offsetTotal","FlameGraphComponent","collapsedFlamegraphs","dataFrame","nodeLevels","currentNodeStart","prevLevelOffset","prevLevelNode","parentNodeStart","parentNodeEnd","labelValues","levelValues","selfValues","valueValues","selfRightValues","valueRightValues","valueUnit","preferredVisualisationType","createDataFrame","flamebearerToDataFrameDTO","flamebearer","GrafanaFlameGraph","mode","flamegraph","AdHocFlameGraph","selectorContainer","AdHocProfileTypeSelector","option","_onChange","InlineFieldRow","InlineField","Select","spinner","AdHocSpinner","Spinner","AdHocSingleComponent","processFile","selectProfileType","removeFile","setIsLoading","profileData","setProfileData","useUploadFile","AdHocSingle","AdHocComparison","tabContent","AdHocTabs","activeTabIndex","setActiveTabIndex","TabsBar","Tab","onChangeTab","TabContent","AdHocView","getUrlWithAppState","preserveParams","paramsCopy","locationService","getSearchObject","urlUtil","renderUrl","locationUtil","assureBaseUrl","renderSceneComponentWithRouteProps","sceneObject","routeProps","runtimePanelPlugins","randomUUID","crypto","getRandomValues","rnds8","rng","byteToHex","rnds","unsafeStringify","SceneComponentWrapper","_a2","otherProps","exclude","__objRest","EmptyRenderer","setValue","unsub","activate","SceneObjectStateChangedEvent","BusEventWithPayload","UserActionEvent","__accessCheck","member","SceneObjectRef","WeakSet","__privateAdd","SceneObjectBase","_isActive","_activationHandlers","_deactivationHandlers","_subs","Subscription","_refCount","_events","EventBusSrv","_state","_setParent","_parent","variableDependency","_variableDependency","urlSync","_urlSync","forEachChild","subscribeToState","changedObject","subscribeToEvent","update","_handleActivationOfChangedStateProps","publishEvent","partialUpdate","$behaviors","_handleChangedBehaviors","$data","_handleChangedStateActivation","$variables","$timeRange","oldValue","deactivationHandler","oldBehavior","newBehavior","_activateBehavior","bubble","getRoot","_internalActivate","deactivate","called","_internalDeactivate","removeAllListeners","useSceneObjectState","forceRender","withState","clonedState","cloneSceneObjectState","cloneSceneObject","addActivationHandler","getRef","stateAtFirstRender","shouldActivateOrKeepAlive","unactivate","propValue","sceneState","getClosest","extract","extracted","curSceneObject","RuntimeDataSource","DataSourceApi","pluginId","readOnly","PluginType","datasource","author","logos","large","small","screenshots","testDatasource","runtimeDataSources","UniqueUrlKeyMapper","getUniqueKey","objectsWithKey","address","findIndex","rebuildIndex","buildIndex","getKeys","hit","getUrlState","urlKeyMapper","visitNode","newUrlState","uniqueKey","syncStateFromUrl","urlParams","urlState","currentState","currentValue","isUrlValueEqual","updateFromUrl","currentUrlValue","newUrlValue","isEqual","ScaleDistribution","ScaleDistribution2","GraphGradientMode","GraphGradientMode2","SortOrder","SortOrder2","BarGaugeDisplayMode","BarGaugeDisplayMode2","BarGaugeValueMode","BarGaugeValueMode2","BarGaugeNamePlacement","BarGaugeNamePlacement2","BarGaugeSizing","BarGaugeSizing2","TableCellDisplayMode2","VariableFormatID","VariableFormatID2","LoadingState","LoadingState2","emptyPanelData","Done","series","getDefaultTimeRange","SceneObjectUrlSyncConfig","_sceneObject","_options","_keys","INTERVAL_STRING_REGEX","parseUrlParam","utcValue","toUtc","epoch","evaluateTimeRange","timeZone","fiscalYearStartMonth","hasDelay","dateMath","SceneTimeRange","getTimeZone","UNSAFE_nowDelay","onTimeRangeChange","updateToEval","onTimeZoneChange","onRefresh","_onActivate","timeZoneSource","getTimeZoneSource","weekStart","setWeekStart","urlValues","timezone","EmptyDataNode","getResultsStream","of","DefaultTimeRange","EmptyVariableSet","getByName","isVariableLoadingOrWaitingToUpdate","variable","SceneVariableValueChangedEvent","isCustomVariableValue","scopedVarsVariable","fieldAccessorCache","getFieldAccessor","fieldPath","ScopedVarsVariable","realValue","getValueText","formatRegistry","Registry","formats","Lucene","formatter","luceneEscape","Raw","Regex","escapeRegex","escapedValues","Pipe","Distributed","CSV","textUtil","escapeHtml","PercentEncode","encodeURIComponentStrict","SingleQuote","strVal","DoubleQuote","SQLString","sqlStringFormatter","nrValue","dateTime","Glob","Text","_args","QueryParam","formatQueryParameter","UriEncode","encodeURIStrict","replaceSpecialCharactersToASCII","encodeURI","SQL_ESCAPE_MAP","ALL_VARIABLE_TEXT","ALL_VARIABLE_VALUE","AUTO_VARIABLE_VALUE","VARIABLE_REGEX","lookupVariable","sceneInterpolator","scopedVars","interpolations","var1","var2","fmt2","var3","fmt3","variableName","fmt","scopedVar","getSceneVariableForScopedVar","Macro","macrosIndex","lookupFormatVariable","formatNameOrFn","multi","isMulti","includeAll","getIfExists","formatValue","isSceneObject","isDataRequestEnricher","isDataLayer","isQueryController","getData","findObjectInternal","scene","check","alreadySearchedChild","shouldSearchUp","maybe","findObject","SkipFormattingValue","_value","TimeFromAndToMacro","dateTimeFormat","IntervalMacro","intervalMs","interval","collectAllVariables","record","skipUrlSync","fallbackDisplayProcessor","UrlStateFormatter","_urlQueryParams","allParams","includeOnly","DataLinkBuiltInVars","includeVars","allVars","keepTime","toUrlParams","_match","_scopedVars","dataContext","__dataContext","calculatedValue","timeField","time","refId","getFieldDisplayValuesProxy","frameIndex","getFrameDisplayName","getFieldDisplayName","formatLabels","getTemplateProxyForField","getLocation","subUrl","resolvedOptions","login","email","orgName","sceneGraph","getVariables","getLayout","isSceneLayout","getDataLayers","localOnly","collected","dataProvider","interpolate","hasVariableDependencyInLoadingState","getNames","findByKey","sceneToCheck","findByKeyAndType","targetType","findAllObjects","getAncestor","ancestorType","getQueryController","getDataSource","runtimeDataSource","getDataSourceSrv","writeSceneLog","loggingEnabled","VariableDependencyConfig","_dependencies","_isWaitingForVariables","scanCount","_statePaths","statePaths","hasDependencyOn","variableUpdateCompleted","hasChanged","dependencyChanged","onAnyVariableChanged","onVariableUpdateCompleted","onReferencedVariableValueChanged","hasDependencyInLoadingState","scanStateForDependencies","setVariableNames","varNames","variableNames","setPaths","extractVariablesFrom","safeStringifyValue","VariableValueRecorder","_values","recordCurrentDependencyValuesForSceneObject","clearValues","cloneAndRecordCurrentValuesForSceneObject","hasValues","recordCurrentValue","hasRecordedValue","hasValueChanged","isVariableValueEqual","hasDependenciesChanged","isExtraQueryProvider","passthroughProcessor","getEnrichedDataRequest","sourceRunner","enrichDataRequest","originalGetAdhocFilters","allActiveFilterSets","registerQueryWithController","queryStream","queryControler","Observable","complete","queryStarted","markedAsCompleted","Loading","queryCompleted","allActiveGroupByVariables","setBaseClassState","MultiValueVariable","MultiValueUrlSyncHandler","validateAndUpdate","getValueOptions","pipe","updateValueGivenNewOptions","onCancel","setStateHelper","loading","sceneVarSet","currentText","stateUpdate","getStateUpdateGivenNewOptions","interceptStateUpdateAfterValidation","hasAllValue","defaultToAll","validValues","validTexts","getDefaultMultiState","matchingOption","textMatch","findOptionMatchingCurrent","isAllValueFix","skipNextValidation","allValue","CustomAllValue","changeValueTo","findLabelTextForValue","optionByLabel","getOptionsForSelect","getKey","urlValue","handleLegacyUrlAllValue","_variable","Components","RadioButton","Breadcrumbs","breadcrumb","TimePicker","openButton","overlayContent","fromField","toField","applyTimeRange","copyTimeRange","pasteTimeRange","calendar","absoluteTimeRangeTitle","DataSourcePermissions","form","roleType","rolePicker","permissionLevel","DateTimePicker","DataSource","TestData","QueryTab","scenarioSelectContainer","scenarioSelect","noise","spread","startValue","drop","DataSourceHttpSettings","urlInput","Jaeger","traceIDInput","Prometheus","configPage","connectionSettings","manageAlerts","scrapeInterval","queryTimeout","defaultEditor","disableMetricLookup","prometheusType","prometheusVersion","cacheLevel","incrementalQuerying","queryOverlapWindow","disableRecordingRules","customQueryParameters","httpMethod","exemplarsAddButton","internalLinkSwitch","codeModeMetricNamesSuggestionLimit","queryEditor","explain","editorToggle","legend","exemplars","builder","metricSelect","hints","metricsExplorer","queryAdvisor","queryField","metricsCountInfo","metricsBrowser","selectMetric","metricList","labelNamesFilter","labelValuesFilter","useAsRateQuery","validateSelector","exemplarMarker","variableQueryEditor","queryType","labelnames","metricRegex","labelSelect","metricNames","varQueryResult","seriesQuery","classicQuery","annotations","minStep","seriesValueAsTimestamp","MenuComponent","SubMenu","Panels","Panel","headerItems","menuItems","containerByTitle","headerCornerInfo","loadingBar","HoverWidget","dragIcon","PanelDataErrorMessage","Visualization","Graph","VisualizationTab","legendSection","Legend","legendItemAlias","showLegendSwitch","xAxis","BarGauge","valueV2","PieChart","svgSlice","footer","VizLegend","seriesName","Drawer","General","close","rcContentWrapper","DashboardSaveDrawer","saveButton","saveAsButton","saveAsTitleInput","PanelEditor","OptionsPane","fieldLabel","fieldInput","DataPane","applyButton","toggleVizPicker","toggleVizOptions","toggleTableView","showZoomField","showAttributionField","showScaleField","showMeasureField","showDebugField","measureButton","PanelInspector","Data","Stats","Json","refreshButton","jsonObjectKeys","RefreshPicker","runButton","intervalButton","runButtonV2","intervalButtonV2","queryInspectorButton","queryHistoryButton","addQuery","queryGroupTopSection","addExpression","QueryHistory","queryText","QueryEditorRows","rows","QueryEditorRow","actionButton","AlertTab","AlertRules","groupToggle","toggle","expandedContent","previewButton","ruleNameField","newFolderButton","newFolderNameField","newFolderNameCreateButton","newEvaluationGroupButton","newEvaluationGroupName","newEvaluationGroupInterval","newEvaluationGroupCreate","alert","alertV2","TransformTab","newTransform","transformationEditor","transformationEditorDebugger","Transforms","card","disableTransformationButton","Reduce","modeLabel","calculationsLabel","SpatialOperations","actionLabel","locationLabel","autoOption","coords","latitudeFieldLabel","longitudeFieldLabel","geohash","geohashFieldLabel","lookupFieldLabel","gazetteerFieldLabel","searchInput","noTransformationsMessage","addTransformationButton","removeAllTransformationsButton","NavBar","Configuration","Toggle","Reporting","NavMenu","NavToolbar","shareDashboard","markAsFavorite","editDashboard","editButton","exitButton","settingsButton","addRowButton","addLibraryPanelButton","addVisualizationButton","pastePanelButton","discardChangesButton","discardLibraryPanelButton","unlinkLibraryPanelButton","saveLibraryPanelButton","backToDashboardButton","PageToolbar","itemButton","QueryEditorToolbarItem","BackButton","backArrow","OptionsGroup","PluginVisualization","singleValue","FieldConfigEditor","OverridesConfigEditor","FolderPicker","containerV2","ReadonlyFolderPicker","DataSourcePicker","inputV2","dataSourceList","advancedModal","builtInDataSourceList","TimeZonePicker","changeTimeSettingsButton","WeekStartPicker","TraceViewer","spanBar","QueryField","QueryBuilder","queryPatterns","inputSelect","valueSelect","matchOperatorSelect","ValuePicker","Search","section","sectionV2","itemsV2","cards","collapseFolder","sectionId","expandFolder","dashboardItem","dashboardItems","dashboardCard","folderHeader","folderName","folderContent","DashboardLinks","dropDown","LoadingIndicator","CallToActionCard","buttonV2","DataLinksContextMenu","singleLink","CodeEditor","ReactMonacoEditor","editorLazy","DashboardImportPage","textarea","submit","ImportDashboardForm","PanelAlertTabContent","VisualizationPreview","ColorSwatch","DashboardRow","UserProfile","profileSaveButton","preferencesSaveButton","orgsTable","sessionsTable","extensionPointTabs","extensionPointTab","tabId","FileUpload","inputField","fileNameSpan","DebugOverlay","OrgRolePicker","AnalyticsToolbarButton","Variables","variableOption","Annotations","annotationsTypeInput","annotationsChoosePanelInput","editor","testButton","resultContainer","Tooltip","ReturnToPrevious","buttonGroup","backButton","dismissButton","SQLQueryEditor","selectColumn","selectAggregation","selectAlias","filterConjunction","filterField","filterOperator","headerTableSelector","headerFilterSwitch","headerGroupSwitch","headerOrderSwitch","headerPreviewSwitch","Pages","Login","username","password","Home","saveAndTest","DataSources","dataSources","dataSourceName","EditDataSource","dataSourceUid","settings","AddDataSource","dataSourcePlugins","pluginName","dataSourcePluginsV2","ConfirmModal","AddDashboard","addNewPanel","addNewRow","addNewPanelLibrary","Dashboard","DashNav","nav","navV2","publicDashboardTag","shareButton","scrollContainer","newShareButton","shareLink","arrowMenu","shareInternally","playlistControls","Controls","submenu","submenuItem","submenuItemLabels","submenuItemValueDropDownValueLinkTexts","submenuItemValueDropDownDropDown","submenuItemValueDropDownOptionTexts","annotationsWrapper","annotationLabel","annotationToggle","Settings","Actions","deleteDashBoard","sectionItems","saveDashBoard","saveAsDashBoard","List","addAnnotationCTA","addAnnotationCTAV2","NewAnnotation","panelFilterSelect","showInLabel","previewInDashboard","enable","hide","addVariableCTA","addVariableCTAV2","newButton","tableRowNameFields","tableRowDefinitionFields","tableRowArrowUpButtons","tableRowArrowDownButtons","tableRowDuplicateButtons","tableRowRemoveButtons","Edit","headerLink","modeLabelNew","modeLabelEdit","generalNameInput","generalNameInputV2","generalTypeSelect","generalTypeSelectV2","generalLabelInput","generalLabelInputV2","generalHideSelect","generalHideSelectV2","selectionOptionsMultiSwitch","selectionOptionsIncludeAllSwitch","selectionOptionsCustomAllInput","previewOfValuesOption","submitButton","QueryVariable","queryOptionsDataSourceSelect","queryOptionsRefreshSelect","queryOptionsRefreshSelectV2","queryOptionsRegExInput","queryOptionsRegExInputV2","queryOptionsSortSelect","queryOptionsSortSelectV2","queryOptionsQueryInput","valueGroupsTagsEnabledSwitch","valueGroupsTagsTagsQueryInput","valueGroupsTagsTagsValuesQueryInput","ConstantVariable","constantOptionsQueryInput","constantOptionsQueryInputV2","DatasourceVariable","datasourceSelect","TextBoxVariable","textBoxOptionsQueryInput","textBoxOptionsQueryInputV2","CustomVariable","customValueInput","IntervalVariable","intervalsValueInput","autoEnabledCheckbox","stepCountIntervalSelect","minIntervalInput","GroupByVariable","dataSourceSelect","infoText","modeToggle","AdHocFiltersVariable","marker","Rows","Repeated","ConfigSection","warningMessage","Dashboards","dashboards","SaveDashboardAsModal","newName","SaveDashboardModal","saveVariables","saveTimerange","saveRefresh","SharePanelModal","linkToRenderedImage","ShareDashboardModal","PublicDashboard","WillBePublicCheckbox","LimitedDSCheckbox","CostIncreaseCheckbox","PauseSwitch","EnableAnnotationsSwitch","CreateButton","DeleteButton","CopyUrlInput","CopyUrlButton","SettingsDropdown","TemplateVariablesWarningAlert","UnsupportedDataSourcesWarningAlert","NoUpsertPermissionsWarningAlert","EnableTimeRangeSwitch","EmailSharingConfiguration","Container","ShareType","EmailSharingInput","EmailSharingInviteButton","EmailSharingList","DeleteEmail","ReshareLink","PublicDashboardScene","SnapshotScene","PublishSnapshot","NotAvailable","pausedDescription","loadingPage","controls","RequestViewAccess","recipientInput","PublicDashboardConfirmAccess","Explore","scrollView","SoloPanel","PluginsList","listItem","signatureErrorNotice","signatureInfo","disabledInfo","PlaylistForm","itemDelete","BrowseDashboards","checkbox","NewFolderForm","nameInput","createButton","FolderView","PublicDashboards","ListItem","linkButton","configButton","trashcanButton","pauseSwitch","UserListPage","tabs","allUsers","orgUsers","anonUserDevices","publicDashboardsUsers","users","org","admin","publicDashboards","UserListAdminPage","UsersListPage","UserAnonListPage","UsersListPublicDashboardsPage","DashboardsListModal","ProfilePage","selectors","components","getOptionSearcher","allOptions","filteredOptions","filterNoOp","VariableValueSelect","isReadOnly","inputValue","setInputValue","hasCustomValue","setHasCustomValue","selectValue","toSelectableValue","optionSearcher","isValidNewOption","inputValue2","allowCustomValue","virtualized","filterOption","tabSelectsValue","onInputChange","value2","onSearchChange","onOpenMenu","onCloseMenu","__isNew__","VariableValueSelectMulti","maxVisibleValues","noValueOnClear","arrayValue","uncommittedValue","setUncommittedValue","MultiSelect","noMultiValueWrap","closeMenuOnSelect","Option","OptionWithCheckbox","isClearable","hideSelectedOptions","onBlur","innerProps","isSelected","renderOptionLabel","selectStyles","getSelectStyles","optionStyles","getOptionStyles","optionFocused","Checkbox","optionBody","renderSelectForVariable","GroupByVariableUrlSyncHandler","texts","toUrlCommaDelimitedString","values2","unescapeUrlDelimiters","getEnrichedFiltersRequest","enrichFiltersRequest","initialState","baseFilters","applyMode","isLazy","_getKeys","override","getTagKeysProvider","getTagKeys","getQueriesForVariables","otherFilters","tagKeyRegexFilter","_updateValueGivenNewOptions","__sceneObject","mergeMap","take","arrayText","isFetchingOptions","setIsFetchingOptions","isOptionsOpen","setIsOptionsOpen","isOpen","lastValueFrom","role","ControlsLabel","isVertical","loadingIndicator","errorIndicator","errorIcon","descriptionIndicator","normalIcon","testId","labelElement","verticalLabel","htmlFor","horizontalLabel","border","borderColor","selectableValueToVariableValueOption","keyLabelToOption","AdHocFilterRenderer","setKeys","setValues","isKeysLoading","setIsKeysLoading","isValuesLoading","setIsValuesLoading","isKeysOpen","setIsKeysOpen","isValuesOpen","setIsValuesOpen","valueInputValue","setValueInputValue","valueHasCustomValue","setValueHasCustomValue","keyValue","keyLabel","valueValue","valueLabel","filteredValueOptions","allowCreateWhileLoading","formatCreateLabel","widthWhenOpen","_updateFilter","autoFocus","openMenuOnFocus","_getValuesFor","keySelect","keys2","_removeFilter","_getOperators","removeButton","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","flexShrink","borderLeft","boxSizing","AdHocFilterBuilder","addFilterButtonText","_wip","_addWip","AdHocFiltersVariableUrlSyncHandler","isFilterComplete","escapeUrlPipeDelimiters","isFilter","deserializeUrlToFilters","_operatorLabel","key2","condition","filterExpression","renderExpression","expressionBuilder","_dataSourceSrv","filterVar","templateSrv","getTemplateSrv","getAdhocFilters","dsName","getInstanceSettings","patchGetAdhocFilters","filterExpressionChanged","propLabelKey","updatedFilters","updatedFilter","currentKey","defaultKeys","useQueriesAsFilterForOptions","getTagValuesProvider","handleOptionGroups","getTagValues","renderPrometheusLabelFilters","rowGap","filterIcon","groupedResults","groupLabel","DataLayersMerger","_resultsMap","_prevLayers","getMergedStream","layers","areDifferentLayers","resultStreams","deactivationHandlers","layer","mergeAll","finalize","counter","getNextRequestId","SceneQueryRunner","_dataLayersMerger","_variableValueRecorder","_results","ReplaySubject","onVariableUpdatesCompleted","onDataReceived","preProcessedData","preProcessPanelData","_resultAnnotations","dataWithLayersApplied","_combineDataLayers","hasFetchedData","_hasFetchedData","providers","getClosestExtraQueryProviders","provider","shouldRerun","runQueries","subscribeToTimeRangeChanges","shouldRunQueriesOnActivate","_dataLayersSub","_handleDataLayers","_onDeactivate","dataLayers","_onLayersReceived","dataLayerFilter","alertState","alertStates","dataTopic","DataTopic","AlertStates","panelId","frameIdx","panelIdField","sourceField","sourceFilter","ids","processed","frameLength","filterAnnotations","frameView","DataFrameView","allFramesEmpty","_layerAnnotations","baseStateUpdate","_adhocFiltersVar","_groupByVar","_isRelevantAutoVariable","findFirstDatasource","_isDataTimeRangeStale","stateTimeRange","dataTimeRange","_querySub","_timeSub","_timeSubRange","setContainerWidth","_containerWidth","maxDataPointsFromWidth","maxDataPoints","isDataReadyToDisplay","runWithTimeRange","getMaxDataPoints","cancelQuery","findAndSubscribeToAdHocFilters","runRequest","getRunRequest","secondaries","prepareRequests","secondaryStreams","processedSecondaries","requestId","forkJoin","extraQueryProcessingOperator","errors","toDataQueryError","_setNoDataState","minInterval","targets","cloneDeep","liveStreaming","rangeRaw","cacheTimeout","queryCachingTTL","groupByKeys","mixed","isExpressionReference","lowerIntervalLimit","norm","rangeUtil","calculateInterval","__interval","__interval_ms","primaryTimeRange","secondaryRequests","secondaryProcessors","req","processor","getExtraQueries","filtersVar","dsUid","findActiveAdHocFilterVariableByUid","_updateExplicitVariableDependencies","groupByVar","groupByVariable","findActiveGroupByVariablesByUid","explicitDependencies","getCircularReplacer","escapeLabelValueInExactSelector","RE2_METACHARACTERS","escapeLokiRegexp","renderFilter","labelValue","sourceObject","runners","applicableRunners","groupedItems","activeItems","filterOutInactiveRunnerDuplicates","escapeUrlCommaDelimiters","VariableRefresh","VariableRefresh2","DashboardCursorSync","DashboardCursorSync2","CursorSync","Off","getEventsBus","panel","PanelContextEventBus","getEventsScope","_source","_eventsOrigin","getStream","newScopedBus","getChromeStatusMessage","pluginLoadingError","relativeWrapper","absoluteWrapper","getAlertStateStyles","success","warning","alerting","displayOverrideRef","isHideSeriesOverride","isSystemOverrideWithRef","createOverride","ByNamesMatcherMode","viz","__systemRef","FieldMatcherID","byNames","getExistingDisplayNames","getDisplayNames","excludeName","unique","getNamesOfHiddenFields","fieldMatchers","byName","createProperty","FieldColorModeId","Fixed","fixedColor","VizPanel","_structureRev","liveNowTimer","LiveNowTimer","sceneTimeRange","isEnabled","getPlugin","skipDataQuery","onTitleChange","onDescriptionChange","onDisplayModeChange","displayMode","onOptionsChange","optionsUpdate","nextOptions","mergeWith","srcValue","withDefaults","getPanelOptionsWithDefaults","_plugin","currentOptions","currentFieldConfig","isAfterPluginChange","onFieldConfigChange","fieldConfigUpdate","nextFieldConfig","_dataWithFieldConfig","scoped","getDescription","interaction","markdown","renderMarkdown","onCancelQuery","onStatusMessageClick","_onSeriesColorChange","currentIndex","overridesCopy","existing","propertyIndex","propertiesCopy","changeSeriesColorConfigFactory","_onSeriesVisibilityChange","SeriesVisibilityChangeMode","ToggleSelection","override3","override2","nameOfHiddenFields","createExtendedOverride","allFieldsAreExcluded","seriesVisibilityConfigFactory","_onInstanceStateChange","_panelContext","instanceState","_pluginInstanceState","_onToggleLegendSort","sortKey","legendOptions","sortDesc","sortBy","_loadPlugin","getPanelPluginFromCache","getPluginImportUtils","loadPanelPluginSync","_pluginLoaded","importPanelPlugin","PanelPlugin","getPanelPluginNotFound","_pluginLoadError","getLegacyPanelId","pluginVersion","_UNSAFE_customMigrationHandler","currentVersion","_getPluginVersion","onPanelMigration","getPanelContext","buildPanelContext","clearFieldConfigCache","applyFieldConfig","rawData","_prevData","pluginDataSupport","dataSupport","fieldConfigRegistry","prevFrames","newFrames","theme2","compareArrayValues","compareDataFrameStructures","structureRev","eventsScope","eventBus","CoreApp","Unknown","onSeriesColorChange","onToggleSeriesVisibility","onToggleLegendSort","onInstanceStateChange","extendPanelContext","hoverHeader","hoverHeaderOffset","headerActions","titleItems","appEvents","setPanelAttention","SetPanelAttentionEvent","debouncedMouseMove","debounce","dragClass","dragClassCancel","parentLayout","ancestor","itemDraggingDisabled","getDragClass","getDragClassCancel","getDragClasses","dataObject","dataWithFieldConfig","titleInterpolated","alertStateStyles","PanelComponent","panelMenu","actionsElement","titleItemsElement","titleItem","PanelChrome","TitleItem","AlertState","OK","Pending","Alerting","isReadyToRender","loadingState","statusMessage","statusMessageOnClick","noPadding","ErrorBoundaryAlert","dependencies","PluginContextProvider","PanelContextProvider","transparent","renderCounter","onChangeTimeRange","_LiveNowTimer","timerId","_activationHandler","panels","REFRESH_RATE","disable","getMessageFromError","isFetchError","SceneDataLayerBase","variableDependencyStatePaths","onActivate","onEnable","shouldRunLayerOnActivate","runLayer","querySub","onDisable","onDeactivate","publishResults","DataLayerControlSwitch","elementId","showLoading","containerStyle","InlineSwitch","operate","lift","hasLift","liftedSource","createImpl","ctorFunc","UnsubscriptionError","arrRemove","initialTeardown","closed","_parentage","_finalizers","e_1","e_2","_parentage_1","_parentage_1_1","e_1_1","return","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","_hasParent","_addParent","_removeParent","EMPTY","isSubscription","onUnhandledError","onStoppedNotification","useDeprecatedSynchronousErrorHandling","useDeprecatedNextContext","timeoutProvider","delegate","reportUnhandledError","COMPLETE_NOTIFICATION","createNotification","Subscriber","destination","isStopped","EMPTY_OBSERVER","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_error","_complete","_bind","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","context_1","errorThrown","captureError","notification","subscriber","createOperatorSubscriber","onNext","onComplete","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","project","isArrayLike","observable","identity","_subscribe","isObserver","isRoot","errorContext","_trySubscribe","sink","promiseCtor","getPromiseCtor","operations","toPromise","innerFrom","isInteropObservable","obs","isAsyncIterable","fromAsyncIterable","isIterable","iterable","iterable_1","iterable_1_1","getReader","isReadableStreamLike","readableStream","releaseLock","readableStreamLikeToAsyncGenerator","createInvalidObservableTypeError","asyncIterable","asyncIterable_1","asyncIterable_1_1","resultSelector","concurrent","onBeforeNext","innerSubScheduler","additionalFinalizer","isComplete","checkComplete","outerNext","doInnerSub","innerComplete","innerValue","_loop_1","bufferedValue","mergeInternals","standardAnnotationSupport","prepareAnnotation","prepareQuery","anno","processEvents","standardTransformers","mergeTransformer","hasTime","hasText","evts","alertEventAndAnnotationFields","AnnotationEventFieldSource","Skip","setter","events","getAnnotationsFromData","annotationEventNames","help","publicDashboardAccessToken","legacyRunner","isPanelAlert","_timeRangeSub","annotationQuery","shouldUseLegacyRunner","annotation","dashboard","annotationWithDefaults","getDefaultQuery","processedQuery","__annotation","queryRequest","panelData","executeAnnotationQuery","resolveDataSource","processedEvents","snapshotData","processedItem","visualization","getColorByName","iconColor","isRegion","timeEnd","postProcessQueryResult","dedup","partition","eventsById","eventGroup","dedupAnnotations","arrayToDataFrame","isHidden","SceneDataLayerSetBase","subscribeToAllLayers","_onLayerUpdateReceived","combinedData","SceneDataLayerSet","oldState","SceneDataTransformer","reprocessTransformations","activationHandler","sourceData","getSourceData","_transformSub","_prevDataFromSource","haveAlreadyTransformedData","force","transformations","seriesTransformations","transformation","topic","Series","annotationsTransformations","streams","transformDataFrame","transformedSeries","transformedAnnotations","catchError","sourceErr","transformationError","transformedData","VariableValueSelectWrapper","showAlways","hideLabel","VariableHide","hideVariable","verticalContainer","VariableLabel","labelOrName","SceneVariableSet","_variablesThatHaveChanged","_variablesToUpdate","_updating","SceneVariableSetVariableDependencyHandler","_handleParentVariableUpdatesCompleted","_handleVariableValueChanged","_refreshTimeRangeBasedVariables","_onStateChanged","_checkForVariablesThatChangedWhileInactive","_variableNeedsUpdate","_updateNextBatch","subscription","variablesToUpdateCountStart","updating","refresh","onTimeRangeChanged","writeVariableTraceLog","_addDependentVariablesToUpdateQueue","variableToUpdate","_validateAndUpdateCompleted","_handleVariableError","_notifyDependentSceneObjects","variableThatChanged","otherVariable","_traverseSceneAndNotify","isAncestorLoading","_variableUpdatesCompleted","_emptySet","DataSourceVariable","getList","metrics","interpolated","stringToJsRegex","defaultOptionEnabled","hasLegacyVariableSupport","metricFindQuery","hasStandardVariableSupport","getType","VariableSupportType","Standard","variableSupport","toDataQuery","hasCustomVariableSupport","StandardQueryRunner","_runRequest","getTarget","ensureVariableQueryModelIsADataQuery","getEmptyMetricFindValueObservable","LegacyQueryRunner","searchFilter","CustomQueryRunner","getAllMatches","onDashboardLoad","VariableSort","_updateOptionsBasedOnSearchFilter","runner","createQueryVariableRunner","getRequest","firstValue","isDataFrame","firstValueKey","areMetricFindValues","processedDataFrames","getProcessedDataFrames","valueIndex","textIndex","stringIndex","expandableIndex","boolean","expandable","variableRegEx","_f","valueGroup","textGroup","firstMatch","manyMatches","uniqBy","sortOrder","sortByNumeric","sortByNaturalSort","options2","localeCompare","alphabeticalAsc","alphabeticalDesc","numericalAsc","numericalDesc","alphabeticalCaseInsensitiveAsc","toLower","alphabeticalCaseInsensitiveDesc","naturalAsc","naturalDesc","sortVariableValues","metricNamesToVariableValues","__searchFilter","buildMetricTree","queryTree","queryIndex","nodeQuery","namesToMatch","nameToMatch","queryMetricTree","VariableValueInput","onKeyDown","AutoSizeInput","completeUpdate","Subject","isGettingValues","getValueOptionsCount","delayMs","queryController","queryEntry","interpolatedQuery","getOptions","issuedQuery","signalUpdateCompleted","optionsToReturn","intervals","autoStepCount","autoMinInterval","autoEnabled","getAutoRefreshInteval","minRefreshInterval","shouldPublish","firstOption","UrlSyncManager","_urlKeyMapper","_stateSub","_locationSub","_ignoreNextLocationUpdate","_onLocationUpdate","_lastPath","_sceneRoot","getSearch","mappedUpdated","partial","initSync","getHistory","listen","syncFrom","cleanUp","sceneObj","urlSyncManager","getUrlSyncManager","EmbeddedScene","unsetGlobalScene","activeScene","prevScene","__grafanaSceneContext","setWindowGrafanaSceneContext","initUrlSync","control","VizPanelMenu","setItems","isSceneGridRow","SceneGridRow","focus","renderItems","items2","Group","subMenu","iconClassName","childItems","shortcut","SceneGridLayout","sliceIterator","slicedToArray","_React$PureComponent","_height","_width","_style","newHeight","newWidth","useUniqueId","idRefLazy","uniqueId","LazyLoader","onLoad","setLoaded","isInView","setIsInView","useImperativeHandle","effect","addCallback","isIntersecting","wrapperEl","callbacks","unobserve","IntersectionObserver","rootMargin","GridItemWrapper","totalCount","divProps","sceneChild","getSceneLayoutChild","getClassName","innerContent","updateAnimationClass","ResizeHandle","customCssClass","getResizeHandleStyles","viewBox","xmlns","strokeWidth","strokeLinecap","strokeLinejoin","svg","_SceneGridLayout","sortChildrenByPosition","_skipOnLayoutChange","_oldLayout","_loadOldLayout","nextSize","isItemSizeEqual","gridLayout","updatedItem","sortGridLayout","gridItem","childSize","indexOfUpdatedItem","newParent","findGridItemSceneParent","newChildren","isRowDropValid","moveChildTo","toggleRow","isCollapsed","rowChildren","rowY","yDiff","yMax","newSize","pushDownAmount","pushChildDown","rowChild","startAt","nextSceneChild","currentParent","rootChildren","newRow","targetRow","toGridCell","buildGridLayout","cells","UNSAFE_fitPanels","visibleHeight","GRID_CELL_VMARGIN","scaleFactor","cell","fitPanelsInHeight","validateChildrenSize","isCollapsible","onCollapseToggle","getGridLayout","rowc","getSceneGridRowStyles","layoutDragClass","rowCollapsed","rowTitleAndActionsGroup","rowTitleButton","rowTitle","panelCount","panelCountCollapsed","rowActions","dragHandle","borderBottom","collapsedInfo","opacity","transition","fontStyle","onToggle","isSceneLayoutItem","canCollapse","canRemove","gridRow","toolbarControls","ToolbarButton","SceneTimePicker","onZoom","zoomedTimeRange","factor","timespan","center","newTimespan","getZoomedTimeRange","onChangeFiscalYearStartMonth","onMoveBackward","getShiftedTimeRange","TimeRangeDirection","Backward","onMoveForward","Forward","hidePicker","isOnCanvas","timeRangeState","TimeRangePicker","onChangeTimeZone","TimeRangeDirection2","dir","upperLimit","oldTo","oldFrom","halfSpan","fromRaw","toRaw","DEFAULT_INTERVALS","SceneRefreshPicker","autoValue","isRunning","cancelAll","_intervalTimer","setupIntervalTimer","onIntervalChanged","setupAutoTimeRangeListener","calculateAutoRefreshInterval","resolution","_autoTimeRangeListener","autoRefreshInterval","intervalToMs","withText","useQueryControllerState","showAutoInterval","getCompareSeriesRefId","PREVIOUS_PERIOD_VALUE","NO_PERIOD_VALUE","PREVIOUS_PERIOD_COMPARE_OPTION","NO_COMPARE_OPTION","DEFAULT_COMPARE_OPTIONS","compareOptions","getCompareOptions","diffDays","matchIndex","onCompareWithChanged","onClearCompare","extraQueries","compareRange","getCompareTimeRange","timeRangeCompare","timeShiftAlignmentProcessor","compareFrom","compareTo","diffMs","subtract","previousCompare","setPreviousCompare","previousValue","ButtonSelect","timeCompare","isTimeShiftQuery","palette","gray60","performRepeat","seriesIndex","layoutChild","getLayoutChild","getMultiVariableValues","_SceneControlsSpacer","SceneFlexLayout","toggleDirection","parentState","_h","_j","applyItemStyles","alignContent","down","useLayoutStyle","SceneFlexItem","parentDirection","xSizing","ySizing","alignSelf","useLayoutItemStyle","SceneCSSGridLayout","templateColumns","autoRows","_k","gridTemplateColumns","gridTemplateRows","templateRows","gridAutoRows","justifyItems","SceneCSSGridItem","gridColumn","VERTICAL_KEYS","HORIZONTAL_KEYS","propsForDirection","dim","Splitter","initialSize","primaryPaneStyles","secondaryPaneStyles","onDragFinished","kids","splitterRef","firstPaneRef","secondPaneRef","containerRef","containerSize","primarySizeRef","firstPaneMeasurements","savedPos","measurementProp","clientAxis","minDimProp","maxDimProp","throttleWait","throttledCallback","resizeObserver","box","useResizeObserver","isSameNode","curSize","newDims","measureElement","ariaValueNow","dragStart","onPointerDown","setPointerCapture","pointerId","onPointerMove","dims","newFlex","onPointerUp","releasePointerCapture","pressedKeys","keysLastHandledAt","handlePressedKeys","dx","sizeChange","firstPaneDims","initiateAnimationLoop","onKeyUp","onDoubleClick","visibilitySecond","handleHorizontal","tabIndex","visibility","userSelect","main","outline","savedBodyOverflow","savedWidth","savedHeight","savedFlex","SplitLayout","Prim","Sec","startSize","Switch","Route","SceneReactObject","DebugDetails","keyName","valueAsNumber","JSONFormatter","renderValue","DebugTreeNode","selectedObject","onSelect","selected","radius","backgroundImage","gradients","brandVertical","SceneDebugger","setIsOpen","setSelectedObject","onClose","panes","pane1","paneHeading","CustomScrollbar","autoHeightMin","treeWrapper","pane2","borderRight","SceneAppPageView","containerPage","SceneAppPage","getParentPageIfTab","containerState","useLocation","locationSearchToObject","useAppQueryParams","getScene","isInitialized","initializedScene","initializeScene","titleImg","titleIcon","preserveUrlKeys","hideFromBreadcrumbs","parentItem","getParentBreadcrumbs","getParentPage","tab","tabSuffix","pageActions","renderTitle","SceneAppDrilldownViewRender","drilldown","getDrilldownPage","component","reactNode","_sceneCache","_drilldownCache","routeMatch","getPage","drilldowns","routePath","isExact","fallbackPage","getFallbackPage","getFallbackRoute","VisibilityMode2","StackingMode2","VizOrientation2","BigValueColorMode2","BigValueGraphMode2","BigValueJustifyMode2","BigValueTextMode2","PercentChangeColorMode2","TooltipDisplayMode2","TableCellHeight2","None","Gradient","maxVizHeight","minVizHeight","minVizWidth","namePlacement","showUnfilled","sizing","valueMode","Single","bucketCount","bucketOffset","fillOpacity","gradientMode","lineWidth","Value","Area","Sm","StandardFieldConfigOverridesBuilder","_overrides","overrideColor","overrideDecimals","overrideDisplayName","overrideFilterable","overrideLinks","overrideMappings","overrideMax","overrideMin","overrideNoValue","overrideThresholds","overrideUnit","FieldConfigOverridesBuilder","matchFieldsWithName","matchFieldsWithNameByRegex","byRegexp","matchFieldsByType","byType","matchFieldsByQuery","byFrameRefID","matchFieldsByValue","byValue","matchComparisonQuery","overrideCustomFieldConfig","_id","FieldConfigBuilder","defaultFieldConfig","_fieldConfig","_overridesBuilder","setDefaults","setColor","setFieldConfigDefaults","setDecimals","decimals","setDisplayName","setFilterable","setLinks","setMappings","setMax","setNoValue","noValue","setThresholds","thresholds","setUnit","setCustomFieldConfig","setOverrides","PanelOptionsBuilder","VizPanelBuilder","_fieldConfigBuilder","_panelOptionsBuilder","setTitle","setDescription","setDisplayMode","setHoverHeader","setMenu","setHeaderActions","setTimeRange","setVariables","setBehaviors","behaviors","PanelBuilders","sceneUtils","prepareHistoryEntry","history","pushState","EventTimeseriesDataReceived","FilterKind","OperatorKind","FilterPartKind","SuggestionKind","SpecialTargets","ActionTypes","Start","Stop","raise","Raise","Send","Cancel","nullEvent","NullEvent","Assign","After","DoneState","Log","Init","invoke","Invoke","errorPlatform","ErrorExecution","ErrorPlatform","ErrorCustom","Update","choose","Choose","Pure","EMPTY_ACTIVITY_MAP","DEFAULT_GUARD_TYPE","matchesState","parentStateId","childStateId","delimiter","parentStateValue","toStateValue","childStateValue","getEventType","toStatePath","stateId","stateValue","pathToStateValue","statePath","mapValues","collection","collectionKeys","mapFilterValues","props_1","props_1_1","toStatePaths","flatten","subStateValue","subPath","toArrayStrict","mapContext","mapper","_event","e_5","subMapper","e_5_1","isPromiseLike","updateHistoryStates","hist","subHist","updateContext","assignActions","updatedContext","assignAction","e_7","assignment","propAssignment","e_7_1","toGuard","guardMap","symbolObservable","toEventObject","toSCXMLEvent","scxmlEvent","$$type","eventObject","toTransitionConfigArray","configLike","transitionLike","evaluateGuard","machine","guard","guards","guardMeta","cond","condFn","toInvokeSource","toObserver","nextHandler","errorHandler","completionHandler","createInvokeId","stateNodeId","isRaisableAction","Internal","isLeafNode","stateNode","getAllChildren","getChildren","sn","getAllStateNodes","stateNodes","getConfiguration","prevStateNodes","e_3","e_4","prevAdjList","getAdjList","configuration","configuration_1","configuration_1_1","adjList","configuration_2","configuration_2_1","initialStateNodes","e_3_1","configuration_3","configuration_3_1","e_4_1","getValueFromAdj","childStateNodes","childStateNode","csn","configuration_4","configuration_4_1","rootNode","isInFinalState","getTagsFromConfiguration","initEvent","getActionFunction","actionType","actionFunctionMap","toActionObject","actionObject","toActionObjects","subAction","toActivityDefinition","DoneInvoke","resolveActions","currentContext","actionBlocks","predictableExec","preserveActionOrder","actionBlocks_1","actionBlocks_1_1","block","pluckAssigns","preservedContexts","deferredToBlockEnd","handleAction","blockType","raisedAction","delaysMap","resolvedDelay","resolvedEvent","configDelay","resolveRaise","delays","sendAction","resolvedTarget","resolveSend","configuredDelay","expr","resolveLog","matchedActions","conds","resolvedActionsFromChoose","resolvedContextFromChoose","resolvedActionsFromPure","resolvedContext","actorRefOrString","activity","resolvedActorRef","resolveStop","resolvedActionObject","exec_1","contextIndex_1","wrapped","_ctx","resolvedActions","stateValuesEqual","activities","_sessionid","historyValue","toStrings","transitions","ownEvents","nextEvents","inert","valueKeys","jsonValues","hasTag","can","transitionData","getTransitionData","serviceStack","provide","createNullActor","getSnapshot","entity","tempActor","initialState_1","withContext","toInvokeDefinition","invokeConfig","onDone","invokeDef","simpleSrc","NULL_EVENT","WILDCARD","EMPTY_OBJECT","isStateId","StateNode","_context","_stateInfo","__xstatenode","__cache","relativeValue","initialStateValue","candidates","delayedTransitions","idMap","services","parallel","schema","stateConfig","dfs","_transient","always","strict","onEntry","onExit","exit","doneData","invokeId","invokeSource","_init","withConfig","getDelayedTransitions","formatTransitions","getCandidates","eventName","transient","sameEventType","afterConfig","after","mutateEntryExit","delayRef","idSuffix","sendId","configTransition","resolvedTransition","delayedTransition","formatTransition","getStateNodes","getStateNode","subStateKeys","subStateNodes","subStateKey","handles","resolveState","stateFromConfig","transitionLeafNode","transitionCompoundNode","_transition","transitionParallelNode","transitionMap","stateTransitions","enabledTransitions","exitSet","selectedTransition","nextStateNodes","candidate","stateIn","in","isInState","getStateNodeById","guardPassed","allNextStateNodes","getRelativeStateNodes","internal","targetNode","getPotentiallyReenteringNodes","possibleAncestor","getActions","resolvedConfig","isDone","prevConfig","entrySet","prevConfig_1","prevConfig_1_1","entryStates","exitStates","doneEvents","grandparent","entryActions","invokeActions","activityDef","actorRef","stopActions","resolvedStateValue","getResolvedPath","stateTransition","resolveTransition","resolveRaisedTransition","originalEvent","currentActions","e_6","willTransition","resolvedConfiguration","e_6_1","predictableActionArguments","truthy","falsy","items_1","items_1_1","raisedEvents","nonRaisedActions","invokeDefinition","invokeSrc","serviceCreator","resolvedData","createInvocableActor","didUpdateContext","changed","hasAlwaysTransitions","maybeNextState","raisedEvent","stateKey","resolvedStateId","STATE_IDENTIFIER","getStateNodeByPath","arrayStatePath","currentStateNode","subStateNode","stateIdentifier","getInitialState","historyConfig","relativeStateId","resolveHistory","initialPath","getFromRelativePath","relativePath","childStatePath","relativeStateValue","historyTarget","relativeChildPath","subHistoryValue","props_2","props_2_1","subStatePath","childStateIds","stateIds","e_8","e_9","event_1","e_9_1","e_8_1","resolveTarget","_target","isInternalTarget","transitionConfig","normalizedTarget","normalizeTarget","e_10","onConfig","wildcardConfigs","strictTransitionConfigs_1","transitionConfigArray","hasNonLastUnguardedTarget","eventText","validateArrayifiedTransitions","eventlessConfig","doneConfig","settleTransitions","formattedTransitions","delayedTransitions_1","delayedTransitions_1_1","e_10_1","warned","deferEvents","Scheduler","processingEvent","initialized","flushEvents","task","nextCallback","sessionIdIndex","registry","getGlobal","InterpreterStatus","DEFAULT_SPAWN_OPTIONS","autoForward","Interpreter","delayedEventsMap","contextListeners","stopListeners","doneListeners","eventListeners","sendListeners","NotStarted","forwardTo","_outgoingQueue","Stopped","Running","scheduler","forward","_nextState","sendTo","immediate","isParent","Parent","isActor","_exec","actionOrExec","sendAction_1","spawn","spawnActivity","stopChild","resolvedId","_initialState","actionsConfig","devTools","contextListener","finalChildStateNode","_doneEvent","_l","_m","_stop","_stopChildren","onTransition","nextListenerOrObserver","completeListener","completeOnce","onEvent","onSend","actor","resolvedState","attachDev","_o","_p","_q","exitActions","e_11","batchChanged","batchedActions","bindActionToState","events_1","events_1_1","e_11_1","sender","nextEvent","e_12","e_12_1","childId","spawnPromise","spawnCallback","spawnActor","isObservable","spawnObservable","spawnMachine","isBehavior","spawnBehavior","childService","doneEvent","mailbox","flushing","actorRefLike","toActorRef","actorCtx","handleError","canceled","errorData","errorEvent","originalError","currentError","originalStackTrace","reportUnhandledExceptionOnInvocation","unsubscribed","emitted","callbackStop","receivers","newListener","implementation","spawnEffect","__REDUX_DEVTOOLS_EXTENSION__","devToolsOptions","connect","autoPause","stateSanitizer","features","jump","__xstate__","getDevTools","register","registerService","interpret","nanoid","byte","DataSourceProxyClient","LabelsApiClient","queryToMatchers","labelsIndex","fetchLabels","_post","fetchLabelValues","labelId","MemoryCacheClient","buildCacheKey","store","invariant","AbstractRepository","setApiClient","apiClient","setCacheClient","cacheClient","LabelsRepository","parseLabelsResponse","isNotMetaLabelOrServiceName","parseLabelValuesResponse","assertParams","listLabels","cacheParams","labelsFromCacheP","fetchP","listLabelValues","labelValuesFromCacheP","labelsRepository","areFiltersEqual","newFilters","previousFilters","newFiltersWithoutPartial","previousFiltersWithoutPartial","IsEmptyFilter","buildIsEmptyFilter","filtersToQuery","labelsList","serviceNameLabel","getLastFilter","isMultipleValuesOperator","isPartialFilter","isEditingOperatorMode","currentOperator","newOperator","isSwitchingOperatorMode","filterUnderEdition","parseRawFilters","rawFilters","LABELS_REGEX","REGEX_CHARS_REGEX","queryToFilters","rawLabels","toggleCompleteFilters","updateFiltersAndQuery","isQueryUpToDate","inputParams","cancelAllLoad","setFilterAttribute","editFilterAttribute","filterId","setFilterOperator","editFilterOperator","newEdition","previousOperator","setFilterValue","editFilterValue","removeFilter","removeLastFilter","lastFilter","setEdition","changeInputParams","activateFilters","getFilterUnderEdition","shouldSuggestAttributes","shouldSuggestOperators","shouldSuggestValues","isEditing","shouldSuggestValuesAfterOperatorEdition","shouldNotSuggestValuesAfterOperatorEdition","hasPartialFilter","shouldEditAttribute","shouldEditOperator","shouldEditValue","operatorsRepository","isPrivateLabel","publicLabels","privateLabels","fetchOperators","targetFilter","suggestions","autoSuggestProxy","MESSAGES","FILTER_ADD","SELECT_LABEL","SELECT_OPERATOR","SELECT_VALUE","SELECT_VALUES","TYPE_VALUE","LOADING","ERROR_LOAD","SUGGESTIONS_NONE","SUGGESTIONS_DISABLED","isRegexOperator","idle","defaultContext","START_INPUT","EDIT_FILTER","REMOVE_FILTER","REMOVE_LAST_FILTER","CHANGE_INPUT_PARAMS","EXECUTE_QUERY","loadLabels","isVisible","DISCARD_SUGGESTIONS","displayLabels","SELECT_SUGGESTION","loadLabelValues","displayLabelValues","targetOperator","noOptionsMessage","loadOperators","displayOperators","buildStateMachine","initialContext","stateMachine","createMachine","placeSelectedValuesFirst","aIsSelected","bIsSelected","MultipleEditionSelect","selectionValues","selectionLabels","sortedOptions","newValues","onInternalCloseMenu","editionSelect","loadingMessage","backspaceRemovesValue","SingleEditionInput","inputRef","setInvalid","SingleEditionSelect","ChicletAttributeOperator","chiclet","inactiveChiclet","Tag","chicletAttribute","chicletOperator","chicletRemoveButton","ChicletAttributeOperatorValue","chicletValue","PartialChiclet","partialChiclet","activeBackgroundColor","inactiveBorderColor","maxContrast","ChicletComponent","Chiclet","chicletsList","editChicletContainer","ChicletsListComponent","onClickChiclet","onRemoveChiclet","onChangeSingleSuggestion","onCloseSingleSuggestionsMenu","onCloseMultipleSuggestionsMenu","ChicletsList","SingleSelect","useEnsureIsOpenHack","DisabledSelect","MultipleSelect","onInternalKeyDown","queryBuilder","executeButton","QueryBuilderComponent","internalProps","onChangeQuery","setInternalProps","useStateMachine","useChicletHandlers","onSingleSelectKeyDown","onCloseSingleMenu","onMultipleSelectKeyDown","onCloseMultipleMenu","queryBuilderId","suggestion","previousSuggestionsIsVisible","blur","useSelectHandlers","onClickExecute","autoExecute","getProfileMetric","profileMetricId","PROFILE_METRICS","PYROSCOPE_DATA_SOURCE","PYROSCOPE_SERIES_DATA_SOURCE","PYROSCOPE_FAVORITES_DATA_SOURCE","PYROSCOPE_LABELS_DATA_SOURCE","ProfileMetricVariable","DEFAULT_VALUE","buildCascaderOptions","optionsMap","profileMetric","nameSpaceServices","QUERY_DEFAULT","QUERY_SERVICE_NAME_DEPENDENT","cascaderOptions","iconError","Cascader","separator","displayAllSelectedLevels","initialValue","changeOnSelect","ServiceNameVariable","serviceName","serviceNameFromStorage","selectNewValue","filterKey","FiltersVariable","QUERY_PROFILE_METRIC_DEPENDENT","serviceNames","serviceId","currentPart","currentValues","existingOption","newOption","buildServiceNameCascaderOptions","useBuildPyroscopeQuery","ProfilesDataSourceVariable","convertPyroscopeToVariableFilter","searchForFilter","filtersWithoutFound","addToFilters","filterToAdd","includeLabelValue","filterForInclude","foundValues","excludeLabelValue","filterForExclude","clearLabelValue","filterForClear","filteredValues","isFilterValid","dataSourceSub","operators","uniq","getSceneVariableValue","PanelType","ScenePanelTypeSwitcher","panelType","DEFAULT_PANEL_TYPE","getColorByIndex","visTheme","OPTIONS","fullWidth","getSeriesLabelFieldName","metricField","getSeriesStatsValue","buildTimeSeriesQueryRunner","completeFilters","profileTypeId","labelSelector","Queue","dequeue","validateConcurrency","POSITIVE_INFINITY","computeRoundedTimeRange","activeCount","resumeNext","function_","arguments_","internalResolve","pendingCount","clearQueue","newConcurrency","pLimit","LabelsDataSource","getParams","labelsWithValuesAndCount","sortedLabels","MAX_TIMESERIES_LABEL_VALUES","addRefId","addStats","totalSeriesCount","allValuesSum","sortSeries","d1","d2","d1Sum","limitNumberOfSeries","SceneLabelValuesBarGauge","getConfig","NEGATIVE_INFINITY","groupByLabel","queryRunnerParams","reduceOptions","calcs","orientation","VizOrientation","Horizontal","Manual","titleSize","valueSize","Top","showLegend","ThresholdsMode","Percentage","steps","getOverrides","startColorIndex","SceneLabelValuesHistogram","legendPlacement","TooltipDisplayMode","LegendDisplayMode","formattedValue","SceneLabelValuesTimeseries","buildMenu","displayAllValues","getAllValuesConfig","selectedScaleIndex","scaleSubMenu","scaleDistribution","Linear","onClickScaleOption","axisLabel","Opacity","pointSize","newTitle","vizPanelBuilder","BARGAUGE","HISTOGRAM","TIMESERIES","styleToObject","nextKey","_$0","$2","nextValue","noTextChildNodes","possibleStandardNames","acceptcharset","allowfullscreen","autocapitalize","autocomplete","autocorrect","autofocus","autoplay","autosave","cellpadding","cellspacing","classid","classname","colspan","controlslist","crossorigin","dangerouslysetinnerhtml","datetime","defaultchecked","defaultvalue","enctype","formmethod","formaction","formenctype","formnovalidate","formtarget","frameborder","hreflang","htmlfor","httpequiv","innerhtml","inputmode","itemid","itemref","itemscope","itemtype","keyparams","keytype","marginwidth","marginheight","maxlength","mediagroup","minlength","nomodule","novalidate","playsinline","radiogroup","readonly","referrerpolicy","rowspan","spellcheck","srcdoc","srclang","srcset","typemustmatch","usemap","accentheight","alignmentbaseline","allowreorder","arabicform","attributename","attributetype","autoreverse","basefrequency","baselineshift","baseprofile","calcmode","capheight","clippath","clippathunits","cliprule","colorinterpolation","colorinterpolationfilters","colorprofile","colorrendering","contentscripttype","contentstyletype","diffuseconstant","dominantbaseline","edgemode","enablebackground","externalresourcesrequired","fillopacity","fillrule","filterres","filterunits","floodopacity","floodcolor","fontfamily","fontsize","fontsizeadjust","fontstretch","fontstyle","fontvariant","fontweight","glyphname","glyphorientationhorizontal","glyphorientationvertical","glyphref","gradienttransform","gradientunits","horizadvx","horizoriginx","imagerendering","kernelmatrix","kernelunitlength","keypoints","keysplines","keytimes","lengthadjust","letterspacing","lightingcolor","limitingconeangle","markerend","markerheight","markermid","markerstart","markerunits","markerwidth","maskcontentunits","maskunits","numoctaves","overlineposition","overlinethickness","paintorder","pathlength","patterncontentunits","patterntransform","patternunits","pointerevents","pointsatx","pointsaty","pointsatz","preservealpha","preserveaspectratio","primitiveunits","refx","refy","renderingintent","repeatcount","repeatdur","requiredextensions","requiredfeatures","shaperendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stopcolor","stopopacity","strikethroughposition","strikethroughthickness","strokedasharray","strokedashoffset","strokelinecap","strokelinejoin","strokemiterlimit","strokewidth","strokeopacity","suppresscontenteditablewarning","suppresshydrationwarning","surfacescale","systemlanguage","tablevalues","targetx","targety","textanchor","textdecoration","textlength","textrendering","underlineposition","underlinethickness","unicodebidi","unicoderange","unitsperem","unselectable","valphabetic","vectoreffect","vertadvy","vertoriginx","vertoriginy","vhanging","videographic","viewbox","viewtarget","vmathematical","wordspacing","writingmode","xchannelselector","xheight","xlinkactuate","xlinkarcrole","xlinkhref","xlinkrole","xlinkshow","xlinktitle","xlinktype","xmlbase","xmllang","xmlnsxlink","xmlspace","ychannelselector","zoomandpan","onblur","onchange","onclick","oncontextmenu","ondoubleclick","ondrag","ondragend","ondragenter","ondragexit","ondragleave","ondragover","ondragstart","ondrop","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onscroll","onsubmit","ontouchcancel","ontouchend","ontouchmove","ontouchstart","onwheel","parseChildren","childNodeList","convertFromNode","randomKey","randomString","reactKey","nodeClassNames","parseAttributes","childNodes","nodeText","nodeValue","allowWhiteSpaces","parentNodeName","getReactNode","includeAllNodes","nodeOnly","DOMParser","parseFromString","node2","convertFromString","CACHE_NAME","STATUS","IDLE","LOADED","FAILED","READY","UNSUPPORTED","contentType","fileType","seconds","cacheStore","CacheStore","cacheName","usePersistentCache","REACT_INLINESVG_CACHE_NAME","REACT_INLINESVG_PERSISTENT_CACHE","caches","cacheApi","subscribers","onReady","fetchAndAddToPersistentCache","fetchAndAddToInternalCache","isCached","handleLoading","Request","retryCount","getNode","baseURL","preProcessor","uniquifyIDs","svgText","processSVG","SVGSVGElement","updateSVGAttributes","originalDesc","descElement","createElementNS","originalTitle","titleElement","replaceableAttributes","linkAttributes","isDataValue","ReactInlineSVG","cacheRequests","loader","uniqueHash","useReducer","previousState2","previousProps","previousState","character","handleLoad","loadedContent","hasCache","fetchContent","responseContent","getElement","convertedElement","isValidElement","getContent","dataURI","inlineSrc","atob","decodeURIComponent","cachedContent","firstChild","namespaceURI","supportsInlineSVG","elementProps","output","omit","InlineSVG","hasCallback","setReady","GrotNotFound","show404","throttleInterval","updateMousePosition","useMousePosition","SVG","xPos","yPos","heightRatio","widthRatio","rotation","getIntermediateValue","transformOrigin","EmptyState","Box","paddingY","SceneEmptyState","SceneErrorState","LayoutType","SceneLayoutSwitcher","DEFAULT_LAYOUT","SceneNoDataSwitcher","hideNoData","showLabel","checked","SceneQuickFilter","setPlaceholder","setResultsCount","resultsCount","searchText","DEFAULT_SEARCH_TEXT","clearSearchText","DEBOUNCE_DELAY","getProfileMetricLabel","FavoritesDataSource","getAllFavorites","favorites","areFavoritesEqual","f1","f2","favorite","addFavorite","removeFavorite","textParts","interpolateQueryRunnerVariables","interpolatedParams","parsedFilters","FavAction","isFav","isStored","buildFavorite","skipVariablesInterpolation","favAfterClick","favedButton","notFavedbutton","tooltipPlacement","sortFavGridItems","aIsFav","bIsFav","GRID_AUTO_ROWS","SceneByVariableRepeaterGrid","buildGridItemKey","getGridColumnsTemplate","ROWS","variableSub","renderGridItems","refreshSub","subscribeToRefreshClick","quickFilterSub","subscribeToQuickFilterChange","layoutChangeSub","subscribeToLayoutChange","hideNoDataSub","subscribeToHideNoDataChange","filtersSub","subscribeToFiltersChange","originalRefresh","never","onClickRefresh","quickFilter","layoutSwitcher","onChangeState","noDataSwitcher","filtersVariable","buildItemsData","mapOptionToItem","variableValues","filterItems","sortItemsFn","shouldRenderItems","renderErrorState","renderEmptyState","gridItems","vizPanel","setupHideNoData","gridItemKey","filteredChildren","quickFilterScene","Crosshair","EventExpandPanel","EventSelectLabel","EventViewServiceFlameGraph","EventViewServiceLabels","EventViewServiceProfiles","Events","ariaLabel","EventConstructor","SelectAction","buildEvent","selectButton","SceneExploreAllServices","getVariablesAndGridControls","gridControls","SceneDrawer","closeOnMaskClick","FavoriteVariable","SceneExploreFavorites","expandPanelSub","openExpandedPanelDrawer","drawer","SceneMainServiceTimeseries","buildTitle","MIN_HEIGHT","EventViewDiffFlameGraph","GroupBySelector","mainLabels","labelSelectorRequiredWidth","setLabelSelectorRequiredWidth","availableWidth","setAvailableWidth","useHorizontalLabelSelector","controlsContainer","resizeObserverInstance","mainOptions","otherOptions","textWidth","noIntervalPicker","MAX_MAIN_LABELS","groupByOptions","groupByErrorContainer","getMainLabels","EventSelectForCompare","CompareAction","checkboxRef","showTooltip","setShowTooltip","closest","onMouseEnter","show","tooltipAnchor","StatsPanel","itemStats","statsDescription","compareActionChecks","onChangeCompareTarget","inline","compareActions","SceneStatsPanel","SceneGroupByLabels","getCompare","updateCompareActions","getStatsDescription","baselineItem","comparisonItem","getStats","updateStats","compareTarget","WIDTH_IN_PIXELS","SceneLabelValuePanel","buildPanelKey","statsPanel","timeseriesPanel","timeseriesSub","buildLabelValuesGridQueryRunner","SceneLabelValuesGrid","subscribeOnceToDataChange","groupBySub","subscribeToGroupByChange","dataSub","refetchData","labelName","buildVizPanel","EventClearLabelFromFilters","EventExcludeLabelFromFilters","EventIncludeLabelInFilters","FilterButtonsComponent","include","onInclude","onExclude","onClear","isIncludeSelected","isExcludeSelected","getStatus","aria-selected","includeButton","excludeButton","FilterButtons","IncludeExcludeAction","CompareControls","onClickCompare","onClickClear","compareIsDisabled","hasSelection","arial-label","compareButton","clearButton","clearButtonActive","medium","initVariablesAndControls","renderBody","panelEventsSub","subscribeToPanelEvents","panelTypeChangeSub","selectLabelSub","selectLabel","selectForCompareSub","selectForCompare","includeFilterSub","includeLabelValueInFilters","excludeFilterSub","excludeLabelValueFromFilters","clearFilterSub","clearLabelValueFromFilters","subscribeToPanelTypeChange","groupByVariableState","switchToLabelNamesGrid","switchToLabelValuesGrid","buildSceneLabelNamesGrid","clearCompare","buildSceneLabelValuesGrid","groupByValue","filterToInclude","filterToExclude","filterToClear","updateStatsPanels","statsPanels","updateCompareFilters","baselineQueryRunnerParams","comparisonQueryRunnerParams","onClickCompareButton","onClickClearCompareButton","groupByVariableValue","SceneProfilesExplorer","sceneControls","SceneExploreServiceLabels","initVariables","profileMetricVariable","SceneExploreServiceProfileTypes","buildTimeRange","formatSeriesToProfileMetrics","pyroscopeSeries","profileMetricsMap","profileMetrics","formatSeriesToServices","servicesSet","DataSourceProxyClientBuilder","ApiClientClass","cacheKey","cachedInstance","clientInstance","findServiceNameAndProfileMetricId","formatSeriesResponse","labelsSet","serviceProfileMetrics","profileMetricServices","SeriesApiClient","labelNames","seriesRepository","responseFromCacheP","SeriesDataSource","fetchSeries","seriesApiClient","RangeAnnotation","MutableDataFrame","addRange","addField","TimeRangeWithAnnotationsMode","TIMERANGE_NIL","SceneTimeRangeWithAnnotations","getAncestorTimeRange","getTimeseries","updateTimeseriesAnnotation","annotationTimeRange","annotationColor","annotationTitle","setAnnotationTimeRange","updateTimeseries","nullifyAnnotationTimeRange","diffFrom","diffTo","buildAnnotationTimeRange","EventSwitchTimerangeSelectionMode","TimerangeSelectionMode","SwitchTimeRangeSelectionModeAction","newMode","dd","buildCompareTimeSeriesQueryRunner","BASELINE_COLORS","COLOR","OVERLAY","COMPARISON_COLORS","SceneComparePanel","useAncestorTimeRange","buildTimeseriesTitle","eventSub","subscribeToEvents","buildTimeSeriesPanel","getDiffRange","systemDateFormats","fullDate","ANNOTATIONS","switchSub","FLAMEGRAPH","DEFAULT","timeRangeSub","useDiffTimeRange","applyPreset","setDiffRange","$diffTimeRange","autoSelectDiffRange","selectWholeRange","timePicker","refreshPicker","timeseries","panelHeader","h6","colorCircle","useToggleSidePanel","openPanelId","setOpenPanelId","onOpenHandler","setOnOpenHandler","onOpen","MutationObserver","mutate","isIdle","DEFAULT_SETTINGS","maxNodes","enableFunctionDetails","SettingsApiClient","setting","PLUGIN_SETTING_NAME","newSettings","settingsApiClient","useFetchPluginSettings","mutateAsync","useMutation","mutateOptions","InlineBanner","DelayRender","shouldRender","setShouldRender","PanelMenu","menuButtonClass","onVisibleChange","handleVisibility","iconSize","narrow","draggableRef","e2eSelectors","menuOpen","setMenuOpen","square","draggableIcon","untitled","menuButton","hidden","boxShadow","shadows","z1","forwardRef","linkItem","headerHeight","getFocusStyles","outlineOffset","transitionTimingFunction","transitionDuration","transitionProperty","PanelDescription","interactive","panelDescription","wordWrap","PanelStatus","buttonStyles","GrafanaPanelBox","setWidth","childrenContainerRef","hasHeader","getHeaderHeight","contentStyle","getContentStyle","headerStyles","containerStyles","testid","headerContent","Streaming","streaming","pointer","rightAligned","rightActions","itemsRenderer","loadingBarContainer","LoadingBar","errorContainerFloating","headerContainer","menuItem","renderer","toRender","gridSize","hiddenMenu","shade","panelWrap","dataTestId","LLM_PLUGIN_ID","LLM_PLUGIN_ROUTE","LLM_PLUGIN_VERSION","OPENAI_CHAT_COMPLETIONS_PATH","isErrorResponse","accumulateContent","choices","accumulator","hasSeed","emitOnNext","emitBeforeComplete","hasState","scanInternals","scan","curr","streamChatCompletions","LiveChannelScope","Plugin","getGrafanaLiveSrv","isLiveChannelMessageEvent","tapObserver","isUnsub","inclusive","loggedWarning","healthDetails","getBackendSrv","showSuccessAlert","showErrorAlert","configured","details","logWarning","setLLMPluginVersion","openAI","health","AIButton","openai","useFetchLlmPluginStatus","aiButton","blockQuote","breakLine","breakThematic","codeBlock","codeFenced","codeInline","footnote","footnoteReference","gfmTask","heading","headingSetext","htmlBlock","htmlComment","htmlSelfClosing","image","linkAngleBraceStyleDetector","linkBareUrlDetector","linkMailtoDetector","newlineCoalescer","orderedList","paragraph","refImage","refLink","tableSeparator","textBolded","textEmphasized","textEscaped","textMarked","textStrikethroughed","unorderedList","HIGH","MED","LOW","MIN","amp","apos","nbsp","quot","ee","ne","ie","oe","ce","ae","se","de","ue","pe","fe","he","me","ge","ye","ke","xe","ve","be","simple","ordered","$e","Ee","we","Se","Ce","Ae","Oe","inTable","trimEnd","Te","Le","Re","ze","Me","Ie","Ue","endsWith","je","Be","Ne","He","De","Pe","Fe","We","Ge","slugify","namedCodesToUnicode","forceInline","forceBlock","forceWrapper","lang","attrs","completed","enforceAtxHeadings","noInnerParse","inAnchor","alt","fallbackChildren","disableParsingRawHTML","renderRule","Ze","onClickSearchTerm","searchInputElement","valueSetter","prototypeValueSetter","setNativeValue","textContent","bubbles","MARKDOWN_OPTIONS","searchLink","AiReply","reply","messages","Markdown","sendButton","FollowUpForm","onSubmit","question","onChangeInput","onClickSend","setQuestion","questionToSend","useFollowUpForm","TextArea","shiftKey","PromptCategories","prompts","system","single","profiles","anton","buildPrompts","systemPrompt","userPrompt","ProfileApiClient","until","SceneAiPanel","validateFetchParams","fetchParams","useSceneAiPanel","validationError","fetchError","profileApiClient","useFetchDotProfiles","llmError","setReply","replyHasStarted","setReplyHasStarted","replyHasFinished","setReplyHasFinished","setMessages","setError","setSubscription","sendMessages","messagesToSend","askFollowupQuestion","messagesToAdd","hasStarted","hasFinished","useOpenAiChatCompletions","shouldDisplayReply","shouldDisplayFollowUpForm","submitFollowupQuestion","sidePanel","retryButton","EventDiffAutoSelect","EventDiffChoosePreset","useMaxNodesFromUrl","pushNewUrl","useHistory","newParams","newSearchParams","useUrlSearchParams","setMaxNodes","newMaxNodes","hasMaxNodes","useSetDefaultMaxNodes","DiffProfileApiClient","leftQuery","leftFrom","leftTimeRange","leftUntil","rightQuery","rightFrom","rightTimeRange","rightUntil","useFetchDiffProfile","baselineTimeRange","baselineQuery","comparisonTimeRange","comparisonQuery","diffProfileApiClient","previousData","MissingSelectionsBanner","onClickAutoSelect","onClickChoosePreset","onOpenLearnHow","isCollapseOpen","setIsCollapseOpen","infoMsg","textButton","Collapse","collapsible","collapse","collapseContent","ol","SceneDiffFlameGraph","profileMetricType","aiPanel","useSceneDiffFlameGraph","useDiffTimeRanges","fetchSettingsError","isDiffQueryEnabled","fetchProfileError","noProfileDataAvailable","numTicks","shouldDisplayFlamegraph","hasMissingSelections","ai","wholeRange","isAiButtonDisabled","panelTitle","flamegraphPanel","FEEDBACK_FORM_URL","GiveFeedbackButton","feedback","Badge","ScenePresetsPicker","openSelect","isSelectOpen","closeSelect","isModalOpen","presetsContainer","PRESETS","onChangePreset","onOpenSelect","onCloseSelect","onClickSave","Modal","closeOnEscape","closeOnBackdropClick","onDismiss","ButtonRow","SceneExploreDiffFlameGraph","autoSelectDiffRanges","presetsPicker","baselinePanel","comparisonPanel","maxima","updateTimeseriesAxis","VcsClient","githubLogin","authorizationCode","githubApp","clientID","GitSessionCookie","isUserTokenExpired","biasMs","expiry","getTime","decoded","isLegacy","tryDecode","oauthTokenMetadata","GITHUB_SESSION_COOKIE_NAME","InternalGitSessionCookieManager","getCookie","syncCookieWithBrowser","sessionCookie","setCookie","cookie","rawCookie","getCookieFromJar","deleteLegacyCookie","deleteCookie","jar","ck","gitSessionCookieManager","POPUP_WIDTH","POPUP_HEIGHT","vcsClient","privateVcsClient","externalWindow","setExternalWindow","clientId","oauthURL","redirect_uri","buildGitHubAuthURL","screenX","screenY","openLoginPopup","authFromUrl","urlSearchParams","DEFAULT_GITHUB_CONTEXT","isLoginInProgress","isLoggedIn","isSessionExpired","GitHubContext","createContext","PLACEHOLDER_COMMIT_DATA","sha","avatarURL","PrivateVcsClient","repositoryUrl","gitRef","localPath","rootPath","postWithRefresh","repositoryURL","commits","getCommit","refreshSession","isRefreshing","queueRequest","sessionManager","BIAS_MS","flushQueue","pendingQueue","GitHubContextProvider","setIsLoginInProgress","setSessionCookie","useGithubSessionCookie","checkPopup","tryGetWindowSearchParams","usePollGitHubPopup","newIsLoginInProgress","buildFlameGraphQueryRunner","parseQuery","labelsSelector","PprofRequest","profile_typeID","label_selector","max_nodes","PprofApiClient","buildPprofRequest","selectMergeProfile","selectMergeProfileJson","stackTraceSelector","call_site","dateString","SceneExportMenu","fetchFlamebearerProfile","fetchPprofProfile","pprofApiClient","Response","pipeThrough","useSceneExportMenu","downloadPprof","useGitHubContext","useContext","buildSuggestionPrompts","functionDetails","cum","codeInfoToAnnotatedCode","AiSuggestionsPanel","suggestionPromptInputs","useOpenAiSuggestions","useAiSuggestionsPanel","buildGithubUrlForFunction","startLine","newUrl","repo","VERTICAL_LINES_PADDING","useCodeContainer","openAiSuggestions","setOpenAiSuggestions","fileInfo","repository","getFile","useFetchVCSFile","fileName","git_ref","root_path","callSitesMap","callSites","allLines","firstLineIndex","lastLineIndex","lineNumber","callSite","buildLineProfiles","buildPlaceholderLineProfiles","isLoadingCode","githubUrl","noCodeAvailable","buildUnitFormatter","Code","onOptimizeCodeClick","formatted","trimIndentPrefix","sumSelf","sumTotal","accSelf","accTotal","breakdownLabel","buttons","LinkButton","highlighted","codeBlockHeader","formatLine","padStart","commonPrefix","getIndentPrefix","longestCommonPrefix","prefixLen","CodeContainer","scrollIntoView","ellipsis","GitHubRepository","enableIntegration","commitUrl","commitName","getCommitsWithSamples","functionsDetails","totalSamples","GITHUB_URL","getRepositoryDetails","isGitHub","functionVersion","buildDetails","stringTable","buildId","sampleType","fetchCommitsInfo","getCommits","getTotalSum","sortByTotal","useFetchFunctionsDetails","isGitHubLogged","queryError","pprof","fnName","locations","functions","sample","locationId","locationIdSet","functionId","mappingId","convertSample","convertPprofToFunctionDetails","CUTOFFS","UNITS","RTF","RelativeTimeFormat","DTF","firstLine","secondLine","avatar","CommitOption","commitAuthor","commitAuthorAvatarUrl","samplePercent","getCommitShortSha","commitDate","timeMs","deltaSeconds","unitIndex","cutoff","divisor","getRelativeTimeString","getCommitShortMessage","CommitOptionSelected","CommitSelect","selectedCommit","isSearchable","formatOptionLabel","formatOption","formatOptionMeta","GitHubIntegrationBanner","buttonContent","TextLink","external","InlineSpinnerComponent","InlineSpinner","SceneFunctionDetailsPanel","useSceneFunctionDetailsPanel","currentFunctionDetails","fetchFunctionDetailsError","prevFunctionsDetails","setPrevFunctionsDetails","setCurrentFunctionDetails","isGitHubBannerDismissed","setIsGitHubBannerDismissed","isGitHubRepo","isGitHubSupported","shouldDisplayGitHubBanner","selectCommit","copyFilePathToClipboard","dismissGitHubBanner","LABEL_WIDTH","InlineLabel","textValue","SceneFlameGraph","dataSubscription","stateSubscription","newDataState","lastTimeRange","exportMenu","functionDetailsPanel","useSceneFlameGraph","$dataState","isFetchingSettingsError","isFetchingProfileData","hasProfileData","export","gitHub","gitHubIntegration","isFunctionDetailsEnabled","setStacktrace","getExtraFlameGraphMenuItems","levelItem","dp","buildStackTrace","useGitHubIntegration","SceneExploreServiceFlameGraph","mainTimeseries","onClickShareLink","shareableUrl","builsShareableUrl","ExplorationTypeSelector","activeIndex","explorationTypeContainer","extraClasses","arrow","Header","chromeHeaderHeight","useChromeHeaderHeight","explorationType","onChangeExplorationType","timePickerControl","refreshPickerControl","ExplorationType","DIFF_FLAME_GRAPH","dataSourceVariable","bodySceneObject","sceneVariables","onClickUserSettings","referrer","useHeader","appControls","appControlsLeft","EXPLORATION_TYPE_OPTIONS","appControlsRight","appMiscButtons","sceneVariable","sceneVariableLabel","gridControl","eventsSub","setExplorationType","DEFAULT_EXPLORATION_TYPE","registerRuntimeDataSources","profilesSub","comesFromUserAction","labelsSub","flameGraphSub","diffFlameGraphSub","resetVariables","buildBodyScene","nextExplorationType","baselineFiltersVariable","comparisonFiltersVariable","existingFilters","timeRangeKey","useProfilesExplorer","ProfilesExplorerView","sceneProfilesExplorer","SettingsView","maxNodesFromUrl","currentSettings","setCurrentSettings","referrerRef","toggleCollapsedFlamegraphs","updateMaxNodes","toggleEnableFlameGraphDotComExport","toggleEnableFunctionDetails","saveSettings","goBack","backUrl","useSettingsView","Form","settingsForm","FieldSet","labelWidth","h4","fontWeightBold","NAVIGATION_ROUTES","Routes","interceptClick","useNavigationLinksUpdate","ADHOC_VIEW","Redirect","ErrorPage","faroEnvironment","getFaroEnvironment","userEmail","grafanaVersion","coreConfig","browserConfig","initialMetas","createMetas","makeCoreConfig","initFaro","pageContainer","AppPlugin","setRootPage","ErrorBoundary"],"sourceRoot":""}